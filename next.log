
> friendfinder@0.1.0 dev
> next dev

   â–² Next.js 15.5.0
   - Local:        http://localhost:3000
   - Network:      http://10.145.65.10:3000
   - Environments: .env.local
   - Experiments (use with caution):
     Â· optimizePackageImports

 âœ“ Starting...
 âœ“ Ready in 2.7s
 â—‹ Compiling / ...
 âœ“ Compiled / in 23.3s (1061 modules)
 GET / 200 in 27468ms
 â—‹ Compiling /api/auth/[...nextauth] ...
 âœ“ Compiled /api/auth/[...nextauth] in 7.2s (1360 modules)
[next-auth][warn][DEBUG_ENABLED] 
https://next-auth.js.org/warnings#debug_enabled
 GET /?id=2b94963f-5f22-42c1-a008-a39f55a4d0f2&vscodeBrowserReqId=1762403675898 200 in 1243ms
 GET / 200 in 460ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
 GET /api/auth/session 200 in 230ms
 â—‹ Compiling /api/friends/request ...
 âœ“ Compiled /api/friends/request in 6s (1375 modules)
(node:2116) [MONGOOSE] Warning: Duplicate schema index on {"userId":1} found. This is often due to declaring an index using both "index: true" and "schema.index()". Please remove the duplicate index definition.
(Use `node --trace-warnings ...` to show where the warning was created)
(node:2116) [MONGOOSE] Warning: Duplicate schema index on {"sessionId":1} found. This is often due to declaring an index using both "index: true" and "schema.index()". Please remove the duplicate index definition.
(node:2116) [MONGOOSE] Warning: Duplicate schema index on {"metadata.endTime":1} found. This is often due to declaring an index using both "index: true" and "schema.index()". Please remove the duplicate index definition.
(node:2116) [MONGOOSE] Warning: Duplicate schema index on {"sessionId":1} found. This is often due to declaring an index using both "index: true" and "schema.index()". Please remove the duplicate index definition.
(node:2116) [MONGOOSE] Warning: Duplicate schema index on {"status":1,"severity":-1,"createdAt":-1} found. This is often due to declaring an index using both "index: true" and "schema.index()". Please remove the duplicate index definition.
=== FRIEND REQUEST GET START ===
[next-auth][warn][DEBUG_ENABLED] 
https://next-auth.js.org/warnings#debug_enabled
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
Request type: received User: sayantan2@gmail.com
 GET /api/socket-health 200 in 6787ms
 â—‹ Compiling /api/users/me ...
 âœ“ Compiled /api/users/me in 782ms (1377 modules)
[next-auth][warn][DEBUG_ENABLED] 
https://next-auth.js.org/warnings#debug_enabled
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
ðŸ“¦ MongoDB connected successfully
ðŸ“¦ MongoDB connected successfully
ðŸ“¦ MongoDB connected successfully
ðŸ“¦ MongoDB connected successfully
ðŸ“¦ MongoDB connected successfully
ðŸ“¦ MongoDB connected successfully
âœ… Database connected
 GET /api/random-chat/queue 200 in 9790ms
 GET /api/messages/chats 200 in 9832ms
 GET /api/friends 200 in 9857ms
 POST /api/users/heartbeat 200 in 9975ms
âœ… Current user found: {
  id: new ObjectId('6901f85f42c5d010fa811206'),
  email: 'sayantan2@gmail.com',
  friendRequestsCount: 0,
  sentRequestsCount: 1
}
Processing received requests...
Raw friendRequests: []
Processed receivedRequests: []
Populating sender details...
Final populated requests: []
=== FRIEND REQUEST GET END (received) ===
 GET /api/friends/request?type=received 200 in 10157ms
 GET /api/users/me 200 in 3384ms
 â—‹ Compiling /_not-found ...
 âœ“ Compiled /_not-found in 6.8s (1591 modules)
(node:2116) [MONGOOSE] Warning: Duplicate schema index on {"sessionId":1} found. This is often due to declaring an index using both "index: true" and "schema.index()". Please remove the duplicate index definition.
(node:2116) [MONGOOSE] Warning: Duplicate schema index on {"metadata.endTime":1} found. This is often due to declaring an index using both "index: true" and "schema.index()". Please remove the duplicate index definition.
=== FRIEND REQUEST GET START ===
[next-auth][warn][DEBUG_ENABLED] 
https://next-auth.js.org/warnings#debug_enabled
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
Request type: sent User: sayantan2@gmail.com
âœ… Database connected
âœ… Current user found: {
  id: new ObjectId('6901f85f42c5d010fa811206'),
  email: 'sayantan2@gmail.com',
  friendRequestsCount: 0,
  sentRequestsCount: 1
}
Processing sent requests...
Raw sentRequests: [
  {
    from: new ObjectId('6901f85f42c5d010fa811206'),
    fromName: 'sayantan2',
    to: new ObjectId('6905adf16a22b7843b006183'),
    toName: 'sayantan3',
    status: 'pending',
    _id: new ObjectId('6905cdce14ad0d0f020b3985'),
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
Filtering sent request: { status: 'pending', to: new ObjectId('6905adf16a22b7843b006183') }
Mapping sent request: {
  from: new ObjectId('6901f85f42c5d010fa811206'),
  fromName: 'sayantan2',
  to: new ObjectId('6905adf16a22b7843b006183'),
  toName: 'sayantan3',
  status: 'pending',
  _id: new ObjectId('6905cdce14ad0d0f020b3985'),
  createdAt: 2025-11-01T09:07:26.707Z,
  updatedAt: 2025-11-01T09:07:26.707Z
}
Processed sentRequests: [
  {
    id: '6905cdce14ad0d0f020b3985',
    to: {
      id: '6905adf16a22b7843b006183',
      username: 'sayantan3',
      email: '',
      profilePicture: null
    },
    status: 'pending',
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
Populating recipient details...
Looking up recipient: 6905adf16a22b7843b006183
 GET /dashboard/random-chat 200 in 7748ms
 GET /dashboard 200 in 7687ms
Found recipient: sayantan3
Final populated sent requests: [
  {
    id: '6905cdce14ad0d0f020b3985',
    to: {
      id: '6905adf16a22b7843b006183',
      username: 'sayantan3',
      email: 'sayantan3@gmail.com',
      profilePicture: undefined
    },
    status: 'pending',
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
=== FRIEND REQUEST GET END (sent) ===
 GET /api/friends/request?type=sent 200 in 7456ms
 GET /api/random-chat/session 200 in 7771ms
 GET /dashboard/random-chat 200 in 891ms
 GET /dashboard 200 in 958ms
 GET /dashboard/random-chat 200 in 898ms
 GET /dashboard 200 in 227ms
 GET /socket.io?EIO=4&transport=polling&t=xvp0sge7 404 in 8707ms
 â—‹ Compiling /api/posts ...
 âœ“ Compiled /api/posts in 3.9s (2764 modules)
(node:2116) [MONGOOSE] Warning: Duplicate schema index on {"expiresAt":1} found. This is often due to declaring an index using both "index: true" and "schema.index()". Please remove the duplicate index definition.
 GET /api/socket-health 200 in 2781ms
 GET /socket.io?EIO=4&transport=polling&t=xw1zh6qw 404 in 649ms
 GET /api/posts 200 in 5414ms
 GET /api/posts 200 in 503ms
 GET /api/socket-health 200 in 54ms
 GET /socket.io?EIO=4&transport=polling&t=xw3pbuaw 404 in 178ms
 GET /api/socket-health 200 in 38ms
 GET /socket.io?EIO=4&transport=polling&t=xw58gg43 404 in 120ms
 GET /api/socket-health 200 in 56ms
 GET /socket.io?EIO=4&transport=polling&t=xw6tzuvf 404 in 177ms
=== FRIEND REQUEST GET START ===
[next-auth][warn][DEBUG_ENABLED] 
https://next-auth.js.org/warnings#debug_enabled
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
Request type: received User: sayantan2@gmail.com
âœ… Database connected
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
âœ… Current user found: {
  id: new ObjectId('6901f85f42c5d010fa811206'),
  email: 'sayantan2@gmail.com',
  friendRequestsCount: 0,
  sentRequestsCount: 1
}
Processing received requests...
Raw friendRequests: []
Processed receivedRequests: []
Populating sender details...
Final populated requests: []
=== FRIEND REQUEST GET END (received) ===
 GET /api/friends/request?type=received 200 in 225ms
=== FRIEND REQUEST GET START ===
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
Request type: sent User: sayantan2@gmail.com
âœ… Database connected
 GET /api/friends 200 in 308ms
âœ… Current user found: {
  id: new ObjectId('6901f85f42c5d010fa811206'),
  email: 'sayantan2@gmail.com',
  friendRequestsCount: 0,
  sentRequestsCount: 1
}
Processing sent requests...
Raw sentRequests: [
  {
    from: new ObjectId('6901f85f42c5d010fa811206'),
    fromName: 'sayantan2',
    to: new ObjectId('6905adf16a22b7843b006183'),
    toName: 'sayantan3',
    status: 'pending',
    _id: new ObjectId('6905cdce14ad0d0f020b3985'),
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
Filtering sent request: { status: 'pending', to: new ObjectId('6905adf16a22b7843b006183') }
Mapping sent request: {
  from: new ObjectId('6901f85f42c5d010fa811206'),
  fromName: 'sayantan2',
  to: new ObjectId('6905adf16a22b7843b006183'),
  toName: 'sayantan3',
  status: 'pending',
  _id: new ObjectId('6905cdce14ad0d0f020b3985'),
  createdAt: 2025-11-01T09:07:26.707Z,
  updatedAt: 2025-11-01T09:07:26.707Z
}
Processed sentRequests: [
  {
    id: '6905cdce14ad0d0f020b3985',
    to: {
      id: '6905adf16a22b7843b006183',
      username: 'sayantan3',
      email: '',
      profilePicture: null
    },
    status: 'pending',
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
Populating recipient details...
Looking up recipient: 6905adf16a22b7843b006183
 POST /api/users/heartbeat 200 in 347ms
Found recipient: sayantan3
Final populated sent requests: [
  {
    id: '6905cdce14ad0d0f020b3985',
    to: {
      id: '6905adf16a22b7843b006183',
      username: 'sayantan3',
      email: 'sayantan3@gmail.com',
      profilePicture: undefined
    },
    status: 'pending',
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
=== FRIEND REQUEST GET END (sent) ===
 GET /api/friends/request?type=sent 200 in 131ms
 GET /api/socket-health 200 in 43ms
 GET /socket.io?EIO=4&transport=polling&t=xw8bg311 404 in 109ms
 GET /api/socket-health 200 in 32ms
 GET /socket.io?EIO=4&transport=polling&t=xw9ultxx 404 in 107ms
 GET /api/socket-health 200 in 30ms
 GET /socket.io?EIO=4&transport=polling&t=xwbehg76 404 in 97ms
 GET /api/socket-health 200 in 34ms
 GET /socket.io?EIO=4&transport=polling&t=xwcxtkhv 404 in 106ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
 GET /api/socket-health 200 in 199ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
 GET /api/auth/session 200 in 275ms
 POST /api/users/heartbeat 200 in 492ms
 POST /api/users/heartbeat 200 in 548ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
(node:2116) [MONGOOSE] Warning: Duplicate schema index on {"userId":1} found. This is often due to declaring an index using both "index: true" and "schema.index()". Please remove the duplicate index definition.
(node:2116) [MONGOOSE] Warning: Duplicate schema index on {"sessionId":1} found. This is often due to declaring an index using both "index: true" and "schema.index()". Please remove the duplicate index definition.
(node:2116) [MONGOOSE] Warning: Duplicate schema index on {"metadata.endTime":1} found. This is often due to declaring an index using both "index: true" and "schema.index()". Please remove the duplicate index definition.
(node:2116) [MONGOOSE] Warning: Duplicate schema index on {"sessionId":1} found. This is often due to declaring an index using both "index: true" and "schema.index()". Please remove the duplicate index definition.
(node:2116) [MONGOOSE] Warning: Duplicate schema index on {"status":1,"severity":-1,"createdAt":-1} found. This is often due to declaring an index using both "index: true" and "schema.index()". Please remove the duplicate index definition.
=== FRIEND REQUEST GET START ===
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
Request type: received User: sayantan2@gmail.com
âœ… Database connected
 POST /api/users/heartbeat 200 in 615ms
âœ… Current user found: {
  id: new ObjectId('6901f85f42c5d010fa811206'),
  email: 'sayantan2@gmail.com',
  friendRequestsCount: 0,
  sentRequestsCount: 1
}
Processing received requests...
Raw friendRequests: []
Processed receivedRequests: []
Populating sender details...
Final populated requests: []
=== FRIEND REQUEST GET END (received) ===
 GET /api/friends/request?type=received 200 in 612ms
 GET /api/random-chat/queue 200 in 651ms
 GET /api/friends 200 in 659ms
 GET /api/users/me 200 in 651ms
=== FRIEND REQUEST GET START ===
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
 GET /socket.io?EIO=4&transport=polling&t=xwedqg73 404 in 1001ms
Request type: sent User: sayantan2@gmail.com
âœ… Database connected
âœ… Current user found: {
  id: new ObjectId('6901f85f42c5d010fa811206'),
  email: 'sayantan2@gmail.com',
  friendRequestsCount: 0,
  sentRequestsCount: 1
}
Processing sent requests...
Raw sentRequests: [
  {
    from: new ObjectId('6901f85f42c5d010fa811206'),
    fromName: 'sayantan2',
    to: new ObjectId('6905adf16a22b7843b006183'),
    toName: 'sayantan3',
    status: 'pending',
    _id: new ObjectId('6905cdce14ad0d0f020b3985'),
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
Filtering sent request: { status: 'pending', to: new ObjectId('6905adf16a22b7843b006183') }
Mapping sent request: {
  from: new ObjectId('6901f85f42c5d010fa811206'),
  fromName: 'sayantan2',
  to: new ObjectId('6905adf16a22b7843b006183'),
  toName: 'sayantan3',
  status: 'pending',
  _id: new ObjectId('6905cdce14ad0d0f020b3985'),
  createdAt: 2025-11-01T09:07:26.707Z,
  updatedAt: 2025-11-01T09:07:26.707Z
}
Processed sentRequests: [
  {
    id: '6905cdce14ad0d0f020b3985',
    to: {
      id: '6905adf16a22b7843b006183',
      username: 'sayantan3',
      email: '',
      profilePicture: null
    },
    status: 'pending',
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
Populating recipient details...
Looking up recipient: 6905adf16a22b7843b006183
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
Found recipient: sayantan3
Final populated sent requests: [
  {
    id: '6905cdce14ad0d0f020b3985',
    to: {
      id: '6905adf16a22b7843b006183',
      username: 'sayantan3',
      email: 'sayantan3@gmail.com',
      profilePicture: undefined
    },
    status: 'pending',
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
=== FRIEND REQUEST GET END (sent) ===
 GET /api/friends/request?type=sent 200 in 222ms
 GET /api/random-chat/session 200 in 268ms
 GET /api/socket-health 200 in 217ms
 GET /socket.io?EIO=4&transport=polling&t=xwg885bd 404 in 653ms
 GET /api/posts 200 in 1016ms
 GET /api/posts 200 in 383ms
 GET /api/socket-health 200 in 97ms
 GET /socket.io?EIO=4&transport=polling&t=xwhmnnjs 404 in 623ms
 GET /dashboard 200 in 490ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
 GET /api/auth/session 200 in 320ms
 GET /api/socket-health 200 in 391ms
 GET /api/posts 200 in 841ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
 GET /api/random-chat/queue 200 in 1539ms
 GET /api/messages/chats 200 in 1566ms
 GET /api/friends 200 in 1673ms
 POST /api/users/heartbeat 200 in 1764ms
=== FRIEND REQUEST GET START ===
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
Request type: received User: sayantan2@gmail.com
âœ… Database connected
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
âœ… Current user found: {
  id: new ObjectId('6901f85f42c5d010fa811206'),
  email: 'sayantan2@gmail.com',
  friendRequestsCount: 0,
  sentRequestsCount: 1
}
Processing received requests...
Raw friendRequests: []
Processed receivedRequests: []
Populating sender details...
Final populated requests: []
=== FRIEND REQUEST GET END (received) ===
 GET /api/friends/request?type=received 200 in 1503ms
 GET /api/users/me 200 in 1657ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
=== FRIEND REQUEST GET START ===
 GET /api/random-chat/session 200 in 809ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
Request type: sent User: sayantan2@gmail.com
âœ… Database connected
âœ… Current user found: {
  id: new ObjectId('6901f85f42c5d010fa811206'),
  email: 'sayantan2@gmail.com',
  friendRequestsCount: 0,
  sentRequestsCount: 1
}
Processing sent requests...
Raw sentRequests: [
  {
    from: new ObjectId('6901f85f42c5d010fa811206'),
    fromName: 'sayantan2',
    to: new ObjectId('6905adf16a22b7843b006183'),
    toName: 'sayantan3',
    status: 'pending',
    _id: new ObjectId('6905cdce14ad0d0f020b3985'),
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
Filtering sent request: { status: 'pending', to: new ObjectId('6905adf16a22b7843b006183') }
Mapping sent request: {
  from: new ObjectId('6901f85f42c5d010fa811206'),
  fromName: 'sayantan2',
  to: new ObjectId('6905adf16a22b7843b006183'),
  toName: 'sayantan3',
  status: 'pending',
  _id: new ObjectId('6905cdce14ad0d0f020b3985'),
  createdAt: 2025-11-01T09:07:26.707Z,
  updatedAt: 2025-11-01T09:07:26.707Z
}
Processed sentRequests: [
  {
    id: '6905cdce14ad0d0f020b3985',
    to: {
      id: '6905adf16a22b7843b006183',
      username: 'sayantan3',
      email: '',
      profilePicture: null
    },
    status: 'pending',
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
Populating recipient details...
Looking up recipient: 6905adf16a22b7843b006183
 GET /socket.io?EIO=4&transport=polling&t=xwjootau 404 in 858ms
Found recipient: sayantan3
Final populated sent requests: [
  {
    id: '6905cdce14ad0d0f020b3985',
    to: {
      id: '6905adf16a22b7843b006183',
      username: 'sayantan3',
      email: 'sayantan3@gmail.com',
      profilePicture: undefined
    },
    status: 'pending',
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
=== FRIEND REQUEST GET END (sent) ===
 GET /api/friends/request?type=sent 200 in 508ms
 GET /api/posts 200 in 1350ms
 GET / 200 in 541ms
 GET /api/socket-health 200 in 227ms
 GET /socket.io?EIO=4&transport=polling&t=xwmj5707 404 in 250ms
 GET /api/socket-health 200 in 55ms
 GET /socket.io?EIO=4&transport=polling&t=xwoogas8 404 in 168ms
 GET /api/socket-health 200 in 54ms
 GET /socket.io?EIO=4&transport=polling&t=xwpn0byk 404 in 155ms
 GET /api/socket-health 200 in 123ms
 GET /socket.io?EIO=4&transport=polling&t=xwqn3kv0 404 in 309ms
 â—‹ Compiling /dashboard/discover ...
 âœ“ Compiled /dashboard/discover in 9s (3182 modules)
 GET /api/socket-health 200 in 8842ms
 GET /dashboard/discover?method=bluetooth 200 in 14046ms
[next-auth][warn][DEBUG_ENABLED] 
https://next-auth.js.org/warnings#debug_enabled
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
 GET /api/auth/session 200 in 2092ms
 POST /api/users/heartbeat 200 in 2226ms
 GET /socket.io?EIO=4&transport=polling&t=xwykbv4u 404 in 2216ms
 POST /api/users/heartbeat 200 in 2256ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
(node:2116) [MONGOOSE] Warning: Duplicate schema index on {"userId":1} found. This is often due to declaring an index using both "index: true" and "schema.index()". Please remove the duplicate index definition.
(node:2116) [MONGOOSE] Warning: Duplicate schema index on {"sessionId":1} found. This is often due to declaring an index using both "index: true" and "schema.index()". Please remove the duplicate index definition.
(node:2116) [MONGOOSE] Warning: Duplicate schema index on {"metadata.endTime":1} found. This is often due to declaring an index using both "index: true" and "schema.index()". Please remove the duplicate index definition.
(node:2116) [MONGOOSE] Warning: Duplicate schema index on {"sessionId":1} found. This is often due to declaring an index using both "index: true" and "schema.index()". Please remove the duplicate index definition.
(node:2116) [MONGOOSE] Warning: Duplicate schema index on {"status":1,"severity":-1,"createdAt":-1} found. This is often due to declaring an index using both "index: true" and "schema.index()". Please remove the duplicate index definition.
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
 POST /api/users/heartbeat 200 in 567ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
 GET /api/random-chat/queue 200 in 627ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
 POST /api/users/heartbeat 200 in 694ms
 POST /api/users/heartbeat 200 in 787ms
 GET /api/auth/session 200 in 682ms
 GET /api/friends 200 in 768ms
=== FRIEND REQUEST GET START ===
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
Request type: received User: sayantan2@gmail.com
âœ… Database connected
âœ… Current user found: {
  id: new ObjectId('6901f85f42c5d010fa811206'),
  email: 'sayantan2@gmail.com',
  friendRequestsCount: 0,
  sentRequestsCount: 1
}
Processing received requests...
Raw friendRequests: []
Processed receivedRequests: []
Populating sender details...
Final populated requests: []
=== FRIEND REQUEST GET END (received) ===
 GET /api/friends/request?type=received 200 in 583ms
 â—‹ Compiling /api/users/bluetooth ...
 âœ“ Compiled /api/users/bluetooth in 5.1s (3187 modules)
[next-auth][warn][DEBUG_ENABLED] 
https://next-auth.js.org/warnings#debug_enabled
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
 GET /api/socket-health 200 in 5778ms
(node:2116) [MONGOOSE] Warning: Duplicate schema index on {"userId":1} found. This is often due to declaring an index using both "index: true" and "schema.index()". Please remove the duplicate index definition.
(node:2116) [MONGOOSE] Warning: Duplicate schema index on {"sessionId":1} found. This is often due to declaring an index using both "index: true" and "schema.index()". Please remove the duplicate index definition.
(node:2116) [MONGOOSE] Warning: Duplicate schema index on {"metadata.endTime":1} found. This is often due to declaring an index using both "index: true" and "schema.index()". Please remove the duplicate index definition.
(node:2116) [MONGOOSE] Warning: Duplicate schema index on {"sessionId":1} found. This is often due to declaring an index using both "index: true" and "schema.index()". Please remove the duplicate index definition.
(node:2116) [MONGOOSE] Warning: Duplicate schema index on {"status":1,"severity":-1,"createdAt":-1} found. This is often due to declaring an index using both "index: true" and "schema.index()". Please remove the duplicate index definition.
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
 GET /api/users/me 200 in 6010ms
 GET /api/users/wifi 200 in 6026ms
 GET /api/random-chat/queue 200 in 5615ms
 GET /api/random-chat/session 200 in 6036ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
=== FRIEND REQUEST GET START ===
 POST /api/users/heartbeat 200 in 520ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
Request type: received User: sayantan2@gmail.com
âœ… Database connected
=== FRIEND REQUEST GET START ===
 GET /api/friends 200 in 404ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
Request type: sent User: sayantan2@gmail.com
âœ… Database connected
âœ… Current user found: {
  id: new ObjectId('6901f85f42c5d010fa811206'),
  email: 'sayantan2@gmail.com',
  friendRequestsCount: 0,
  sentRequestsCount: 1
}
Processing received requests...
Raw friendRequests: []
Processed receivedRequests: []
Populating sender details...
Final populated requests: []
=== FRIEND REQUEST GET END (received) ===
 GET /api/friends/request?type=received 200 in 387ms
âœ… Current user found: {
  id: new ObjectId('6901f85f42c5d010fa811206'),
  email: 'sayantan2@gmail.com',
  friendRequestsCount: 0,
  sentRequestsCount: 1
}
Processing sent requests...
Raw sentRequests: [
  {
    from: new ObjectId('6901f85f42c5d010fa811206'),
    fromName: 'sayantan2',
    to: new ObjectId('6905adf16a22b7843b006183'),
    toName: 'sayantan3',
    status: 'pending',
    _id: new ObjectId('6905cdce14ad0d0f020b3985'),
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
Filtering sent request: { status: 'pending', to: new ObjectId('6905adf16a22b7843b006183') }
Mapping sent request: {
  from: new ObjectId('6901f85f42c5d010fa811206'),
  fromName: 'sayantan2',
  to: new ObjectId('6905adf16a22b7843b006183'),
  toName: 'sayantan3',
  status: 'pending',
  _id: new ObjectId('6905cdce14ad0d0f020b3985'),
  createdAt: 2025-11-01T09:07:26.707Z,
  updatedAt: 2025-11-01T09:07:26.707Z
}
Processed sentRequests: [
  {
    id: '6905cdce14ad0d0f020b3985',
    to: {
      id: '6905adf16a22b7843b006183',
      username: 'sayantan3',
      email: '',
      profilePicture: null
    },
    status: 'pending',
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
Populating recipient details...
Looking up recipient: 6905adf16a22b7843b006183
 GET /api/socket-health 200 in 346ms
 GET /api/users/bluetooth 200 in 6534ms
Found recipient: sayantan3
Final populated sent requests: [
  {
    id: '6905cdce14ad0d0f020b3985',
    to: {
      id: '6905adf16a22b7843b006183',
      username: 'sayantan3',
      email: 'sayantan3@gmail.com',
      profilePicture: undefined
    },
    status: 'pending',
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
=== FRIEND REQUEST GET END (sent) ===
 GET /api/friends/request?type=sent 200 in 444ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
 GET /api/users/me 200 in 1167ms
 GET /api/users/wifi 200 in 1083ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
=== FRIEND REQUEST GET START ===
 GET /api/random-chat/session 200 in 1109ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
Request type: received User: sayantan2@gmail.com
âœ… Database connected
âœ… Current user found: {
  id: new ObjectId('6901f85f42c5d010fa811206'),
  email: 'sayantan2@gmail.com',
  friendRequestsCount: 0,
  sentRequestsCount: 1
}
Processing received requests...
Raw friendRequests: []
Processed receivedRequests: []
Populating sender details...
Final populated requests: []
=== FRIEND REQUEST GET END (received) ===
 GET /api/friends/request?type=received 200 in 1155ms
 GET /api/friends 200 in 1193ms
 GET /api/socket-health 200 in 259ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
=== FRIEND REQUEST GET START ===
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
Request type: sent User: sayantan2@gmail.com
âœ… Database connected
 GET /api/users/bluetooth 200 in 378ms
âœ… Current user found: {
  id: new ObjectId('6901f85f42c5d010fa811206'),
  email: 'sayantan2@gmail.com',
  friendRequestsCount: 0,
  sentRequestsCount: 1
}
Processing sent requests...
Raw sentRequests: [
  {
    from: new ObjectId('6901f85f42c5d010fa811206'),
    fromName: 'sayantan2',
    to: new ObjectId('6905adf16a22b7843b006183'),
    toName: 'sayantan3',
    status: 'pending',
    _id: new ObjectId('6905cdce14ad0d0f020b3985'),
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
Filtering sent request: { status: 'pending', to: new ObjectId('6905adf16a22b7843b006183') }
Mapping sent request: {
  from: new ObjectId('6901f85f42c5d010fa811206'),
  fromName: 'sayantan2',
  to: new ObjectId('6905adf16a22b7843b006183'),
  toName: 'sayantan3',
  status: 'pending',
  _id: new ObjectId('6905cdce14ad0d0f020b3985'),
  createdAt: 2025-11-01T09:07:26.707Z,
  updatedAt: 2025-11-01T09:07:26.707Z
}
Processed sentRequests: [
  {
    id: '6905cdce14ad0d0f020b3985',
    to: {
      id: '6905adf16a22b7843b006183',
      username: 'sayantan3',
      email: '',
      profilePicture: null
    },
    status: 'pending',
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
Populating recipient details...
Looking up recipient: 6905adf16a22b7843b006183
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
Found recipient: sayantan3
Final populated sent requests: [
  {
    id: '6905cdce14ad0d0f020b3985',
    to: {
      id: '6905adf16a22b7843b006183',
      username: 'sayantan3',
      email: 'sayantan3@gmail.com',
      profilePicture: undefined
    },
    status: 'pending',
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
=== FRIEND REQUEST GET END (sent) ===
 GET /api/friends/request?type=sent 200 in 391ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
 GET /api/auth/session 200 in 178ms
 GET /socket.io?EIO=4&transport=polling&t=xx927fkv 404 in 1848ms
 POST /api/users/heartbeat 200 in 674ms
 POST /api/users/heartbeat 200 in 698ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
=== FRIEND REQUEST GET START ===
 GET /api/users/bluetooth 200 in 480ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
Request type: sent User: sayantan2@gmail.com
âœ… Database connected
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
âœ… Current user found: {
  id: new ObjectId('6901f85f42c5d010fa811206'),
  email: 'sayantan2@gmail.com',
  friendRequestsCount: 0,
  sentRequestsCount: 1
}
Processing sent requests...
Raw sentRequests: [
  {
    from: new ObjectId('6901f85f42c5d010fa811206'),
    fromName: 'sayantan2',
    to: new ObjectId('6905adf16a22b7843b006183'),
    toName: 'sayantan3',
    status: 'pending',
    _id: new ObjectId('6905cdce14ad0d0f020b3985'),
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
Filtering sent request: { status: 'pending', to: new ObjectId('6905adf16a22b7843b006183') }
Mapping sent request: {
  from: new ObjectId('6901f85f42c5d010fa811206'),
  fromName: 'sayantan2',
  to: new ObjectId('6905adf16a22b7843b006183'),
  toName: 'sayantan3',
  status: 'pending',
  _id: new ObjectId('6905cdce14ad0d0f020b3985'),
  createdAt: 2025-11-01T09:07:26.707Z,
  updatedAt: 2025-11-01T09:07:26.707Z
}
Processed sentRequests: [
  {
    id: '6905cdce14ad0d0f020b3985',
    to: {
      id: '6905adf16a22b7843b006183',
      username: 'sayantan3',
      email: '',
      profilePicture: null
    },
    status: 'pending',
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
Populating recipient details...
Looking up recipient: 6905adf16a22b7843b006183
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
Found recipient: sayantan3
Final populated sent requests: [
  {
    id: '6905cdce14ad0d0f020b3985',
    to: {
      id: '6905adf16a22b7843b006183',
      username: 'sayantan3',
      email: 'sayantan3@gmail.com',
      profilePicture: undefined
    },
    status: 'pending',
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
=== FRIEND REQUEST GET END (sent) ===
 GET /api/friends/request?type=sent 200 in 616ms
 GET /api/random-chat/queue 200 in 567ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
=== FRIEND REQUEST GET START ===
 GET /socket.io?EIO=4&transport=polling&t=xx9lvgfk 404 in 1195ms
 POST /api/users/heartbeat 200 in 692ms
 GET /api/friends 200 in 377ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
Request type: received User: sayantan2@gmail.com
âœ… Database connected
âœ… Current user found: {
  id: new ObjectId('6901f85f42c5d010fa811206'),
  email: 'sayantan2@gmail.com',
  friendRequestsCount: 0,
  sentRequestsCount: 1
}
Processing received requests...
Raw friendRequests: []
Processed receivedRequests: []
Populating sender details...
Final populated requests: []
=== FRIEND REQUEST GET END (received) ===
 GET /api/friends/request?type=received 200 in 297ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
 GET /socket.io?EIO=4&transport=polling&t=xxal9bbh 404 in 964ms
 GET /api/users/me 200 in 395ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
 GET /api/users/bluetooth 200 in 290ms
=== FRIEND REQUEST GET START ===
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
Request type: sent User: sayantan2@gmail.com
âœ… Database connected
 GET /api/random-chat/session 200 in 341ms
âœ… Current user found: {
  id: new ObjectId('6901f85f42c5d010fa811206'),
  email: 'sayantan2@gmail.com',
  friendRequestsCount: 0,
  sentRequestsCount: 1
}
Processing sent requests...
Raw sentRequests: [
  {
    from: new ObjectId('6901f85f42c5d010fa811206'),
    fromName: 'sayantan2',
    to: new ObjectId('6905adf16a22b7843b006183'),
    toName: 'sayantan3',
    status: 'pending',
    _id: new ObjectId('6905cdce14ad0d0f020b3985'),
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
Filtering sent request: { status: 'pending', to: new ObjectId('6905adf16a22b7843b006183') }
Mapping sent request: {
  from: new ObjectId('6901f85f42c5d010fa811206'),
  fromName: 'sayantan2',
  to: new ObjectId('6905adf16a22b7843b006183'),
  toName: 'sayantan3',
  status: 'pending',
  _id: new ObjectId('6905cdce14ad0d0f020b3985'),
  createdAt: 2025-11-01T09:07:26.707Z,
  updatedAt: 2025-11-01T09:07:26.707Z
}
Processed sentRequests: [
  {
    id: '6905cdce14ad0d0f020b3985',
    to: {
      id: '6905adf16a22b7843b006183',
      username: 'sayantan3',
      email: '',
      profilePicture: null
    },
    status: 'pending',
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
Populating recipient details...
Looking up recipient: 6905adf16a22b7843b006183
Found recipient: sayantan3
Final populated sent requests: [
  {
    id: '6905cdce14ad0d0f020b3985',
    to: {
      id: '6905adf16a22b7843b006183',
      username: 'sayantan3',
      email: 'sayantan3@gmail.com',
      profilePicture: undefined
    },
    status: 'pending',
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
=== FRIEND REQUEST GET END (sent) ===
 GET /api/friends/request?type=sent 200 in 170ms
 GET /api/socket-health 200 in 89ms
 GET /api/socket-health 200 in 140ms
 GET /socket.io?EIO=4&transport=polling&t=xxdnysva 404 in 568ms
 GET /socket.io?EIO=4&transport=polling&t=xxdo0adn 404 in 560ms
 GET /api/socket-health 200 in 64ms
 GET /api/socket-health 200 in 126ms
 GET /socket.io?EIO=4&transport=polling&t=xxfjs9yr 404 in 476ms
 GET /socket.io?EIO=4&transport=polling&t=xxfnp2pk 404 in 239ms
 GET /api/socket-health 200 in 96ms
 GET /api/socket-health 200 in 64ms
 GET /socket.io?EIO=4&transport=polling&t=xxh4zw5a 404 in 569ms
 GET /socket.io?EIO=4&transport=polling&t=xxh6n5ff 404 in 565ms
 GET /api/socket-health 200 in 69ms
 GET /api/socket-health 200 in 74ms
 GET /socket.io?EIO=4&transport=polling&t=xximzoe9 404 in 494ms
 GET /socket.io?EIO=4&transport=polling&t=xxip4v2f 404 in 277ms
 GET /api/socket-health 200 in 69ms
 GET /api/socket-health 200 in 79ms
 GET /socket.io?EIO=4&transport=polling&t=xxk71tdl 404 in 539ms
 GET /socket.io?EIO=4&transport=polling&t=xxk966lo 404 in 293ms
 GET /api/socket-health 200 in 49ms
 GET /api/socket-health 200 in 310ms
 GET /socket.io?EIO=4&transport=polling&t=xxlpolfz 404 in 551ms
 GET /socket.io?EIO=4&transport=polling&t=xxlydjzw 404 in 275ms
 GET /api/socket-health 200 in 56ms
 GET /api/socket-health 200 in 111ms
 GET /socket.io?EIO=4&transport=polling&t=xxn9nc9x 404 in 508ms
 GET /socket.io?EIO=4&transport=polling&t=xxndw1qg 404 in 249ms
 GET /api/socket-health 200 in 65ms
 GET /api/socket-health 200 in 51ms
 GET /socket.io?EIO=4&transport=polling&t=xxot7lwi 404 in 361ms
 GET /socket.io?EIO=4&transport=polling&t=xxoun159 404 in 217ms
 GET /api/socket-health 200 in 61ms
 GET /api/socket-health 200 in 47ms
 GET /socket.io?EIO=4&transport=polling&t=xxqcbn15 404 in 320ms
 GET /socket.io?EIO=4&transport=polling&t=xxqdq3d3 404 in 138ms
 GET /api/socket-health 200 in 75ms
 GET /api/socket-health 200 in 172ms
 GET /socket.io?EIO=4&transport=polling&t=xxrwmas7 404 in 287ms
 GET /socket.io?EIO=4&transport=polling&t=xxs1ion2 404 in 144ms
 GET /api/socket-health 200 in 44ms
 GET /api/socket-health 200 in 59ms
 GET /socket.io?EIO=4&transport=polling&t=xxtf8k7m 404 in 264ms
 GET /socket.io?EIO=4&transport=polling&t=xxtgyelt 404 in 109ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
=== FRIEND REQUEST GET START ===
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
Request type: received User: sayantan2@gmail.com
âœ… Database connected
âœ… Current user found: {
  id: new ObjectId('6901f85f42c5d010fa811206'),
  email: 'sayantan2@gmail.com',
  friendRequestsCount: 0,
  sentRequestsCount: 1
}
Processing received requests...
Raw friendRequests: []
Processed receivedRequests: []
Populating sender details...
Final populated requests: []
=== FRIEND REQUEST GET END (received) ===
 GET /api/friends/request?type=received 200 in 189ms
=== FRIEND REQUEST GET START ===
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
Request type: sent User: sayantan2@gmail.com
âœ… Database connected
 GET /api/friends 200 in 341ms
âœ… Current user found: {
  id: new ObjectId('6901f85f42c5d010fa811206'),
  email: 'sayantan2@gmail.com',
  friendRequestsCount: 0,
  sentRequestsCount: 1
}
Processing sent requests...
Raw sentRequests: [
  {
    from: new ObjectId('6901f85f42c5d010fa811206'),
    fromName: 'sayantan2',
    to: new ObjectId('6905adf16a22b7843b006183'),
    toName: 'sayantan3',
    status: 'pending',
    _id: new ObjectId('6905cdce14ad0d0f020b3985'),
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
Filtering sent request: { status: 'pending', to: new ObjectId('6905adf16a22b7843b006183') }
Mapping sent request: {
  from: new ObjectId('6901f85f42c5d010fa811206'),
  fromName: 'sayantan2',
  to: new ObjectId('6905adf16a22b7843b006183'),
  toName: 'sayantan3',
  status: 'pending',
  _id: new ObjectId('6905cdce14ad0d0f020b3985'),
  createdAt: 2025-11-01T09:07:26.707Z,
  updatedAt: 2025-11-01T09:07:26.707Z
}
Processed sentRequests: [
  {
    id: '6905cdce14ad0d0f020b3985',
    to: {
      id: '6905adf16a22b7843b006183',
      username: 'sayantan3',
      email: '',
      profilePicture: null
    },
    status: 'pending',
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
Populating recipient details...
Looking up recipient: 6905adf16a22b7843b006183
Found recipient: sayantan3
Final populated sent requests: [
  {
    id: '6905cdce14ad0d0f020b3985',
    to: {
      id: '6905adf16a22b7843b006183',
      username: 'sayantan3',
      email: 'sayantan3@gmail.com',
      profilePicture: undefined
    },
    status: 'pending',
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
=== FRIEND REQUEST GET END (sent) ===
 GET /api/friends/request?type=sent 200 in 334ms
 GET /api/socket-health 200 in 34ms
 GET /api/socket-health 200 in 178ms
 GET /socket.io?EIO=4&transport=polling&t=xxuy8xfw 404 in 281ms
 GET /socket.io?EIO=4&transport=polling&t=xxv370ne 404 in 126ms
 GET /api/socket-health 200 in 41ms
 GET /api/socket-health 200 in 54ms
 GET /socket.io?EIO=4&transport=polling&t=xxwi4gpg 404 in 356ms
 GET /socket.io?EIO=4&transport=polling&t=xxwjo1i2 404 in 193ms
 GET /api/socket-health 200 in 60ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
 GET /api/socket-health 200 in 179ms
 GET /socket.io?EIO=4&transport=polling&t=xxy2owqw 404 in 304ms
 GET /socket.io?EIO=4&transport=polling&t=xxy7pwtx 404 in 148ms
 POST /api/users/heartbeat 200 in 386ms
 â—‹ Compiling /api/conversations ...
 âœ“ Compiled /api/conversations in 1443ms (1956 modules)
[next-auth][warn][DEBUG_ENABLED] 
https://next-auth.js.org/warnings#debug_enabled
 GET /api/socket-health 200 in 1607ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
 GET /api/socket-health 200 in 57ms
 GET /api/conversations 200 in 1939ms
 GET /socket.io?EIO=4&transport=polling&t=xy0su1wy 404 in 438ms
 GET /socket.io?EIO=4&transport=polling&t=xy0urp1a 404 in 148ms
 GET /api/socket-health 200 in 43ms
 GET /api/socket-health 200 in 47ms
 GET /socket.io?EIO=4&transport=polling&t=xy2oem6g 404 in 371ms
 GET /socket.io?EIO=4&transport=polling&t=xy2pqk6v 404 in 207ms
 GET /api/socket-health 200 in 43ms
 GET /api/socket-health 200 in 38ms
 GET /socket.io?EIO=4&transport=polling&t=xy4a2ok1 404 in 253ms
 GET /socket.io?EIO=4&transport=polling&t=xy4a11oa 404 in 259ms
 GET /api/socket-health 200 in 56ms
 GET /api/socket-health 200 in 150ms
 GET /socket.io?EIO=4&transport=polling&t=xy5rz27c 404 in 139ms
 GET /socket.io?EIO=4&transport=polling&t=xy5w7jjk 404 in 128ms
 GET /api/socket-health 200 in 45ms
 GET /api/socket-health 200 in 202ms
 GET /socket.io?EIO=4&transport=polling&t=xy7b061r 404 in 320ms
 GET /socket.io?EIO=4&transport=polling&t=xy7gr2ni 404 in 125ms
 GET /api/socket-health 200 in 34ms
 GET /api/socket-health 200 in 120ms
 GET /socket.io?EIO=4&transport=polling&t=xy8ua3pt 404 in 122ms
 GET /socket.io?EIO=4&transport=polling&t=xy8xpryc 404 in 118ms
 GET /api/socket-health 200 in 53ms
 GET /api/socket-health 200 in 143ms
 GET /socket.io?EIO=4&transport=polling&t=xyaecesh 404 in 263ms
 GET /socket.io?EIO=4&transport=polling&t=xyaierty 404 in 141ms
 GET /api/socket-health 200 in 39ms
 GET /api/socket-health 200 in 159ms
 GET /socket.io?EIO=4&transport=polling&t=xybxhu09 404 in 259ms
 GET /socket.io?EIO=4&transport=polling&t=xyc1yld5 404 in 107ms
 GET /api/socket-health 200 in 36ms
 GET /api/socket-health 200 in 135ms
 GET /socket.io?EIO=4&transport=polling&t=xydgz39i 404 in 127ms
 GET /socket.io?EIO=4&transport=polling&t=xydktp6f 404 in 99ms
 GET /api/socket-health 200 in 35ms
 GET /api/socket-health 200 in 145ms
 GET /socket.io?EIO=4&transport=polling&t=xyf0s4jc 404 in 145ms
 GET /socket.io?EIO=4&transport=polling&t=xyf4vhkw 404 in 110ms
 GET /api/socket-health 200 in 36ms
 GET /api/socket-health 200 in 142ms
 GET /socket.io?EIO=4&transport=polling&t=xygkacpo 404 in 142ms
 GET /socket.io?EIO=4&transport=polling&t=xygodn45 404 in 109ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
=== FRIEND REQUEST GET START ===
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
Request type: received User: sayantan2@gmail.com
âœ… Database connected
âœ… Current user found: {
  id: new ObjectId('6901f85f42c5d010fa811206'),
  email: 'sayantan2@gmail.com',
  friendRequestsCount: 0,
  sentRequestsCount: 1
}
Processing received requests...
Raw friendRequests: []
Processed receivedRequests: []
Populating sender details...
Final populated requests: []
=== FRIEND REQUEST GET END (received) ===
 GET /api/friends/request?type=received 200 in 156ms
 GET /api/friends 200 in 187ms
=== FRIEND REQUEST GET START ===
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
Request type: sent User: sayantan2@gmail.com
âœ… Database connected
âœ… Current user found: {
  id: new ObjectId('6901f85f42c5d010fa811206'),
  email: 'sayantan2@gmail.com',
  friendRequestsCount: 0,
  sentRequestsCount: 1
}
Processing sent requests...
Raw sentRequests: [
  {
    from: new ObjectId('6901f85f42c5d010fa811206'),
    fromName: 'sayantan2',
    to: new ObjectId('6905adf16a22b7843b006183'),
    toName: 'sayantan3',
    status: 'pending',
    _id: new ObjectId('6905cdce14ad0d0f020b3985'),
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
Filtering sent request: { status: 'pending', to: new ObjectId('6905adf16a22b7843b006183') }
Mapping sent request: {
  from: new ObjectId('6901f85f42c5d010fa811206'),
  fromName: 'sayantan2',
  to: new ObjectId('6905adf16a22b7843b006183'),
  toName: 'sayantan3',
  status: 'pending',
  _id: new ObjectId('6905cdce14ad0d0f020b3985'),
  createdAt: 2025-11-01T09:07:26.707Z,
  updatedAt: 2025-11-01T09:07:26.707Z
}
Processed sentRequests: [
  {
    id: '6905cdce14ad0d0f020b3985',
    to: {
      id: '6905adf16a22b7843b006183',
      username: 'sayantan3',
      email: '',
      profilePicture: null
    },
    status: 'pending',
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
Populating recipient details...
Looking up recipient: 6905adf16a22b7843b006183
Found recipient: sayantan3
Final populated sent requests: [
  {
    id: '6905cdce14ad0d0f020b3985',
    to: {
      id: '6905adf16a22b7843b006183',
      username: 'sayantan3',
      email: 'sayantan3@gmail.com',
      profilePicture: undefined
    },
    status: 'pending',
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
=== FRIEND REQUEST GET END (sent) ===
 GET /api/friends/request?type=sent 200 in 165ms
 GET /api/socket-health 200 in 61ms
 GET /api/socket-health 200 in 176ms
 GET /socket.io?EIO=4&transport=polling&t=xyi4g7s4 404 in 361ms
 GET /socket.io?EIO=4&transport=polling&t=xyi9g5da 404 in 202ms
 GET /api/socket-health 200 in 46ms
 GET /api/socket-health 200 in 212ms
 GET /socket.io?EIO=4&transport=polling&t=xyjnmddu 404 in 453ms
 GET /socket.io?EIO=4&transport=polling&t=xyjtjaqi 404 in 269ms
 GET /api/socket-health 200 in 60ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
 GET /api/socket-health 200 in 163ms
 GET /socket.io?EIO=4&transport=polling&t=xyl7hxhy 404 in 164ms
 GET /socket.io?EIO=4&transport=polling&t=xylc5wkh 404 in 157ms
 POST /api/users/heartbeat 200 in 411ms
 GET /api/socket-health 200 in 45ms
 GET /api/socket-health 200 in 152ms
 GET /socket.io?EIO=4&transport=polling&t=xymqjbfm 404 in 162ms
 GET /socket.io?EIO=4&transport=polling&t=xymuuyrv 404 in 171ms
 GET /api/socket-health 200 in 66ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
 GET /api/socket-health 200 in 234ms
 GET /api/conversations 200 in 322ms
 GET /socket.io?EIO=4&transport=polling&t=xyoaru3h 404 in 387ms
 GET /socket.io?EIO=4&transport=polling&t=xyohosmc 404 in 170ms
 GET /api/socket-health 200 in 50ms
 GET /api/socket-health 200 in 169ms
 GET /socket.io?EIO=4&transport=polling&t=xypu15sy 404 in 293ms
 GET /socket.io?EIO=4&transport=polling&t=xypysim2 404 in 168ms
 GET /api/socket-health 200 in 36ms
 GET /api/socket-health 200 in 119ms
 GET /socket.io?EIO=4&transport=polling&t=xyrdzplm 404 in 120ms
 GET /socket.io?EIO=4&transport=polling&t=xyrhbml3 404 in 100ms
 GET /api/socket-health 200 in 36ms
 GET /api/socket-health 200 in 122ms
 GET /socket.io?EIO=4&transport=polling&t=xyswug5m 404 in 220ms
 GET /socket.io?EIO=4&transport=polling&t=xyt0dw3l 404 in 100ms
 GET /api/socket-health 200 in 53ms
 GET /api/socket-health 200 in 361ms
 GET /socket.io?EIO=4&transport=polling&t=xyugmvfm 404 in 580ms
 GET /socket.io?EIO=4&transport=polling&t=xyuqueru 404 in 231ms
 GET /api/socket-health 200 in 68ms
 GET /api/socket-health 200 in 255ms
 GET /socket.io?EIO=4&transport=polling&t=xyw0jur1 404 in 259ms
 GET /socket.io?EIO=4&transport=polling&t=xyw7nmjm 404 in 225ms
 GET /api/socket-health 200 in 64ms
 GET /api/socket-health 200 in 265ms
 GET /socket.io?EIO=4&transport=polling&t=xyxkbfak 404 in 305ms
 GET /socket.io?EIO=4&transport=polling&t=xyxs2r5j 404 in 186ms
 GET /api/socket-health 200 in 47ms
 GET /api/socket-health 200 in 177ms
 GET /socket.io?EIO=4&transport=polling&t=xyz3ctff 404 in 180ms
 GET /socket.io?EIO=4&transport=polling&t=xyz8gpfx 404 in 163ms
 GET /api/socket-health 200 in 129ms
 GET /api/socket-health 200 in 198ms
 GET /socket.io?EIO=4&transport=polling&t=xz0pg3as 404 in 205ms
 GET /socket.io?EIO=4&transport=polling&t=xz0v5js1 404 in 171ms
 GET /api/socket-health 200 in 40ms
 GET /api/socket-health 200 in 172ms
 GET /socket.io?EIO=4&transport=polling&t=xz265vm7 404 in 291ms
 GET /socket.io?EIO=4&transport=polling&t=xz2ayjra 404 in 138ms
 GET /api/socket-health 200 in 43ms
 GET /api/socket-health 200 in 159ms
 GET /socket.io?EIO=4&transport=polling&t=xz3pho4m 404 in 299ms
 GET /socket.io?EIO=4&transport=polling&t=xz3u1ze4 404 in 146ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
=== FRIEND REQUEST GET START ===
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
Request type: received User: sayantan2@gmail.com
âœ… Database connected
 GET /api/friends 200 in 241ms
âœ… Current user found: {
  id: new ObjectId('6901f85f42c5d010fa811206'),
  email: 'sayantan2@gmail.com',
  friendRequestsCount: 0,
  sentRequestsCount: 1
}
Processing received requests...
Raw friendRequests: []
Processed receivedRequests: []
Populating sender details...
Final populated requests: []
=== FRIEND REQUEST GET END (received) ===
 GET /api/friends/request?type=received 200 in 716ms
=== FRIEND REQUEST GET START ===
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
Request type: sent User: sayantan2@gmail.com
âœ… Database connected
âœ… Current user found: {
  id: new ObjectId('6901f85f42c5d010fa811206'),
  email: 'sayantan2@gmail.com',
  friendRequestsCount: 0,
  sentRequestsCount: 1
}
Processing sent requests...
Raw sentRequests: [
  {
    from: new ObjectId('6901f85f42c5d010fa811206'),
    fromName: 'sayantan2',
    to: new ObjectId('6905adf16a22b7843b006183'),
    toName: 'sayantan3',
    status: 'pending',
    _id: new ObjectId('6905cdce14ad0d0f020b3985'),
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
Filtering sent request: { status: 'pending', to: new ObjectId('6905adf16a22b7843b006183') }
Mapping sent request: {
  from: new ObjectId('6901f85f42c5d010fa811206'),
  fromName: 'sayantan2',
  to: new ObjectId('6905adf16a22b7843b006183'),
  toName: 'sayantan3',
  status: 'pending',
  _id: new ObjectId('6905cdce14ad0d0f020b3985'),
  createdAt: 2025-11-01T09:07:26.707Z,
  updatedAt: 2025-11-01T09:07:26.707Z
}
Processed sentRequests: [
  {
    id: '6905cdce14ad0d0f020b3985',
    to: {
      id: '6905adf16a22b7843b006183',
      username: 'sayantan3',
      email: '',
      profilePicture: null
    },
    status: 'pending',
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
Populating recipient details...
Looking up recipient: 6905adf16a22b7843b006183
Found recipient: sayantan3
Final populated sent requests: [
  {
    id: '6905cdce14ad0d0f020b3985',
    to: {
      id: '6905adf16a22b7843b006183',
      username: 'sayantan3',
      email: 'sayantan3@gmail.com',
      profilePicture: undefined
    },
    status: 'pending',
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
=== FRIEND REQUEST GET END (sent) ===
 GET /api/friends/request?type=sent 200 in 147ms
 GET /api/socket-health 200 in 50ms
 GET /api/socket-health 200 in 169ms
 GET /socket.io?EIO=4&transport=polling&t=xz59prw6 404 in 172ms
 GET /socket.io?EIO=4&transport=polling&t=xz5eirh7 404 in 108ms
 GET /api/socket-health 200 in 47ms
 GET /api/socket-health 200 in 213ms
 GET /socket.io?EIO=4&transport=polling&t=xz6t5fx0 404 in 242ms
 GET /socket.io?EIO=4&transport=polling&t=xz6z6u2i 404 in 270ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
 GET /api/socket-health 200 in 97ms
 GET /api/socket-health 200 in 220ms
 POST /api/users/heartbeat 200 in 345ms
 GET /socket.io?EIO=4&transport=polling&t=xz8dunv7 404 in 218ms
 GET /socket.io?EIO=4&transport=polling&t=xz8k3ids 404 in 153ms
 GET /api/socket-health 200 in 48ms
 GET /api/socket-health 200 in 270ms
 GET /socket.io?EIO=4&transport=polling&t=xz9w7ioh 404 in 272ms
 GET /socket.io?EIO=4&transport=polling&t=xza3tx7u 404 in 179ms
 GET /api/socket-health 200 in 2387ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
 GET /api/socket-health 200 in 341ms
 GET /api/conversations 200 in 697ms
 GET /socket.io?EIO=4&transport=polling&t=xzdjz7q9 404 in 488ms
 GET /socket.io?EIO=4&transport=polling&t=xzdu12w5 404 in 227ms
 GET /api/socket-health 200 in 41ms
 GET /api/socket-health 200 in 45ms
 GET /socket.io?EIO=4&transport=polling&t=xzfahlhq 404 in 341ms
 GET /socket.io?EIO=4&transport=polling&t=xzfbmy68 404 in 179ms
 GET /api/socket-health 200 in 118ms
 GET /api/socket-health 200 in 318ms
 GET /socket.io?EIO=4&transport=polling&t=xzgydm5l 404 in 299ms
 GET /socket.io?EIO=4&transport=polling&t=xzh79p63 404 in 194ms
 GET /api/socket-health 200 in 110ms
 GET /api/socket-health 200 in 82ms
 GET /socket.io?EIO=4&transport=polling&t=xzinxjr3 404 in 444ms
 GET /socket.io?EIO=4&transport=polling&t=xzio0wye 404 in 442ms
 GET /api/socket-health 200 in 50ms
 GET /api/socket-health 200 in 175ms
 GET /socket.io?EIO=4&transport=polling&t=xzjxd9w3 404 in 172ms
 GET /socket.io?EIO=4&transport=polling&t=xzk2a205 404 in 135ms
 GET /api/socket-health 200 in 45ms
 GET /api/socket-health 200 in 150ms
 GET /socket.io?EIO=4&transport=polling&t=xzlgpjk4 404 in 280ms
 GET /socket.io?EIO=4&transport=polling&t=xzlkzygs 404 in 131ms
 GET /api/socket-health 200 in 37ms
 GET /api/socket-health 200 in 127ms
 GET /socket.io?EIO=4&transport=polling&t=xzn08pj3 404 in 129ms
 GET /socket.io?EIO=4&transport=polling&t=xzn3s2hz 404 in 91ms
 GET /api/socket-health 200 in 52ms
 GET /api/socket-health 200 in 166ms
 GET /socket.io?EIO=4&transport=polling&t=xzok7d0o 404 in 166ms
 GET /socket.io?EIO=4&transport=polling&t=xzooxfp2 404 in 133ms
 GET /api/socket-health 200 in 123ms
 GET /api/socket-health 200 in 305ms
 GET /socket.io?EIO=4&transport=polling&t=xzq5v8v4 404 in 526ms
 GET /socket.io?EIO=4&transport=polling&t=xzqejkfb 404 in 243ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
=== FRIEND REQUEST GET START ===
 GET /api/socket-health 200 in 141ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
Request type: received User: sayantan2@gmail.com
âœ… Database connected
âœ… Current user found: {
  id: new ObjectId('6901f85f42c5d010fa811206'),
  email: 'sayantan2@gmail.com',
  friendRequestsCount: 0,
  sentRequestsCount: 1
}
Processing received requests...
Raw friendRequests: []
Processed receivedRequests: []
Populating sender details...
Final populated requests: []
=== FRIEND REQUEST GET END (received) ===
 GET /api/friends/request?type=received 200 in 424ms
 GET /api/socket-health 200 in 309ms
 GET /api/friends 200 in 482ms
=== FRIEND REQUEST GET START ===
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
Request type: sent User: sayantan2@gmail.com
âœ… Database connected
âœ… Current user found: {
  id: new ObjectId('6901f85f42c5d010fa811206'),
  email: 'sayantan2@gmail.com',
  friendRequestsCount: 0,
  sentRequestsCount: 1
}
Processing sent requests...
Raw sentRequests: [
  {
    from: new ObjectId('6901f85f42c5d010fa811206'),
    fromName: 'sayantan2',
    to: new ObjectId('6905adf16a22b7843b006183'),
    toName: 'sayantan3',
    status: 'pending',
    _id: new ObjectId('6905cdce14ad0d0f020b3985'),
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
Filtering sent request: { status: 'pending', to: new ObjectId('6905adf16a22b7843b006183') }
Mapping sent request: {
  from: new ObjectId('6901f85f42c5d010fa811206'),
  fromName: 'sayantan2',
  to: new ObjectId('6905adf16a22b7843b006183'),
  toName: 'sayantan3',
  status: 'pending',
  _id: new ObjectId('6905cdce14ad0d0f020b3985'),
  createdAt: 2025-11-01T09:07:26.707Z,
  updatedAt: 2025-11-01T09:07:26.707Z
}
Processed sentRequests: [
  {
    id: '6905cdce14ad0d0f020b3985',
    to: {
      id: '6905adf16a22b7843b006183',
      username: 'sayantan3',
      email: '',
      profilePicture: null
    },
    status: 'pending',
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
Populating recipient details...
Looking up recipient: 6905adf16a22b7843b006183
 GET /socket.io?EIO=4&transport=polling&t=xzrpzi79 404 in 502ms
 GET /socket.io?EIO=4&transport=polling&t=xzryv0bd 404 in 171ms
Found recipient: sayantan3
Final populated sent requests: [
  {
    id: '6905cdce14ad0d0f020b3985',
    to: {
      id: '6905adf16a22b7843b006183',
      username: 'sayantan3',
      email: 'sayantan3@gmail.com',
      profilePicture: undefined
    },
    status: 'pending',
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
=== FRIEND REQUEST GET END (sent) ===
 GET /api/friends/request?type=sent 200 in 259ms
 GET /api/socket-health 200 in 34ms
 GET /api/socket-health 200 in 121ms
 GET /socket.io?EIO=4&transport=polling&t=xzt6bvyz 404 in 225ms
 GET /socket.io?EIO=4&transport=polling&t=xzt9phlq 404 in 118ms
 GET /api/socket-health 200 in 67ms
 GET /api/socket-health 200 in 179ms
 GET /socket.io?EIO=4&transport=polling&t=xzurv2s6 404 in 158ms
 GET /socket.io?EIO=4&transport=polling&t=xzuwxjz7 404 in 132ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
 POST /api/users/heartbeat 200 in 212ms
 GET /api/socket-health 200 in 193ms
 GET /api/socket-health 200 in 351ms
 GET /socket.io?EIO=4&transport=polling&t=xzwqnzut 404 in 500ms
 GET /socket.io?EIO=4&transport=polling&t=xzx0l6rm 404 in 177ms
 GET /api/socket-health 200 in 62ms
 GET /api/socket-health 200 in 197ms
 GET /socket.io?EIO=4&transport=polling&t=xzyl63fo 404 in 319ms
 GET /socket.io?EIO=4&transport=polling&t=xzyqrfk8 404 in 136ms
 GET /api/socket-health 200 in 61ms
 GET /api/socket-health 200 in 186ms
 GET /socket.io?EIO=4&transport=polling&t=y004r4k9 404 in 190ms
 GET /socket.io?EIO=4&transport=polling&t=y00a1g2p 404 in 183ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
 GET /api/socket-health 200 in 116ms
 GET /api/socket-health 200 in 48ms
 GET /api/conversations 200 in 206ms
 GET /socket.io?EIO=4&transport=polling&t=y01rrhr8 404 in 333ms
 GET /socket.io?EIO=4&transport=polling&t=y01rrq7s 404 in 337ms
 GET /api/socket-health 200 in 83ms
 GET /api/socket-health 200 in 93ms
 GET /socket.io?EIO=4&transport=polling&t=y038zj79 404 in 394ms
 GET /socket.io?EIO=4&transport=polling&t=y03bj7jw 404 in 185ms
 GET /api/socket-health 200 in 80ms
 GET /api/socket-health 200 in 61ms
 GET /socket.io?EIO=4&transport=polling&t=y04s1zex 404 in 424ms
 GET /socket.io?EIO=4&transport=polling&t=y04ugl7d 404 in 189ms
 GET /api/socket-health 200 in 88ms
 GET /api/socket-health 200 in 72ms
 GET /socket.io?EIO=4&transport=polling&t=y06c66km 404 in 412ms
 GET /socket.io?EIO=4&transport=polling&t=y06el6ec 404 in 221ms
 GET /api/socket-health 200 in 32ms
 GET /api/socket-health 200 in 121ms
 GET /socket.io?EIO=4&transport=polling&t=y07u0mon 404 in 234ms
 GET /socket.io?EIO=4&transport=polling&t=y07xfx6l 404 in 131ms
 GET /api/socket-health 200 in 32ms
 GET /api/socket-health 200 in 120ms
 GET /socket.io?EIO=4&transport=polling&t=y09djztq 404 in 215ms
 GET /socket.io?EIO=4&transport=polling&t=y09h03pj 404 in 120ms
 GET /api/socket-health 200 in 29ms
 GET /api/socket-health 200 in 34ms
 GET /socket.io?EIO=4&transport=polling&t=y0awvxpy 404 in 207ms
 GET /socket.io?EIO=4&transport=polling&t=y0axuz2v 404 in 101ms
 GET /api/socket-health 200 in 28ms
 GET /api/socket-health 200 in 123ms
 GET /socket.io?EIO=4&transport=polling&t=y0cgc2lx 404 in 201ms
 GET /socket.io?EIO=4&transport=polling&t=y0cjs57q 404 in 102ms
 GET /api/socket-health 200 in 31ms
 GET /api/socket-health 200 in 122ms
 GET /socket.io?EIO=4&transport=polling&t=y0e05liu 404 in 205ms
 GET /socket.io?EIO=4&transport=polling&t=y0e3lwsv 404 in 95ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
=== FRIEND REQUEST GET START ===
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
Request type: received User: sayantan2@gmail.com
âœ… Database connected
âœ… Current user found: {
  id: new ObjectId('6901f85f42c5d010fa811206'),
  email: 'sayantan2@gmail.com',
  friendRequestsCount: 0,
  sentRequestsCount: 1
}
Processing received requests...
Raw friendRequests: []
Processed receivedRequests: []
Populating sender details...
Final populated requests: []
=== FRIEND REQUEST GET END (received) ===
 GET /api/friends/request?type=received 200 in 186ms
 GET /api/friends 200 in 194ms
=== FRIEND REQUEST GET START ===
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
Request type: sent User: sayantan2@gmail.com
âœ… Database connected
âœ… Current user found: {
  id: new ObjectId('6901f85f42c5d010fa811206'),
  email: 'sayantan2@gmail.com',
  friendRequestsCount: 0,
  sentRequestsCount: 1
}
Processing sent requests...
Raw sentRequests: [
  {
    from: new ObjectId('6901f85f42c5d010fa811206'),
    fromName: 'sayantan2',
    to: new ObjectId('6905adf16a22b7843b006183'),
    toName: 'sayantan3',
    status: 'pending',
    _id: new ObjectId('6905cdce14ad0d0f020b3985'),
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
Filtering sent request: { status: 'pending', to: new ObjectId('6905adf16a22b7843b006183') }
Mapping sent request: {
  from: new ObjectId('6901f85f42c5d010fa811206'),
  fromName: 'sayantan2',
  to: new ObjectId('6905adf16a22b7843b006183'),
  toName: 'sayantan3',
  status: 'pending',
  _id: new ObjectId('6905cdce14ad0d0f020b3985'),
  createdAt: 2025-11-01T09:07:26.707Z,
  updatedAt: 2025-11-01T09:07:26.707Z
}
Processed sentRequests: [
  {
    id: '6905cdce14ad0d0f020b3985',
    to: {
      id: '6905adf16a22b7843b006183',
      username: 'sayantan3',
      email: '',
      profilePicture: null
    },
    status: 'pending',
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
Populating recipient details...
Looking up recipient: 6905adf16a22b7843b006183
Found recipient: sayantan3
Final populated sent requests: [
  {
    id: '6905cdce14ad0d0f020b3985',
    to: {
      id: '6905adf16a22b7843b006183',
      username: 'sayantan3',
      email: 'sayantan3@gmail.com',
      profilePicture: undefined
    },
    status: 'pending',
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
=== FRIEND REQUEST GET END (sent) ===
 GET /api/friends/request?type=sent 200 in 158ms
 GET /api/socket-health 200 in 57ms
 GET /api/socket-health 200 in 42ms
 GET /socket.io?EIO=4&transport=polling&t=y0fkdqcw 404 in 313ms
 GET /socket.io?EIO=4&transport=polling&t=y0flm95b 404 in 162ms
 GET /api/socket-health 200 in 67ms
 GET /api/socket-health 200 in 97ms
 GET /socket.io?EIO=4&transport=polling&t=y0h46c3m 404 in 443ms
 GET /socket.io?EIO=4&transport=polling&t=y0h6x5zp 404 in 208ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
 GET /api/socket-health 200 in 144ms
 GET /api/socket-health 200 in 69ms
 POST /api/users/heartbeat 200 in 531ms
 GET /socket.io?EIO=4&transport=polling&t=y0iq8d2w 404 in 390ms
 GET /socket.io?EIO=4&transport=polling&t=y0is90sg 404 in 221ms
 GET /api/socket-health 200 in 129ms
 GET /api/socket-health 200 in 194ms
 GET /socket.io?EIO=4&transport=polling&t=y0kcmbvn 404 in 311ms
 GET /socket.io?EIO=4&transport=polling&t=y0ki3hit 404 in 158ms
 GET /api/socket-health 200 in 32ms
 GET /api/socket-health 200 in 121ms
 GET /socket.io?EIO=4&transport=polling&t=y0lps90x 404 in 227ms
 GET /socket.io?EIO=4&transport=polling&t=y0lt92it 404 in 118ms
 GET /api/socket-health 200 in 32ms
 GET /api/socket-health 200 in 119ms
 GET /socket.io?EIO=4&transport=polling&t=y0n97qly 404 in 208ms
 GET /socket.io?EIO=4&transport=polling&t=y0nck63s 404 in 101ms
 GET /api/socket-health 200 in 50ms
 GET /api/socket-health 200 in 37ms
 GET /socket.io?EIO=4&transport=polling&t=y0ova5tb 404 in 298ms
 GET /socket.io?EIO=4&transport=polling&t=y0ov9pth 404 in 302ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
 GET /api/conversations 200 in 175ms
 GET /api/socket-health 200 in 35ms
 GET /api/socket-health 200 in 136ms
 GET /socket.io?EIO=4&transport=polling&t=y0qcga0k 404 in 141ms
 GET /socket.io?EIO=4&transport=polling&t=y0qgbujn 404 in 109ms
 GET /api/socket-health 200 in 31ms
 GET /api/socket-health 200 in 113ms
 GET /socket.io?EIO=4&transport=polling&t=y0rw7ujy 404 in 110ms
 GET /socket.io?EIO=4&transport=polling&t=y0rzetjy 404 in 96ms
 GET /api/socket-health 200 in 46ms
 GET /api/socket-health 200 in 117ms
 GET /socket.io?EIO=4&transport=polling&t=y0tg5ptp 404 in 215ms
 GET /socket.io?EIO=4&transport=polling&t=y0tji278 404 in 94ms
 GET /api/socket-health 200 in 34ms
 GET /api/socket-health 200 in 154ms
 GET /socket.io?EIO=4&transport=polling&t=y0uzgba9 404 in 145ms
 GET /socket.io?EIO=4&transport=polling&t=y0v3t5e9 404 in 107ms
 GET /api/socket-health 200 in 51ms
 GET /api/socket-health 200 in 147ms
 GET /socket.io?EIO=4&transport=polling&t=y0wjax7i 404 in 157ms
 GET /socket.io?EIO=4&transport=polling&t=y0wneyja 404 in 98ms
 GET /api/socket-health 200 in 35ms
 GET /api/socket-health 200 in 117ms
 GET /socket.io?EIO=4&transport=polling&t=y0y2d43z 404 in 117ms
 GET /socket.io?EIO=4&transport=polling&t=y0y5od6l 404 in 125ms
 GET /api/socket-health 200 in 30ms
 GET /api/socket-health 200 in 112ms
 GET /socket.io?EIO=4&transport=polling&t=y0zlnrn5 404 in 228ms
 GET /socket.io?EIO=4&transport=polling&t=y0zouh96 404 in 127ms
 GET /api/socket-health 200 in 36ms
 GET /api/socket-health 200 in 155ms
 GET /socket.io?EIO=4&transport=polling&t=y115ilpu 404 in 160ms
 GET /socket.io?EIO=4&transport=polling&t=y119v56a 404 in 127ms
 GET /api/socket-health 200 in 47ms
=== FRIEND REQUEST GET START ===
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
Request type: received User: sayantan2@gmail.com
âœ… Database connected
âœ… Current user found: {
  id: new ObjectId('6901f85f42c5d010fa811206'),
  email: 'sayantan2@gmail.com',
  friendRequestsCount: 0,
  sentRequestsCount: 1
}
Processing received requests...
Raw friendRequests: []
Processed receivedRequests: []
Populating sender details...
Final populated requests: []
=== FRIEND REQUEST GET END (received) ===
 GET /api/friends/request?type=received 200 in 156ms
 GET /api/socket-health 200 in 128ms
=== FRIEND REQUEST GET START ===
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
Request type: sent User: sayantan2@gmail.com
âœ… Database connected
âœ… Current user found: {
  id: new ObjectId('6901f85f42c5d010fa811206'),
  email: 'sayantan2@gmail.com',
  friendRequestsCount: 0,
  sentRequestsCount: 1
}
Processing sent requests...
Raw sentRequests: [
  {
    from: new ObjectId('6901f85f42c5d010fa811206'),
    fromName: 'sayantan2',
    to: new ObjectId('6905adf16a22b7843b006183'),
    toName: 'sayantan3',
    status: 'pending',
    _id: new ObjectId('6905cdce14ad0d0f020b3985'),
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
Filtering sent request: { status: 'pending', to: new ObjectId('6905adf16a22b7843b006183') }
Mapping sent request: {
  from: new ObjectId('6901f85f42c5d010fa811206'),
  fromName: 'sayantan2',
  to: new ObjectId('6905adf16a22b7843b006183'),
  toName: 'sayantan3',
  status: 'pending',
  _id: new ObjectId('6905cdce14ad0d0f020b3985'),
  createdAt: 2025-11-01T09:07:26.707Z,
  updatedAt: 2025-11-01T09:07:26.707Z
}
Processed sentRequests: [
  {
    id: '6905cdce14ad0d0f020b3985',
    to: {
      id: '6905adf16a22b7843b006183',
      username: 'sayantan3',
      email: '',
      profilePicture: null
    },
    status: 'pending',
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
Populating recipient details...
Looking up recipient: 6905adf16a22b7843b006183
 GET /socket.io?EIO=4&transport=polling&t=y12pcv44 404 in 244ms
 GET /socket.io?EIO=4&transport=polling&t=y12t7oab 404 in 118ms
Found recipient: sayantan3
Final populated sent requests: [
  {
    id: '6905cdce14ad0d0f020b3985',
    to: {
      id: '6905adf16a22b7843b006183',
      username: 'sayantan3',
      email: 'sayantan3@gmail.com',
      profilePicture: undefined
    },
    status: 'pending',
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
=== FRIEND REQUEST GET END (sent) ===
 GET /api/friends/request?type=sent 200 in 191ms
 GET /api/socket-health 200 in 30ms
 GET /api/socket-health 200 in 108ms
 GET /socket.io?EIO=4&transport=polling&t=y1489jxh 404 in 109ms
 GET /socket.io?EIO=4&transport=polling&t=y14bjrxp 404 in 101ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
 GET /api/socket-health 200 in 66ms
 GET /api/socket-health 200 in 114ms
 GET /socket.io?EIO=4&transport=polling&t=y15t9at1 404 in 114ms
 GET /socket.io?EIO=4&transport=polling&t=y15wgdc6 404 in 103ms
 POST /api/users/heartbeat 200 in 327ms
 GET /api/socket-health 200 in 32ms
 GET /api/socket-health 200 in 126ms
 GET /socket.io?EIO=4&transport=polling&t=y17bfhdy 404 in 212ms
 GET /socket.io?EIO=4&transport=polling&t=y17f0wqx 404 in 102ms
 GET /api/socket-health 200 in 34ms
 GET /api/socket-health 200 in 149ms
 GET /socket.io?EIO=4&transport=polling&t=y18vgjkq 404 in 166ms
 GET /socket.io?EIO=4&transport=polling&t=y18znf7p 404 in 175ms
 GET /api/socket-health 200 in 28ms
 GET /api/socket-health 200 in 111ms
 GET /socket.io?EIO=4&transport=polling&t=y1aepeaw 404 in 123ms
 GET /socket.io?EIO=4&transport=polling&t=y1ahvhbp 404 in 105ms
 GET /api/socket-health 200 in 34ms
 GET /api/socket-health 200 in 119ms
 GET /socket.io?EIO=4&transport=polling&t=y1byn1kj 404 in 234ms
 GET /socket.io?EIO=4&transport=polling&t=y1c1zfi3 404 in 121ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
 GET /api/socket-health 200 in 76ms
 GET /api/socket-health 200 in 52ms
 GET /api/conversations 200 in 223ms
 GET /socket.io?EIO=4&transport=polling&t=y1dj52h6 404 in 223ms
 GET /socket.io?EIO=4&transport=polling&t=y1dkvi4i 404 in 134ms
 GET /api/socket-health 200 in 28ms
 GET /api/socket-health 200 in 106ms
 GET /socket.io?EIO=4&transport=polling&t=y1f1isz5 404 in 195ms
 GET /socket.io?EIO=4&transport=polling&t=y1f4i0wm 404 in 96ms
 GET /api/socket-health 200 in 29ms
 GET /api/socket-health 200 in 116ms
 GET /socket.io?EIO=4&transport=polling&t=y1gl0l7f 404 in 117ms
 GET /socket.io?EIO=4&transport=polling&t=y1goa8wj 404 in 107ms
 GET /api/socket-health 200 in 28ms
 GET /api/socket-health 200 in 109ms
 GET /socket.io?EIO=4&transport=polling&t=y1i4it1r 404 in 115ms
 GET /socket.io?EIO=4&transport=polling&t=y1i7lxxh 404 in 94ms
 GET /api/socket-health 200 in 44ms
 GET /api/socket-health 200 in 117ms
 GET /socket.io?EIO=4&transport=polling&t=y1jofrxd 404 in 109ms
 GET /socket.io?EIO=4&transport=polling&t=y1jrrzud 404 in 96ms
 GET /api/socket-health 200 in 31ms
 GET /api/socket-health 200 in 134ms
 GET /socket.io?EIO=4&transport=polling&t=y1l7rn6p 404 in 207ms
 GET /socket.io?EIO=4&transport=polling&t=y1lblene 404 in 97ms
 GET /api/socket-health 200 in 30ms
 GET /api/socket-health 200 in 143ms
 GET /socket.io?EIO=4&transport=polling&t=y1mr6v8r 404 in 136ms
 GET /socket.io?EIO=4&transport=polling&t=y1mv726y 404 in 92ms
 GET /api/socket-health 200 in 31ms
 GET /api/socket-health 200 in 109ms
 GET /socket.io?EIO=4&transport=polling&t=y1oaq5du 404 in 109ms
 GET /socket.io?EIO=4&transport=polling&t=y1odt604 404 in 121ms
 GET /api/socket-health 200 in 28ms
 GET /api/socket-health 200 in 111ms
 GET /socket.io?EIO=4&transport=polling&t=y1ptzvkc 404 in 107ms
 GET /socket.io?EIO=4&transport=polling&t=y1px6nul 404 in 113ms
=== FRIEND REQUEST GET START ===
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
Request type: received User: sayantan2@gmail.com
âœ… Database connected
âœ… Current user found: {
  id: new ObjectId('6901f85f42c5d010fa811206'),
  email: 'sayantan2@gmail.com',
  friendRequestsCount: 0,
  sentRequestsCount: 1
}
Processing received requests...
Raw friendRequests: []
Processed receivedRequests: []
Populating sender details...
Final populated requests: []
=== FRIEND REQUEST GET END (received) ===
 GET /api/friends/request?type=received 200 in 82ms
=== FRIEND REQUEST GET START ===
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
Request type: sent User: sayantan2@gmail.com
âœ… Database connected
âœ… Current user found: {
  id: new ObjectId('6901f85f42c5d010fa811206'),
  email: 'sayantan2@gmail.com',
  friendRequestsCount: 0,
  sentRequestsCount: 1
}
Processing sent requests...
Raw sentRequests: [
  {
    from: new ObjectId('6901f85f42c5d010fa811206'),
    fromName: 'sayantan2',
    to: new ObjectId('6905adf16a22b7843b006183'),
    toName: 'sayantan3',
    status: 'pending',
    _id: new ObjectId('6905cdce14ad0d0f020b3985'),
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
Filtering sent request: { status: 'pending', to: new ObjectId('6905adf16a22b7843b006183') }
Mapping sent request: {
  from: new ObjectId('6901f85f42c5d010fa811206'),
  fromName: 'sayantan2',
  to: new ObjectId('6905adf16a22b7843b006183'),
  toName: 'sayantan3',
  status: 'pending',
  _id: new ObjectId('6905cdce14ad0d0f020b3985'),
  createdAt: 2025-11-01T09:07:26.707Z,
  updatedAt: 2025-11-01T09:07:26.707Z
}
Processed sentRequests: [
  {
    id: '6905cdce14ad0d0f020b3985',
    to: {
      id: '6905adf16a22b7843b006183',
      username: 'sayantan3',
      email: '',
      profilePicture: null
    },
    status: 'pending',
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
Populating recipient details...
Looking up recipient: 6905adf16a22b7843b006183
Found recipient: sayantan3
Final populated sent requests: [
  {
    id: '6905cdce14ad0d0f020b3985',
    to: {
      id: '6905adf16a22b7843b006183',
      username: 'sayantan3',
      email: 'sayantan3@gmail.com',
      profilePicture: undefined
    },
    status: 'pending',
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
=== FRIEND REQUEST GET END (sent) ===
 GET /api/friends/request?type=sent 200 in 142ms
 GET /api/socket-health 200 in 42ms
 GET /api/socket-health 200 in 136ms
 GET /socket.io?EIO=4&transport=polling&t=y1reas74 404 in 134ms
 GET /socket.io?EIO=4&transport=polling&t=y1ri7q11 404 in 110ms
 GET /api/socket-health 200 in 77ms
 GET /api/socket-health 200 in 115ms
 GET /socket.io?EIO=4&transport=polling&t=y1syxqof 404 in 828ms
 GET /socket.io?EIO=4&transport=polling&t=y1t59fw6 404 in 350ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
=== FRIEND REQUEST GET START ===
 GET /api/socket-health 200 in 97ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
Request type: received User: sayantan2@gmail.com
âœ… Database connected
 GET /api/socket-health 200 in 112ms
 GET /socket.io?EIO=4&transport=polling&t=y1uj1m9s 404 in 121ms
 POST /api/users/heartbeat 200 in 322ms
 GET /socket.io?EIO=4&transport=polling&t=y1umh21t 404 in 105ms
âœ… Current user found: {
  id: new ObjectId('6901f85f42c5d010fa811206'),
  email: 'sayantan2@gmail.com',
  friendRequestsCount: 0,
  sentRequestsCount: 1
}
Processing received requests...
Raw friendRequests: []
Processed receivedRequests: []
Populating sender details...
Final populated requests: []
=== FRIEND REQUEST GET END (received) ===
 GET /api/friends/request?type=received 200 in 589ms
=== FRIEND REQUEST GET START ===
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
Request type: sent User: sayantan2@gmail.com
âœ… Database connected
âœ… Current user found: {
  id: new ObjectId('6901f85f42c5d010fa811206'),
  email: 'sayantan2@gmail.com',
  friendRequestsCount: 0,
  sentRequestsCount: 1
}
Processing sent requests...
Raw sentRequests: [
  {
    from: new ObjectId('6901f85f42c5d010fa811206'),
    fromName: 'sayantan2',
    to: new ObjectId('6905adf16a22b7843b006183'),
    toName: 'sayantan3',
    status: 'pending',
    _id: new ObjectId('6905cdce14ad0d0f020b3985'),
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
Filtering sent request: { status: 'pending', to: new ObjectId('6905adf16a22b7843b006183') }
Mapping sent request: {
  from: new ObjectId('6901f85f42c5d010fa811206'),
  fromName: 'sayantan2',
  to: new ObjectId('6905adf16a22b7843b006183'),
  toName: 'sayantan3',
  status: 'pending',
  _id: new ObjectId('6905cdce14ad0d0f020b3985'),
  createdAt: 2025-11-01T09:07:26.707Z,
  updatedAt: 2025-11-01T09:07:26.707Z
}
Processed sentRequests: [
  {
    id: '6905cdce14ad0d0f020b3985',
    to: {
      id: '6905adf16a22b7843b006183',
      username: 'sayantan3',
      email: '',
      profilePicture: null
    },
    status: 'pending',
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
Populating recipient details...
Looking up recipient: 6905adf16a22b7843b006183
 GET /api/friends 200 in 690ms
Found recipient: sayantan3
Final populated sent requests: [
  {
    id: '6905cdce14ad0d0f020b3985',
    to: {
      id: '6905adf16a22b7843b006183',
      username: 'sayantan3',
      email: 'sayantan3@gmail.com',
      profilePicture: undefined
    },
    status: 'pending',
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
=== FRIEND REQUEST GET END (sent) ===
 GET /api/friends/request?type=sent 200 in 115ms
 GET /api/socket-health 200 in 42ms
 GET /api/socket-health 200 in 125ms
 GET /socket.io?EIO=4&transport=polling&t=y1w0yayi 404 in 127ms
 GET /socket.io?EIO=4&transport=polling&t=y1w4i0fk 404 in 100ms
 GET /api/socket-health 200 in 31ms
 GET /api/socket-health 200 in 329ms
 GET /socket.io?EIO=4&transport=polling&t=y1xk61wc 404 in 458ms
 GET /socket.io?EIO=4&transport=polling&t=y1xtev2m 404 in 132ms
 GET /api/socket-health 200 in 36ms
 GET /api/socket-health 200 in 131ms
 GET /socket.io?EIO=4&transport=polling&t=y1z56exs 404 in 218ms
 GET /socket.io?EIO=4&transport=polling&t=y1z8y2wn 404 in 92ms
 GET /api/socket-health 200 in 40ms
 GET /api/socket-health 200 in 99ms
 GET /socket.io?EIO=4&transport=polling&t=y20nkuov 404 in 186ms
 GET /socket.io?EIO=4&transport=polling&t=y20qelh9 404 in 89ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
 GET /api/conversations 200 in 146ms
 GET /api/socket-health 200 in 30ms
 GET /api/socket-health 200 in 115ms
 GET /socket.io?EIO=4&transport=polling&t=y226lojm 404 in 109ms
 GET /socket.io?EIO=4&transport=polling&t=y229ulhj 404 in 93ms
 GET /api/socket-health 200 in 30ms
 GET /api/socket-health 200 in 110ms
 GET /socket.io?EIO=4&transport=polling&t=y23qdysu 404 in 151ms
 GET /socket.io?EIO=4&transport=polling&t=y23tid1y 404 in 99ms
 GET /api/socket-health 200 in 28ms
 GET /api/socket-health 200 in 116ms
 GET /socket.io?EIO=4&transport=polling&t=y259srv3 404 in 114ms
 GET /socket.io?EIO=4&transport=polling&t=y25d4ym9 404 in 93ms
 GET /api/socket-health 200 in 34ms
 GET /api/socket-health 200 in 115ms
 GET /socket.io?EIO=4&transport=polling&t=y26tiudh 404 in 117ms
 GET /socket.io?EIO=4&transport=polling&t=y26ws2oe 404 in 95ms
 GET /api/socket-health 200 in 31ms
 GET /api/socket-health 200 in 119ms
 GET /socket.io?EIO=4&transport=polling&t=y28csosn 404 in 112ms
 GET /socket.io?EIO=4&transport=polling&t=y28g63ur 404 in 89ms
 GET /api/socket-health 200 in 30ms
 GET /api/socket-health 200 in 109ms
 GET /socket.io?EIO=4&transport=polling&t=y29wlvr1 404 in 192ms
 GET /socket.io?EIO=4&transport=polling&t=y29zoxp0 404 in 94ms
 GET /api/socket-health 200 in 35ms
 GET /api/socket-health 200 in 116ms
 GET /socket.io?EIO=4&transport=polling&t=y2bg5jt6 404 in 115ms
 GET /socket.io?EIO=4&transport=polling&t=y2bjhd1x 404 in 94ms
 GET /api/socket-health 200 in 30ms
 GET /api/socket-health 200 in 113ms
 GET /socket.io?EIO=4&transport=polling&t=y2czhrky 404 in 119ms
 GET /socket.io?EIO=4&transport=polling&t=y2d2qsi7 404 in 103ms
 GET /api/socket-health 200 in 32ms
 GET /api/socket-health 200 in 118ms
 GET /socket.io?EIO=4&transport=polling&t=y2eiznku 404 in 111ms
 GET /socket.io?EIO=4&transport=polling&t=y2ematdn 404 in 90ms
 GET /api/socket-health 200 in 31ms
 GET /api/socket-health 200 in 109ms
 GET /socket.io?EIO=4&transport=polling&t=y2g2xz6b 404 in 195ms
 GET /socket.io?EIO=4&transport=polling&t=y2g5z8hc 404 in 91ms
 GET /api/socket-health 200 in 32ms
 GET /api/socket-health 200 in 119ms
 GET /socket.io?EIO=4&transport=polling&t=y2hmcgnp 404 in 269ms
 GET /socket.io?EIO=4&transport=polling&t=y2hppimg 404 in 160ms
=== FRIEND REQUEST GET START ===
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
Request type: received User: sayantan2@gmail.com
âœ… Database connected
âœ… Current user found: {
  id: new ObjectId('6901f85f42c5d010fa811206'),
  email: 'sayantan2@gmail.com',
  friendRequestsCount: 0,
  sentRequestsCount: 1
}
Processing received requests...
Raw friendRequests: []
Processed receivedRequests: []
Populating sender details...
Final populated requests: []
=== FRIEND REQUEST GET END (received) ===
 GET /api/friends/request?type=received 200 in 91ms
=== FRIEND REQUEST GET START ===
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
Request type: sent User: sayantan2@gmail.com
âœ… Database connected
âœ… Current user found: {
  id: new ObjectId('6901f85f42c5d010fa811206'),
  email: 'sayantan2@gmail.com',
  friendRequestsCount: 0,
  sentRequestsCount: 1
}
Processing sent requests...
Raw sentRequests: [
  {
    from: new ObjectId('6901f85f42c5d010fa811206'),
    fromName: 'sayantan2',
    to: new ObjectId('6905adf16a22b7843b006183'),
    toName: 'sayantan3',
    status: 'pending',
    _id: new ObjectId('6905cdce14ad0d0f020b3985'),
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
Filtering sent request: { status: 'pending', to: new ObjectId('6905adf16a22b7843b006183') }
Mapping sent request: {
  from: new ObjectId('6901f85f42c5d010fa811206'),
  fromName: 'sayantan2',
  to: new ObjectId('6905adf16a22b7843b006183'),
  toName: 'sayantan3',
  status: 'pending',
  _id: new ObjectId('6905cdce14ad0d0f020b3985'),
  createdAt: 2025-11-01T09:07:26.707Z,
  updatedAt: 2025-11-01T09:07:26.707Z
}
Processed sentRequests: [
  {
    id: '6905cdce14ad0d0f020b3985',
    to: {
      id: '6905adf16a22b7843b006183',
      username: 'sayantan3',
      email: '',
      profilePicture: null
    },
    status: 'pending',
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
Populating recipient details...
Looking up recipient: 6905adf16a22b7843b006183
Found recipient: sayantan3
Final populated sent requests: [
  {
    id: '6905cdce14ad0d0f020b3985',
    to: {
      id: '6905adf16a22b7843b006183',
      username: 'sayantan3',
      email: 'sayantan3@gmail.com',
      profilePicture: undefined
    },
    status: 'pending',
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
=== FRIEND REQUEST GET END (sent) ===
 GET /api/friends/request?type=sent 200 in 127ms
 GET /api/socket-health 200 in 40ms
 GET /api/socket-health 200 in 112ms
 GET /socket.io?EIO=4&transport=polling&t=y2j60wuu 404 in 112ms
 GET /socket.io?EIO=4&transport=polling&t=y2j97mt2 404 in 89ms
 GET /api/socket-health 200 in 34ms
 GET /api/socket-health 200 in 112ms
 GET /socket.io?EIO=4&transport=polling&t=y2kpdfzw 404 in 202ms
 GET /socket.io?EIO=4&transport=polling&t=y2kskn1e 404 in 92ms
 GET /api/socket-health 200 in 37ms
 GET /api/socket-health 200 in 114ms
 GET /socket.io?EIO=4&transport=polling&t=y2m9hgg8 404 in 195ms
 GET /socket.io?EIO=4&transport=polling&t=y2mcp0q4 404 in 93ms
 GET /api/socket-health 200 in 33ms
 GET /api/socket-health 200 in 119ms
 GET /socket.io?EIO=4&transport=polling&t=y2nscyj0 404 in 205ms
 GET /socket.io?EIO=4&transport=polling&t=y2nvqtot 404 in 100ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
 GET /api/socket-health 200 in 63ms
 GET /api/socket-health 200 in 116ms
 GET /socket.io?EIO=4&transport=polling&t=y2pcykrv 404 in 110ms
 GET /api/conversations 200 in 269ms
 GET /socket.io?EIO=4&transport=polling&t=y2pg7clh 404 in 95ms
 GET /api/socket-health 200 in 28ms
 GET /api/socket-health 200 in 120ms
 GET /socket.io?EIO=4&transport=polling&t=y2qvc5im 404 in 117ms
 GET /socket.io?EIO=4&transport=polling&t=y2qyphg9 404 in 95ms
 GET /api/socket-health 200 in 30ms
 GET /api/socket-health 200 in 123ms
 GET /socket.io?EIO=4&transport=polling&t=y2sf5pzc 404 in 123ms
 GET /socket.io?EIO=4&transport=polling&t=y2sioymv 404 in 94ms
 GET /api/socket-health 200 in 28ms
 GET /api/socket-health 200 in 116ms
 GET /socket.io?EIO=4&transport=polling&t=y2tyme7y 404 in 119ms
 GET /socket.io?EIO=4&transport=polling&t=y2u1ya2s 404 in 95ms
 GET /api/socket-health 200 in 34ms
 GET /api/socket-health 200 in 120ms
 GET /socket.io?EIO=4&transport=polling&t=y2vicxsf 404 in 114ms
 GET /socket.io?EIO=4&transport=polling&t=y2vlqzma 404 in 92ms
 GET /api/socket-health 200 in 31ms
 GET /api/socket-health 200 in 119ms
 GET /socket.io?EIO=4&transport=polling&t=y2x1mppz 404 in 203ms
 GET /socket.io?EIO=4&transport=polling&t=y2x51wwo 404 in 87ms
 GET /api/socket-health 200 in 47ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
 GET /api/auth/session 200 in 105ms
 GET /api/socket-health 200 in 188ms
(node:2116) [MONGOOSE] Warning: Duplicate schema index on {"userId":1} found. This is often due to declaring an index using both "index: true" and "schema.index()". Please remove the duplicate index definition.
(node:2116) [MONGOOSE] Warning: Duplicate schema index on {"sessionId":1} found. This is often due to declaring an index using both "index: true" and "schema.index()". Please remove the duplicate index definition.
(node:2116) [MONGOOSE] Warning: Duplicate schema index on {"metadata.endTime":1} found. This is often due to declaring an index using both "index: true" and "schema.index()". Please remove the duplicate index definition.
(node:2116) [MONGOOSE] Warning: Duplicate schema index on {"sessionId":1} found. This is often due to declaring an index using both "index: true" and "schema.index()". Please remove the duplicate index definition.
(node:2116) [MONGOOSE] Warning: Duplicate schema index on {"status":1,"severity":-1,"createdAt":-1} found. This is often due to declaring an index using both "index: true" and "schema.index()". Please remove the duplicate index definition.
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
=== FRIEND REQUEST GET START ===
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
Request type: received User: sayantan2@gmail.com
âœ… Database connected
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
 GET /socket.io?EIO=4&transport=polling&t=y2ylvbyt 404 in 341ms
 GET /socket.io?EIO=4&transport=polling&t=y2yrcttp 404 in 113ms
 GET /api/random-chat/queue 200 in 341ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
 GET /api/users/me 200 in 568ms
 GET /api/random-chat/session 200 in 334ms
 GET /api/friends 200 in 714ms
âœ… Current user found: {
  id: new ObjectId('6901f85f42c5d010fa811206'),
  email: 'sayantan2@gmail.com',
  friendRequestsCount: 0,
  sentRequestsCount: 1
}
Processing received requests...
Raw friendRequests: []
Processed receivedRequests: []
Populating sender details...
Final populated requests: []
=== FRIEND REQUEST GET END (received) ===
 GET /api/friends/request?type=received 200 in 728ms
=== FRIEND REQUEST GET START ===
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
Request type: sent User: sayantan2@gmail.com
âœ… Database connected
âœ… Current user found: {
  id: new ObjectId('6901f85f42c5d010fa811206'),
  email: 'sayantan2@gmail.com',
  friendRequestsCount: 0,
  sentRequestsCount: 1
}
Processing sent requests...
Raw sentRequests: [
  {
    from: new ObjectId('6901f85f42c5d010fa811206'),
    fromName: 'sayantan2',
    to: new ObjectId('6905adf16a22b7843b006183'),
    toName: 'sayantan3',
    status: 'pending',
    _id: new ObjectId('6905cdce14ad0d0f020b3985'),
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
Filtering sent request: { status: 'pending', to: new ObjectId('6905adf16a22b7843b006183') }
Mapping sent request: {
  from: new ObjectId('6901f85f42c5d010fa811206'),
  fromName: 'sayantan2',
  to: new ObjectId('6905adf16a22b7843b006183'),
  toName: 'sayantan3',
  status: 'pending',
  _id: new ObjectId('6905cdce14ad0d0f020b3985'),
  createdAt: 2025-11-01T09:07:26.707Z,
  updatedAt: 2025-11-01T09:07:26.707Z
}
Processed sentRequests: [
  {
    id: '6905cdce14ad0d0f020b3985',
    to: {
      id: '6905adf16a22b7843b006183',
      username: 'sayantan3',
      email: '',
      profilePicture: null
    },
    status: 'pending',
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
Populating recipient details...
Looking up recipient: 6905adf16a22b7843b006183
Found recipient: sayantan3
Final populated sent requests: [
  {
    id: '6905cdce14ad0d0f020b3985',
    to: {
      id: '6905adf16a22b7843b006183',
      username: 'sayantan3',
      email: 'sayantan3@gmail.com',
      profilePicture: undefined
    },
    status: 'pending',
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
=== FRIEND REQUEST GET END (sent) ===
 GET /api/friends/request?type=sent 200 in 127ms
 POST /api/users/heartbeat 200 in 998ms
 GET /api/socket-health 200 in 37ms
 GET /api/socket-health 200 in 115ms
 GET /socket.io?EIO=4&transport=polling&t=y3054ije 404 in 115ms
 GET /socket.io?EIO=4&transport=polling&t=y308cmlr 404 in 94ms
 GET /api/socket-health 200 in 43ms
 GET /api/socket-health 200 in 151ms
 GET /socket.io?EIO=4&transport=polling&t=y31or0zo 404 in 232ms
 GET /socket.io?EIO=4&transport=polling&t=y31t0blg 404 in 93ms
 GET /api/socket-health 200 in 290ms
 GET /api/socket-health 200 in 661ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
=== FRIEND REQUEST GET START ===
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
Request type: received User: sayantan2@gmail.com
âœ… Database connected
 GET /socket.io?EIO=4&transport=polling&t=y3468ahe 404 in 940ms
âœ… Current user found: {
  id: new ObjectId('6901f85f42c5d010fa811206'),
  email: 'sayantan2@gmail.com',
  friendRequestsCount: 0,
  sentRequestsCount: 1
}
Processing received requests...
Raw friendRequests: []
Processed receivedRequests: []
Populating sender details...
Final populated requests: []
=== FRIEND REQUEST GET END (received) ===
 GET /api/friends/request?type=received 200 in 359ms
 GET /socket.io?EIO=4&transport=polling&t=y346c0fq 404 in 636ms
 GET /api/friends 200 in 408ms
=== FRIEND REQUEST GET START ===
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
Request type: sent User: sayantan2@gmail.com
âœ… Database connected
âœ… Current user found: {
  id: new ObjectId('6901f85f42c5d010fa811206'),
  email: 'sayantan2@gmail.com',
  friendRequestsCount: 0,
  sentRequestsCount: 1
}
Processing sent requests...
Raw sentRequests: [
  {
    from: new ObjectId('6901f85f42c5d010fa811206'),
    fromName: 'sayantan2',
    to: new ObjectId('6905adf16a22b7843b006183'),
    toName: 'sayantan3',
    status: 'pending',
    _id: new ObjectId('6905cdce14ad0d0f020b3985'),
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
Filtering sent request: { status: 'pending', to: new ObjectId('6905adf16a22b7843b006183') }
Mapping sent request: {
  from: new ObjectId('6901f85f42c5d010fa811206'),
  fromName: 'sayantan2',
  to: new ObjectId('6905adf16a22b7843b006183'),
  toName: 'sayantan3',
  status: 'pending',
  _id: new ObjectId('6905cdce14ad0d0f020b3985'),
  createdAt: 2025-11-01T09:07:26.707Z,
  updatedAt: 2025-11-01T09:07:26.707Z
}
Processed sentRequests: [
  {
    id: '6905cdce14ad0d0f020b3985',
    to: {
      id: '6905adf16a22b7843b006183',
      username: 'sayantan3',
      email: '',
      profilePicture: null
    },
    status: 'pending',
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
Populating recipient details...
Looking up recipient: 6905adf16a22b7843b006183
Found recipient: sayantan3
Final populated sent requests: [
  {
    id: '6905cdce14ad0d0f020b3985',
    to: {
      id: '6905adf16a22b7843b006183',
      username: 'sayantan3',
      email: 'sayantan3@gmail.com',
      profilePicture: undefined
    },
    status: 'pending',
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
=== FRIEND REQUEST GET END (sent) ===
 GET /api/friends/request?type=sent 200 in 228ms
 GET /api/socket-health 200 in 136ms
 GET /api/socket-health 200 in 471ms
 GET /socket.io?EIO=4&transport=polling&t=y36emr9l 404 in 438ms
 GET /socket.io?EIO=4&transport=polling&t=y36rsqc6 404 in 438ms
 GET /api/socket-health 200 in 112ms
 GET /socket.io?EIO=4&transport=polling&t=y37xc2bb 404 in 419ms
 GET /api/socket-health 200 in 108ms
 GET /socket.io?EIO=4&transport=polling&t=y38owgy2 404 in 252ms
 GET /api/socket-health 200 in 75ms
 GET /socket.io?EIO=4&transport=polling&t=y39gm8pf 404 in 248ms
 GET /api/socket-health 200 in 140ms
 GET /api/socket-health 200 in 89ms
 GET /socket.io?EIO=4&transport=polling&t=y3aqfuoy 404 in 352ms
 GET /socket.io?EIO=4&transport=polling&t=y3b0wsur 404 in 384ms
 GET /api/socket-health 200 in 58ms
 GET /api/socket-health 200 in 74ms
 GET /socket.io?EIO=4&transport=polling&t=y3chzh06 404 in 445ms
 GET /socket.io?EIO=4&transport=polling&t=y3ck3jsr 404 in 217ms
 GET /api/socket-health 200 in 49ms
 GET /api/socket-health 200 in 50ms
 GET /socket.io?EIO=4&transport=polling&t=y3e1ndac 404 in 361ms
 GET /socket.io?EIO=4&transport=polling&t=y3e33gc2 404 in 352ms
 GET /api/socket-health 200 in 33ms
 GET /api/socket-health 200 in 108ms
 GET /socket.io?EIO=4&transport=polling&t=y3fkex34 404 in 196ms
 GET /socket.io?EIO=4&transport=polling&t=y3fnqzas 404 in 103ms
 GET /api/socket-health 200 in 29ms
 GET /api/socket-health 200 in 103ms
 GET /socket.io?EIO=4&transport=polling&t=y3h419b7 404 in 186ms
 GET /socket.io?EIO=4&transport=polling&t=y3h6z6vj 404 in 99ms
 GET /api/socket-health 200 in 69ms
 GET /api/socket-health 200 in 74ms
 GET /socket.io?EIO=4&transport=polling&t=y3ippunk 404 in 392ms
 GET /socket.io?EIO=4&transport=polling&t=y3irryml 404 in 211ms
 GET /api/socket-health 200 in 38ms
 GET /api/socket-health 200 in 55ms
 GET /socket.io?EIO=4&transport=polling&t=y3k7jonf 404 in 236ms
 GET /socket.io?EIO=4&transport=polling&t=y3k96t2w 404 in 112ms
 GET /api/socket-health 200 in 33ms
 GET /api/socket-health 200 in 140ms
 GET /socket.io?EIO=4&transport=polling&t=y3lqtpzt 404 in 226ms
 GET /socket.io?EIO=4&transport=polling&t=y3lus5tn 404 in 103ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
 GET /api/conversations 200 in 161ms
 POST /api/users/heartbeat 200 in 212ms
 GET /api/socket-health 200 in 32ms
 GET /api/socket-health 200 in 41ms
 GET /socket.io?EIO=4&transport=polling&t=y3naaj9b 404 in 245ms
 GET /socket.io?EIO=4&transport=polling&t=y3nbj240 404 in 115ms
 GET /api/socket-health 200 in 52ms
 GET /api/socket-health 200 in 45ms
 GET /socket.io?EIO=4&transport=polling&t=y3ouik63 404 in 345ms
 GET /socket.io?EIO=4&transport=polling&t=y3ovwh0d 404 in 161ms
 GET /api/socket-health 200 in 37ms
 GET /api/socket-health 200 in 126ms
 GET /socket.io?EIO=4&transport=polling&t=y3qdh23r 404 in 232ms
 GET /socket.io?EIO=4&transport=polling&t=y3qh4oq0 404 in 124ms
 GET /api/socket-health 200 in 175ms
 GET /api/socket-health 200 in 44ms
 GET /socket.io?EIO=4&transport=polling&t=y3s25824 404 in 334ms
 GET /socket.io?EIO=4&transport=polling&t=y3s0vkv7 404 in 366ms
=== FRIEND REQUEST GET START ===
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
Request type: received User: sayantan2@gmail.com
âœ… Database connected
âœ… Current user found: {
  id: new ObjectId('6901f85f42c5d010fa811206'),
  email: 'sayantan2@gmail.com',
  friendRequestsCount: 0,
  sentRequestsCount: 1
}
Processing received requests...
Raw friendRequests: []
Processed receivedRequests: []
Populating sender details...
Final populated requests: []
=== FRIEND REQUEST GET END (received) ===
 GET /api/friends/request?type=received 200 in 183ms
 GET /api/socket-health 200 in 102ms
=== FRIEND REQUEST GET START ===
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
Request type: sent User: sayantan2@gmail.com
âœ… Database connected
âœ… Current user found: {
  id: new ObjectId('6901f85f42c5d010fa811206'),
  email: 'sayantan2@gmail.com',
  friendRequestsCount: 0,
  sentRequestsCount: 1
}
Processing sent requests...
Raw sentRequests: [
  {
    from: new ObjectId('6901f85f42c5d010fa811206'),
    fromName: 'sayantan2',
    to: new ObjectId('6905adf16a22b7843b006183'),
    toName: 'sayantan3',
    status: 'pending',
    _id: new ObjectId('6905cdce14ad0d0f020b3985'),
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
Filtering sent request: { status: 'pending', to: new ObjectId('6905adf16a22b7843b006183') }
Mapping sent request: {
  from: new ObjectId('6901f85f42c5d010fa811206'),
  fromName: 'sayantan2',
  to: new ObjectId('6905adf16a22b7843b006183'),
  toName: 'sayantan3',
  status: 'pending',
  _id: new ObjectId('6905cdce14ad0d0f020b3985'),
  createdAt: 2025-11-01T09:07:26.707Z,
  updatedAt: 2025-11-01T09:07:26.707Z
}
Processed sentRequests: [
  {
    id: '6905cdce14ad0d0f020b3985',
    to: {
      id: '6905adf16a22b7843b006183',
      username: 'sayantan3',
      email: '',
      profilePicture: null
    },
    status: 'pending',
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
Populating recipient details...
Looking up recipient: 6905adf16a22b7843b006183
 GET /api/socket-health 200 in 153ms
Found recipient: sayantan3
Final populated sent requests: [
  {
    id: '6905cdce14ad0d0f020b3985',
    to: {
      id: '6905adf16a22b7843b006183',
      username: 'sayantan3',
      email: 'sayantan3@gmail.com',
      profilePicture: undefined
    },
    status: 'pending',
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
=== FRIEND REQUEST GET END (sent) ===
 GET /api/friends/request?type=sent 200 in 427ms
 GET /socket.io?EIO=4&transport=polling&t=y3tkuq8q 404 in 298ms
 GET /socket.io?EIO=4&transport=polling&t=y3tprhvd 404 in 158ms
 GET /api/socket-health 200 in 57ms
 GET /api/socket-health 200 in 145ms
 GET /socket.io?EIO=4&transport=polling&t=y3v0vqm0 404 in 236ms
 GET /socket.io?EIO=4&transport=polling&t=y3v4yxe9 404 in 107ms
 GET /api/socket-health 200 in 41ms
 GET /api/socket-health 200 in 200ms
 GET /socket.io?EIO=4&transport=polling&t=y3wl2rav 404 in 302ms
 GET /socket.io?EIO=4&transport=polling&t=y3wqrak0 404 in 120ms
 GET /api/socket-health 200 in 40ms
 GET /api/socket-health 200 in 187ms
 GET /socket.io?EIO=4&transport=polling&t=y3y38ggg 404 in 198ms
 GET /socket.io?EIO=4&transport=polling&t=y3y8tjsw 404 in 135ms
 GET /api/socket-health 200 in 45ms
 GET /api/socket-health 200 in 183ms
 GET /socket.io?EIO=4&transport=polling&t=y3zn8xtz 404 in 205ms
 GET /socket.io?EIO=4&transport=polling&t=y3zsf08e 404 in 132ms
 GET /api/socket-health 200 in 32ms
 GET /api/socket-health 200 in 123ms
 GET /socket.io?EIO=4&transport=polling&t=y416a2u7 404 in 224ms
 GET /socket.io?EIO=4&transport=polling&t=y419rhuh 404 in 113ms
 GET /api/socket-health 200 in 33ms
 GET /api/socket-health 200 in 126ms
 GET /socket.io?EIO=4&transport=polling&t=y42psf4m 404 in 121ms
 GET /socket.io?EIO=4&transport=polling&t=y42tejlp 404 in 105ms
 GET /api/socket-health 200 in 28ms
 GET /api/socket-health 200 in 115ms
 GET /socket.io?EIO=4&transport=polling&t=y44965h7 404 in 201ms
 GET /socket.io?EIO=4&transport=polling&t=y44cgud1 404 in 97ms
 GET /api/socket-health 200 in 41ms
 GET /api/socket-health 200 in 121ms
 GET /socket.io?EIO=4&transport=polling&t=y45t0cyz 404 in 116ms
 GET /socket.io?EIO=4&transport=polling&t=y45wf4mq 404 in 106ms
 GET /api/socket-health 200 in 29ms
 GET /api/socket-health 200 in 140ms
 GET /socket.io?EIO=4&transport=polling&t=y47chcx7 404 in 238ms
 GET /socket.io?EIO=4&transport=polling&t=y47gfy5p 404 in 108ms
 GET /api/socket-health 200 in 28ms
 GET /api/socket-health 200 in 125ms
 GET /socket.io?EIO=4&transport=polling&t=y48vzttc 404 in 214ms
 GET /socket.io?EIO=4&transport=polling&t=y48zie03 404 in 103ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
 POST /api/users/heartbeat 200 in 223ms
 GET /api/socket-health 200 in 50ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
 GET /api/socket-health 200 in 144ms
 GET /api/conversations 200 in 299ms
 GET /socket.io?EIO=4&transport=polling&t=y4ag5oiq 404 in 213ms
 GET /socket.io?EIO=4&transport=polling&t=y4akagmj 404 in 101ms
 GET /api/socket-health 200 in 35ms
 GET /api/socket-health 200 in 138ms
 GET /socket.io?EIO=4&transport=polling&t=y4bz97w1 404 in 259ms
 GET /socket.io?EIO=4&transport=polling&t=y4c35p4g 404 in 144ms
 GET /api/socket-health 200 in 37ms
 GET /api/socket-health 200 in 153ms
 GET /socket.io?EIO=4&transport=polling&t=y4diro51 404 in 402ms
 GET /socket.io?EIO=4&transport=polling&t=y4dn3n30 404 in 248ms
=== FRIEND REQUEST GET START ===
 GET /api/socket-health 200 in 94ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
Request type: received User: sayantan2@gmail.com
âœ… Database connected
âœ… Current user found: {
  id: new ObjectId('6901f85f42c5d010fa811206'),
  email: 'sayantan2@gmail.com',
  friendRequestsCount: 0,
  sentRequestsCount: 1
}
Processing received requests...
Raw friendRequests: []
Processed receivedRequests: []
Populating sender details...
Final populated requests: []
=== FRIEND REQUEST GET END (received) ===
 GET /api/friends/request?type=received 200 in 157ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
 GET /api/socket-health 200 in 240ms
=== FRIEND REQUEST GET START ===
 GET /api/friends 200 in 368ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
Request type: sent User: sayantan2@gmail.com
âœ… Database connected
âœ… Current user found: {
  id: new ObjectId('6901f85f42c5d010fa811206'),
  email: 'sayantan2@gmail.com',
  friendRequestsCount: 0,
  sentRequestsCount: 1
}
Processing sent requests...
Raw sentRequests: [
  {
    from: new ObjectId('6901f85f42c5d010fa811206'),
    fromName: 'sayantan2',
    to: new ObjectId('6905adf16a22b7843b006183'),
    toName: 'sayantan3',
    status: 'pending',
    _id: new ObjectId('6905cdce14ad0d0f020b3985'),
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
Filtering sent request: { status: 'pending', to: new ObjectId('6905adf16a22b7843b006183') }
Mapping sent request: {
  from: new ObjectId('6901f85f42c5d010fa811206'),
  fromName: 'sayantan2',
  to: new ObjectId('6905adf16a22b7843b006183'),
  toName: 'sayantan3',
  status: 'pending',
  _id: new ObjectId('6905cdce14ad0d0f020b3985'),
  createdAt: 2025-11-01T09:07:26.707Z,
  updatedAt: 2025-11-01T09:07:26.707Z
}
Processed sentRequests: [
  {
    id: '6905cdce14ad0d0f020b3985',
    to: {
      id: '6905adf16a22b7843b006183',
      username: 'sayantan3',
      email: '',
      profilePicture: null
    },
    status: 'pending',
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
Populating recipient details...
Looking up recipient: 6905adf16a22b7843b006183
 GET /socket.io?EIO=4&transport=polling&t=y4f4vem4 404 in 352ms
 GET /socket.io?EIO=4&transport=polling&t=y4fbwfmu 404 in 143ms
Found recipient: sayantan3
Final populated sent requests: [
  {
    id: '6905cdce14ad0d0f020b3985',
    to: {
      id: '6905adf16a22b7843b006183',
      username: 'sayantan3',
      email: 'sayantan3@gmail.com',
      profilePicture: undefined
    },
    status: 'pending',
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
=== FRIEND REQUEST GET END (sent) ===
 GET /api/friends/request?type=sent 200 in 380ms
 GET /api/socket-health 200 in 28ms
 GET /api/socket-health 200 in 122ms
 GET /socket.io?EIO=4&transport=polling&t=y4glox22 404 in 120ms
 GET /socket.io?EIO=4&transport=polling&t=y4gp4mpp 404 in 96ms
 GET /api/socket-health 200 in 64ms
 GET /api/socket-health 200 in 180ms
 GET /socket.io?EIO=4&transport=polling&t=y4i6obon 404 in 184ms
 GET /socket.io?EIO=4&transport=polling&t=y4ibqzqr 404 in 123ms
 GET /api/socket-health 200 in 41ms
 GET /api/socket-health 200 in 146ms
 GET /socket.io?EIO=4&transport=polling&t=y4jpqpin 404 in 228ms
 GET /socket.io?EIO=4&transport=polling&t=y4jtyb92 404 in 104ms
 GET /api/socket-health 200 in 28ms
 GET /api/socket-health 200 in 128ms
 GET /socket.io?EIO=4&transport=polling&t=y4l8h659 404 in 277ms
 GET /socket.io?EIO=4&transport=polling&t=y4lc2obs 404 in 168ms
 GET /api/socket-health 200 in 30ms
 GET /api/socket-health 200 in 113ms
 GET /socket.io?EIO=4&transport=polling&t=y4ms1dsg 404 in 200ms
 GET /socket.io?EIO=4&transport=polling&t=y4mv91zb 404 in 107ms
 GET /api/socket-health 200 in 28ms
 GET /api/socket-health 200 in 116ms
 GET /socket.io?EIO=4&transport=polling&t=y4obdeq6 404 in 115ms
 GET /socket.io?EIO=4&transport=polling&t=y4oem6c4 404 in 107ms
 GET /api/socket-health 200 in 35ms
 GET /api/socket-health 200 in 131ms
 GET /socket.io?EIO=4&transport=polling&t=y4pvnxtj 404 in 200ms
 GET /socket.io?EIO=4&transport=polling&t=y4pzd07h 404 in 96ms
 GET /api/socket-health 200 in 27ms
 GET /api/socket-health 200 in 105ms
 GET /socket.io?EIO=4&transport=polling&t=y4replz0 404 in 109ms
 GET /socket.io?EIO=4&transport=polling&t=y4rhokep 404 in 95ms
 GET /api/socket-health 200 in 30ms
 GET /api/socket-health 200 in 114ms
 GET /socket.io?EIO=4&transport=polling&t=y4sy8yfb 404 in 113ms
 GET /socket.io?EIO=4&transport=polling&t=y4t1g57p 404 in 107ms
 GET /api/socket-health 200 in 29ms
 GET /api/socket-health 200 in 110ms
 GET /socket.io?EIO=4&transport=polling&t=y4uhri10 404 in 197ms
 GET /socket.io?EIO=4&transport=polling&t=y4ukws5t 404 in 96ms
 GET /api/socket-health 200 in 43ms
 GET /api/socket-health 200 in 120ms
 GET /socket.io?EIO=4&transport=polling&t=y4w1tuog 404 in 186ms
 GET /socket.io?EIO=4&transport=polling&t=y4w56s41 404 in 100ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
 POST /api/users/heartbeat 200 in 201ms
 GET /api/socket-health 200 in 27ms
 GET /api/socket-health 200 in 136ms
 GET /socket.io?EIO=4&transport=polling&t=y4xkrrrk 404 in 213ms
 GET /socket.io?EIO=4&transport=polling&t=y4xom60h 404 in 96ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
 GET /api/conversations 200 in 141ms
 GET /api/socket-health 200 in 32ms
 GET /api/socket-health 200 in 114ms
 GET /socket.io?EIO=4&transport=polling&t=y4z4iu8z 404 in 214ms
 GET /socket.io?EIO=4&transport=polling&t=y4z7s95p 404 in 103ms
 GET /api/socket-health 200 in 30ms
 GET /api/socket-health 200 in 113ms
 GET /socket.io?EIO=4&transport=polling&t=y50nyhzj 404 in 213ms
 GET /socket.io?EIO=4&transport=polling&t=y50r5rap 404 in 107ms
 GET /api/socket-health 200 in 36ms
 GET /api/socket-health 200 in 106ms
 GET /socket.io?EIO=4&transport=polling&t=y527rhdt 404 in 203ms
 GET /socket.io?EIO=4&transport=polling&t=y52arx9m 404 in 130ms
=== FRIEND REQUEST GET START ===
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
Request type: received User: sayantan2@gmail.com
âœ… Database connected
âœ… Current user found: {
  id: new ObjectId('6901f85f42c5d010fa811206'),
  email: 'sayantan2@gmail.com',
  friendRequestsCount: 0,
  sentRequestsCount: 1
}
Processing received requests...
Raw friendRequests: []
Processed receivedRequests: []
Populating sender details...
Final populated requests: []
=== FRIEND REQUEST GET END (received) ===
 GET /api/friends/request?type=received 200 in 94ms
=== FRIEND REQUEST GET START ===
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
Request type: sent User: sayantan2@gmail.com
âœ… Database connected
âœ… Current user found: {
  id: new ObjectId('6901f85f42c5d010fa811206'),
  email: 'sayantan2@gmail.com',
  friendRequestsCount: 0,
  sentRequestsCount: 1
}
Processing sent requests...
Raw sentRequests: [
  {
    from: new ObjectId('6901f85f42c5d010fa811206'),
    fromName: 'sayantan2',
    to: new ObjectId('6905adf16a22b7843b006183'),
    toName: 'sayantan3',
    status: 'pending',
    _id: new ObjectId('6905cdce14ad0d0f020b3985'),
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
Filtering sent request: { status: 'pending', to: new ObjectId('6905adf16a22b7843b006183') }
Mapping sent request: {
  from: new ObjectId('6901f85f42c5d010fa811206'),
  fromName: 'sayantan2',
  to: new ObjectId('6905adf16a22b7843b006183'),
  toName: 'sayantan3',
  status: 'pending',
  _id: new ObjectId('6905cdce14ad0d0f020b3985'),
  createdAt: 2025-11-01T09:07:26.707Z,
  updatedAt: 2025-11-01T09:07:26.707Z
}
Processed sentRequests: [
  {
    id: '6905cdce14ad0d0f020b3985',
    to: {
      id: '6905adf16a22b7843b006183',
      username: 'sayantan3',
      email: '',
      profilePicture: null
    },
    status: 'pending',
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
Populating recipient details...
Looking up recipient: 6905adf16a22b7843b006183
Found recipient: sayantan3
Final populated sent requests: [
  {
    id: '6905cdce14ad0d0f020b3985',
    to: {
      id: '6905adf16a22b7843b006183',
      username: 'sayantan3',
      email: 'sayantan3@gmail.com',
      profilePicture: undefined
    },
    status: 'pending',
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
=== FRIEND REQUEST GET END (sent) ===
 GET /api/friends/request?type=sent 200 in 135ms
 GET /api/socket-health 200 in 42ms
 GET /api/socket-health 200 in 124ms
 GET /socket.io?EIO=4&transport=polling&t=y53rlr1q 404 in 217ms
 GET /socket.io?EIO=4&transport=polling&t=y53v5kz6 404 in 106ms
 GET /api/socket-health 200 in 33ms
 GET /api/socket-health 200 in 114ms
 GET /socket.io?EIO=4&transport=polling&t=y55aywqr 404 in 188ms
 GET /socket.io?EIO=4&transport=polling&t=y55e5ezh 404 in 82ms
 GET /api/socket-health 200 in 30ms
 GET /api/socket-health 200 in 112ms
 GET /socket.io?EIO=4&transport=polling&t=y56ve6xm 404 in 116ms
 GET /socket.io?EIO=4&transport=polling&t=y56ykdu3 404 in 95ms
 GET /api/socket-health 200 in 35ms
 GET /api/socket-health 200 in 111ms
 GET /socket.io?EIO=4&transport=polling&t=y58dymun 404 in 201ms
 GET /socket.io?EIO=4&transport=polling&t=y58h3v37 404 in 101ms
 GET /api/socket-health 200 in 32ms
 GET /api/socket-health 200 in 137ms
 GET /socket.io?EIO=4&transport=polling&t=y59xi6lc 404 in 134ms
 GET /socket.io?EIO=4&transport=polling&t=y5a1gb90 404 in 114ms
 GET /api/socket-health 200 in 26ms
 GET /api/socket-health 200 in 125ms
 GET /socket.io?EIO=4&transport=polling&t=y5bgwbyx 404 in 218ms
 GET /socket.io?EIO=4&transport=polling&t=y5bkeixf 404 in 111ms
 GET /api/socket-health 200 in 35ms
 GET /api/socket-health 200 in 132ms
 GET /socket.io?EIO=4&transport=polling&t=y5d0ticc 404 in 138ms
 GET /socket.io?EIO=4&transport=polling&t=y5d4kj1c 404 in 101ms
 GET /api/socket-health 200 in 33ms
 GET /api/socket-health 200 in 109ms
 GET /socket.io?EIO=4&transport=polling&t=y5ek4aa7 404 in 207ms
 GET /socket.io?EIO=4&transport=polling&t=y5en9vai 404 in 111ms
 GET /api/socket-health 200 in 30ms
 GET /api/socket-health 200 in 127ms
 GET /socket.io?EIO=4&transport=polling&t=y5g3exo1 404 in 232ms
 GET /socket.io?EIO=4&transport=polling&t=y5g6z0x4 404 in 112ms
 GET /api/socket-health 200 in 38ms
 GET /api/socket-health 200 in 136ms
 GET /socket.io?EIO=4&transport=polling&t=y5hni852 404 in 231ms
 GET /socket.io?EIO=4&transport=polling&t=y5hrctgc 404 in 106ms
 GET /api/socket-health 200 in 34ms
 GET /api/socket-health 200 in 115ms
 GET /socket.io?EIO=4&transport=polling&t=y5j6rxn3 404 in 118ms
 GET /socket.io?EIO=4&transport=polling&t=y5ja3wbb 404 in 94ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
 POST /api/users/heartbeat 200 in 207ms
 GET /api/socket-health 200 in 41ms
 GET /api/socket-health 200 in 132ms
 GET /socket.io?EIO=4&transport=polling&t=y5kqrl25 404 in 228ms
 GET /socket.io?EIO=4&transport=polling&t=y5kug67f 404 in 106ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
 GET /api/socket-health 200 in 83ms
 GET /api/socket-health 200 in 133ms
 GET /api/conversations 200 in 340ms
 GET /socket.io?EIO=4&transport=polling&t=y5me66ej 404 in 254ms
 GET /socket.io?EIO=4&transport=polling&t=y5mhziy7 404 in 129ms
 GET /api/socket-health 200 in 41ms
 GET /api/socket-health 200 in 153ms
 GET /socket.io?EIO=4&transport=polling&t=y5nthe72 404 in 254ms
 GET /socket.io?EIO=4&transport=polling&t=y5nxsdbu 404 in 109ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
=== FRIEND REQUEST GET START ===
 GET /api/socket-health 200 in 143ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
Request type: received User: sayantan2@gmail.com
âœ… Database connected
 GET /api/friends 200 in 267ms
 GET /api/socket-health 200 in 250ms
 GET /socket.io?EIO=4&transport=polling&t=y5ph94xm 404 in 230ms
 GET /socket.io?EIO=4&transport=polling&t=y5posk9t 404 in 138ms
âœ… Current user found: {
  id: new ObjectId('6901f85f42c5d010fa811206'),
  email: 'sayantan2@gmail.com',
  friendRequestsCount: 0,
  sentRequestsCount: 1
}
Processing received requests...
Raw friendRequests: []
Processed receivedRequests: []
Populating sender details...
Final populated requests: []
=== FRIEND REQUEST GET END (received) ===
 GET /api/friends/request?type=received 200 in 818ms
=== FRIEND REQUEST GET START ===
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
Request type: sent User: sayantan2@gmail.com
âœ… Database connected
âœ… Current user found: {
  id: new ObjectId('6901f85f42c5d010fa811206'),
  email: 'sayantan2@gmail.com',
  friendRequestsCount: 0,
  sentRequestsCount: 1
}
Processing sent requests...
Raw sentRequests: [
  {
    from: new ObjectId('6901f85f42c5d010fa811206'),
    fromName: 'sayantan2',
    to: new ObjectId('6905adf16a22b7843b006183'),
    toName: 'sayantan3',
    status: 'pending',
    _id: new ObjectId('6905cdce14ad0d0f020b3985'),
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
Filtering sent request: { status: 'pending', to: new ObjectId('6905adf16a22b7843b006183') }
Mapping sent request: {
  from: new ObjectId('6901f85f42c5d010fa811206'),
  fromName: 'sayantan2',
  to: new ObjectId('6905adf16a22b7843b006183'),
  toName: 'sayantan3',
  status: 'pending',
  _id: new ObjectId('6905cdce14ad0d0f020b3985'),
  createdAt: 2025-11-01T09:07:26.707Z,
  updatedAt: 2025-11-01T09:07:26.707Z
}
Processed sentRequests: [
  {
    id: '6905cdce14ad0d0f020b3985',
    to: {
      id: '6905adf16a22b7843b006183',
      username: 'sayantan3',
      email: '',
      profilePicture: null
    },
    status: 'pending',
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
Populating recipient details...
Looking up recipient: 6905adf16a22b7843b006183
Found recipient: sayantan3
Final populated sent requests: [
  {
    id: '6905cdce14ad0d0f020b3985',
    to: {
      id: '6905adf16a22b7843b006183',
      username: 'sayantan3',
      email: 'sayantan3@gmail.com',
      profilePicture: undefined
    },
    status: 'pending',
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
=== FRIEND REQUEST GET END (sent) ===
 GET /api/friends/request?type=sent 200 in 136ms
 GET /api/socket-health 200 in 41ms
 GET /api/socket-health 200 in 123ms
 GET /socket.io?EIO=4&transport=polling&t=y5qwnxfl 404 in 206ms
 GET /socket.io?EIO=4&transport=polling&t=y5r054kg 404 in 106ms
 GET /api/socket-health 200 in 37ms
 GET /api/socket-health 200 in 112ms
 GET /socket.io?EIO=4&transport=polling&t=y5sgd3sq 404 in 196ms
 GET /socket.io?EIO=4&transport=polling&t=y5sjo508 404 in 101ms
 GET /api/socket-health 200 in 41ms
 GET /api/socket-health 200 in 111ms
 GET /socket.io?EIO=4&transport=polling&t=y5u13mvq 404 in 201ms
 GET /socket.io?EIO=4&transport=polling&t=y5u499lv 404 in 103ms
 GET /api/socket-health 200 in 37ms
 GET /api/socket-health 200 in 123ms
 GET /socket.io?EIO=4&transport=polling&t=y5vjgz4x 404 in 205ms
 GET /socket.io?EIO=4&transport=polling&t=y5vmx87e 404 in 95ms
 GET /api/socket-health 200 in 71ms
 GET /api/socket-health 200 in 146ms
 GET /socket.io?EIO=4&transport=polling&t=y5x3wzav 404 in 233ms
 GET /socket.io?EIO=4&transport=polling&t=y5x833hm 404 in 114ms
 GET /api/socket-health 200 in 32ms
 GET /api/socket-health 200 in 138ms
 GET /socket.io?EIO=4&transport=polling&t=y5ymb76m 404 in 215ms
 GET /socket.io?EIO=4&transport=polling&t=y5yq75jv 404 in 86ms
 GET /api/socket-health 200 in 35ms
 GET /api/socket-health 200 in 109ms
 GET /socket.io?EIO=4&transport=polling&t=y605ugj4 404 in 201ms
 GET /socket.io?EIO=4&transport=polling&t=y608y9w2 404 in 98ms
 GET /api/socket-health 200 in 28ms
 GET /api/socket-health 200 in 121ms
 GET /socket.io?EIO=4&transport=polling&t=y61p9kg9 404 in 212ms
 GET /socket.io?EIO=4&transport=polling&t=y61srate 404 in 105ms
 GET /api/socket-health 200 in 44ms
 GET /api/socket-health 200 in 151ms
 GET /socket.io?EIO=4&transport=polling&t=y639784v 404 in 149ms
 GET /socket.io?EIO=4&transport=polling&t=y63dg4dq 404 in 131ms
 GET /api/socket-health 200 in 41ms
 GET /api/socket-health 200 in 190ms
 GET /socket.io?EIO=4&transport=polling&t=y64snh5s 404 in 380ms
 GET /socket.io?EIO=4&transport=polling&t=y64y3c5k 404 in 205ms
 GET /api/socket-health 200 in 46ms
 GET /api/socket-health 200 in 168ms
 GET /socket.io?EIO=4&transport=polling&t=y66cozdt 404 in 259ms
 GET /socket.io?EIO=4&transport=polling&t=y66hghoy 404 in 105ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
 POST /api/users/heartbeat 200 in 201ms
 GET /api/socket-health 200 in 44ms
 GET /api/socket-health 200 in 134ms
 GET /socket.io?EIO=4&transport=polling&t=y67vzljg 404 in 209ms
 GET /socket.io?EIO=4&transport=polling&t=y67zrq0g 404 in 95ms
 GET /api/socket-health 200 in 32ms
 GET /api/socket-health 200 in 104ms
 GET /socket.io?EIO=4&transport=polling&t=y69f4s37 404 in 202ms
 GET /socket.io?EIO=4&transport=polling&t=y69i6qz8 404 in 107ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
 GET /api/conversations 200 in 446ms
 GET /api/socket-health 200 in 46ms
 GET /api/socket-health 200 in 134ms
 GET /socket.io?EIO=4&transport=polling&t=y6az3uld 404 in 218ms
 GET /socket.io?EIO=4&transport=polling&t=y6b2win1 404 in 105ms
 GET /api/socket-health 200 in 36ms
 GET /api/socket-health 200 in 129ms
 GET /socket.io?EIO=4&transport=polling&t=y6cia664 404 in 237ms
 GET /socket.io?EIO=4&transport=polling&t=y6clzjro 404 in 124ms
=== FRIEND REQUEST GET START ===
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
Request type: received User: sayantan2@gmail.com
âœ… Database connected
âœ… Current user found: {
  id: new ObjectId('6901f85f42c5d010fa811206'),
  email: 'sayantan2@gmail.com',
  friendRequestsCount: 0,
  sentRequestsCount: 1
}
Processing received requests...
Raw friendRequests: []
Processed receivedRequests: []
Populating sender details...
Final populated requests: []
=== FRIEND REQUEST GET END (received) ===
 GET /api/friends/request?type=received 200 in 110ms
=== FRIEND REQUEST GET START ===
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
Request type: sent User: sayantan2@gmail.com
âœ… Database connected
âœ… Current user found: {
  id: new ObjectId('6901f85f42c5d010fa811206'),
  email: 'sayantan2@gmail.com',
  friendRequestsCount: 0,
  sentRequestsCount: 1
}
Processing sent requests...
Raw sentRequests: [
  {
    from: new ObjectId('6901f85f42c5d010fa811206'),
    fromName: 'sayantan2',
    to: new ObjectId('6905adf16a22b7843b006183'),
    toName: 'sayantan3',
    status: 'pending',
    _id: new ObjectId('6905cdce14ad0d0f020b3985'),
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
Filtering sent request: { status: 'pending', to: new ObjectId('6905adf16a22b7843b006183') }
Mapping sent request: {
  from: new ObjectId('6901f85f42c5d010fa811206'),
  fromName: 'sayantan2',
  to: new ObjectId('6905adf16a22b7843b006183'),
  toName: 'sayantan3',
  status: 'pending',
  _id: new ObjectId('6905cdce14ad0d0f020b3985'),
  createdAt: 2025-11-01T09:07:26.707Z,
  updatedAt: 2025-11-01T09:07:26.707Z
}
Processed sentRequests: [
  {
    id: '6905cdce14ad0d0f020b3985',
    to: {
      id: '6905adf16a22b7843b006183',
      username: 'sayantan3',
      email: '',
      profilePicture: null
    },
    status: 'pending',
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
Populating recipient details...
Looking up recipient: 6905adf16a22b7843b006183
Found recipient: sayantan3
Final populated sent requests: [
  {
    id: '6905cdce14ad0d0f020b3985',
    to: {
      id: '6905adf16a22b7843b006183',
      username: 'sayantan3',
      email: 'sayantan3@gmail.com',
      profilePicture: undefined
    },
    status: 'pending',
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
=== FRIEND REQUEST GET END (sent) ===
 GET /api/friends/request?type=sent 200 in 168ms
 GET /api/socket-health 200 in 43ms
 GET /api/socket-health 200 in 224ms
 GET /socket.io?EIO=4&transport=polling&t=y6e2bvur 404 in 375ms
 GET /socket.io?EIO=4&transport=polling&t=y6e8naeo 404 in 164ms
 GET /api/socket-health 200 in 90ms
 GET /api/socket-health 200 in 194ms
 GET /socket.io?EIO=4&transport=polling&t=y6fseg3k 404 in 333ms
 GET /socket.io?EIO=4&transport=polling&t=y6fspbrf 404 in 170ms
 GET /api/socket-health 200 in 55ms
 GET /api/socket-health 200 in 57ms
 GET /socket.io?EIO=4&transport=polling&t=y6h7zf9i 404 in 269ms
 GET /socket.io?EIO=4&transport=polling&t=y6h7yg9s 404 in 272ms
 GET /api/socket-health 200 in 46ms
 GET /api/socket-health 200 in 137ms
 GET /socket.io?EIO=4&transport=polling&t=y6ip0biv 404 in 305ms
 GET /socket.io?EIO=4&transport=polling&t=y6iswse8 404 in 199ms
 GET /api/socket-health 200 in 61ms
 GET /api/socket-health 200 in 68ms
 GET /socket.io?EIO=4&transport=polling&t=y6k8suf9 404 in 296ms
 GET /socket.io?EIO=4&transport=polling&t=y6kat8kz 404 in 136ms
 GET /api/socket-health 200 in 48ms
 GET /api/socket-health 200 in 46ms
 GET /socket.io?EIO=4&transport=polling&t=y6lrx2wf 404 in 235ms
 GET /socket.io?EIO=4&transport=polling&t=y6ltcqoe 404 in 107ms
 GET /api/socket-health 200 in 29ms
 GET /api/socket-health 200 in 35ms
 GET /socket.io?EIO=4&transport=polling&t=y6nbadh6 404 in 222ms
 GET /socket.io?EIO=4&transport=polling&t=y6ncbsdq 404 in 112ms
 GET /api/socket-health 200 in 30ms
 GET /api/socket-health 200 in 129ms
 GET /socket.io?EIO=4&transport=polling&t=y6ouq3cp 404 in 221ms
 GET /socket.io?EIO=4&transport=polling&t=y6oydz8q 404 in 106ms
 GET /api/socket-health 200 in 34ms
 GET /api/socket-health 200 in 128ms
 GET /socket.io?EIO=4&transport=polling&t=y6qe7exv 404 in 215ms
 GET /socket.io?EIO=4&transport=polling&t=y6qhv8mk 404 in 105ms
 GET /api/socket-health 200 in 43ms
 GET /api/socket-health 200 in 70ms
 GET /socket.io?EIO=4&transport=polling&t=y6rxyl9m 404 in 231ms
 GET /socket.io?EIO=4&transport=polling&t=y6rzz6bt 404 in 103ms
 GET /api/socket-health 200 in 38ms
 GET /api/socket-health 200 in 113ms
 GET /socket.io?EIO=4&transport=polling&t=y6tho7hw 404 in 197ms
 GET /socket.io?EIO=4&transport=polling&t=y6tkxauk 404 in 96ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
 POST /api/users/heartbeat 200 in 206ms
 GET /api/socket-health 200 in 37ms
 GET /api/socket-health 200 in 119ms
 GET /socket.io?EIO=4&transport=polling&t=y6v11j8d 404 in 225ms
 GET /socket.io?EIO=4&transport=polling&t=y6v4ecpy 404 in 121ms
 GET /api/socket-health 200 in 95ms
 GET /api/socket-health 200 in 418ms
 POST /api/auth/signup 400 in 2237ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
 GET /socket.io?EIO=4&transport=polling&t=y6wm5x13 404 in 2747ms
 GET /socket.io?EIO=4&transport=polling&t=y6x0dwri 404 in 564ms
 GET /api/conversations 200 in 615ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
=== FRIEND REQUEST GET START ===
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
Request type: received User: sayantan2@gmail.com
âœ… Database connected
 GET /api/friends 200 in 269ms
âœ… Current user found: {
  id: new ObjectId('6901f85f42c5d010fa811206'),
  email: 'sayantan2@gmail.com',
  friendRequestsCount: 0,
  sentRequestsCount: 1
}
Processing received requests...
Raw friendRequests: []
Processed receivedRequests: []
Populating sender details...
Final populated requests: []
=== FRIEND REQUEST GET END (received) ===
 GET /api/friends/request?type=received 200 in 575ms
=== FRIEND REQUEST GET START ===
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
Request type: sent User: sayantan2@gmail.com
âœ… Database connected
âœ… Current user found: {
  id: new ObjectId('6901f85f42c5d010fa811206'),
  email: 'sayantan2@gmail.com',
  friendRequestsCount: 0,
  sentRequestsCount: 1
}
Processing sent requests...
Raw sentRequests: [
  {
    from: new ObjectId('6901f85f42c5d010fa811206'),
    fromName: 'sayantan2',
    to: new ObjectId('6905adf16a22b7843b006183'),
    toName: 'sayantan3',
    status: 'pending',
    _id: new ObjectId('6905cdce14ad0d0f020b3985'),
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
Filtering sent request: { status: 'pending', to: new ObjectId('6905adf16a22b7843b006183') }
Mapping sent request: {
  from: new ObjectId('6901f85f42c5d010fa811206'),
  fromName: 'sayantan2',
  to: new ObjectId('6905adf16a22b7843b006183'),
  toName: 'sayantan3',
  status: 'pending',
  _id: new ObjectId('6905cdce14ad0d0f020b3985'),
  createdAt: 2025-11-01T09:07:26.707Z,
  updatedAt: 2025-11-01T09:07:26.707Z
}
Processed sentRequests: [
  {
    id: '6905cdce14ad0d0f020b3985',
    to: {
      id: '6905adf16a22b7843b006183',
      username: 'sayantan3',
      email: '',
      profilePicture: null
    },
    status: 'pending',
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
Populating recipient details...
Looking up recipient: 6905adf16a22b7843b006183
Found recipient: sayantan3
Final populated sent requests: [
  {
    id: '6905cdce14ad0d0f020b3985',
    to: {
      id: '6905adf16a22b7843b006183',
      username: 'sayantan3',
      email: 'sayantan3@gmail.com',
      profilePicture: undefined
    },
    status: 'pending',
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
=== FRIEND REQUEST GET END (sent) ===
 GET /api/friends/request?type=sent 200 in 198ms
 GET /api/socket-health 200 in 67ms
 GET /api/socket-health 200 in 74ms
 GET /socket.io?EIO=4&transport=polling&t=y70h4g62 404 in 465ms
 GET /socket.io?EIO=4&transport=polling&t=y70iw0tq 404 in 461ms
 GET /api/socket-health 200 in 38ms
 GET /api/socket-health 200 in 72ms
 GET /socket.io?EIO=4&transport=polling&t=y71yywgn 404 in 484ms
 GET /socket.io?EIO=4&transport=polling&t=y7215mou 404 in 249ms
 GET /api/socket-health 200 in 37ms
 GET /api/socket-health 200 in 151ms
 GET /socket.io?EIO=4&transport=polling&t=y73is089 404 in 282ms
 GET /socket.io?EIO=4&transport=polling&t=y73n1v2w 404 in 158ms
 GET /api/socket-health 200 in 135ms
 GET /api/socket-health 200 in 104ms
 GET /socket.io?EIO=4&transport=polling&t=y757bl6a 404 in 315ms
 GET /socket.io?EIO=4&transport=polling&t=y758ute0 404 in 306ms
 GET /api/socket-health 200 in 61ms
 GET /api/socket-health 200 in 191ms
 GET /socket.io?EIO=4&transport=polling&t=y76me6qj 404 in 323ms
 GET /socket.io?EIO=4&transport=polling&t=y76rzc4f 404 in 142ms
 GET /api/socket-health 200 in 31ms
 GET /api/socket-health 200 in 119ms
 GET /socket.io?EIO=4&transport=polling&t=y784zriw 404 in 223ms
 GET /socket.io?EIO=4&transport=polling&t=y788c7r7 404 in 122ms
 GET /api/socket-health 200 in 36ms
 GET /api/socket-health 200 in 34ms
 GET /socket.io?EIO=4&transport=polling&t=y79p2vdg 404 in 223ms
 GET /socket.io?EIO=4&transport=polling&t=y79q5xul 404 in 106ms
 GET /api/socket-health 200 in 30ms
 GET /api/socket-health 200 in 130ms
 GET /socket.io?EIO=4&transport=polling&t=y7b83mhz 404 in 243ms
 GET /socket.io?EIO=4&transport=polling&t=y7bbsa13 404 in 127ms
 GET /api/socket-health 200 in 39ms
 GET /api/socket-health 200 in 50ms
 GET /socket.io?EIO=4&transport=polling&t=y7crzkd0 404 in 234ms
 GET /socket.io?EIO=4&transport=polling&t=y7ctf39j 404 in 119ms
 GET /api/socket-health 200 in 33ms
 GET /api/socket-health 200 in 131ms
 GET /socket.io?EIO=4&transport=polling&t=y7eb8tb4 404 in 209ms
 GET /socket.io?EIO=4&transport=polling&t=y7eext3g 404 in 112ms
 GET /api/socket-health 200 in 37ms
 GET /api/socket-health 200 in 143ms
 GET /socket.io?EIO=4&transport=polling&t=y7fv7u5t 404 in 280ms
 GET /socket.io?EIO=4&transport=polling&t=y7fz8q41 404 in 149ms
 GET /api/socket-health 200 in 33ms
 GET /api/socket-health 200 in 120ms
 GET /socket.io?EIO=4&transport=polling&t=y7hei8fj 404 in 215ms
 GET /socket.io?EIO=4&transport=polling&t=y7hhwbbf 404 in 114ms
 GET /api/socket-health 200 in 30ms
 GET /api/socket-health 200 in 103ms
 GET /socket.io?EIO=4&transport=polling&t=y7iy0owh 404 in 195ms
 GET /socket.io?EIO=4&transport=polling&t=y7j0yroq 404 in 103ms
 GET /api/socket-health 200 in 31ms
 GET /api/socket-health 200 in 202ms
 GET /socket.io?EIO=4&transport=polling&t=y7khryoa 404 in 329ms
 GET /socket.io?EIO=4&transport=polling&t=y7knkhiw 404 in 149ms
 GET /api/socket-health 200 in 48ms
 GET /api/socket-health 200 in 155ms
 GET /socket.io?EIO=4&transport=polling&t=y7m1my2s 404 in 293ms
 GET /socket.io?EIO=4&transport=polling&t=y7m62wy4 404 in 155ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
 GET /api/conversations 200 in 232ms
 GET /api/socket-health 200 in 77ms
=== FRIEND REQUEST GET START ===
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
Request type: received User: sayantan2@gmail.com
âœ… Database connected
âœ… Current user found: {
  id: new ObjectId('6901f85f42c5d010fa811206'),
  email: 'sayantan2@gmail.com',
  friendRequestsCount: 0,
  sentRequestsCount: 1
}
Processing received requests...
Raw friendRequests: []
Processed receivedRequests: []
Populating sender details...
Final populated requests: []
=== FRIEND REQUEST GET END (received) ===
 GET /api/friends/request?type=received 200 in 188ms
 GET /api/socket-health 200 in 127ms
=== FRIEND REQUEST GET START ===
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
Request type: sent User: sayantan2@gmail.com
âœ… Database connected
 GET /socket.io?EIO=4&transport=polling&t=y7nm066p 404 in 245ms
 GET /socket.io?EIO=4&transport=polling&t=y7npo841 404 in 130ms
âœ… Current user found: {
  id: new ObjectId('6901f85f42c5d010fa811206'),
  email: 'sayantan2@gmail.com',
  friendRequestsCount: 0,
  sentRequestsCount: 1
}
Processing sent requests...
Raw sentRequests: [
  {
    from: new ObjectId('6901f85f42c5d010fa811206'),
    fromName: 'sayantan2',
    to: new ObjectId('6905adf16a22b7843b006183'),
    toName: 'sayantan3',
    status: 'pending',
    _id: new ObjectId('6905cdce14ad0d0f020b3985'),
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
Filtering sent request: { status: 'pending', to: new ObjectId('6905adf16a22b7843b006183') }
Mapping sent request: {
  from: new ObjectId('6901f85f42c5d010fa811206'),
  fromName: 'sayantan2',
  to: new ObjectId('6905adf16a22b7843b006183'),
  toName: 'sayantan3',
  status: 'pending',
  _id: new ObjectId('6905cdce14ad0d0f020b3985'),
  createdAt: 2025-11-01T09:07:26.707Z,
  updatedAt: 2025-11-01T09:07:26.707Z
}
Processed sentRequests: [
  {
    id: '6905cdce14ad0d0f020b3985',
    to: {
      id: '6905adf16a22b7843b006183',
      username: 'sayantan3',
      email: '',
      profilePicture: null
    },
    status: 'pending',
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
Populating recipient details...
Looking up recipient: 6905adf16a22b7843b006183
Found recipient: sayantan3
Final populated sent requests: [
  {
    id: '6905cdce14ad0d0f020b3985',
    to: {
      id: '6905adf16a22b7843b006183',
      username: 'sayantan3',
      email: 'sayantan3@gmail.com',
      profilePicture: undefined
    },
    status: 'pending',
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
=== FRIEND REQUEST GET END (sent) ===
 GET /api/friends/request?type=sent 200 in 217ms
 GET /api/socket-health 200 in 46ms
 GET /api/socket-health 200 in 166ms
 GET /socket.io?EIO=4&transport=polling&t=y7p4nz4b 404 in 216ms
 GET /socket.io?EIO=4&transport=polling&t=y7p9f275 404 in 103ms
 GET /api/socket-health 200 in 29ms
 GET /api/socket-health 200 in 39ms
 GET /socket.io?EIO=4&transport=polling&t=y7qnnqg1 404 in 204ms
 GET /socket.io?EIO=4&transport=polling&t=y7qos8c1 404 in 100ms
 GET /api/socket-health 200 in 39ms
 GET /api/socket-health 200 in 109ms
 GET /socket.io?EIO=4&transport=polling&t=y7s7f6xr 404 in 202ms
 GET /socket.io?EIO=4&transport=polling&t=y7sai55w 404 in 106ms
 POST /api/auth/signup 400 in 70ms
 GET /api/socket-health 200 in 41ms
 GET /api/socket-health 200 in 142ms
 GET /socket.io?EIO=4&transport=polling&t=y7trdbd9 404 in 237ms
 GET /socket.io?EIO=4&transport=polling&t=y7tvd5dk 404 in 112ms
 POST /api/auth/signup 400 in 49ms
 POST /api/auth/signup 400 in 75ms
 GET /api/socket-health 200 in 48ms
 GET /api/socket-health 200 in 60ms
 POST /api/auth/signup 400 in 74ms
 GET /socket.io?EIO=4&transport=polling&t=y7vau7t2 404 in 400ms
 GET /socket.io?EIO=4&transport=polling&t=y7vcol5a 404 in 260ms
 GET /api/socket-health 200 in 38ms
 GET /api/socket-health 200 in 128ms
 GET /socket.io?EIO=4&transport=polling&t=y7wu99mr 404 in 228ms
 GET /socket.io?EIO=4&transport=polling&t=y7wxx5mq 404 in 111ms
 GET /api/socket-health 200 in 33ms
 GET /api/socket-health 200 in 247ms
 GET /socket.io?EIO=4&transport=polling&t=y7ydl5kz 404 in 498ms
 GET /socket.io?EIO=4&transport=polling&t=y7ykjx30 404 in 252ms
 GET /api/socket-health 200 in 28ms
 GET /api/socket-health 200 in 125ms
 GET /socket.io?EIO=4&transport=polling&t=y7zx0v8c 404 in 207ms
 GET /socket.io?EIO=4&transport=polling&t=y800kvve 404 in 95ms
 GET /api/socket-health 200 in 54ms
 GET /api/socket-health 200 in 72ms
 GET /socket.io?EIO=4&transport=polling&t=y81hljyc 404 in 320ms
 GET /socket.io?EIO=4&transport=polling&t=y81jkroj 404 in 158ms
 GET /api/socket-health 200 in 43ms
 GET /api/socket-health 200 in 43ms
 GET /socket.io?EIO=4&transport=polling&t=y830kk60 404 in 255ms
 GET /socket.io?EIO=4&transport=polling&t=y831vvwv 404 in 120ms
 GET /api/socket-health 200 in 28ms
 GET /api/socket-health 200 in 120ms
 GET /socket.io?EIO=4&transport=polling&t=y84jpubh 404 in 203ms
 GET /socket.io?EIO=4&transport=polling&t=y84n3pgm 404 in 99ms
 GET /api/socket-health 200 in 31ms
 GET /api/socket-health 200 in 112ms
 GET /socket.io?EIO=4&transport=polling&t=y863dt8x 404 in 117ms
 GET /socket.io?EIO=4&transport=polling&t=y866n8kf 404 in 93ms
 GET /api/socket-health 200 in 36ms
 GET /api/socket-health 200 in 36ms
 GET /socket.io?EIO=4&transport=polling&t=y87ncocg 404 in 263ms
 GET /socket.io?EIO=4&transport=polling&t=y87oge8d 404 in 138ms
 GET /api/socket-health 200 in 69ms
 GET /api/socket-health 200 in 60ms
 GET /socket.io?EIO=4&transport=polling&t=y897em7g 404 in 394ms
 GET /socket.io?EIO=4&transport=polling&t=y8995vnf 404 in 209ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
=== FRIEND REQUEST GET START ===
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
Request type: received User: sayantan2@gmail.com
âœ… Database connected
 POST /api/users/heartbeat 200 in 239ms
âœ… Current user found: {
  id: new ObjectId('6901f85f42c5d010fa811206'),
  email: 'sayantan2@gmail.com',
  friendRequestsCount: 0,
  sentRequestsCount: 1
}
Processing received requests...
Raw friendRequests: []
Processed receivedRequests: []
Populating sender details...
Final populated requests: []
=== FRIEND REQUEST GET END (received) ===
 GET /api/friends/request?type=received 200 in 516ms
=== FRIEND REQUEST GET START ===
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
Request type: sent User: sayantan2@gmail.com
âœ… Database connected
 GET /api/friends 200 in 594ms
âœ… Current user found: {
  id: new ObjectId('6901f85f42c5d010fa811206'),
  email: 'sayantan2@gmail.com',
  friendRequestsCount: 0,
  sentRequestsCount: 1
}
Processing sent requests...
Raw sentRequests: [
  {
    from: new ObjectId('6901f85f42c5d010fa811206'),
    fromName: 'sayantan2',
    to: new ObjectId('6905adf16a22b7843b006183'),
    toName: 'sayantan3',
    status: 'pending',
    _id: new ObjectId('6905cdce14ad0d0f020b3985'),
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
Filtering sent request: { status: 'pending', to: new ObjectId('6905adf16a22b7843b006183') }
Mapping sent request: {
  from: new ObjectId('6901f85f42c5d010fa811206'),
  fromName: 'sayantan2',
  to: new ObjectId('6905adf16a22b7843b006183'),
  toName: 'sayantan3',
  status: 'pending',
  _id: new ObjectId('6905cdce14ad0d0f020b3985'),
  createdAt: 2025-11-01T09:07:26.707Z,
  updatedAt: 2025-11-01T09:07:26.707Z
}
Processed sentRequests: [
  {
    id: '6905cdce14ad0d0f020b3985',
    to: {
      id: '6905adf16a22b7843b006183',
      username: 'sayantan3',
      email: '',
      profilePicture: null
    },
    status: 'pending',
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
Populating recipient details...
Looking up recipient: 6905adf16a22b7843b006183
Found recipient: sayantan3
Final populated sent requests: [
  {
    id: '6905cdce14ad0d0f020b3985',
    to: {
      id: '6905adf16a22b7843b006183',
      username: 'sayantan3',
      email: 'sayantan3@gmail.com',
      profilePicture: undefined
    },
    status: 'pending',
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
=== FRIEND REQUEST GET END (sent) ===
 GET /api/friends/request?type=sent 200 in 159ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
 GET /api/socket-health 200 in 71ms
 GET /api/conversations 200 in 177ms
 GET /api/socket-health 200 in 122ms
 GET /socket.io?EIO=4&transport=polling&t=y8arkwbt 404 in 233ms
 GET /socket.io?EIO=4&transport=polling&t=y8av0m0o 404 in 130ms
 GET /api/socket-health 200 in 40ms
 GET /api/socket-health 200 in 114ms
 GET /socket.io?EIO=4&transport=polling&t=y8c9xr74 404 in 206ms
 GET /socket.io?EIO=4&transport=polling&t=y8cd77hc 404 in 105ms
 GET /api/socket-health 200 in 42ms
 GET /api/socket-health 200 in 110ms
 GET /socket.io?EIO=4&transport=polling&t=y8dtgttr 404 in 197ms
 GET /socket.io?EIO=4&transport=polling&t=y8dwkyo3 404 in 136ms
 GET /api/socket-health 200 in 31ms
 GET /api/socket-health 200 in 216ms
 GET /socket.io?EIO=4&transport=polling&t=y8fcmfyd 404 in 310ms
 GET /socket.io?EIO=4&transport=polling&t=y8fiogtl 404 in 99ms
 GET /api/socket-health 200 in 33ms
 GET /api/socket-health 200 in 40ms
 GET /socket.io?EIO=4&transport=polling&t=y8gwf9ch 404 in 200ms
 GET /socket.io?EIO=4&transport=polling&t=y8gxoeid 404 in 99ms
 GET /api/socket-health 200 in 46ms
 GET /api/socket-health 200 in 118ms
 GET /socket.io?EIO=4&transport=polling&t=y8ig7h48 404 in 201ms
 GET /socket.io?EIO=4&transport=polling&t=y8ijjhoe 404 in 104ms
 GET /api/socket-health 200 in 39ms
 GET /api/socket-health 200 in 59ms
 GET /socket.io?EIO=4&transport=polling&t=y8jzse1k 404 in 192ms
 GET /socket.io?EIO=4&transport=polling&t=y8k1h300 404 in 102ms
 GET /api/socket-health 200 in 27ms
 GET /api/socket-health 200 in 132ms
 GET /socket.io?EIO=4&transport=polling&t=y8liwbeo 404 in 220ms
 GET /socket.io?EIO=4&transport=polling&t=y8lmoc2s 404 in 101ms
 GET /api/socket-health 200 in 26ms
 GET /api/socket-health 200 in 124ms
 GET /socket.io?EIO=4&transport=polling&t=y8n27fp5 404 in 214ms
 GET /socket.io?EIO=4&transport=polling&t=y8n5qd9l 404 in 103ms
 GET /api/socket-health 200 in 30ms
 GET /api/socket-health 200 in 122ms
 GET /socket.io?EIO=4&transport=polling&t=y8om3b1p 404 in 210ms
 GET /socket.io?EIO=4&transport=polling&t=y8opjf6l 404 in 103ms
 GET /api/socket-health 200 in 28ms
 GET /api/socket-health 200 in 117ms
 GET /socket.io?EIO=4&transport=polling&t=y8q5mq7s 404 in 195ms
 GET /socket.io?EIO=4&transport=polling&t=y8q8y3qv 404 in 93ms
 GET /api/socket-health 200 in 30ms
 GET /api/socket-health 200 in 98ms
 GET /socket.io?EIO=4&transport=polling&t=y8rp4npl 404 in 193ms
 GET /socket.io?EIO=4&transport=polling&t=y8rrwxfy 404 in 102ms
 GET /api/socket-health 200 in 52ms
 GET /api/socket-health 200 in 110ms
 GET /socket.io?EIO=4&transport=polling&t=y8t9deka 404 in 194ms
 GET /socket.io?EIO=4&transport=polling&t=y8tck5ob 404 in 102ms
 GET /api/socket-health 200 in 27ms
 GET /api/socket-health 200 in 132ms
 GET /socket.io?EIO=4&transport=polling&t=y8us0s34 404 in 216ms
 GET /socket.io?EIO=4&transport=polling&t=y8uvpzza 404 in 97ms
 GET /api/socket-health 200 in 28ms
 GET /api/socket-health 200 in 33ms
 GET /socket.io?EIO=4&transport=polling&t=y8wbvstp 404 in 199ms
 GET /socket.io?EIO=4&transport=polling&t=y8wcwumh 404 in 105ms
 GET /api/socket-health 200 in 44ms
=== FRIEND REQUEST GET START ===
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
Request type: received User: sayantan2@gmail.com
âœ… Database connected
âœ… Current user found: {
  id: new ObjectId('6901f85f42c5d010fa811206'),
  email: 'sayantan2@gmail.com',
  friendRequestsCount: 0,
  sentRequestsCount: 1
}
Processing received requests...
Raw friendRequests: []
Processed receivedRequests: []
Populating sender details...
Final populated requests: []
=== FRIEND REQUEST GET END (received) ===
 GET /api/friends/request?type=received 200 in 154ms
 GET /api/socket-health 200 in 124ms
=== FRIEND REQUEST GET START ===
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
Request type: sent User: sayantan2@gmail.com
âœ… Database connected
 GET /socket.io?EIO=4&transport=polling&t=y8xvm6dw 404 in 236ms
 GET /socket.io?EIO=4&transport=polling&t=y8xz79v0 404 in 126ms
âœ… Current user found: {
  id: new ObjectId('6901f85f42c5d010fa811206'),
  email: 'sayantan2@gmail.com',
  friendRequestsCount: 0,
  sentRequestsCount: 1
}
Processing sent requests...
Raw sentRequests: [
  {
    from: new ObjectId('6901f85f42c5d010fa811206'),
    fromName: 'sayantan2',
    to: new ObjectId('6905adf16a22b7843b006183'),
    toName: 'sayantan3',
    status: 'pending',
    _id: new ObjectId('6905cdce14ad0d0f020b3985'),
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
Filtering sent request: { status: 'pending', to: new ObjectId('6905adf16a22b7843b006183') }
Mapping sent request: {
  from: new ObjectId('6901f85f42c5d010fa811206'),
  fromName: 'sayantan2',
  to: new ObjectId('6905adf16a22b7843b006183'),
  toName: 'sayantan3',
  status: 'pending',
  _id: new ObjectId('6905cdce14ad0d0f020b3985'),
  createdAt: 2025-11-01T09:07:26.707Z,
  updatedAt: 2025-11-01T09:07:26.707Z
}
Processed sentRequests: [
  {
    id: '6905cdce14ad0d0f020b3985',
    to: {
      id: '6905adf16a22b7843b006183',
      username: 'sayantan3',
      email: '',
      profilePicture: null
    },
    status: 'pending',
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
Populating recipient details...
Looking up recipient: 6905adf16a22b7843b006183
Found recipient: sayantan3
Final populated sent requests: [
  {
    id: '6905cdce14ad0d0f020b3985',
    to: {
      id: '6905adf16a22b7843b006183',
      username: 'sayantan3',
      email: 'sayantan3@gmail.com',
      profilePicture: undefined
    },
    status: 'pending',
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
=== FRIEND REQUEST GET END (sent) ===
 GET /api/friends/request?type=sent 200 in 216ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
 GET /api/conversations 200 in 135ms
 GET /api/socket-health 200 in 56ms
 GET /api/socket-health 200 in 128ms
 GET /socket.io?EIO=4&transport=polling&t=y8zfrft0 404 in 224ms
 GET /socket.io?EIO=4&transport=polling&t=y8zjfjyc 404 in 114ms
 GET /api/socket-health 200 in 38ms
 GET /api/socket-health 200 in 49ms
 GET /socket.io?EIO=4&transport=polling&t=y90yp7mx 404 in 222ms
 GET /socket.io?EIO=4&transport=polling&t=y9106yb2 404 in 111ms
 GET /api/socket-health 200 in 31ms
 GET /api/socket-health 200 in 133ms
 GET /socket.io?EIO=4&transport=polling&t=y92hwbo2 404 in 216ms
 GET /socket.io?EIO=4&transport=polling&t=y92lsss1 404 in 99ms
 GET /api/socket-health 200 in 50ms
 GET /api/socket-health 200 in 217ms
 GET /socket.io?EIO=4&transport=polling&t=y941yq14 404 in 323ms
 GET /socket.io?EIO=4&transport=polling&t=y9487t92 404 in 116ms
 GET /api/socket-health 200 in 28ms
 GET /api/socket-health 200 in 116ms
 GET /socket.io?EIO=4&transport=polling&t=y95kv69l 404 in 226ms
 GET /socket.io?EIO=4&transport=polling&t=y95o6ool 404 in 128ms
 GET /api/socket-health 200 in 37ms
 GET /api/socket-health 200 in 172ms
 GET /socket.io?EIO=4&transport=polling&t=y9752mln 404 in 234ms
 GET /socket.io?EIO=4&transport=polling&t=y979wvw1 404 in 106ms
 GET /api/socket-health 200 in 25ms
 GET /api/socket-health 200 in 120ms
 GET /socket.io?EIO=4&transport=polling&t=y98o6stj 404 in 208ms
 GET /socket.io?EIO=4&transport=polling&t=y98rkw2v 404 in 101ms
 GET /api/socket-health 200 in 31ms
 GET /api/socket-health 200 in 120ms
 GET /socket.io?EIO=4&transport=polling&t=y9a7q4hx 404 in 208ms
 GET /socket.io?EIO=4&transport=polling&t=y9ab497e 404 in 109ms
 GET /api/socket-health 200 in 33ms
 GET /api/socket-health 200 in 138ms
 GET /socket.io?EIO=4&transport=polling&t=y9br88mz 404 in 269ms
 GET /socket.io?EIO=4&transport=polling&t=y9bv45oh 404 in 152ms
 POST /api/auth/login 400 in 64ms
 GET /api/socket-health 200 in 45ms
 GET /api/socket-health 200 in 33ms
 GET /socket.io?EIO=4&transport=polling&t=y9dbdiah 404 in 237ms
 GET /socket.io?EIO=4&transport=polling&t=y9dcd8s5 404 in 130ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
 GET /api/auth/session 200 in 52ms
=== FRIEND REQUEST GET START ===
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
Request type: received User: sayantan2@gmail.com
âœ… Database connected
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
 GET /api/friends 200 in 202ms
 GET /api/random-chat/queue 200 in 343ms
 GET /api/users/me 200 in 400ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
âœ… Current user found: {
  id: new ObjectId('6901f85f42c5d010fa811206'),
  email: 'sayantan2@gmail.com',
  friendRequestsCount: 0,
  sentRequestsCount: 1
}
Processing received requests...
Raw friendRequests: []
Processed receivedRequests: []
Populating sender details...
Final populated requests: []
=== FRIEND REQUEST GET END (received) ===
 GET /api/friends/request?type=received 200 in 512ms
 GET /api/random-chat/session 200 in 182ms
=== FRIEND REQUEST GET START ===
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
Request type: sent User: sayantan2@gmail.com
âœ… Database connected
âœ… Current user found: {
  id: new ObjectId('6901f85f42c5d010fa811206'),
  email: 'sayantan2@gmail.com',
  friendRequestsCount: 0,
  sentRequestsCount: 1
}
Processing sent requests...
Raw sentRequests: [
  {
    from: new ObjectId('6901f85f42c5d010fa811206'),
    fromName: 'sayantan2',
    to: new ObjectId('6905adf16a22b7843b006183'),
    toName: 'sayantan3',
    status: 'pending',
    _id: new ObjectId('6905cdce14ad0d0f020b3985'),
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
Filtering sent request: { status: 'pending', to: new ObjectId('6905adf16a22b7843b006183') }
Mapping sent request: {
  from: new ObjectId('6901f85f42c5d010fa811206'),
  fromName: 'sayantan2',
  to: new ObjectId('6905adf16a22b7843b006183'),
  toName: 'sayantan3',
  status: 'pending',
  _id: new ObjectId('6905cdce14ad0d0f020b3985'),
  createdAt: 2025-11-01T09:07:26.707Z,
  updatedAt: 2025-11-01T09:07:26.707Z
}
Processed sentRequests: [
  {
    id: '6905cdce14ad0d0f020b3985',
    to: {
      id: '6905adf16a22b7843b006183',
      username: 'sayantan3',
      email: '',
      profilePicture: null
    },
    status: 'pending',
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
Populating recipient details...
Looking up recipient: 6905adf16a22b7843b006183
 POST /api/users/heartbeat 200 in 630ms
Found recipient: sayantan3
Final populated sent requests: [
  {
    id: '6905cdce14ad0d0f020b3985',
    to: {
      id: '6905adf16a22b7843b006183',
      username: 'sayantan3',
      email: 'sayantan3@gmail.com',
      profilePicture: undefined
    },
    status: 'pending',
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
=== FRIEND REQUEST GET END (sent) ===
 GET /api/friends/request?type=sent 200 in 150ms
 GET /api/socket-health 200 in 36ms
 GET /api/socket-health 200 in 133ms
 GET /socket.io?EIO=4&transport=polling&t=y9eujco5 404 in 229ms
 GET /socket.io?EIO=4&transport=polling&t=y9eyaf9g 404 in 109ms
 GET /api/socket-health 200 in 31ms
 GET /api/socket-health 200 in 116ms
 GET /socket.io?EIO=4&transport=polling&t=y9ge745t 404 in 204ms
 GET /socket.io?EIO=4&transport=polling&t=y9ghhe6e 404 in 99ms
 POST /api/auth/login 400 in 78ms
 GET /api/socket-health 200 in 135ms
 GET /api/socket-health 200 in 87ms
 POST /api/auth/login 400 in 313ms
 GET /socket.io?EIO=4&transport=polling&t=y9i2mllw 404 in 692ms
 GET /socket.io?EIO=4&transport=polling&t=y9i59wxk 404 in 352ms
 GET /api/socket-health 200 in 78ms
 GET /api/socket-health 200 in 85ms
 GET /socket.io?EIO=4&transport=polling&t=y9jjisxj 404 in 744ms
 GET /socket.io?EIO=4&transport=polling&t=y9jlvszq 404 in 316ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
=== FRIEND REQUEST GET START ===
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
Request type: received User: sayantan2@gmail.com
âœ… Database connected
âœ… Current user found: {
  id: new ObjectId('6901f85f42c5d010fa811206'),
  email: 'sayantan2@gmail.com',
  friendRequestsCount: 0,
  sentRequestsCount: 1
}
Processing received requests...
Raw friendRequests: []
Processed receivedRequests: []
Populating sender details...
Final populated requests: []
=== FRIEND REQUEST GET END (received) ===
 GET /api/friends/request?type=received 200 in 184ms
 GET /api/friends 200 in 195ms
=== FRIEND REQUEST GET START ===
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
Request type: sent User: sayantan2@gmail.com
âœ… Database connected
âœ… Current user found: {
  id: new ObjectId('6901f85f42c5d010fa811206'),
  email: 'sayantan2@gmail.com',
  friendRequestsCount: 0,
  sentRequestsCount: 1
}
Processing sent requests...
Raw sentRequests: [
  {
    from: new ObjectId('6901f85f42c5d010fa811206'),
    fromName: 'sayantan2',
    to: new ObjectId('6905adf16a22b7843b006183'),
    toName: 'sayantan3',
    status: 'pending',
    _id: new ObjectId('6905cdce14ad0d0f020b3985'),
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
Filtering sent request: { status: 'pending', to: new ObjectId('6905adf16a22b7843b006183') }
Mapping sent request: {
  from: new ObjectId('6901f85f42c5d010fa811206'),
  fromName: 'sayantan2',
  to: new ObjectId('6905adf16a22b7843b006183'),
  toName: 'sayantan3',
  status: 'pending',
  _id: new ObjectId('6905cdce14ad0d0f020b3985'),
  createdAt: 2025-11-01T09:07:26.707Z,
  updatedAt: 2025-11-01T09:07:26.707Z
}
Processed sentRequests: [
  {
    id: '6905cdce14ad0d0f020b3985',
    to: {
      id: '6905adf16a22b7843b006183',
      username: 'sayantan3',
      email: '',
      profilePicture: null
    },
    status: 'pending',
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
Populating recipient details...
Looking up recipient: 6905adf16a22b7843b006183
Found recipient: sayantan3
Final populated sent requests: [
  {
    id: '6905cdce14ad0d0f020b3985',
    to: {
      id: '6905adf16a22b7843b006183',
      username: 'sayantan3',
      email: 'sayantan3@gmail.com',
      profilePicture: undefined
    },
    status: 'pending',
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
=== FRIEND REQUEST GET END (sent) ===
 GET /api/friends/request?type=sent 200 in 171ms
 GET /api/socket-health 200 in 59ms
 GET /api/socket-health 200 in 157ms
 GET /socket.io?EIO=4&transport=polling&t=y9l1lj5l 404 in 262ms
 GET /socket.io?EIO=4&transport=polling&t=y9l64min 404 in 132ms
 GET /api/socket-health 200 in 51ms
 GET /api/socket-health 200 in 172ms
 GET /socket.io?EIO=4&transport=polling&t=y9mkrcyt 404 in 308ms
 GET /socket.io?EIO=4&transport=polling&t=y9mpm9ct 404 in 159ms
 GET /api/socket-health 200 in 42ms
 GET /api/socket-health 200 in 180ms
 GET /socket.io?EIO=4&transport=polling&t=y9o4aw2o 404 in 336ms
 GET /socket.io?EIO=4&transport=polling&t=y9o9c8e5 404 in 192ms
 GET /api/socket-health 200 in 48ms
 GET /api/socket-health 200 in 235ms
 GET /socket.io?EIO=4&transport=polling&t=y9pnz4fq 404 in 378ms
 GET /socket.io?EIO=4&transport=polling&t=y9pun924 404 in 165ms
 GET /api/socket-health 200 in 132ms
 GET /api/socket-health 200 in 410ms
 GET /socket.io?EIO=4&transport=polling&t=y9rag6iv 404 in 618ms
 GET /socket.io?EIO=4&transport=polling&t=y9rlzsih 404 in 262ms
 GET /api/socket-health 200 in 34ms
 GET /api/socket-health 200 in 118ms
 GET /socket.io?EIO=4&transport=polling&t=y9sqe4qe 404 in 219ms
 GET /socket.io?EIO=4&transport=polling&t=y9strlvw 404 in 110ms
 GET /api/socket-health 200 in 31ms
 GET /api/socket-health 200 in 39ms
 GET /socket.io?EIO=4&transport=polling&t=y9u9zfxc 404 in 322ms
 GET /socket.io?EIO=4&transport=polling&t=y9ub5nzj 404 in 209ms
 GET /api/socket-health 200 in 30ms
 GET /api/socket-health 200 in 112ms
 GET /socket.io?EIO=4&transport=polling&t=y9vtp3ue 404 in 197ms
 GET /socket.io?EIO=4&transport=polling&t=y9vwvvi9 404 in 100ms
 GET /api/socket-health 200 in 30ms
 GET /api/socket-health 200 in 121ms
 GET /socket.io?EIO=4&transport=polling&t=y9xd7hff 404 in 213ms
 GET /socket.io?EIO=4&transport=polling&t=y9xgmhu3 404 in 112ms
 GET /api/socket-health 200 in 46ms
 GET /api/socket-health 200 in 55ms
 GET /socket.io?EIO=4&transport=polling&t=y9yxadgq 404 in 257ms
 GET /socket.io?EIO=4&transport=polling&t=y9yyv79q 404 in 134ms
 GET /api/socket-health 200 in 52ms
 GET /api/socket-health 200 in 156ms
 GET /socket.io?EIO=4&transport=polling&t=ya0gtu8l 404 in 272ms
 GET /socket.io?EIO=4&transport=polling&t=ya0l91k3 404 in 134ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
 GET /api/socket-health 200 in 107ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
 GET /api/socket-health 200 in 49ms
 GET /api/conversations 200 in 283ms
 POST /api/users/heartbeat 200 in 393ms
 GET /socket.io?EIO=4&transport=polling&t=ya225nvi 404 in 262ms
 GET /socket.io?EIO=4&transport=polling&t=ya23qh7f 404 in 261ms
 GET /api/socket-health 200 in 57ms
 GET /api/socket-health 200 in 175ms
 GET /socket.io?EIO=4&transport=polling&t=ya3k1f8b 404 in 315ms
 GET /socket.io?EIO=4&transport=polling&t=ya3ozzi7 404 in 158ms
 GET /api/socket-health 200 in 79ms
 GET /api/socket-health 200 in 87ms
 GET /socket.io?EIO=4&transport=polling&t=ya54fmbc 404 in 420ms
 GET /socket.io?EIO=4&transport=polling&t=ya5781kx 404 in 157ms
 GET /api/socket-health 200 in 53ms
 GET /api/socket-health 200 in 170ms
 GET /socket.io?EIO=4&transport=polling&t=ya6n711r 404 in 295ms
 GET /socket.io?EIO=4&transport=polling&t=ya6s0qej 404 in 149ms
=== FRIEND REQUEST GET START ===
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
Request type: received User: sayantan2@gmail.com
âœ… Database connected
 GET /api/socket-health 200 in 91ms
âœ… Current user found: {
  id: new ObjectId('6901f85f42c5d010fa811206'),
  email: 'sayantan2@gmail.com',
  friendRequestsCount: 0,
  sentRequestsCount: 1
}
Processing received requests...
Raw friendRequests: []
Processed receivedRequests: []
Populating sender details...
Final populated requests: []
=== FRIEND REQUEST GET END (received) ===
 GET /api/friends/request?type=received 200 in 132ms
 GET /api/socket-health 200 in 139ms
=== FRIEND REQUEST GET START ===
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
Request type: sent User: sayantan2@gmail.com
âœ… Database connected
âœ… Current user found: {
  id: new ObjectId('6901f85f42c5d010fa811206'),
  email: 'sayantan2@gmail.com',
  friendRequestsCount: 0,
  sentRequestsCount: 1
}
Processing sent requests...
Raw sentRequests: [
  {
    from: new ObjectId('6901f85f42c5d010fa811206'),
    fromName: 'sayantan2',
    to: new ObjectId('6905adf16a22b7843b006183'),
    toName: 'sayantan3',
    status: 'pending',
    _id: new ObjectId('6905cdce14ad0d0f020b3985'),
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
Filtering sent request: { status: 'pending', to: new ObjectId('6905adf16a22b7843b006183') }
Mapping sent request: {
  from: new ObjectId('6901f85f42c5d010fa811206'),
  fromName: 'sayantan2',
  to: new ObjectId('6905adf16a22b7843b006183'),
  toName: 'sayantan3',
  status: 'pending',
  _id: new ObjectId('6905cdce14ad0d0f020b3985'),
  createdAt: 2025-11-01T09:07:26.707Z,
  updatedAt: 2025-11-01T09:07:26.707Z
}
Processed sentRequests: [
  {
    id: '6905cdce14ad0d0f020b3985',
    to: {
      id: '6905adf16a22b7843b006183',
      username: 'sayantan3',
      email: '',
      profilePicture: null
    },
    status: 'pending',
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
Populating recipient details...
Looking up recipient: 6905adf16a22b7843b006183
 GET /socket.io?EIO=4&transport=polling&t=ya87qhi5 404 in 257ms
 GET /socket.io?EIO=4&transport=polling&t=ya8bqo2o 404 in 135ms
Found recipient: sayantan3
Final populated sent requests: [
  {
    id: '6905cdce14ad0d0f020b3985',
    to: {
      id: '6905adf16a22b7843b006183',
      username: 'sayantan3',
      email: 'sayantan3@gmail.com',
      profilePicture: undefined
    },
    status: 'pending',
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
=== FRIEND REQUEST GET END (sent) ===
 GET /api/friends/request?type=sent 200 in 264ms
 GET /api/socket-health 200 in 33ms
 GET /api/socket-health 200 in 124ms
 GET /socket.io?EIO=4&transport=polling&t=ya9pe2s2 404 in 209ms
 GET /socket.io?EIO=4&transport=polling&t=ya9sy6v7 404 in 104ms
 GET /api/socket-health 200 in 30ms
 GET /api/socket-health 200 in 113ms
 GET /socket.io?EIO=4&transport=polling&t=yab8x192 404 in 203ms
 GET /socket.io?EIO=4&transport=polling&t=yabc47sa 404 in 104ms
 GET /api/socket-health 200 in 34ms
 GET /api/socket-health 200 in 124ms
 GET /socket.io?EIO=4&transport=polling&t=yacsr4pv 404 in 216ms
 GET /socket.io?EIO=4&transport=polling&t=yacwbvc6 404 in 113ms
 GET /api/socket-health 200 in 34ms
 GET /api/socket-health 200 in 125ms
 GET /socket.io?EIO=4&transport=polling&t=yaecavyl 404 in 222ms
 GET /socket.io?EIO=4&transport=polling&t=yaeftysx 404 in 115ms
 GET /api/socket-health 200 in 34ms
 GET /api/socket-health 200 in 128ms
 GET /socket.io?EIO=4&transport=polling&t=yafvo02y 404 in 222ms
 GET /socket.io?EIO=4&transport=polling&t=yafzcauu 404 in 113ms
 GET /api/socket-health 200 in 30ms
 GET /api/socket-health 200 in 132ms
 GET /socket.io?EIO=4&transport=polling&t=yahfg7a9 404 in 223ms
 GET /socket.io?EIO=4&transport=polling&t=yahj5bvk 404 in 105ms
 GET /api/socket-health 200 in 34ms
 GET /api/socket-health 200 in 137ms
 GET /socket.io?EIO=4&transport=polling&t=yaiz3xyt 404 in 219ms
 GET /socket.io?EIO=4&transport=polling&t=yaj2z4jo 404 in 103ms
 GET /api/socket-health 200 in 32ms
 GET /api/socket-health 200 in 32ms
 GET /socket.io?EIO=4&transport=polling&t=yakii2mc 404 in 198ms
 GET /socket.io?EIO=4&transport=polling&t=yakjh7h7 404 in 101ms
 GET /api/socket-health 200 in 29ms
 GET /api/socket-health 200 in 118ms
 GET /socket.io?EIO=4&transport=polling&t=yam1tl7r 404 in 201ms
 GET /socket.io?EIO=4&transport=polling&t=yam57d37 404 in 101ms
 GET /api/socket-health 200 in 44ms
 GET /api/socket-health 200 in 109ms
 GET /socket.io?EIO=4&transport=polling&t=yanm4kd4 404 in 184ms
 GET /socket.io?EIO=4&transport=polling&t=yanp88dl 404 in 89ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
 GET /api/socket-health 200 in 58ms
 GET /api/socket-health 200 in 99ms
 GET /socket.io?EIO=4&transport=polling&t=yap5z5bt 404 in 194ms
 GET /socket.io?EIO=4&transport=polling&t=yap8xb7q 404 in 106ms
 POST /api/users/heartbeat 200 in 300ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
 GET /api/conversations 200 in 154ms
 GET /api/socket-health 200 in 36ms
 GET /api/socket-health 200 in 112ms
 GET /socket.io?EIO=4&transport=polling&t=yaqouyz6 404 in 206ms
 GET /socket.io?EIO=4&transport=polling&t=yaqrzlo4 404 in 107ms
 GET /api/socket-health 200 in 32ms
 GET /api/socket-health 200 in 135ms
 GET /socket.io?EIO=4&transport=polling&t=yas88fdf 404 in 238ms
 GET /socket.io?EIO=4&transport=polling&t=yasc4fdv 404 in 117ms
 GET /api/socket-health 200 in 46ms
 GET /api/socket-health 200 in 186ms
 GET /socket.io?EIO=4&transport=polling&t=yats3d8m 404 in 310ms
 GET /socket.io?EIO=4&transport=polling&t=yatxdeyl 404 in 139ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
=== FRIEND REQUEST GET START ===
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
Request type: received User: sayantan2@gmail.com
âœ… Database connected
 GET /api/friends 200 in 238ms
âœ… Current user found: {
  id: new ObjectId('6901f85f42c5d010fa811206'),
  email: 'sayantan2@gmail.com',
  friendRequestsCount: 0,
  sentRequestsCount: 1
}
Processing received requests...
Raw friendRequests: []
Processed receivedRequests: []
Populating sender details...
Final populated requests: []
=== FRIEND REQUEST GET END (received) ===
 GET /api/friends/request?type=received 200 in 736ms
=== FRIEND REQUEST GET START ===
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
Request type: sent User: sayantan2@gmail.com
âœ… Database connected
âœ… Current user found: {
  id: new ObjectId('6901f85f42c5d010fa811206'),
  email: 'sayantan2@gmail.com',
  friendRequestsCount: 0,
  sentRequestsCount: 1
}
Processing sent requests...
Raw sentRequests: [
  {
    from: new ObjectId('6901f85f42c5d010fa811206'),
    fromName: 'sayantan2',
    to: new ObjectId('6905adf16a22b7843b006183'),
    toName: 'sayantan3',
    status: 'pending',
    _id: new ObjectId('6905cdce14ad0d0f020b3985'),
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
Filtering sent request: { status: 'pending', to: new ObjectId('6905adf16a22b7843b006183') }
Mapping sent request: {
  from: new ObjectId('6901f85f42c5d010fa811206'),
  fromName: 'sayantan2',
  to: new ObjectId('6905adf16a22b7843b006183'),
  toName: 'sayantan3',
  status: 'pending',
  _id: new ObjectId('6905cdce14ad0d0f020b3985'),
  createdAt: 2025-11-01T09:07:26.707Z,
  updatedAt: 2025-11-01T09:07:26.707Z
}
Processed sentRequests: [
  {
    id: '6905cdce14ad0d0f020b3985',
    to: {
      id: '6905adf16a22b7843b006183',
      username: 'sayantan3',
      email: '',
      profilePicture: null
    },
    status: 'pending',
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
Populating recipient details...
Looking up recipient: 6905adf16a22b7843b006183
Found recipient: sayantan3
Final populated sent requests: [
  {
    id: '6905cdce14ad0d0f020b3985',
    to: {
      id: '6905adf16a22b7843b006183',
      username: 'sayantan3',
      email: 'sayantan3@gmail.com',
      profilePicture: undefined
    },
    status: 'pending',
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
=== FRIEND REQUEST GET END (sent) ===
 GET /api/friends/request?type=sent 200 in 154ms
 GET /api/socket-health 200 in 29ms
 GET /api/socket-health 200 in 117ms
 GET /socket.io?EIO=4&transport=polling&t=yavbdpmh 404 in 206ms
 GET /socket.io?EIO=4&transport=polling&t=yavep0fb 404 in 117ms
 GET /api/socket-health 200 in 41ms
 GET /api/socket-health 200 in 45ms
 GET /socket.io?EIO=4&transport=polling&t=yawvf0m3 404 in 269ms
 GET /socket.io?EIO=4&transport=polling&t=yawwttkz 404 in 138ms
 GET /api/socket-health 200 in 27ms
 GET /api/socket-health 200 in 119ms
 GET /socket.io?EIO=4&transport=polling&t=yaye7run 404 in 192ms
 GET /socket.io?EIO=4&transport=polling&t=yayhkiox 404 in 100ms
 GET /api/socket-health 200 in 45ms
 GET /api/socket-health 200 in 62ms
 GET /socket.io?EIO=4&transport=polling&t=yazyseqh 404 in 219ms
 GET /socket.io?EIO=4&transport=polling&t=yb00hbsj 404 in 105ms
 GET /api/socket-health 200 in 28ms
 GET /api/socket-health 200 in 120ms
 GET /socket.io?EIO=4&transport=polling&t=yb1ho97h 404 in 187ms
 GET /socket.io?EIO=4&transport=polling&t=yb1l38rp 404 in 93ms
 GET /api/socket-health 200 in 27ms
 GET /api/socket-health 200 in 109ms
 GET /socket.io?EIO=4&transport=polling&t=yb315z2d 404 in 186ms
 GET /socket.io?EIO=4&transport=polling&t=yb348uhr 404 in 91ms
 GET /api/socket-health 200 in 29ms
 GET /api/socket-health 200 in 113ms
 GET /socket.io?EIO=4&transport=polling&t=yb4kv6lw 404 in 191ms
 GET /socket.io?EIO=4&transport=polling&t=yb4o3vsn 404 in 99ms
 GET /api/socket-health 200 in 32ms
 GET /api/socket-health 200 in 107ms
 GET /socket.io?EIO=4&transport=polling&t=yb64bh52 404 in 190ms
 GET /socket.io?EIO=4&transport=polling&t=yb67cx9s 404 in 99ms
 GET /api/socket-health 200 in 29ms
 GET /api/socket-health 200 in 111ms
 GET /socket.io?EIO=4&transport=polling&t=yb7nsvoc 404 in 195ms
 GET /socket.io?EIO=4&transport=polling&t=yb7qyqix 404 in 106ms
 GET /api/socket-health 200 in 29ms
 GET /api/socket-health 200 in 111ms
 GET /socket.io?EIO=4&transport=polling&t=yb978yks 404 in 196ms
 GET /socket.io?EIO=4&transport=polling&t=yb9agfbg 404 in 97ms
 GET /api/socket-health 200 in 31ms
 GET /api/socket-health 200 in 38ms
 GET /socket.io?EIO=4&transport=polling&t=ybaqqoka 404 in 202ms
 GET /socket.io?EIO=4&transport=polling&t=ybarvyn3 404 in 99ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
 GET /api/socket-health 200 in 51ms
 GET /api/socket-health 200 in 119ms
 GET /socket.io?EIO=4&transport=polling&t=ybcb8z56 404 in 202ms
 GET /socket.io?EIO=4&transport=polling&t=ybcemj7i 404 in 102ms
 POST /api/users/heartbeat 200 in 310ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
 GET /api/socket-health 200 in 57ms
 GET /api/socket-health 200 in 114ms
 GET /api/conversations 200 in 262ms
 GET /socket.io?EIO=4&transport=polling&t=ybduva3a 404 in 201ms
 GET /socket.io?EIO=4&transport=polling&t=ybdy476b 404 in 101ms
 GET /api/socket-health 200 in 28ms
 GET /api/socket-health 200 in 111ms
 GET /socket.io?EIO=4&transport=polling&t=ybfdb0zh 404 in 195ms
 GET /socket.io?EIO=4&transport=polling&t=ybfgh422 404 in 100ms
 GET /api/socket-health 200 in 34ms
 GET /api/socket-health 200 in 123ms
 GET /socket.io?EIO=4&transport=polling&t=ybgxddmv 404 in 239ms
 GET /socket.io?EIO=4&transport=polling&t=ybh0vod8 404 in 132ms
 GET /api/socket-health 200 in 52ms
=== FRIEND REQUEST GET START ===
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
Request type: received User: sayantan2@gmail.com
âœ… Database connected
âœ… Current user found: {
  id: new ObjectId('6901f85f42c5d010fa811206'),
  email: 'sayantan2@gmail.com',
  friendRequestsCount: 0,
  sentRequestsCount: 1
}
Processing received requests...
Raw friendRequests: []
Processed receivedRequests: []
Populating sender details...
Final populated requests: []
=== FRIEND REQUEST GET END (received) ===
 GET /api/friends/request?type=received 200 in 158ms
 GET /api/socket-health 200 in 122ms
=== FRIEND REQUEST GET START ===
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
Request type: sent User: sayantan2@gmail.com
âœ… Database connected
 GET /socket.io?EIO=4&transport=polling&t=ybihj953 404 in 234ms
 GET /socket.io?EIO=4&transport=polling&t=ybil0t86 404 in 122ms
âœ… Current user found: {
  id: new ObjectId('6901f85f42c5d010fa811206'),
  email: 'sayantan2@gmail.com',
  friendRequestsCount: 0,
  sentRequestsCount: 1
}
Processing sent requests...
Raw sentRequests: [
  {
    from: new ObjectId('6901f85f42c5d010fa811206'),
    fromName: 'sayantan2',
    to: new ObjectId('6905adf16a22b7843b006183'),
    toName: 'sayantan3',
    status: 'pending',
    _id: new ObjectId('6905cdce14ad0d0f020b3985'),
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
Filtering sent request: { status: 'pending', to: new ObjectId('6905adf16a22b7843b006183') }
Mapping sent request: {
  from: new ObjectId('6901f85f42c5d010fa811206'),
  fromName: 'sayantan2',
  to: new ObjectId('6905adf16a22b7843b006183'),
  toName: 'sayantan3',
  status: 'pending',
  _id: new ObjectId('6905cdce14ad0d0f020b3985'),
  createdAt: 2025-11-01T09:07:26.707Z,
  updatedAt: 2025-11-01T09:07:26.707Z
}
Processed sentRequests: [
  {
    id: '6905cdce14ad0d0f020b3985',
    to: {
      id: '6905adf16a22b7843b006183',
      username: 'sayantan3',
      email: '',
      profilePicture: null
    },
    status: 'pending',
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
Populating recipient details...
Looking up recipient: 6905adf16a22b7843b006183
Found recipient: sayantan3
Final populated sent requests: [
  {
    id: '6905cdce14ad0d0f020b3985',
    to: {
      id: '6905adf16a22b7843b006183',
      username: 'sayantan3',
      email: 'sayantan3@gmail.com',
      profilePicture: undefined
    },
    status: 'pending',
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
=== FRIEND REQUEST GET END (sent) ===
 GET /api/friends/request?type=sent 200 in 214ms
 GET /api/socket-health 200 in 29ms
 GET /api/socket-health 200 in 114ms
 GET /socket.io?EIO=4&transport=polling&t=ybk075eg 404 in 194ms
 GET /socket.io?EIO=4&transport=polling&t=ybk3fbmi 404 in 101ms
 GET /api/socket-health 200 in 28ms
 GET /api/socket-health 200 in 110ms
 GET /socket.io?EIO=4&transport=polling&t=ybljt2ks 404 in 196ms
 GET /socket.io?EIO=4&transport=polling&t=yblmxlf6 404 in 94ms
 GET /api/socket-health 200 in 29ms
 GET /api/socket-health 200 in 106ms
 GET /socket.io?EIO=4&transport=polling&t=ybn3f1w5 404 in 195ms
 GET /socket.io?EIO=4&transport=polling&t=ybn6hi1w 404 in 102ms
 GET /api/socket-health 200 in 27ms
 GET /api/socket-health 200 in 114ms
 GET /socket.io?EIO=4&transport=polling&t=ybomwzi9 404 in 191ms
 GET /socket.io?EIO=4&transport=polling&t=yboq4htu 404 in 85ms
 GET /api/socket-health 200 in 35ms
 GET /api/socket-health 200 in 110ms
 GET /socket.io?EIO=4&transport=polling&t=ybq6pv25 404 in 196ms
 GET /socket.io?EIO=4&transport=polling&t=ybq9t218 404 in 99ms
 GET /api/socket-health 200 in 30ms
 GET /api/socket-health 200 in 101ms
 GET /socket.io?EIO=4&transport=polling&t=ybrq7wz4 404 in 194ms
 GET /socket.io?EIO=4&transport=polling&t=ybrt3o9u 404 in 105ms
 GET /api/socket-health 200 in 30ms
 GET /api/socket-health 200 in 111ms
 GET /socket.io?EIO=4&transport=polling&t=ybt9mff6 404 in 208ms
 GET /socket.io?EIO=4&transport=polling&t=ybtcs03f 404 in 107ms
 GET /api/socket-health 200 in 29ms
 GET /api/socket-health 200 in 109ms
 GET /socket.io?EIO=4&transport=polling&t=ybut6e19 404 in 195ms
 GET /socket.io?EIO=4&transport=polling&t=ybuw93he 404 in 101ms
 GET /api/socket-health 200 in 28ms
 GET /api/socket-health 200 in 107ms
 GET /socket.io?EIO=4&transport=polling&t=ybwcnv8f 404 in 190ms
 GET /socket.io?EIO=4&transport=polling&t=ybwfo42j 404 in 97ms
 GET /api/socket-health 200 in 28ms
 GET /api/socket-health 200 in 35ms
 GET /socket.io?EIO=4&transport=polling&t=ybxw3jvg 404 in 196ms
 GET /socket.io?EIO=4&transport=polling&t=ybxx6hzh 404 in 100ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
 GET /api/socket-health 200 in 53ms
 GET /api/socket-health 200 in 117ms
 GET /socket.io?EIO=4&transport=polling&t=ybzgd8fo 404 in 205ms
 GET /socket.io?EIO=4&transport=polling&t=ybzjqyeg 404 in 104ms
 POST /api/users/heartbeat 200 in 310ms
 GET /api/socket-health 200 in 28ms
 GET /api/socket-health 200 in 114ms
 GET /socket.io?EIO=4&transport=polling&t=yc0z37vw 404 in 197ms
 GET /socket.io?EIO=4&transport=polling&t=yc12bn7d 404 in 95ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
 GET /api/conversations 200 in 158ms
 GET /api/socket-health 200 in 35ms
 GET /api/socket-health 200 in 146ms
 GET /socket.io?EIO=4&transport=polling&t=yc2ivnxa 404 in 279ms
 GET /socket.io?EIO=4&transport=polling&t=yc2mzd16 404 in 146ms
 GET /api/socket-health 200 in 56ms
 GET /api/socket-health 200 in 217ms
 GET /socket.io?EIO=4&transport=polling&t=yc43dywk 404 in 329ms
 GET /socket.io?EIO=4&transport=polling&t=yc49lc4v 404 in 122ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
=== FRIEND REQUEST GET START ===
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
Request type: received User: sayantan2@gmail.com
âœ… Database connected
 GET /api/friends 200 in 169ms
âœ… Current user found: {
  id: new ObjectId('6901f85f42c5d010fa811206'),
  email: 'sayantan2@gmail.com',
  friendRequestsCount: 0,
  sentRequestsCount: 1
}
Processing received requests...
Raw friendRequests: []
Processed receivedRequests: []
Populating sender details...
Final populated requests: []
=== FRIEND REQUEST GET END (received) ===
 GET /api/friends/request?type=received 200 in 428ms
=== FRIEND REQUEST GET START ===
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
Request type: sent User: sayantan2@gmail.com
âœ… Database connected
âœ… Current user found: {
  id: new ObjectId('6901f85f42c5d010fa811206'),
  email: 'sayantan2@gmail.com',
  friendRequestsCount: 0,
  sentRequestsCount: 1
}
Processing sent requests...
Raw sentRequests: [
  {
    from: new ObjectId('6901f85f42c5d010fa811206'),
    fromName: 'sayantan2',
    to: new ObjectId('6905adf16a22b7843b006183'),
    toName: 'sayantan3',
    status: 'pending',
    _id: new ObjectId('6905cdce14ad0d0f020b3985'),
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
Filtering sent request: { status: 'pending', to: new ObjectId('6905adf16a22b7843b006183') }
Mapping sent request: {
  from: new ObjectId('6901f85f42c5d010fa811206'),
  fromName: 'sayantan2',
  to: new ObjectId('6905adf16a22b7843b006183'),
  toName: 'sayantan3',
  status: 'pending',
  _id: new ObjectId('6905cdce14ad0d0f020b3985'),
  createdAt: 2025-11-01T09:07:26.707Z,
  updatedAt: 2025-11-01T09:07:26.707Z
}
Processed sentRequests: [
  {
    id: '6905cdce14ad0d0f020b3985',
    to: {
      id: '6905adf16a22b7843b006183',
      username: 'sayantan3',
      email: '',
      profilePicture: null
    },
    status: 'pending',
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
Populating recipient details...
Looking up recipient: 6905adf16a22b7843b006183
Found recipient: sayantan3
Final populated sent requests: [
  {
    id: '6905cdce14ad0d0f020b3985',
    to: {
      id: '6905adf16a22b7843b006183',
      username: 'sayantan3',
      email: 'sayantan3@gmail.com',
      profilePicture: undefined
    },
    status: 'pending',
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
=== FRIEND REQUEST GET END (sent) ===
 GET /api/friends/request?type=sent 200 in 130ms
 GET /api/socket-health 200 in 29ms
 GET /api/socket-health 200 in 116ms
 GET /socket.io?EIO=4&transport=polling&t=yc5m49sa 404 in 193ms
 GET /socket.io?EIO=4&transport=polling&t=yc5pd1j4 404 in 89ms
 GET /api/socket-health 200 in 40ms
 GET /api/socket-health 200 in 113ms
 GET /socket.io?EIO=4&transport=polling&t=yc75zl88 404 in 212ms
 GET /socket.io?EIO=4&transport=polling&t=yc798gdk 404 in 111ms
 GET /api/socket-health 200 in 29ms
 GET /api/socket-health 200 in 117ms
 GET /socket.io?EIO=4&transport=polling&t=yc8p30za 404 in 203ms
 GET /socket.io?EIO=4&transport=polling&t=yc8sdoft 404 in 103ms
 GET /api/socket-health 200 in 56ms
 GET /api/socket-health 200 in 111ms
 GET /socket.io?EIO=4&transport=polling&t=yca9lqev 404 in 198ms
 GET /socket.io?EIO=4&transport=polling&t=ycact0ab 404 in 100ms
 GET /api/socket-health 200 in 29ms
 GET /api/socket-health 200 in 100ms
 GET /socket.io?EIO=4&transport=polling&t=ycbs4tgy 404 in 226ms
 GET /socket.io?EIO=4&transport=polling&t=ycbuy5c6 404 in 129ms
 GET /api/socket-health 200 in 28ms
 GET /api/socket-health 200 in 105ms
 GET /socket.io?EIO=4&transport=polling&t=ycdbj060 404 in 192ms
 GET /socket.io?EIO=4&transport=polling&t=ycdeksmp 404 in 99ms
 GET /api/socket-health 200 in 28ms
 GET /api/socket-health 200 in 114ms
 GET /socket.io?EIO=4&transport=polling&t=ycevhj6a 404 in 202ms
 GET /socket.io?EIO=4&transport=polling&t=yceyp67k 404 in 100ms
 GET /api/socket-health 200 in 35ms
 GET /api/socket-health 200 in 136ms
 GET /socket.io?EIO=4&transport=polling&t=ycgf7kqc 404 in 241ms
 GET /socket.io?EIO=4&transport=polling&t=ycgj4wv9 404 in 121ms
 GET /api/socket-health 200 in 37ms
 GET /api/socket-health 200 in 139ms
 GET /socket.io?EIO=4&transport=polling&t=ychyrbpy 404 in 242ms
 GET /socket.io?EIO=4&transport=polling&t=yci2op70 404 in 126ms
 GET /api/socket-health 200 in 29ms
 GET /api/socket-health 200 in 107ms
 GET /socket.io?EIO=4&transport=polling&t=ycji19g0 404 in 194ms
 GET /socket.io?EIO=4&transport=polling&t=ycjl47rx 404 in 99ms
 GET /api/socket-health 200 in 28ms
 GET /api/socket-health 200 in 118ms
 GET /socket.io?EIO=4&transport=polling&t=ycl1libq 404 in 202ms
 GET /socket.io?EIO=4&transport=polling&t=ycl4ydqz 404 in 100ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
 GET /api/socket-health 200 in 50ms
 GET /api/socket-health 200 in 114ms
 GET /socket.io?EIO=4&transport=polling&t=ycmlrcqe 404 in 204ms
 GET /socket.io?EIO=4&transport=polling&t=ycmp065w 404 in 107ms
 POST /api/users/heartbeat 200 in 300ms
 GET /api/socket-health 200 in 29ms
 GET /api/socket-health 200 in 121ms
 GET /socket.io?EIO=4&transport=polling&t=yco4mn4b 404 in 208ms
 GET /socket.io?EIO=4&transport=polling&t=yco81uvi 404 in 95ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
 GET /api/socket-health 200 in 52ms
 GET /api/conversations 200 in 198ms
 GET /api/socket-health 200 in 163ms
 GET /socket.io?EIO=4&transport=polling&t=ycpow1wu 404 in 687ms
 GET /socket.io?EIO=4&transport=polling&t=ycpti0ua 404 in 524ms
 GET /api/socket-health 200 in 33ms
 GET /api/socket-health 200 in 27ms
 GET /socket.io?EIO=4&transport=polling&t=ycr809yb 404 in 207ms
 GET /socket.io?EIO=4&transport=polling&t=ycr8umaz 404 in 109ms
 GET /api/socket-health 200 in 65ms
=== FRIEND REQUEST GET START ===
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
Request type: received User: sayantan2@gmail.com
âœ… Database connected
âœ… Current user found: {
  id: new ObjectId('6901f85f42c5d010fa811206'),
  email: 'sayantan2@gmail.com',
  friendRequestsCount: 0,
  sentRequestsCount: 1
}
Processing received requests...
Raw friendRequests: []
Processed receivedRequests: []
Populating sender details...
Final populated requests: []
=== FRIEND REQUEST GET END (received) ===
 GET /api/friends/request?type=received 200 in 198ms
 GET /api/socket-health 200 in 155ms
=== FRIEND REQUEST GET START ===
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
Request type: sent User: sayantan2@gmail.com
âœ… Database connected
 GET /socket.io?EIO=4&transport=polling&t=ycss7l43 404 in 263ms
 GET /socket.io?EIO=4&transport=polling&t=ycswlf14 404 in 125ms
âœ… Current user found: {
  id: new ObjectId('6901f85f42c5d010fa811206'),
  email: 'sayantan2@gmail.com',
  friendRequestsCount: 0,
  sentRequestsCount: 1
}
Processing sent requests...
Raw sentRequests: [
  {
    from: new ObjectId('6901f85f42c5d010fa811206'),
    fromName: 'sayantan2',
    to: new ObjectId('6905adf16a22b7843b006183'),
    toName: 'sayantan3',
    status: 'pending',
    _id: new ObjectId('6905cdce14ad0d0f020b3985'),
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
Filtering sent request: { status: 'pending', to: new ObjectId('6905adf16a22b7843b006183') }
Mapping sent request: {
  from: new ObjectId('6901f85f42c5d010fa811206'),
  fromName: 'sayantan2',
  to: new ObjectId('6905adf16a22b7843b006183'),
  toName: 'sayantan3',
  status: 'pending',
  _id: new ObjectId('6905cdce14ad0d0f020b3985'),
  createdAt: 2025-11-01T09:07:26.707Z,
  updatedAt: 2025-11-01T09:07:26.707Z
}
Processed sentRequests: [
  {
    id: '6905cdce14ad0d0f020b3985',
    to: {
      id: '6905adf16a22b7843b006183',
      username: 'sayantan3',
      email: '',
      profilePicture: null
    },
    status: 'pending',
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
Populating recipient details...
Looking up recipient: 6905adf16a22b7843b006183
Found recipient: sayantan3
Final populated sent requests: [
  {
    id: '6905cdce14ad0d0f020b3985',
    to: {
      id: '6905adf16a22b7843b006183',
      username: 'sayantan3',
      email: 'sayantan3@gmail.com',
      profilePicture: undefined
    },
    status: 'pending',
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
=== FRIEND REQUEST GET END (sent) ===
 GET /api/friends/request?type=sent 200 in 220ms
 GET /api/socket-health 200 in 35ms
 GET /api/socket-health 200 in 151ms
 GET /socket.io?EIO=4&transport=polling&t=ycub23fv 404 in 245ms
 GET /socket.io?EIO=4&transport=polling&t=ycufbtw2 404 in 121ms
 GET /api/socket-health 200 in 74ms
 GET /api/socket-health 200 in 81ms
 GET /socket.io?EIO=4&transport=polling&t=ycvvs8za 404 in 280ms
 GET /socket.io?EIO=4&transport=polling&t=ycvy3qln 404 in 109ms
 GET /api/socket-health 200 in 44ms
 GET /api/socket-health 200 in 134ms
 GET /socket.io?EIO=4&transport=polling&t=ycxelvpn 404 in 239ms
 GET /socket.io?EIO=4&transport=polling&t=ycxic9ol 404 in 122ms
 GET /api/socket-health 200 in 98ms
 GET /api/socket-health 200 in 85ms
 GET /socket.io?EIO=4&transport=polling&t=ycz5rin1 404 in 573ms
 GET /socket.io?EIO=4&transport=polling&t=ycz83j6o 404 in 274ms
 GET /api/socket-health 200 in 58ms
 GET /socket.io?EIO=4&transport=polling&t=yd0i8r3t 404 in 113ms
 GET /api/socket-health 200 in 50ms
 GET /socket.io?EIO=4&transport=polling&t=yd19lhu3 404 in 147ms
 GET /api/socket-health 200 in 47ms
 GET /socket.io?EIO=4&transport=polling&t=yd21b65v 404 in 117ms
 GET /api/socket-health 200 in 28ms
 GET /socket.io?EIO=4&transport=polling&t=yd2sgcna 404 in 111ms
 GET /api/socket-health 200 in 32ms
 GET /socket.io?EIO=4&transport=polling&t=yd3kc7nb 404 in 100ms
 GET /api/socket-health 200 in 34ms
 GET /socket.io?EIO=4&transport=polling&t=yd4c4wat 404 in 113ms
 GET /api/socket-health 200 in 31ms
 GET /socket.io?EIO=4&transport=polling&t=yd53wxth 404 in 106ms
 GET /api/socket-health 200 in 32ms
 GET /socket.io?EIO=4&transport=polling&t=yd5vm7hr 404 in 110ms
 GET /api/socket-health 200 in 34ms
 GET /socket.io?EIO=4&transport=polling&t=yd6ndb0q 404 in 108ms
 GET /api/socket-health 200 in 37ms
 GET /socket.io?EIO=4&transport=polling&t=yd7f87xx 404 in 100ms
 GET /api/socket-health 200 in 29ms
 GET /socket.io?EIO=4&transport=polling&t=yd86pa0g 404 in 97ms
 GET /api/socket-health 200 in 33ms
 GET /socket.io?EIO=4&transport=polling&t=yd8yyzka 404 in 107ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
 GET /api/socket-health 200 in 65ms
 GET /socket.io?EIO=4&transport=polling&t=yd9roo0s 404 in 112ms
 POST /api/users/heartbeat 200 in 258ms
 GET /api/socket-health 200 in 40ms
 GET /socket.io?EIO=4&transport=polling&t=ydailf3s 404 in 113ms
 GET /api/socket-health 200 in 30ms
 GET /socket.io?EIO=4&transport=polling&t=ydb9ywew 404 in 96ms
 GET /api/socket-health 200 in 32ms
 GET /socket.io?EIO=4&transport=polling&t=ydc1u776 404 in 105ms
 GET /api/socket-health 200 in 43ms
 GET /socket.io?EIO=4&transport=polling&t=ydcua1m5 404 in 111ms
 GET /api/socket-health 200 in 60ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
 GET /socket.io?EIO=4&transport=polling&t=yddm0j0p 404 in 147ms
 GET /api/conversations 200 in 241ms
 GET /api/socket-health 200 in 52ms
 GET /socket.io?EIO=4&transport=polling&t=ydedmkku 404 in 221ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
=== FRIEND REQUEST GET START ===
 GET /api/socket-health 200 in 107ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
Request type: received User: sayantan2@gmail.com
âœ… Database connected
 GET /socket.io?EIO=4&transport=polling&t=ydf7m61j 404 in 127ms
 GET /api/friends 200 in 261ms
âœ… Current user found: {
  id: new ObjectId('6901f85f42c5d010fa811206'),
  email: 'sayantan2@gmail.com',
  friendRequestsCount: 0,
  sentRequestsCount: 1
}
Processing received requests...
Raw friendRequests: []
Processed receivedRequests: []
Populating sender details...
Final populated requests: []
=== FRIEND REQUEST GET END (received) ===
 GET /api/friends/request?type=received 200 in 577ms
=== FRIEND REQUEST GET START ===
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
Request type: sent User: sayantan2@gmail.com
âœ… Database connected
âœ… Current user found: {
  id: new ObjectId('6901f85f42c5d010fa811206'),
  email: 'sayantan2@gmail.com',
  friendRequestsCount: 0,
  sentRequestsCount: 1
}
Processing sent requests...
Raw sentRequests: [
  {
    from: new ObjectId('6901f85f42c5d010fa811206'),
    fromName: 'sayantan2',
    to: new ObjectId('6905adf16a22b7843b006183'),
    toName: 'sayantan3',
    status: 'pending',
    _id: new ObjectId('6905cdce14ad0d0f020b3985'),
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
Filtering sent request: { status: 'pending', to: new ObjectId('6905adf16a22b7843b006183') }
Mapping sent request: {
  from: new ObjectId('6901f85f42c5d010fa811206'),
  fromName: 'sayantan2',
  to: new ObjectId('6905adf16a22b7843b006183'),
  toName: 'sayantan3',
  status: 'pending',
  _id: new ObjectId('6905cdce14ad0d0f020b3985'),
  createdAt: 2025-11-01T09:07:26.707Z,
  updatedAt: 2025-11-01T09:07:26.707Z
}
Processed sentRequests: [
  {
    id: '6905cdce14ad0d0f020b3985',
    to: {
      id: '6905adf16a22b7843b006183',
      username: 'sayantan3',
      email: '',
      profilePicture: null
    },
    status: 'pending',
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
Populating recipient details...
Looking up recipient: 6905adf16a22b7843b006183
Found recipient: sayantan3
Final populated sent requests: [
  {
    id: '6905cdce14ad0d0f020b3985',
    to: {
      id: '6905adf16a22b7843b006183',
      username: 'sayantan3',
      email: 'sayantan3@gmail.com',
      profilePicture: undefined
    },
    status: 'pending',
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
=== FRIEND REQUEST GET END (sent) ===
 GET /api/friends/request?type=sent 200 in 150ms
 GET /api/socket-health 200 in 47ms
 GET /socket.io?EIO=4&transport=polling&t=ydfx8lih 404 in 161ms
 GET /api/socket-health 200 in 46ms
 GET /socket.io?EIO=4&transport=polling&t=ydgozg68 404 in 113ms
 GET /api/socket-health 200 in 35ms
 GET /socket.io?EIO=4&transport=polling&t=ydhggzd6 404 in 96ms
 GET /api/socket-health 200 in 28ms
 GET /socket.io?EIO=4&transport=polling&t=ydi7ybp8 404 in 102ms
 GET /api/socket-health 200 in 28ms
 GET /socket.io?EIO=4&transport=polling&t=ydizwqcj 404 in 86ms
 GET /api/socket-health 200 in 41ms
 GET /socket.io?EIO=4&transport=polling&t=ydjsae8t 404 in 116ms
 GET /api/socket-health 200 in 30ms
 GET /socket.io?EIO=4&transport=polling&t=ydkjaeyg 404 in 102ms
 GET /api/socket-health 200 in 30ms
 GET /socket.io?EIO=4&transport=polling&t=ydlayf6t 404 in 104ms
 GET /api/socket-health 200 in 37ms
 GET /socket.io?EIO=4&transport=polling&t=ydm2ztrq 404 in 99ms
 GET /api/socket-health 200 in 43ms
 GET /socket.io?EIO=4&transport=polling&t=ydmuypwq 404 in 110ms
 GET /api/socket-health 200 in 28ms
 GET /socket.io?EIO=4&transport=polling&t=ydnm7x76 404 in 93ms
 GET /api/socket-health 200 in 30ms
 GET /socket.io?EIO=4&transport=polling&t=ydoefta3 404 in 98ms
 GET /api/socket-health 200 in 32ms
 GET /socket.io?EIO=4&transport=polling&t=ydp67akv 404 in 94ms
 GET /api/socket-health 200 in 39ms
 GET /socket.io?EIO=4&transport=polling&t=ydpy2nds 404 in 101ms
 GET /api/socket-health 200 in 33ms
 GET /socket.io?EIO=4&transport=polling&t=ydqpoo4z 404 in 98ms
 GET /api/socket-health 200 in 39ms
 GET /socket.io?EIO=4&transport=polling&t=ydrhmui3 404 in 105ms
 GET /api/socket-health 200 in 28ms
 GET /socket.io?EIO=4&transport=polling&t=yds90lak 404 in 90ms
 GET /api/socket-health 200 in 36ms
 GET /socket.io?EIO=4&transport=polling&t=ydt0x4xb 404 in 87ms
 GET /api/socket-health 200 in 31ms
 GET /socket.io?EIO=4&transport=polling&t=ydtswwi7 404 in 93ms
 GET /api/socket-health 200 in 32ms
 GET /socket.io?EIO=4&transport=polling&t=ydukoe5i 404 in 100ms
 GET /api/socket-health 200 in 29ms
 GET /socket.io?EIO=4&transport=polling&t=ydvcakaq 404 in 98ms
 GET /api/socket-health 200 in 37ms
 GET /socket.io?EIO=4&transport=polling&t=ydw4bq2k 404 in 94ms
 GET /api/socket-health 200 in 30ms
 GET /socket.io?EIO=4&transport=polling&t=ydwvri4h 404 in 96ms
 GET /api/socket-health 200 in 32ms
 GET /socket.io?EIO=4&transport=polling&t=ydxnkyqx 404 in 108ms
 GET /api/socket-health 200 in 30ms
 GET /socket.io?EIO=4&transport=polling&t=ydyf9u2a 404 in 99ms
 GET /api/socket-health 200 in 32ms
 GET /socket.io?EIO=4&transport=polling&t=ydz70655 404 in 100ms
 GET /api/socket-health 200 in 41ms
 GET /socket.io?EIO=4&transport=polling&t=ydzz09sj 404 in 97ms
 GET /api/socket-health 200 in 34ms
 GET /socket.io?EIO=4&transport=polling&t=ye0r1fn4 404 in 107ms
 GET /api/socket-health 200 in 47ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
 GET /socket.io?EIO=4&transport=polling&t=ye1j4vfr 404 in 117ms
 GET /api/conversations 200 in 207ms
 GET /api/socket-health 200 in 31ms
 GET /socket.io?EIO=4&transport=polling&t=ye2ac0zg 404 in 107ms
 GET /api/socket-health 200 in 47ms
=== FRIEND REQUEST GET START ===
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
Request type: received User: sayantan2@gmail.com
âœ… Database connected
âœ… Current user found: {
  id: new ObjectId('6901f85f42c5d010fa811206'),
  email: 'sayantan2@gmail.com',
  friendRequestsCount: 0,
  sentRequestsCount: 1
}
Processing received requests...
Raw friendRequests: []
Processed receivedRequests: []
Populating sender details...
Final populated requests: []
=== FRIEND REQUEST GET END (received) ===
 GET /api/friends/request?type=received 200 in 144ms
=== FRIEND REQUEST GET START ===
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
Request type: sent User: sayantan2@gmail.com
âœ… Database connected
 GET /socket.io?EIO=4&transport=polling&t=ye32nvtm 404 in 129ms
âœ… Current user found: {
  id: new ObjectId('6901f85f42c5d010fa811206'),
  email: 'sayantan2@gmail.com',
  friendRequestsCount: 0,
  sentRequestsCount: 1
}
Processing sent requests...
Raw sentRequests: [
  {
    from: new ObjectId('6901f85f42c5d010fa811206'),
    fromName: 'sayantan2',
    to: new ObjectId('6905adf16a22b7843b006183'),
    toName: 'sayantan3',
    status: 'pending',
    _id: new ObjectId('6905cdce14ad0d0f020b3985'),
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
Filtering sent request: { status: 'pending', to: new ObjectId('6905adf16a22b7843b006183') }
Mapping sent request: {
  from: new ObjectId('6901f85f42c5d010fa811206'),
  fromName: 'sayantan2',
  to: new ObjectId('6905adf16a22b7843b006183'),
  toName: 'sayantan3',
  status: 'pending',
  _id: new ObjectId('6905cdce14ad0d0f020b3985'),
  createdAt: 2025-11-01T09:07:26.707Z,
  updatedAt: 2025-11-01T09:07:26.707Z
}
Processed sentRequests: [
  {
    id: '6905cdce14ad0d0f020b3985',
    to: {
      id: '6905adf16a22b7843b006183',
      username: 'sayantan3',
      email: '',
      profilePicture: null
    },
    status: 'pending',
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
Populating recipient details...
Looking up recipient: 6905adf16a22b7843b006183
Found recipient: sayantan3
Final populated sent requests: [
  {
    id: '6905cdce14ad0d0f020b3985',
    to: {
      id: '6905adf16a22b7843b006183',
      username: 'sayantan3',
      email: 'sayantan3@gmail.com',
      profilePicture: undefined
    },
    status: 'pending',
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
=== FRIEND REQUEST GET END (sent) ===
 GET /api/friends/request?type=sent 200 in 129ms
 GET /api/socket-health 200 in 31ms
 GET /socket.io?EIO=4&transport=polling&t=ye3u02it 404 in 99ms
 GET /api/socket-health 200 in 37ms
 GET /socket.io?EIO=4&transport=polling&t=ye4lkvzh 404 in 95ms
 GET /api/socket-health 200 in 31ms
 GET /socket.io?EIO=4&transport=polling&t=ye5dkutd 404 in 99ms
 GET /api/socket-health 200 in 32ms
 GET /socket.io?EIO=4&transport=polling&t=ye65c4d4 404 in 94ms
 GET /api/socket-health 200 in 32ms
 GET /socket.io?EIO=4&transport=polling&t=ye6xpeum 404 in 102ms
 GET /api/socket-health 200 in 30ms
 GET /socket.io?EIO=4&transport=polling&t=ye7oodnn 404 in 110ms
 GET /api/socket-health 200 in 41ms
 GET /socket.io?EIO=4&transport=polling&t=ye8gv5q3 404 in 96ms
 GET /api/socket-health 200 in 29ms
 GET /socket.io?EIO=4&transport=polling&t=ye98d5vt 404 in 105ms
 GET /api/socket-health 200 in 31ms
 GET /socket.io?EIO=4&transport=polling&t=yea07zkm 404 in 89ms
 GET /api/socket-health 200 in 34ms
 GET /socket.io?EIO=4&transport=polling&t=yeary4qb 404 in 97ms
 GET /api/socket-health 200 in 27ms
 GET /socket.io?EIO=4&transport=polling&t=yebjherm 404 in 98ms
 GET /api/socket-health 200 in 43ms
 GET /socket.io?EIO=4&transport=polling&t=yecbqxn9 404 in 115ms
 GET /api/socket-health 200 in 38ms
 GET /socket.io?EIO=4&transport=polling&t=yed39nv3 404 in 94ms
 GET /api/socket-health 200 in 29ms
 GET /socket.io?EIO=4&transport=polling&t=yedut5iu 404 in 97ms
 GET /api/socket-health 200 in 33ms
 GET /socket.io?EIO=4&transport=polling&t=yeempn0h 404 in 105ms
 GET /api/socket-health 200 in 30ms
 GET /socket.io?EIO=4&transport=polling&t=yefed71j 404 in 91ms
 GET /api/socket-health 200 in 27ms
 GET /socket.io?EIO=4&transport=polling&t=yeg65hqd 404 in 86ms
 GET /api/socket-health 200 in 43ms
 GET /socket.io?EIO=4&transport=polling&t=yegy67w7 404 in 101ms
 GET /api/socket-health 200 in 28ms
 GET /socket.io?EIO=4&transport=polling&t=yehpwwjs 404 in 104ms
 GET /api/socket-health 200 in 32ms
 GET /socket.io?EIO=4&transport=polling&t=yeiho7dt 404 in 89ms
 GET /api/socket-health 200 in 25ms
 GET /socket.io?EIO=4&transport=polling&t=yej9736u 404 in 99ms
 GET /api/socket-health 200 in 35ms
 GET /socket.io?EIO=4&transport=polling&t=yek19lgm 404 in 93ms
 GET /api/socket-health 200 in 28ms
 GET /socket.io?EIO=4&transport=polling&t=yeksu9xo 404 in 99ms
 GET /api/socket-health 200 in 31ms
 GET /socket.io?EIO=4&transport=polling&t=yelksjt2 404 in 105ms
 GET /api/socket-health 200 in 32ms
 GET /socket.io?EIO=4&transport=polling&t=yemcmitn 404 in 119ms
 GET /api/socket-health 200 in 58ms
 GET /socket.io?EIO=4&transport=polling&t=yen575it 404 in 115ms
 GET /api/socket-health 200 in 50ms
 GET /socket.io?EIO=4&transport=polling&t=yenwprqd 404 in 270ms
 GET /api/socket-health 200 in 119ms
 GET /socket.io?EIO=4&transport=polling&t=yeoqdfj0 404 in 222ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
=== FRIEND REQUEST GET START ===
 GET /api/socket-health 200 in 142ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
Request type: received User: sayantan2@gmail.com
âœ… Database connected
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
 GET /socket.io?EIO=4&transport=polling&t=yepjxdz1 404 in 119ms
 POST /api/users/heartbeat 200 in 379ms
 GET /api/conversations 200 in 389ms
âœ… Current user found: {
  id: new ObjectId('6901f85f42c5d010fa811206'),
  email: 'sayantan2@gmail.com',
  friendRequestsCount: 0,
  sentRequestsCount: 1
}
Processing received requests...
Raw friendRequests: []
Processed receivedRequests: []
Populating sender details...
Final populated requests: []
=== FRIEND REQUEST GET END (received) ===
 GET /api/friends/request?type=received 200 in 536ms
 GET /api/friends 200 in 562ms
=== FRIEND REQUEST GET START ===
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
Request type: sent User: sayantan2@gmail.com
âœ… Database connected
âœ… Current user found: {
  id: new ObjectId('6901f85f42c5d010fa811206'),
  email: 'sayantan2@gmail.com',
  friendRequestsCount: 0,
  sentRequestsCount: 1
}
Processing sent requests...
Raw sentRequests: [
  {
    from: new ObjectId('6901f85f42c5d010fa811206'),
    fromName: 'sayantan2',
    to: new ObjectId('6905adf16a22b7843b006183'),
    toName: 'sayantan3',
    status: 'pending',
    _id: new ObjectId('6905cdce14ad0d0f020b3985'),
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
Filtering sent request: { status: 'pending', to: new ObjectId('6905adf16a22b7843b006183') }
Mapping sent request: {
  from: new ObjectId('6901f85f42c5d010fa811206'),
  fromName: 'sayantan2',
  to: new ObjectId('6905adf16a22b7843b006183'),
  toName: 'sayantan3',
  status: 'pending',
  _id: new ObjectId('6905cdce14ad0d0f020b3985'),
  createdAt: 2025-11-01T09:07:26.707Z,
  updatedAt: 2025-11-01T09:07:26.707Z
}
Processed sentRequests: [
  {
    id: '6905cdce14ad0d0f020b3985',
    to: {
      id: '6905adf16a22b7843b006183',
      username: 'sayantan3',
      email: '',
      profilePicture: null
    },
    status: 'pending',
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
Populating recipient details...
Looking up recipient: 6905adf16a22b7843b006183
Found recipient: sayantan3
Final populated sent requests: [
  {
    id: '6905cdce14ad0d0f020b3985',
    to: {
      id: '6905adf16a22b7843b006183',
      username: 'sayantan3',
      email: 'sayantan3@gmail.com',
      profilePicture: undefined
    },
    status: 'pending',
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
=== FRIEND REQUEST GET END (sent) ===
 GET /api/friends/request?type=sent 200 in 130ms
 GET /api/socket-health 200 in 50ms
 GET /socket.io?EIO=4&transport=polling&t=yeq829bw 404 in 125ms
 GET /api/socket-health 200 in 28ms
 GET /socket.io?EIO=4&transport=polling&t=yeqz4er8 404 in 102ms
 GET /api/socket-health 200 in 29ms
 GET /socket.io?EIO=4&transport=polling&t=yerqy6k3 404 in 114ms
 GET /api/socket-health 200 in 42ms
 GET /socket.io?EIO=4&transport=polling&t=yesiuuli 404 in 143ms
 GET /api/socket-health 200 in 68ms
 GET /socket.io?EIO=4&transport=polling&t=yetbmdwx 404 in 241ms
 GET /api/socket-health 200 in 42ms
 GET /socket.io?EIO=4&transport=polling&t=yeu3srcp 404 in 108ms
 GET /api/socket-health 200 in 48ms
 GET /socket.io?EIO=4&transport=polling&t=yeuvgfgz 404 in 120ms
 GET /api/socket-health 200 in 125ms
 GET /socket.io?EIO=4&transport=polling&t=yevowbrr 404 in 220ms
 GET /api/socket-health 200 in 32ms
 GET /socket.io?EIO=4&transport=polling&t=yewdgsvb 404 in 103ms
 GET /api/socket-health 200 in 30ms
 GET /socket.io?EIO=4&transport=polling&t=yex57qeq 404 in 103ms
 GET /api/socket-health 200 in 37ms
 GET /socket.io?EIO=4&transport=polling&t=yexxiuwp 404 in 134ms
 GET /api/socket-health 200 in 41ms
 GET /socket.io?EIO=4&transport=polling&t=yeypa8bb 404 in 128ms
 GET /api/socket-health 200 in 40ms
 GET /socket.io?EIO=4&transport=polling&t=yezgy3h5 404 in 106ms
 GET /api/socket-health 200 in 43ms
 GET /socket.io?EIO=4&transport=polling&t=yf08pm7y 404 in 122ms
 GET /api/socket-health 200 in 49ms
 GET /socket.io?EIO=4&transport=polling&t=yf10kmk4 404 in 111ms
 GET /api/socket-health 200 in 35ms
 GET /socket.io?EIO=4&transport=polling&t=yf1s9f3r 404 in 111ms
 GET /api/socket-health 200 in 35ms
 GET /socket.io?EIO=4&transport=polling&t=yf2jyom0 404 in 101ms
 GET /api/socket-health 200 in 60ms
 GET /socket.io?EIO=4&transport=polling&t=yf3cfklf 404 in 150ms
 GET /api/socket-health 200 in 28ms
 GET /socket.io?EIO=4&transport=polling&t=yf437qe1 404 in 94ms
 GET /api/socket-health 200 in 27ms
 GET /socket.io?EIO=4&transport=polling&t=yf4v2el7 404 in 94ms
 GET /api/socket-health 200 in 31ms
 GET /socket.io?EIO=4&transport=polling&t=yf5mwqwt 404 in 104ms
 GET /api/socket-health 200 in 39ms
 GET /socket.io?EIO=4&transport=polling&t=yf6eu8n3 404 in 111ms
 GET /api/socket-health 200 in 31ms
 GET /socket.io?EIO=4&transport=polling&t=yf76fm7n 404 in 103ms
 GET /api/socket-health 200 in 29ms
 GET /socket.io?EIO=4&transport=polling&t=yf7y0bnh 404 in 101ms
 GET /api/socket-health 200 in 27ms
 GET /socket.io?EIO=4&transport=polling&t=yf8proqg 404 in 101ms
 GET /api/socket-health 200 in 33ms
 GET /socket.io?EIO=4&transport=polling&t=yf9hnu87 404 in 90ms
 GET /api/socket-health 200 in 39ms
 GET /socket.io?EIO=4&transport=polling&t=yfa9z7r8 404 in 116ms
 GET /api/socket-health 200 in 28ms
 GET /socket.io?EIO=4&transport=polling&t=yfb1giqz 404 in 107ms
 GET /api/socket-health 200 in 40ms
 GET /socket.io?EIO=4&transport=polling&t=yfbtb8vu 404 in 100ms
 GET /api/socket-health 200 in 42ms
 GET /socket.io?EIO=4&transport=polling&t=yfcl67xm 404 in 116ms
 GET /api/socket-health 200 in 74ms
=== FRIEND REQUEST GET START ===
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
Request type: received User: sayantan2@gmail.com
âœ… Database connected
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
 GET /socket.io?EIO=4&transport=polling&t=yfde0jp1 404 in 109ms
âœ… Current user found: {
  id: new ObjectId('6901f85f42c5d010fa811206'),
  email: 'sayantan2@gmail.com',
  friendRequestsCount: 0,
  sentRequestsCount: 1
}
Processing received requests...
Raw friendRequests: []
Processed receivedRequests: []
Populating sender details...
Final populated requests: []
=== FRIEND REQUEST GET END (received) ===
 GET /api/friends/request?type=received 200 in 511ms
=== FRIEND REQUEST GET START ===
 GET /api/conversations 200 in 576ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
Request type: sent User: sayantan2@gmail.com
âœ… Database connected
âœ… Current user found: {
  id: new ObjectId('6901f85f42c5d010fa811206'),
  email: 'sayantan2@gmail.com',
  friendRequestsCount: 0,
  sentRequestsCount: 1
}
Processing sent requests...
Raw sentRequests: [
  {
    from: new ObjectId('6901f85f42c5d010fa811206'),
    fromName: 'sayantan2',
    to: new ObjectId('6905adf16a22b7843b006183'),
    toName: 'sayantan3',
    status: 'pending',
    _id: new ObjectId('6905cdce14ad0d0f020b3985'),
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
Filtering sent request: { status: 'pending', to: new ObjectId('6905adf16a22b7843b006183') }
Mapping sent request: {
  from: new ObjectId('6901f85f42c5d010fa811206'),
  fromName: 'sayantan2',
  to: new ObjectId('6905adf16a22b7843b006183'),
  toName: 'sayantan3',
  status: 'pending',
  _id: new ObjectId('6905cdce14ad0d0f020b3985'),
  createdAt: 2025-11-01T09:07:26.707Z,
  updatedAt: 2025-11-01T09:07:26.707Z
}
Processed sentRequests: [
  {
    id: '6905cdce14ad0d0f020b3985',
    to: {
      id: '6905adf16a22b7843b006183',
      username: 'sayantan3',
      email: '',
      profilePicture: null
    },
    status: 'pending',
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
Populating recipient details...
Looking up recipient: 6905adf16a22b7843b006183
Found recipient: sayantan3
Final populated sent requests: [
  {
    id: '6905cdce14ad0d0f020b3985',
    to: {
      id: '6905adf16a22b7843b006183',
      username: 'sayantan3',
      email: 'sayantan3@gmail.com',
      profilePicture: undefined
    },
    status: 'pending',
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
=== FRIEND REQUEST GET END (sent) ===
 GET /api/friends/request?type=sent 200 in 160ms
 GET /api/socket-health 200 in 55ms
 GET /socket.io?EIO=4&transport=polling&t=yfe5f4v5 404 in 114ms
 GET /api/socket-health 200 in 39ms
 GET /socket.io?EIO=4&transport=polling&t=yfewg0db 404 in 134ms
 GET /api/socket-health 200 in 35ms
 GET /socket.io?EIO=4&transport=polling&t=yffo31ic 404 in 98ms
 GET /api/socket-health 200 in 37ms
 GET /socket.io?EIO=4&transport=polling&t=yfgfuwde 404 in 102ms
 GET /api/socket-health 200 in 158ms
 GET /socket.io?EIO=4&transport=polling&t=yfhbgmt7 404 in 202ms
 GET /api/socket-health 200 in 136ms
 GET /socket.io?EIO=4&transport=polling&t=yfi3jdgg 404 in 680ms
 GET /api/socket-health 200 in 152ms
 GET /socket.io?EIO=4&transport=polling&t=yfiul4qo 404 in 287ms
 GET /api/socket-health 200 in 44ms
 GET /socket.io?EIO=4&transport=polling&t=yfjjlmlb 404 in 168ms
 GET /api/socket-health 200 in 35ms
 GET /socket.io?EIO=4&transport=polling&t=yfkao8x3 404 in 102ms
 GET /api/socket-health 200 in 51ms
 GET /socket.io?EIO=4&transport=polling&t=yfl36dno 404 in 103ms
 GET /api/socket-health 200 in 31ms
 GET /socket.io?EIO=4&transport=polling&t=yfluawoa 404 in 98ms
 GET /api/socket-health 200 in 31ms
 GET /socket.io?EIO=4&transport=polling&t=yfmltk1b 404 in 102ms
 GET /api/socket-health 200 in 38ms
 GET /socket.io?EIO=4&transport=polling&t=yfne27t9 404 in 121ms
 GET /api/socket-health 200 in 68ms
 GET /socket.io?EIO=4&transport=polling&t=yfo79k7i 404 in 185ms
 GET /api/socket-health 200 in 62ms
 GET /socket.io?EIO=4&transport=polling&t=yfoyc44z 404 in 147ms
 GET /api/socket-health 200 in 38ms
 GET /socket.io?EIO=4&transport=polling&t=yfppeux6 404 in 105ms
 GET /api/socket-health 200 in 45ms
 GET /socket.io?EIO=4&transport=polling&t=yfqh30gs 404 in 100ms
 GET /api/socket-health 200 in 52ms
 GET /socket.io?EIO=4&transport=polling&t=yfr95f34 404 in 135ms
 GET /api/socket-health 200 in 42ms
 GET /socket.io?EIO=4&transport=polling&t=yfs0n8nt 404 in 154ms
 GET /api/socket-health 200 in 31ms
 GET /socket.io?EIO=4&transport=polling&t=yfss6gjv 404 in 106ms
 GET /api/socket-health 200 in 58ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
 GET /api/auth/session 200 in 74ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
=== FRIEND REQUEST GET START ===
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
Request type: received User: sayantan2@gmail.com
âœ… Database connected
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
 GET /socket.io?EIO=4&transport=polling&t=yftl7srj 404 in 258ms
 GET /api/random-chat/queue 200 in 206ms
 GET /api/friends 200 in 230ms
 GET /api/users/me 200 in 245ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
 GET /api/random-chat/session 200 in 180ms
âœ… Current user found: {
  id: new ObjectId('6901f85f42c5d010fa811206'),
  email: 'sayantan2@gmail.com',
  friendRequestsCount: 0,
  sentRequestsCount: 1
}
Processing received requests...
Raw friendRequests: []
Processed receivedRequests: []
Populating sender details...
Final populated requests: []
=== FRIEND REQUEST GET END (received) ===
 GET /api/friends/request?type=received 200 in 518ms
=== FRIEND REQUEST GET START ===
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
Request type: sent User: sayantan2@gmail.com
âœ… Database connected
 POST /api/users/heartbeat 200 in 600ms
âœ… Current user found: {
  id: new ObjectId('6901f85f42c5d010fa811206'),
  email: 'sayantan2@gmail.com',
  friendRequestsCount: 0,
  sentRequestsCount: 1
}
Processing sent requests...
Raw sentRequests: [
  {
    from: new ObjectId('6901f85f42c5d010fa811206'),
    fromName: 'sayantan2',
    to: new ObjectId('6905adf16a22b7843b006183'),
    toName: 'sayantan3',
    status: 'pending',
    _id: new ObjectId('6905cdce14ad0d0f020b3985'),
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
Filtering sent request: { status: 'pending', to: new ObjectId('6905adf16a22b7843b006183') }
Mapping sent request: {
  from: new ObjectId('6901f85f42c5d010fa811206'),
  fromName: 'sayantan2',
  to: new ObjectId('6905adf16a22b7843b006183'),
  toName: 'sayantan3',
  status: 'pending',
  _id: new ObjectId('6905cdce14ad0d0f020b3985'),
  createdAt: 2025-11-01T09:07:26.707Z,
  updatedAt: 2025-11-01T09:07:26.707Z
}
Processed sentRequests: [
  {
    id: '6905cdce14ad0d0f020b3985',
    to: {
      id: '6905adf16a22b7843b006183',
      username: 'sayantan3',
      email: '',
      profilePicture: null
    },
    status: 'pending',
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
Populating recipient details...
Looking up recipient: 6905adf16a22b7843b006183
Found recipient: sayantan3
Final populated sent requests: [
  {
    id: '6905cdce14ad0d0f020b3985',
    to: {
      id: '6905adf16a22b7843b006183',
      username: 'sayantan3',
      email: 'sayantan3@gmail.com',
      profilePicture: undefined
    },
    status: 'pending',
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
=== FRIEND REQUEST GET END (sent) ===
 GET /api/friends/request?type=sent 200 in 175ms
 GET /api/socket-health 200 in 62ms
 GET /socket.io?EIO=4&transport=polling&t=yfucvffn 404 in 108ms
 GET /api/socket-health 200 in 30ms
 GET /socket.io?EIO=4&transport=polling&t=yfv3n4a5 404 in 100ms
 GET /api/socket-health 200 in 30ms
 GET /socket.io?EIO=4&transport=polling&t=yfvvhgpe 404 in 93ms
 GET /api/socket-health 200 in 32ms
 GET /socket.io?EIO=4&transport=polling&t=yfwn9v7q 404 in 109ms
 GET /api/socket-health 200 in 35ms
 GET /socket.io?EIO=4&transport=polling&t=yfxf67lo 404 in 95ms
 GET /api/socket-health 200 in 88ms
 GET /socket.io?EIO=4&transport=polling&t=yfybco0p 404 in 166ms
 GET /api/socket-health 200 in 42ms
 GET /socket.io?EIO=4&transport=polling&t=yfyys6f3 404 in 138ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
=== FRIEND REQUEST GET START ===
 GET /api/socket-health 200 in 85ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
Request type: received User: sayantan2@gmail.com
âœ… Database connected
âœ… Current user found: {
  id: new ObjectId('6901f85f42c5d010fa811206'),
  email: 'sayantan2@gmail.com',
  friendRequestsCount: 0,
  sentRequestsCount: 1
}
Processing received requests...
Raw friendRequests: []
Processed receivedRequests: []
Populating sender details...
Final populated requests: []
=== FRIEND REQUEST GET END (received) ===
 GET /api/friends/request?type=received 200 in 177ms
=== FRIEND REQUEST GET START ===
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
Request type: sent User: sayantan2@gmail.com
âœ… Database connected
 GET /api/friends 200 in 220ms
 GET /socket.io?EIO=4&transport=polling&t=yfzrs6sm 404 in 129ms
âœ… Current user found: {
  id: new ObjectId('6901f85f42c5d010fa811206'),
  email: 'sayantan2@gmail.com',
  friendRequestsCount: 0,
  sentRequestsCount: 1
}
Processing sent requests...
Raw sentRequests: [
  {
    from: new ObjectId('6901f85f42c5d010fa811206'),
    fromName: 'sayantan2',
    to: new ObjectId('6905adf16a22b7843b006183'),
    toName: 'sayantan3',
    status: 'pending',
    _id: new ObjectId('6905cdce14ad0d0f020b3985'),
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
Filtering sent request: { status: 'pending', to: new ObjectId('6905adf16a22b7843b006183') }
Mapping sent request: {
  from: new ObjectId('6901f85f42c5d010fa811206'),
  fromName: 'sayantan2',
  to: new ObjectId('6905adf16a22b7843b006183'),
  toName: 'sayantan3',
  status: 'pending',
  _id: new ObjectId('6905cdce14ad0d0f020b3985'),
  createdAt: 2025-11-01T09:07:26.707Z,
  updatedAt: 2025-11-01T09:07:26.707Z
}
Processed sentRequests: [
  {
    id: '6905cdce14ad0d0f020b3985',
    to: {
      id: '6905adf16a22b7843b006183',
      username: 'sayantan3',
      email: '',
      profilePicture: null
    },
    status: 'pending',
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
Populating recipient details...
Looking up recipient: 6905adf16a22b7843b006183
Found recipient: sayantan3
Final populated sent requests: [
  {
    id: '6905cdce14ad0d0f020b3985',
    to: {
      id: '6905adf16a22b7843b006183',
      username: 'sayantan3',
      email: 'sayantan3@gmail.com',
      profilePicture: undefined
    },
    status: 'pending',
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
=== FRIEND REQUEST GET END (sent) ===
 GET /api/friends/request?type=sent 200 in 111ms
 GET /api/socket-health 200 in 35ms
 GET /socket.io?EIO=4&transport=polling&t=yg0icd4p 404 in 101ms
 GET /api/socket-health 200 in 32ms
 GET /socket.io?EIO=4&transport=polling&t=yg19xhfi 404 in 111ms
 GET /api/socket-health 200 in 30ms
 GET /socket.io?EIO=4&transport=polling&t=yg21nfy7 404 in 109ms
 GET /api/socket-health 200 in 36ms
 GET /socket.io?EIO=4&transport=polling&t=yg2tj8hq 404 in 102ms
 GET /api/socket-health 200 in 35ms
 GET /socket.io?EIO=4&transport=polling&t=yg3latex 404 in 106ms
 GET /api/socket-health 200 in 44ms
 GET /socket.io?EIO=4&transport=polling&t=yg4dwqsq 404 in 104ms
 GET /api/socket-health 200 in 45ms
 GET /socket.io?EIO=4&transport=polling&t=yg58a9uq 404 in 110ms
 GET /api/socket-health 200 in 31ms
 GET /socket.io?EIO=4&transport=polling&t=yg5wnx7e 404 in 101ms
 GET /api/socket-health 200 in 31ms
 GET /socket.io?EIO=4&transport=polling&t=yg6oerus 404 in 101ms
 GET /api/socket-health 200 in 36ms
 GET /socket.io?EIO=4&transport=polling&t=yg7fztj0 404 in 96ms
 GET /api/socket-health 200 in 32ms
 GET /socket.io?EIO=4&transport=polling&t=yg87y6b5 404 in 102ms
 GET /api/socket-health 200 in 31ms
 GET /socket.io?EIO=4&transport=polling&t=yg8zs6xq 404 in 103ms
 GET /api/socket-health 200 in 35ms
 GET /socket.io?EIO=4&transport=polling&t=yg9rlevl 404 in 107ms
 GET /api/socket-health 200 in 35ms
 GET /socket.io?EIO=4&transport=polling&t=ygajcxto 404 in 99ms
 GET /api/socket-health 200 in 32ms
 GET /socket.io?EIO=4&transport=polling&t=ygbb7ecl 404 in 105ms
 GET /api/socket-health 200 in 28ms
 GET /socket.io?EIO=4&transport=polling&t=ygc2hvso 404 in 99ms
 GET /api/socket-health 200 in 30ms
 GET /socket.io?EIO=4&transport=polling&t=ygcubu16 404 in 100ms
 GET /api/socket-health 200 in 31ms
 GET /socket.io?EIO=4&transport=polling&t=ygdmgfyb 404 in 93ms
 GET /api/socket-health 200 in 31ms
 GET /socket.io?EIO=4&transport=polling&t=ygee91oq 404 in 105ms
 GET /api/socket-health 200 in 34ms
 GET /socket.io?EIO=4&transport=polling&t=ygf64orh 404 in 107ms
 GET /api/socket-health 200 in 36ms
 GET /socket.io?EIO=4&transport=polling&t=ygfxvwts 404 in 103ms
 GET /api/socket-health 200 in 32ms
 GET /socket.io?EIO=4&transport=polling&t=yggphlgi 404 in 98ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
 GET /api/socket-health 200 in 70ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
 GET /socket.io?EIO=4&transport=polling&t=yghifzil 404 in 98ms
 GET /api/conversations 200 in 209ms
 POST /api/users/heartbeat 200 in 254ms
 GET /api/socket-health 200 in 37ms
 GET /socket.io?EIO=4&transport=polling&t=ygi95o34 404 in 102ms
 GET /api/socket-health 200 in 34ms
 GET /socket.io?EIO=4&transport=polling&t=ygj0lm69 404 in 103ms
 GET /api/socket-health 200 in 31ms
 GET /socket.io?EIO=4&transport=polling&t=ygjsbeuo 404 in 101ms
 GET /api/socket-health 200 in 36ms
 GET /socket.io?EIO=4&transport=polling&t=ygkk78cf 404 in 127ms
 GET /api/socket-health 200 in 46ms
 GET /socket.io?EIO=4&transport=polling&t=ygld019w 404 in 99ms
 GET /api/socket-health 200 in 41ms
 GET /socket.io?EIO=4&transport=polling&t=ygm487uo 404 in 86ms
 GET /api/socket-health 200 in 34ms
 GET /socket.io?EIO=4&transport=polling&t=ygmvujm9 404 in 97ms
 GET /api/socket-health 200 in 48ms
=== FRIEND REQUEST GET START ===
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
Request type: received User: sayantan2@gmail.com
âœ… Database connected
âœ… Current user found: {
  id: new ObjectId('6901f85f42c5d010fa811206'),
  email: 'sayantan2@gmail.com',
  friendRequestsCount: 0,
  sentRequestsCount: 1
}
Processing received requests...
Raw friendRequests: []
Processed receivedRequests: []
Populating sender details...
Final populated requests: []
=== FRIEND REQUEST GET END (received) ===
 GET /api/friends/request?type=received 200 in 147ms
=== FRIEND REQUEST GET START ===
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
Request type: sent User: sayantan2@gmail.com
âœ… Database connected
 GET /socket.io?EIO=4&transport=polling&t=ygnnxggl 404 in 137ms
âœ… Current user found: {
  id: new ObjectId('6901f85f42c5d010fa811206'),
  email: 'sayantan2@gmail.com',
  friendRequestsCount: 0,
  sentRequestsCount: 1
}
Processing sent requests...
Raw sentRequests: [
  {
    from: new ObjectId('6901f85f42c5d010fa811206'),
    fromName: 'sayantan2',
    to: new ObjectId('6905adf16a22b7843b006183'),
    toName: 'sayantan3',
    status: 'pending',
    _id: new ObjectId('6905cdce14ad0d0f020b3985'),
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
Filtering sent request: { status: 'pending', to: new ObjectId('6905adf16a22b7843b006183') }
Mapping sent request: {
  from: new ObjectId('6901f85f42c5d010fa811206'),
  fromName: 'sayantan2',
  to: new ObjectId('6905adf16a22b7843b006183'),
  toName: 'sayantan3',
  status: 'pending',
  _id: new ObjectId('6905cdce14ad0d0f020b3985'),
  createdAt: 2025-11-01T09:07:26.707Z,
  updatedAt: 2025-11-01T09:07:26.707Z
}
Processed sentRequests: [
  {
    id: '6905cdce14ad0d0f020b3985',
    to: {
      id: '6905adf16a22b7843b006183',
      username: 'sayantan3',
      email: '',
      profilePicture: null
    },
    status: 'pending',
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
Populating recipient details...
Looking up recipient: 6905adf16a22b7843b006183
Found recipient: sayantan3
Final populated sent requests: [
  {
    id: '6905cdce14ad0d0f020b3985',
    to: {
      id: '6905adf16a22b7843b006183',
      username: 'sayantan3',
      email: 'sayantan3@gmail.com',
      profilePicture: undefined
    },
    status: 'pending',
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
=== FRIEND REQUEST GET END (sent) ===
 GET /api/friends/request?type=sent 200 in 124ms
 GET /api/socket-health 200 in 29ms
 GET /socket.io?EIO=4&transport=polling&t=ygof1lzf 404 in 92ms
 GET /api/socket-health 200 in 28ms
 GET /socket.io?EIO=4&transport=polling&t=ygp6qahm 404 in 100ms
 GET /api/socket-health 200 in 28ms
 GET /socket.io?EIO=4&transport=polling&t=ygpyq3el 404 in 96ms
 GET /api/socket-health 200 in 35ms
 GET /socket.io?EIO=4&transport=polling&t=ygqqoqly 404 in 88ms
 GET /api/socket-health 200 in 32ms
 GET /socket.io?EIO=4&transport=polling&t=ygrimljc 404 in 98ms
 GET /api/socket-health 200 in 35ms
 GET /socket.io?EIO=4&transport=polling&t=ygsa3inb 404 in 97ms
 GET /api/socket-health 200 in 26ms
 GET /socket.io?EIO=4&transport=polling&t=ygt1pwdu 404 in 96ms
 GET /api/socket-health 200 in 33ms
 GET /socket.io?EIO=4&transport=polling&t=ygtthh01 404 in 143ms
 GET /api/socket-health 200 in 33ms
 GET /socket.io?EIO=4&transport=polling&t=ygulmsvu 404 in 114ms
 GET /api/socket-health 200 in 30ms
 GET /socket.io?EIO=4&transport=polling&t=ygvdco6i 404 in 100ms
 GET /api/socket-health 200 in 31ms
 GET /socket.io?EIO=4&transport=polling&t=ygw4y6nm 404 in 99ms
 GET /api/socket-health 200 in 30ms
 GET /socket.io?EIO=4&transport=polling&t=ygwwqnv4 404 in 103ms
 GET /api/socket-health 200 in 38ms
 GET /socket.io?EIO=4&transport=polling&t=ygxorbj2 404 in 101ms
 GET /api/socket-health 200 in 28ms
 GET /socket.io?EIO=4&transport=polling&t=ygyg6ayx 404 in 107ms
 GET /api/socket-health 200 in 30ms
 GET /socket.io?EIO=4&transport=polling&t=ygz7z6r6 404 in 96ms
 GET /api/socket-health 200 in 38ms
 GET /socket.io?EIO=4&transport=polling&t=ygzzzhxg 404 in 113ms
 GET /api/socket-health 200 in 31ms
 GET /socket.io?EIO=4&transport=polling&t=yh0rgb89 404 in 88ms
 GET /api/socket-health 200 in 37ms
 GET /socket.io?EIO=4&transport=polling&t=yh1jlre0 404 in 98ms
 GET /api/socket-health 200 in 28ms
 GET /socket.io?EIO=4&transport=polling&t=yh2axxan 404 in 90ms
 GET /api/socket-health 200 in 28ms
 GET /socket.io?EIO=4&transport=polling&t=yh334xfl 404 in 95ms
 GET /api/socket-health 200 in 30ms
 GET /socket.io?EIO=4&transport=polling&t=yh3up006 404 in 96ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
 GET /api/socket-health 200 in 61ms
 GET /socket.io?EIO=4&transport=polling&t=yh4njq56 404 in 104ms
 POST /api/users/heartbeat 200 in 247ms
 GET /api/socket-health 200 in 50ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
 GET /socket.io?EIO=4&transport=polling&t=yh5ev28d 404 in 100ms
 GET /api/conversations 200 in 179ms
 GET /api/socket-health 200 in 27ms
 GET /socket.io?EIO=4&transport=polling&t=yh661wo4 404 in 104ms
 GET /api/socket-health 200 in 33ms
 GET /socket.io?EIO=4&transport=polling&t=yh6xyofv 404 in 116ms
 GET /api/socket-health 200 in 49ms
 GET /socket.io?EIO=4&transport=polling&t=yh7q8aju 404 in 107ms
 GET /api/socket-health 200 in 64ms
 GET /socket.io?EIO=4&transport=polling&t=yh8iiot4 404 in 270ms
 GET /api/socket-health 200 in 39ms
 GET /socket.io?EIO=4&transport=polling&t=yh99fdqz 404 in 113ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
=== FRIEND REQUEST GET START ===
 GET /api/socket-health 200 in 102ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
Request type: received User: sayantan2@gmail.com
âœ… Database connected
 GET /socket.io?EIO=4&transport=polling&t=yha33nza 404 in 114ms
 GET /api/friends 200 in 244ms
âœ… Current user found: {
  id: new ObjectId('6901f85f42c5d010fa811206'),
  email: 'sayantan2@gmail.com',
  friendRequestsCount: 0,
  sentRequestsCount: 1
}
Processing received requests...
Raw friendRequests: []
Processed receivedRequests: []
Populating sender details...
Final populated requests: []
=== FRIEND REQUEST GET END (received) ===
 GET /api/friends/request?type=received 200 in 535ms
=== FRIEND REQUEST GET START ===
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
Request type: sent User: sayantan2@gmail.com
âœ… Database connected
âœ… Current user found: {
  id: new ObjectId('6901f85f42c5d010fa811206'),
  email: 'sayantan2@gmail.com',
  friendRequestsCount: 0,
  sentRequestsCount: 1
}
Processing sent requests...
Raw sentRequests: [
  {
    from: new ObjectId('6901f85f42c5d010fa811206'),
    fromName: 'sayantan2',
    to: new ObjectId('6905adf16a22b7843b006183'),
    toName: 'sayantan3',
    status: 'pending',
    _id: new ObjectId('6905cdce14ad0d0f020b3985'),
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
Filtering sent request: { status: 'pending', to: new ObjectId('6905adf16a22b7843b006183') }
Mapping sent request: {
  from: new ObjectId('6901f85f42c5d010fa811206'),
  fromName: 'sayantan2',
  to: new ObjectId('6905adf16a22b7843b006183'),
  toName: 'sayantan3',
  status: 'pending',
  _id: new ObjectId('6905cdce14ad0d0f020b3985'),
  createdAt: 2025-11-01T09:07:26.707Z,
  updatedAt: 2025-11-01T09:07:26.707Z
}
Processed sentRequests: [
  {
    id: '6905cdce14ad0d0f020b3985',
    to: {
      id: '6905adf16a22b7843b006183',
      username: 'sayantan3',
      email: '',
      profilePicture: null
    },
    status: 'pending',
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
Populating recipient details...
Looking up recipient: 6905adf16a22b7843b006183
Found recipient: sayantan3
Final populated sent requests: [
  {
    id: '6905cdce14ad0d0f020b3985',
    to: {
      id: '6905adf16a22b7843b006183',
      username: 'sayantan3',
      email: 'sayantan3@gmail.com',
      profilePicture: undefined
    },
    status: 'pending',
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
=== FRIEND REQUEST GET END (sent) ===
 GET /api/friends/request?type=sent 200 in 115ms
 GET /api/socket-health 200 in 36ms
 GET /socket.io?EIO=4&transport=polling&t=yhass9et 404 in 100ms
 GET /api/socket-health 200 in 26ms
 GET /socket.io?EIO=4&transport=polling&t=yhbk92w3 404 in 99ms
 GET /api/socket-health 200 in 28ms
 GET /socket.io?EIO=4&transport=polling&t=yhcc4fsx 404 in 89ms
 GET /api/socket-health 200 in 26ms
 GET /socket.io?EIO=4&transport=polling&t=yhd3ui5p 404 in 94ms
 GET /api/socket-health 200 in 30ms
 GET /socket.io?EIO=4&transport=polling&t=yhdvzipe 404 in 89ms
 GET /api/socket-health 200 in 31ms
 GET /socket.io?EIO=4&transport=polling&t=yheo30hm 404 in 104ms
 GET /api/socket-health 200 in 50ms
 GET /socket.io?EIO=4&transport=polling&t=yhfhbd1t 404 in 138ms
 GET /api/socket-health 200 in 28ms
 GET /socket.io?EIO=4&transport=polling&t=yhg76l0c 404 in 93ms
 GET /api/socket-health 200 in 29ms
 GET /socket.io?EIO=4&transport=polling&t=yhgz1ve7 404 in 94ms
 GET /api/socket-health 200 in 35ms
 GET /socket.io?EIO=4&transport=polling&t=yhhqystc 404 in 89ms
 GET /api/socket-health 200 in 28ms
 GET /socket.io?EIO=4&transport=polling&t=yhiicbr4 404 in 92ms
 GET /api/socket-health 200 in 27ms
 GET /socket.io?EIO=4&transport=polling&t=yhja58mz 404 in 95ms
 GET /api/socket-health 200 in 29ms
 GET /socket.io?EIO=4&transport=polling&t=yhk1whny 404 in 95ms
 GET /api/socket-health 200 in 38ms
 GET /socket.io?EIO=4&transport=polling&t=yhktvx11 404 in 104ms
 GET /api/socket-health 200 in 28ms
 GET /socket.io?EIO=4&transport=polling&t=yhlldnoe 404 in 91ms
 GET /api/socket-health 200 in 26ms
 GET /socket.io?EIO=4&transport=polling&t=yhmdgp0n 404 in 86ms
 GET /api/socket-health 200 in 28ms
 GET /socket.io?EIO=4&transport=polling&t=yhn56fxu 404 in 99ms
 GET /api/socket-health 200 in 28ms
 GET /socket.io?EIO=4&transport=polling&t=yhnwwgvt 404 in 91ms
 GET /api/socket-health 200 in 35ms
 GET /socket.io?EIO=4&transport=polling&t=yhoou8gn 404 in 91ms
 GET /api/socket-health 200 in 27ms
 GET /socket.io?EIO=4&transport=polling&t=yhpggxss 404 in 89ms
 GET /api/socket-health 200 in 27ms
 GET /socket.io?EIO=4&transport=polling&t=yhq86sue 404 in 94ms
 GET /api/socket-health 200 in 27ms
 GET /socket.io?EIO=4&transport=polling&t=yhqzx1zc 404 in 90ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
 GET /api/socket-health 200 in 55ms
 GET /socket.io?EIO=4&transport=polling&t=yhrsini2 404 in 91ms
 POST /api/users/heartbeat 200 in 241ms
 GET /api/socket-health 200 in 29ms
 GET /socket.io?EIO=4&transport=polling&t=yhsjju01 404 in 90ms
 GET /api/socket-health 200 in 50ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
 GET /socket.io?EIO=4&transport=polling&t=yhtbxtwt 404 in 94ms
 GET /api/conversations 200 in 181ms
 GET /api/socket-health 200 in 28ms
 GET /socket.io?EIO=4&transport=polling&t=yhu2zn4u 404 in 94ms
 GET /api/socket-health 200 in 27ms
 GET /socket.io?EIO=4&transport=polling&t=yhuut8zj 404 in 94ms
 GET /api/socket-health 200 in 38ms
 GET /socket.io?EIO=4&transport=polling&t=yhvmu3pr 404 in 123ms
 GET /api/socket-health 200 in 35ms
 GET /socket.io?EIO=4&transport=polling&t=yhweg0nq 404 in 113ms
 GET /api/socket-health 200 in 31ms
 GET /socket.io?EIO=4&transport=polling&t=yhx64h1p 404 in 98ms
 GET /api/socket-health 200 in 58ms
=== FRIEND REQUEST GET START ===
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
Request type: received User: sayantan2@gmail.com
âœ… Database connected
âœ… Current user found: {
  id: new ObjectId('6901f85f42c5d010fa811206'),
  email: 'sayantan2@gmail.com',
  friendRequestsCount: 0,
  sentRequestsCount: 1
}
Processing received requests...
Raw friendRequests: []
Processed receivedRequests: []
Populating sender details...
Final populated requests: []
=== FRIEND REQUEST GET END (received) ===
 GET /api/friends/request?type=received 200 in 154ms
=== FRIEND REQUEST GET START ===
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
Request type: sent User: sayantan2@gmail.com
âœ… Database connected
 GET /socket.io?EIO=4&transport=polling&t=yhxykf5j 404 in 126ms
âœ… Current user found: {
  id: new ObjectId('6901f85f42c5d010fa811206'),
  email: 'sayantan2@gmail.com',
  friendRequestsCount: 0,
  sentRequestsCount: 1
}
Processing sent requests...
Raw sentRequests: [
  {
    from: new ObjectId('6901f85f42c5d010fa811206'),
    fromName: 'sayantan2',
    to: new ObjectId('6905adf16a22b7843b006183'),
    toName: 'sayantan3',
    status: 'pending',
    _id: new ObjectId('6905cdce14ad0d0f020b3985'),
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
Filtering sent request: { status: 'pending', to: new ObjectId('6905adf16a22b7843b006183') }
Mapping sent request: {
  from: new ObjectId('6901f85f42c5d010fa811206'),
  fromName: 'sayantan2',
  to: new ObjectId('6905adf16a22b7843b006183'),
  toName: 'sayantan3',
  status: 'pending',
  _id: new ObjectId('6905cdce14ad0d0f020b3985'),
  createdAt: 2025-11-01T09:07:26.707Z,
  updatedAt: 2025-11-01T09:07:26.707Z
}
Processed sentRequests: [
  {
    id: '6905cdce14ad0d0f020b3985',
    to: {
      id: '6905adf16a22b7843b006183',
      username: 'sayantan3',
      email: '',
      profilePicture: null
    },
    status: 'pending',
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
Populating recipient details...
Looking up recipient: 6905adf16a22b7843b006183
Found recipient: sayantan3
Final populated sent requests: [
  {
    id: '6905cdce14ad0d0f020b3985',
    to: {
      id: '6905adf16a22b7843b006183',
      username: 'sayantan3',
      email: 'sayantan3@gmail.com',
      profilePicture: undefined
    },
    status: 'pending',
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
=== FRIEND REQUEST GET END (sent) ===
 GET /api/friends/request?type=sent 200 in 116ms
 GET /api/socket-health 200 in 32ms
 GET /socket.io?EIO=4&transport=polling&t=yhyq1x3k 404 in 98ms
 GET /api/socket-health 200 in 42ms
 GET /socket.io?EIO=4&transport=polling&t=yhzi2rfi 404 in 100ms
 GET /api/socket-health 200 in 31ms
 GET /socket.io?EIO=4&transport=polling&t=yi09il37 404 in 104ms
 GET /api/socket-health 200 in 30ms
 GET /socket.io?EIO=4&transport=polling&t=yi11an2j 404 in 96ms
 GET /api/socket-health 200 in 33ms
 GET /socket.io?EIO=4&transport=polling&t=yi1tg138 404 in 108ms
 GET /api/socket-health 200 in 38ms
 GET /socket.io?EIO=4&transport=polling&t=yi2ky5cs 404 in 96ms
 GET /api/socket-health 200 in 28ms
 GET /socket.io?EIO=4&transport=polling&t=yi3cf281 404 in 99ms
 GET /api/socket-health 200 in 27ms
 GET /socket.io?EIO=4&transport=polling&t=yi444ckf 404 in 99ms
 GET /api/socket-health 200 in 27ms
 GET /socket.io?EIO=4&transport=polling&t=yi4vu2mu 404 in 98ms
 GET /api/socket-health 200 in 39ms
 GET /socket.io?EIO=4&transport=polling&t=yi5nvg02 404 in 94ms
 GET /api/socket-health 200 in 24ms
 GET /socket.io?EIO=4&transport=polling&t=yi6fld6e 404 in 94ms
 GET /api/socket-health 200 in 29ms
 GET /socket.io?EIO=4&transport=polling&t=yi77fmie 404 in 98ms
 GET /api/socket-health 200 in 31ms
 GET /socket.io?EIO=4&transport=polling&t=yi7z7o1a 404 in 112ms
 GET /api/socket-health 200 in 34ms
 GET /socket.io?EIO=4&transport=polling&t=yi8qzqbm 404 in 106ms
 GET /api/socket-health 200 in 36ms
 GET /socket.io?EIO=4&transport=polling&t=yi9iurv1 404 in 88ms
 GET /api/socket-health 200 in 26ms
 GET /socket.io?EIO=4&transport=polling&t=yiaa8p2t 404 in 99ms
 GET /api/socket-health 200 in 40ms
 GET /socket.io?EIO=4&transport=polling&t=yib2di6w 404 in 122ms
 GET /api/socket-health 200 in 40ms
 GET /socket.io?EIO=4&transport=polling&t=yibu4wos 404 in 89ms
 GET /api/socket-health 200 in 54ms
 GET /socket.io?EIO=4&transport=polling&t=yicmnpqj 404 in 132ms
 GET /api/socket-health 200 in 44ms
 GET /socket.io?EIO=4&transport=polling&t=yide5wpv 404 in 126ms
 GET /api/socket-health 200 in 42ms
 GET /socket.io?EIO=4&transport=polling&t=yie5uj5s 404 in 121ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
 GET /api/socket-health 200 in 89ms
 GET /socket.io?EIO=4&transport=polling&t=yieyskva 404 in 117ms
 POST /api/users/heartbeat 200 in 291ms
 GET /api/socket-health 200 in 32ms
 GET /socket.io?EIO=4&transport=polling&t=yifov4ll 404 in 91ms
 GET /api/socket-health 200 in 36ms
 GET /socket.io?EIO=4&transport=polling&t=yigh4dlv 404 in 116ms
 GET /api/socket-health 200 in 82ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
 GET /socket.io?EIO=4&transport=polling&t=yiha31bh 404 in 141ms
 GET /api/conversations 200 in 244ms
 GET /api/socket-health 200 in 46ms
 GET /socket.io?EIO=4&transport=polling&t=yii0ub2t 404 in 161ms
 GET /api/socket-health 200 in 59ms
 GET /socket.io?EIO=4&transport=polling&t=yiiswjt9 404 in 180ms
 GET /api/socket-health 200 in 41ms
 GET /socket.io?EIO=4&transport=polling&t=yijk35u4 404 in 143ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
=== FRIEND REQUEST GET START ===
 GET /api/socket-health 200 in 98ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
Request type: received User: sayantan2@gmail.com
âœ… Database connected
 GET /socket.io?EIO=4&transport=polling&t=yike01gd 404 in 103ms
 GET /api/friends 200 in 254ms
âœ… Current user found: {
  id: new ObjectId('6901f85f42c5d010fa811206'),
  email: 'sayantan2@gmail.com',
  friendRequestsCount: 0,
  sentRequestsCount: 1
}
Processing received requests...
Raw friendRequests: []
Processed receivedRequests: []
Populating sender details...
Final populated requests: []
=== FRIEND REQUEST GET END (received) ===
 GET /api/friends/request?type=received 200 in 537ms
=== FRIEND REQUEST GET START ===
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
Request type: sent User: sayantan2@gmail.com
âœ… Database connected
âœ… Current user found: {
  id: new ObjectId('6901f85f42c5d010fa811206'),
  email: 'sayantan2@gmail.com',
  friendRequestsCount: 0,
  sentRequestsCount: 1
}
Processing sent requests...
Raw sentRequests: [
  {
    from: new ObjectId('6901f85f42c5d010fa811206'),
    fromName: 'sayantan2',
    to: new ObjectId('6905adf16a22b7843b006183'),
    toName: 'sayantan3',
    status: 'pending',
    _id: new ObjectId('6905cdce14ad0d0f020b3985'),
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
Filtering sent request: { status: 'pending', to: new ObjectId('6905adf16a22b7843b006183') }
Mapping sent request: {
  from: new ObjectId('6901f85f42c5d010fa811206'),
  fromName: 'sayantan2',
  to: new ObjectId('6905adf16a22b7843b006183'),
  toName: 'sayantan3',
  status: 'pending',
  _id: new ObjectId('6905cdce14ad0d0f020b3985'),
  createdAt: 2025-11-01T09:07:26.707Z,
  updatedAt: 2025-11-01T09:07:26.707Z
}
Processed sentRequests: [
  {
    id: '6905cdce14ad0d0f020b3985',
    to: {
      id: '6905adf16a22b7843b006183',
      username: 'sayantan3',
      email: '',
      profilePicture: null
    },
    status: 'pending',
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
Populating recipient details...
Looking up recipient: 6905adf16a22b7843b006183
Found recipient: sayantan3
Final populated sent requests: [
  {
    id: '6905cdce14ad0d0f020b3985',
    to: {
      id: '6905adf16a22b7843b006183',
      username: 'sayantan3',
      email: 'sayantan3@gmail.com',
      profilePicture: undefined
    },
    status: 'pending',
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
=== FRIEND REQUEST GET END (sent) ===
 GET /api/friends/request?type=sent 200 in 143ms
 GET /api/socket-health 200 in 33ms
 GET /socket.io?EIO=4&transport=polling&t=yil39ywf 404 in 146ms
 GET /api/socket-health 200 in 35ms
 GET /socket.io?EIO=4&transport=polling&t=yilvgkru 404 in 104ms
 GET /api/socket-health 200 in 28ms
 GET /socket.io?EIO=4&transport=polling&t=yimmptr0 404 in 97ms
 GET /api/socket-health 200 in 28ms
 GET /socket.io?EIO=4&transport=polling&t=yinekeg9 404 in 100ms
 GET /api/socket-health 200 in 31ms
 GET /socket.io?EIO=4&transport=polling&t=yio6g5x5 404 in 91ms
 GET /api/socket-health 200 in 37ms
 GET /socket.io?EIO=4&transport=polling&t=yioztn31 404 in 335ms
 GET /api/socket-health 200 in 36ms
 GET /socket.io?EIO=4&transport=polling&t=yipq51gg 404 in 96ms
 GET /api/socket-health 200 in 35ms
 GET /socket.io?EIO=4&transport=polling&t=yiqhxz5m 404 in 120ms
 GET /api/socket-health 200 in 39ms
 GET /socket.io?EIO=4&transport=polling&t=yir9p5py 404 in 117ms
 GET /api/socket-health 200 in 40ms
 GET /socket.io?EIO=4&transport=polling&t=yis1nqav 404 in 109ms
 GET /api/socket-health 200 in 51ms
 GET /socket.io?EIO=4&transport=polling&t=yistncqu 404 in 128ms
 GET /api/socket-health 200 in 40ms
 GET /socket.io?EIO=4&transport=polling&t=yitkz1yk 404 in 136ms
 GET /api/socket-health 200 in 43ms
 GET /socket.io?EIO=4&transport=polling&t=yiucvxaw 404 in 121ms
 GET /api/socket-health 200 in 28ms
 GET /socket.io?EIO=4&transport=polling&t=yiv4gfar 404 in 130ms
 GET /api/socket-health 200 in 37ms
 GET /socket.io?EIO=4&transport=polling&t=yivwffly 404 in 100ms
 GET /api/socket-health 200 in 48ms
 GET /socket.io?EIO=4&transport=polling&t=yiwojtzs 404 in 133ms
 GET /api/socket-health 200 in 38ms
 GET /socket.io?EIO=4&transport=polling&t=yixg0p8j 404 in 131ms
 GET /api/socket-health 200 in 40ms
 GET /socket.io?EIO=4&transport=polling&t=yiy7pgoj 404 in 100ms
 GET /api/socket-health 200 in 41ms
 GET /socket.io?EIO=4&transport=polling&t=yiyzv1ep 404 in 92ms
 GET /api/socket-health 200 in 38ms
 GET /socket.io?EIO=4&transport=polling&t=yizrf8l1 404 in 121ms
 GET /api/socket-health 200 in 38ms
 GET /socket.io?EIO=4&transport=polling&t=yj0j5tf5 404 in 128ms
 GET /api/socket-health 200 in 42ms
 GET /socket.io?EIO=4&transport=polling&t=yj1aurys 404 in 121ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
 GET /api/socket-health 200 in 85ms
 GET /socket.io?EIO=4&transport=polling&t=yj23zrc2 404 in 120ms
 POST /api/users/heartbeat 200 in 284ms
 GET /api/socket-health 200 in 28ms
 GET /socket.io?EIO=4&transport=polling&t=yj2ucf3n 404 in 101ms
 GET /api/socket-health 200 in 43ms
 GET /socket.io?EIO=4&transport=polling&t=yj3mlhxl 404 in 127ms
 GET /api/socket-health 200 in 36ms
 GET /socket.io?EIO=4&transport=polling&t=yj4dzhxe 404 in 121ms
 GET /api/socket-health 200 in 46ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
 GET /socket.io?EIO=4&transport=polling&t=yj55t802 404 in 96ms
 GET /api/conversations 200 in 179ms
 GET /api/socket-health 200 in 30ms
 GET /socket.io?EIO=4&transport=polling&t=yj5xgsld 404 in 159ms
 GET /api/socket-health 200 in 59ms
 GET /socket.io?EIO=4&transport=polling&t=yj6qd7z2 404 in 125ms
 GET /api/socket-health 200 in 45ms
 GET /socket.io?EIO=4&transport=polling&t=yj7hbjho 404 in 171ms
 GET /api/socket-health 200 in 78ms
=== FRIEND REQUEST GET START ===
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
Request type: received User: sayantan2@gmail.com
âœ… Database connected
âœ… Current user found: {
  id: new ObjectId('6901f85f42c5d010fa811206'),
  email: 'sayantan2@gmail.com',
  friendRequestsCount: 0,
  sentRequestsCount: 1
}
Processing received requests...
Raw friendRequests: []
Processed receivedRequests: []
Populating sender details...
Final populated requests: []
=== FRIEND REQUEST GET END (received) ===
 GET /api/friends/request?type=received 200 in 205ms
=== FRIEND REQUEST GET START ===
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
Request type: sent User: sayantan2@gmail.com
âœ… Database connected
 GET /socket.io?EIO=4&transport=polling&t=yj89x8zs 404 in 229ms
âœ… Current user found: {
  id: new ObjectId('6901f85f42c5d010fa811206'),
  email: 'sayantan2@gmail.com',
  friendRequestsCount: 0,
  sentRequestsCount: 1
}
Processing sent requests...
Raw sentRequests: [
  {
    from: new ObjectId('6901f85f42c5d010fa811206'),
    fromName: 'sayantan2',
    to: new ObjectId('6905adf16a22b7843b006183'),
    toName: 'sayantan3',
    status: 'pending',
    _id: new ObjectId('6905cdce14ad0d0f020b3985'),
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
Filtering sent request: { status: 'pending', to: new ObjectId('6905adf16a22b7843b006183') }
Mapping sent request: {
  from: new ObjectId('6901f85f42c5d010fa811206'),
  fromName: 'sayantan2',
  to: new ObjectId('6905adf16a22b7843b006183'),
  toName: 'sayantan3',
  status: 'pending',
  _id: new ObjectId('6905cdce14ad0d0f020b3985'),
  createdAt: 2025-11-01T09:07:26.707Z,
  updatedAt: 2025-11-01T09:07:26.707Z
}
Processed sentRequests: [
  {
    id: '6905cdce14ad0d0f020b3985',
    to: {
      id: '6905adf16a22b7843b006183',
      username: 'sayantan3',
      email: '',
      profilePicture: null
    },
    status: 'pending',
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
Populating recipient details...
Looking up recipient: 6905adf16a22b7843b006183
Found recipient: sayantan3
Final populated sent requests: [
  {
    id: '6905cdce14ad0d0f020b3985',
    to: {
      id: '6905adf16a22b7843b006183',
      username: 'sayantan3',
      email: 'sayantan3@gmail.com',
      profilePicture: undefined
    },
    status: 'pending',
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
=== FRIEND REQUEST GET END (sent) ===
 GET /api/friends/request?type=sent 200 in 165ms
 GET /api/socket-health 200 in 30ms
 GET /socket.io?EIO=4&transport=polling&t=yj90jrs8 404 in 125ms
 GET /api/socket-health 200 in 45ms
 GET /socket.io?EIO=4&transport=polling&t=yj9sjxco 404 in 118ms
 GET /api/socket-health 200 in 56ms
 GET /socket.io?EIO=4&transport=polling&t=yjaknb8s 404 in 159ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
 GET /api/auth/session 200 in 195ms
=== FRIEND REQUEST GET START ===
 GET /api/socket-health 200 in 215ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
Request type: received User: sayantan2@gmail.com
âœ… Database connected
âœ… Current user found: {
  id: new ObjectId('6901f85f42c5d010fa811206'),
  email: 'sayantan2@gmail.com',
  friendRequestsCount: 0,
  sentRequestsCount: 1
}
Processing received requests...
Raw friendRequests: []
Processed receivedRequests: []
Populating sender details...
Final populated requests: []
=== FRIEND REQUEST GET END (received) ===
 GET /api/friends/request?type=received 200 in 291ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
 POST /api/users/heartbeat 200 in 358ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
 GET /api/socket-health 200 in 40ms
=== FRIEND REQUEST GET START ===
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
Request type: received User: sayantan2@gmail.com
âœ… Database connected
 GET /api/random-chat/queue 200 in 273ms
=== FRIEND REQUEST GET START ===
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
Request type: sent User: sayantan2@gmail.com
âœ… Database connected
âœ… Current user found: {
  id: new ObjectId('6901f85f42c5d010fa811206'),
  email: 'sayantan2@gmail.com',
  friendRequestsCount: 0,
  sentRequestsCount: 1
}
Processing received requests...
Raw friendRequests: []
Processed receivedRequests: []
Populating sender details...
Final populated requests: []
=== FRIEND REQUEST GET END (received) ===
 GET /api/friends/request?type=received 200 in 202ms
 POST /api/users/heartbeat 200 in 488ms
 GET /api/friends 200 in 760ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
 GET /socket.io?EIO=4&transport=polling&t=yjbgp0i3 404 in 346ms
 GET /api/random-chat/session 200 in 222ms
 POST /api/users/heartbeat 200 in 960ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
 GET /socket.io?EIO=4&transport=polling&t=yjblctmf 404 in 202ms
 GET /api/friends 200 in 140ms
 GET /api/users/me 200 in 792ms
âœ… Current user found: {
  id: new ObjectId('6901f85f42c5d010fa811206'),
  email: 'sayantan2@gmail.com',
  friendRequestsCount: 0,
  sentRequestsCount: 1
}
Processing sent requests...
Raw sentRequests: [
  {
    from: new ObjectId('6901f85f42c5d010fa811206'),
    fromName: 'sayantan2',
    to: new ObjectId('6905adf16a22b7843b006183'),
    toName: 'sayantan3',
    status: 'pending',
    _id: new ObjectId('6905cdce14ad0d0f020b3985'),
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
Filtering sent request: { status: 'pending', to: new ObjectId('6905adf16a22b7843b006183') }
Mapping sent request: {
  from: new ObjectId('6901f85f42c5d010fa811206'),
  fromName: 'sayantan2',
  to: new ObjectId('6905adf16a22b7843b006183'),
  toName: 'sayantan3',
  status: 'pending',
  _id: new ObjectId('6905cdce14ad0d0f020b3985'),
  createdAt: 2025-11-01T09:07:26.707Z,
  updatedAt: 2025-11-01T09:07:26.707Z
}
Processed sentRequests: [
  {
    id: '6905cdce14ad0d0f020b3985',
    to: {
      id: '6905adf16a22b7843b006183',
      username: 'sayantan3',
      email: '',
      profilePicture: null
    },
    status: 'pending',
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
Populating recipient details...
Looking up recipient: 6905adf16a22b7843b006183
Found recipient: sayantan3
Final populated sent requests: [
  {
    id: '6905cdce14ad0d0f020b3985',
    to: {
      id: '6905adf16a22b7843b006183',
      username: 'sayantan3',
      email: 'sayantan3@gmail.com',
      profilePicture: undefined
    },
    status: 'pending',
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
=== FRIEND REQUEST GET END (sent) ===
 GET /api/friends/request?type=sent 200 in 663ms
=== FRIEND REQUEST GET START ===
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
Request type: sent User: sayantan2@gmail.com
âœ… Database connected
âœ… Current user found: {
  id: new ObjectId('6901f85f42c5d010fa811206'),
  email: 'sayantan2@gmail.com',
  friendRequestsCount: 0,
  sentRequestsCount: 1
}
Processing sent requests...
Raw sentRequests: [
  {
    from: new ObjectId('6901f85f42c5d010fa811206'),
    fromName: 'sayantan2',
    to: new ObjectId('6905adf16a22b7843b006183'),
    toName: 'sayantan3',
    status: 'pending',
    _id: new ObjectId('6905cdce14ad0d0f020b3985'),
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
Filtering sent request: { status: 'pending', to: new ObjectId('6905adf16a22b7843b006183') }
Mapping sent request: {
  from: new ObjectId('6901f85f42c5d010fa811206'),
  fromName: 'sayantan2',
  to: new ObjectId('6905adf16a22b7843b006183'),
  toName: 'sayantan3',
  status: 'pending',
  _id: new ObjectId('6905cdce14ad0d0f020b3985'),
  createdAt: 2025-11-01T09:07:26.707Z,
  updatedAt: 2025-11-01T09:07:26.707Z
}
Processed sentRequests: [
  {
    id: '6905cdce14ad0d0f020b3985',
    to: {
      id: '6905adf16a22b7843b006183',
      username: 'sayantan3',
      email: '',
      profilePicture: null
    },
    status: 'pending',
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
Populating recipient details...
Looking up recipient: 6905adf16a22b7843b006183
Found recipient: sayantan3
Final populated sent requests: [
  {
    id: '6905cdce14ad0d0f020b3985',
    to: {
      id: '6905adf16a22b7843b006183',
      username: 'sayantan3',
      email: 'sayantan3@gmail.com',
      profilePicture: undefined
    },
    status: 'pending',
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
=== FRIEND REQUEST GET END (sent) ===
 GET /api/friends/request?type=sent 200 in 130ms
 GET /dashboard/discover?method=bluetooth 200 in 704ms
 â—‹ Compiling /favicon.ico ...
 âœ“ Compiled /api/users/bluetooth in 2.2s (1409 modules)
 âœ“ Compiled in 0ms (1414 modules)
 âœ“ Compiled in 0ms (1414 modules)
 GET /api/users/bluetooth 200 in 3609ms
 GET /favicon.ico 200 in 3855ms
 GET /api/auth/session 200 in 3808ms
 GET /api/users/wifi 200 in 3633ms
 GET /dashboard/discover?method=bluetooth 200 in 1987ms
 âœ“ Compiled in 2ms (1414 modules)
[next-auth][warn][DEBUG_ENABLED] 
https://next-auth.js.org/warnings#debug_enabled
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
 âœ“ Compiled in 1ms (1414 modules)
[next-auth][warn][DEBUG_ENABLED] 
https://next-auth.js.org/warnings#debug_enabled
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
[next-auth][warn][DEBUG_ENABLED] 
https://next-auth.js.org/warnings#debug_enabled
 POST /api/auth/_log 200 in 2472ms
 GET /favicon.ico 200 in 75ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
 GET /api/auth/session 200 in 102ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
 GET /api/users/wifi 200 in 173ms
 GET /api/users/bluetooth 200 in 186ms
(node:2116) [MONGOOSE] Warning: Duplicate schema index on {"userId":1} found. This is often due to declaring an index using both "index: true" and "schema.index()". Please remove the duplicate index definition.
(node:2116) [MONGOOSE] Warning: Duplicate schema index on {"sessionId":1} found. This is often due to declaring an index using both "index: true" and "schema.index()". Please remove the duplicate index definition.
(node:2116) [MONGOOSE] Warning: Duplicate schema index on {"metadata.endTime":1} found. This is often due to declaring an index using both "index: true" and "schema.index()". Please remove the duplicate index definition.
(node:2116) [MONGOOSE] Warning: Duplicate schema index on {"sessionId":1} found. This is often due to declaring an index using both "index: true" and "schema.index()". Please remove the duplicate index definition.
(node:2116) [MONGOOSE] Warning: Duplicate schema index on {"status":1,"severity":-1,"createdAt":-1} found. This is often due to declaring an index using both "index: true" and "schema.index()". Please remove the duplicate index definition.
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
 GET /api/socket-health 200 in 313ms
 GET /api/random-chat/queue 200 in 437ms
 POST /api/users/heartbeat 200 in 556ms
 â—‹ Compiling /api/messages/chats ...
 âœ“ Compiled /api/messages/chats in 1348ms (1416 modules)
=== FRIEND REQUEST GET START ===
[next-auth][warn][DEBUG_ENABLED] 
https://next-auth.js.org/warnings#debug_enabled
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
Request type: received User: sayantan2@gmail.com
âœ… Database connected
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
âœ… Current user found: {
  id: new ObjectId('6901f85f42c5d010fa811206'),
  email: 'sayantan2@gmail.com',
  friendRequestsCount: 0,
  sentRequestsCount: 1
}
Processing received requests...
Raw friendRequests: []
Processed receivedRequests: []
Populating sender details...
Final populated requests: []
=== FRIEND REQUEST GET END (received) ===
 GET /api/friends/request?type=received 200 in 2170ms
 GET /api/users/wifi 200 in 1852ms
 GET /api/users/bluetooth 200 in 1728ms
 GET /api/users/me 200 in 2054ms
 GET /api/socket-health 200 in 73ms
(node:2116) [MONGOOSE] Warning: Duplicate schema index on {"sessionId":1} found. This is often due to declaring an index using both "index: true" and "schema.index()". Please remove the duplicate index definition.
(node:2116) [MONGOOSE] Warning: Duplicate schema index on {"metadata.endTime":1} found. This is often due to declaring an index using both "index: true" and "schema.index()". Please remove the duplicate index definition.
=== FRIEND REQUEST GET START ===
 GET /api/messages/chats 200 in 2457ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
Request type: sent User: sayantan2@gmail.com
âœ… Database connected
âœ… Current user found: {
  id: new ObjectId('6901f85f42c5d010fa811206'),
  email: 'sayantan2@gmail.com',
  friendRequestsCount: 0,
  sentRequestsCount: 1
}
Processing sent requests...
Raw sentRequests: [
  {
    from: new ObjectId('6901f85f42c5d010fa811206'),
    fromName: 'sayantan2',
    to: new ObjectId('6905adf16a22b7843b006183'),
    toName: 'sayantan3',
    status: 'pending',
    _id: new ObjectId('6905cdce14ad0d0f020b3985'),
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
Filtering sent request: { status: 'pending', to: new ObjectId('6905adf16a22b7843b006183') }
Mapping sent request: {
  from: new ObjectId('6901f85f42c5d010fa811206'),
  fromName: 'sayantan2',
  to: new ObjectId('6905adf16a22b7843b006183'),
  toName: 'sayantan3',
  status: 'pending',
  _id: new ObjectId('6905cdce14ad0d0f020b3985'),
  createdAt: 2025-11-01T09:07:26.707Z,
  updatedAt: 2025-11-01T09:07:26.707Z
}
Processed sentRequests: [
  {
    id: '6905cdce14ad0d0f020b3985',
    to: {
      id: '6905adf16a22b7843b006183',
      username: 'sayantan3',
      email: '',
      profilePicture: null
    },
    status: 'pending',
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
Populating recipient details...
Looking up recipient: 6905adf16a22b7843b006183
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
 GET /api/random-chat/session 200 in 781ms
Found recipient: sayantan3
Final populated sent requests: [
  {
    id: '6905cdce14ad0d0f020b3985',
    to: {
      id: '6905adf16a22b7843b006183',
      username: 'sayantan3',
      email: 'sayantan3@gmail.com',
      profilePicture: undefined
    },
    status: 'pending',
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
=== FRIEND REQUEST GET END (sent) ===
 GET /api/friends/request?type=sent 200 in 785ms
 GET /api/users/bluetooth 200 in 713ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
 GET /api/friends 200 in 3131ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
 GET /api/auth/session 200 in 137ms
 POST /api/users/heartbeat 200 in 249ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
 GET /socket.io?EIO=4&transport=polling&t=yjisezuh 404 in 920ms
 GET /socket.io?EIO=4&transport=polling&t=yjkefg71 404 in 921ms
 POST /api/users/heartbeat 200 in 294ms
 GET /api/users/bluetooth 200 in 173ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
(node:2116) [MONGOOSE] Warning: Duplicate schema index on {"userId":1} found. This is often due to declaring an index using both "index: true" and "schema.index()". Please remove the duplicate index definition.
(node:2116) [MONGOOSE] Warning: Duplicate schema index on {"sessionId":1} found. This is often due to declaring an index using both "index: true" and "schema.index()". Please remove the duplicate index definition.
(node:2116) [MONGOOSE] Warning: Duplicate schema index on {"status":1,"severity":-1,"createdAt":-1} found. This is often due to declaring an index using both "index: true" and "schema.index()". Please remove the duplicate index definition.
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
 POST /api/users/heartbeat 200 in 369ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
=== FRIEND REQUEST GET START ===
 GET /api/random-chat/queue 200 in 384ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
Request type: received User: sayantan2@gmail.com
âœ… Database connected
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
 POST /api/users/heartbeat 200 in 426ms
âœ… Current user found: {
  id: new ObjectId('6901f85f42c5d010fa811206'),
  email: 'sayantan2@gmail.com',
  friendRequestsCount: 0,
  sentRequestsCount: 1
}
Processing received requests...
Raw friendRequests: []
Processed receivedRequests: []
Populating sender details...
Final populated requests: []
=== FRIEND REQUEST GET END (received) ===
 GET /api/friends/request?type=received 200 in 359ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
 GET /api/friends 200 in 404ms
=== FRIEND REQUEST GET START ===
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
Request type: sent User: sayantan2@gmail.com
âœ… Database connected
 GET /api/users/me 200 in 349ms
 GET /api/random-chat/session 200 in 133ms
âœ… Current user found: {
  id: new ObjectId('6901f85f42c5d010fa811206'),
  email: 'sayantan2@gmail.com',
  friendRequestsCount: 0,
  sentRequestsCount: 1
}
Processing sent requests...
Raw sentRequests: [
  {
    from: new ObjectId('6901f85f42c5d010fa811206'),
    fromName: 'sayantan2',
    to: new ObjectId('6905adf16a22b7843b006183'),
    toName: 'sayantan3',
    status: 'pending',
    _id: new ObjectId('6905cdce14ad0d0f020b3985'),
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
Filtering sent request: { status: 'pending', to: new ObjectId('6905adf16a22b7843b006183') }
Mapping sent request: {
  from: new ObjectId('6901f85f42c5d010fa811206'),
  fromName: 'sayantan2',
  to: new ObjectId('6905adf16a22b7843b006183'),
  toName: 'sayantan3',
  status: 'pending',
  _id: new ObjectId('6905cdce14ad0d0f020b3985'),
  createdAt: 2025-11-01T09:07:26.707Z,
  updatedAt: 2025-11-01T09:07:26.707Z
}
Processed sentRequests: [
  {
    id: '6905cdce14ad0d0f020b3985',
    to: {
      id: '6905adf16a22b7843b006183',
      username: 'sayantan3',
      email: '',
      profilePicture: null
    },
    status: 'pending',
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
Populating recipient details...
Looking up recipient: 6905adf16a22b7843b006183
Found recipient: sayantan3
Final populated sent requests: [
  {
    id: '6905cdce14ad0d0f020b3985',
    to: {
      id: '6905adf16a22b7843b006183',
      username: 'sayantan3',
      email: 'sayantan3@gmail.com',
      profilePicture: undefined
    },
    status: 'pending',
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
=== FRIEND REQUEST GET END (sent) ===
 GET /api/friends/request?type=sent 200 in 139ms
 GET /api/socket-health 200 in 34ms
 GET /api/socket-health 200 in 119ms
 GET /socket.io?EIO=4&transport=polling&t=yjm4uew4 404 in 210ms
 GET /socket.io?EIO=4&transport=polling&t=yjm88trh 404 in 102ms
 GET /api/socket-health 200 in 52ms
 GET /api/socket-health 200 in 52ms
 GET /socket.io?EIO=4&transport=polling&t=yjnp12wl 404 in 316ms
 GET /socket.io?EIO=4&transport=polling&t=yjnqkgvz 404 in 147ms
 GET /api/socket-health 200 in 34ms
 GET /api/socket-health 200 in 137ms
 GET /socket.io?EIO=4&transport=polling&t=yjp7xxui 404 in 244ms
 GET /socket.io?EIO=4&transport=polling&t=yjpbvwho 404 in 130ms
 GET /api/socket-health 200 in 35ms
 GET /api/socket-health 200 in 57ms
 GET /socket.io?EIO=4&transport=polling&t=yjqre1b9 404 in 315ms
 GET /socket.io?EIO=4&transport=polling&t=yjqsz3ep 404 in 146ms
 GET /api/socket-health 200 in 46ms
 GET /api/socket-health 200 in 167ms
 GET /socket.io?EIO=4&transport=polling&t=yjsbhtyo 404 in 260ms
 GET /socket.io?EIO=4&transport=polling&t=yjsg9nk0 404 in 116ms
 GET /api/socket-health 200 in 52ms
 GET /api/socket-health 200 in 71ms
 GET /socket.io?EIO=4&transport=polling&t=yjtvpuu1 404 in 369ms
 GET /socket.io?EIO=4&transport=polling&t=yjtxsh54 404 in 185ms
 GET /api/socket-health 200 in 37ms
 GET /api/socket-health 200 in 144ms
 GET /socket.io?EIO=4&transport=polling&t=yjve1u7h 404 in 241ms
 GET /socket.io?EIO=4&transport=polling&t=yjvi3vj6 404 in 115ms
 GET /api/socket-health 200 in 29ms
 GET /api/socket-health 200 in 44ms
 GET /socket.io?EIO=4&transport=polling&t=yjwxh7lb 404 in 235ms
 GET /socket.io?EIO=4&transport=polling&t=yjwys44v 404 in 118ms
 GET /api/socket-health 200 in 55ms
 GET /api/socket-health 200 in 49ms
 GET /socket.io?EIO=4&transport=polling&t=yjyhn4dw 404 in 367ms
 GET /socket.io?EIO=4&transport=polling&t=yjyj6s8j 404 in 162ms
 GET /api/socket-health 200 in 38ms
 GET /api/socket-health 200 in 41ms
 GET /socket.io?EIO=4&transport=polling&t=yk014b2l 404 in 222ms
 GET /socket.io?EIO=4&transport=polling&t=yk02be9k 404 in 118ms
 GET /api/socket-health 200 in 64ms
 GET /api/socket-health 200 in 200ms
 GET /socket.io?EIO=4&transport=polling&t=yk1l4wqx 404 in 349ms
 GET /socket.io?EIO=4&transport=polling&t=yk1qu3pf 404 in 172ms
 GET /api/socket-health 200 in 44ms
 GET /api/socket-health 200 in 66ms
 GET /socket.io?EIO=4&transport=polling&t=yk34379j 404 in 207ms
 GET /socket.io?EIO=4&transport=polling&t=yk360ird 404 in 106ms
 GET /api/socket-health 200 in 34ms
 GET /api/socket-health 200 in 113ms
 GET /socket.io?EIO=4&transport=polling&t=yk4nle01 404 in 211ms
 GET /socket.io?EIO=4&transport=polling&t=yk4qti5d 404 in 111ms
 GET /api/socket-health 200 in 79ms
=== FRIEND REQUEST GET START ===
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
Request type: received User: sayantan2@gmail.com
âœ… Database connected
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
âœ… Current user found: {
  id: new ObjectId('6901f85f42c5d010fa811206'),
  email: 'sayantan2@gmail.com',
  friendRequestsCount: 0,
  sentRequestsCount: 1
}
Processing received requests...
Raw friendRequests: []
Processed receivedRequests: []
Populating sender details...
Final populated requests: []
=== FRIEND REQUEST GET END (received) ===
 GET /api/friends/request?type=received 200 in 231ms
 GET /api/socket-health 200 in 189ms
 GET /api/friends 200 in 298ms
=== FRIEND REQUEST GET START ===
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
Request type: sent User: sayantan2@gmail.com
âœ… Database connected
âœ… Current user found: {
  id: new ObjectId('6901f85f42c5d010fa811206'),
  email: 'sayantan2@gmail.com',
  friendRequestsCount: 0,
  sentRequestsCount: 1
}
Processing sent requests...
Raw sentRequests: [
  {
    from: new ObjectId('6901f85f42c5d010fa811206'),
    fromName: 'sayantan2',
    to: new ObjectId('6905adf16a22b7843b006183'),
    toName: 'sayantan3',
    status: 'pending',
    _id: new ObjectId('6905cdce14ad0d0f020b3985'),
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
Filtering sent request: { status: 'pending', to: new ObjectId('6905adf16a22b7843b006183') }
Mapping sent request: {
  from: new ObjectId('6901f85f42c5d010fa811206'),
  fromName: 'sayantan2',
  to: new ObjectId('6905adf16a22b7843b006183'),
  toName: 'sayantan3',
  status: 'pending',
  _id: new ObjectId('6905cdce14ad0d0f020b3985'),
  createdAt: 2025-11-01T09:07:26.707Z,
  updatedAt: 2025-11-01T09:07:26.707Z
}
Processed sentRequests: [
  {
    id: '6905cdce14ad0d0f020b3985',
    to: {
      id: '6905adf16a22b7843b006183',
      username: 'sayantan3',
      email: '',
      profilePicture: null
    },
    status: 'pending',
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
Populating recipient details...
Looking up recipient: 6905adf16a22b7843b006183
 GET /socket.io?EIO=4&transport=polling&t=yk68fzt3 404 in 333ms
 GET /socket.io?EIO=4&transport=polling&t=yk6drswk 404 in 162ms
Found recipient: sayantan3
Final populated sent requests: [
  {
    id: '6905cdce14ad0d0f020b3985',
    to: {
      id: '6905adf16a22b7843b006183',
      username: 'sayantan3',
      email: 'sayantan3@gmail.com',
      profilePicture: undefined
    },
    status: 'pending',
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
=== FRIEND REQUEST GET END (sent) ===
 GET /api/friends/request?type=sent 200 in 209ms
 GET /api/socket-health 200 in 32ms
 GET /api/socket-health 200 in 30ms
 GET /socket.io?EIO=4&transport=polling&t=yk7qm0va 404 in 211ms
 GET /socket.io?EIO=4&transport=polling&t=yk7riusg 404 in 108ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
 POST /api/users/heartbeat 200 in 226ms
 GET /api/socket-health 200 in 85ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
 GET /api/socket-health 200 in 261ms
 GET /api/conversations 200 in 368ms
 GET /socket.io?EIO=4&transport=polling&t=yk9bmxdt 404 in 586ms
 GET /socket.io?EIO=4&transport=polling&t=yk9ixjbr 404 in 116ms
 GET /api/socket-health 200 in 49ms
 GET /api/socket-health 200 in 160ms
 GET /socket.io?EIO=4&transport=polling&t=ykau7ssy 404 in 283ms
 GET /socket.io?EIO=4&transport=polling&t=ykayq2ix 404 in 144ms
 GET /api/socket-health 200 in 29ms
 GET /api/socket-health 200 in 38ms
 GET /socket.io?EIO=4&transport=polling&t=ykcdaw3f 404 in 217ms
 GET /socket.io?EIO=4&transport=polling&t=ykceg8nh 404 in 104ms
 GET /api/socket-health 200 in 40ms
 GET /api/socket-health 200 in 142ms
 GET /socket.io?EIO=4&transport=polling&t=ykdwy48r 404 in 248ms
 GET /socket.io?EIO=4&transport=polling&t=yke13j33 404 in 123ms
 GET /api/socket-health 200 in 41ms
 GET /api/socket-health 200 in 51ms
 GET /socket.io?EIO=4&transport=polling&t=ykfgsuip 404 in 245ms
 GET /socket.io?EIO=4&transport=polling&t=ykfia8ec 404 in 127ms
 GET /api/socket-health 200 in 59ms
 GET /api/socket-health 200 in 64ms
 GET /socket.io?EIO=4&transport=polling&t=ykh0ps96 404 in 374ms
 GET /socket.io?EIO=4&transport=polling&t=ykh2lhsc 404 in 168ms
 GET /api/socket-health 200 in 72ms
 GET /api/socket-health 200 in 76ms
 GET /socket.io?EIO=4&transport=polling&t=ykikpd1o 404 in 372ms
 GET /socket.io?EIO=4&transport=polling&t=ykimy2ik 404 in 148ms
 GET /api/socket-health 200 in 42ms
 GET /api/socket-health 200 in 59ms
 GET /socket.io?EIO=4&transport=polling&t=ykk3dn8l 404 in 255ms
 GET /socket.io?EIO=4&transport=polling&t=ykk52n8b 404 in 127ms
 GET /api/socket-health 200 in 40ms
 GET /api/socket-health 200 in 34ms
 GET /socket.io?EIO=4&transport=polling&t=yklmlgqn 404 in 234ms
 GET /socket.io?EIO=4&transport=polling&t=yklnnns7 404 in 122ms
 GET /api/socket-health 200 in 27ms
 GET /api/socket-health 200 in 115ms
 GET /socket.io?EIO=4&transport=polling&t=ykn63opl 404 in 380ms
 GET /socket.io?EIO=4&transport=polling&t=ykn9l1gs 404 in 274ms
 GET /api/socket-health 200 in 61ms
 GET /api/socket-health 200 in 153ms
 GET /socket.io?EIO=4&transport=polling&t=ykoq8kmz 404 in 271ms
 GET /socket.io?EIO=4&transport=polling&t=ykoukzyw 404 in 142ms
 GET /api/socket-health 200 in 36ms
 GET /api/socket-health 200 in 46ms
 GET /socket.io?EIO=4&transport=polling&t=ykq99wxz 404 in 220ms
 GET /socket.io?EIO=4&transport=polling&t=ykqam09s 404 in 109ms
 GET /api/socket-health 200 in 38ms
 GET /api/socket-health 200 in 115ms
 GET /socket.io?EIO=4&transport=polling&t=ykrstrot 404 in 200ms
 GET /socket.io?EIO=4&transport=polling&t=ykrw2vg1 404 in 99ms
 GET /api/socket-health 200 in 68ms
=== FRIEND REQUEST GET START ===
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
Request type: received User: sayantan2@gmail.com
âœ… Database connected
âœ… Current user found: {
  id: new ObjectId('6901f85f42c5d010fa811206'),
  email: 'sayantan2@gmail.com',
  friendRequestsCount: 0,
  sentRequestsCount: 1
}
Processing received requests...
Raw friendRequests: []
Processed receivedRequests: []
Populating sender details...
Final populated requests: []
=== FRIEND REQUEST GET END (received) ===
 GET /api/friends/request?type=received 200 in 196ms
 GET /api/socket-health 200 in 143ms
 GET /api/friends 200 in 239ms
=== FRIEND REQUEST GET START ===
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
Request type: sent User: sayantan2@gmail.com
âœ… Database connected
 GET /socket.io?EIO=4&transport=polling&t=yktdh082 404 in 241ms
 GET /socket.io?EIO=4&transport=polling&t=ykthkkc5 404 in 121ms
âœ… Current user found: {
  id: new ObjectId('6901f85f42c5d010fa811206'),
  email: 'sayantan2@gmail.com',
  friendRequestsCount: 0,
  sentRequestsCount: 1
}
Processing sent requests...
Raw sentRequests: [
  {
    from: new ObjectId('6901f85f42c5d010fa811206'),
    fromName: 'sayantan2',
    to: new ObjectId('6905adf16a22b7843b006183'),
    toName: 'sayantan3',
    status: 'pending',
    _id: new ObjectId('6905cdce14ad0d0f020b3985'),
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
Filtering sent request: { status: 'pending', to: new ObjectId('6905adf16a22b7843b006183') }
Mapping sent request: {
  from: new ObjectId('6901f85f42c5d010fa811206'),
  fromName: 'sayantan2',
  to: new ObjectId('6905adf16a22b7843b006183'),
  toName: 'sayantan3',
  status: 'pending',
  _id: new ObjectId('6905cdce14ad0d0f020b3985'),
  createdAt: 2025-11-01T09:07:26.707Z,
  updatedAt: 2025-11-01T09:07:26.707Z
}
Processed sentRequests: [
  {
    id: '6905cdce14ad0d0f020b3985',
    to: {
      id: '6905adf16a22b7843b006183',
      username: 'sayantan3',
      email: '',
      profilePicture: null
    },
    status: 'pending',
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
Populating recipient details...
Looking up recipient: 6905adf16a22b7843b006183
Found recipient: sayantan3
Final populated sent requests: [
  {
    id: '6905cdce14ad0d0f020b3985',
    to: {
      id: '6905adf16a22b7843b006183',
      username: 'sayantan3',
      email: 'sayantan3@gmail.com',
      profilePicture: undefined
    },
    status: 'pending',
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
=== FRIEND REQUEST GET END (sent) ===
 GET /api/friends/request?type=sent 200 in 201ms
 GET /api/socket-health 200 in 72ms
 GET /api/socket-health 200 in 276ms
 GET /socket.io?EIO=4&transport=polling&t=ykuz8cul 404 in 353ms
 GET /socket.io?EIO=4&transport=polling&t=ykv6zfsk 404 in 132ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
 POST /api/users/heartbeat 200 in 176ms
 GET /api/socket-health 200 in 39ms
 GET /api/socket-health 200 in 111ms
 GET /socket.io?EIO=4&transport=polling&t=ykwfeu6o 404 in 191ms
 GET /socket.io?EIO=4&transport=polling&t=ykwijfjs 404 in 96ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
 GET /api/conversations 200 in 114ms
 GET /api/socket-health 200 in 35ms
 GET /api/socket-health 200 in 106ms
 GET /socket.io?EIO=4&transport=polling&t=ykxz089g 404 in 197ms
 GET /socket.io?EIO=4&transport=polling&t=yky20bnr 404 in 103ms
 GET /api/socket-health 200 in 28ms
 GET /api/socket-health 200 in 36ms
 GET /socket.io?EIO=4&transport=polling&t=ykzi8qhn 404 in 365ms
 GET /socket.io?EIO=4&transport=polling&t=ykzjblhs 404 in 258ms
 GET /api/socket-health 200 in 73ms
 GET /api/socket-health 200 in 146ms
 GET /socket.io?EIO=4&transport=polling&t=yl136uuj 404 in 169ms
 GET /socket.io?EIO=4&transport=polling&t=yl17emj0 404 in 143ms
 GET /api/socket-health 200 in 30ms
 GET /api/socket-health 200 in 41ms
 GET /socket.io?EIO=4&transport=polling&t=yl2lmxra 404 in 246ms
 GET /socket.io?EIO=4&transport=polling&t=yl2mtcqy 404 in 126ms
 GET /api/socket-health 200 in 49ms
 GET /api/socket-health 200 in 49ms
 GET /socket.io?EIO=4&transport=polling&t=yl45l0d0 404 in 385ms
 GET /socket.io?EIO=4&transport=polling&t=yl470kw2 404 in 233ms
 GET /api/socket-health 200 in 58ms
 GET /api/socket-health 200 in 71ms
 GET /socket.io?EIO=4&transport=polling&t=yl5ple5v 404 in 382ms
 GET /socket.io?EIO=4&transport=polling&t=yl5rmml2 404 in 201ms
 GET /api/socket-health 200 in 62ms
 GET /api/socket-health 200 in 57ms
 GET /socket.io?EIO=4&transport=polling&t=yl79otsn 404 in 409ms
 GET /socket.io?EIO=4&transport=polling&t=yl7bb1c4 404 in 219ms
 GET /api/socket-health 200 in 29ms
 GET /api/socket-health 200 in 104ms
 GET /socket.io?EIO=4&transport=polling&t=yl8runge 404 in 190ms
 GET /socket.io?EIO=4&transport=polling&t=yl8uso8v 404 in 102ms
 GET /api/socket-health 200 in 26ms
 GET /api/socket-health 200 in 29ms
 GET /socket.io?EIO=4&transport=polling&t=ylab8p9z 404 in 200ms
 GET /socket.io?EIO=4&transport=polling&t=ylac2593 404 in 107ms
 GET /api/socket-health 200 in 33ms
 GET /api/socket-health 200 in 36ms
 GET /socket.io?EIO=4&transport=polling&t=ylbv85f5 404 in 203ms
 GET /socket.io?EIO=4&transport=polling&t=ylbwawo3 404 in 104ms
 GET /api/socket-health 200 in 24ms
 GET /api/socket-health 200 in 29ms
 GET /socket.io?EIO=4&transport=polling&t=yldei3w3 404 in 212ms
 GET /socket.io?EIO=4&transport=polling&t=yldfd49z 404 in 110ms
 GET /api/socket-health 200 in 27ms
 GET /api/socket-health 200 in 124ms
 GET /socket.io?EIO=4&transport=polling&t=yley3yqa 404 in 205ms
 GET /socket.io?EIO=4&transport=polling&t=ylf1mppo 404 in 101ms
 GET /api/socket-health 200 in 56ms
=== FRIEND REQUEST GET START ===
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
Request type: received User: sayantan2@gmail.com
âœ… Database connected
âœ… Current user found: {
  id: new ObjectId('6901f85f42c5d010fa811206'),
  email: 'sayantan2@gmail.com',
  friendRequestsCount: 0,
  sentRequestsCount: 1
}
Processing received requests...
Raw friendRequests: []
Processed receivedRequests: []
Populating sender details...
Final populated requests: []
=== FRIEND REQUEST GET END (received) ===
 GET /api/friends/request?type=received 200 in 203ms
 GET /api/friends 200 in 233ms
 GET /api/socket-health 200 in 210ms
 GET /socket.io?EIO=4&transport=polling&t=ylgiii15 404 in 216ms
=== FRIEND REQUEST GET START ===
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
Request type: sent User: sayantan2@gmail.com
âœ… Database connected
âœ… Current user found: {
  id: new ObjectId('6901f85f42c5d010fa811206'),
  email: 'sayantan2@gmail.com',
  friendRequestsCount: 0,
  sentRequestsCount: 1
}
Processing sent requests...
Raw sentRequests: [
  {
    from: new ObjectId('6901f85f42c5d010fa811206'),
    fromName: 'sayantan2',
    to: new ObjectId('6905adf16a22b7843b006183'),
    toName: 'sayantan3',
    status: 'pending',
    _id: new ObjectId('6905cdce14ad0d0f020b3985'),
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
Filtering sent request: { status: 'pending', to: new ObjectId('6905adf16a22b7843b006183') }
Mapping sent request: {
  from: new ObjectId('6901f85f42c5d010fa811206'),
  fromName: 'sayantan2',
  to: new ObjectId('6905adf16a22b7843b006183'),
  toName: 'sayantan3',
  status: 'pending',
  _id: new ObjectId('6905cdce14ad0d0f020b3985'),
  createdAt: 2025-11-01T09:07:26.707Z,
  updatedAt: 2025-11-01T09:07:26.707Z
}
Processed sentRequests: [
  {
    id: '6905cdce14ad0d0f020b3985',
    to: {
      id: '6905adf16a22b7843b006183',
      username: 'sayantan3',
      email: '',
      profilePicture: null
    },
    status: 'pending',
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
Populating recipient details...
Looking up recipient: 6905adf16a22b7843b006183
 GET /socket.io?EIO=4&transport=polling&t=ylgpqdmr 404 in 146ms
Found recipient: sayantan3
Final populated sent requests: [
  {
    id: '6905cdce14ad0d0f020b3985',
    to: {
      id: '6905adf16a22b7843b006183',
      username: 'sayantan3',
      email: 'sayantan3@gmail.com',
      profilePicture: undefined
    },
    status: 'pending',
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
=== FRIEND REQUEST GET END (sent) ===
 GET /api/friends/request?type=sent 200 in 230ms
 GET /api/socket-health 200 in 41ms
 GET /api/socket-health 200 in 152ms
 GET /socket.io?EIO=4&transport=polling&t=yli1f1xp 404 in 256ms
 GET /socket.io?EIO=4&transport=polling&t=yli5r0vi 404 in 130ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
 POST /api/users/heartbeat 200 in 177ms
 GET /api/socket-health 200 in 47ms
 GET /api/socket-health 200 in 134ms
 GET /socket.io?EIO=4&transport=polling&t=yljl5w7i 404 in 237ms
 GET /socket.io?EIO=4&transport=polling&t=yljp0ipl 404 in 114ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
 GET /api/socket-health 200 in 98ms
 GET /api/conversations 200 in 224ms
 GET /api/socket-health 200 in 145ms
 GET /socket.io?EIO=4&transport=polling&t=yll62fpi 404 in 265ms
 GET /socket.io?EIO=4&transport=polling&t=ylla7u32 404 in 141ms
 GET /api/socket-health 200 in 39ms
 GET /api/socket-health 200 in 48ms
 GET /socket.io?EIO=4&transport=polling&t=ylmnyf8q 404 in 253ms
 GET /socket.io?EIO=4&transport=polling&t=ylmpd9kt 404 in 130ms
 GET /api/socket-health 200 in 50ms
 GET /api/socket-health 200 in 39ms
 GET /socket.io?EIO=4&transport=polling&t=ylo7zm7t 404 in 263ms
 GET /socket.io?EIO=4&transport=polling&t=ylo95jj0 404 in 129ms
 GET /api/socket-health 200 in 45ms
 GET /api/socket-health 200 in 149ms
 GET /socket.io?EIO=4&transport=polling&t=ylprgxif 404 in 253ms
 GET /socket.io?EIO=4&transport=polling&t=ylpvqoeu 404 in 124ms
 GET /api/socket-health 200 in 47ms
 GET /api/socket-health 200 in 144ms
 GET /socket.io?EIO=4&transport=polling&t=ylrb6zl3 404 in 252ms
 GET /socket.io?EIO=4&transport=polling&t=ylrf9y74 404 in 131ms
 GET /api/socket-health 200 in 48ms
 GET /api/socket-health 200 in 172ms
 GET /socket.io?EIO=4&transport=polling&t=ylsufmjm 404 in 322ms
 GET /socket.io?EIO=4&transport=polling&t=ylszabp4 404 in 183ms
 GET /api/socket-health 200 in 76ms
 GET /api/socket-health 200 in 88ms
 GET /socket.io?EIO=4&transport=polling&t=yluf4jif 404 in 387ms
 GET /socket.io?EIO=4&transport=polling&t=yluhniyq 404 in 195ms
 GET /api/socket-health 200 in 70ms
 GET /api/socket-health 200 in 91ms
 GET /socket.io?EIO=4&transport=polling&t=ylvymrf5 404 in 400ms
 GET /socket.io?EIO=4&transport=polling&t=ylw18ea2 404 in 202ms
 GET /api/socket-health 200 in 44ms
 GET /api/socket-health 200 in 190ms
 GET /socket.io?EIO=4&transport=polling&t=ylxhhout 404 in 334ms
 GET /socket.io?EIO=4&transport=polling&t=ylxmwmm7 404 in 154ms
 GET /api/socket-health 200 in 39ms
 GET /api/socket-health 200 in 175ms
 GET /socket.io?EIO=4&transport=polling&t=ylz0lbxz 404 in 308ms
 GET /socket.io?EIO=4&transport=polling&t=ylz5mvoh 404 in 158ms
 GET /api/socket-health 200 in 39ms
 GET /api/socket-health 200 in 53ms
 GET /socket.io?EIO=4&transport=polling&t=ym0k80jj 404 in 932ms
 GET /socket.io?EIO=4&transport=polling&t=ym0ltvhx 404 in 679ms
 GET /api/socket-health 200 in 35ms
 GET /api/socket-health 200 in 156ms
 GET /socket.io?EIO=4&transport=polling&t=ym2vctce 404 in 247ms
 GET /socket.io?EIO=4&transport=polling&t=ym2zrvsf 404 in 122ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
=== FRIEND REQUEST GET START ===
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
Request type: received User: sayantan2@gmail.com
âœ… Database connected
 GET /api/friends 200 in 168ms
âœ… Current user found: {
  id: new ObjectId('6901f85f42c5d010fa811206'),
  email: 'sayantan2@gmail.com',
  friendRequestsCount: 0,
  sentRequestsCount: 1
}
Processing received requests...
Raw friendRequests: []
Processed receivedRequests: []
Populating sender details...
Final populated requests: []
=== FRIEND REQUEST GET END (received) ===
 GET /api/friends/request?type=received 200 in 176ms
=== FRIEND REQUEST GET START ===
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
Request type: sent User: sayantan2@gmail.com
âœ… Database connected
âœ… Current user found: {
  id: new ObjectId('6901f85f42c5d010fa811206'),
  email: 'sayantan2@gmail.com',
  friendRequestsCount: 0,
  sentRequestsCount: 1
}
Processing sent requests...
Raw sentRequests: [
  {
    from: new ObjectId('6901f85f42c5d010fa811206'),
    fromName: 'sayantan2',
    to: new ObjectId('6905adf16a22b7843b006183'),
    toName: 'sayantan3',
    status: 'pending',
    _id: new ObjectId('6905cdce14ad0d0f020b3985'),
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
Filtering sent request: { status: 'pending', to: new ObjectId('6905adf16a22b7843b006183') }
Mapping sent request: {
  from: new ObjectId('6901f85f42c5d010fa811206'),
  fromName: 'sayantan2',
  to: new ObjectId('6905adf16a22b7843b006183'),
  toName: 'sayantan3',
  status: 'pending',
  _id: new ObjectId('6905cdce14ad0d0f020b3985'),
  createdAt: 2025-11-01T09:07:26.707Z,
  updatedAt: 2025-11-01T09:07:26.707Z
}
Processed sentRequests: [
  {
    id: '6905cdce14ad0d0f020b3985',
    to: {
      id: '6905adf16a22b7843b006183',
      username: 'sayantan3',
      email: '',
      profilePicture: null
    },
    status: 'pending',
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
Populating recipient details...
Looking up recipient: 6905adf16a22b7843b006183
Found recipient: sayantan3
Final populated sent requests: [
  {
    id: '6905cdce14ad0d0f020b3985',
    to: {
      id: '6905adf16a22b7843b006183',
      username: 'sayantan3',
      email: 'sayantan3@gmail.com',
      profilePicture: undefined
    },
    status: 'pending',
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
=== FRIEND REQUEST GET END (sent) ===
 GET /api/friends/request?type=sent 200 in 132ms
 GET /api/socket-health 200 in 39ms
 GET /api/socket-health 200 in 136ms
 GET /socket.io?EIO=4&transport=polling&t=ym4ett1w 404 in 243ms
 GET /socket.io?EIO=4&transport=polling&t=ym4j2mh2 404 in 122ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
 GET /api/socket-health 200 in 82ms
 GET /api/socket-health 200 in 40ms
 POST /api/users/heartbeat 200 in 323ms
 GET /socket.io?EIO=4&transport=polling&t=ym5zsl9v 404 in 255ms
 GET /socket.io?EIO=4&transport=polling&t=ym6105m2 404 in 128ms
 GET /api/socket-health 200 in 50ms
 GET /api/socket-health 200 in 60ms
 GET /socket.io?EIO=4&transport=polling&t=ym7ibxjx 404 in 262ms
 GET /socket.io?EIO=4&transport=polling&t=ym7k3ytc 404 in 146ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
 GET /api/socket-health 200 in 146ms
 GET /api/socket-health 200 in 90ms
 GET /api/conversations 200 in 251ms
 GET /socket.io?EIO=4&transport=polling&t=ym94pfng 404 in 525ms
 GET /socket.io?EIO=4&transport=polling&t=ym97dkdv 404 in 257ms
 GET /api/socket-health 200 in 52ms
 GET /api/socket-health 200 in 162ms
 GET /socket.io?EIO=4&transport=polling&t=ymalp9cs 404 in 266ms
 GET /socket.io?EIO=4&transport=polling&t=ymaqf4pa 404 in 124ms
 GET /api/socket-health 200 in 37ms
 GET /api/socket-health 200 in 51ms
 GET /socket.io?EIO=4&transport=polling&t=ymc4j9cd 404 in 253ms
 GET /socket.io?EIO=4&transport=polling&t=ymc60cd4 404 in 126ms
 GET /api/socket-health 200 in 49ms
 GET /api/socket-health 200 in 47ms
 GET /socket.io?EIO=4&transport=polling&t=ymdoc6qn 404 in 266ms
 GET /socket.io?EIO=4&transport=polling&t=ymdpq1w3 404 in 131ms
 GET /api/socket-health 200 in 48ms
 GET /api/socket-health 200 in 171ms
 GET /socket.io?EIO=4&transport=polling&t=ymf8dqm8 404 in 305ms
 GET /socket.io?EIO=4&transport=polling&t=ymfd76uh 404 in 202ms
 GET /api/socket-health 200 in 49ms
 GET /api/socket-health 200 in 58ms
 GET /socket.io?EIO=4&transport=polling&t=ymgrnc29 404 in 457ms
 GET /socket.io?EIO=4&transport=polling&t=ymgtb659 404 in 132ms
 GET /api/socket-health 200 in 34ms
 GET /api/socket-health 200 in 49ms
 GET /socket.io?EIO=4&transport=polling&t=ymiaodz3 404 in 247ms
 GET /socket.io?EIO=4&transport=polling&t=ymic4a59 404 in 113ms
 GET /api/socket-health 200 in 30ms
 GET /api/socket-health 200 in 157ms
 GET /socket.io?EIO=4&transport=polling&t=ymjugdvv 404 in 257ms
 GET /socket.io?EIO=4&transport=polling&t=ymjyvt27 404 in 114ms
 GET /api/socket-health 200 in 34ms
 GET /api/socket-health 200 in 34ms
 GET /socket.io?EIO=4&transport=polling&t=ymldti5d 404 in 229ms
 GET /socket.io?EIO=4&transport=polling&t=ymleu65u 404 in 114ms
 GET /api/socket-health 200 in 28ms
 GET /api/socket-health 200 in 103ms
 GET /socket.io?EIO=4&transport=polling&t=ymmxa5f4 404 in 189ms
 GET /socket.io?EIO=4&transport=polling&t=ymn08h13 404 in 96ms
 GET /api/socket-health 200 in 31ms
 GET /api/socket-health 200 in 35ms
 GET /socket.io?EIO=4&transport=polling&t=ymogsmnr 404 in 204ms
 GET /socket.io?EIO=4&transport=polling&t=ymohs6hx 404 in 102ms
 GET /api/socket-health 200 in 53ms
 GET /api/socket-health 200 in 208ms
 GET /socket.io?EIO=4&transport=polling&t=ymq10i10 404 in 330ms
 GET /socket.io?EIO=4&transport=polling&t=ymq6y7oo 404 in 129ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
=== FRIEND REQUEST GET START ===
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
Request type: received User: sayantan2@gmail.com
âœ… Database connected
âœ… Current user found: {
  id: new ObjectId('6901f85f42c5d010fa811206'),
  email: 'sayantan2@gmail.com',
  friendRequestsCount: 0,
  sentRequestsCount: 1
}
Processing received requests...
Raw friendRequests: []
Processed receivedRequests: []
Populating sender details...
Final populated requests: []
=== FRIEND REQUEST GET END (received) ===
 GET /api/friends/request?type=received 200 in 211ms
=== FRIEND REQUEST GET START ===
 GET /api/friends 200 in 259ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
Request type: sent User: sayantan2@gmail.com
âœ… Database connected
âœ… Current user found: {
  id: new ObjectId('6901f85f42c5d010fa811206'),
  email: 'sayantan2@gmail.com',
  friendRequestsCount: 0,
  sentRequestsCount: 1
}
Processing sent requests...
Raw sentRequests: [
  {
    from: new ObjectId('6901f85f42c5d010fa811206'),
    fromName: 'sayantan2',
    to: new ObjectId('6905adf16a22b7843b006183'),
    toName: 'sayantan3',
    status: 'pending',
    _id: new ObjectId('6905cdce14ad0d0f020b3985'),
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
Filtering sent request: { status: 'pending', to: new ObjectId('6905adf16a22b7843b006183') }
Mapping sent request: {
  from: new ObjectId('6901f85f42c5d010fa811206'),
  fromName: 'sayantan2',
  to: new ObjectId('6905adf16a22b7843b006183'),
  toName: 'sayantan3',
  status: 'pending',
  _id: new ObjectId('6905cdce14ad0d0f020b3985'),
  createdAt: 2025-11-01T09:07:26.707Z,
  updatedAt: 2025-11-01T09:07:26.707Z
}
Processed sentRequests: [
  {
    id: '6905cdce14ad0d0f020b3985',
    to: {
      id: '6905adf16a22b7843b006183',
      username: 'sayantan3',
      email: '',
      profilePicture: null
    },
    status: 'pending',
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
Populating recipient details...
Looking up recipient: 6905adf16a22b7843b006183
Found recipient: sayantan3
Final populated sent requests: [
  {
    id: '6905cdce14ad0d0f020b3985',
    to: {
      id: '6905adf16a22b7843b006183',
      username: 'sayantan3',
      email: 'sayantan3@gmail.com',
      profilePicture: undefined
    },
    status: 'pending',
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
=== FRIEND REQUEST GET END (sent) ===
 GET /api/friends/request?type=sent 200 in 138ms
 GET /api/socket-health 200 in 50ms
 GET /api/socket-health 200 in 51ms
 GET /socket.io?EIO=4&transport=polling&t=ymrkr9fh 404 in 249ms
 GET /socket.io?EIO=4&transport=polling&t=ymrm7ila 404 in 128ms
 GET /api/socket-health 200 in 80ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
 GET /api/socket-health 200 in 181ms
 POST /api/users/heartbeat 200 in 422ms
 GET /socket.io?EIO=4&transport=polling&t=ymt4unmi 404 in 309ms
 GET /socket.io?EIO=4&transport=polling&t=ymtac3jm 404 in 170ms
 GET /api/socket-health 200 in 33ms
 GET /api/socket-health 200 in 48ms
 GET /socket.io?EIO=4&transport=polling&t=ymunbxa6 404 in 278ms
 GET /socket.io?EIO=4&transport=polling&t=ymuopwb2 404 in 146ms
 GET /api/socket-health 200 in 39ms
 GET /api/socket-health 200 in 37ms
 GET /socket.io?EIO=4&transport=polling&t=ymw6xgxg 404 in 228ms
 GET /socket.io?EIO=4&transport=polling&t=ymw7z1tk 404 in 112ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
 GET /api/conversations 200 in 166ms
 GET /api/socket-health 200 in 35ms
 GET /api/socket-health 200 in 130ms
 GET /socket.io?EIO=4&transport=polling&t=ymxqxlpb 404 in 229ms
 GET /socket.io?EIO=4&transport=polling&t=ymxunmse 404 in 111ms
 GET /api/socket-health 200 in 32ms
 GET /api/socket-health 200 in 120ms
 GET /socket.io?EIO=4&transport=polling&t=ymz9pvvc 404 in 210ms
 GET /socket.io?EIO=4&transport=polling&t=ymzd4v3r 404 in 104ms
 GET /api/socket-health 200 in 61ms
 GET /api/socket-health 200 in 57ms
 GET /socket.io?EIO=4&transport=polling&t=yn0u6h3m 404 in 283ms
 GET /socket.io?EIO=4&transport=polling&t=yn0vvcn0 404 in 156ms
 GET /api/socket-health 200 in 42ms
 GET /api/socket-health 200 in 149ms
 GET /socket.io?EIO=4&transport=polling&t=yn2d66z9 404 in 237ms
 GET /socket.io?EIO=4&transport=polling&t=yn2hc7j0 404 in 115ms
 GET /api/socket-health 200 in 50ms
 GET /api/socket-health 200 in 64ms
 GET /socket.io?EIO=4&transport=polling&t=yn3xb68u 404 in 351ms
 GET /socket.io?EIO=4&transport=polling&t=yn3z7wzj 404 in 173ms
 GET /api/socket-health 200 in 63ms
 GET /api/socket-health 200 in 224ms
 GET /socket.io?EIO=4&transport=polling&t=yn5h8e52 404 in 1667ms
 GET /socket.io?EIO=4&transport=polling&t=yn5t3bat 404 in 229ms
 GET /api/socket-health 200 in 61ms
 GET /api/socket-health 200 in 76ms
 GET /socket.io?EIO=4&transport=polling&t=yn7s7hh6 404 in 393ms
 GET /socket.io?EIO=4&transport=polling&t=yn7ugrfj 404 in 194ms
 GET /api/socket-health 200 in 81ms
 GET /api/socket-health 200 in 364ms
 GET /socket.io?EIO=4&transport=polling&t=yn9c9m7e 404 in 603ms
 GET /socket.io?EIO=4&transport=polling&t=yn9mgt44 404 in 324ms
 GET /api/socket-health 200 in 163ms
 GET /api/socket-health 200 in 172ms
 GET /socket.io?EIO=4&transport=polling&t=ynb1ox8t 404 in 646ms
 GET /socket.io?EIO=4&transport=polling&t=ynb3vq5t 404 in 371ms
 GET /api/socket-health 200 in 167ms
 GET /api/socket-health 200 in 275ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
=== FRIEND REQUEST GET START ===
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
Request type: received User: sayantan2@gmail.com
âœ… Database connected
 GET /socket.io?EIO=4&transport=polling&t=yndcgf93 404 in 1369ms
 GET /api/friends 200 in 693ms
 GET /socket.io?EIO=4&transport=polling&t=yndiqcvc 404 in 1052ms
âœ… Current user found: {
  id: new ObjectId('6901f85f42c5d010fa811206'),
  email: 'sayantan2@gmail.com',
  friendRequestsCount: 0,
  sentRequestsCount: 1
}
Processing received requests...
Raw friendRequests: []
Processed receivedRequests: []
Populating sender details...
Final populated requests: []
=== FRIEND REQUEST GET END (received) ===
 GET /api/friends/request?type=received 200 in 1036ms
=== FRIEND REQUEST GET START ===
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
Request type: sent User: sayantan2@gmail.com
âœ… Database connected
âœ… Current user found: {
  id: new ObjectId('6901f85f42c5d010fa811206'),
  email: 'sayantan2@gmail.com',
  friendRequestsCount: 0,
  sentRequestsCount: 1
}
Processing sent requests...
Raw sentRequests: [
  {
    from: new ObjectId('6901f85f42c5d010fa811206'),
    fromName: 'sayantan2',
    to: new ObjectId('6905adf16a22b7843b006183'),
    toName: 'sayantan3',
    status: 'pending',
    _id: new ObjectId('6905cdce14ad0d0f020b3985'),
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
Filtering sent request: { status: 'pending', to: new ObjectId('6905adf16a22b7843b006183') }
Mapping sent request: {
  from: new ObjectId('6901f85f42c5d010fa811206'),
  fromName: 'sayantan2',
  to: new ObjectId('6905adf16a22b7843b006183'),
  toName: 'sayantan3',
  status: 'pending',
  _id: new ObjectId('6905cdce14ad0d0f020b3985'),
  createdAt: 2025-11-01T09:07:26.707Z,
  updatedAt: 2025-11-01T09:07:26.707Z
}
Processed sentRequests: [
  {
    id: '6905cdce14ad0d0f020b3985',
    to: {
      id: '6905adf16a22b7843b006183',
      username: 'sayantan3',
      email: '',
      profilePicture: null
    },
    status: 'pending',
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
Populating recipient details...
Looking up recipient: 6905adf16a22b7843b006183
Found recipient: sayantan3
Final populated sent requests: [
  {
    id: '6905cdce14ad0d0f020b3985',
    to: {
      id: '6905adf16a22b7843b006183',
      username: 'sayantan3',
      email: 'sayantan3@gmail.com',
      profilePicture: undefined
    },
    status: 'pending',
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
=== FRIEND REQUEST GET END (sent) ===
 GET /api/friends/request?type=sent 200 in 216ms
 GET /api/socket-health 200 in 237ms
 GET /api/socket-health 200 in 173ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
 GET /socket.io?EIO=4&transport=polling&t=ynfov03n 404 in 938ms
 GET /socket.io?EIO=4&transport=polling&t=ynfuej41 404 in 566ms
 POST /api/users/heartbeat 200 in 304ms
 GET /api/socket-health 200 in 136ms
 GET /api/socket-health 200 in 115ms
 GET /socket.io?EIO=4&transport=polling&t=ynhvo8f2 404 in 774ms
 GET /socket.io?EIO=4&transport=polling&t=ynhzbywh 404 in 498ms
 GET /api/socket-health 200 in 101ms
 GET /api/socket-health 200 in 154ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
 GET /socket.io?EIO=4&transport=polling&t=ynk5ukdz 404 in 1385ms
 GET /socket.io?EIO=4&transport=polling&t=ynkacn8x 404 in 1017ms
 GET /api/conversations 200 in 362ms
 GET /api/socket-health 200 in 93ms
 GET /api/socket-health 200 in 124ms
 GET /socket.io?EIO=4&transport=polling&t=ynmh3qcw 404 in 839ms
 GET /socket.io?EIO=4&transport=polling&t=ynmkjnij 404 in 406ms
 GET /api/socket-health 200 in 182ms
 GET /api/socket-health 200 in 188ms
 GET /socket.io?EIO=4&transport=polling&t=ynovizjg 404 in 6236ms
 GET /socket.io?EIO=4&transport=polling&t=ynp15qwr 404 in 6117ms
 GET /api/socket-health 200 in 633ms
 GET /api/socket-health 200 in 140ms
 GET /socket.io?EIO=4&transport=polling&t=ynwj8611 404 in 824ms
 GET /socket.io?EIO=4&transport=polling&t=ynwjiw27 404 in 821ms
 GET /api/socket-health 200 in 82ms
 GET /api/socket-health 200 in 92ms
 GET /socket.io?EIO=4&transport=polling&t=ynyt0qf6 404 in 504ms
 GET /socket.io?EIO=4&transport=polling&t=ynyvq8co 404 in 330ms
 GET /api/socket-health 200 in 84ms
 GET /api/socket-health 200 in 296ms
 GET /socket.io?EIO=4&transport=polling&t=yo0cub8d 404 in 301ms
 GET /socket.io?EIO=4&transport=polling&t=yo0l4o5e 404 in 215ms
 GET /api/socket-health 200 in 182ms
 GET /api/socket-health 200 in 118ms
 GET /socket.io?EIO=4&transport=polling&t=yo220i2o 404 in 871ms
=== FRIEND REQUEST GET START ===
 GET /socket.io?EIO=4&transport=polling&t=yo24sulv 404 in 669ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
Request type: received User: sayantan2@gmail.com
âœ… Database connected
âœ… Current user found: {
  id: new ObjectId('6901f85f42c5d010fa811206'),
  email: 'sayantan2@gmail.com',
  friendRequestsCount: 0,
  sentRequestsCount: 1
}
Processing received requests...
Raw friendRequests: []
Processed receivedRequests: []
Populating sender details...
Final populated requests: []
=== FRIEND REQUEST GET END (received) ===
 GET /api/friends/request?type=received 200 in 136ms
=== FRIEND REQUEST GET START ===
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
Request type: sent User: sayantan2@gmail.com
âœ… Database connected
âœ… Current user found: {
  id: new ObjectId('6901f85f42c5d010fa811206'),
  email: 'sayantan2@gmail.com',
  friendRequestsCount: 0,
  sentRequestsCount: 1
}
Processing sent requests...
Raw sentRequests: [
  {
    from: new ObjectId('6901f85f42c5d010fa811206'),
    fromName: 'sayantan2',
    to: new ObjectId('6905adf16a22b7843b006183'),
    toName: 'sayantan3',
    status: 'pending',
    _id: new ObjectId('6905cdce14ad0d0f020b3985'),
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
Filtering sent request: { status: 'pending', to: new ObjectId('6905adf16a22b7843b006183') }
Mapping sent request: {
  from: new ObjectId('6901f85f42c5d010fa811206'),
  fromName: 'sayantan2',
  to: new ObjectId('6905adf16a22b7843b006183'),
  toName: 'sayantan3',
  status: 'pending',
  _id: new ObjectId('6905cdce14ad0d0f020b3985'),
  createdAt: 2025-11-01T09:07:26.707Z,
  updatedAt: 2025-11-01T09:07:26.707Z
}
Processed sentRequests: [
  {
    id: '6905cdce14ad0d0f020b3985',
    to: {
      id: '6905adf16a22b7843b006183',
      username: 'sayantan3',
      email: '',
      profilePicture: null
    },
    status: 'pending',
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
Populating recipient details...
Looking up recipient: 6905adf16a22b7843b006183
Found recipient: sayantan3
Final populated sent requests: [
  {
    id: '6905cdce14ad0d0f020b3985',
    to: {
      id: '6905adf16a22b7843b006183',
      username: 'sayantan3',
      email: 'sayantan3@gmail.com',
      profilePicture: undefined
    },
    status: 'pending',
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
=== FRIEND REQUEST GET END (sent) ===
 GET /api/friends/request?type=sent 200 in 168ms
 GET /api/socket-health 200 in 93ms
 GET /api/socket-health 200 in 288ms
 GET /socket.io?EIO=4&transport=polling&t=yo4829z7 404 in 283ms
 GET /socket.io?EIO=4&transport=polling&t=yo4gewk6 404 in 203ms
 GET /api/socket-health 200 in 80ms
 GET /api/socket-health 200 in 272ms
 GET /socket.io?EIO=4&transport=polling&t=yo5r4riu 404 in 285ms
 GET /socket.io?EIO=4&transport=polling&t=yo5yx66k 404 in 255ms
 GET /api/socket-health 200 in 96ms
 GET /api/socket-health 200 in 412ms
 GET /socket.io?EIO=4&transport=polling&t=yo7b51kt 404 in 558ms
 GET /socket.io?EIO=4&transport=polling&t=yo7n5cg1 404 in 499ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
 GET /api/socket-health 200 in 326ms
 GET /api/conversations 200 in 636ms
 GET /socket.io?EIO=4&transport=polling&t=yo927w8r 404 in 260ms
 GET /api/socket-health 200 in 137ms
 GET /socket.io?EIO=4&transport=polling&t=yo9p5hdf 404 in 272ms
 GET /api/socket-health 200 in 66ms
 GET /socket.io?EIO=4&transport=polling&t=yoadcyri 404 in 255ms
 GET /api/socket-health 200 in 153ms
 GET /socket.io?EIO=4&transport=polling&t=yob8thib 404 in 467ms
 GET /api/socket-health 200 in 201ms
 GET /socket.io?EIO=4&transport=polling&t=yoc2jtt7 404 in 372ms
 GET /api/socket-health 200 in 320ms
 GET /socket.io?EIO=4&transport=polling&t=yocxz7xs 404 in 364ms
 GET /api/socket-health 200 in 223ms
 GET /socket.io?EIO=4&transport=polling&t=yodm8s0z 404 in 316ms
 GET /api/socket-health 200 in 118ms
 GET /socket.io?EIO=4&transport=polling&t=yoe9tf51 404 in 264ms
 GET /api/socket-health 200 in 69ms
 GET /socket.io?EIO=4&transport=polling&t=yof02c5z 404 in 469ms
 GET /api/socket-health 200 in 227ms
 GET /api/socket-health 200 in 238ms
 GET /socket.io?EIO=4&transport=polling&t=yofwyign 404 in 1146ms
 GET /socket.io?EIO=4&transport=polling&t=yogtarwb 404 in 305ms
 GET /api/socket-health 200 in 66ms
 GET /api/socket-health 200 in 131ms
 GET /socket.io?EIO=4&transport=polling&t=yoi38lsj 404 in 487ms
 GET /socket.io?EIO=4&transport=polling&t=yoi6znxw 404 in 245ms
 GET /api/socket-health 200 in 63ms
 GET /api/socket-health 200 in 273ms
 GET /socket.io?EIO=4&transport=polling&t=yojmgi4o 404 in 529ms
 GET /socket.io?EIO=4&transport=polling&t=yoju4xgy 404 in 285ms
 GET /api/socket-health 200 in 527ms
 GET /api/socket-health 200 in 171ms
=== FRIEND REQUEST GET START ===
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
Request type: received User: sayantan2@gmail.com
âœ… Database connected
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
âœ… Current user found: {
  id: new ObjectId('6901f85f42c5d010fa811206'),
  email: 'sayantan2@gmail.com',
  friendRequestsCount: 0,
  sentRequestsCount: 1
}
Processing received requests...
Raw friendRequests: []
Processed receivedRequests: []
Populating sender details...
Final populated requests: []
=== FRIEND REQUEST GET END (received) ===
 GET /api/friends/request?type=received 200 in 1274ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
 GET /api/auth/session 200 in 1236ms
 GET /api/friends 200 in 1725ms
 POST /api/users/heartbeat 200 in 1840ms
 POST /api/users/heartbeat 200 in 2165ms
 POST /api/users/heartbeat 200 in 2685ms
=== FRIEND REQUEST GET START ===
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
Request type: sent User: sayantan2@gmail.com
âœ… Database connected
âœ… Current user found: {
  id: new ObjectId('6901f85f42c5d010fa811206'),
  email: 'sayantan2@gmail.com',
  friendRequestsCount: 0,
  sentRequestsCount: 1
}
Processing sent requests...
Raw sentRequests: [
  {
    from: new ObjectId('6901f85f42c5d010fa811206'),
    fromName: 'sayantan2',
    to: new ObjectId('6905adf16a22b7843b006183'),
    toName: 'sayantan3',
    status: 'pending',
    _id: new ObjectId('6905cdce14ad0d0f020b3985'),
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
Filtering sent request: { status: 'pending', to: new ObjectId('6905adf16a22b7843b006183') }
Mapping sent request: {
  from: new ObjectId('6901f85f42c5d010fa811206'),
  fromName: 'sayantan2',
  to: new ObjectId('6905adf16a22b7843b006183'),
  toName: 'sayantan3',
  status: 'pending',
  _id: new ObjectId('6905cdce14ad0d0f020b3985'),
  createdAt: 2025-11-01T09:07:26.707Z,
  updatedAt: 2025-11-01T09:07:26.707Z
}
Processed sentRequests: [
  {
    id: '6905cdce14ad0d0f020b3985',
    to: {
      id: '6905adf16a22b7843b006183',
      username: 'sayantan3',
      email: '',
      profilePicture: null
    },
    status: 'pending',
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
Populating recipient details...
Looking up recipient: 6905adf16a22b7843b006183
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
Found recipient: sayantan3
Final populated sent requests: [
  {
    id: '6905cdce14ad0d0f020b3985',
    to: {
      id: '6905adf16a22b7843b006183',
      username: 'sayantan3',
      email: 'sayantan3@gmail.com',
      profilePicture: undefined
    },
    status: 'pending',
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
=== FRIEND REQUEST GET END (sent) ===
 GET /api/friends/request?type=sent 200 in 1983ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
=== FRIEND REQUEST GET START ===
 POST /api/users/heartbeat 200 in 2010ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
Request type: received User: sayantan2@gmail.com
âœ… Database connected
 GET /api/random-chat/queue 200 in 971ms
âœ… Current user found: {
  id: new ObjectId('6901f85f42c5d010fa811206'),
  email: 'sayantan2@gmail.com',
  friendRequestsCount: 0,
  sentRequestsCount: 1
}
Processing received requests...
Raw friendRequests: []
Processed receivedRequests: []
Populating sender details...
Final populated requests: []
=== FRIEND REQUEST GET END (received) ===
 GET /api/friends/request?type=received 200 in 892ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
 GET /api/users/me 200 in 3277ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
 GET /api/friends 200 in 3056ms
 GET /socket.io?EIO=4&transport=polling&t=yoo83jqr 404 in 5097ms
 GET /socket.io?EIO=4&transport=polling&t=yoo7nkkk 404 in 5327ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
 POST /api/users/heartbeat 200 in 2699ms
 POST /api/users/heartbeat 200 in 2829ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
 GET /api/auth/session 200 in 478ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
=== FRIEND REQUEST GET START ===
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
Request type: sent User: sayantan2@gmail.com
âœ… Database connected
 GET /api/random-chat/session 200 in 569ms
âœ… Current user found: {
  id: new ObjectId('6901f85f42c5d010fa811206'),
  email: 'sayantan2@gmail.com',
  friendRequestsCount: 0,
  sentRequestsCount: 1
}
Processing sent requests...
Raw sentRequests: [
  {
    from: new ObjectId('6901f85f42c5d010fa811206'),
    fromName: 'sayantan2',
    to: new ObjectId('6905adf16a22b7843b006183'),
    toName: 'sayantan3',
    status: 'pending',
    _id: new ObjectId('6905cdce14ad0d0f020b3985'),
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
Filtering sent request: { status: 'pending', to: new ObjectId('6905adf16a22b7843b006183') }
Mapping sent request: {
  from: new ObjectId('6901f85f42c5d010fa811206'),
  fromName: 'sayantan2',
  to: new ObjectId('6905adf16a22b7843b006183'),
  toName: 'sayantan3',
  status: 'pending',
  _id: new ObjectId('6905cdce14ad0d0f020b3985'),
  createdAt: 2025-11-01T09:07:26.707Z,
  updatedAt: 2025-11-01T09:07:26.707Z
}
Processed sentRequests: [
  {
    id: '6905cdce14ad0d0f020b3985',
    to: {
      id: '6905adf16a22b7843b006183',
      username: 'sayantan3',
      email: '',
      profilePicture: null
    },
    status: 'pending',
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
Populating recipient details...
Looking up recipient: 6905adf16a22b7843b006183
Found recipient: sayantan3
Final populated sent requests: [
  {
    id: '6905cdce14ad0d0f020b3985',
    to: {
      id: '6905adf16a22b7843b006183',
      username: 'sayantan3',
      email: 'sayantan3@gmail.com',
      profilePicture: undefined
    },
    status: 'pending',
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
=== FRIEND REQUEST GET END (sent) ===
 GET /api/friends/request?type=sent 200 in 519ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
=== FRIEND REQUEST GET START ===
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
Request type: received User: sayantan2@gmail.com
âœ… Database connected
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
 POST /api/users/heartbeat 200 in 671ms
 GET /api/random-chat/queue 200 in 609ms
 GET /api/friends 200 in 637ms
âœ… Current user found: {
  id: new ObjectId('6901f85f42c5d010fa811206'),
  email: 'sayantan2@gmail.com',
  friendRequestsCount: 0,
  sentRequestsCount: 1
}
Processing received requests...
Raw friendRequests: []
Processed receivedRequests: []
Populating sender details...
Final populated requests: []
=== FRIEND REQUEST GET END (received) ===
 GET /api/friends/request?type=received 200 in 1347ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
 GET /api/users/me 200 in 1547ms
 GET /api/random-chat/session 200 in 1019ms
=== FRIEND REQUEST GET START ===
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
Request type: sent User: sayantan2@gmail.com
âœ… Database connected
âœ… Current user found: {
  id: new ObjectId('6901f85f42c5d010fa811206'),
  email: 'sayantan2@gmail.com',
  friendRequestsCount: 0,
  sentRequestsCount: 1
}
Processing sent requests...
Raw sentRequests: [
  {
    from: new ObjectId('6901f85f42c5d010fa811206'),
    fromName: 'sayantan2',
    to: new ObjectId('6905adf16a22b7843b006183'),
    toName: 'sayantan3',
    status: 'pending',
    _id: new ObjectId('6905cdce14ad0d0f020b3985'),
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
Filtering sent request: { status: 'pending', to: new ObjectId('6905adf16a22b7843b006183') }
Mapping sent request: {
  from: new ObjectId('6901f85f42c5d010fa811206'),
  fromName: 'sayantan2',
  to: new ObjectId('6905adf16a22b7843b006183'),
  toName: 'sayantan3',
  status: 'pending',
  _id: new ObjectId('6905cdce14ad0d0f020b3985'),
  createdAt: 2025-11-01T09:07:26.707Z,
  updatedAt: 2025-11-01T09:07:26.707Z
}
Processed sentRequests: [
  {
    id: '6905cdce14ad0d0f020b3985',
    to: {
      id: '6905adf16a22b7843b006183',
      username: 'sayantan3',
      email: '',
      profilePicture: null
    },
    status: 'pending',
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
Populating recipient details...
Looking up recipient: 6905adf16a22b7843b006183
 GET /api/socket-health 200 in 626ms
Found recipient: sayantan3
Final populated sent requests: [
  {
    id: '6905cdce14ad0d0f020b3985',
    to: {
      id: '6905adf16a22b7843b006183',
      username: 'sayantan3',
      email: 'sayantan3@gmail.com',
      profilePicture: undefined
    },
    status: 'pending',
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
=== FRIEND REQUEST GET END (sent) ===
 GET /api/friends/request?type=sent 200 in 722ms
 GET /api/socket-health 200 in 129ms
 GET /socket.io?EIO=4&transport=polling&t=yowqc3cp 404 in 1663ms
 GET /socket.io?EIO=4&transport=polling&t=yowoif8s 404 in 1700ms
 GET /api/socket-health 200 in 115ms
 GET /api/socket-health 200 in 151ms
 GET /socket.io?EIO=4&transport=polling&t=yozxnitq 404 in 739ms
 GET /socket.io?EIO=4&transport=polling&t=yp02frlu 404 in 364ms
 GET /api/socket-health 200 in 194ms
 GET /api/socket-health 200 in 137ms
 GET /socket.io?EIO=4&transport=polling&t=yp2exsmm 404 in 950ms
 GET /socket.io?EIO=4&transport=polling&t=yp2f3iy1 404 in 569ms
 GET /api/socket-health 200 in 354ms
 GET /api/socket-health 200 in 116ms
 GET /socket.io?EIO=4&transport=polling&t=yp4viso3 404 in 928ms
 GET /socket.io?EIO=4&transport=polling&t=yp4vy63t 404 in 901ms
 GET /api/socket-health 200 in 156ms
 GET /api/socket-health 200 in 172ms
 GET /socket.io?EIO=4&transport=polling&t=yp6wmmh8 404 in 1258ms
 GET /socket.io?EIO=4&transport=polling&t=yp71nt6y 404 in 1339ms
 GET /api/socket-health 200 in 63ms
 GET /api/socket-health 200 in 74ms
 GET /socket.io?EIO=4&transport=polling&t=yp93j45y 404 in 510ms
 GET /socket.io?EIO=4&transport=polling&t=yp95ue5v 404 in 281ms
 GET /api/socket-health 200 in 145ms
 GET /api/socket-health 200 in 108ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
=== FRIEND REQUEST GET START ===
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
Request type: received User: sayantan2@gmail.com
âœ… Database connected
 GET /socket.io?EIO=4&transport=polling&t=ypax2udd 404 in 999ms
âœ… Current user found: {
  id: new ObjectId('6901f85f42c5d010fa811206'),
  email: 'sayantan2@gmail.com',
  friendRequestsCount: 0,
  sentRequestsCount: 1
}
Processing received requests...
Raw friendRequests: []
Processed receivedRequests: []
Populating sender details...
Final populated requests: []
=== FRIEND REQUEST GET END (received) ===
 GET /api/friends/request?type=received 200 in 263ms
 GET /socket.io?EIO=4&transport=polling&t=ypb04txo 404 in 757ms
 GET /api/friends 200 in 295ms
=== FRIEND REQUEST GET START ===
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
Request type: sent User: sayantan2@gmail.com
âœ… Database connected
âœ… Current user found: {
  id: new ObjectId('6901f85f42c5d010fa811206'),
  email: 'sayantan2@gmail.com',
  friendRequestsCount: 0,
  sentRequestsCount: 1
}
Processing sent requests...
Raw sentRequests: [
  {
    from: new ObjectId('6901f85f42c5d010fa811206'),
    fromName: 'sayantan2',
    to: new ObjectId('6905adf16a22b7843b006183'),
    toName: 'sayantan3',
    status: 'pending',
    _id: new ObjectId('6905cdce14ad0d0f020b3985'),
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
Filtering sent request: { status: 'pending', to: new ObjectId('6905adf16a22b7843b006183') }
Mapping sent request: {
  from: new ObjectId('6901f85f42c5d010fa811206'),
  fromName: 'sayantan2',
  to: new ObjectId('6905adf16a22b7843b006183'),
  toName: 'sayantan3',
  status: 'pending',
  _id: new ObjectId('6905cdce14ad0d0f020b3985'),
  createdAt: 2025-11-01T09:07:26.707Z,
  updatedAt: 2025-11-01T09:07:26.707Z
}
Processed sentRequests: [
  {
    id: '6905cdce14ad0d0f020b3985',
    to: {
      id: '6905adf16a22b7843b006183',
      username: 'sayantan3',
      email: '',
      profilePicture: null
    },
    status: 'pending',
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
Populating recipient details...
Looking up recipient: 6905adf16a22b7843b006183
Found recipient: sayantan3
Final populated sent requests: [
  {
    id: '6905cdce14ad0d0f020b3985',
    to: {
      id: '6905adf16a22b7843b006183',
      username: 'sayantan3',
      email: 'sayantan3@gmail.com',
      profilePicture: undefined
    },
    status: 'pending',
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
=== FRIEND REQUEST GET END (sent) ===
 GET /api/friends/request?type=sent 200 in 210ms
 GET /api/socket-health 200 in 209ms
 GET /api/socket-health 200 in 136ms
 GET /socket.io?EIO=4&transport=polling&t=ypd3dv9n 404 in 663ms
 GET /socket.io?EIO=4&transport=polling&t=ypd7y8h4 404 in 353ms
 GET /api/socket-health 200 in 100ms
 GET /api/socket-health 200 in 596ms
 GET /socket.io?EIO=4&transport=polling&t=ypfatze9 404 in 609ms
 GET /socket.io?EIO=4&transport=polling&t=ypfsl8uy 404 in 313ms
 GET /api/socket-health 200 in 69ms
 GET /socket.io?EIO=4&transport=polling&t=ypgt82ms 404 in 285ms
 GET /api/socket-health 200 in 153ms
 GET /socket.io?EIO=4&transport=polling&t=yphqza4u 404 in 510ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
 GET /api/socket-health 200 in 202ms
 POST /api/users/heartbeat 200 in 559ms
 GET /socket.io?EIO=4&transport=polling&t=ypih5z21 404 in 325ms
 GET /api/socket-health 200 in 78ms
 GET /socket.io?EIO=4&transport=polling&t=ypj56etf 404 in 264ms
 GET /api/socket-health 200 in 138ms
 GET /socket.io?EIO=4&transport=polling&t=ypjz24eo 404 in 232ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
 GET /api/socket-health 200 in 119ms
 GET /api/conversations 200 in 364ms
 GET /socket.io?EIO=4&transport=polling&t=ypkpban3 404 in 240ms
 GET /api/socket-health 200 in 64ms
 GET /socket.io?EIO=4&transport=polling&t=yplfiszo 404 in 220ms
 GET /api/socket-health 200 in 39ms
 GET /socket.io?EIO=4&transport=polling&t=ypm6i34r 404 in 154ms
 GET /api/socket-health 200 in 154ms
 GET /socket.io?EIO=4&transport=polling&t=ypn4woj7 404 in 251ms
 GET /api/socket-health 200 in 40ms
 GET /socket.io?EIO=4&transport=polling&t=ypnqewwr 404 in 158ms
 GET /api/socket-health 200 in 613ms
 GET /api/socket-health 200 in 70ms
 GET /socket.io?EIO=4&transport=polling&t=ypoyv8u3 404 in 398ms
 GET /socket.io?EIO=4&transport=polling&t=yppau6k2 404 in 473ms
 GET /api/socket-health 200 in 188ms
 GET /api/socket-health 200 in 363ms
 GET /socket.io?EIO=4&transport=polling&t=ypqyifb6 404 in 874ms
 GET /socket.io?EIO=4&transport=polling&t=ypra0l5g 404 in 352ms
 GET /api/socket-health 200 in 71ms
 GET /api/socket-health 200 in 258ms
 GET /socket.io?EIO=4&transport=polling&t=ypt5kwyb 404 in 453ms
 GET /socket.io?EIO=4&transport=polling&t=yptd10mg 404 in 235ms
 GET /api/socket-health 200 in 35ms
 GET /api/socket-health 200 in 127ms
 GET /socket.io?EIO=4&transport=polling&t=ypuo5pvo 404 in 245ms
 GET /socket.io?EIO=4&transport=polling&t=ypurs3pu 404 in 154ms
 GET /api/socket-health 200 in 34ms
 GET /api/socket-health 200 in 34ms
 GET /socket.io?EIO=4&transport=polling&t=ypw7xx3a 404 in 207ms
 GET /socket.io?EIO=4&transport=polling&t=ypw8yzqs 404 in 108ms
 GET /api/socket-health 200 in 81ms
 GET /api/socket-health 200 in 91ms
 GET /socket.io?EIO=4&transport=polling&t=ypxsyilo 404 in 380ms
 GET /socket.io?EIO=4&transport=polling&t=ypxvmge3 404 in 169ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
=== FRIEND REQUEST GET START ===
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
Request type: received User: sayantan2@gmail.com
âœ… Database connected
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
 GET /api/auth/session 200 in 77ms
âœ… Current user found: {
  id: new ObjectId('6901f85f42c5d010fa811206'),
  email: 'sayantan2@gmail.com',
  friendRequestsCount: 0,
  sentRequestsCount: 1
}
Processing received requests...
Raw friendRequests: []
Processed receivedRequests: []
Populating sender details...
Final populated requests: []
=== FRIEND REQUEST GET END (received) ===
 GET /api/friends/request?type=received 200 in 121ms
 GET /api/friends 200 in 161ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
=== FRIEND REQUEST GET START ===
=== FRIEND REQUEST GET START ===
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
Request type: received User: sayantan2@gmail.com
âœ… Database connected
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
Request type: sent User: sayantan2@gmail.com
âœ… Database connected
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
 GET /api/random-chat/queue 200 in 257ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
 GET /api/users/me 200 in 349ms
 POST /api/users/heartbeat 200 in 380ms
 GET /api/friends 200 in 352ms
 GET /api/random-chat/session 200 in 203ms
âœ… Current user found: {
  id: new ObjectId('6901f85f42c5d010fa811206'),
  email: 'sayantan2@gmail.com',
  friendRequestsCount: 0,
  sentRequestsCount: 1
}
Processing received requests...
Raw friendRequests: []
Processed receivedRequests: []
Populating sender details...
Final populated requests: []
=== FRIEND REQUEST GET END (received) ===
 GET /api/friends/request?type=received 200 in 544ms
âœ… Current user found: {
  id: new ObjectId('6901f85f42c5d010fa811206'),
  email: 'sayantan2@gmail.com',
  friendRequestsCount: 0,
  sentRequestsCount: 1
}
Processing sent requests...
Raw sentRequests: [
  {
    from: new ObjectId('6901f85f42c5d010fa811206'),
    fromName: 'sayantan2',
    to: new ObjectId('6905adf16a22b7843b006183'),
    toName: 'sayantan3',
    status: 'pending',
    _id: new ObjectId('6905cdce14ad0d0f020b3985'),
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
Filtering sent request: { status: 'pending', to: new ObjectId('6905adf16a22b7843b006183') }
Mapping sent request: {
  from: new ObjectId('6901f85f42c5d010fa811206'),
  fromName: 'sayantan2',
  to: new ObjectId('6905adf16a22b7843b006183'),
  toName: 'sayantan3',
  status: 'pending',
  _id: new ObjectId('6905cdce14ad0d0f020b3985'),
  createdAt: 2025-11-01T09:07:26.707Z,
  updatedAt: 2025-11-01T09:07:26.707Z
}
Processed sentRequests: [
  {
    id: '6905cdce14ad0d0f020b3985',
    to: {
      id: '6905adf16a22b7843b006183',
      username: 'sayantan3',
      email: '',
      profilePicture: null
    },
    status: 'pending',
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
Populating recipient details...
Looking up recipient: 6905adf16a22b7843b006183
Found recipient: sayantan3
Final populated sent requests: [
  {
    id: '6905cdce14ad0d0f020b3985',
    to: {
      id: '6905adf16a22b7843b006183',
      username: 'sayantan3',
      email: 'sayantan3@gmail.com',
      profilePicture: undefined
    },
    status: 'pending',
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
=== FRIEND REQUEST GET END (sent) ===
 GET /api/friends/request?type=sent 200 in 627ms
=== FRIEND REQUEST GET START ===
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
Request type: sent User: sayantan2@gmail.com
âœ… Database connected
âœ… Current user found: {
  id: new ObjectId('6901f85f42c5d010fa811206'),
  email: 'sayantan2@gmail.com',
  friendRequestsCount: 0,
  sentRequestsCount: 1
}
Processing sent requests...
Raw sentRequests: [
  {
    from: new ObjectId('6901f85f42c5d010fa811206'),
    fromName: 'sayantan2',
    to: new ObjectId('6905adf16a22b7843b006183'),
    toName: 'sayantan3',
    status: 'pending',
    _id: new ObjectId('6905cdce14ad0d0f020b3985'),
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
Filtering sent request: { status: 'pending', to: new ObjectId('6905adf16a22b7843b006183') }
Mapping sent request: {
  from: new ObjectId('6901f85f42c5d010fa811206'),
  fromName: 'sayantan2',
  to: new ObjectId('6905adf16a22b7843b006183'),
  toName: 'sayantan3',
  status: 'pending',
  _id: new ObjectId('6905cdce14ad0d0f020b3985'),
  createdAt: 2025-11-01T09:07:26.707Z,
  updatedAt: 2025-11-01T09:07:26.707Z
}
Processed sentRequests: [
  {
    id: '6905cdce14ad0d0f020b3985',
    to: {
      id: '6905adf16a22b7843b006183',
      username: 'sayantan3',
      email: '',
      profilePicture: null
    },
    status: 'pending',
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
Populating recipient details...
Looking up recipient: 6905adf16a22b7843b006183
Found recipient: sayantan3
Final populated sent requests: [
  {
    id: '6905cdce14ad0d0f020b3985',
    to: {
      id: '6905adf16a22b7843b006183',
      username: 'sayantan3',
      email: 'sayantan3@gmail.com',
      profilePicture: undefined
    },
    status: 'pending',
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
=== FRIEND REQUEST GET END (sent) ===
 GET /api/friends/request?type=sent 200 in 155ms
 GET /api/socket-health 200 in 51ms
 GET /api/socket-health 200 in 177ms
 GET /socket.io?EIO=4&transport=polling&t=ypzbgud5 404 in 333ms
 GET /socket.io?EIO=4&transport=polling&t=ypzgeaho 404 in 173ms
 GET /api/socket-health 200 in 36ms
 GET /api/socket-health 200 in 118ms
 GET /socket.io?EIO=4&transport=polling&t=yq0uhvr8 404 in 218ms
 GET /socket.io?EIO=4&transport=polling&t=yq0xtvki 404 in 113ms
 GET /api/socket-health 200 in 28ms
 GET /api/socket-health 200 in 125ms
 GET /socket.io?EIO=4&transport=polling&t=yq2dns37 404 in 281ms
 GET /socket.io?EIO=4&transport=polling&t=yq2h8gn3 404 in 179ms
 GET /api/socket-health 200 in 30ms
 GET /api/socket-health 200 in 125ms
 GET /socket.io?EIO=4&transport=polling&t=yq3xh07t 404 in 215ms
 GET /socket.io?EIO=4&transport=polling&t=yq410nar 404 in 103ms
 GET /api/socket-health 200 in 37ms
 GET /api/socket-health 200 in 115ms
 GET /socket.io?EIO=4&transport=polling&t=yq5h1u0n 404 in 207ms
 GET /socket.io?EIO=4&transport=polling&t=yq5kaq14 404 in 103ms
 GET /api/socket-health 200 in 35ms
 GET /api/socket-health 200 in 112ms
 GET /socket.io?EIO=4&transport=polling&t=yq70cjd8 404 in 203ms
 GET /socket.io?EIO=4&transport=polling&t=yq73imv7 404 in 109ms
 GET /api/socket-health 200 in 29ms
 GET /api/socket-health 200 in 37ms
 GET /socket.io?EIO=4&transport=polling&t=yq8k59fg 404 in 227ms
 GET /socket.io?EIO=4&transport=polling&t=yq8l8ssu 404 in 113ms
 GET /api/socket-health 200 in 66ms
 GET /api/socket-health 200 in 81ms
 GET /socket.io?EIO=4&transport=polling&t=yqa55iej 404 in 458ms
 GET /socket.io?EIO=4&transport=polling&t=yqa9pqhd 404 in 182ms
 GET /api/socket-health 200 in 43ms
 GET /api/socket-health 200 in 50ms
 GET /socket.io?EIO=4&transport=polling&t=yqbnafpl 404 in 340ms
 GET /socket.io?EIO=4&transport=polling&t=yqboqevv 404 in 192ms
 GET /api/socket-health 200 in 50ms
 GET /api/socket-health 200 in 46ms
 GET /socket.io?EIO=4&transport=polling&t=yqd7hqjd 404 in 297ms
 GET /socket.io?EIO=4&transport=polling&t=yqd8t2j7 404 in 133ms
 GET /api/socket-health 200 in 39ms
 GET /api/socket-health 200 in 152ms
 GET /socket.io?EIO=4&transport=polling&t=yqerbhfr 404 in 211ms
 GET /socket.io?EIO=4&transport=polling&t=yqevmtx4 404 in 109ms
 GET /api/socket-health 200 in 40ms
 GET /api/socket-health 200 in 38ms
 POST /api/auth/login 400 in 65ms
 GET /socket.io?EIO=4&transport=polling&t=yqga0kkg 404 in 384ms
 GET /socket.io?EIO=4&transport=polling&t=yqgb4ov9 404 in 231ms
 GET /api/socket-health 200 in 34ms
 GET /api/socket-health 200 in 28ms
 GET /socket.io?EIO=4&transport=polling&t=yqhte778 404 in 219ms
 GET /socket.io?EIO=4&transport=polling&t=yqhu8q6i 404 in 108ms
 GET /api/socket-health 200 in 32ms
 GET /api/socket-health 200 in 114ms
 GET /socket.io?EIO=4&transport=polling&t=yqjcyrjm 404 in 213ms
 GET /socket.io?EIO=4&transport=polling&t=yqjg6ibx 404 in 104ms
 GET /api/socket-health 200 in 30ms
 GET /api/socket-health 200 in 116ms
 GET /socket.io?EIO=4&transport=polling&t=yqkwl90q 404 in 206ms
 GET /socket.io?EIO=4&transport=polling&t=yqkzwtnj 404 in 99ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
 GET /api/socket-health 200 in 118ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
=== FRIEND REQUEST GET START ===
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
Request type: received User: sayantan2@gmail.com
âœ… Database connected
 GET /api/socket-health 200 in 145ms
 GET /socket.io?EIO=4&transport=polling&t=yqmils90 404 in 247ms
 GET /socket.io?EIO=4&transport=polling&t=yqmmssf3 404 in 128ms
 GET /api/conversations 200 in 638ms
 POST /api/users/heartbeat 200 in 736ms
âœ… Current user found: {
  id: new ObjectId('6901f85f42c5d010fa811206'),
  email: 'sayantan2@gmail.com',
  friendRequestsCount: 0,
  sentRequestsCount: 1
}
Processing received requests...
Raw friendRequests: []
Processed receivedRequests: []
Populating sender details...
Final populated requests: []
=== FRIEND REQUEST GET END (received) ===
 GET /api/friends/request?type=received 200 in 840ms
=== FRIEND REQUEST GET START ===
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
Request type: sent User: sayantan2@gmail.com
âœ… Database connected
âœ… Current user found: {
  id: new ObjectId('6901f85f42c5d010fa811206'),
  email: 'sayantan2@gmail.com',
  friendRequestsCount: 0,
  sentRequestsCount: 1
}
Processing sent requests...
Raw sentRequests: [
  {
    from: new ObjectId('6901f85f42c5d010fa811206'),
    fromName: 'sayantan2',
    to: new ObjectId('6905adf16a22b7843b006183'),
    toName: 'sayantan3',
    status: 'pending',
    _id: new ObjectId('6905cdce14ad0d0f020b3985'),
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
Filtering sent request: { status: 'pending', to: new ObjectId('6905adf16a22b7843b006183') }
Mapping sent request: {
  from: new ObjectId('6901f85f42c5d010fa811206'),
  fromName: 'sayantan2',
  to: new ObjectId('6905adf16a22b7843b006183'),
  toName: 'sayantan3',
  status: 'pending',
  _id: new ObjectId('6905cdce14ad0d0f020b3985'),
  createdAt: 2025-11-01T09:07:26.707Z,
  updatedAt: 2025-11-01T09:07:26.707Z
}
Processed sentRequests: [
  {
    id: '6905cdce14ad0d0f020b3985',
    to: {
      id: '6905adf16a22b7843b006183',
      username: 'sayantan3',
      email: '',
      profilePicture: null
    },
    status: 'pending',
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
Populating recipient details...
Looking up recipient: 6905adf16a22b7843b006183
Found recipient: sayantan3
Final populated sent requests: [
  {
    id: '6905cdce14ad0d0f020b3985',
    to: {
      id: '6905adf16a22b7843b006183',
      username: 'sayantan3',
      email: 'sayantan3@gmail.com',
      profilePicture: undefined
    },
    status: 'pending',
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
=== FRIEND REQUEST GET END (sent) ===
 GET /api/friends/request?type=sent 200 in 149ms
 GET /api/socket-health 200 in 40ms
 GET /api/socket-health 200 in 120ms
 GET /socket.io?EIO=4&transport=polling&t=yqo01zty 404 in 209ms
 GET /socket.io?EIO=4&transport=polling&t=yqo3e3mi 404 in 101ms
 GET /api/socket-health 200 in 34ms
 GET /api/socket-health 200 in 131ms
 GET /socket.io?EIO=4&transport=polling&t=yqpj2qav 404 in 222ms
 GET /socket.io?EIO=4&transport=polling&t=yqpmq96a 404 in 104ms
 GET /api/socket-health 200 in 31ms
 GET /api/socket-health 200 in 131ms
 GET /socket.io?EIO=4&transport=polling&t=yqr2tf2z 404 in 207ms
 GET /socket.io?EIO=4&transport=polling&t=yqr6j5qx 404 in 102ms
 GET /api/socket-health 200 in 31ms
 GET /api/socket-health 200 in 107ms
 GET /socket.io?EIO=4&transport=polling&t=yqsmaq4p 404 in 193ms
 GET /socket.io?EIO=4&transport=polling&t=yqspcs15 404 in 98ms
 GET /api/socket-health 200 in 41ms
 GET /api/socket-health 200 in 124ms
 GET /socket.io?EIO=4&transport=polling&t=yqu639is 404 in 206ms
 GET /socket.io?EIO=4&transport=polling&t=yqu9m58v 404 in 102ms
 GET /api/socket-health 200 in 41ms
 GET /api/socket-health 200 in 42ms
 GET /socket.io?EIO=4&transport=polling&t=yqvpvcew 404 in 310ms
 GET /socket.io?EIO=4&transport=polling&t=yqvr75p1 404 in 147ms
 GET /api/socket-health 200 in 55ms
 GET /api/socket-health 200 in 42ms
 GET /socket.io?EIO=4&transport=polling&t=yqx9om2g 404 in 237ms
 GET /socket.io?EIO=4&transport=polling&t=yqxaz4yc 404 in 105ms
 GET /api/socket-health 200 in 32ms
 GET /api/socket-health 200 in 130ms
 GET /socket.io?EIO=4&transport=polling&t=yqysp5nd 404 in 224ms
 GET /socket.io?EIO=4&transport=polling&t=yqyweaet 404 in 111ms
 GET /api/socket-health 200 in 34ms
 GET /api/socket-health 200 in 115ms
 GET /socket.io?EIO=4&transport=polling&t=yr0bx2j5 404 in 207ms
 GET /socket.io?EIO=4&transport=polling&t=yr0f6k3c 404 in 104ms
 GET /api/socket-health 200 in 37ms
 GET /api/socket-health 200 in 43ms
 GET /socket.io?EIO=4&transport=polling&t=yr1wcldn 404 in 231ms
 GET /socket.io?EIO=4&transport=polling&t=yr1xlmfb 404 in 112ms
 GET /api/socket-health 200 in 32ms
 GET /api/socket-health 200 in 126ms
 GET /socket.io?EIO=4&transport=polling&t=yr3f1lan 404 in 232ms
 GET /socket.io?EIO=4&transport=polling&t=yr3ilndp 404 in 123ms
 GET /api/socket-health 200 in 28ms
 GET /api/socket-health 200 in 108ms
 GET /socket.io?EIO=4&transport=polling&t=yr4ytkqz 404 in 203ms
 GET /socket.io?EIO=4&transport=polling&t=yr51vg2r 404 in 102ms
 GET /api/socket-health 200 in 27ms
 GET /api/socket-health 200 in 117ms
 GET /socket.io?EIO=4&transport=polling&t=yr6i9fep 404 in 225ms
 GET /socket.io?EIO=4&transport=polling&t=yr6lju38 404 in 121ms
 GET /api/socket-health 200 in 31ms
 GET /api/socket-health 200 in 52ms
 GET /socket.io?EIO=4&transport=polling&t=yr81tm76 404 in 613ms
 GET /socket.io?EIO=4&transport=polling&t=yr83ct1q 404 in 445ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
 GET /api/socket-health 200 in 55ms
 GET /api/socket-health 200 in 111ms
 GET /socket.io?EIO=4&transport=polling&t=yr9m7wfw 404 in 203ms
 GET /socket.io?EIO=4&transport=polling&t=yr9pd8dp 404 in 110ms
 POST /api/users/heartbeat 200 in 302ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
 GET /api/conversations 200 in 128ms
=== FRIEND REQUEST GET START ===
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
Request type: received User: sayantan2@gmail.com
âœ… Database connected
 GET /api/socket-health 200 in 74ms
 GET /api/socket-health 200 in 27ms
âœ… Current user found: {
  id: new ObjectId('6901f85f42c5d010fa811206'),
  email: 'sayantan2@gmail.com',
  friendRequestsCount: 0,
  sentRequestsCount: 1
}
Processing received requests...
Raw friendRequests: []
Processed receivedRequests: []
Populating sender details...
Final populated requests: []
=== FRIEND REQUEST GET END (received) ===
 GET /api/friends/request?type=received 200 in 202ms
=== FRIEND REQUEST GET START ===
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
Request type: sent User: sayantan2@gmail.com
âœ… Database connected
 GET /socket.io?EIO=4&transport=polling&t=yrb6bo4h 404 in 257ms
 GET /socket.io?EIO=4&transport=polling&t=yrb74kdm 404 in 137ms
âœ… Current user found: {
  id: new ObjectId('6901f85f42c5d010fa811206'),
  email: 'sayantan2@gmail.com',
  friendRequestsCount: 0,
  sentRequestsCount: 1
}
Processing sent requests...
Raw sentRequests: [
  {
    from: new ObjectId('6901f85f42c5d010fa811206'),
    fromName: 'sayantan2',
    to: new ObjectId('6905adf16a22b7843b006183'),
    toName: 'sayantan3',
    status: 'pending',
    _id: new ObjectId('6905cdce14ad0d0f020b3985'),
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
Filtering sent request: { status: 'pending', to: new ObjectId('6905adf16a22b7843b006183') }
Mapping sent request: {
  from: new ObjectId('6901f85f42c5d010fa811206'),
  fromName: 'sayantan2',
  to: new ObjectId('6905adf16a22b7843b006183'),
  toName: 'sayantan3',
  status: 'pending',
  _id: new ObjectId('6905cdce14ad0d0f020b3985'),
  createdAt: 2025-11-01T09:07:26.707Z,
  updatedAt: 2025-11-01T09:07:26.707Z
}
Processed sentRequests: [
  {
    id: '6905cdce14ad0d0f020b3985',
    to: {
      id: '6905adf16a22b7843b006183',
      username: 'sayantan3',
      email: '',
      profilePicture: null
    },
    status: 'pending',
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
Populating recipient details...
Looking up recipient: 6905adf16a22b7843b006183
Found recipient: sayantan3
Final populated sent requests: [
  {
    id: '6905cdce14ad0d0f020b3985',
    to: {
      id: '6905adf16a22b7843b006183',
      username: 'sayantan3',
      email: 'sayantan3@gmail.com',
      profilePicture: undefined
    },
    status: 'pending',
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
=== FRIEND REQUEST GET END (sent) ===
 GET /api/friends/request?type=sent 200 in 205ms
 GET /api/socket-health 200 in 38ms
 GET /api/socket-health 200 in 122ms
 GET /socket.io?EIO=4&transport=polling&t=yrcop7r7 404 in 208ms
 GET /socket.io?EIO=4&transport=polling&t=yrcs5z3f 404 in 102ms
 GET /api/socket-health 200 in 30ms
 GET /api/socket-health 200 in 126ms
 GET /socket.io?EIO=4&transport=polling&t=yre7xlys 404 in 221ms
 GET /socket.io?EIO=4&transport=polling&t=yrebigao 404 in 101ms
 GET /api/socket-health 200 in 35ms
 GET /api/socket-health 200 in 125ms
 GET /socket.io?EIO=4&transport=polling&t=yrfrwnto 404 in 221ms
 GET /socket.io?EIO=4&transport=polling&t=yrfvguzo 404 in 108ms
 POST /api/auth/signup 400 in 54ms
 GET /api/socket-health 200 in 55ms
 GET /api/socket-health 200 in 50ms
 GET /socket.io?EIO=4&transport=polling&t=yrhca6wj 404 in 382ms
 GET /socket.io?EIO=4&transport=polling&t=yrhdpgns 404 in 183ms
 GET /api/socket-health 200 in 39ms
 GET /api/socket-health 200 in 52ms
 GET /socket.io?EIO=4&transport=polling&t=yriusa5l 404 in 278ms
 GET /socket.io?EIO=4&transport=polling&t=yriwap6m 404 in 144ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
=== FRIEND REQUEST GET START ===
 GET /api/socket-health 200 in 110ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
Request type: received User: sayantan2@gmail.com
âœ… Database connected
 GET /api/friends 200 in 238ms
 GET /api/socket-health 200 in 168ms
 GET /socket.io?EIO=4&transport=polling&t=yrkgx2dl 404 in 358ms
 GET /socket.io?EIO=4&transport=polling&t=yrkm08q1 404 in 357ms
âœ… Current user found: {
  id: new ObjectId('6901f85f42c5d010fa811206'),
  email: 'sayantan2@gmail.com',
  friendRequestsCount: 0,
  sentRequestsCount: 1
}
Processing received requests...
Raw friendRequests: []
Processed receivedRequests: []
Populating sender details...
Final populated requests: []
=== FRIEND REQUEST GET END (received) ===
 GET /api/friends/request?type=received 200 in 746ms
=== FRIEND REQUEST GET START ===
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
Request type: sent User: sayantan2@gmail.com
âœ… Database connected
âœ… Current user found: {
  id: new ObjectId('6901f85f42c5d010fa811206'),
  email: 'sayantan2@gmail.com',
  friendRequestsCount: 0,
  sentRequestsCount: 1
}
Processing sent requests...
Raw sentRequests: [
  {
    from: new ObjectId('6901f85f42c5d010fa811206'),
    fromName: 'sayantan2',
    to: new ObjectId('6905adf16a22b7843b006183'),
    toName: 'sayantan3',
    status: 'pending',
    _id: new ObjectId('6905cdce14ad0d0f020b3985'),
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
Filtering sent request: { status: 'pending', to: new ObjectId('6905adf16a22b7843b006183') }
Mapping sent request: {
  from: new ObjectId('6901f85f42c5d010fa811206'),
  fromName: 'sayantan2',
  to: new ObjectId('6905adf16a22b7843b006183'),
  toName: 'sayantan3',
  status: 'pending',
  _id: new ObjectId('6905cdce14ad0d0f020b3985'),
  createdAt: 2025-11-01T09:07:26.707Z,
  updatedAt: 2025-11-01T09:07:26.707Z
}
Processed sentRequests: [
  {
    id: '6905cdce14ad0d0f020b3985',
    to: {
      id: '6905adf16a22b7843b006183',
      username: 'sayantan3',
      email: '',
      profilePicture: null
    },
    status: 'pending',
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
Populating recipient details...
Looking up recipient: 6905adf16a22b7843b006183
Found recipient: sayantan3
Final populated sent requests: [
  {
    id: '6905cdce14ad0d0f020b3985',
    to: {
      id: '6905adf16a22b7843b006183',
      username: 'sayantan3',
      email: 'sayantan3@gmail.com',
      profilePicture: undefined
    },
    status: 'pending',
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
=== FRIEND REQUEST GET END (sent) ===
 GET /api/friends/request?type=sent 200 in 161ms
 GET /api/socket-health 200 in 315ms
 GET /api/socket-health 200 in 693ms
 GET /socket.io?EIO=4&transport=polling&t=yrmw0k0p 404 in 594ms
 GET /socket.io?EIO=4&transport=polling&t=yrmtz2eo 404 in 601ms
 GET /api/socket-health 200 in 50ms
 GET /api/socket-health 200 in 190ms
 GET /socket.io?EIO=4&transport=polling&t=yro9xfit 404 in 179ms
 GET /socket.io?EIO=4&transport=polling&t=yrofbpbj 404 in 111ms
 GET /api/socket-health 200 in 45ms
 GET /api/socket-health 200 in 170ms
 GET /socket.io?EIO=4&transport=polling&t=yrpt3knh 404 in 258ms
 GET /socket.io?EIO=4&transport=polling&t=yrpxxi7f 404 in 119ms
 GET /api/socket-health 200 in 31ms
 GET /api/socket-health 200 in 115ms
 GET /socket.io?EIO=4&transport=polling&t=yrrc5w57 404 in 221ms
 GET /socket.io?EIO=4&transport=polling&t=yrrfeaiq 404 in 118ms
 GET /api/socket-health 200 in 29ms
 GET /api/socket-health 200 in 121ms
 GET /socket.io?EIO=4&transport=polling&t=yrsvvlgj 404 in 215ms
 GET /socket.io?EIO=4&transport=polling&t=yrsza0an 404 in 110ms
 GET /api/socket-health 200 in 39ms
 GET /api/socket-health 200 in 106ms
 GET /socket.io?EIO=4&transport=polling&t=yrugcp9h 404 in 197ms
 GET /socket.io?EIO=4&transport=polling&t=yrujczm4 404 in 99ms
 GET /api/socket-health 200 in 33ms
 GET /api/socket-health 200 in 128ms
 GET /socket.io?EIO=4&transport=polling&t=yrvz5twz 404 in 206ms
 GET /socket.io?EIO=4&transport=polling&t=yrw2p7qh 404 in 103ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
 POST /api/users/heartbeat 200 in 187ms
 GET /api/socket-health 200 in 31ms
 GET /api/socket-health 200 in 107ms
 GET /socket.io?EIO=4&transport=polling&t=yrxin3dq 404 in 110ms
 GET /socket.io?EIO=4&transport=polling&t=yrxlpgss 404 in 101ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
 GET /api/conversations 200 in 155ms
 GET /api/socket-health 200 in 43ms
 GET /api/socket-health 200 in 113ms
 GET /socket.io?EIO=4&transport=polling&t=yrz2h3fk 404 in 199ms
 GET /socket.io?EIO=4&transport=polling&t=yrz5qjay 404 in 94ms
 GET /api/socket-health 200 in 29ms
 GET /api/socket-health 200 in 128ms
 GET /socket.io?EIO=4&transport=polling&t=ys0lfduh 404 in 220ms
 GET /socket.io?EIO=4&transport=polling&t=ys0p1yyc 404 in 100ms
 GET /api/socket-health 200 in 40ms
 GET /api/socket-health 200 in 111ms
 GET /socket.io?EIO=4&transport=polling&t=ys258hsq 404 in 117ms
 GET /socket.io?EIO=4&transport=polling&t=ys28fv6r 404 in 109ms
 GET /api/socket-health 200 in 28ms
 GET /api/socket-health 200 in 114ms
 GET /socket.io?EIO=4&transport=polling&t=ys3oqrka 404 in 213ms
 GET /socket.io?EIO=4&transport=polling&t=ys3rzbs2 404 in 100ms
 GET /api/socket-health 200 in 42ms
 GET /api/socket-health 200 in 136ms
 GET /socket.io?EIO=4&transport=polling&t=ys58s7ff 404 in 249ms
 GET /socket.io?EIO=4&transport=polling&t=ys5cqml4 404 in 123ms
 GET /api/socket-health 200 in 38ms
 GET /api/socket-health 200 in 149ms
 GET /socket.io?EIO=4&transport=polling&t=ys6rvz66 404 in 257ms
 GET /socket.io?EIO=4&transport=polling&t=ys6w3gqj 404 in 116ms
 GET /api/socket-health 200 in 65ms
=== FRIEND REQUEST GET START ===
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
Request type: received User: sayantan2@gmail.com
âœ… Database connected
âœ… Current user found: {
  id: new ObjectId('6901f85f42c5d010fa811206'),
  email: 'sayantan2@gmail.com',
  friendRequestsCount: 0,
  sentRequestsCount: 1
}
Processing received requests...
Raw friendRequests: []
Processed receivedRequests: []
Populating sender details...
Final populated requests: []
=== FRIEND REQUEST GET END (received) ===
 GET /api/friends/request?type=received 200 in 206ms
 GET /api/socket-health 200 in 166ms
=== FRIEND REQUEST GET START ===
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
Request type: sent User: sayantan2@gmail.com
âœ… Database connected
 GET /socket.io?EIO=4&transport=polling&t=ys8chejf 404 in 296ms
 GET /socket.io?EIO=4&transport=polling&t=ys8h9r4e 404 in 138ms
âœ… Current user found: {
  id: new ObjectId('6901f85f42c5d010fa811206'),
  email: 'sayantan2@gmail.com',
  friendRequestsCount: 0,
  sentRequestsCount: 1
}
Processing sent requests...
Raw sentRequests: [
  {
    from: new ObjectId('6901f85f42c5d010fa811206'),
    fromName: 'sayantan2',
    to: new ObjectId('6905adf16a22b7843b006183'),
    toName: 'sayantan3',
    status: 'pending',
    _id: new ObjectId('6905cdce14ad0d0f020b3985'),
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
Filtering sent request: { status: 'pending', to: new ObjectId('6905adf16a22b7843b006183') }
Mapping sent request: {
  from: new ObjectId('6901f85f42c5d010fa811206'),
  fromName: 'sayantan2',
  to: new ObjectId('6905adf16a22b7843b006183'),
  toName: 'sayantan3',
  status: 'pending',
  _id: new ObjectId('6905cdce14ad0d0f020b3985'),
  createdAt: 2025-11-01T09:07:26.707Z,
  updatedAt: 2025-11-01T09:07:26.707Z
}
Processed sentRequests: [
  {
    id: '6905cdce14ad0d0f020b3985',
    to: {
      id: '6905adf16a22b7843b006183',
      username: 'sayantan3',
      email: '',
      profilePicture: null
    },
    status: 'pending',
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
Populating recipient details...
Looking up recipient: 6905adf16a22b7843b006183
Found recipient: sayantan3
Final populated sent requests: [
  {
    id: '6905cdce14ad0d0f020b3985',
    to: {
      id: '6905adf16a22b7843b006183',
      username: 'sayantan3',
      email: 'sayantan3@gmail.com',
      profilePicture: undefined
    },
    status: 'pending',
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
=== FRIEND REQUEST GET END (sent) ===
 GET /api/friends/request?type=sent 200 in 240ms
 GET /api/socket-health 200 in 41ms
 GET /api/socket-health 200 in 162ms
 GET /socket.io?EIO=4&transport=polling&t=ys9vehye 404 in 273ms
 GET /socket.io?EIO=4&transport=polling&t=ys9zzjuc 404 in 141ms
 GET /api/socket-health 200 in 37ms
 GET /api/socket-health 200 in 144ms
 GET /socket.io?EIO=4&transport=polling&t=ysbeti46 404 in 283ms
 GET /socket.io?EIO=4&transport=polling&t=ysbivacs 404 in 151ms
 GET /api/socket-health 200 in 40ms
 GET /api/socket-health 200 in 259ms
 GET /socket.io?EIO=4&transport=polling&t=yscyhbj5 404 in 873ms
 GET /socket.io?EIO=4&transport=polling&t=ysd5psox 404 in 589ms
 GET /api/socket-health 200 in 44ms
 GET /api/socket-health 200 in 149ms
 GET /socket.io?EIO=4&transport=polling&t=ysei73jr 404 in 155ms
 GET /socket.io?EIO=4&transport=polling&t=ysemeanl 404 in 124ms
 GET /api/socket-health 200 in 38ms
 GET /api/socket-health 200 in 139ms
 GET /socket.io?EIO=4&transport=polling&t=ysg1hpld 404 in 141ms
 GET /socket.io?EIO=4&transport=polling&t=ysg5fud7 404 in 118ms
 GET /api/socket-health 200 in 40ms
 GET /api/socket-health 200 in 164ms
 GET /socket.io?EIO=4&transport=polling&t=yshl4u8p 404 in 260ms
 GET /socket.io?EIO=4&transport=polling&t=yshprh85 404 in 122ms
 GET /api/socket-health 200 in 41ms
 GET /api/socket-health 200 in 180ms
 GET /socket.io?EIO=4&transport=polling&t=ysj4klrk 404 in 303ms
 GET /socket.io?EIO=4&transport=polling&t=ysj9nts1 404 in 135ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
 POST /api/users/heartbeat 200 in 200ms
 GET /api/socket-health 200 in 45ms
 GET /api/socket-health 200 in 150ms
 GET /socket.io?EIO=4&transport=polling&t=ysko45hh 404 in 265ms
 GET /socket.io?EIO=4&transport=polling&t=ysksdah4 404 in 128ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
 GET /api/socket-health 200 in 79ms
 GET /api/conversations 200 in 216ms
 GET /api/socket-health 200 in 160ms
 GET /socket.io?EIO=4&transport=polling&t=ysm90o98 404 in 167ms
 GET /socket.io?EIO=4&transport=polling&t=ysmdi7b1 404 in 121ms
 GET /api/socket-health 200 in 41ms
 GET /api/socket-health 200 in 153ms
 GET /socket.io?EIO=4&transport=polling&t=ysnrci75 404 in 265ms
 GET /socket.io?EIO=4&transport=polling&t=ysnvnn8j 404 in 118ms
 GET /api/socket-health 200 in 51ms
 GET /api/socket-health 200 in 143ms
 GET /socket.io?EIO=4&transport=polling&t=yspbapk5 404 in 252ms
 GET /socket.io?EIO=4&transport=polling&t=yspfbvzh 404 in 122ms
 GET /api/socket-health 200 in 43ms
 GET /api/socket-health 200 in 145ms
 GET /socket.io?EIO=4&transport=polling&t=ysquk4tk 404 in 254ms
 GET /socket.io?EIO=4&transport=polling&t=ysqyon5q 404 in 114ms
 GET /api/socket-health 200 in 40ms
 GET /api/socket-health 200 in 139ms
 GET /socket.io?EIO=4&transport=polling&t=yssdqjlc 404 in 250ms
 GET /socket.io?EIO=4&transport=polling&t=ysshm2lv 404 in 123ms
 GET /api/socket-health 200 in 38ms
 GET /api/socket-health 200 in 168ms
 GET /socket.io?EIO=4&transport=polling&t=ystxgxpw 404 in 276ms
 GET /socket.io?EIO=4&transport=polling&t=ysu26ewx 404 in 181ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
=== FRIEND REQUEST GET START ===
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
Request type: received User: sayantan2@gmail.com
âœ… Database connected
 GET /api/friends 200 in 174ms
âœ… Current user found: {
  id: new ObjectId('6901f85f42c5d010fa811206'),
  email: 'sayantan2@gmail.com',
  friendRequestsCount: 0,
  sentRequestsCount: 1
}
Processing received requests...
Raw friendRequests: []
Processed receivedRequests: []
Populating sender details...
Final populated requests: []
=== FRIEND REQUEST GET END (received) ===
 GET /api/friends/request?type=received 200 in 533ms
=== FRIEND REQUEST GET START ===
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
Request type: sent User: sayantan2@gmail.com
âœ… Database connected
âœ… Current user found: {
  id: new ObjectId('6901f85f42c5d010fa811206'),
  email: 'sayantan2@gmail.com',
  friendRequestsCount: 0,
  sentRequestsCount: 1
}
Processing sent requests...
Raw sentRequests: [
  {
    from: new ObjectId('6901f85f42c5d010fa811206'),
    fromName: 'sayantan2',
    to: new ObjectId('6905adf16a22b7843b006183'),
    toName: 'sayantan3',
    status: 'pending',
    _id: new ObjectId('6905cdce14ad0d0f020b3985'),
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
Filtering sent request: { status: 'pending', to: new ObjectId('6905adf16a22b7843b006183') }
Mapping sent request: {
  from: new ObjectId('6901f85f42c5d010fa811206'),
  fromName: 'sayantan2',
  to: new ObjectId('6905adf16a22b7843b006183'),
  toName: 'sayantan3',
  status: 'pending',
  _id: new ObjectId('6905cdce14ad0d0f020b3985'),
  createdAt: 2025-11-01T09:07:26.707Z,
  updatedAt: 2025-11-01T09:07:26.707Z
}
Processed sentRequests: [
  {
    id: '6905cdce14ad0d0f020b3985',
    to: {
      id: '6905adf16a22b7843b006183',
      username: 'sayantan3',
      email: '',
      profilePicture: null
    },
    status: 'pending',
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
Populating recipient details...
Looking up recipient: 6905adf16a22b7843b006183
Found recipient: sayantan3
Final populated sent requests: [
  {
    id: '6905cdce14ad0d0f020b3985',
    to: {
      id: '6905adf16a22b7843b006183',
      username: 'sayantan3',
      email: 'sayantan3@gmail.com',
      profilePicture: undefined
    },
    status: 'pending',
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
=== FRIEND REQUEST GET END (sent) ===
 GET /api/friends/request?type=sent 200 in 154ms
 GET /api/socket-health 200 in 36ms
 GET /api/socket-health 200 in 179ms
 GET /socket.io?EIO=4&transport=polling&t=ysvgqvzt 404 in 322ms
 GET /socket.io?EIO=4&transport=polling&t=ysvlr45j 404 in 148ms
 GET /api/socket-health 200 in 47ms
 GET /api/socket-health 200 in 150ms
 GET /socket.io?EIO=4&transport=polling&t=ysx0ovyj 404 in 156ms
 GET /socket.io?EIO=4&transport=polling&t=ysx4w11b 404 in 173ms
 GET /api/socket-health 200 in 29ms
 GET /api/socket-health 200 in 109ms
 GET /socket.io?EIO=4&transport=polling&t=ysyjmpwy 404 in 199ms
 GET /socket.io?EIO=4&transport=polling&t=ysympqs0 404 in 94ms
 GET /api/socket-health 200 in 34ms
 GET /api/socket-health 200 in 195ms
 GET /socket.io?EIO=4&transport=polling&t=yt03qtqt 404 in 202ms
 GET /socket.io?EIO=4&transport=polling&t=yt09fbw6 404 in 141ms
 GET /api/socket-health 200 in 37ms
 GET /api/socket-health 200 in 147ms
 GET /socket.io?EIO=4&transport=polling&t=yt1n47rj 404 in 259ms
 GET /socket.io?EIO=4&transport=polling&t=yt1r8knj 404 in 115ms
 GET /api/socket-health 200 in 46ms
 GET /api/socket-health 200 in 58ms
 GET /socket.io?EIO=4&transport=polling&t=yt386c5f 404 in 244ms
 GET /socket.io?EIO=4&transport=polling&t=yt39e6s5 404 in 103ms
 GET /api/socket-health 200 in 27ms
 GET /api/socket-health 200 in 110ms
 GET /socket.io?EIO=4&transport=polling&t=yt4q3ove 404 in 196ms
 GET /socket.io?EIO=4&transport=polling&t=yt4t8k3u 404 in 95ms
 GET /api/socket-health 200 in 27ms
 GET /api/socket-health 200 in 105ms
 GET /socket.io?EIO=4&transport=polling&t=yt69n7ur 404 in 183ms
 GET /socket.io?EIO=4&transport=polling&t=yt6cnl7o 404 in 95ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
 POST /api/users/heartbeat 200 in 176ms
 GET /api/socket-health 200 in 35ms
 GET /api/socket-health 200 in 101ms
 GET /socket.io?EIO=4&transport=polling&t=yt7tex5q 404 in 191ms
 GET /socket.io?EIO=4&transport=polling&t=yt7w93ov 404 in 101ms
 GET /api/socket-health 200 in 27ms
 GET /api/socket-health 200 in 103ms
 GET /socket.io?EIO=4&transport=polling&t=yt9cpltk 404 in 194ms
 GET /socket.io?EIO=4&transport=polling&t=yt9fl117 404 in 97ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
 GET /api/conversations 200 in 129ms
 GET /api/socket-health 200 in 28ms
 GET /api/socket-health 200 in 109ms
 GET /socket.io?EIO=4&transport=polling&t=ytaw66tl 404 in 187ms
 GET /socket.io?EIO=4&transport=polling&t=ytaz9o57 404 in 99ms
 GET /api/socket-health 200 in 27ms
 GET /api/socket-health 200 in 103ms
 GET /socket.io?EIO=4&transport=polling&t=ytcflc0q 404 in 187ms
 GET /socket.io?EIO=4&transport=polling&t=ytciiq0i 404 in 96ms
 GET /api/socket-health 200 in 31ms
 GET /api/socket-health 200 in 109ms
 GET /socket.io?EIO=4&transport=polling&t=ytdzdmoh 404 in 192ms
 GET /socket.io?EIO=4&transport=polling&t=yte2g5xz 404 in 101ms
 GET /api/socket-health 200 in 34ms
 GET /api/socket-health 200 in 126ms
 GET /socket.io?EIO=4&transport=polling&t=ytfiyspi 404 in 219ms
 GET /socket.io?EIO=4&transport=polling&t=ytfmh1ut 404 in 109ms
 GET /api/socket-health 200 in 29ms
 GET /api/socket-health 200 in 119ms
 GET /socket.io?EIO=4&transport=polling&t=yth2a8n0 404 in 265ms
 GET /socket.io?EIO=4&transport=polling&t=yth5nimu 404 in 154ms
 GET /api/socket-health 200 in 53ms
=== FRIEND REQUEST GET START ===
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
Request type: received User: sayantan2@gmail.com
âœ… Database connected
âœ… Current user found: {
  id: new ObjectId('6901f85f42c5d010fa811206'),
  email: 'sayantan2@gmail.com',
  friendRequestsCount: 0,
  sentRequestsCount: 1
}
Processing received requests...
Raw friendRequests: []
Processed receivedRequests: []
Populating sender details...
Final populated requests: []
=== FRIEND REQUEST GET END (received) ===
 GET /api/friends/request?type=received 200 in 164ms
 GET /api/socket-health 200 in 119ms
=== FRIEND REQUEST GET START ===
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
Request type: sent User: sayantan2@gmail.com
âœ… Database connected
âœ… Current user found: {
  id: new ObjectId('6901f85f42c5d010fa811206'),
  email: 'sayantan2@gmail.com',
  friendRequestsCount: 0,
  sentRequestsCount: 1
}
Processing sent requests...
Raw sentRequests: [
  {
    from: new ObjectId('6901f85f42c5d010fa811206'),
    fromName: 'sayantan2',
    to: new ObjectId('6905adf16a22b7843b006183'),
    toName: 'sayantan3',
    status: 'pending',
    _id: new ObjectId('6905cdce14ad0d0f020b3985'),
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
Filtering sent request: { status: 'pending', to: new ObjectId('6905adf16a22b7843b006183') }
Mapping sent request: {
  from: new ObjectId('6901f85f42c5d010fa811206'),
  fromName: 'sayantan2',
  to: new ObjectId('6905adf16a22b7843b006183'),
  toName: 'sayantan3',
  status: 'pending',
  _id: new ObjectId('6905cdce14ad0d0f020b3985'),
  createdAt: 2025-11-01T09:07:26.707Z,
  updatedAt: 2025-11-01T09:07:26.707Z
}
Processed sentRequests: [
  {
    id: '6905cdce14ad0d0f020b3985',
    to: {
      id: '6905adf16a22b7843b006183',
      username: 'sayantan3',
      email: '',
      profilePicture: null
    },
    status: 'pending',
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
Populating recipient details...
Looking up recipient: 6905adf16a22b7843b006183
 GET /socket.io?EIO=4&transport=polling&t=ytimm3rw 404 in 239ms
 GET /socket.io?EIO=4&transport=polling&t=ytiq2pgp 404 in 116ms
Found recipient: sayantan3
Final populated sent requests: [
  {
    id: '6905cdce14ad0d0f020b3985',
    to: {
      id: '6905adf16a22b7843b006183',
      username: 'sayantan3',
      email: 'sayantan3@gmail.com',
      profilePicture: undefined
    },
    status: 'pending',
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
=== FRIEND REQUEST GET END (sent) ===
 GET /api/friends/request?type=sent 200 in 162ms
 GET /api/socket-health 200 in 26ms
 GET /api/socket-health 200 in 112ms
 GET /socket.io?EIO=4&transport=polling&t=ytk5nf67 404 in 115ms
 GET /socket.io?EIO=4&transport=polling&t=ytk8uq3w 404 in 90ms
 GET /api/socket-health 200 in 26ms
 GET /api/socket-health 200 in 114ms
 GET /socket.io?EIO=4&transport=polling&t=ytlp0t4v 404 in 191ms
 GET /socket.io?EIO=4&transport=polling&t=ytls7gw1 404 in 95ms
 GET /api/socket-health 200 in 30ms
 GET /api/socket-health 200 in 114ms
 GET /socket.io?EIO=4&transport=polling&t=ytn8if0q 404 in 203ms
 GET /socket.io?EIO=4&transport=polling&t=ytnbpdz5 404 in 100ms
 GET /api/socket-health 200 in 27ms
 GET /api/socket-health 200 in 150ms
 GET /socket.io?EIO=4&transport=polling&t=ytos6gvv 404 in 272ms
 GET /socket.io?EIO=4&transport=polling&t=ytowdqn5 404 in 140ms
 GET /api/socket-health 200 in 33ms
 GET /api/socket-health 200 in 112ms
 GET /socket.io?EIO=4&transport=polling&t=ytqbnwag 404 in 202ms
 GET /socket.io?EIO=4&transport=polling&t=ytqeu72x 404 in 93ms
 GET /api/socket-health 200 in 41ms
 GET /api/socket-health 200 in 124ms
 GET /socket.io?EIO=4&transport=polling&t=ytrvp55b 404 in 217ms
 GET /socket.io?EIO=4&transport=polling&t=ytrz6cey 404 in 114ms
 GET /api/socket-health 200 in 43ms
 GET /api/socket-health 200 in 169ms
 GET /socket.io?EIO=4&transport=polling&t=yttfi1yu 404 in 314ms
 GET /socket.io?EIO=4&transport=polling&t=yttkfxd1 404 in 145ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
 POST /api/users/heartbeat 200 in 200ms
 GET /api/socket-health 200 in 47ms
 GET /api/socket-health 200 in 181ms
 GET /socket.io?EIO=4&transport=polling&t=ytuz19oo 404 in 176ms
 GET /socket.io?EIO=4&transport=polling&t=ytv4374n 404 in 131ms
 GET /api/socket-health 200 in 28ms
 GET /api/socket-health 200 in 110ms
 GET /socket.io?EIO=4&transport=polling&t=ytwhwuy3 404 in 200ms
 GET /socket.io?EIO=4&transport=polling&t=ytwkzlmg 404 in 101ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
 GET /api/socket-health 200 in 62ms
 GET /api/socket-health 200 in 103ms
 GET /api/conversations 200 in 252ms
 GET /socket.io?EIO=4&transport=polling&t=yty2akb6 404 in 187ms
 GET /socket.io?EIO=4&transport=polling&t=yty579vw 404 in 95ms
 GET /api/socket-health 200 in 36ms
 GET /api/socket-health 200 in 146ms
 GET /socket.io?EIO=4&transport=polling&t=ytzlhn50 404 in 256ms
 GET /socket.io?EIO=4&transport=polling&t=ytzpntkt 404 in 118ms
 GET /api/socket-health 200 in 36ms
 GET /api/socket-health 200 in 108ms
 GET /socket.io?EIO=4&transport=polling&t=yu14xwgi 404 in 202ms
 GET /socket.io?EIO=4&transport=polling&t=yu180guj 404 in 104ms
 GET /api/socket-health 200 in 30ms
 GET /api/socket-health 200 in 113ms
 GET /socket.io?EIO=4&transport=polling&t=yu2o4106 404 in 211ms
 GET /socket.io?EIO=4&transport=polling&t=yu2rclw4 404 in 99ms
 GET /api/socket-health 200 in 26ms
 GET /api/socket-health 200 in 114ms
 GET /socket.io?EIO=4&transport=polling&t=yu47re4z 404 in 218ms
 GET /socket.io?EIO=4&transport=polling&t=yu4ay2yd 404 in 114ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
=== FRIEND REQUEST GET START ===
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
Request type: received User: sayantan2@gmail.com
âœ… Database connected
 GET /api/friends 200 in 158ms
âœ… Current user found: {
  id: new ObjectId('6901f85f42c5d010fa811206'),
  email: 'sayantan2@gmail.com',
  friendRequestsCount: 0,
  sentRequestsCount: 1
}
Processing received requests...
Raw friendRequests: []
Processed receivedRequests: []
Populating sender details...
Final populated requests: []
=== FRIEND REQUEST GET END (received) ===
 GET /api/friends/request?type=received 200 in 438ms
=== FRIEND REQUEST GET START ===
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
Request type: sent User: sayantan2@gmail.com
âœ… Database connected
âœ… Current user found: {
  id: new ObjectId('6901f85f42c5d010fa811206'),
  email: 'sayantan2@gmail.com',
  friendRequestsCount: 0,
  sentRequestsCount: 1
}
Processing sent requests...
Raw sentRequests: [
  {
    from: new ObjectId('6901f85f42c5d010fa811206'),
    fromName: 'sayantan2',
    to: new ObjectId('6905adf16a22b7843b006183'),
    toName: 'sayantan3',
    status: 'pending',
    _id: new ObjectId('6905cdce14ad0d0f020b3985'),
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
Filtering sent request: { status: 'pending', to: new ObjectId('6905adf16a22b7843b006183') }
Mapping sent request: {
  from: new ObjectId('6901f85f42c5d010fa811206'),
  fromName: 'sayantan2',
  to: new ObjectId('6905adf16a22b7843b006183'),
  toName: 'sayantan3',
  status: 'pending',
  _id: new ObjectId('6905cdce14ad0d0f020b3985'),
  createdAt: 2025-11-01T09:07:26.707Z,
  updatedAt: 2025-11-01T09:07:26.707Z
}
Processed sentRequests: [
  {
    id: '6905cdce14ad0d0f020b3985',
    to: {
      id: '6905adf16a22b7843b006183',
      username: 'sayantan3',
      email: '',
      profilePicture: null
    },
    status: 'pending',
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
Populating recipient details...
Looking up recipient: 6905adf16a22b7843b006183
Found recipient: sayantan3
Final populated sent requests: [
  {
    id: '6905cdce14ad0d0f020b3985',
    to: {
      id: '6905adf16a22b7843b006183',
      username: 'sayantan3',
      email: 'sayantan3@gmail.com',
      profilePicture: undefined
    },
    status: 'pending',
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
=== FRIEND REQUEST GET END (sent) ===
 GET /api/friends/request?type=sent 200 in 147ms
 GET /api/socket-health 200 in 44ms
 GET /api/socket-health 200 in 193ms
 GET /socket.io?EIO=4&transport=polling&t=yu5rp74z 404 in 202ms
 GET /socket.io?EIO=4&transport=polling&t=yu5x5mnh 404 in 149ms
 GET /api/socket-health 200 in 54ms
 GET /api/socket-health 200 in 168ms
 GET /socket.io?EIO=4&transport=polling&t=yu7bxhy5 404 in 539ms
 GET /socket.io?EIO=4&transport=polling&t=yu7jjly6 404 in 288ms
 GET /api/socket-health 200 in 40ms
 GET /api/socket-health 200 in 126ms
 GET /socket.io?EIO=4&transport=polling&t=yu8up4e4 404 in 126ms
 GET /socket.io?EIO=4&transport=polling&t=yu8y9ine 404 in 119ms
 GET /api/socket-health 200 in 31ms
 GET /api/socket-health 200 in 112ms
 GET /socket.io?EIO=4&transport=polling&t=yuae5wgn 404 in 204ms
 GET /socket.io?EIO=4&transport=polling&t=yuahbv1c 404 in 97ms
 GET /api/socket-health 200 in 29ms
 GET /api/socket-health 200 in 106ms
 GET /socket.io?EIO=4&transport=polling&t=yubxo5g8 404 in 112ms
 GET /socket.io?EIO=4&transport=polling&t=yuc0n8su 404 in 102ms
 GET /api/socket-health 200 in 28ms
 GET /api/socket-health 200 in 103ms
 GET /socket.io?EIO=4&transport=polling&t=yudh500w 404 in 191ms
 GET /socket.io?EIO=4&transport=polling&t=yudk3zf6 404 in 90ms
 GET /api/socket-health 200 in 34ms
 GET /api/socket-health 200 in 103ms
 GET /socket.io?EIO=4&transport=polling&t=yuf0w7hg 404 in 183ms
 GET /socket.io?EIO=4&transport=polling&t=yuf3ttov 404 in 94ms
 GET /api/socket-health 200 in 32ms
 GET /api/socket-health 200 in 106ms
 GET /socket.io?EIO=4&transport=polling&t=yugkbowf 404 in 195ms
 GET /socket.io?EIO=4&transport=polling&t=yugnc8e6 404 in 92ms
 GET /api/socket-health 200 in 29ms
 GET /api/socket-health 200 in 103ms
 GET /socket.io?EIO=4&transport=polling&t=yui3try1 404 in 198ms
 GET /socket.io?EIO=4&transport=polling&t=yui6r9v1 404 in 105ms
 GET /api/socket-health 200 in 29ms
 GET /api/socket-health 200 in 113ms
 GET /socket.io?EIO=4&transport=polling&t=yujnbyqn 404 in 200ms
 GET /socket.io?EIO=4&transport=polling&t=yujqisa6 404 in 92ms
 GET /api/socket-health 200 in 34ms
 GET /api/socket-health 200 in 108ms
 GET /socket.io?EIO=4&transport=polling&t=yul6x1z7 404 in 211ms
 GET /socket.io?EIO=4&transport=polling&t=yul9yp41 404 in 113ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
 GET /api/conversations 200 in 238ms
 GET /api/socket-health 200 in 28ms
 GET /api/socket-health 200 in 103ms
 GET /socket.io?EIO=4&transport=polling&t=yumqbjmm 404 in 189ms
 GET /socket.io?EIO=4&transport=polling&t=yumt86wz 404 in 89ms
 GET /api/socket-health 200 in 39ms
 GET /api/socket-health 200 in 115ms
 GET /socket.io?EIO=4&transport=polling&t=yuoabz7h 404 in 118ms
 GET /socket.io?EIO=4&transport=polling&t=yuodkcdk 404 in 105ms
 GET /api/socket-health 200 in 29ms
 GET /api/socket-health 200 in 111ms
 GET /socket.io?EIO=4&transport=polling&t=yuptncnu 404 in 199ms
 GET /socket.io?EIO=4&transport=polling&t=yupws90y 404 in 90ms
 GET /api/socket-health 200 in 29ms
 GET /api/socket-health 200 in 120ms
 GET /socket.io?EIO=4&transport=polling&t=yurd9ze3 404 in 211ms
 GET /socket.io?EIO=4&transport=polling&t=yurgnq75 404 in 103ms
 GET /api/socket-health 200 in 54ms
=== FRIEND REQUEST GET START ===
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
Request type: received User: sayantan2@gmail.com
âœ… Database connected
âœ… Current user found: {
  id: new ObjectId('6901f85f42c5d010fa811206'),
  email: 'sayantan2@gmail.com',
  friendRequestsCount: 0,
  sentRequestsCount: 1
}
Processing received requests...
Raw friendRequests: []
Processed receivedRequests: []
Populating sender details...
Final populated requests: []
=== FRIEND REQUEST GET END (received) ===
 GET /api/friends/request?type=received 200 in 160ms
 GET /api/socket-health 200 in 122ms
=== FRIEND REQUEST GET START ===
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
Request type: sent User: sayantan2@gmail.com
âœ… Database connected
 GET /socket.io?EIO=4&transport=polling&t=yusxcgdh 404 in 221ms
 GET /socket.io?EIO=4&transport=polling&t=yut0v5ct 404 in 98ms
âœ… Current user found: {
  id: new ObjectId('6901f85f42c5d010fa811206'),
  email: 'sayantan2@gmail.com',
  friendRequestsCount: 0,
  sentRequestsCount: 1
}
Processing sent requests...
Raw sentRequests: [
  {
    from: new ObjectId('6901f85f42c5d010fa811206'),
    fromName: 'sayantan2',
    to: new ObjectId('6905adf16a22b7843b006183'),
    toName: 'sayantan3',
    status: 'pending',
    _id: new ObjectId('6905cdce14ad0d0f020b3985'),
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
Filtering sent request: { status: 'pending', to: new ObjectId('6905adf16a22b7843b006183') }
Mapping sent request: {
  from: new ObjectId('6901f85f42c5d010fa811206'),
  fromName: 'sayantan2',
  to: new ObjectId('6905adf16a22b7843b006183'),
  toName: 'sayantan3',
  status: 'pending',
  _id: new ObjectId('6905cdce14ad0d0f020b3985'),
  createdAt: 2025-11-01T09:07:26.707Z,
  updatedAt: 2025-11-01T09:07:26.707Z
}
Processed sentRequests: [
  {
    id: '6905cdce14ad0d0f020b3985',
    to: {
      id: '6905adf16a22b7843b006183',
      username: 'sayantan3',
      email: '',
      profilePicture: null
    },
    status: 'pending',
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
Populating recipient details...
Looking up recipient: 6905adf16a22b7843b006183
Found recipient: sayantan3
Final populated sent requests: [
  {
    id: '6905cdce14ad0d0f020b3985',
    to: {
      id: '6905adf16a22b7843b006183',
      username: 'sayantan3',
      email: 'sayantan3@gmail.com',
      profilePicture: undefined
    },
    status: 'pending',
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
=== FRIEND REQUEST GET END (sent) ===
 GET /api/friends/request?type=sent 200 in 196ms
 GET /api/socket-health 200 in 27ms
 GET /api/socket-health 200 in 112ms
 GET /socket.io?EIO=4&transport=polling&t=yuug4xkf 404 in 194ms
 GET /socket.io?EIO=4&transport=polling&t=yuujaig6 404 in 98ms
 GET /api/socket-health 200 in 29ms
 GET /api/socket-health 200 in 104ms
 GET /socket.io?EIO=4&transport=polling&t=yuvznt6n 404 in 107ms
 GET /socket.io?EIO=4&transport=polling&t=yuw2nidv 404 in 97ms
 GET /api/socket-health 200 in 38ms
 GET /api/socket-health 200 in 126ms
 GET /socket.io?EIO=4&transport=polling&t=yuxjpqcl 404 in 202ms
 GET /socket.io?EIO=4&transport=polling&t=yuxnaldp 404 in 97ms
 GET /api/socket-health 200 in 30ms
 GET /api/socket-health 200 in 103ms
 GET /socket.io?EIO=4&transport=polling&t=yuz2rlsb 404 in 185ms
 GET /socket.io?EIO=4&transport=polling&t=yuz5pkqx 404 in 87ms
 GET /api/socket-health 200 in 34ms
 GET /api/socket-health 200 in 120ms
 GET /socket.io?EIO=4&transport=polling&t=yv0mdhap 404 in 122ms
 GET /socket.io?EIO=4&transport=polling&t=yv0pr4da 404 in 130ms
 GET /api/socket-health 200 in 27ms
 GET /api/socket-health 200 in 105ms
 GET /socket.io?EIO=4&transport=polling&t=yv25yuke 404 in 194ms
 GET /socket.io?EIO=4&transport=polling&t=yv28yhls 404 in 94ms
 GET /api/socket-health 200 in 35ms
 GET /api/socket-health 200 in 105ms
 GET /socket.io?EIO=4&transport=polling&t=yv3pw9pt 404 in 186ms
 GET /socket.io?EIO=4&transport=polling&t=yv3swf8d 404 in 90ms
 GET /api/socket-health 200 in 30ms
 GET /api/socket-health 200 in 112ms
 GET /socket.io?EIO=4&transport=polling&t=yv595ja9 404 in 208ms
 GET /socket.io?EIO=4&transport=polling&t=yv5cez6l 404 in 96ms
 GET /api/socket-health 200 in 33ms
 GET /api/socket-health 200 in 114ms
 GET /socket.io?EIO=4&transport=polling&t=yv6sxxhg 404 in 197ms
 GET /socket.io?EIO=4&transport=polling&t=yv6w7gyg 404 in 97ms
 GET /api/socket-health 200 in 33ms
 GET /api/socket-health 200 in 126ms
 GET /socket.io?EIO=4&transport=polling&t=yv8cfk5k 404 in 207ms
 GET /socket.io?EIO=4&transport=polling&t=yv8fzbfv 404 in 92ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
 GET /api/socket-health 200 in 51ms
 GET /api/socket-health 200 in 128ms
 GET /api/conversations 200 in 201ms
 GET /socket.io?EIO=4&transport=polling&t=yv9wgtfa 404 in 219ms
 GET /socket.io?EIO=4&transport=polling&t=yva02rhb 404 in 105ms
 GET /api/socket-health 200 in 29ms
 GET /api/socket-health 200 in 106ms
 GET /socket.io?EIO=4&transport=polling&t=yvbficyy 404 in 116ms
 GET /socket.io?EIO=4&transport=polling&t=yvbiid45 404 in 102ms
 GET /api/socket-health 200 in 68ms
 GET /api/socket-health 200 in 285ms
 GET /socket.io?EIO=4&transport=polling&t=yvd06o8q 404 in 387ms
 GET /socket.io?EIO=4&transport=polling&t=yvd84b0a 404 in 118ms
 GET /api/socket-health 200 in 28ms
 GET /api/socket-health 200 in 120ms
 GET /socket.io?EIO=4&transport=polling&t=yveihfis 404 in 130ms
 GET /socket.io?EIO=4&transport=polling&t=yvelxidt 404 in 116ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
=== FRIEND REQUEST GET START ===
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
Request type: received User: sayantan2@gmail.com
âœ… Database connected
 POST /api/users/heartbeat 200 in 228ms
âœ… Current user found: {
  id: new ObjectId('6901f85f42c5d010fa811206'),
  email: 'sayantan2@gmail.com',
  friendRequestsCount: 0,
  sentRequestsCount: 1
}
Processing received requests...
Raw friendRequests: []
Processed receivedRequests: []
Populating sender details...
Final populated requests: []
=== FRIEND REQUEST GET END (received) ===
 GET /api/friends/request?type=received 200 in 568ms
 GET /api/friends 200 in 612ms
=== FRIEND REQUEST GET START ===
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
Request type: sent User: sayantan2@gmail.com
âœ… Database connected
âœ… Current user found: {
  id: new ObjectId('6901f85f42c5d010fa811206'),
  email: 'sayantan2@gmail.com',
  friendRequestsCount: 0,
  sentRequestsCount: 1
}
Processing sent requests...
Raw sentRequests: [
  {
    from: new ObjectId('6901f85f42c5d010fa811206'),
    fromName: 'sayantan2',
    to: new ObjectId('6905adf16a22b7843b006183'),
    toName: 'sayantan3',
    status: 'pending',
    _id: new ObjectId('6905cdce14ad0d0f020b3985'),
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
Filtering sent request: { status: 'pending', to: new ObjectId('6905adf16a22b7843b006183') }
Mapping sent request: {
  from: new ObjectId('6901f85f42c5d010fa811206'),
  fromName: 'sayantan2',
  to: new ObjectId('6905adf16a22b7843b006183'),
  toName: 'sayantan3',
  status: 'pending',
  _id: new ObjectId('6905cdce14ad0d0f020b3985'),
  createdAt: 2025-11-01T09:07:26.707Z,
  updatedAt: 2025-11-01T09:07:26.707Z
}
Processed sentRequests: [
  {
    id: '6905cdce14ad0d0f020b3985',
    to: {
      id: '6905adf16a22b7843b006183',
      username: 'sayantan3',
      email: '',
      profilePicture: null
    },
    status: 'pending',
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
Populating recipient details...
Looking up recipient: 6905adf16a22b7843b006183
Found recipient: sayantan3
Final populated sent requests: [
  {
    id: '6905cdce14ad0d0f020b3985',
    to: {
      id: '6905adf16a22b7843b006183',
      username: 'sayantan3',
      email: 'sayantan3@gmail.com',
      profilePicture: undefined
    },
    status: 'pending',
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
=== FRIEND REQUEST GET END (sent) ===
 GET /api/friends/request?type=sent 200 in 157ms
 GET /api/socket-health 200 in 36ms
 GET /api/socket-health 200 in 141ms
 GET /socket.io?EIO=4&transport=polling&t=yvg28flj 404 in 136ms
 GET /socket.io?EIO=4&transport=polling&t=yvg6awat 404 in 136ms
 GET /api/socket-health 200 in 62ms
 GET /api/socket-health 200 in 192ms
 GET /socket.io?EIO=4&transport=polling&t=yvhmeupf 404 in 269ms
 GET /socket.io?EIO=4&transport=polling&t=yvhrsxhh 404 in 113ms
 GET /api/socket-health 200 in 28ms
 GET /api/socket-health 200 in 108ms
 GET /socket.io?EIO=4&transport=polling&t=yvj4wujq 404 in 203ms
 GET /socket.io?EIO=4&transport=polling&t=yvj7z92c 404 in 105ms
 GET /api/socket-health 200 in 29ms
 GET /api/socket-health 200 in 123ms
 GET /socket.io?EIO=4&transport=polling&t=yvkovebv 404 in 122ms
 GET /socket.io?EIO=4&transport=polling&t=yvksb24d 404 in 103ms
 GET /api/socket-health 200 in 29ms
 GET /api/socket-health 200 in 112ms
 GET /socket.io?EIO=4&transport=polling&t=yvm89u1x 404 in 195ms
 GET /socket.io?EIO=4&transport=polling&t=yvmbfz0y 404 in 95ms
 GET /api/socket-health 200 in 29ms
 GET /api/socket-health 200 in 131ms
 GET /socket.io?EIO=4&transport=polling&t=yvnrp5zx 404 in 207ms
 GET /socket.io?EIO=4&transport=polling&t=yvnvfj34 404 in 98ms
 GET /api/socket-health 200 in 33ms
 GET /api/socket-health 200 in 108ms
 GET /socket.io?EIO=4&transport=polling&t=yvpbdy4t 404 in 120ms
 GET /socket.io?EIO=4&transport=polling&t=yvpeg5th 404 in 145ms
 GET /api/socket-health 200 in 42ms
 GET /api/socket-health 200 in 125ms
 GET /socket.io?EIO=4&transport=polling&t=yvqvfect 404 in 211ms
 GET /socket.io?EIO=4&transport=polling&t=yvqyxdvb 404 in 99ms
 GET /api/socket-health 200 in 26ms
 GET /api/socket-health 200 in 112ms
 GET /socket.io?EIO=4&transport=polling&t=yvsegxqe 404 in 199ms
 GET /socket.io?EIO=4&transport=polling&t=yvshl2fg 404 in 91ms
 GET /api/socket-health 200 in 33ms
 GET /api/socket-health 200 in 102ms
 GET /socket.io?EIO=4&transport=polling&t=yvty2tih 404 in 112ms
 GET /socket.io?EIO=4&transport=polling&t=yvu0y5oz 404 in 103ms
 GET /api/socket-health 200 in 28ms
 GET /api/socket-health 200 in 108ms
 GET /socket.io?EIO=4&transport=polling&t=yvvhas1i 404 in 194ms
 GET /socket.io?EIO=4&transport=polling&t=yvvkd170 404 in 90ms
 GET /api/socket-health 200 in 49ms
 GET /api/socket-health 200 in 140ms
 GET /socket.io?EIO=4&transport=polling&t=yvx1orty 404 in 248ms
 GET /socket.io?EIO=4&transport=polling&t=yvx5n2r5 404 in 123ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
 GET /api/conversations 200 in 134ms
 GET /api/socket-health 200 in 47ms
 GET /api/socket-health 200 in 153ms
 GET /socket.io?EIO=4&transport=polling&t=yvyl0y4i 404 in 153ms
 GET /socket.io?EIO=4&transport=polling&t=yvypbigl 404 in 112ms
 GET /api/socket-health 200 in 40ms
 GET /api/socket-health 200 in 136ms
 GET /socket.io?EIO=4&transport=polling&t=yw04rw8d 404 in 236ms
 GET /socket.io?EIO=4&transport=polling&t=yw08lui1 404 in 107ms
 GET /api/socket-health 200 in 37ms
 GET /api/socket-health 200 in 132ms
 GET /socket.io?EIO=4&transport=polling&t=yw1ogpf1 404 in 238ms
 GET /socket.io?EIO=4&transport=polling&t=yw1s6291 404 in 121ms
 GET /api/socket-health 200 in 70ms
=== FRIEND REQUEST GET START ===
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
Request type: received User: sayantan2@gmail.com
âœ… Database connected
âœ… Current user found: {
  id: new ObjectId('6901f85f42c5d010fa811206'),
  email: 'sayantan2@gmail.com',
  friendRequestsCount: 0,
  sentRequestsCount: 1
}
Processing received requests...
Raw friendRequests: []
Processed receivedRequests: []
Populating sender details...
Final populated requests: []
=== FRIEND REQUEST GET END (received) ===
 GET /api/friends/request?type=received 200 in 212ms
 GET /api/socket-health 200 in 165ms
=== FRIEND REQUEST GET START ===
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
Request type: sent User: sayantan2@gmail.com
âœ… Database connected
 GET /socket.io?EIO=4&transport=polling&t=yw38hwk4 404 in 293ms
 GET /socket.io?EIO=4&transport=polling&t=yw3d8kem 404 in 140ms
âœ… Current user found: {
  id: new ObjectId('6901f85f42c5d010fa811206'),
  email: 'sayantan2@gmail.com',
  friendRequestsCount: 0,
  sentRequestsCount: 1
}
Processing sent requests...
Raw sentRequests: [
  {
    from: new ObjectId('6901f85f42c5d010fa811206'),
    fromName: 'sayantan2',
    to: new ObjectId('6905adf16a22b7843b006183'),
    toName: 'sayantan3',
    status: 'pending',
    _id: new ObjectId('6905cdce14ad0d0f020b3985'),
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
Filtering sent request: { status: 'pending', to: new ObjectId('6905adf16a22b7843b006183') }
Mapping sent request: {
  from: new ObjectId('6901f85f42c5d010fa811206'),
  fromName: 'sayantan2',
  to: new ObjectId('6905adf16a22b7843b006183'),
  toName: 'sayantan3',
  status: 'pending',
  _id: new ObjectId('6905cdce14ad0d0f020b3985'),
  createdAt: 2025-11-01T09:07:26.707Z,
  updatedAt: 2025-11-01T09:07:26.707Z
}
Processed sentRequests: [
  {
    id: '6905cdce14ad0d0f020b3985',
    to: {
      id: '6905adf16a22b7843b006183',
      username: 'sayantan3',
      email: '',
      profilePicture: null
    },
    status: 'pending',
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
Populating recipient details...
Looking up recipient: 6905adf16a22b7843b006183
Found recipient: sayantan3
Final populated sent requests: [
  {
    id: '6905cdce14ad0d0f020b3985',
    to: {
      id: '6905adf16a22b7843b006183',
      username: 'sayantan3',
      email: 'sayantan3@gmail.com',
      profilePicture: undefined
    },
    status: 'pending',
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
=== FRIEND REQUEST GET END (sent) ===
 GET /api/friends/request?type=sent 200 in 232ms
 GET /api/socket-health 200 in 39ms
 GET /api/socket-health 200 in 146ms
 GET /socket.io?EIO=4&transport=polling&t=yw4r3klc 404 in 248ms
 GET /socket.io?EIO=4&transport=polling&t=yw4v860u 404 in 125ms
 GET /api/socket-health 200 in 38ms
 GET /api/socket-health 200 in 180ms
 GET /socket.io?EIO=4&transport=polling&t=yw6awu2d 404 in 320ms
 GET /socket.io?EIO=4&transport=polling&t=yw6fy2ny 404 in 140ms
 GET /api/socket-health 200 in 49ms
 GET /api/socket-health 200 in 147ms
 GET /socket.io?EIO=4&transport=polling&t=yw7ui322 404 in 255ms
 GET /socket.io?EIO=4&transport=polling&t=yw7yqnqj 404 in 120ms
 GET /api/socket-health 200 in 46ms
 GET /api/socket-health 200 in 276ms
 GET /socket.io?EIO=4&transport=polling&t=yw9ducoh 404 in 548ms
 GET /socket.io?EIO=4&transport=polling&t=yw9llyeu 404 in 251ms
 GET /api/socket-health 200 in 54ms
 GET /api/socket-health 200 in 196ms
 GET /socket.io?EIO=4&transport=polling&t=ywaxr26n 404 in 338ms
 GET /socket.io?EIO=4&transport=polling&t=ywb3a4en 404 in 163ms
 GET /api/socket-health 200 in 60ms
 GET /api/socket-health 200 in 255ms
 GET /socket.io?EIO=4&transport=polling&t=ywchkusc 404 in 382ms
 GET /socket.io?EIO=4&transport=polling&t=ywcor8v1 404 in 140ms
 GET /api/socket-health 200 in 73ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
 GET /api/auth/session 200 in 126ms
 GET /api/socket-health 200 in 255ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
=== FRIEND REQUEST GET START ===
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
Request type: received User: sayantan2@gmail.com
âœ… Database connected
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
 GET /socket.io?EIO=4&transport=polling&t=ywe1uxur 404 in 396ms
âœ… Current user found: {
  id: new ObjectId('6901f85f42c5d010fa811206'),
  email: 'sayantan2@gmail.com',
  friendRequestsCount: 0,
  sentRequestsCount: 1
}
Processing received requests...
Raw friendRequests: []
Processed receivedRequests: []
Populating sender details...
Final populated requests: []
=== FRIEND REQUEST GET END (received) ===
 GET /api/friends/request?type=received 200 in 445ms
 GET /api/random-chat/queue 200 in 521ms
=== FRIEND REQUEST GET START ===
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
Request type: sent User: sayantan2@gmail.com
âœ… Database connected
 GET /api/users/me 200 in 607ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
âœ… Current user found: {
  id: new ObjectId('6901f85f42c5d010fa811206'),
  email: 'sayantan2@gmail.com',
  friendRequestsCount: 0,
  sentRequestsCount: 1
}
Processing sent requests...
Raw sentRequests: [
  {
    from: new ObjectId('6901f85f42c5d010fa811206'),
    fromName: 'sayantan2',
    to: new ObjectId('6905adf16a22b7843b006183'),
    toName: 'sayantan3',
    status: 'pending',
    _id: new ObjectId('6905cdce14ad0d0f020b3985'),
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
Filtering sent request: { status: 'pending', to: new ObjectId('6905adf16a22b7843b006183') }
Mapping sent request: {
  from: new ObjectId('6901f85f42c5d010fa811206'),
  fromName: 'sayantan2',
  to: new ObjectId('6905adf16a22b7843b006183'),
  toName: 'sayantan3',
  status: 'pending',
  _id: new ObjectId('6905cdce14ad0d0f020b3985'),
  createdAt: 2025-11-01T09:07:26.707Z,
  updatedAt: 2025-11-01T09:07:26.707Z
}
Processed sentRequests: [
  {
    id: '6905cdce14ad0d0f020b3985',
    to: {
      id: '6905adf16a22b7843b006183',
      username: 'sayantan3',
      email: '',
      profilePicture: null
    },
    status: 'pending',
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
Populating recipient details...
Looking up recipient: 6905adf16a22b7843b006183
Found recipient: sayantan3
Final populated sent requests: [
  {
    id: '6905cdce14ad0d0f020b3985',
    to: {
      id: '6905adf16a22b7843b006183',
      username: 'sayantan3',
      email: 'sayantan3@gmail.com',
      profilePicture: undefined
    },
    status: 'pending',
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
=== FRIEND REQUEST GET END (sent) ===
 GET /api/friends/request?type=sent 200 in 275ms
 GET /socket.io?EIO=4&transport=polling&t=ywe94dpg 404 in 485ms
 GET /api/friends 200 in 774ms
 POST /api/users/heartbeat 200 in 835ms
 GET /api/random-chat/session 200 in 619ms
 GET /api/socket-health 200 in 453ms
 GET /api/socket-health 200 in 156ms
 GET /socket.io?EIO=4&transport=polling&t=ywfx1kd3 404 in 646ms
 GET /socket.io?EIO=4&transport=polling&t=ywghktu7 404 in 177ms
 GET /api/socket-health 200 in 50ms
 GET /api/socket-health 200 in 195ms
 GET /socket.io?EIO=4&transport=polling&t=ywhvjrqv 404 in 317ms
 GET /socket.io?EIO=4&transport=polling&t=ywi110h0 404 in 144ms
 GET /api/socket-health 200 in 39ms
 GET /api/socket-health 200 in 164ms
 GET /socket.io?EIO=4&transport=polling&t=ywjewz4x 404 in 166ms
 GET /socket.io?EIO=4&transport=polling&t=ywjjjbba 404 in 134ms
 GET /api/socket-health 200 in 45ms
 GET /api/socket-health 200 in 163ms
 GET /socket.io?EIO=4&transport=polling&t=ywkyhlrn 404 in 282ms
 GET /socket.io?EIO=4&transport=polling&t=ywl36xyh 404 in 135ms
 GET /api/socket-health 200 in 44ms
 GET /api/socket-health 200 in 163ms
 GET /socket.io?EIO=4&transport=polling&t=ywmieec8 404 in 269ms
 GET /socket.io?EIO=4&transport=polling&t=ywmn0m72 404 in 156ms
 GET /api/socket-health 200 in 59ms
 GET /api/socket-health 200 in 202ms
 GET /socket.io?EIO=4&transport=polling&t=ywo26akz 404 in 198ms
 GET /socket.io?EIO=4&transport=polling&t=ywo7us9q 404 in 139ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
=== FRIEND REQUEST GET START ===
 GET /api/socket-health 200 in 153ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
Request type: received User: sayantan2@gmail.com
âœ… Database connected
âœ… Current user found: {
  id: new ObjectId('6901f85f42c5d010fa811206'),
  email: 'sayantan2@gmail.com',
  friendRequestsCount: 0,
  sentRequestsCount: 1
}
Processing received requests...
Raw friendRequests: []
Processed receivedRequests: []
Populating sender details...
Final populated requests: []
=== FRIEND REQUEST GET END (received) ===
 GET /api/friends/request?type=received 200 in 240ms
 GET /api/friends 200 in 320ms
 GET /api/socket-health 200 in 218ms
=== FRIEND REQUEST GET START ===
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
Request type: sent User: sayantan2@gmail.com
âœ… Database connected
 GET /socket.io?EIO=4&transport=polling&t=ywppjnml 404 in 381ms
 GET /socket.io?EIO=4&transport=polling&t=ywpvu998 404 in 176ms
âœ… Current user found: {
  id: new ObjectId('6901f85f42c5d010fa811206'),
  email: 'sayantan2@gmail.com',
  friendRequestsCount: 0,
  sentRequestsCount: 1
}
Processing sent requests...
Raw sentRequests: [
  {
    from: new ObjectId('6901f85f42c5d010fa811206'),
    fromName: 'sayantan2',
    to: new ObjectId('6905adf16a22b7843b006183'),
    toName: 'sayantan3',
    status: 'pending',
    _id: new ObjectId('6905cdce14ad0d0f020b3985'),
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
Filtering sent request: { status: 'pending', to: new ObjectId('6905adf16a22b7843b006183') }
Mapping sent request: {
  from: new ObjectId('6901f85f42c5d010fa811206'),
  fromName: 'sayantan2',
  to: new ObjectId('6905adf16a22b7843b006183'),
  toName: 'sayantan3',
  status: 'pending',
  _id: new ObjectId('6905cdce14ad0d0f020b3985'),
  createdAt: 2025-11-01T09:07:26.707Z,
  updatedAt: 2025-11-01T09:07:26.707Z
}
Processed sentRequests: [
  {
    id: '6905cdce14ad0d0f020b3985',
    to: {
      id: '6905adf16a22b7843b006183',
      username: 'sayantan3',
      email: '',
      profilePicture: null
    },
    status: 'pending',
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
Populating recipient details...
Looking up recipient: 6905adf16a22b7843b006183
Found recipient: sayantan3
Final populated sent requests: [
  {
    id: '6905cdce14ad0d0f020b3985',
    to: {
      id: '6905adf16a22b7843b006183',
      username: 'sayantan3',
      email: 'sayantan3@gmail.com',
      profilePicture: undefined
    },
    status: 'pending',
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
=== FRIEND REQUEST GET END (sent) ===
 GET /api/friends/request?type=sent 200 in 307ms
 GET /api/socket-health 200 in 41ms
 GET /api/socket-health 200 in 183ms
 GET /socket.io?EIO=4&transport=polling&t=ywr4s1ty 404 in 194ms
 GET /socket.io?EIO=4&transport=polling&t=ywra3dd8 404 in 191ms
 GET /api/socket-health 200 in 152ms
 GET /api/socket-health 200 in 125ms
 GET /socket.io?EIO=4&transport=polling&t=ywsvyvs2 404 in 775ms
 GET /socket.io?EIO=4&transport=polling&t=ywsykr2a 404 in 419ms
 GET /api/socket-health 200 in 45ms
 GET /api/socket-health 200 in 152ms
 GET /socket.io?EIO=4&transport=polling&t=ywuzxccy 404 in 274ms
 GET /socket.io?EIO=4&transport=polling&t=ywv49o1w 404 in 130ms
 GET /api/socket-health 200 in 40ms
 GET /api/socket-health 200 in 146ms
 GET /socket.io?EIO=4&transport=polling&t=ywwj6lf6 404 in 265ms
 GET /socket.io?EIO=4&transport=polling&t=ywwnb76i 404 in 122ms
 GET /api/socket-health 200 in 52ms
 GET /api/socket-health 200 in 142ms
 GET /socket.io?EIO=4&transport=polling&t=ywy326j6 404 in 193ms
 GET /socket.io?EIO=4&transport=polling&t=ywy73pbj 404 in 130ms
 GET /api/socket-health 200 in 56ms
 GET /api/socket-health 200 in 149ms
 GET /socket.io?EIO=4&transport=polling&t=ywzn8zco 404 in 249ms
 GET /socket.io?EIO=4&transport=polling&t=ywzrfp4c 404 in 108ms
 GET /api/socket-health 200 in 48ms
 GET /api/socket-health 200 in 154ms
 GET /socket.io?EIO=4&transport=polling&t=yx16bqx0 404 in 156ms
 GET /socket.io?EIO=4&transport=polling&t=yx1an0ng 404 in 116ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
 POST /api/users/heartbeat 200 in 189ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
 GET /api/socket-health 200 in 75ms
 GET /api/conversations 200 in 217ms
 GET /api/socket-health 200 in 155ms
 GET /socket.io?EIO=4&transport=polling&t=yx2qjqne 404 in 261ms
 GET /socket.io?EIO=4&transport=polling&t=yx2uxfys 404 in 122ms
 GET /api/socket-health 200 in 36ms
 GET /api/socket-health 200 in 144ms
 GET /socket.io?EIO=4&transport=polling&t=yx48vz5j 404 in 228ms
 GET /socket.io?EIO=4&transport=polling&t=yx4cxee4 404 in 118ms
 GET /api/socket-health 200 in 38ms
 GET /api/socket-health 200 in 140ms
 GET /socket.io?EIO=4&transport=polling&t=yx5skpzj 404 in 243ms
 GET /socket.io?EIO=4&transport=polling&t=yx5wjzrx 404 in 117ms
 GET /api/socket-health 200 in 43ms
 GET /api/socket-health 200 in 147ms
 GET /socket.io?EIO=4&transport=polling&t=yx7c48ss 404 in 250ms
 GET /socket.io?EIO=4&transport=polling&t=yx7g90rq 404 in 120ms
 GET /api/socket-health 200 in 40ms
 GET /api/socket-health 200 in 150ms
 GET /socket.io?EIO=4&transport=polling&t=yx8vghj7 404 in 262ms
 GET /socket.io?EIO=4&transport=polling&t=yx8zoq1y 404 in 124ms
 GET /api/socket-health 200 in 47ms
 GET /api/socket-health 200 in 154ms
 GET /socket.io?EIO=4&transport=polling&t=yxaf7xnc 404 in 261ms
 GET /socket.io?EIO=4&transport=polling&t=yxajkai0 404 in 121ms
 GET /api/socket-health 200 in 47ms
 GET /api/socket-health 200 in 193ms
 GET /socket.io?EIO=4&transport=polling&t=yxbysaos 404 in 310ms
 GET /socket.io?EIO=4&transport=polling&t=yxc49ljn 404 in 130ms
 GET /api/socket-health 200 in 55ms
=== FRIEND REQUEST GET START ===
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
Request type: received User: sayantan2@gmail.com
âœ… Database connected
âœ… Current user found: {
  id: new ObjectId('6901f85f42c5d010fa811206'),
  email: 'sayantan2@gmail.com',
  friendRequestsCount: 0,
  sentRequestsCount: 1
}
Processing received requests...
Raw friendRequests: []
Processed receivedRequests: []
Populating sender details...
Final populated requests: []
=== FRIEND REQUEST GET END (received) ===
 GET /api/friends/request?type=received 200 in 187ms
 GET /api/socket-health 200 in 154ms
=== FRIEND REQUEST GET START ===
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
Request type: sent User: sayantan2@gmail.com
âœ… Database connected
 GET /socket.io?EIO=4&transport=polling&t=yxdiugme 404 in 307ms
 GET /socket.io?EIO=4&transport=polling&t=yxdn9zrz 404 in 160ms
âœ… Current user found: {
  id: new ObjectId('6901f85f42c5d010fa811206'),
  email: 'sayantan2@gmail.com',
  friendRequestsCount: 0,
  sentRequestsCount: 1
}
Processing sent requests...
Raw sentRequests: [
  {
    from: new ObjectId('6901f85f42c5d010fa811206'),
    fromName: 'sayantan2',
    to: new ObjectId('6905adf16a22b7843b006183'),
    toName: 'sayantan3',
    status: 'pending',
    _id: new ObjectId('6905cdce14ad0d0f020b3985'),
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
Filtering sent request: { status: 'pending', to: new ObjectId('6905adf16a22b7843b006183') }
Mapping sent request: {
  from: new ObjectId('6901f85f42c5d010fa811206'),
  fromName: 'sayantan2',
  to: new ObjectId('6905adf16a22b7843b006183'),
  toName: 'sayantan3',
  status: 'pending',
  _id: new ObjectId('6905cdce14ad0d0f020b3985'),
  createdAt: 2025-11-01T09:07:26.707Z,
  updatedAt: 2025-11-01T09:07:26.707Z
}
Processed sentRequests: [
  {
    id: '6905cdce14ad0d0f020b3985',
    to: {
      id: '6905adf16a22b7843b006183',
      username: 'sayantan3',
      email: '',
      profilePicture: null
    },
    status: 'pending',
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
Populating recipient details...
Looking up recipient: 6905adf16a22b7843b006183
Found recipient: sayantan3
Final populated sent requests: [
  {
    id: '6905cdce14ad0d0f020b3985',
    to: {
      id: '6905adf16a22b7843b006183',
      username: 'sayantan3',
      email: 'sayantan3@gmail.com',
      profilePicture: undefined
    },
    status: 'pending',
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
=== FRIEND REQUEST GET END (sent) ===
 GET /api/friends/request?type=sent 200 in 244ms
 GET /api/socket-health 200 in 39ms
 GET /api/socket-health 200 in 149ms
 GET /socket.io?EIO=4&transport=polling&t=yxf1sxjf 404 in 144ms
 GET /socket.io?EIO=4&transport=polling&t=yxf5yfbl 404 in 109ms
 POST /api/auth/signup 400 in 84ms
 GET /api/socket-health 200 in 37ms
 GET /api/socket-health 200 in 183ms
 GET /socket.io?EIO=4&transport=polling&t=yxgl5itc 404 in 177ms
 GET /socket.io?EIO=4&transport=polling&t=yxgqhivc 404 in 111ms
 GET /api/socket-health 200 in 62ms
 GET /api/socket-health 200 in 188ms
 GET /socket.io?EIO=4&transport=polling&t=yxi5vrem 404 in 308ms
 GET /socket.io?EIO=4&transport=polling&t=yxib6tas 404 in 141ms
 GET /api/socket-health 200 in 38ms
 GET /api/socket-health 200 in 178ms
 GET /socket.io?EIO=4&transport=polling&t=yxjon0vi 404 in 307ms
 GET /socket.io?EIO=4&transport=polling&t=yxjtol17 404 in 155ms
 GET /api/socket-health 200 in 65ms
 GET /api/socket-health 200 in 181ms
 GET /socket.io?EIO=4&transport=polling&t=yxl8rzvo 404 in 289ms
 GET /socket.io?EIO=4&transport=polling&t=yxlds7qx 404 in 119ms
 POST /api/auth/signup 400 in 102ms
 GET /api/socket-health 200 in 130ms
 POST /api/auth/signup 400 in 160ms
 GET /api/socket-health 200 in 332ms
 POST /api/auth/signup 400 in 127ms
 GET /socket.io?EIO=4&transport=polling&t=yxmu8vzs 404 in 666ms
 GET /socket.io?EIO=4&transport=polling&t=yxn3tk74 404 in 296ms
 POST /api/auth/signup 400 in 81ms
 GET /api/socket-health 200 in 71ms
 GET /api/socket-health 200 in 183ms
 GET /socket.io?EIO=4&transport=polling&t=yxocbsku 404 in 177ms
 GET /socket.io?EIO=4&transport=polling&t=yxohgqh3 404 in 140ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
 POST /api/users/heartbeat 200 in 192ms
 GET /api/socket-health 200 in 40ms
 GET /api/socket-health 200 in 130ms
 GET /socket.io?EIO=4&transport=polling&t=yxpus1s0 404 in 227ms
 GET /socket.io?EIO=4&transport=polling&t=yxpyjm0z 404 in 108ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
 GET /api/conversations 200 in 152ms
 GET /api/socket-health 200 in 45ms
 GET /api/socket-health 200 in 150ms
 GET /socket.io?EIO=4&transport=polling&t=yxrehzxh 404 in 257ms
 GET /socket.io?EIO=4&transport=polling&t=yxripvn9 404 in 118ms
 GET /api/socket-health 200 in 30ms
 GET /api/socket-health 200 in 117ms
 GET /socket.io?EIO=4&transport=polling&t=yxsxh2zv 404 in 206ms
 GET /socket.io?EIO=4&transport=polling&t=yxt0t1ts 404 in 94ms
 GET /api/socket-health 200 in 41ms
 GET /api/socket-health 200 in 140ms
 GET /socket.io?EIO=4&transport=polling&t=yxuh7aan 404 in 136ms
 GET /socket.io?EIO=4&transport=polling&t=yxul6j4a 404 in 114ms
 GET /api/socket-health 200 in 33ms
 GET /api/socket-health 200 in 134ms
 GET /socket.io?EIO=4&transport=polling&t=yxw0pwe3 404 in 229ms
 GET /socket.io?EIO=4&transport=polling&t=yxw4kll0 404 in 104ms
 GET /api/socket-health 200 in 45ms
 GET /api/socket-health 200 in 1670ms
 GET /socket.io?EIO=4&transport=polling&t=yxxkiil2 404 in 1639ms
 GET /socket.io?EIO=4&transport=polling&t=yxyuyiqo 404 in 97ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
=== FRIEND REQUEST GET START ===
 GET /api/socket-health 200 in 105ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
Request type: received User: sayantan2@gmail.com
âœ… Database connected
 GET /api/friends 200 in 251ms
 GET /api/socket-health 200 in 133ms
 GET /socket.io?EIO=4&transport=polling&t=yxzyrufi 404 in 139ms
 GET /socket.io?EIO=4&transport=polling&t=yy02pddb 404 in 165ms
âœ… Current user found: {
  id: new ObjectId('6901f85f42c5d010fa811206'),
  email: 'sayantan2@gmail.com',
  friendRequestsCount: 0,
  sentRequestsCount: 1
}
Processing received requests...
Raw friendRequests: []
Processed receivedRequests: []
Populating sender details...
Final populated requests: []
=== FRIEND REQUEST GET END (received) ===
 GET /api/friends/request?type=received 200 in 722ms
=== FRIEND REQUEST GET START ===
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
Request type: sent User: sayantan2@gmail.com
âœ… Database connected
âœ… Current user found: {
  id: new ObjectId('6901f85f42c5d010fa811206'),
  email: 'sayantan2@gmail.com',
  friendRequestsCount: 0,
  sentRequestsCount: 1
}
Processing sent requests...
Raw sentRequests: [
  {
    from: new ObjectId('6901f85f42c5d010fa811206'),
    fromName: 'sayantan2',
    to: new ObjectId('6905adf16a22b7843b006183'),
    toName: 'sayantan3',
    status: 'pending',
    _id: new ObjectId('6905cdce14ad0d0f020b3985'),
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
Filtering sent request: { status: 'pending', to: new ObjectId('6905adf16a22b7843b006183') }
Mapping sent request: {
  from: new ObjectId('6901f85f42c5d010fa811206'),
  fromName: 'sayantan2',
  to: new ObjectId('6905adf16a22b7843b006183'),
  toName: 'sayantan3',
  status: 'pending',
  _id: new ObjectId('6905cdce14ad0d0f020b3985'),
  createdAt: 2025-11-01T09:07:26.707Z,
  updatedAt: 2025-11-01T09:07:26.707Z
}
Processed sentRequests: [
  {
    id: '6905cdce14ad0d0f020b3985',
    to: {
      id: '6905adf16a22b7843b006183',
      username: 'sayantan3',
      email: '',
      profilePicture: null
    },
    status: 'pending',
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
Populating recipient details...
Looking up recipient: 6905adf16a22b7843b006183
Found recipient: sayantan3
Final populated sent requests: [
  {
    id: '6905cdce14ad0d0f020b3985',
    to: {
      id: '6905adf16a22b7843b006183',
      username: 'sayantan3',
      email: 'sayantan3@gmail.com',
      profilePicture: undefined
    },
    status: 'pending',
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
=== FRIEND REQUEST GET END (sent) ===
 GET /api/friends/request?type=sent 200 in 139ms
 GET /api/socket-health 200 in 113ms
 GET /api/socket-health 200 in 103ms
 GET /socket.io?EIO=4&transport=polling&t=yy1kseoo 404 in 333ms
 GET /socket.io?EIO=4&transport=polling&t=yy1lgl5f 404 in 148ms
 GET /api/socket-health 200 in 27ms
 GET /api/socket-health 200 in 109ms
 GET /socket.io?EIO=4&transport=polling&t=yy2yqgss 404 in 203ms
 GET /socket.io?EIO=4&transport=polling&t=yy31st4z 404 in 98ms
 GET /api/socket-health 200 in 40ms
 GET /api/socket-health 200 in 124ms
 GET /socket.io?EIO=4&transport=polling&t=yy4j2y0r 404 in 205ms
 GET /socket.io?EIO=4&transport=polling&t=yy4mkwj1 404 in 97ms
 GET /api/socket-health 200 in 29ms
 GET /api/socket-health 200 in 113ms
 GET /socket.io?EIO=4&transport=polling&t=yy61v2jt 404 in 201ms
 GET /socket.io?EIO=4&transport=polling&t=yy65337z 404 in 93ms
 GET /api/socket-health 200 in 31ms
 GET /api/socket-health 200 in 113ms
 GET /socket.io?EIO=4&transport=polling&t=yy7l91qx 404 in 208ms
 GET /socket.io?EIO=4&transport=polling&t=yy7ofyem 404 in 105ms
 GET /api/socket-health 200 in 33ms
 GET /api/socket-health 200 in 131ms
 GET /socket.io?EIO=4&transport=polling&t=yy94y6tt 404 in 215ms
 GET /socket.io?EIO=4&transport=polling&t=yy98nk1b 404 in 91ms
 GET /api/socket-health 200 in 33ms
 GET /api/socket-health 200 in 124ms
 GET /socket.io?EIO=4&transport=polling&t=yyaofgj7 404 in 209ms
 GET /socket.io?EIO=4&transport=polling&t=yyarxs6d 404 in 100ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
 GET /api/socket-health 200 in 55ms
 GET /api/socket-health 200 in 125ms
 GET /socket.io?EIO=4&transport=polling&t=yyc8lmhq 404 in 214ms
 GET /socket.io?EIO=4&transport=polling&t=yycc4oj0 404 in 98ms
 POST /api/users/heartbeat 200 in 324ms
 GET /api/socket-health 200 in 29ms
 GET /api/socket-health 200 in 107ms
 GET /socket.io?EIO=4&transport=polling&t=yydrk0x5 404 in 189ms
 GET /socket.io?EIO=4&transport=polling&t=yydulaoq 404 in 86ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
 GET /api/conversations 200 in 139ms
 GET /api/socket-health 200 in 28ms
 GET /api/socket-health 200 in 108ms
 GET /socket.io?EIO=4&transport=polling&t=yyfb1jzb 404 in 230ms
 GET /socket.io?EIO=4&transport=polling&t=yyfe3sje 404 in 142ms
 GET /api/socket-health 200 in 28ms
 GET /api/socket-health 200 in 113ms
 GET /socket.io?EIO=4&transport=polling&t=yygukqzj 404 in 114ms
 GET /socket.io?EIO=4&transport=polling&t=yygxrvhg 404 in 92ms
 GET /api/socket-health 200 in 26ms
 GET /api/socket-health 200 in 108ms
 GET /socket.io?EIO=4&transport=polling&t=yyie3jc5 404 in 187ms
 GET /socket.io?EIO=4&transport=polling&t=yyih5j27 404 in 100ms
 GET /api/socket-health 200 in 36ms
 GET /api/socket-health 200 in 145ms
 GET /socket.io?EIO=4&transport=polling&t=yyjxrbaw 404 in 244ms
 GET /socket.io?EIO=4&transport=polling&t=yyk1wzul 404 in 111ms
 GET /api/socket-health 200 in 39ms
 GET /api/socket-health 200 in 133ms
 GET /socket.io?EIO=4&transport=polling&t=yylhfpul 404 in 243ms
 GET /socket.io?EIO=4&transport=polling&t=yyll6nn3 404 in 127ms
 GET /api/socket-health 200 in 38ms
 GET /api/socket-health 200 in 141ms
 GET /socket.io?EIO=4&transport=polling&t=yyn0x0hg 404 in 241ms
 GET /socket.io?EIO=4&transport=polling&t=yyn4wo92 404 in 113ms
=== FRIEND REQUEST GET START ===
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
Request type: received User: sayantan2@gmail.com
âœ… Database connected
âœ… Current user found: {
  id: new ObjectId('6901f85f42c5d010fa811206'),
  email: 'sayantan2@gmail.com',
  friendRequestsCount: 0,
  sentRequestsCount: 1
}
Processing received requests...
Raw friendRequests: []
Processed receivedRequests: []
Populating sender details...
Final populated requests: []
=== FRIEND REQUEST GET END (received) ===
 GET /api/friends/request?type=received 200 in 134ms
=== FRIEND REQUEST GET START ===
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
Request type: sent User: sayantan2@gmail.com
âœ… Database connected
âœ… Current user found: {
  id: new ObjectId('6901f85f42c5d010fa811206'),
  email: 'sayantan2@gmail.com',
  friendRequestsCount: 0,
  sentRequestsCount: 1
}
Processing sent requests...
Raw sentRequests: [
  {
    from: new ObjectId('6901f85f42c5d010fa811206'),
    fromName: 'sayantan2',
    to: new ObjectId('6905adf16a22b7843b006183'),
    toName: 'sayantan3',
    status: 'pending',
    _id: new ObjectId('6905cdce14ad0d0f020b3985'),
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
Filtering sent request: { status: 'pending', to: new ObjectId('6905adf16a22b7843b006183') }
Mapping sent request: {
  from: new ObjectId('6901f85f42c5d010fa811206'),
  fromName: 'sayantan2',
  to: new ObjectId('6905adf16a22b7843b006183'),
  toName: 'sayantan3',
  status: 'pending',
  _id: new ObjectId('6905cdce14ad0d0f020b3985'),
  createdAt: 2025-11-01T09:07:26.707Z,
  updatedAt: 2025-11-01T09:07:26.707Z
}
Processed sentRequests: [
  {
    id: '6905cdce14ad0d0f020b3985',
    to: {
      id: '6905adf16a22b7843b006183',
      username: 'sayantan3',
      email: '',
      profilePicture: null
    },
    status: 'pending',
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
Populating recipient details...
Looking up recipient: 6905adf16a22b7843b006183
Found recipient: sayantan3
Final populated sent requests: [
  {
    id: '6905cdce14ad0d0f020b3985',
    to: {
      id: '6905adf16a22b7843b006183',
      username: 'sayantan3',
      email: 'sayantan3@gmail.com',
      profilePicture: undefined
    },
    status: 'pending',
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
=== FRIEND REQUEST GET END (sent) ===
 GET /api/friends/request?type=sent 200 in 164ms
 GET /api/socket-health 200 in 30ms
 GET /api/socket-health 200 in 189ms
 GET /socket.io?EIO=4&transport=polling&t=yyokbfbj 404 in 363ms
 GET /socket.io?EIO=4&transport=polling&t=yyoplf51 404 in 211ms
 GET /api/socket-health 200 in 76ms
 GET /api/socket-health 200 in 295ms
 GET /socket.io?EIO=4&transport=polling&t=yyq5kbur 404 in 310ms
 GET /socket.io?EIO=4&transport=polling&t=yyqdzs7e 404 in 145ms
 GET /api/socket-health 200 in 33ms
 GET /api/socket-health 200 in 121ms
 GET /socket.io?EIO=4&transport=polling&t=yyro3ks3 404 in 199ms
 GET /socket.io?EIO=4&transport=polling&t=yyrrjmb9 404 in 100ms
 GET /api/socket-health 200 in 27ms
 GET /api/socket-health 200 in 109ms
 GET /socket.io?EIO=4&transport=polling&t=yyt77hky 404 in 117ms
 GET /socket.io?EIO=4&transport=polling&t=yytaa3hf 404 in 86ms
 GET /api/socket-health 200 in 27ms
 GET /api/socket-health 200 in 116ms
 GET /socket.io?EIO=4&transport=polling&t=yyuqkchp 404 in 193ms
 GET /socket.io?EIO=4&transport=polling&t=yyutvruc 404 in 97ms
 GET /api/socket-health 200 in 30ms
 GET /api/socket-health 200 in 120ms
 GET /socket.io?EIO=4&transport=polling&t=yywa36dv 404 in 209ms
 GET /socket.io?EIO=4&transport=polling&t=yywdhutm 404 in 100ms
 GET /api/socket-health 200 in 29ms
 GET /api/socket-health 200 in 112ms
 GET /socket.io?EIO=4&transport=polling&t=yyxtphvx 404 in 112ms
 GET /socket.io?EIO=4&transport=polling&t=yyxwwg1m 404 in 98ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
 GET /api/socket-health 200 in 55ms
 GET /api/socket-health 200 in 143ms
 GET /socket.io?EIO=4&transport=polling&t=yyzdv3da 404 in 227ms
 GET /socket.io?EIO=4&transport=polling&t=yyzhw57l 404 in 97ms
 POST /api/users/heartbeat 200 in 337ms
 GET /api/socket-health 200 in 44ms
 GET /api/socket-health 200 in 122ms
 GET /socket.io?EIO=4&transport=polling&t=yz0xhqem 404 in 124ms
 GET /socket.io?EIO=4&transport=polling&t=yz10ykrn 404 in 111ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
 GET /api/socket-health 200 in 55ms
 GET /api/socket-health 200 in 123ms
 GET /api/conversations 200 in 295ms
 GET /socket.io?EIO=4&transport=polling&t=yz2h3prw 404 in 238ms
 GET /socket.io?EIO=4&transport=polling&t=yz2kkgkv 404 in 123ms
 GET /api/socket-health 200 in 30ms
 GET /api/socket-health 200 in 109ms
 GET /socket.io?EIO=4&transport=polling&t=yz4062sf 404 in 115ms
 GET /socket.io?EIO=4&transport=polling&t=yz43h4mn 404 in 98ms
 GET /api/socket-health 200 in 27ms
 GET /api/socket-health 200 in 103ms
 GET /socket.io?EIO=4&transport=polling&t=yz5jl6uq 404 in 187ms
 GET /socket.io?EIO=4&transport=polling&t=yz5mivp0 404 in 88ms
 GET /api/socket-health 200 in 38ms
 GET /api/socket-health 200 in 122ms
 GET /socket.io?EIO=4&transport=polling&t=yz73f2zz 404 in 123ms
 GET /socket.io?EIO=4&transport=polling&t=yz76wgp9 404 in 94ms
 GET /api/socket-health 200 in 30ms
 GET /api/socket-health 200 in 102ms
 GET /socket.io?EIO=4&transport=polling&t=yz8ml5to 404 in 188ms
 GET /socket.io?EIO=4&transport=polling&t=yz8ph21b 404 in 91ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
=== FRIEND REQUEST GET START ===
 GET /api/socket-health 200 in 95ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
Request type: received User: sayantan2@gmail.com
âœ… Database connected
 GET /api/friends 200 in 245ms
 GET /api/socket-health 200 in 173ms
 GET /socket.io?EIO=4&transport=polling&t=yza8bbws 404 in 218ms
 GET /socket.io?EIO=4&transport=polling&t=yzag2o0x 404 in 132ms
âœ… Current user found: {
  id: new ObjectId('6901f85f42c5d010fa811206'),
  email: 'sayantan2@gmail.com',
  friendRequestsCount: 0,
  sentRequestsCount: 1
}
Processing received requests...
Raw friendRequests: []
Processed receivedRequests: []
Populating sender details...
Final populated requests: []
=== FRIEND REQUEST GET END (received) ===
 GET /api/friends/request?type=received 200 in 650ms
=== FRIEND REQUEST GET START ===
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
Request type: sent User: sayantan2@gmail.com
âœ… Database connected
âœ… Current user found: {
  id: new ObjectId('6901f85f42c5d010fa811206'),
  email: 'sayantan2@gmail.com',
  friendRequestsCount: 0,
  sentRequestsCount: 1
}
Processing sent requests...
Raw sentRequests: [
  {
    from: new ObjectId('6901f85f42c5d010fa811206'),
    fromName: 'sayantan2',
    to: new ObjectId('6905adf16a22b7843b006183'),
    toName: 'sayantan3',
    status: 'pending',
    _id: new ObjectId('6905cdce14ad0d0f020b3985'),
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
Filtering sent request: { status: 'pending', to: new ObjectId('6905adf16a22b7843b006183') }
Mapping sent request: {
  from: new ObjectId('6901f85f42c5d010fa811206'),
  fromName: 'sayantan2',
  to: new ObjectId('6905adf16a22b7843b006183'),
  toName: 'sayantan3',
  status: 'pending',
  _id: new ObjectId('6905cdce14ad0d0f020b3985'),
  createdAt: 2025-11-01T09:07:26.707Z,
  updatedAt: 2025-11-01T09:07:26.707Z
}
Processed sentRequests: [
  {
    id: '6905cdce14ad0d0f020b3985',
    to: {
      id: '6905adf16a22b7843b006183',
      username: 'sayantan3',
      email: '',
      profilePicture: null
    },
    status: 'pending',
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
Populating recipient details...
Looking up recipient: 6905adf16a22b7843b006183
Found recipient: sayantan3
Final populated sent requests: [
  {
    id: '6905cdce14ad0d0f020b3985',
    to: {
      id: '6905adf16a22b7843b006183',
      username: 'sayantan3',
      email: 'sayantan3@gmail.com',
      profilePicture: undefined
    },
    status: 'pending',
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
=== FRIEND REQUEST GET END (sent) ===
 GET /api/friends/request?type=sent 200 in 152ms
 GET /api/socket-health 200 in 63ms
 GET /api/socket-health 200 in 104ms
 GET /socket.io?EIO=4&transport=polling&t=yzbre5jm 404 in 556ms
 GET /socket.io?EIO=4&transport=polling&t=yzbucgm9 404 in 194ms
 GET /api/socket-health 200 in 49ms
 GET /api/socket-health 200 in 161ms
 GET /socket.io?EIO=4&transport=polling&t=yzd9zdky 404 in 264ms
 GET /socket.io?EIO=4&transport=polling&t=yzdeg6qc 404 in 111ms
 GET /api/socket-health 200 in 42ms
 GET /api/socket-health 200 in 127ms
 GET /socket.io?EIO=4&transport=polling&t=yzetooqa 404 in 206ms
 GET /socket.io?EIO=4&transport=polling&t=yzex8vzc 404 in 105ms
 GET /api/socket-health 200 in 30ms
 GET /api/socket-health 200 in 123ms
 GET /socket.io?EIO=4&transport=polling&t=yzgcij4m 404 in 240ms
 GET /socket.io?EIO=4&transport=polling&t=yzgfzx3a 404 in 120ms
 GET /api/socket-health 200 in 38ms
 GET /api/socket-health 200 in 117ms
 GET /socket.io?EIO=4&transport=polling&t=yzhw9m8t 404 in 119ms
 GET /socket.io?EIO=4&transport=polling&t=yzhznhao 404 in 92ms
 GET /api/socket-health 200 in 37ms
 GET /api/socket-health 200 in 34ms
 GET /socket.io?EIO=4&transport=polling&t=yzjfk5cf 404 in 202ms
 GET /socket.io?EIO=4&transport=polling&t=yzjgkk9q 404 in 105ms
 GET /api/socket-health 200 in 38ms
 GET /api/socket-health 200 in 120ms
 GET /socket.io?EIO=4&transport=polling&t=yzkzfxrm 404 in 212ms
 GET /socket.io?EIO=4&transport=polling&t=yzl2ttv6 404 in 106ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
 GET /api/socket-health 200 in 64ms
 GET /api/socket-health 200 in 125ms
 GET /socket.io?EIO=4&transport=polling&t=yzmjpvbr 404 in 215ms
 GET /socket.io?EIO=4&transport=polling&t=yzmnaw1m 404 in 111ms
 POST /api/users/heartbeat 200 in 344ms
 GET /api/socket-health 200 in 32ms
 GET /api/socket-health 200 in 104ms
 GET /socket.io?EIO=4&transport=polling&t=yzo23huh 404 in 192ms
 GET /socket.io?EIO=4&transport=polling&t=yzo51ic6 404 in 96ms
 GET /api/socket-health 200 in 29ms
 GET /api/socket-health 200 in 114ms
 GET /socket.io?EIO=4&transport=polling&t=yzplsijf 404 in 197ms
 GET /socket.io?EIO=4&transport=polling&t=yzpp0ahj 404 in 95ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
 GET /api/conversations 200 in 137ms
 GET /api/socket-health 200 in 41ms
 GET /api/socket-health 200 in 124ms
 GET /socket.io?EIO=4&transport=polling&t=yzr5tt79 404 in 213ms
 GET /socket.io?EIO=4&transport=polling&t=yzr9biv7 404 in 104ms
 GET /api/socket-health 200 in 26ms
 GET /api/socket-health 200 in 117ms
 GET /socket.io?EIO=4&transport=polling&t=yzspphk8 404 in 187ms
 GET /socket.io?EIO=4&transport=polling&t=yzsszhlp 404 in 85ms
 GET /api/socket-health 200 in 34ms
 GET /api/socket-health 200 in 104ms
 GET /socket.io?EIO=4&transport=polling&t=yzu8pb8s 404 in 193ms
 GET /socket.io?EIO=4&transport=polling&t=yzubmyl8 404 in 99ms
 GET /api/socket-health 200 in 36ms
 GET /api/socket-health 200 in 106ms
 GET /socket.io?EIO=4&transport=polling&t=yzvsbmrn 404 in 219ms
 GET /socket.io?EIO=4&transport=polling&t=yzvvckqu 404 in 126ms
 GET /api/socket-health 200 in 27ms
 GET /api/socket-health 200 in 111ms
 GET /socket.io?EIO=4&transport=polling&t=yzxbkw8x 404 in 116ms
 GET /socket.io?EIO=4&transport=polling&t=yzxeqpre 404 in 98ms
=== FRIEND REQUEST GET START ===
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
Request type: received User: sayantan2@gmail.com
âœ… Database connected
âœ… Current user found: {
  id: new ObjectId('6901f85f42c5d010fa811206'),
  email: 'sayantan2@gmail.com',
  friendRequestsCount: 0,
  sentRequestsCount: 1
}
Processing received requests...
Raw friendRequests: []
Processed receivedRequests: []
Populating sender details...
Final populated requests: []
=== FRIEND REQUEST GET END (received) ===
 GET /api/friends/request?type=received 200 in 109ms
=== FRIEND REQUEST GET START ===
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
Request type: sent User: sayantan2@gmail.com
âœ… Database connected
âœ… Current user found: {
  id: new ObjectId('6901f85f42c5d010fa811206'),
  email: 'sayantan2@gmail.com',
  friendRequestsCount: 0,
  sentRequestsCount: 1
}
Processing sent requests...
Raw sentRequests: [
  {
    from: new ObjectId('6901f85f42c5d010fa811206'),
    fromName: 'sayantan2',
    to: new ObjectId('6905adf16a22b7843b006183'),
    toName: 'sayantan3',
    status: 'pending',
    _id: new ObjectId('6905cdce14ad0d0f020b3985'),
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
Filtering sent request: { status: 'pending', to: new ObjectId('6905adf16a22b7843b006183') }
Mapping sent request: {
  from: new ObjectId('6901f85f42c5d010fa811206'),
  fromName: 'sayantan2',
  to: new ObjectId('6905adf16a22b7843b006183'),
  toName: 'sayantan3',
  status: 'pending',
  _id: new ObjectId('6905cdce14ad0d0f020b3985'),
  createdAt: 2025-11-01T09:07:26.707Z,
  updatedAt: 2025-11-01T09:07:26.707Z
}
Processed sentRequests: [
  {
    id: '6905cdce14ad0d0f020b3985',
    to: {
      id: '6905adf16a22b7843b006183',
      username: 'sayantan3',
      email: '',
      profilePicture: null
    },
    status: 'pending',
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
Populating recipient details...
Looking up recipient: 6905adf16a22b7843b006183
Found recipient: sayantan3
Final populated sent requests: [
  {
    id: '6905cdce14ad0d0f020b3985',
    to: {
      id: '6905adf16a22b7843b006183',
      username: 'sayantan3',
      email: 'sayantan3@gmail.com',
      profilePicture: undefined
    },
    status: 'pending',
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
=== FRIEND REQUEST GET END (sent) ===
 GET /api/friends/request?type=sent 200 in 152ms
 GET /api/socket-health 200 in 30ms
 GET /api/socket-health 200 in 119ms
 GET /socket.io?EIO=4&transport=polling&t=yzyvcgwx 404 in 119ms
 GET /socket.io?EIO=4&transport=polling&t=yzyyph0p 404 in 102ms
 GET /api/socket-health 200 in 28ms
 GET /api/socket-health 200 in 110ms
 GET /socket.io?EIO=4&transport=polling&t=z00eny4w 404 in 109ms
 GET /socket.io?EIO=4&transport=polling&t=z00hrq14 404 in 93ms
 GET /api/socket-health 200 in 29ms
 GET /api/socket-health 200 in 115ms
 GET /socket.io?EIO=4&transport=polling&t=z01ykxrg 404 in 202ms
 GET /socket.io?EIO=4&transport=polling&t=z021trxf 404 in 102ms
 GET /api/socket-health 200 in 28ms
 GET /api/socket-health 200 in 114ms
 GET /socket.io?EIO=4&transport=polling&t=z03hri7n 404 in 117ms
 GET /socket.io?EIO=4&transport=polling&t=z03kz8wh 404 in 111ms
 GET /api/socket-health 200 in 32ms
 GET /api/socket-health 200 in 129ms
 GET /socket.io?EIO=4&transport=polling&t=z051g4nn 404 in 289ms
 GET /socket.io?EIO=4&transport=polling&t=z05545bx 404 in 173ms
 GET /api/socket-health 200 in 35ms
 GET /api/socket-health 200 in 113ms
 GET /socket.io?EIO=4&transport=polling&t=z06l5ta0 404 in 217ms
 GET /socket.io?EIO=4&transport=polling&t=z06oc6r0 404 in 114ms
 GET /api/socket-health 200 in 30ms
 GET /api/socket-health 200 in 130ms
 GET /socket.io?EIO=4&transport=polling&t=z084ikyw 404 in 229ms
 GET /socket.io?EIO=4&transport=polling&t=z0886t38 404 in 104ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
 GET /api/socket-health 200 in 58ms
 GET /api/socket-health 200 in 112ms
 GET /socket.io?EIO=4&transport=polling&t=z09ossd6 404 in 202ms
 GET /socket.io?EIO=4&transport=polling&t=z09ryfek 404 in 99ms
 POST /api/users/heartbeat 200 in 308ms
 GET /api/socket-health 200 in 26ms
 GET /api/socket-health 200 in 110ms
 GET /socket.io?EIO=4&transport=polling&t=z0b7d573 404 in 192ms
 GET /socket.io?EIO=4&transport=polling&t=z0bahk61 404 in 100ms
 GET /api/socket-health 200 in 28ms
 GET /api/socket-health 200 in 108ms
 GET /socket.io?EIO=4&transport=polling&t=z0cqvxvt 404 in 195ms
 GET /socket.io?EIO=4&transport=polling&t=z0ctw6mx 404 in 105ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
 GET /api/socket-health 200 in 55ms
 GET /api/socket-health 200 in 115ms
 GET /api/conversations 200 in 256ms
 GET /socket.io?EIO=4&transport=polling&t=z0ebfsvi 404 in 193ms
 GET /socket.io?EIO=4&transport=polling&t=z0eeoqlo 404 in 93ms
 GET /api/socket-health 200 in 28ms
 GET /api/socket-health 200 in 116ms
 GET /socket.io?EIO=4&transport=polling&t=z0fu69a2 404 in 195ms
 GET /socket.io?EIO=4&transport=polling&t=z0fxgoxm 404 in 86ms
 GET /api/socket-health 200 in 75ms
 GET /api/socket-health 200 in 178ms
 GET /socket.io?EIO=4&transport=polling&t=z0hf1cp3 404 in 266ms
 GET /socket.io?EIO=4&transport=polling&t=z0hk1wds 404 in 118ms
 GET /api/socket-health 200 in 26ms
 GET /api/socket-health 200 in 115ms
 GET /socket.io?EIO=4&transport=polling&t=z0ix36v0 404 in 202ms
 GET /socket.io?EIO=4&transport=polling&t=z0j0c9p9 404 in 93ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
=== FRIEND REQUEST GET START ===
 GET /api/socket-health 200 in 206ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
Request type: received User: sayantan2@gmail.com
âœ… Database connected
 GET /api/friends 200 in 281ms
 GET /api/socket-health 200 in 221ms
 GET /socket.io?EIO=4&transport=polling&t=z0kmrff9 404 in 460ms
 GET /socket.io?EIO=4&transport=polling&t=z0ktf6bg 404 in 292ms
âœ… Current user found: {
  id: new ObjectId('6901f85f42c5d010fa811206'),
  email: 'sayantan2@gmail.com',
  friendRequestsCount: 0,
  sentRequestsCount: 1
}
Processing received requests...
Raw friendRequests: []
Processed receivedRequests: []
Populating sender details...
Final populated requests: []
=== FRIEND REQUEST GET END (received) ===
 GET /api/friends/request?type=received 200 in 926ms
=== FRIEND REQUEST GET START ===
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
Request type: sent User: sayantan2@gmail.com
âœ… Database connected
âœ… Current user found: {
  id: new ObjectId('6901f85f42c5d010fa811206'),
  email: 'sayantan2@gmail.com',
  friendRequestsCount: 0,
  sentRequestsCount: 1
}
Processing sent requests...
Raw sentRequests: [
  {
    from: new ObjectId('6901f85f42c5d010fa811206'),
    fromName: 'sayantan2',
    to: new ObjectId('6905adf16a22b7843b006183'),
    toName: 'sayantan3',
    status: 'pending',
    _id: new ObjectId('6905cdce14ad0d0f020b3985'),
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
Filtering sent request: { status: 'pending', to: new ObjectId('6905adf16a22b7843b006183') }
Mapping sent request: {
  from: new ObjectId('6901f85f42c5d010fa811206'),
  fromName: 'sayantan2',
  to: new ObjectId('6905adf16a22b7843b006183'),
  toName: 'sayantan3',
  status: 'pending',
  _id: new ObjectId('6905cdce14ad0d0f020b3985'),
  createdAt: 2025-11-01T09:07:26.707Z,
  updatedAt: 2025-11-01T09:07:26.707Z
}
Processed sentRequests: [
  {
    id: '6905cdce14ad0d0f020b3985',
    to: {
      id: '6905adf16a22b7843b006183',
      username: 'sayantan3',
      email: '',
      profilePicture: null
    },
    status: 'pending',
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
Populating recipient details...
Looking up recipient: 6905adf16a22b7843b006183
Found recipient: sayantan3
Final populated sent requests: [
  {
    id: '6905cdce14ad0d0f020b3985',
    to: {
      id: '6905adf16a22b7843b006183',
      username: 'sayantan3',
      email: 'sayantan3@gmail.com',
      profilePicture: undefined
    },
    status: 'pending',
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
=== FRIEND REQUEST GET END (sent) ===
 GET /api/friends/request?type=sent 200 in 321ms
 GET /api/socket-health 200 in 60ms
 GET /api/socket-health 200 in 208ms
 GET /socket.io?EIO=4&transport=polling&t=z0m17wgl 404 in 203ms
 GET /socket.io?EIO=4&transport=polling&t=z0m71ysm 404 in 272ms
 GET /api/socket-health 200 in 73ms
 GET /api/socket-health 200 in 95ms
 GET /socket.io?EIO=4&transport=polling&t=z0npihzp 404 in 417ms
 GET /socket.io?EIO=4&transport=polling&t=z0nqa16l 404 in 241ms
 GET /api/socket-health 200 in 130ms
 GET /api/socket-health 200 in 373ms
 GET /socket.io?EIO=4&transport=polling&t=z0p6jdar 404 in 558ms
 GET /socket.io?EIO=4&transport=polling&t=z0ph0fwr 404 in 208ms
 GET /api/socket-health 200 in 86ms
 GET /api/socket-health 200 in 109ms
 GET /socket.io?EIO=4&transport=polling&t=z0qpl837 404 in 519ms
 GET /socket.io?EIO=4&transport=polling&t=z0qs8r1g 404 in 294ms
 GET /api/socket-health 200 in 51ms
 GET /api/socket-health 200 in 173ms
 GET /socket.io?EIO=4&transport=polling&t=z0s7gnpk 404 in 273ms
 GET /socket.io?EIO=4&transport=polling&t=z0sccr3e 404 in 120ms
 GET /api/socket-health 200 in 45ms
 GET /api/socket-health 200 in 505ms
 GET /socket.io?EIO=4&transport=polling&t=z0tqvovi 404 in 687ms
 GET /socket.io?EIO=4&transport=polling&t=z0u53nd2 404 in 214ms
 GET /api/socket-health 200 in 120ms
 GET /api/socket-health 200 in 167ms
 GET /socket.io?EIO=4&transport=polling&t=z0vejivw 404 in 154ms
 GET /socket.io?EIO=4&transport=polling&t=z0vj80iz 404 in 136ms
 GET /api/socket-health 200 in 39ms
 GET /api/socket-health 200 in 118ms
 GET /socket.io?EIO=4&transport=polling&t=z0wtly13 404 in 210ms
 GET /socket.io?EIO=4&transport=polling&t=z0wwxcz9 404 in 98ms
 GET /api/socket-health 200 in 26ms
 GET /api/socket-health 200 in 113ms
 GET /socket.io?EIO=4&transport=polling&t=z0ycviz4 404 in 123ms
 GET /socket.io?EIO=4&transport=polling&t=z0yg2ipv 404 in 190ms
 GET /api/socket-health 200 in 27ms
 GET /api/socket-health 200 in 108ms
 GET /socket.io?EIO=4&transport=polling&t=z0zwehea 404 in 188ms
 GET /socket.io?EIO=4&transport=polling&t=z0zzh4ct 404 in 86ms
 GET /api/socket-health 200 in 33ms
 GET /api/socket-health 200 in 100ms
 GET /socket.io?EIO=4&transport=polling&t=z11fy9x8 404 in 185ms
 GET /socket.io?EIO=4&transport=polling&t=z11isic3 404 in 100ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
 GET /api/conversations 200 in 128ms
 GET /api/socket-health 200 in 34ms
 GET /api/socket-health 200 in 102ms
 GET /socket.io?EIO=4&transport=polling&t=z12zvwwa 404 in 183ms
 GET /socket.io?EIO=4&transport=polling&t=z132r3zn 404 in 93ms
 GET /api/socket-health 200 in 25ms
 GET /api/socket-health 200 in 117ms
 GET /socket.io?EIO=4&transport=polling&t=z14j60e8 404 in 199ms
 GET /socket.io?EIO=4&transport=polling&t=z14mj4jp 404 in 90ms
 GET /api/socket-health 200 in 57ms
 GET /api/socket-health 200 in 198ms
 GET /socket.io?EIO=4&transport=polling&t=z163ictt 404 in 207ms
 GET /socket.io?EIO=4&transport=polling&t=z1696hjz 404 in 273ms
 GET /api/socket-health 200 in 26ms
 GET /api/socket-health 200 in 119ms
 GET /socket.io?EIO=4&transport=polling&t=z17m8mbx 404 in 249ms
 GET /socket.io?EIO=4&transport=polling&t=z17pl94f 404 in 140ms
 GET /api/socket-health 200 in 43ms
=== FRIEND REQUEST GET START ===
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
Request type: received User: sayantan2@gmail.com
âœ… Database connected
âœ… Current user found: {
  id: new ObjectId('6901f85f42c5d010fa811206'),
  email: 'sayantan2@gmail.com',
  friendRequestsCount: 0,
  sentRequestsCount: 1
}
Processing received requests...
Raw friendRequests: []
Processed receivedRequests: []
Populating sender details...
Final populated requests: []
=== FRIEND REQUEST GET END (received) ===
 GET /api/friends/request?type=received 200 in 159ms
 GET /api/socket-health 200 in 133ms
=== FRIEND REQUEST GET START ===
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
Request type: sent User: sayantan2@gmail.com
âœ… Database connected
 GET /socket.io?EIO=4&transport=polling&t=z196dn6i 404 in 305ms
 GET /socket.io?EIO=4&transport=polling&t=z19a8d4o 404 in 177ms
âœ… Current user found: {
  id: new ObjectId('6901f85f42c5d010fa811206'),
  email: 'sayantan2@gmail.com',
  friendRequestsCount: 0,
  sentRequestsCount: 1
}
Processing sent requests...
Raw sentRequests: [
  {
    from: new ObjectId('6901f85f42c5d010fa811206'),
    fromName: 'sayantan2',
    to: new ObjectId('6905adf16a22b7843b006183'),
    toName: 'sayantan3',
    status: 'pending',
    _id: new ObjectId('6905cdce14ad0d0f020b3985'),
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
Filtering sent request: { status: 'pending', to: new ObjectId('6905adf16a22b7843b006183') }
Mapping sent request: {
  from: new ObjectId('6901f85f42c5d010fa811206'),
  fromName: 'sayantan2',
  to: new ObjectId('6905adf16a22b7843b006183'),
  toName: 'sayantan3',
  status: 'pending',
  _id: new ObjectId('6905cdce14ad0d0f020b3985'),
  createdAt: 2025-11-01T09:07:26.707Z,
  updatedAt: 2025-11-01T09:07:26.707Z
}
Processed sentRequests: [
  {
    id: '6905cdce14ad0d0f020b3985',
    to: {
      id: '6905adf16a22b7843b006183',
      username: 'sayantan3',
      email: '',
      profilePicture: null
    },
    status: 'pending',
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
Populating recipient details...
Looking up recipient: 6905adf16a22b7843b006183
Found recipient: sayantan3
Final populated sent requests: [
  {
    id: '6905cdce14ad0d0f020b3985',
    to: {
      id: '6905adf16a22b7843b006183',
      username: 'sayantan3',
      email: 'sayantan3@gmail.com',
      profilePicture: undefined
    },
    status: 'pending',
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
=== FRIEND REQUEST GET END (sent) ===
 GET /api/friends/request?type=sent 200 in 275ms
 GET /api/socket-health 200 in 38ms
 GET /api/socket-health 200 in 169ms
 GET /socket.io?EIO=4&transport=polling&t=z1apjm8t 404 in 297ms
 GET /socket.io?EIO=4&transport=polling&t=z1aud0cv 404 in 180ms
 GET /api/socket-health 200 in 47ms
 GET /api/socket-health 200 in 149ms
 GET /socket.io?EIO=4&transport=polling&t=z1c9zhae 404 in 240ms
 GET /socket.io?EIO=4&transport=polling&t=z1ce6ham 404 in 111ms
 GET /api/socket-health 200 in 28ms
 GET /api/socket-health 200 in 118ms
 GET /socket.io?EIO=4&transport=polling&t=z1dskbd2 404 in 247ms
 GET /socket.io?EIO=4&transport=polling&t=z1dvw1y8 404 in 128ms
 GET /api/socket-health 200 in 29ms
 GET /api/socket-health 200 in 125ms
 GET /socket.io?EIO=4&transport=polling&t=z1fc9qa8 404 in 203ms
 GET /socket.io?EIO=4&transport=polling&t=z1ffsgfb 404 in 91ms
 GET /api/socket-health 200 in 27ms
 GET /api/socket-health 200 in 135ms
 GET /socket.io?EIO=4&transport=polling&t=z1gvl1t4 404 in 230ms
 GET /socket.io?EIO=4&transport=polling&t=z1gzfyol 404 in 104ms
 GET /api/socket-health 200 in 47ms
 GET /api/socket-health 200 in 119ms
 GET /socket.io?EIO=4&transport=polling&t=z1ifqst8 404 in 198ms
 GET /socket.io?EIO=4&transport=polling&t=z1ij3mta 404 in 92ms
 GET /api/socket-health 200 in 28ms
 GET /api/socket-health 200 in 125ms
 GET /socket.io?EIO=4&transport=polling&t=z1jyl4b7 404 in 207ms
 GET /socket.io?EIO=4&transport=polling&t=z1k24ju8 404 in 92ms
 GET /api/socket-health 200 in 34ms
 GET /api/socket-health 200 in 139ms
 GET /socket.io?EIO=4&transport=polling&t=z1li6lz5 404 in 141ms
 GET /socket.io?EIO=4&transport=polling&t=z1lm3ydk 404 in 87ms
 GET /api/socket-health 200 in 30ms
 GET /api/socket-health 200 in 124ms
 GET /socket.io?EIO=4&transport=polling&t=z1n1tmlv 404 in 206ms
 GET /socket.io?EIO=4&transport=polling&t=z1n5bhmk 404 in 95ms
 GET /api/socket-health 200 in 37ms
 GET /api/socket-health 200 in 126ms
 GET /socket.io?EIO=4&transport=polling&t=z1olt216 404 in 133ms
 GET /socket.io?EIO=4&transport=polling&t=z1opf3na 404 in 104ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
 GET /api/socket-health 200 in 56ms
 GET /api/socket-health 200 in 125ms
 GET /socket.io?EIO=4&transport=polling&t=z1q5lzey 404 in 128ms
 GET /api/conversations 200 in 278ms
 GET /socket.io?EIO=4&transport=polling&t=z1q94xx3 404 in 103ms
 GET /api/socket-health 200 in 43ms
 GET /api/socket-health 200 in 170ms
 GET /socket.io?EIO=4&transport=polling&t=z1rp08rk 404 in 302ms
 GET /socket.io?EIO=4&transport=polling&t=z1rtwmir 404 in 147ms
 GET /api/socket-health 200 in 47ms
 GET /api/socket-health 200 in 154ms
 GET /socket.io?EIO=4&transport=polling&t=z1t8k88k 404 in 157ms
 GET /socket.io?EIO=4&transport=polling&t=z1tcz41k 404 in 132ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
=== FRIEND REQUEST GET START ===
 GET /api/socket-health 200 in 215ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
Request type: received User: sayantan2@gmail.com
âœ… Database connected
 POST /api/users/heartbeat 200 in 458ms
 GET /api/socket-health 200 in 232ms
 GET /socket.io?EIO=4&transport=polling&t=z1uxx265 404 in 408ms
 GET /socket.io?EIO=4&transport=polling&t=z1v4nqjo 404 in 314ms
âœ… Current user found: {
  id: new ObjectId('6901f85f42c5d010fa811206'),
  email: 'sayantan2@gmail.com',
  friendRequestsCount: 0,
  sentRequestsCount: 1
}
Processing received requests...
Raw friendRequests: []
Processed receivedRequests: []
Populating sender details...
Final populated requests: []
=== FRIEND REQUEST GET END (received) ===
 GET /api/friends/request?type=received 200 in 904ms
 GET /api/friends 200 in 947ms
=== FRIEND REQUEST GET START ===
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
Request type: sent User: sayantan2@gmail.com
âœ… Database connected
âœ… Current user found: {
  id: new ObjectId('6901f85f42c5d010fa811206'),
  email: 'sayantan2@gmail.com',
  friendRequestsCount: 0,
  sentRequestsCount: 1
}
Processing sent requests...
Raw sentRequests: [
  {
    from: new ObjectId('6901f85f42c5d010fa811206'),
    fromName: 'sayantan2',
    to: new ObjectId('6905adf16a22b7843b006183'),
    toName: 'sayantan3',
    status: 'pending',
    _id: new ObjectId('6905cdce14ad0d0f020b3985'),
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
Filtering sent request: { status: 'pending', to: new ObjectId('6905adf16a22b7843b006183') }
Mapping sent request: {
  from: new ObjectId('6901f85f42c5d010fa811206'),
  fromName: 'sayantan2',
  to: new ObjectId('6905adf16a22b7843b006183'),
  toName: 'sayantan3',
  status: 'pending',
  _id: new ObjectId('6905cdce14ad0d0f020b3985'),
  createdAt: 2025-11-01T09:07:26.707Z,
  updatedAt: 2025-11-01T09:07:26.707Z
}
Processed sentRequests: [
  {
    id: '6905cdce14ad0d0f020b3985',
    to: {
      id: '6905adf16a22b7843b006183',
      username: 'sayantan3',
      email: '',
      profilePicture: null
    },
    status: 'pending',
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
Populating recipient details...
Looking up recipient: 6905adf16a22b7843b006183
Found recipient: sayantan3
Final populated sent requests: [
  {
    id: '6905cdce14ad0d0f020b3985',
    to: {
      id: '6905adf16a22b7843b006183',
      username: 'sayantan3',
      email: 'sayantan3@gmail.com',
      profilePicture: undefined
    },
    status: 'pending',
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
=== FRIEND REQUEST GET END (sent) ===
 GET /api/friends/request?type=sent 200 in 171ms
 GET /api/socket-health 200 in 73ms
 GET /api/socket-health 200 in 80ms
 GET /socket.io?EIO=4&transport=polling&t=z1wcxngz 404 in 605ms
 GET /socket.io?EIO=4&transport=polling&t=z1wfke6i 404 in 333ms
 GET /api/socket-health 200 in 102ms
 GET /api/socket-health 200 in 83ms
 GET /socket.io?EIO=4&transport=polling&t=z1xx2qa0 404 in 817ms
 GET /socket.io?EIO=4&transport=polling&t=z1y105rc 404 in 326ms
 GET /api/socket-health 200 in 51ms
 GET /api/socket-health 200 in 198ms
 GET /socket.io?EIO=4&transport=polling&t=z206johv 404 in 201ms
 GET /socket.io?EIO=4&transport=polling&t=z20c452r 404 in 155ms
 GET /api/socket-health 200 in 37ms
 GET /api/socket-health 200 in 149ms
 GET /socket.io?EIO=4&transport=polling&t=z21pp4y0 404 in 254ms
 GET /socket.io?EIO=4&transport=polling&t=z21u15ih 404 in 118ms
 GET /api/socket-health 200 in 56ms
 GET /api/socket-health 200 in 152ms
 GET /socket.io?EIO=4&transport=polling&t=z23a7heh 404 in 152ms
 GET /socket.io?EIO=4&transport=polling&t=z23ekyr7 404 in 118ms
 GET /api/socket-health 200 in 38ms
 GET /api/socket-health 200 in 257ms
 GET /socket.io?EIO=4&transport=polling&t=z24t4pgc 404 in 365ms
 GET /socket.io?EIO=4&transport=polling&t=z250bfo2 404 in 117ms
 GET /api/socket-health 200 in 49ms
 GET /api/socket-health 200 in 154ms
 GET /socket.io?EIO=4&transport=polling&t=z26crcgr 404 in 158ms
 GET /socket.io?EIO=4&transport=polling&t=z26h6x4t 404 in 123ms
 GET /api/socket-health 200 in 40ms
 GET /api/socket-health 200 in 155ms
 GET /socket.io?EIO=4&transport=polling&t=z27w21t2 404 in 263ms
 GET /socket.io?EIO=4&transport=polling&t=z280gwk2 404 in 115ms
 GET /api/socket-health 200 in 41ms
 GET /api/socket-health 200 in 168ms
 GET /socket.io?EIO=4&transport=polling&t=z29fq8z0 404 in 273ms
 GET /socket.io?EIO=4&transport=polling&t=z29khimx 404 in 120ms
 GET /api/socket-health 200 in 37ms
 GET /api/socket-health 200 in 167ms
 GET /socket.io?EIO=4&transport=polling&t=z2az8tp1 404 in 287ms
 GET /socket.io?EIO=4&transport=polling&t=z2b3zrwh 404 in 119ms
 GET /api/socket-health 200 in 35ms
 GET /api/socket-health 200 in 146ms
 GET /socket.io?EIO=4&transport=polling&t=z2ciswtc 404 in 264ms
 GET /socket.io?EIO=4&transport=polling&t=z2cmznrh 404 in 133ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
 GET /api/socket-health 200 in 80ms
 GET /api/socket-health 200 in 150ms
 GET /api/conversations 200 in 254ms
 GET /socket.io?EIO=4&transport=polling&t=z2e3bxdr 404 in 274ms
 GET /socket.io?EIO=4&transport=polling&t=z2e7jb4u 404 in 132ms
 GET /api/socket-health 200 in 28ms
 GET /api/socket-health 200 in 112ms
 GET /socket.io?EIO=4&transport=polling&t=z2flf9ak 404 in 199ms
 GET /socket.io?EIO=4&transport=polling&t=z2fomg5k 404 in 90ms
 GET /api/socket-health 200 in 32ms
 GET /api/socket-health 200 in 177ms
 GET /socket.io?EIO=4&transport=polling&t=z2h58rtn 404 in 314ms
 GET /socket.io?EIO=4&transport=polling&t=z2ha6otw 404 in 151ms
 GET /api/socket-health 200 in 44ms
 GET /api/socket-health 200 in 150ms
 GET /socket.io?EIO=4&transport=polling&t=z2ipcbxg 404 in 146ms
 GET /socket.io?EIO=4&transport=polling&t=z2itkbvz 404 in 109ms
=== FRIEND REQUEST GET START ===
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
Request type: received User: sayantan2@gmail.com
âœ… Database connected
âœ… Current user found: {
  id: new ObjectId('6901f85f42c5d010fa811206'),
  email: 'sayantan2@gmail.com',
  friendRequestsCount: 0,
  sentRequestsCount: 1
}
Processing received requests...
Raw friendRequests: []
Processed receivedRequests: []
Populating sender details...
Final populated requests: []
=== FRIEND REQUEST GET END (received) ===
 GET /api/friends/request?type=received 200 in 107ms
=== FRIEND REQUEST GET START ===
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
Request type: sent User: sayantan2@gmail.com
âœ… Database connected
âœ… Current user found: {
  id: new ObjectId('6901f85f42c5d010fa811206'),
  email: 'sayantan2@gmail.com',
  friendRequestsCount: 0,
  sentRequestsCount: 1
}
Processing sent requests...
Raw sentRequests: [
  {
    from: new ObjectId('6901f85f42c5d010fa811206'),
    fromName: 'sayantan2',
    to: new ObjectId('6905adf16a22b7843b006183'),
    toName: 'sayantan3',
    status: 'pending',
    _id: new ObjectId('6905cdce14ad0d0f020b3985'),
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
Filtering sent request: { status: 'pending', to: new ObjectId('6905adf16a22b7843b006183') }
Mapping sent request: {
  from: new ObjectId('6901f85f42c5d010fa811206'),
  fromName: 'sayantan2',
  to: new ObjectId('6905adf16a22b7843b006183'),
  toName: 'sayantan3',
  status: 'pending',
  _id: new ObjectId('6905cdce14ad0d0f020b3985'),
  createdAt: 2025-11-01T09:07:26.707Z,
  updatedAt: 2025-11-01T09:07:26.707Z
}
Processed sentRequests: [
  {
    id: '6905cdce14ad0d0f020b3985',
    to: {
      id: '6905adf16a22b7843b006183',
      username: 'sayantan3',
      email: '',
      profilePicture: null
    },
    status: 'pending',
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
Populating recipient details...
Looking up recipient: 6905adf16a22b7843b006183
Found recipient: sayantan3
Final populated sent requests: [
  {
    id: '6905cdce14ad0d0f020b3985',
    to: {
      id: '6905adf16a22b7843b006183',
      username: 'sayantan3',
      email: 'sayantan3@gmail.com',
      profilePicture: undefined
    },
    status: 'pending',
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
=== FRIEND REQUEST GET END (sent) ===
 GET /api/friends/request?type=sent 200 in 133ms
 GET /api/socket-health 200 in 26ms
 GET /api/socket-health 200 in 108ms
 GET /socket.io?EIO=4&transport=polling&t=z2k85pt6 404 in 195ms
 GET /socket.io?EIO=4&transport=polling&t=z2kb8j1p 404 in 96ms
 GET /api/socket-health 200 in 41ms
 GET /api/socket-health 200 in 144ms
 GET /socket.io?EIO=4&transport=polling&t=z2ls9tos 404 in 205ms
 GET /socket.io?EIO=4&transport=polling&t=z2lwcd77 404 in 98ms
 GET /api/socket-health 200 in 35ms
 GET /api/socket-health 200 in 115ms
 GET /socket.io?EIO=4&transport=polling&t=z2nbbi74 404 in 199ms
 GET /socket.io?EIO=4&transport=polling&t=z2nejgxa 404 in 97ms
 GET /api/socket-health 200 in 35ms
 GET /api/socket-health 200 in 127ms
 GET /socket.io?EIO=4&transport=polling&t=z2ov9eyt 404 in 205ms
 GET /socket.io?EIO=4&transport=polling&t=z2oyuvfp 404 in 104ms
 GET /api/socket-health 200 in 37ms
 GET /api/socket-health 200 in 153ms
 GET /socket.io?EIO=4&transport=polling&t=z2qejmg3 404 in 156ms
 GET /socket.io?EIO=4&transport=polling&t=z2qiul6j 404 in 115ms
 GET /api/socket-health 200 in 38ms
 GET /api/socket-health 200 in 158ms
 GET /socket.io?EIO=4&transport=polling&t=z2rye3vv 404 in 154ms
 GET /socket.io?EIO=4&transport=polling&t=z2s2u4mq 404 in 121ms
 GET /api/socket-health 200 in 69ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
 GET /api/auth/session 200 in 125ms
 GET /api/socket-health 200 in 233ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
=== FRIEND REQUEST GET START ===
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
Request type: received User: sayantan2@gmail.com
âœ… Database connected
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
 GET /socket.io?EIO=4&transport=polling&t=z2tiz45u 404 in 375ms
 GET /socket.io?EIO=4&transport=polling&t=z2tpl0vm 404 in 150ms
 GET /api/random-chat/queue 200 in 398ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
 GET /api/users/me 200 in 502ms
 POST /api/users/heartbeat 200 in 619ms
 GET /api/random-chat/session 200 in 265ms
âœ… Current user found: {
  id: new ObjectId('6901f85f42c5d010fa811206'),
  email: 'sayantan2@gmail.com',
  friendRequestsCount: 0,
  sentRequestsCount: 1
}
Processing received requests...
Raw friendRequests: []
Processed receivedRequests: []
Populating sender details...
Final populated requests: []
=== FRIEND REQUEST GET END (received) ===
 GET /api/friends/request?type=received 200 in 673ms
=== FRIEND REQUEST GET START ===
 GET /api/friends 200 in 737ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
Request type: sent User: sayantan2@gmail.com
âœ… Database connected
âœ… Current user found: {
  id: new ObjectId('6901f85f42c5d010fa811206'),
  email: 'sayantan2@gmail.com',
  friendRequestsCount: 0,
  sentRequestsCount: 1
}
Processing sent requests...
Raw sentRequests: [
  {
    from: new ObjectId('6901f85f42c5d010fa811206'),
    fromName: 'sayantan2',
    to: new ObjectId('6905adf16a22b7843b006183'),
    toName: 'sayantan3',
    status: 'pending',
    _id: new ObjectId('6905cdce14ad0d0f020b3985'),
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
Filtering sent request: { status: 'pending', to: new ObjectId('6905adf16a22b7843b006183') }
Mapping sent request: {
  from: new ObjectId('6901f85f42c5d010fa811206'),
  fromName: 'sayantan2',
  to: new ObjectId('6905adf16a22b7843b006183'),
  toName: 'sayantan3',
  status: 'pending',
  _id: new ObjectId('6905cdce14ad0d0f020b3985'),
  createdAt: 2025-11-01T09:07:26.707Z,
  updatedAt: 2025-11-01T09:07:26.707Z
}
Processed sentRequests: [
  {
    id: '6905cdce14ad0d0f020b3985',
    to: {
      id: '6905adf16a22b7843b006183',
      username: 'sayantan3',
      email: '',
      profilePicture: null
    },
    status: 'pending',
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
Populating recipient details...
Looking up recipient: 6905adf16a22b7843b006183
Found recipient: sayantan3
Final populated sent requests: [
  {
    id: '6905cdce14ad0d0f020b3985',
    to: {
      id: '6905adf16a22b7843b006183',
      username: 'sayantan3',
      email: 'sayantan3@gmail.com',
      profilePicture: undefined
    },
    status: 'pending',
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
=== FRIEND REQUEST GET END (sent) ===
 GET /api/friends/request?type=sent 200 in 158ms
 GET /api/socket-health 200 in 72ms
 GET /api/socket-health 200 in 220ms
 GET /socket.io?EIO=4&transport=polling&t=z2v2j6d6 404 in 256ms
 GET /socket.io?EIO=4&transport=polling&t=z2v94ccc 404 in 137ms
 GET /api/socket-health 200 in 34ms
 GET /api/socket-health 200 in 143ms
 GET /socket.io?EIO=4&transport=polling&t=z2wl099p 404 in 256ms
 GET /socket.io?EIO=4&transport=polling&t=z2wp177b 404 in 121ms
 GET /api/socket-health 200 in 44ms
 GET /api/socket-health 200 in 136ms
 GET /socket.io?EIO=4&transport=polling&t=z2y4vio9 404 in 242ms
 GET /socket.io?EIO=4&transport=polling&t=z2y8pfti 404 in 121ms
 GET /api/socket-health 200 in 42ms
 GET /api/socket-health 200 in 148ms
 GET /socket.io?EIO=4&transport=polling&t=z2zo7cw3 404 in 256ms
 GET /socket.io?EIO=4&transport=polling&t=z2zsfx25 404 in 115ms
 GET /api/socket-health 200 in 47ms
 GET /api/socket-health 200 in 146ms
 GET /socket.io?EIO=4&transport=polling&t=z317r1g7 404 in 148ms
 GET /socket.io?EIO=4&transport=polling&t=z31bwu18 404 in 126ms
 GET /api/socket-health 200 in 55ms
 GET /api/socket-health 200 in 155ms
 GET /socket.io?EIO=4&transport=polling&t=z32ryhd7 404 in 259ms
 GET /socket.io?EIO=4&transport=polling&t=z32wcnfz 404 in 120ms
 GET /api/socket-health 200 in 41ms
 GET /api/socket-health 200 in 159ms
 GET /socket.io?EIO=4&transport=polling&t=z34b6zxs 404 in 282ms
 GET /socket.io?EIO=4&transport=polling&t=z34fps5z 404 in 140ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
=== FRIEND REQUEST GET START ===
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
Request type: received User: sayantan2@gmail.com
âœ… Database connected
âœ… Current user found: {
  id: new ObjectId('6901f85f42c5d010fa811206'),
  email: 'sayantan2@gmail.com',
  friendRequestsCount: 0,
  sentRequestsCount: 1
}
Processing received requests...
Raw friendRequests: []
Processed receivedRequests: []
Populating sender details...
Final populated requests: []
=== FRIEND REQUEST GET END (received) ===
 GET /api/friends/request?type=received 200 in 205ms
 GET /api/friends 200 in 225ms
=== FRIEND REQUEST GET START ===
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
Request type: sent User: sayantan2@gmail.com
âœ… Database connected
âœ… Current user found: {
  id: new ObjectId('6901f85f42c5d010fa811206'),
  email: 'sayantan2@gmail.com',
  friendRequestsCount: 0,
  sentRequestsCount: 1
}
Processing sent requests...
Raw sentRequests: [
  {
    from: new ObjectId('6901f85f42c5d010fa811206'),
    fromName: 'sayantan2',
    to: new ObjectId('6905adf16a22b7843b006183'),
    toName: 'sayantan3',
    status: 'pending',
    _id: new ObjectId('6905cdce14ad0d0f020b3985'),
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
Filtering sent request: { status: 'pending', to: new ObjectId('6905adf16a22b7843b006183') }
Mapping sent request: {
  from: new ObjectId('6901f85f42c5d010fa811206'),
  fromName: 'sayantan2',
  to: new ObjectId('6905adf16a22b7843b006183'),
  toName: 'sayantan3',
  status: 'pending',
  _id: new ObjectId('6905cdce14ad0d0f020b3985'),
  createdAt: 2025-11-01T09:07:26.707Z,
  updatedAt: 2025-11-01T09:07:26.707Z
}
Processed sentRequests: [
  {
    id: '6905cdce14ad0d0f020b3985',
    to: {
      id: '6905adf16a22b7843b006183',
      username: 'sayantan3',
      email: '',
      profilePicture: null
    },
    status: 'pending',
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
Populating recipient details...
Looking up recipient: 6905adf16a22b7843b006183
Found recipient: sayantan3
Final populated sent requests: [
  {
    id: '6905cdce14ad0d0f020b3985',
    to: {
      id: '6905adf16a22b7843b006183',
      username: 'sayantan3',
      email: 'sayantan3@gmail.com',
      profilePicture: undefined
    },
    status: 'pending',
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
=== FRIEND REQUEST GET END (sent) ===
 GET /api/friends/request?type=sent 200 in 148ms
 GET /api/socket-health 200 in 65ms
 GET /api/socket-health 200 in 217ms
 GET /socket.io?EIO=4&transport=polling&t=z35v9rqu 404 in 212ms
 GET /socket.io?EIO=4&transport=polling&t=z361o3fw 404 in 184ms
 GET /api/socket-health 200 in 122ms
 GET /api/socket-health 200 in 386ms
 GET /socket.io?EIO=4&transport=polling&t=z37gewty 404 in 640ms
 GET /socket.io?EIO=4&transport=polling&t=z37r467h 404 in 301ms
 GET /api/socket-health 200 in 50ms
 GET /api/socket-health 200 in 146ms
 GET /socket.io?EIO=4&transport=polling&t=z38xqpdv 404 in 201ms
 GET /socket.io?EIO=4&transport=polling&t=z391xn96 404 in 130ms
 GET /api/socket-health 200 in 41ms
 GET /api/socket-health 200 in 151ms
 GET /socket.io?EIO=4&transport=polling&t=z3agyt08 404 in 258ms
 GET /socket.io?EIO=4&transport=polling&t=z3al8l5b 404 in 122ms
 GET /api/socket-health 200 in 42ms
 GET /api/socket-health 200 in 149ms
 GET /socket.io?EIO=4&transport=polling&t=z3c0tvgm 404 in 256ms
 GET /socket.io?EIO=4&transport=polling&t=z3c51p33 404 in 129ms
 GET /api/socket-health 200 in 30ms
 GET /api/socket-health 200 in 117ms
 GET /socket.io?EIO=4&transport=polling&t=z3djv75r 404 in 214ms
 GET /socket.io?EIO=4&transport=polling&t=z3dn78s2 404 in 109ms
 GET /api/socket-health 200 in 30ms
 GET /api/socket-health 200 in 103ms
 GET /socket.io?EIO=4&transport=polling&t=z3f3ab69 404 in 185ms
 GET /socket.io?EIO=4&transport=polling&t=z3f67yfv 404 in 98ms
 GET /api/socket-health 200 in 30ms
 GET /api/socket-health 200 in 118ms
 GET /socket.io?EIO=4&transport=polling&t=z3gmvoit 404 in 213ms
 GET /socket.io?EIO=4&transport=polling&t=z3gq7vzp 404 in 104ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
 GET /api/conversations 200 in 165ms
 POST /api/users/heartbeat 200 in 186ms
 GET /api/socket-health 200 in 44ms
 GET /api/socket-health 200 in 130ms
 GET /socket.io?EIO=4&transport=polling&t=z3i6n4sr 404 in 216ms
 GET /socket.io?EIO=4&transport=polling&t=z3iac71g 404 in 99ms
 GET /api/socket-health 200 in 32ms
 GET /api/socket-health 200 in 134ms
 GET /socket.io?EIO=4&transport=polling&t=z3jq2xpy 404 in 233ms
 GET /socket.io?EIO=4&transport=polling&t=z3jtvohs 404 in 105ms
 GET /api/socket-health 200 in 119ms
 GET /api/socket-health 200 in 202ms
 GET /socket.io?EIO=4&transport=polling&t=z3lc9g6y 404 in 666ms
 GET /socket.io?EIO=4&transport=polling&t=z3lhxg07 404 in 476ms
 GET /api/socket-health 200 in 36ms
 GET /api/socket-health 200 in 122ms
 GET /socket.io?EIO=4&transport=polling&t=z3mt72lj 404 in 211ms
 GET /socket.io?EIO=4&transport=polling&t=z3mwne04 404 in 100ms
 GET /api/socket-health 200 in 35ms
 GET /api/socket-health 200 in 119ms
 GET /socket.io?EIO=4&transport=polling&t=z3ocv1e4 404 in 204ms
 GET /socket.io?EIO=4&transport=polling&t=z3og75gl 404 in 101ms
 GET /api/socket-health 200 in 30ms
 GET /api/socket-health 200 in 129ms
 GET /socket.io?EIO=4&transport=polling&t=z3pw49os 404 in 220ms
 GET /socket.io?EIO=4&transport=polling&t=z3pzsr6x 404 in 101ms
 GET /api/socket-health 200 in 28ms
 GET /api/socket-health 200 in 113ms
 GET /socket.io?EIO=4&transport=polling&t=z3rfi876 404 in 199ms
 GET /socket.io?EIO=4&transport=polling&t=z3rirz23 404 in 95ms
 GET /api/socket-health 200 in 46ms
=== FRIEND REQUEST GET START ===
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
Request type: received User: sayantan2@gmail.com
âœ… Database connected
âœ… Current user found: {
  id: new ObjectId('6901f85f42c5d010fa811206'),
  email: 'sayantan2@gmail.com',
  friendRequestsCount: 0,
  sentRequestsCount: 1
}
Processing received requests...
Raw friendRequests: []
Processed receivedRequests: []
Populating sender details...
Final populated requests: []
=== FRIEND REQUEST GET END (received) ===
 GET /api/friends/request?type=received 200 in 155ms
 GET /api/socket-health 200 in 127ms
=== FRIEND REQUEST GET START ===
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
Request type: sent User: sayantan2@gmail.com
âœ… Database connected
âœ… Current user found: {
  id: new ObjectId('6901f85f42c5d010fa811206'),
  email: 'sayantan2@gmail.com',
  friendRequestsCount: 0,
  sentRequestsCount: 1
}
Processing sent requests...
Raw sentRequests: [
  {
    from: new ObjectId('6901f85f42c5d010fa811206'),
    fromName: 'sayantan2',
    to: new ObjectId('6905adf16a22b7843b006183'),
    toName: 'sayantan3',
    status: 'pending',
    _id: new ObjectId('6905cdce14ad0d0f020b3985'),
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
Filtering sent request: { status: 'pending', to: new ObjectId('6905adf16a22b7843b006183') }
Mapping sent request: {
  from: new ObjectId('6901f85f42c5d010fa811206'),
  fromName: 'sayantan2',
  to: new ObjectId('6905adf16a22b7843b006183'),
  toName: 'sayantan3',
  status: 'pending',
  _id: new ObjectId('6905cdce14ad0d0f020b3985'),
  createdAt: 2025-11-01T09:07:26.707Z,
  updatedAt: 2025-11-01T09:07:26.707Z
}
Processed sentRequests: [
  {
    id: '6905cdce14ad0d0f020b3985',
    to: {
      id: '6905adf16a22b7843b006183',
      username: 'sayantan3',
      email: '',
      profilePicture: null
    },
    status: 'pending',
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
Populating recipient details...
Looking up recipient: 6905adf16a22b7843b006183
 GET /socket.io?EIO=4&transport=polling&t=z3szw4fk 404 in 249ms
 GET /socket.io?EIO=4&transport=polling&t=z3t3sall 404 in 119ms
Found recipient: sayantan3
Final populated sent requests: [
  {
    id: '6905cdce14ad0d0f020b3985',
    to: {
      id: '6905adf16a22b7843b006183',
      username: 'sayantan3',
      email: 'sayantan3@gmail.com',
      profilePicture: undefined
    },
    status: 'pending',
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
=== FRIEND REQUEST GET END (sent) ===
 GET /api/friends/request?type=sent 200 in 158ms
 GET /api/socket-health 200 in 28ms
 GET /api/socket-health 200 in 117ms
 GET /socket.io?EIO=4&transport=polling&t=z3uiwtgy 404 in 198ms
 GET /socket.io?EIO=4&transport=polling&t=z3um919r 404 in 97ms
 GET /api/socket-health 200 in 26ms
 GET /api/socket-health 200 in 104ms
 GET /socket.io?EIO=4&transport=polling&t=z3w29kmf 404 in 223ms
 GET /socket.io?EIO=4&transport=polling&t=z3w59hi9 404 in 127ms
 GET /api/socket-health 200 in 28ms
 GET /api/socket-health 200 in 34ms
 GET /socket.io?EIO=4&transport=polling&t=z3xlys52 404 in 204ms
 GET /socket.io?EIO=4&transport=polling&t=z3xmxp3w 404 in 106ms
 GET /api/socket-health 200 in 29ms
 GET /api/socket-health 200 in 117ms
 GET /socket.io?EIO=4&transport=polling&t=z3z5hy4p 404 in 199ms
 GET /socket.io?EIO=4&transport=polling&t=z3z8rrxz 404 in 96ms
 GET /api/socket-health 200 in 37ms
 GET /api/socket-health 200 in 136ms
 GET /socket.io?EIO=4&transport=polling&t=z40pkkr2 404 in 130ms
 GET /socket.io?EIO=4&transport=polling&t=z40tfc8o 404 in 100ms
 GET /api/socket-health 200 in 36ms
 GET /api/socket-health 200 in 144ms
 GET /socket.io?EIO=4&transport=polling&t=z428z3ry 404 in 143ms
 GET /socket.io?EIO=4&transport=polling&t=z42d2tt1 404 in 108ms
 GET /api/socket-health 200 in 49ms
 GET /api/socket-health 200 in 195ms
 GET /socket.io?EIO=4&transport=polling&t=z43ssuib 404 in 293ms
 GET /socket.io?EIO=4&transport=polling&t=z43y92h9 404 in 130ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
 POST /api/users/heartbeat 200 in 230ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
 GET /api/socket-health 200 in 52ms
 GET /api/socket-health 200 in 108ms
 GET /socket.io?EIO=4&transport=polling&t=z45caj24 404 in 115ms
 GET /api/conversations 200 in 252ms
 GET /socket.io?EIO=4&transport=polling&t=z45fdmi4 404 in 95ms
 GET /api/socket-health 200 in 90ms
 GET /api/socket-health 200 in 98ms
 GET /socket.io?EIO=4&transport=polling&t=z473gh23 404 in 626ms
 GET /socket.io?EIO=4&transport=polling&t=z47461u5 404 in 381ms
 GET /api/socket-health 200 in 44ms
 GET /socket.io?EIO=4&transport=polling&t=z48feagy 404 in 136ms
 GET /api/socket-health 200 in 33ms
 GET /socket.io?EIO=4&transport=polling&t=z496ozhc 404 in 105ms
 GET /api/socket-health 200 in 31ms
 GET /socket.io?EIO=4&transport=polling&t=z49yns00 404 in 99ms
 GET /api/socket-health 200 in 28ms
 GET /socket.io?EIO=4&transport=polling&t=z4aqbbzv 404 in 89ms
 GET /api/socket-health 200 in 35ms
 GET /socket.io?EIO=4&transport=polling&t=z4bianv6 404 in 96ms
 GET /api/socket-health 200 in 44ms
 GET /socket.io?EIO=4&transport=polling&t=z4caaha5 404 in 106ms
 GET /api/socket-health 200 in 26ms
 GET /socket.io?EIO=4&transport=polling&t=z4d1kjg9 404 in 93ms
 GET /api/socket-health 200 in 26ms
 GET /socket.io?EIO=4&transport=polling&t=z4dt47sa 404 in 97ms
 GET /api/socket-health 200 in 27ms
 GET /socket.io?EIO=4&transport=polling&t=z4ektkdl 404 in 89ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
=== FRIEND REQUEST GET START ===
 GET /api/socket-health 200 in 68ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
Request type: received User: sayantan2@gmail.com
âœ… Database connected
 GET /socket.io?EIO=4&transport=polling&t=z4febppu 404 in 104ms
 GET /api/friends 200 in 223ms
âœ… Current user found: {
  id: new ObjectId('6901f85f42c5d010fa811206'),
  email: 'sayantan2@gmail.com',
  friendRequestsCount: 0,
  sentRequestsCount: 1
}
Processing received requests...
Raw friendRequests: []
Processed receivedRequests: []
Populating sender details...
Final populated requests: []
=== FRIEND REQUEST GET END (received) ===
 GET /api/friends/request?type=received 200 in 508ms
=== FRIEND REQUEST GET START ===
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
Request type: sent User: sayantan2@gmail.com
âœ… Database connected
âœ… Current user found: {
  id: new ObjectId('6901f85f42c5d010fa811206'),
  email: 'sayantan2@gmail.com',
  friendRequestsCount: 0,
  sentRequestsCount: 1
}
Processing sent requests...
Raw sentRequests: [
  {
    from: new ObjectId('6901f85f42c5d010fa811206'),
    fromName: 'sayantan2',
    to: new ObjectId('6905adf16a22b7843b006183'),
    toName: 'sayantan3',
    status: 'pending',
    _id: new ObjectId('6905cdce14ad0d0f020b3985'),
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
Filtering sent request: { status: 'pending', to: new ObjectId('6905adf16a22b7843b006183') }
Mapping sent request: {
  from: new ObjectId('6901f85f42c5d010fa811206'),
  fromName: 'sayantan2',
  to: new ObjectId('6905adf16a22b7843b006183'),
  toName: 'sayantan3',
  status: 'pending',
  _id: new ObjectId('6905cdce14ad0d0f020b3985'),
  createdAt: 2025-11-01T09:07:26.707Z,
  updatedAt: 2025-11-01T09:07:26.707Z
}
Processed sentRequests: [
  {
    id: '6905cdce14ad0d0f020b3985',
    to: {
      id: '6905adf16a22b7843b006183',
      username: 'sayantan3',
      email: '',
      profilePicture: null
    },
    status: 'pending',
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
Populating recipient details...
Looking up recipient: 6905adf16a22b7843b006183
Found recipient: sayantan3
Final populated sent requests: [
  {
    id: '6905cdce14ad0d0f020b3985',
    to: {
      id: '6905adf16a22b7843b006183',
      username: 'sayantan3',
      email: 'sayantan3@gmail.com',
      profilePicture: undefined
    },
    status: 'pending',
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
=== FRIEND REQUEST GET END (sent) ===
 GET /api/friends/request?type=sent 200 in 141ms
 GET /api/socket-health 200 in 34ms
 GET /socket.io?EIO=4&transport=polling&t=z4g4vp2i 404 in 105ms
 GET /api/socket-health 200 in 46ms
 GET /socket.io?EIO=4&transport=polling&t=z4gxh05u 404 in 161ms
 GET /api/socket-health 200 in 63ms
 GET /socket.io?EIO=4&transport=polling&t=z4hp47uv 404 in 174ms
 GET /api/socket-health 200 in 30ms
 GET /socket.io?EIO=4&transport=polling&t=z4ifva6y 404 in 90ms
 GET /api/socket-health 200 in 26ms
 GET /socket.io?EIO=4&transport=polling&t=z4j7sizw 404 in 89ms
 GET /api/socket-health 200 in 37ms
 GET /socket.io?EIO=4&transport=polling&t=z4k19wwp 404 in 108ms
 GET /api/socket-health 200 in 34ms
 GET /socket.io?EIO=4&transport=polling&t=z4krlefz 404 in 115ms
 GET /api/socket-health 200 in 31ms
 GET /socket.io?EIO=4&transport=polling&t=z4lj2d8c 404 in 96ms
 GET /api/socket-health 200 in 27ms
 GET /socket.io?EIO=4&transport=polling&t=z4mao53b 404 in 96ms
 GET /api/socket-health 200 in 27ms
 GET /socket.io?EIO=4&transport=polling&t=z4n2scg0 404 in 98ms
 GET /api/socket-health 200 in 35ms
 GET /socket.io?EIO=4&transport=polling&t=z4nurfkp 404 in 94ms
 GET /api/socket-health 200 in 26ms
 GET /socket.io?EIO=4&transport=polling&t=z4omaeff 404 in 100ms
 GET /api/socket-health 200 in 26ms
 GET /socket.io?EIO=4&transport=polling&t=z4pe1t2m 404 in 95ms
 GET /api/socket-health 200 in 27ms
 GET /socket.io?EIO=4&transport=polling&t=z4q5tcei 404 in 96ms
 GET /api/socket-health 200 in 26ms
 GET /socket.io?EIO=4&transport=polling&t=z4qxmn3v 404 in 112ms
 GET /api/socket-health 200 in 46ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
 GET /socket.io?EIO=4&transport=polling&t=z4rpscks 404 in 95ms
 POST /api/users/heartbeat 200 in 225ms
 GET /api/socket-health 200 in 29ms
 GET /socket.io?EIO=4&transport=polling&t=z4sh1hy2 404 in 92ms
 GET /api/socket-health 200 in 50ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
 GET /socket.io?EIO=4&transport=polling&t=z4t9a6xb 404 in 99ms
 GET /api/conversations 200 in 180ms
 GET /api/socket-health 200 in 25ms
 GET /socket.io?EIO=4&transport=polling&t=z4u0piuy 404 in 92ms
 GET /api/socket-health 200 in 26ms
 GET /socket.io?EIO=4&transport=polling&t=z4ush660 404 in 93ms
 GET /api/socket-health 200 in 25ms
 GET /socket.io?EIO=4&transport=polling&t=z4vk5ovh 404 in 95ms
 GET /api/socket-health 200 in 33ms
 GET /socket.io?EIO=4&transport=polling&t=z4wc55g0 404 in 95ms
 GET /api/socket-health 200 in 26ms
 GET /socket.io?EIO=4&transport=polling&t=z4x3okpj 404 in 89ms
 GET /api/socket-health 200 in 30ms
 GET /socket.io?EIO=4&transport=polling&t=z4xvih08 404 in 100ms
 GET /api/socket-health 200 in 27ms
 GET /socket.io?EIO=4&transport=polling&t=z4yn39gb 404 in 95ms
 GET /api/socket-health 200 in 33ms
 GET /socket.io?EIO=4&transport=polling&t=z4zf48dq 404 in 96ms
 GET /api/socket-health 200 in 26ms
 GET /socket.io?EIO=4&transport=polling&t=z506rrev 404 in 88ms
 GET /api/socket-health 200 in 26ms
 GET /socket.io?EIO=4&transport=polling&t=z50ygtxo 404 in 94ms
 GET /api/socket-health 200 in 27ms
 GET /socket.io?EIO=4&transport=polling&t=z51qk2r3 404 in 92ms
 GET /api/socket-health 200 in 33ms
 GET /socket.io?EIO=4&transport=polling&t=z52id565 404 in 97ms
=== FRIEND REQUEST GET START ===
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
Request type: received User: sayantan2@gmail.com
âœ… Database connected
 GET /api/socket-health 200 in 52ms
âœ… Current user found: {
  id: new ObjectId('6901f85f42c5d010fa811206'),
  email: 'sayantan2@gmail.com',
  friendRequestsCount: 0,
  sentRequestsCount: 1
}
Processing received requests...
Raw friendRequests: []
Processed receivedRequests: []
Populating sender details...
Final populated requests: []
=== FRIEND REQUEST GET END (received) ===
 GET /api/friends/request?type=received 200 in 134ms
=== FRIEND REQUEST GET START ===
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
Request type: sent User: sayantan2@gmail.com
âœ… Database connected
 GET /socket.io?EIO=4&transport=polling&t=z53al6ip 404 in 126ms
âœ… Current user found: {
  id: new ObjectId('6901f85f42c5d010fa811206'),
  email: 'sayantan2@gmail.com',
  friendRequestsCount: 0,
  sentRequestsCount: 1
}
Processing sent requests...
Raw sentRequests: [
  {
    from: new ObjectId('6901f85f42c5d010fa811206'),
    fromName: 'sayantan2',
    to: new ObjectId('6905adf16a22b7843b006183'),
    toName: 'sayantan3',
    status: 'pending',
    _id: new ObjectId('6905cdce14ad0d0f020b3985'),
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
Filtering sent request: { status: 'pending', to: new ObjectId('6905adf16a22b7843b006183') }
Mapping sent request: {
  from: new ObjectId('6901f85f42c5d010fa811206'),
  fromName: 'sayantan2',
  to: new ObjectId('6905adf16a22b7843b006183'),
  toName: 'sayantan3',
  status: 'pending',
  _id: new ObjectId('6905cdce14ad0d0f020b3985'),
  createdAt: 2025-11-01T09:07:26.707Z,
  updatedAt: 2025-11-01T09:07:26.707Z
}
Processed sentRequests: [
  {
    id: '6905cdce14ad0d0f020b3985',
    to: {
      id: '6905adf16a22b7843b006183',
      username: 'sayantan3',
      email: '',
      profilePicture: null
    },
    status: 'pending',
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
Populating recipient details...
Looking up recipient: 6905adf16a22b7843b006183
Found recipient: sayantan3
Final populated sent requests: [
  {
    id: '6905cdce14ad0d0f020b3985',
    to: {
      id: '6905adf16a22b7843b006183',
      username: 'sayantan3',
      email: 'sayantan3@gmail.com',
      profilePicture: undefined
    },
    status: 'pending',
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
=== FRIEND REQUEST GET END (sent) ===
 GET /api/friends/request?type=sent 200 in 123ms
 GET /api/socket-health 200 in 28ms
 GET /socket.io?EIO=4&transport=polling&t=z541nkkk 404 in 90ms
 GET /api/socket-health 200 in 26ms
 GET /socket.io?EIO=4&transport=polling&t=z54tileu 404 in 89ms
 GET /api/socket-health 200 in 27ms
 GET /socket.io?EIO=4&transport=polling&t=z55lcbt0 404 in 96ms
 GET /api/socket-health 200 in 28ms
 GET /socket.io?EIO=4&transport=polling&t=z56d66x7 404 in 92ms
 GET /api/socket-health 200 in 30ms
 GET /socket.io?EIO=4&transport=polling&t=z5758gkn 404 in 106ms
 GET /api/socket-health 200 in 25ms
 GET /socket.io?EIO=4&transport=polling&t=z57wimv3 404 in 98ms
 GET /api/socket-health 200 in 27ms
 GET /socket.io?EIO=4&transport=polling&t=z58o9hl3 404 in 90ms
 GET /api/socket-health 200 in 27ms
 GET /socket.io?EIO=4&transport=polling&t=z59g4izb 404 in 96ms
 GET /api/socket-health 200 in 34ms
 GET /socket.io?EIO=4&transport=polling&t=z5a7zd2e 404 in 87ms
 GET /api/socket-health 200 in 26ms
 GET /socket.io?EIO=4&transport=polling&t=z5azqu6r 404 in 91ms
 GET /api/socket-health 200 in 29ms
 GET /socket.io?EIO=4&transport=polling&t=z5brfsnf 404 in 103ms
 GET /api/socket-health 200 in 28ms
 GET /socket.io?EIO=4&transport=polling&t=z5cj263p 404 in 95ms
 GET /api/socket-health 200 in 63ms
 GET /socket.io?EIO=4&transport=polling&t=z5dbw2vt 404 in 108ms
 GET /api/socket-health 200 in 26ms
 GET /socket.io?EIO=4&transport=polling&t=z5e2m762 404 in 102ms
 GET /api/socket-health 200 in 48ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
 GET /socket.io?EIO=4&transport=polling&t=z5eve9uf 404 in 114ms
 POST /api/users/heartbeat 200 in 259ms
 GET /api/socket-health 200 in 67ms
 GET /socket.io?EIO=4&transport=polling&t=z5fpirj6 404 in 125ms
 GET /api/socket-health 200 in 27ms
 GET /socket.io?EIO=4&transport=polling&t=z5ge7nps 404 in 90ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
 GET /api/socket-health 200 in 56ms
 GET /socket.io?EIO=4&transport=polling&t=z5h6q6tg 404 in 98ms
 GET /api/conversations 200 in 178ms
 GET /api/socket-health 200 in 36ms
 GET /socket.io?EIO=4&transport=polling&t=z5hxzdy9 404 in 94ms
 GET /api/socket-health 200 in 28ms
 GET /socket.io?EIO=4&transport=polling&t=z5ipewsq 404 in 86ms
 GET /api/socket-health 200 in 26ms
 GET /socket.io?EIO=4&transport=polling&t=z5jh61ar 404 in 103ms
 GET /api/socket-health 200 in 34ms
 GET /socket.io?EIO=4&transport=polling&t=z5k95ssc 404 in 94ms
 GET /api/socket-health 200 in 26ms
 GET /socket.io?EIO=4&transport=polling&t=z5l0luc2 404 in 92ms
 GET /api/socket-health 200 in 28ms
 GET /socket.io?EIO=4&transport=polling&t=z5lsdsr0 404 in 95ms
 GET /api/socket-health 200 in 34ms
 GET /socket.io?EIO=4&transport=polling&t=z5mkql4n 404 in 113ms
 GET /api/socket-health 200 in 34ms
 GET /socket.io?EIO=4&transport=polling&t=z5nci3hf 404 in 129ms
 GET /api/socket-health 200 in 35ms
 GET /socket.io?EIO=4&transport=polling&t=z5o4bigt 404 in 103ms
 GET /api/socket-health 200 in 26ms
 GET /socket.io?EIO=4&transport=polling&t=z5ovvx1i 404 in 86ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
=== FRIEND REQUEST GET START ===
 GET /api/socket-health 200 in 82ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
Request type: received User: sayantan2@gmail.com
âœ… Database connected
 GET /socket.io?EIO=4&transport=polling&t=z5pp3b40 404 in 110ms
 GET /api/friends 200 in 222ms
âœ… Current user found: {
  id: new ObjectId('6901f85f42c5d010fa811206'),
  email: 'sayantan2@gmail.com',
  friendRequestsCount: 0,
  sentRequestsCount: 1
}
Processing received requests...
Raw friendRequests: []
Processed receivedRequests: []
Populating sender details...
Final populated requests: []
=== FRIEND REQUEST GET END (received) ===
 GET /api/friends/request?type=received 200 in 498ms
=== FRIEND REQUEST GET START ===
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
Request type: sent User: sayantan2@gmail.com
âœ… Database connected
âœ… Current user found: {
  id: new ObjectId('6901f85f42c5d010fa811206'),
  email: 'sayantan2@gmail.com',
  friendRequestsCount: 0,
  sentRequestsCount: 1
}
Processing sent requests...
Raw sentRequests: [
  {
    from: new ObjectId('6901f85f42c5d010fa811206'),
    fromName: 'sayantan2',
    to: new ObjectId('6905adf16a22b7843b006183'),
    toName: 'sayantan3',
    status: 'pending',
    _id: new ObjectId('6905cdce14ad0d0f020b3985'),
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
Filtering sent request: { status: 'pending', to: new ObjectId('6905adf16a22b7843b006183') }
Mapping sent request: {
  from: new ObjectId('6901f85f42c5d010fa811206'),
  fromName: 'sayantan2',
  to: new ObjectId('6905adf16a22b7843b006183'),
  toName: 'sayantan3',
  status: 'pending',
  _id: new ObjectId('6905cdce14ad0d0f020b3985'),
  createdAt: 2025-11-01T09:07:26.707Z,
  updatedAt: 2025-11-01T09:07:26.707Z
}
Processed sentRequests: [
  {
    id: '6905cdce14ad0d0f020b3985',
    to: {
      id: '6905adf16a22b7843b006183',
      username: 'sayantan3',
      email: '',
      profilePicture: null
    },
    status: 'pending',
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
Populating recipient details...
Looking up recipient: 6905adf16a22b7843b006183
Found recipient: sayantan3
Final populated sent requests: [
  {
    id: '6905cdce14ad0d0f020b3985',
    to: {
      id: '6905adf16a22b7843b006183',
      username: 'sayantan3',
      email: 'sayantan3@gmail.com',
      profilePicture: undefined
    },
    status: 'pending',
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
=== FRIEND REQUEST GET END (sent) ===
 GET /api/friends/request?type=sent 200 in 155ms
 GET /api/socket-health 200 in 49ms
 GET /socket.io?EIO=4&transport=polling&t=z5qft874 404 in 111ms
 GET /api/socket-health 200 in 33ms
 GET /socket.io?EIO=4&transport=polling&t=z5r7pyaw 404 in 112ms
 GET /api/socket-health 200 in 43ms
 GET /socket.io?EIO=4&transport=polling&t=z5rzc78k 404 in 110ms
 GET /api/socket-health 200 in 31ms
 GET /socket.io?EIO=4&transport=polling&t=z5sqjmhi 404 in 98ms
 GET /api/socket-health 200 in 28ms
 GET /socket.io?EIO=4&transport=polling&t=z5ti7072 404 in 88ms
 GET /api/socket-health 200 in 37ms
 GET /socket.io?EIO=4&transport=polling&t=z5uasw64 404 in 105ms
 GET /api/socket-health 200 in 30ms
 GET /socket.io?EIO=4&transport=polling&t=z5v28pim 404 in 110ms
 GET /api/socket-health 200 in 39ms
 GET /socket.io?EIO=4&transport=polling&t=z5vu7hlp 404 in 117ms
 GET /api/socket-health 200 in 30ms
 GET /socket.io?EIO=4&transport=polling&t=z5wllym7 404 in 119ms
 GET /api/socket-health 200 in 33ms
 GET /socket.io?EIO=4&transport=polling&t=z5xdjt1v 404 in 103ms
 GET /api/socket-health 200 in 38ms
 GET /socket.io?EIO=4&transport=polling&t=z5y5eluk 404 in 117ms
 GET /api/socket-health 200 in 37ms
 GET /socket.io?EIO=4&transport=polling&t=z5yx2q5r 404 in 97ms
 GET /api/socket-health 200 in 27ms
 GET /socket.io?EIO=4&transport=polling&t=z5zofjsj 404 in 94ms
 GET /api/socket-health 200 in 28ms
 GET /socket.io?EIO=4&transport=polling&t=z60gbzm4 404 in 90ms
 GET /api/socket-health 200 in 30ms
 GET /socket.io?EIO=4&transport=polling&t=z6182il4 404 in 112ms
 GET /api/socket-health 200 in 53ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
 GET /socket.io?EIO=4&transport=polling&t=z620vlyq 404 in 102ms
 POST /api/users/heartbeat 200 in 246ms
 GET /api/socket-health 200 in 27ms
 GET /socket.io?EIO=4&transport=polling&t=z62rkf3g 404 in 99ms
 GET /api/socket-health 200 in 33ms
 GET /socket.io?EIO=4&transport=polling&t=z63jvkf3 404 in 121ms
 GET /api/socket-health 200 in 44ms
 GET /socket.io?EIO=4&transport=polling&t=z64bwqyc 404 in 152ms
 GET /api/socket-health 200 in 45ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
 GET /socket.io?EIO=4&transport=polling&t=z653m7sd 404 in 113ms
 GET /api/conversations 200 in 205ms
 GET /api/socket-health 200 in 28ms
 GET /socket.io?EIO=4&transport=polling&t=z65uvn80 404 in 86ms
 GET /api/socket-health 200 in 33ms
 GET /socket.io?EIO=4&transport=polling&t=z66mobbo 404 in 99ms
 GET /api/socket-health 200 in 29ms
 GET /socket.io?EIO=4&transport=polling&t=z67edo31 404 in 91ms
 GET /api/socket-health 200 in 27ms
 GET /socket.io?EIO=4&transport=polling&t=z685ypt2 404 in 95ms
 GET /api/socket-health 200 in 32ms
 GET /socket.io?EIO=4&transport=polling&t=z68xwc25 404 in 95ms
 GET /api/socket-health 200 in 32ms
 GET /socket.io?EIO=4&transport=polling&t=z69q1w8n 404 in 103ms
 GET /api/socket-health 200 in 37ms
 GET /socket.io?EIO=4&transport=polling&t=z6ahyn9u 404 in 138ms
 GET /api/socket-health 200 in 28ms
 GET /socket.io?EIO=4&transport=polling&t=z6b9d8j6 404 in 93ms
 GET /api/socket-health 200 in 25ms
 GET /socket.io?EIO=4&transport=polling&t=z6c12m1y 404 in 98ms
 GET /api/socket-health 200 in 43ms
 GET /socket.io?EIO=4&transport=polling&t=z6ctd81u 404 in 102ms
 GET /api/socket-health 200 in 51ms
=== FRIEND REQUEST GET START ===
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
Request type: received User: sayantan2@gmail.com
âœ… Database connected
âœ… Current user found: {
  id: new ObjectId('6901f85f42c5d010fa811206'),
  email: 'sayantan2@gmail.com',
  friendRequestsCount: 0,
  sentRequestsCount: 1
}
Processing received requests...
Raw friendRequests: []
Processed receivedRequests: []
Populating sender details...
Final populated requests: []
=== FRIEND REQUEST GET END (received) ===
 GET /api/friends/request?type=received 200 in 139ms
=== FRIEND REQUEST GET START ===
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
Request type: sent User: sayantan2@gmail.com
âœ… Database connected
 GET /socket.io?EIO=4&transport=polling&t=z6dlaq23 404 in 122ms
âœ… Current user found: {
  id: new ObjectId('6901f85f42c5d010fa811206'),
  email: 'sayantan2@gmail.com',
  friendRequestsCount: 0,
  sentRequestsCount: 1
}
Processing sent requests...
Raw sentRequests: [
  {
    from: new ObjectId('6901f85f42c5d010fa811206'),
    fromName: 'sayantan2',
    to: new ObjectId('6905adf16a22b7843b006183'),
    toName: 'sayantan3',
    status: 'pending',
    _id: new ObjectId('6905cdce14ad0d0f020b3985'),
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
Filtering sent request: { status: 'pending', to: new ObjectId('6905adf16a22b7843b006183') }
Mapping sent request: {
  from: new ObjectId('6901f85f42c5d010fa811206'),
  fromName: 'sayantan2',
  to: new ObjectId('6905adf16a22b7843b006183'),
  toName: 'sayantan3',
  status: 'pending',
  _id: new ObjectId('6905cdce14ad0d0f020b3985'),
  createdAt: 2025-11-01T09:07:26.707Z,
  updatedAt: 2025-11-01T09:07:26.707Z
}
Processed sentRequests: [
  {
    id: '6905cdce14ad0d0f020b3985',
    to: {
      id: '6905adf16a22b7843b006183',
      username: 'sayantan3',
      email: '',
      profilePicture: null
    },
    status: 'pending',
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
Populating recipient details...
Looking up recipient: 6905adf16a22b7843b006183
Found recipient: sayantan3
Final populated sent requests: [
  {
    id: '6905cdce14ad0d0f020b3985',
    to: {
      id: '6905adf16a22b7843b006183',
      username: 'sayantan3',
      email: 'sayantan3@gmail.com',
      profilePicture: undefined
    },
    status: 'pending',
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
=== FRIEND REQUEST GET END (sent) ===
 GET /api/friends/request?type=sent 200 in 128ms
 GET /api/socket-health 200 in 28ms
 GET /socket.io?EIO=4&transport=polling&t=z6eca42e 404 in 97ms
 GET /api/socket-health 200 in 27ms
 GET /socket.io?EIO=4&transport=polling&t=z6f40bdx 404 in 91ms
 GET /api/socket-health 200 in 28ms
 GET /socket.io?EIO=4&transport=polling&t=z6fvunoo 404 in 95ms
 GET /api/socket-health 200 in 27ms
 GET /socket.io?EIO=4&transport=polling&t=z6gnxtor 404 in 81ms
 GET /api/socket-health 200 in 32ms
 GET /socket.io?EIO=4&transport=polling&t=z6hg3nda 404 in 98ms
 GET /api/socket-health 200 in 26ms
 GET /socket.io?EIO=4&transport=polling&t=z6i7bc34 404 in 97ms
 GET /api/socket-health 200 in 28ms
 GET /socket.io?EIO=4&transport=polling&t=z6iyvr7i 404 in 88ms
 GET /api/socket-health 200 in 26ms
 GET /socket.io?EIO=4&transport=polling&t=z6jql27f 404 in 94ms
 GET /api/socket-health 200 in 41ms
 GET /socket.io?EIO=4&transport=polling&t=z6kj4agk 404 in 105ms
 GET /api/socket-health 200 in 26ms
 GET /socket.io?EIO=4&transport=polling&t=z6lahy4v 404 in 94ms
 GET /api/socket-health 200 in 36ms
 GET /socket.io?EIO=4&transport=polling&t=z6m2ivia 404 in 107ms
 GET /api/socket-health 200 in 30ms
 GET /socket.io?EIO=4&transport=polling&t=z6mu5ds2 404 in 101ms
 GET /api/socket-health 200 in 33ms
 GET /socket.io?EIO=4&transport=polling&t=z6nlxf2b 404 in 104ms
 GET /api/socket-health 200 in 26ms
 GET /socket.io?EIO=4&transport=polling&t=z6odld5u 404 in 112ms
 GET /api/socket-health 200 in 54ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
 GET /socket.io?EIO=4&transport=polling&t=z6p672eb 404 in 119ms
 POST /api/users/heartbeat 200 in 258ms
 GET /api/socket-health 200 in 27ms
 GET /socket.io?EIO=4&transport=polling&t=z6pwvav5 404 in 96ms
 GET /api/socket-health 200 in 27ms
 GET /socket.io?EIO=4&transport=polling&t=z6qp0l24 404 in 99ms
 GET /api/socket-health 200 in 28ms
 GET /socket.io?EIO=4&transport=polling&t=z6rggvuu 404 in 90ms
 GET /api/socket-health 200 in 33ms
 GET /socket.io?EIO=4&transport=polling&t=z6s8opt9 404 in 97ms
 GET /api/socket-health 200 in 43ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
 GET /socket.io?EIO=4&transport=polling&t=z6t0mald 404 in 95ms
 GET /api/conversations 200 in 179ms
 GET /api/socket-health 200 in 27ms
 GET /socket.io?EIO=4&transport=polling&t=z6trwcq2 404 in 92ms
 GET /api/socket-health 200 in 27ms
 GET /socket.io?EIO=4&transport=polling&t=z6ujt29v 404 in 94ms
 GET /api/socket-health 200 in 27ms
 GET /socket.io?EIO=4&transport=polling&t=z6vbg2gr 404 in 92ms
 GET /api/socket-health 200 in 26ms
 GET /socket.io?EIO=4&transport=polling&t=z6w34kn1 404 in 97ms
 GET /api/socket-health 200 in 26ms
 GET /socket.io?EIO=4&transport=polling&t=z6wuxxqk 404 in 113ms
 GET /api/socket-health 200 in 34ms
 GET /socket.io?EIO=4&transport=polling&t=z6xmtath 404 in 92ms
 GET /api/socket-health 200 in 27ms
 GET /socket.io?EIO=4&transport=polling&t=z6yepjow 404 in 92ms
 GET /api/socket-health 200 in 28ms
 GET /socket.io?EIO=4&transport=polling&t=z6z6k03u 404 in 98ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
=== FRIEND REQUEST GET START ===
 GET /api/socket-health 200 in 108ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
Request type: received User: sayantan2@gmail.com
âœ… Database connected
 GET /api/friends 200 in 307ms
 GET /socket.io?EIO=4&transport=polling&t=z700xi1q 404 in 222ms
 GET /api/socket-health 200 in 38ms
 GET /socket.io?EIO=4&transport=polling&t=z70q1z1r 404 in 113ms
âœ… Current user found: {
  id: new ObjectId('6901f85f42c5d010fa811206'),
  email: 'sayantan2@gmail.com',
  friendRequestsCount: 0,
  sentRequestsCount: 1
}
Processing received requests...
Raw friendRequests: []
Processed receivedRequests: []
Populating sender details...
Final populated requests: []
=== FRIEND REQUEST GET END (received) ===
 GET /api/friends/request?type=received 200 in 1212ms
=== FRIEND REQUEST GET START ===
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
Request type: sent User: sayantan2@gmail.com
âœ… Database connected
âœ… Current user found: {
  id: new ObjectId('6901f85f42c5d010fa811206'),
  email: 'sayantan2@gmail.com',
  friendRequestsCount: 0,
  sentRequestsCount: 1
}
Processing sent requests...
Raw sentRequests: [
  {
    from: new ObjectId('6901f85f42c5d010fa811206'),
    fromName: 'sayantan2',
    to: new ObjectId('6905adf16a22b7843b006183'),
    toName: 'sayantan3',
    status: 'pending',
    _id: new ObjectId('6905cdce14ad0d0f020b3985'),
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
Filtering sent request: { status: 'pending', to: new ObjectId('6905adf16a22b7843b006183') }
Mapping sent request: {
  from: new ObjectId('6901f85f42c5d010fa811206'),
  fromName: 'sayantan2',
  to: new ObjectId('6905adf16a22b7843b006183'),
  toName: 'sayantan3',
  status: 'pending',
  _id: new ObjectId('6905cdce14ad0d0f020b3985'),
  createdAt: 2025-11-01T09:07:26.707Z,
  updatedAt: 2025-11-01T09:07:26.707Z
}
Processed sentRequests: [
  {
    id: '6905cdce14ad0d0f020b3985',
    to: {
      id: '6905adf16a22b7843b006183',
      username: 'sayantan3',
      email: '',
      profilePicture: null
    },
    status: 'pending',
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
Populating recipient details...
Looking up recipient: 6905adf16a22b7843b006183
Found recipient: sayantan3
Final populated sent requests: [
  {
    id: '6905cdce14ad0d0f020b3985',
    to: {
      id: '6905adf16a22b7843b006183',
      username: 'sayantan3',
      email: 'sayantan3@gmail.com',
      profilePicture: undefined
    },
    status: 'pending',
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
=== FRIEND REQUEST GET END (sent) ===
 GET /api/friends/request?type=sent 200 in 145ms
 GET /api/socket-health 200 in 59ms
 GET /socket.io?EIO=4&transport=polling&t=z71ijkyz 404 in 299ms
 GET /api/socket-health 200 in 51ms
 GET /socket.io?EIO=4&transport=polling&t=z72a98rn 404 in 168ms
 GET /api/socket-health 200 in 50ms
 GET /socket.io?EIO=4&transport=polling&t=z7321jjo 404 in 122ms
 GET /api/socket-health 200 in 31ms
 GET /socket.io?EIO=4&transport=polling&t=z73t8xgj 404 in 107ms
 GET /api/socket-health 200 in 30ms
 GET /socket.io?EIO=4&transport=polling&t=z74lc54m 404 in 103ms
 GET /api/socket-health 200 in 41ms
 GET /socket.io?EIO=4&transport=polling&t=z75cz0zd 404 in 112ms
 GET /api/socket-health 200 in 30ms
 GET /socket.io?EIO=4&transport=polling&t=z764e3e6 404 in 97ms
 GET /api/socket-health 200 in 26ms
 GET /socket.io?EIO=4&transport=polling&t=z76w3gbh 404 in 104ms
 GET /api/socket-health 200 in 26ms
 GET /socket.io?EIO=4&transport=polling&t=z77ntulu 404 in 105ms
 GET /api/socket-health 200 in 34ms
 GET /socket.io?EIO=4&transport=polling&t=z78fo7yz 404 in 100ms
 GET /api/socket-health 200 in 29ms
 GET /socket.io?EIO=4&transport=polling&t=z797jun1 404 in 96ms
 GET /api/socket-health 200 in 26ms
 GET /socket.io?EIO=4&transport=polling&t=z79zb1q1 404 in 100ms
 GET /api/socket-health 200 in 31ms
 GET /socket.io?EIO=4&transport=polling&t=z7ar4v4l 404 in 102ms
 GET /api/socket-health 200 in 30ms
 GET /socket.io?EIO=4&transport=polling&t=z7bj349x 404 in 88ms
 GET /api/socket-health 200 in 33ms
 GET /socket.io?EIO=4&transport=polling&t=z7caxfan 404 in 101ms
 GET /api/socket-health 200 in 28ms
 GET /socket.io?EIO=4&transport=polling&t=z7d2di6n 404 in 98ms
 GET /api/socket-health 200 in 32ms
 GET /socket.io?EIO=4&transport=polling&t=z7duc8lj 404 in 90ms
 GET /api/socket-health 200 in 31ms
 GET /socket.io?EIO=4&transport=polling&t=z7em3tnm 404 in 98ms
 GET /api/socket-health 200 in 34ms
 GET /socket.io?EIO=4&transport=polling&t=z7fdwr3f 404 in 89ms
 GET /api/socket-health 200 in 25ms
 GET /socket.io?EIO=4&transport=polling&t=z7g59lw4 404 in 104ms
 GET /api/socket-health 200 in 52ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
 GET /socket.io?EIO=4&transport=polling&t=z7gy498e 404 in 111ms
 GET /api/conversations 200 in 196ms
 GET /api/socket-health 200 in 29ms
 GET /socket.io?EIO=4&transport=polling&t=z7hp3dn8 404 in 106ms
 GET /api/socket-health 200 in 28ms
 GET /socket.io?EIO=4&transport=polling&t=z7igtjnz 404 in 104ms
 GET /api/socket-health 200 in 28ms
 GET /socket.io?EIO=4&transport=polling&t=z7j8j7mo 404 in 94ms
 GET /api/socket-health 200 in 26ms
 GET /socket.io?EIO=4&transport=polling&t=z7k07b3y 404 in 91ms
 GET /api/socket-health 200 in 29ms
 GET /socket.io?EIO=4&transport=polling&t=z7ks4tjr 404 in 98ms
 GET /api/socket-health 200 in 28ms
 GET /socket.io?EIO=4&transport=polling&t=z7ljsqoy 404 in 92ms
 GET /api/socket-health 200 in 26ms
 GET /socket.io?EIO=4&transport=polling&t=z7mbka7x 404 in 92ms
 GET /api/socket-health 200 in 29ms
 GET /socket.io?EIO=4&transport=polling&t=z7n3got0 404 in 96ms
 GET /api/socket-health 200 in 33ms
 GET /socket.io?EIO=4&transport=polling&t=z7nvmzyf 404 in 101ms
 GET /api/socket-health 200 in 41ms
=== FRIEND REQUEST GET START ===
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
Request type: received User: sayantan2@gmail.com
âœ… Database connected
âœ… Current user found: {
  id: new ObjectId('6901f85f42c5d010fa811206'),
  email: 'sayantan2@gmail.com',
  friendRequestsCount: 0,
  sentRequestsCount: 1
}
Processing received requests...
Raw friendRequests: []
Processed receivedRequests: []
Populating sender details...
Final populated requests: []
=== FRIEND REQUEST GET END (received) ===
 GET /api/friends/request?type=received 200 in 128ms
=== FRIEND REQUEST GET START ===
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
Request type: sent User: sayantan2@gmail.com
âœ… Database connected
 GET /socket.io?EIO=4&transport=polling&t=z7onl7pt 404 in 126ms
âœ… Current user found: {
  id: new ObjectId('6901f85f42c5d010fa811206'),
  email: 'sayantan2@gmail.com',
  friendRequestsCount: 0,
  sentRequestsCount: 1
}
Processing sent requests...
Raw sentRequests: [
  {
    from: new ObjectId('6901f85f42c5d010fa811206'),
    fromName: 'sayantan2',
    to: new ObjectId('6905adf16a22b7843b006183'),
    toName: 'sayantan3',
    status: 'pending',
    _id: new ObjectId('6905cdce14ad0d0f020b3985'),
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
Filtering sent request: { status: 'pending', to: new ObjectId('6905adf16a22b7843b006183') }
Mapping sent request: {
  from: new ObjectId('6901f85f42c5d010fa811206'),
  fromName: 'sayantan2',
  to: new ObjectId('6905adf16a22b7843b006183'),
  toName: 'sayantan3',
  status: 'pending',
  _id: new ObjectId('6905cdce14ad0d0f020b3985'),
  createdAt: 2025-11-01T09:07:26.707Z,
  updatedAt: 2025-11-01T09:07:26.707Z
}
Processed sentRequests: [
  {
    id: '6905cdce14ad0d0f020b3985',
    to: {
      id: '6905adf16a22b7843b006183',
      username: 'sayantan3',
      email: '',
      profilePicture: null
    },
    status: 'pending',
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
Populating recipient details...
Looking up recipient: 6905adf16a22b7843b006183
Found recipient: sayantan3
Final populated sent requests: [
  {
    id: '6905cdce14ad0d0f020b3985',
    to: {
      id: '6905adf16a22b7843b006183',
      username: 'sayantan3',
      email: 'sayantan3@gmail.com',
      profilePicture: undefined
    },
    status: 'pending',
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
=== FRIEND REQUEST GET END (sent) ===
 GET /api/friends/request?type=sent 200 in 125ms
 GET /api/socket-health 200 in 31ms
 GET /socket.io?EIO=4&transport=polling&t=z7pew7zj 404 in 91ms
 GET /api/socket-health 200 in 44ms
 GET /socket.io?EIO=4&transport=polling&t=z7q70f42 404 in 99ms
 GET /api/socket-health 200 in 29ms
 GET /socket.io?EIO=4&transport=polling&t=z7qycny9 404 in 115ms
 GET /api/socket-health 200 in 30ms
 GET /socket.io?EIO=4&transport=polling&t=z7rq6j51 404 in 133ms
 GET /api/socket-health 200 in 28ms
 GET /socket.io?EIO=4&transport=polling&t=z7shw7y9 404 in 111ms
 GET /api/socket-health 200 in 29ms
 GET /socket.io?EIO=4&transport=polling&t=z7t9nwhp 404 in 105ms
 GET /api/socket-health 200 in 33ms
 GET /socket.io?EIO=4&transport=polling&t=z7u1hoxc 404 in 91ms
 GET /api/socket-health 200 in 31ms
 GET /socket.io?EIO=4&transport=polling&t=z7ut5x24 404 in 93ms
 GET /api/socket-health 200 in 37ms
 GET /socket.io?EIO=4&transport=polling&t=z7vlk9x2 404 in 196ms
 GET /api/socket-health 200 in 49ms
 GET /socket.io?EIO=4&transport=polling&t=z7wdn970 404 in 769ms
 GET /api/socket-health 200 in 317ms
 GET /api/socket-health 200 in 111ms
 GET /socket.io?EIO=4&transport=polling&t=z7xlg37g 404 in 482ms
 GET /socket.io?EIO=4&transport=polling&t=z7xz5jk8 404 in 257ms
 GET /api/socket-health 200 in 71ms
 GET /api/socket-health 200 in 91ms
 GET /socket.io?EIO=4&transport=polling&t=z7zht8mj 404 in 477ms
 GET /socket.io?EIO=4&transport=polling&t=z7zkcxgv 404 in 254ms
 GET /api/socket-health 200 in 40ms
 GET /api/socket-health 200 in 151ms
 GET /socket.io?EIO=4&transport=polling&t=z80zpivh 404 in 257ms
 GET /socket.io?EIO=4&transport=polling&t=z813xan8 404 in 127ms
 GET /api/socket-health 200 in 31ms
 GET /api/socket-health 200 in 144ms
 GET /socket.io?EIO=4&transport=polling&t=z82jb8xe 404 in 231ms
 GET /socket.io?EIO=4&transport=polling&t=z82nfcnd 404 in 106ms
 GET /api/socket-health 200 in 27ms
 GET /api/socket-health 200 in 128ms
 GET /socket.io?EIO=4&transport=polling&t=z842sta7 404 in 214ms
 GET /socket.io?EIO=4&transport=polling&t=z846dq1v 404 in 96ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
 GET /api/conversations 200 in 120ms
 GET /api/socket-health 200 in 52ms
 GET /api/socket-health 200 in 163ms
 GET /socket.io?EIO=4&transport=polling&t=z85mx7w1 404 in 303ms
 GET /socket.io?EIO=4&transport=polling&t=z85rhnog 404 in 158ms
 GET /api/socket-health 200 in 45ms
 GET /api/socket-health 200 in 169ms
 GET /socket.io?EIO=4&transport=polling&t=z876g04k 404 in 293ms
 GET /socket.io?EIO=4&transport=polling&t=z87b7o54 404 in 137ms
 GET /api/socket-health 200 in 33ms
 GET /api/socket-health 200 in 185ms
 GET /socket.io?EIO=4&transport=polling&t=z88p88hn 404 in 315ms
 GET /socket.io?EIO=4&transport=polling&t=z88uff7h 404 in 127ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
=== FRIEND REQUEST GET START ===
 GET /api/socket-health 200 in 159ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
Request type: received User: sayantan2@gmail.com
âœ… Database connected
 POST /api/users/heartbeat 200 in 376ms
 GET /api/socket-health 200 in 193ms
 GET /socket.io?EIO=4&transport=polling&t=z8adtxx2 404 in 173ms
 GET /socket.io?EIO=4&transport=polling&t=z8ajs99x 404 in 109ms
âœ… Current user found: {
  id: new ObjectId('6901f85f42c5d010fa811206'),
  email: 'sayantan2@gmail.com',
  friendRequestsCount: 0,
  sentRequestsCount: 1
}
Processing received requests...
Raw friendRequests: []
Processed receivedRequests: []
Populating sender details...
Final populated requests: []
=== FRIEND REQUEST GET END (received) ===
 GET /api/friends/request?type=received 200 in 608ms
 GET /api/friends 200 in 668ms
=== FRIEND REQUEST GET START ===
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
Request type: sent User: sayantan2@gmail.com
âœ… Database connected
âœ… Current user found: {
  id: new ObjectId('6901f85f42c5d010fa811206'),
  email: 'sayantan2@gmail.com',
  friendRequestsCount: 0,
  sentRequestsCount: 1
}
Processing sent requests...
Raw sentRequests: [
  {
    from: new ObjectId('6901f85f42c5d010fa811206'),
    fromName: 'sayantan2',
    to: new ObjectId('6905adf16a22b7843b006183'),
    toName: 'sayantan3',
    status: 'pending',
    _id: new ObjectId('6905cdce14ad0d0f020b3985'),
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
Filtering sent request: { status: 'pending', to: new ObjectId('6905adf16a22b7843b006183') }
Mapping sent request: {
  from: new ObjectId('6901f85f42c5d010fa811206'),
  fromName: 'sayantan2',
  to: new ObjectId('6905adf16a22b7843b006183'),
  toName: 'sayantan3',
  status: 'pending',
  _id: new ObjectId('6905cdce14ad0d0f020b3985'),
  createdAt: 2025-11-01T09:07:26.707Z,
  updatedAt: 2025-11-01T09:07:26.707Z
}
Processed sentRequests: [
  {
    id: '6905cdce14ad0d0f020b3985',
    to: {
      id: '6905adf16a22b7843b006183',
      username: 'sayantan3',
      email: '',
      profilePicture: null
    },
    status: 'pending',
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
Populating recipient details...
Looking up recipient: 6905adf16a22b7843b006183
Found recipient: sayantan3
Final populated sent requests: [
  {
    id: '6905cdce14ad0d0f020b3985',
    to: {
      id: '6905adf16a22b7843b006183',
      username: 'sayantan3',
      email: 'sayantan3@gmail.com',
      profilePicture: undefined
    },
    status: 'pending',
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
=== FRIEND REQUEST GET END (sent) ===
 GET /api/friends/request?type=sent 200 in 151ms
 GET /api/socket-health 200 in 98ms
 GET /api/socket-health 200 in 409ms
 GET /socket.io?EIO=4&transport=polling&t=z8busjps 404 in 472ms
 GET /socket.io?EIO=4&transport=polling&t=z8c6hxbt 404 in 236ms
 GET /api/socket-health 200 in 45ms
 GET /api/socket-health 200 in 138ms
 GET /socket.io?EIO=4&transport=polling&t=z8dcdotz 404 in 228ms
 GET /socket.io?EIO=4&transport=polling&t=z8dg91nz 404 in 99ms
 GET /api/socket-health 200 in 53ms
 GET /api/socket-health 200 in 209ms
 GET /socket.io?EIO=4&transport=polling&t=z8ex1jzn 404 in 207ms
 GET /socket.io?EIO=4&transport=polling&t=z8f2vbpf 404 in 115ms
 GET /api/socket-health 200 in 33ms
 GET /api/socket-health 200 in 124ms
 GET /socket.io?EIO=4&transport=polling&t=z8gfdcle 404 in 208ms
 GET /socket.io?EIO=4&transport=polling&t=z8givoz3 404 in 90ms
 GET /api/socket-health 200 in 37ms
 GET /api/socket-health 200 in 108ms
 GET /socket.io?EIO=4&transport=polling&t=z8hyylwf 404 in 207ms
 GET /socket.io?EIO=4&transport=polling&t=z8i1zq1h 404 in 107ms
 GET /api/socket-health 200 in 67ms
 GET /api/socket-health 200 in 230ms
 GET /socket.io?EIO=4&transport=polling&t=z8jjgua7 404 in 309ms
 GET /socket.io?EIO=4&transport=polling&t=z8jrbpm6 404 in 106ms
 GET /api/socket-health 200 in 27ms
 GET /api/socket-health 200 in 104ms
 GET /socket.io?EIO=4&transport=polling&t=z8l22nfb 404 in 109ms
 GET /socket.io?EIO=4&transport=polling&t=z8l50r1j 404 in 102ms
 GET /api/socket-health 200 in 30ms
 GET /api/socket-health 200 in 116ms
 GET /socket.io?EIO=4&transport=polling&t=z8mljix1 404 in 204ms
 GET /socket.io?EIO=4&transport=polling&t=z8mou42b 404 in 95ms
 GET /api/socket-health 200 in 35ms
 GET /api/socket-health 200 in 157ms
 GET /socket.io?EIO=4&transport=polling&t=z8o5eivh 404 in 160ms
 GET /socket.io?EIO=4&transport=polling&t=z8o9usst 404 in 121ms
 GET /api/socket-health 200 in 26ms
 GET /api/socket-health 200 in 122ms
 GET /socket.io?EIO=4&transport=polling&t=z8pokfcm 404 in 214ms
 GET /socket.io?EIO=4&transport=polling&t=z8przutk 404 in 99ms
 GET /api/socket-health 200 in 27ms
 GET /api/socket-health 200 in 129ms
 GET /socket.io?EIO=4&transport=polling&t=z8r80ejh 404 in 218ms
 GET /socket.io?EIO=4&transport=polling&t=z8rbnmku 404 in 102ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
 GET /api/socket-health 200 in 61ms
 GET /api/socket-health 200 in 114ms
 GET /api/conversations 200 in 277ms
 GET /socket.io?EIO=4&transport=polling&t=z8ssf7ri 404 in 213ms
 GET /socket.io?EIO=4&transport=polling&t=z8svo7uo 404 in 106ms
 GET /api/socket-health 200 in 28ms
 GET /api/socket-health 200 in 128ms
 GET /socket.io?EIO=4&transport=polling&t=z8uav8t2 404 in 223ms
 GET /socket.io?EIO=4&transport=polling&t=z8uejap6 404 in 95ms
 GET /api/socket-health 200 in 38ms
 GET /api/socket-health 200 in 165ms
 GET /socket.io?EIO=4&transport=polling&t=z8vv7q63 404 in 165ms
 GET /socket.io?EIO=4&transport=polling&t=z8vztdpi 404 in 134ms
 GET /api/socket-health 200 in 56ms
 GET /api/socket-health 200 in 128ms
 GET /socket.io?EIO=4&transport=polling&t=z8xf2c39 404 in 238ms
 GET /socket.io?EIO=4&transport=polling&t=z8xipokd 404 in 123ms
=== FRIEND REQUEST GET START ===
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
Request type: received User: sayantan2@gmail.com
âœ… Database connected
âœ… Current user found: {
  id: new ObjectId('6901f85f42c5d010fa811206'),
  email: 'sayantan2@gmail.com',
  friendRequestsCount: 0,
  sentRequestsCount: 1
}
Processing received requests...
Raw friendRequests: []
Processed receivedRequests: []
Populating sender details...
Final populated requests: []
=== FRIEND REQUEST GET END (received) ===
 GET /api/friends/request?type=received 200 in 109ms
=== FRIEND REQUEST GET START ===
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
Request type: sent User: sayantan2@gmail.com
âœ… Database connected
âœ… Current user found: {
  id: new ObjectId('6901f85f42c5d010fa811206'),
  email: 'sayantan2@gmail.com',
  friendRequestsCount: 0,
  sentRequestsCount: 1
}
Processing sent requests...
Raw sentRequests: [
  {
    from: new ObjectId('6901f85f42c5d010fa811206'),
    fromName: 'sayantan2',
    to: new ObjectId('6905adf16a22b7843b006183'),
    toName: 'sayantan3',
    status: 'pending',
    _id: new ObjectId('6905cdce14ad0d0f020b3985'),
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
Filtering sent request: { status: 'pending', to: new ObjectId('6905adf16a22b7843b006183') }
Mapping sent request: {
  from: new ObjectId('6901f85f42c5d010fa811206'),
  fromName: 'sayantan2',
  to: new ObjectId('6905adf16a22b7843b006183'),
  toName: 'sayantan3',
  status: 'pending',
  _id: new ObjectId('6905cdce14ad0d0f020b3985'),
  createdAt: 2025-11-01T09:07:26.707Z,
  updatedAt: 2025-11-01T09:07:26.707Z
}
Processed sentRequests: [
  {
    id: '6905cdce14ad0d0f020b3985',
    to: {
      id: '6905adf16a22b7843b006183',
      username: 'sayantan3',
      email: '',
      profilePicture: null
    },
    status: 'pending',
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
Populating recipient details...
Looking up recipient: 6905adf16a22b7843b006183
Found recipient: sayantan3
Final populated sent requests: [
  {
    id: '6905cdce14ad0d0f020b3985',
    to: {
      id: '6905adf16a22b7843b006183',
      username: 'sayantan3',
      email: 'sayantan3@gmail.com',
      profilePicture: undefined
    },
    status: 'pending',
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
=== FRIEND REQUEST GET END (sent) ===
 GET /api/friends/request?type=sent 200 in 134ms
 GET /api/socket-health 200 in 49ms
 GET /api/socket-health 200 in 157ms
 GET /socket.io?EIO=4&transport=polling&t=z8yyf2p4 404 in 155ms
 GET /socket.io?EIO=4&transport=polling&t=z8z2v6oz 404 in 100ms
 GET /api/socket-health 200 in 31ms
 GET /api/socket-health 200 in 121ms
 GET /socket.io?EIO=4&transport=polling&t=z90hgt97 404 in 208ms
 GET /socket.io?EIO=4&transport=polling&t=z90kv935 404 in 95ms
 GET /api/socket-health 200 in 43ms
 GET /api/socket-health 200 in 137ms
 GET /socket.io?EIO=4&transport=polling&t=z921jspj 404 in 222ms
 GET /socket.io?EIO=4&transport=polling&t=z925eg2t 404 in 99ms
 GET /api/socket-health 200 in 33ms
 GET /api/socket-health 200 in 116ms
 GET /socket.io?EIO=4&transport=polling&t=z93kjw3i 404 in 219ms
 GET /socket.io?EIO=4&transport=polling&t=z93ntr7s 404 in 109ms
 GET /api/socket-health 200 in 27ms
 GET /api/socket-health 200 in 110ms
 GET /socket.io?EIO=4&transport=polling&t=z953zr5e 404 in 215ms
 GET /socket.io?EIO=4&transport=polling&t=z95747gw 404 in 113ms
 GET /api/socket-health 200 in 35ms
 GET /api/socket-health 200 in 112ms
 GET /socket.io?EIO=4&transport=polling&t=z96nybsm 404 in 214ms
 GET /socket.io?EIO=4&transport=polling&t=z96r4dvk 404 in 112ms
 GET /api/socket-health 200 in 83ms
 GET /api/socket-health 200 in 244ms
 GET /socket.io?EIO=4&transport=polling&t=z988odol 404 in 372ms
 GET /socket.io?EIO=4&transport=polling&t=z98fifrf 404 in 150ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
 GET /api/auth/session 200 in 60ms
=== FRIEND REQUEST GET START ===
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
Request type: received User: sayantan2@gmail.com
âœ… Database connected
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
âœ… Current user found: {
  id: new ObjectId('6901f85f42c5d010fa811206'),
  email: 'sayantan2@gmail.com',
  friendRequestsCount: 0,
  sentRequestsCount: 1
}
Processing received requests...
Raw friendRequests: []
Processed receivedRequests: []
Populating sender details...
Final populated requests: []
=== FRIEND REQUEST GET END (received) ===
 GET /api/friends/request?type=received 200 in 157ms
=== FRIEND REQUEST GET START ===
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
Request type: sent User: sayantan2@gmail.com
âœ… Database connected
âœ… Current user found: {
  id: new ObjectId('6901f85f42c5d010fa811206'),
  email: 'sayantan2@gmail.com',
  friendRequestsCount: 0,
  sentRequestsCount: 1
}
Processing sent requests...
Raw sentRequests: [
  {
    from: new ObjectId('6901f85f42c5d010fa811206'),
    fromName: 'sayantan2',
    to: new ObjectId('6905adf16a22b7843b006183'),
    toName: 'sayantan3',
    status: 'pending',
    _id: new ObjectId('6905cdce14ad0d0f020b3985'),
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
Filtering sent request: { status: 'pending', to: new ObjectId('6905adf16a22b7843b006183') }
Mapping sent request: {
  from: new ObjectId('6901f85f42c5d010fa811206'),
  fromName: 'sayantan2',
  to: new ObjectId('6905adf16a22b7843b006183'),
  toName: 'sayantan3',
  status: 'pending',
  _id: new ObjectId('6905cdce14ad0d0f020b3985'),
  createdAt: 2025-11-01T09:07:26.707Z,
  updatedAt: 2025-11-01T09:07:26.707Z
}
Processed sentRequests: [
  {
    id: '6905cdce14ad0d0f020b3985',
    to: {
      id: '6905adf16a22b7843b006183',
      username: 'sayantan3',
      email: '',
      profilePicture: null
    },
    status: 'pending',
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
Populating recipient details...
Looking up recipient: 6905adf16a22b7843b006183
 GET /api/users/me 200 in 379ms
Found recipient: sayantan3
Final populated sent requests: [
  {
    id: '6905cdce14ad0d0f020b3985',
    to: {
      id: '6905adf16a22b7843b006183',
      username: 'sayantan3',
      email: 'sayantan3@gmail.com',
      profilePicture: undefined
    },
    status: 'pending',
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
=== FRIEND REQUEST GET END (sent) ===
 GET /api/friends/request?type=sent 200 in 262ms
 POST /api/users/heartbeat 200 in 463ms
 GET /api/random-chat/queue 200 in 594ms
 GET /api/friends 200 in 616ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
 GET /api/random-chat/session 200 in 133ms
 GET /api/socket-health 200 in 55ms
 GET /api/socket-health 200 in 170ms
 GET /socket.io?EIO=4&transport=polling&t=z99ri623 404 in 1254ms
 GET /socket.io?EIO=4&transport=polling&t=z99wnnbu 404 in 207ms
 GET /api/socket-health 200 in 31ms
 GET /api/socket-health 200 in 126ms
 GET /socket.io?EIO=4&transport=polling&t=z9c25vda 404 in 117ms
 GET /socket.io?EIO=4&transport=polling&t=z9c5p9xk 404 in 102ms
 GET /api/socket-health 200 in 29ms
 GET /api/socket-health 200 in 128ms
 GET /socket.io?EIO=4&transport=polling&t=z9dljn0f 404 in 129ms
 GET /socket.io?EIO=4&transport=polling&t=z9dp7222 404 in 106ms
 GET /api/socket-health 200 in 33ms
 GET /api/socket-health 200 in 136ms
 GET /socket.io?EIO=4&transport=polling&t=z9f54r9g 404 in 199ms
 GET /socket.io?EIO=4&transport=polling&t=z9f8yjl5 404 in 99ms
 GET /api/socket-health 200 in 28ms
 GET /api/socket-health 200 in 111ms
 GET /socket.io?EIO=4&transport=polling&t=z9gof1pp 404 in 204ms
 GET /socket.io?EIO=4&transport=polling&t=z9grk649 404 in 102ms
 GET /api/socket-health 200 in 30ms
 GET /api/socket-health 200 in 126ms
 GET /socket.io?EIO=4&transport=polling&t=z9i8c2v0 404 in 215ms
 GET /socket.io?EIO=4&transport=polling&t=z9ibv0n6 404 in 110ms
 GET /api/socket-health 200 in 28ms
 GET /api/socket-health 200 in 109ms
 GET /socket.io?EIO=4&transport=polling&t=z9jrqhd9 404 in 203ms
 GET /socket.io?EIO=4&transport=polling&t=z9jutpcp 404 in 100ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
=== FRIEND REQUEST GET START ===
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
Request type: received User: sayantan2@gmail.com
âœ… Database connected
âœ… Current user found: {
  id: new ObjectId('6901f85f42c5d010fa811206'),
  email: 'sayantan2@gmail.com',
  friendRequestsCount: 0,
  sentRequestsCount: 1
}
Processing received requests...
Raw friendRequests: []
Processed receivedRequests: []
Populating sender details...
Final populated requests: []
=== FRIEND REQUEST GET END (received) ===
 GET /api/friends/request?type=received 200 in 131ms
=== FRIEND REQUEST GET START ===
 GET /api/friends 200 in 169ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
Request type: sent User: sayantan2@gmail.com
âœ… Database connected
âœ… Current user found: {
  id: new ObjectId('6901f85f42c5d010fa811206'),
  email: 'sayantan2@gmail.com',
  friendRequestsCount: 0,
  sentRequestsCount: 1
}
Processing sent requests...
Raw sentRequests: [
  {
    from: new ObjectId('6901f85f42c5d010fa811206'),
    fromName: 'sayantan2',
    to: new ObjectId('6905adf16a22b7843b006183'),
    toName: 'sayantan3',
    status: 'pending',
    _id: new ObjectId('6905cdce14ad0d0f020b3985'),
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
Filtering sent request: { status: 'pending', to: new ObjectId('6905adf16a22b7843b006183') }
Mapping sent request: {
  from: new ObjectId('6901f85f42c5d010fa811206'),
  fromName: 'sayantan2',
  to: new ObjectId('6905adf16a22b7843b006183'),
  toName: 'sayantan3',
  status: 'pending',
  _id: new ObjectId('6905cdce14ad0d0f020b3985'),
  createdAt: 2025-11-01T09:07:26.707Z,
  updatedAt: 2025-11-01T09:07:26.707Z
}
Processed sentRequests: [
  {
    id: '6905cdce14ad0d0f020b3985',
    to: {
      id: '6905adf16a22b7843b006183',
      username: 'sayantan3',
      email: '',
      profilePicture: null
    },
    status: 'pending',
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
Populating recipient details...
Looking up recipient: 6905adf16a22b7843b006183
Found recipient: sayantan3
Final populated sent requests: [
  {
    id: '6905cdce14ad0d0f020b3985',
    to: {
      id: '6905adf16a22b7843b006183',
      username: 'sayantan3',
      email: 'sayantan3@gmail.com',
      profilePicture: undefined
    },
    status: 'pending',
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
=== FRIEND REQUEST GET END (sent) ===
 GET /api/friends/request?type=sent 200 in 135ms
 GET /api/socket-health 200 in 36ms
 GET /api/socket-health 200 in 143ms
 GET /socket.io?EIO=4&transport=polling&t=z9lbi24r 404 in 156ms
 GET /socket.io?EIO=4&transport=polling&t=z9lfmiyc 404 in 121ms
 GET /api/socket-health 200 in 58ms
 GET /api/socket-health 200 in 159ms
 GET /socket.io?EIO=4&transport=polling&t=z9mvq8xv 404 in 511ms
 GET /socket.io?EIO=4&transport=polling&t=z9n0xrif 404 in 188ms
 GET /api/socket-health 200 in 51ms
 GET /api/socket-health 200 in 139ms
 GET /socket.io?EIO=4&transport=polling&t=z9oezy90 404 in 232ms
 GET /socket.io?EIO=4&transport=polling&t=z9oiymh6 404 in 109ms
 GET /api/socket-health 200 in 28ms
 GET /api/socket-health 200 in 127ms
 GET /socket.io?EIO=4&transport=polling&t=z9pxw31z 404 in 225ms
 GET /socket.io?EIO=4&transport=polling&t=z9q1gak6 404 in 99ms
 GET /api/socket-health 200 in 41ms
 GET /api/socket-health 200 in 109ms
 GET /socket.io?EIO=4&transport=polling&t=z9rhrnyc 404 in 116ms
 GET /socket.io?EIO=4&transport=polling&t=z9rkxnxj 404 in 99ms
 GET /api/socket-health 200 in 58ms
 GET /api/socket-health 200 in 132ms
 GET /socket.io?EIO=4&transport=polling&t=z9t28ilq 404 in 241ms
 GET /socket.io?EIO=4&transport=polling&t=z9t5zuv9 404 in 131ms
 GET /api/socket-health 200 in 35ms
 GET /api/socket-health 200 in 109ms
 GET /socket.io?EIO=4&transport=polling&t=z9ukx4va 404 in 113ms
 GET /socket.io?EIO=4&transport=polling&t=z9unzv0b 404 in 107ms
 GET /api/socket-health 200 in 28ms
 GET /api/socket-health 200 in 121ms
 GET /socket.io?EIO=4&transport=polling&t=z9w47dzz 404 in 213ms
 GET /socket.io?EIO=4&transport=polling&t=z9w7m0u9 404 in 97ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
 GET /api/conversations 200 in 189ms
 POST /api/users/heartbeat 200 in 233ms
 GET /api/socket-health 200 in 51ms
 GET /api/socket-health 200 in 148ms
 GET /socket.io?EIO=4&transport=polling&t=z9xogkm8 404 in 236ms
 GET /socket.io?EIO=4&transport=polling&t=z9xsqvyc 404 in 103ms
 GET /api/socket-health 200 in 28ms
 GET /api/socket-health 200 in 114ms
 GET /socket.io?EIO=4&transport=polling&t=z9z78geh 404 in 199ms
 GET /socket.io?EIO=4&transport=polling&t=z9zai5li 404 in 95ms
 GET /api/socket-health 200 in 38ms
 GET /api/socket-health 200 in 127ms
 GET /socket.io?EIO=4&transport=polling&t=za0r2rir 404 in 214ms
 GET /socket.io?EIO=4&transport=polling&t=za0un42e 404 in 98ms
 GET /api/socket-health 200 in 27ms
 GET /api/socket-health 200 in 128ms
 GET /socket.io?EIO=4&transport=polling&t=za2aj2nw 404 in 215ms
 GET /socket.io?EIO=4&transport=polling&t=za2e5u28 404 in 93ms
 GET /api/socket-health 200 in 27ms
 GET /api/socket-health 200 in 124ms
 GET /socket.io?EIO=4&transport=polling&t=za3uavjn 404 in 133ms
 GET /socket.io?EIO=4&transport=polling&t=za3xsqzj 404 in 94ms
 GET /api/socket-health 200 in 27ms
 GET /api/socket-health 200 in 110ms
 GET /socket.io?EIO=4&transport=polling&t=za5dawii 404 in 200ms
 GET /socket.io?EIO=4&transport=polling&t=za5gfm3g 404 in 97ms
 GET /api/socket-health 200 in 28ms
 GET /api/socket-health 200 in 115ms
 GET /socket.io?EIO=4&transport=polling&t=za6wyq3u 404 in 203ms
 GET /socket.io?EIO=4&transport=polling&t=za70781m 404 in 98ms
 GET /api/socket-health 200 in 63ms
=== FRIEND REQUEST GET START ===
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
Request type: received User: sayantan2@gmail.com
âœ… Database connected
âœ… Current user found: {
  id: new ObjectId('6901f85f42c5d010fa811206'),
  email: 'sayantan2@gmail.com',
  friendRequestsCount: 0,
  sentRequestsCount: 1
}
Processing received requests...
Raw friendRequests: []
Processed receivedRequests: []
Populating sender details...
Final populated requests: []
=== FRIEND REQUEST GET END (received) ===
 GET /api/friends/request?type=received 200 in 170ms
 GET /api/socket-health 200 in 122ms
=== FRIEND REQUEST GET START ===
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
Request type: sent User: sayantan2@gmail.com
âœ… Database connected
 GET /socket.io?EIO=4&transport=polling&t=za8hiqk1 404 in 229ms
 GET /socket.io?EIO=4&transport=polling&t=za8l2t9k 404 in 110ms
âœ… Current user found: {
  id: new ObjectId('6901f85f42c5d010fa811206'),
  email: 'sayantan2@gmail.com',
  friendRequestsCount: 0,
  sentRequestsCount: 1
}
Processing sent requests...
Raw sentRequests: [
  {
    from: new ObjectId('6901f85f42c5d010fa811206'),
    fromName: 'sayantan2',
    to: new ObjectId('6905adf16a22b7843b006183'),
    toName: 'sayantan3',
    status: 'pending',
    _id: new ObjectId('6905cdce14ad0d0f020b3985'),
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
Filtering sent request: { status: 'pending', to: new ObjectId('6905adf16a22b7843b006183') }
Mapping sent request: {
  from: new ObjectId('6901f85f42c5d010fa811206'),
  fromName: 'sayantan2',
  to: new ObjectId('6905adf16a22b7843b006183'),
  toName: 'sayantan3',
  status: 'pending',
  _id: new ObjectId('6905cdce14ad0d0f020b3985'),
  createdAt: 2025-11-01T09:07:26.707Z,
  updatedAt: 2025-11-01T09:07:26.707Z
}
Processed sentRequests: [
  {
    id: '6905cdce14ad0d0f020b3985',
    to: {
      id: '6905adf16a22b7843b006183',
      username: 'sayantan3',
      email: '',
      profilePicture: null
    },
    status: 'pending',
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
Populating recipient details...
Looking up recipient: 6905adf16a22b7843b006183
Found recipient: sayantan3
Final populated sent requests: [
  {
    id: '6905cdce14ad0d0f020b3985',
    to: {
      id: '6905adf16a22b7843b006183',
      username: 'sayantan3',
      email: 'sayantan3@gmail.com',
      profilePicture: undefined
    },
    status: 'pending',
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
=== FRIEND REQUEST GET END (sent) ===
 GET /api/friends/request?type=sent 200 in 207ms
 GET /api/socket-health 200 in 28ms
 GET /api/socket-health 200 in 116ms
 GET /socket.io?EIO=4&transport=polling&t=zaa0bnsr 404 in 199ms
 GET /socket.io?EIO=4&transport=polling&t=zaa3nv1y 404 in 100ms
 GET /api/socket-health 200 in 29ms
 GET /api/socket-health 200 in 115ms
 GET /socket.io?EIO=4&transport=polling&t=zabjj7of 404 in 205ms
 GET /socket.io?EIO=4&transport=polling&t=zabmsw5x 404 in 103ms
 GET /api/socket-health 200 in 30ms
 GET /api/socket-health 200 in 122ms
 GET /socket.io?EIO=4&transport=polling&t=zad3jjzm 404 in 202ms
 GET /socket.io?EIO=4&transport=polling&t=zad6zu0v 404 in 100ms
 GET /api/socket-health 200 in 41ms
 GET /api/socket-health 200 in 145ms
 GET /socket.io?EIO=4&transport=polling&t=zaengvwx 404 in 141ms
 GET /socket.io?EIO=4&transport=polling&t=zaerm7sy 404 in 142ms
 GET /api/socket-health 200 in 44ms
 GET /api/socket-health 200 in 180ms
 GET /socket.io?EIO=4&transport=polling&t=zag6vjxp 404 in 167ms
 GET /socket.io?EIO=4&transport=polling&t=zagbyiye 404 in 139ms
 GET /api/socket-health 200 in 36ms
 GET /api/socket-health 200 in 140ms
 GET /socket.io?EIO=4&transport=polling&t=zahq6eip 404 in 251ms
 GET /socket.io?EIO=4&transport=polling&t=zahu5b7c 404 in 116ms
 GET /api/socket-health 200 in 51ms
 GET /api/socket-health 200 in 149ms
 GET /socket.io?EIO=4&transport=polling&t=zajacks9 404 in 156ms
 GET /socket.io?EIO=4&transport=polling&t=zajejjek 404 in 120ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
 POST /api/users/heartbeat 200 in 201ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
 GET /api/socket-health 200 in 78ms
 GET /api/socket-health 200 in 157ms
 GET /api/conversations 200 in 359ms
 GET /socket.io?EIO=4&transport=polling&t=zakufttq 404 in 269ms
 GET /socket.io?EIO=4&transport=polling&t=zakywbjf 404 in 132ms
 GET /api/socket-health 200 in 37ms
 GET /api/socket-health 200 in 151ms
 GET /socket.io?EIO=4&transport=polling&t=zamcug7d 404 in 233ms
 GET /socket.io?EIO=4&transport=polling&t=zamh40gq 404 in 119ms
 GET /api/socket-health 200 in 38ms
 GET /api/socket-health 200 in 159ms
 GET /socket.io?EIO=4&transport=polling&t=zanwet3m 404 in 265ms
 GET /socket.io?EIO=4&transport=polling&t=zao0wglm 404 in 120ms
 GET /api/socket-health 200 in 40ms
 GET /api/socket-health 200 in 151ms
 GET /socket.io?EIO=4&transport=polling&t=zapfx58n 404 in 148ms
 GET /socket.io?EIO=4&transport=polling&t=zapk8y7p 404 in 122ms
 GET /api/socket-health 200 in 37ms
 GET /api/socket-health 200 in 142ms
 GET /socket.io?EIO=4&transport=polling&t=zaqziqbw 404 in 244ms
 GET /socket.io?EIO=4&transport=polling&t=zar3i8uv 404 in 125ms
 GET /api/socket-health 200 in 38ms
 GET /api/socket-health 200 in 147ms
 GET /socket.io?EIO=4&transport=polling&t=zasja83h 404 in 246ms
 GET /socket.io?EIO=4&transport=polling&t=zasngid9 404 in 116ms
 GET /api/socket-health 200 in 38ms
 GET /api/socket-health 200 in 134ms
 GET /socket.io?EIO=4&transport=polling&t=zau2unni 404 in 245ms
 GET /socket.io?EIO=4&transport=polling&t=zau6n1g5 404 in 130ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
=== FRIEND REQUEST GET START ===
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
Request type: received User: sayantan2@gmail.com
âœ… Database connected
 GET /api/friends 200 in 193ms
âœ… Current user found: {
  id: new ObjectId('6901f85f42c5d010fa811206'),
  email: 'sayantan2@gmail.com',
  friendRequestsCount: 0,
  sentRequestsCount: 1
}
Processing received requests...
Raw friendRequests: []
Processed receivedRequests: []
Populating sender details...
Final populated requests: []
=== FRIEND REQUEST GET END (received) ===
 GET /api/friends/request?type=received 200 in 570ms
=== FRIEND REQUEST GET START ===
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
Request type: sent User: sayantan2@gmail.com
âœ… Database connected
âœ… Current user found: {
  id: new ObjectId('6901f85f42c5d010fa811206'),
  email: 'sayantan2@gmail.com',
  friendRequestsCount: 0,
  sentRequestsCount: 1
}
Processing sent requests...
Raw sentRequests: [
  {
    from: new ObjectId('6901f85f42c5d010fa811206'),
    fromName: 'sayantan2',
    to: new ObjectId('6905adf16a22b7843b006183'),
    toName: 'sayantan3',
    status: 'pending',
    _id: new ObjectId('6905cdce14ad0d0f020b3985'),
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
Filtering sent request: { status: 'pending', to: new ObjectId('6905adf16a22b7843b006183') }
Mapping sent request: {
  from: new ObjectId('6901f85f42c5d010fa811206'),
  fromName: 'sayantan2',
  to: new ObjectId('6905adf16a22b7843b006183'),
  toName: 'sayantan3',
  status: 'pending',
  _id: new ObjectId('6905cdce14ad0d0f020b3985'),
  createdAt: 2025-11-01T09:07:26.707Z,
  updatedAt: 2025-11-01T09:07:26.707Z
}
Processed sentRequests: [
  {
    id: '6905cdce14ad0d0f020b3985',
    to: {
      id: '6905adf16a22b7843b006183',
      username: 'sayantan3',
      email: '',
      profilePicture: null
    },
    status: 'pending',
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
Populating recipient details...
Looking up recipient: 6905adf16a22b7843b006183
Found recipient: sayantan3
Final populated sent requests: [
  {
    id: '6905cdce14ad0d0f020b3985',
    to: {
      id: '6905adf16a22b7843b006183',
      username: 'sayantan3',
      email: 'sayantan3@gmail.com',
      profilePicture: undefined
    },
    status: 'pending',
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
=== FRIEND REQUEST GET END (sent) ===
 GET /api/friends/request?type=sent 200 in 157ms
 GET /api/socket-health 200 in 99ms
 GET /api/socket-health 200 in 274ms
 GET /socket.io?EIO=4&transport=polling&t=zavofjk5 404 in 250ms
 GET /socket.io?EIO=4&transport=polling&t=zavw7a0v 404 in 138ms
 GET /api/socket-health 200 in 51ms
 GET /api/socket-health 200 in 242ms
 GET /socket.io?EIO=4&transport=polling&t=zax62lit 404 in 517ms
 GET /socket.io?EIO=4&transport=polling&t=zaxcw9wd 404 in 284ms
 GET /api/socket-health 200 in 45ms
 GET /api/socket-health 200 in 142ms
 GET /socket.io?EIO=4&transport=polling&t=zaypjcoe 404 in 248ms
 GET /socket.io?EIO=4&transport=polling&t=zaytl2pr 404 in 125ms
 GET /api/socket-health 200 in 40ms
 GET /api/socket-health 200 in 149ms
 GET /socket.io?EIO=4&transport=polling&t=zb094wpn 404 in 261ms
 GET /socket.io?EIO=4&transport=polling&t=zb0dcs62 404 in 125ms
 GET /api/socket-health 200 in 35ms
 GET /api/socket-health 200 in 147ms
 GET /socket.io?EIO=4&transport=polling&t=zb1sibsp 404 in 144ms
 GET /socket.io?EIO=4&transport=polling&t=zb1wog7b 404 in 112ms
 GET /api/socket-health 200 in 43ms
 GET /api/socket-health 200 in 151ms
 GET /socket.io?EIO=4&transport=polling&t=zb3c8ziv 404 in 260ms
 GET /socket.io?EIO=4&transport=polling&t=zb3gixt6 404 in 115ms
 GET /api/socket-health 200 in 40ms
 GET /api/socket-health 200 in 140ms
 GET /socket.io?EIO=4&transport=polling&t=zb4vjqgw 404 in 141ms
 GET /socket.io?EIO=4&transport=polling&t=zb4zhdt0 404 in 118ms
 GET /api/socket-health 200 in 38ms
 GET /api/socket-health 200 in 152ms
 GET /socket.io?EIO=4&transport=polling&t=zb6fdff9 404 in 240ms
 GET /socket.io?EIO=4&transport=polling&t=zb6jo1s4 404 in 110ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
 POST /api/users/heartbeat 200 in 207ms
 GET /api/socket-health 200 in 37ms
 GET /api/socket-health 200 in 150ms
 GET /socket.io?EIO=4&transport=polling&t=zb7ysi4s 404 in 248ms
 GET /socket.io?EIO=4&transport=polling&t=zb8321za 404 in 121ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
 GET /api/conversations 200 in 132ms
 GET /api/socket-health 200 in 35ms
 GET /api/socket-health 200 in 152ms
 GET /socket.io?EIO=4&transport=polling&t=zb9ib64w 404 in 252ms
 GET /socket.io?EIO=4&transport=polling&t=zb9mljz0 404 in 122ms
 GET /api/socket-health 200 in 37ms
 GET /api/socket-health 200 in 137ms
 GET /socket.io?EIO=4&transport=polling&t=zbb1ula3 404 in 239ms
 GET /socket.io?EIO=4&transport=polling&t=zbb5p3yt 404 in 109ms
 GET /api/socket-health 200 in 47ms
 GET /api/socket-health 200 in 146ms
 GET /socket.io?EIO=4&transport=polling&t=zbcljwzj 404 in 150ms
 GET /socket.io?EIO=4&transport=polling&t=zbcpnwvn 404 in 119ms
 GET /api/socket-health 200 in 37ms
 GET /api/socket-health 200 in 140ms
 GET /socket.io?EIO=4&transport=polling&t=zbe4tjeh 404 in 255ms
 GET /socket.io?EIO=4&transport=polling&t=zbe8thxh 404 in 117ms
 GET /api/socket-health 200 in 44ms
 GET /api/socket-health 200 in 142ms
 GET /socket.io?EIO=4&transport=polling&t=zbfomntu 404 in 144ms
 GET /socket.io?EIO=4&transport=polling&t=zbfsm1bs 404 in 124ms
 GET /api/socket-health 200 in 37ms
 GET /api/socket-health 200 in 143ms
 GET /socket.io?EIO=4&transport=polling&t=zbh863g3 404 in 255ms
 GET /socket.io?EIO=4&transport=polling&t=zbhc8266 404 in 120ms
 GET /api/socket-health 200 in 62ms
=== FRIEND REQUEST GET START ===
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
Request type: received User: sayantan2@gmail.com
âœ… Database connected
âœ… Current user found: {
  id: new ObjectId('6901f85f42c5d010fa811206'),
  email: 'sayantan2@gmail.com',
  friendRequestsCount: 0,
  sentRequestsCount: 1
}
Processing received requests...
Raw friendRequests: []
Processed receivedRequests: []
Populating sender details...
Final populated requests: []
=== FRIEND REQUEST GET END (received) ===
 GET /api/friends/request?type=received 200 in 200ms
 GET /api/socket-health 200 in 159ms
=== FRIEND REQUEST GET START ===
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
Request type: sent User: sayantan2@gmail.com
âœ… Database connected
âœ… Current user found: {
  id: new ObjectId('6901f85f42c5d010fa811206'),
  email: 'sayantan2@gmail.com',
  friendRequestsCount: 0,
  sentRequestsCount: 1
}
Processing sent requests...
Raw sentRequests: [
  {
    from: new ObjectId('6901f85f42c5d010fa811206'),
    fromName: 'sayantan2',
    to: new ObjectId('6905adf16a22b7843b006183'),
    toName: 'sayantan3',
    status: 'pending',
    _id: new ObjectId('6905cdce14ad0d0f020b3985'),
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
Filtering sent request: { status: 'pending', to: new ObjectId('6905adf16a22b7843b006183') }
Mapping sent request: {
  from: new ObjectId('6901f85f42c5d010fa811206'),
  fromName: 'sayantan2',
  to: new ObjectId('6905adf16a22b7843b006183'),
  toName: 'sayantan3',
  status: 'pending',
  _id: new ObjectId('6905cdce14ad0d0f020b3985'),
  createdAt: 2025-11-01T09:07:26.707Z,
  updatedAt: 2025-11-01T09:07:26.707Z
}
Processed sentRequests: [
  {
    id: '6905cdce14ad0d0f020b3985',
    to: {
      id: '6905adf16a22b7843b006183',
      username: 'sayantan3',
      email: '',
      profilePicture: null
    },
    status: 'pending',
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
Populating recipient details...
Looking up recipient: 6905adf16a22b7843b006183
Found recipient: sayantan3
Final populated sent requests: [
  {
    id: '6905cdce14ad0d0f020b3985',
    to: {
      id: '6905adf16a22b7843b006183',
      username: 'sayantan3',
      email: 'sayantan3@gmail.com',
      profilePicture: undefined
    },
    status: 'pending',
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
=== FRIEND REQUEST GET END (sent) ===
 GET /api/friends/request?type=sent 200 in 194ms
 GET /socket.io?EIO=4&transport=polling&t=zbischeg 404 in 329ms
 GET /socket.io?EIO=4&transport=polling&t=zbiwy32l 404 in 193ms
 GET /api/socket-health 200 in 36ms
 GET /api/socket-health 200 in 147ms
 GET /socket.io?EIO=4&transport=polling&t=zbkb4gj9 404 in 148ms
 GET /socket.io?EIO=4&transport=polling&t=zbkfadpa 404 in 106ms
 GET /api/socket-health 200 in 56ms
 GET /api/socket-health 200 in 257ms
 GET /socket.io?EIO=4&transport=polling&t=zblvf6am 404 in 407ms
 GET /socket.io?EIO=4&transport=polling&t=zbm2noeb 404 in 151ms
 GET /api/socket-health 200 in 43ms
 GET /api/socket-health 200 in 139ms
 GET /socket.io?EIO=4&transport=polling&t=zbnegqxi 404 in 252ms
 GET /socket.io?EIO=4&transport=polling&t=zbnid4cr 404 in 128ms
 GET /api/socket-health 200 in 35ms
 GET /api/socket-health 200 in 140ms
 GET /socket.io?EIO=4&transport=polling&t=zboxr4hr 404 in 248ms
 GET /socket.io?EIO=4&transport=polling&t=zbp1posu 404 in 117ms
 GET /api/socket-health 200 in 45ms
 GET /api/socket-health 200 in 154ms
 GET /socket.io?EIO=4&transport=polling&t=zbqhs09v 404 in 266ms
 GET /socket.io?EIO=4&transport=polling&t=zbqm4vfs 404 in 125ms
 GET /api/socket-health 200 in 41ms
 GET /api/socket-health 200 in 154ms
 GET /socket.io?EIO=4&transport=polling&t=zbs17gt9 404 in 272ms
 GET /socket.io?EIO=4&transport=polling&t=zbs5l8vq 404 in 127ms
 GET /api/socket-health 200 in 36ms
 GET /api/socket-health 200 in 150ms
 GET /socket.io?EIO=4&transport=polling&t=zbtkslzf 404 in 260ms
 GET /socket.io?EIO=4&transport=polling&t=zbtp00u6 404 in 124ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
 POST /api/users/heartbeat 200 in 196ms
 GET /api/socket-health 200 in 51ms
 GET /api/socket-health 200 in 155ms
 GET /socket.io?EIO=4&transport=polling&t=zbv4fpzb 404 in 150ms
 GET /socket.io?EIO=4&transport=polling&t=zbv8sww6 404 in 130ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
 GET /api/socket-health 200 in 76ms
 GET /api/conversations 200 in 204ms
 GET /api/socket-health 200 in 153ms
 GET /socket.io?EIO=4&transport=polling&t=zbwovp87 404 in 262ms
 GET /socket.io?EIO=4&transport=polling&t=zbwt7kc6 404 in 123ms
 GET /api/socket-health 200 in 37ms
 GET /api/socket-health 200 in 139ms
 GET /socket.io?EIO=4&transport=polling&t=zby78b31 404 in 248ms
 GET /socket.io?EIO=4&transport=polling&t=zbyb6pvr 404 in 117ms
 GET /api/socket-health 200 in 39ms
 GET /api/socket-health 200 in 168ms
 GET /socket.io?EIO=4&transport=polling&t=zbzr0fam 404 in 276ms
 GET /socket.io?EIO=4&transport=polling&t=zbzvr6jx 404 in 128ms
 GET /api/socket-health 200 in 39ms
 GET /api/socket-health 200 in 141ms
 GET /socket.io?EIO=4&transport=polling&t=zc1ab05g 404 in 243ms
 GET /socket.io?EIO=4&transport=polling&t=zc1eb8lo 404 in 111ms
 GET /api/socket-health 200 in 43ms
 GET /api/socket-health 200 in 142ms
 GET /socket.io?EIO=4&transport=polling&t=zc2txjha 404 in 255ms
 GET /socket.io?EIO=4&transport=polling&t=zc2xxssb 404 in 124ms
 GET /api/socket-health 200 in 36ms
 GET /api/socket-health 200 in 143ms
 GET /socket.io?EIO=4&transport=polling&t=zc4d7q7j 404 in 261ms
 GET /socket.io?EIO=4&transport=polling&t=zc4h8aq5 404 in 124ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
=== FRIEND REQUEST GET START ===
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
Request type: received User: sayantan2@gmail.com
âœ… Database connected
 GET /api/friends 200 in 224ms
âœ… Current user found: {
  id: new ObjectId('6901f85f42c5d010fa811206'),
  email: 'sayantan2@gmail.com',
  friendRequestsCount: 0,
  sentRequestsCount: 1
}
Processing received requests...
Raw friendRequests: []
Processed receivedRequests: []
Populating sender details...
Final populated requests: []
=== FRIEND REQUEST GET END (received) ===
 GET /api/friends/request?type=received 200 in 598ms
=== FRIEND REQUEST GET START ===
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
Request type: sent User: sayantan2@gmail.com
âœ… Database connected
âœ… Current user found: {
  id: new ObjectId('6901f85f42c5d010fa811206'),
  email: 'sayantan2@gmail.com',
  friendRequestsCount: 0,
  sentRequestsCount: 1
}
Processing sent requests...
Raw sentRequests: [
  {
    from: new ObjectId('6901f85f42c5d010fa811206'),
    fromName: 'sayantan2',
    to: new ObjectId('6905adf16a22b7843b006183'),
    toName: 'sayantan3',
    status: 'pending',
    _id: new ObjectId('6905cdce14ad0d0f020b3985'),
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
Filtering sent request: { status: 'pending', to: new ObjectId('6905adf16a22b7843b006183') }
Mapping sent request: {
  from: new ObjectId('6901f85f42c5d010fa811206'),
  fromName: 'sayantan2',
  to: new ObjectId('6905adf16a22b7843b006183'),
  toName: 'sayantan3',
  status: 'pending',
  _id: new ObjectId('6905cdce14ad0d0f020b3985'),
  createdAt: 2025-11-01T09:07:26.707Z,
  updatedAt: 2025-11-01T09:07:26.707Z
}
Processed sentRequests: [
  {
    id: '6905cdce14ad0d0f020b3985',
    to: {
      id: '6905adf16a22b7843b006183',
      username: 'sayantan3',
      email: '',
      profilePicture: null
    },
    status: 'pending',
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
Populating recipient details...
Looking up recipient: 6905adf16a22b7843b006183
Found recipient: sayantan3
Final populated sent requests: [
  {
    id: '6905cdce14ad0d0f020b3985',
    to: {
      id: '6905adf16a22b7843b006183',
      username: 'sayantan3',
      email: 'sayantan3@gmail.com',
      profilePicture: undefined
    },
    status: 'pending',
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
=== FRIEND REQUEST GET END (sent) ===
 GET /api/friends/request?type=sent 200 in 166ms
 GET /api/socket-health 200 in 57ms
 GET /api/socket-health 200 in 217ms
 GET /socket.io?EIO=4&transport=polling&t=zc5xhy9m 404 in 325ms
 GET /socket.io?EIO=4&transport=polling&t=zc63lge0 404 in 124ms
 GET /api/socket-health 200 in 53ms
 GET /api/socket-health 200 in 217ms
 GET /socket.io?EIO=4&transport=polling&t=zc7gth4f 404 in 445ms
 GET /socket.io?EIO=4&transport=polling&t=zc7n0gc1 404 in 253ms
 GET /api/socket-health 200 in 48ms
 GET /api/socket-health 200 in 159ms
 GET /socket.io?EIO=4&transport=polling&t=zc90doik 404 in 265ms
 GET /socket.io?EIO=4&transport=polling&t=zc94uq25 404 in 117ms
 GET /api/socket-health 200 in 66ms
 GET /api/socket-health 200 in 144ms
 GET /socket.io?EIO=4&transport=polling&t=zcakevq7 404 in 278ms
 GET /socket.io?EIO=4&transport=polling&t=zcaogpe1 404 in 153ms
 GET /api/socket-health 200 in 38ms
 GET /api/socket-health 200 in 145ms
 GET /socket.io?EIO=4&transport=polling&t=zcc33xdz 404 in 250ms
 GET /socket.io?EIO=4&transport=polling&t=zcc77ird 404 in 115ms
 GET /api/socket-health 200 in 43ms
 GET /api/socket-health 200 in 146ms
 GET /socket.io?EIO=4&transport=polling&t=zcdmx3qp 404 in 145ms
 GET /socket.io?EIO=4&transport=polling&t=zcdr27xx 404 in 118ms
 GET /api/socket-health 200 in 38ms
 GET /api/socket-health 200 in 156ms
 GET /socket.io?EIO=4&transport=polling&t=zcf677oy 404 in 260ms
 GET /socket.io?EIO=4&transport=polling&t=zcfamtbs 404 in 114ms
 GET /api/socket-health 200 in 49ms
 GET /api/socket-health 200 in 143ms
 GET /socket.io?EIO=4&transport=polling&t=zcgqb5bs 404 in 143ms
 GET /socket.io?EIO=4&transport=polling&t=zcgucvs4 404 in 126ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
 POST /api/users/heartbeat 200 in 191ms
 GET /api/socket-health 200 in 46ms
 GET /api/socket-health 200 in 145ms
 GET /socket.io?EIO=4&transport=polling&t=zci9n61i 404 in 251ms
 GET /socket.io?EIO=4&transport=polling&t=zcidqwgu 404 in 123ms
 GET /api/socket-health 200 in 39ms
 GET /api/socket-health 200 in 149ms
 GET /socket.io?EIO=4&transport=polling&t=zcjt0i74 404 in 257ms
 GET /socket.io?EIO=4&transport=polling&t=zcjxaggl 404 in 116ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
 GET /api/conversations 200 in 170ms
 GET /api/socket-health 200 in 47ms
 GET /api/socket-health 200 in 205ms
 GET /socket.io?EIO=4&transport=polling&t=zclcuc66 404 in 210ms
 GET /socket.io?EIO=4&transport=polling&t=zclipnar 404 in 130ms
 GET /api/socket-health 200 in 37ms
 GET /api/socket-health 200 in 150ms
 GET /socket.io?EIO=4&transport=polling&t=zcmw1pub 404 in 260ms
 GET /socket.io?EIO=4&transport=polling&t=zcn0auly 404 in 130ms
 GET /api/socket-health 200 in 27ms
 GET /api/socket-health 200 in 192ms
 GET /socket.io?EIO=4&transport=polling&t=zcoftlyq 404 in 319ms
 GET /socket.io?EIO=4&transport=polling&t=zcol7gpv 404 in 149ms
 GET /api/socket-health 200 in 31ms
 GET /api/socket-health 200 in 110ms
 GET /socket.io?EIO=4&transport=polling&t=zcpyvf6p 404 in 203ms
 GET /socket.io?EIO=4&transport=polling&t=zcq1zn6h 404 in 103ms
 GET /api/socket-health 200 in 29ms
 GET /api/socket-health 200 in 109ms
 GET /socket.io?EIO=4&transport=polling&t=zcri7e8s 404 in 132ms
 GET /socket.io?EIO=4&transport=polling&t=zcrla7to 404 in 122ms
 GET /api/socket-health 200 in 48ms
=== FRIEND REQUEST GET START ===
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
Request type: received User: sayantan2@gmail.com
âœ… Database connected
âœ… Current user found: {
  id: new ObjectId('6901f85f42c5d010fa811206'),
  email: 'sayantan2@gmail.com',
  friendRequestsCount: 0,
  sentRequestsCount: 1
}
Processing received requests...
Raw friendRequests: []
Processed receivedRequests: []
Populating sender details...
Final populated requests: []
=== FRIEND REQUEST GET END (received) ===
 GET /api/friends/request?type=received 200 in 161ms
 GET /api/socket-health 200 in 128ms
=== FRIEND REQUEST GET START ===
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
Request type: sent User: sayantan2@gmail.com
âœ… Database connected
 GET /socket.io?EIO=4&transport=polling&t=zct2ob7b 404 in 245ms
 GET /socket.io?EIO=4&transport=polling&t=zct6dzhm 404 in 121ms
âœ… Current user found: {
  id: new ObjectId('6901f85f42c5d010fa811206'),
  email: 'sayantan2@gmail.com',
  friendRequestsCount: 0,
  sentRequestsCount: 1
}
Processing sent requests...
Raw sentRequests: [
  {
    from: new ObjectId('6901f85f42c5d010fa811206'),
    fromName: 'sayantan2',
    to: new ObjectId('6905adf16a22b7843b006183'),
    toName: 'sayantan3',
    status: 'pending',
    _id: new ObjectId('6905cdce14ad0d0f020b3985'),
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
Filtering sent request: { status: 'pending', to: new ObjectId('6905adf16a22b7843b006183') }
Mapping sent request: {
  from: new ObjectId('6901f85f42c5d010fa811206'),
  fromName: 'sayantan2',
  to: new ObjectId('6905adf16a22b7843b006183'),
  toName: 'sayantan3',
  status: 'pending',
  _id: new ObjectId('6905cdce14ad0d0f020b3985'),
  createdAt: 2025-11-01T09:07:26.707Z,
  updatedAt: 2025-11-01T09:07:26.707Z
}
Processed sentRequests: [
  {
    id: '6905cdce14ad0d0f020b3985',
    to: {
      id: '6905adf16a22b7843b006183',
      username: 'sayantan3',
      email: '',
      profilePicture: null
    },
    status: 'pending',
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
Populating recipient details...
Looking up recipient: 6905adf16a22b7843b006183
Found recipient: sayantan3
Final populated sent requests: [
  {
    id: '6905cdce14ad0d0f020b3985',
    to: {
      id: '6905adf16a22b7843b006183',
      username: 'sayantan3',
      email: 'sayantan3@gmail.com',
      profilePicture: undefined
    },
    status: 'pending',
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
=== FRIEND REQUEST GET END (sent) ===
 GET /api/friends/request?type=sent 200 in 200ms
 GET /api/socket-health 200 in 27ms
 GET /api/socket-health 200 in 114ms
 GET /socket.io?EIO=4&transport=polling&t=zcullrp6 404 in 120ms
 GET /socket.io?EIO=4&transport=polling&t=zcuou88p 404 in 96ms
 GET /api/socket-health 200 in 28ms
 GET /api/socket-health 200 in 111ms
 GET /socket.io?EIO=4&transport=polling&t=zcw57qo5 404 in 116ms
 GET /socket.io?EIO=4&transport=polling&t=zcw8e97k 404 in 96ms
 GET /api/socket-health 200 in 28ms
 GET /api/socket-health 200 in 120ms
 GET /socket.io?EIO=4&transport=polling&t=zcxomlri 404 in 206ms
 GET /socket.io?EIO=4&transport=polling&t=zcxs0aeo 404 in 98ms
 GET /api/socket-health 200 in 30ms
 GET /api/socket-health 200 in 113ms
 GET /socket.io?EIO=4&transport=polling&t=zcz8ebg3 404 in 119ms
 GET /socket.io?EIO=4&transport=polling&t=zczblubq 404 in 92ms
 GET /api/socket-health 200 in 29ms
 GET /api/socket-health 200 in 114ms
 GET /socket.io?EIO=4&transport=polling&t=zd0rsp7k 404 in 194ms
 GET /socket.io?EIO=4&transport=polling&t=zd0v0yxh 404 in 99ms
 GET /api/socket-health 200 in 33ms
 GET /api/socket-health 200 in 111ms
 GET /socket.io?EIO=4&transport=polling&t=zd2bitp6 404 in 203ms
 GET /socket.io?EIO=4&transport=polling&t=zd2enlv4 404 in 104ms
 GET /api/socket-health 200 in 30ms
 GET /api/socket-health 200 in 144ms
 GET /socket.io?EIO=4&transport=polling&t=zd3uxa2u 404 in 134ms
 GET /socket.io?EIO=4&transport=polling&t=zd3yzniz 404 in 101ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
 POST /api/users/heartbeat 200 in 160ms
 GET /api/socket-health 200 in 24ms
 GET /api/socket-health 200 in 141ms
 GET /socket.io?EIO=4&transport=polling&t=zd5eaczg 404 in 230ms
 GET /socket.io?EIO=4&transport=polling&t=zd5iahy7 404 in 110ms
 GET /api/socket-health 200 in 26ms
 GET /api/socket-health 200 in 111ms
 GET /socket.io?EIO=4&transport=polling&t=zd6xwy6j 404 in 200ms
 GET /socket.io?EIO=4&transport=polling&t=zd711xoj 404 in 93ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
 GET /api/socket-health 200 in 54ms
 GET /api/socket-health 200 in 113ms
 GET /api/conversations 200 in 259ms
 GET /socket.io?EIO=4&transport=polling&t=zd8i9p9t 404 in 203ms
 GET /socket.io?EIO=4&transport=polling&t=zd8lgumo 404 in 100ms
 GET /api/socket-health 200 in 28ms
 GET /api/socket-health 200 in 115ms
 GET /socket.io?EIO=4&transport=polling&t=zda12xlu 404 in 195ms
 GET /socket.io?EIO=4&transport=polling&t=zda4blzl 404 in 93ms
 GET /api/socket-health 200 in 27ms
 GET /api/socket-health 200 in 111ms
 GET /socket.io?EIO=4&transport=polling&t=zdbkhqil 404 in 192ms
 GET /socket.io?EIO=4&transport=polling&t=zdbnmnxk 404 in 101ms
 GET /api/socket-health 200 in 27ms
 GET /api/socket-health 200 in 112ms
 GET /socket.io?EIO=4&transport=polling&t=zdd3z4gi 404 in 197ms
 GET /socket.io?EIO=4&transport=polling&t=zdd75lf5 404 in 95ms
 GET /api/socket-health 200 in 29ms
 GET /api/socket-health 200 in 123ms
 GET /socket.io?EIO=4&transport=polling&t=zdenmdjq 404 in 201ms
 GET /socket.io?EIO=4&transport=polling&t=zder5cvg 404 in 108ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
=== FRIEND REQUEST GET START ===
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
Request type: received User: sayantan2@gmail.com
âœ… Database connected
 GET /api/friends 200 in 159ms
âœ… Current user found: {
  id: new ObjectId('6901f85f42c5d010fa811206'),
  email: 'sayantan2@gmail.com',
  friendRequestsCount: 0,
  sentRequestsCount: 1
}
Processing received requests...
Raw friendRequests: []
Processed receivedRequests: []
Populating sender details...
Final populated requests: []
=== FRIEND REQUEST GET END (received) ===
 GET /api/friends/request?type=received 200 in 573ms
=== FRIEND REQUEST GET START ===
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
Request type: sent User: sayantan2@gmail.com
âœ… Database connected
âœ… Current user found: {
  id: new ObjectId('6901f85f42c5d010fa811206'),
  email: 'sayantan2@gmail.com',
  friendRequestsCount: 0,
  sentRequestsCount: 1
}
Processing sent requests...
Raw sentRequests: [
  {
    from: new ObjectId('6901f85f42c5d010fa811206'),
    fromName: 'sayantan2',
    to: new ObjectId('6905adf16a22b7843b006183'),
    toName: 'sayantan3',
    status: 'pending',
    _id: new ObjectId('6905cdce14ad0d0f020b3985'),
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
Filtering sent request: { status: 'pending', to: new ObjectId('6905adf16a22b7843b006183') }
Mapping sent request: {
  from: new ObjectId('6901f85f42c5d010fa811206'),
  fromName: 'sayantan2',
  to: new ObjectId('6905adf16a22b7843b006183'),
  toName: 'sayantan3',
  status: 'pending',
  _id: new ObjectId('6905cdce14ad0d0f020b3985'),
  createdAt: 2025-11-01T09:07:26.707Z,
  updatedAt: 2025-11-01T09:07:26.707Z
}
Processed sentRequests: [
  {
    id: '6905cdce14ad0d0f020b3985',
    to: {
      id: '6905adf16a22b7843b006183',
      username: 'sayantan3',
      email: '',
      profilePicture: null
    },
    status: 'pending',
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
Populating recipient details...
Looking up recipient: 6905adf16a22b7843b006183
Found recipient: sayantan3
Final populated sent requests: [
  {
    id: '6905cdce14ad0d0f020b3985',
    to: {
      id: '6905adf16a22b7843b006183',
      username: 'sayantan3',
      email: 'sayantan3@gmail.com',
      profilePicture: undefined
    },
    status: 'pending',
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
=== FRIEND REQUEST GET END (sent) ===
 GET /api/friends/request?type=sent 200 in 149ms
 GET /api/socket-health 200 in 33ms
 GET /api/socket-health 200 in 132ms
 GET /socket.io?EIO=4&transport=polling&t=zdg79df5 404 in 127ms
 GET /socket.io?EIO=4&transport=polling&t=zdgazp12 404 in 126ms
 GET /api/socket-health 200 in 40ms
 GET /api/socket-health 200 in 157ms
 GET /socket.io?EIO=4&transport=polling&t=zdhr4x0f 404 in 170ms
 GET /socket.io?EIO=4&transport=polling&t=zdhvmu1u 404 in 152ms
 GET /api/socket-health 200 in 28ms
 GET /api/socket-health 200 in 35ms
 GET /socket.io?EIO=4&transport=polling&t=zdjam43p 404 in 212ms
 GET /socket.io?EIO=4&transport=polling&t=zdjbnetv 404 in 113ms
 GET /api/socket-health 200 in 26ms
 GET /api/socket-health 200 in 116ms
 GET /socket.io?EIO=4&transport=polling&t=zdktwqak 404 in 121ms
 GET /socket.io?EIO=4&transport=polling&t=zdkx6ki6 404 in 100ms
 GET /api/socket-health 200 in 28ms
 GET /api/socket-health 200 in 113ms
 GET /socket.io?EIO=4&transport=polling&t=zdmdp6jx 404 in 197ms
 GET /socket.io?EIO=4&transport=polling&t=zdmgxxxr 404 in 99ms
 GET /api/socket-health 200 in 38ms
 GET /api/socket-health 200 in 160ms
 GET /socket.io?EIO=4&transport=polling&t=zdny1vod 404 in 151ms
 GET /socket.io?EIO=4&transport=polling&t=zdo2iv1s 404 in 104ms
 GET /api/socket-health 200 in 34ms
 GET /api/socket-health 200 in 139ms
 GET /socket.io?EIO=4&transport=polling&t=zdpgo8il 404 in 211ms
 GET /socket.io?EIO=4&transport=polling&t=zdpkjo63 404 in 99ms
 GET /api/socket-health 200 in 30ms
 GET /api/socket-health 200 in 113ms
 GET /socket.io?EIO=4&transport=polling&t=zdr0an68 404 in 204ms
 GET /socket.io?EIO=4&transport=polling&t=zdr3jv8o 404 in 102ms
 GET /api/socket-health 200 in 32ms
 GET /api/socket-health 200 in 127ms
 GET /socket.io?EIO=4&transport=polling&t=zdsjwria 404 in 209ms
 GET /socket.io?EIO=4&transport=polling&t=zdsnhg06 404 in 105ms
 GET /api/socket-health 200 in 31ms
 GET /api/socket-health 200 in 115ms
 GET /socket.io?EIO=4&transport=polling&t=zdu3a4fb 404 in 214ms
 GET /socket.io?EIO=4&transport=polling&t=zdu6jgse 404 in 109ms
 GET /api/socket-health 200 in 32ms
 GET /api/socket-health 200 in 181ms
 GET /socket.io?EIO=4&transport=polling&t=zdvmu64j 404 in 315ms
 GET /socket.io?EIO=4&transport=polling&t=zdvrxi6s 404 in 439ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
 GET /api/conversations 200 in 142ms
 GET /api/socket-health 200 in 27ms
 GET /api/socket-health 200 in 111ms
 GET /socket.io?EIO=4&transport=polling&t=zdx6iytf 404 in 204ms
 GET /socket.io?EIO=4&transport=polling&t=zdx9ooaz 404 in 92ms
 GET /api/socket-health 200 in 31ms
 GET /api/socket-health 200 in 118ms
 GET /socket.io?EIO=4&transport=polling&t=zdyq4c40 404 in 199ms
 GET /socket.io?EIO=4&transport=polling&t=zdytgwsi 404 in 94ms
 GET /api/socket-health 200 in 27ms
 GET /api/socket-health 200 in 110ms
 GET /socket.io?EIO=4&transport=polling&t=ze09kf37 404 in 194ms
 GET /socket.io?EIO=4&transport=polling&t=ze0comki 404 in 89ms
 GET /api/socket-health 200 in 27ms
 GET /api/socket-health 200 in 103ms
 GET /socket.io?EIO=4&transport=polling&t=ze1tbf9f 404 in 191ms
 GET /socket.io?EIO=4&transport=polling&t=ze1w8e8r 404 in 99ms
 GET /api/socket-health 200 in 48ms
=== FRIEND REQUEST GET START ===
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
Request type: received User: sayantan2@gmail.com
âœ… Database connected
âœ… Current user found: {
  id: new ObjectId('6901f85f42c5d010fa811206'),
  email: 'sayantan2@gmail.com',
  friendRequestsCount: 0,
  sentRequestsCount: 1
}
Processing received requests...
Raw friendRequests: []
Processed receivedRequests: []
Populating sender details...
Final populated requests: []
=== FRIEND REQUEST GET END (received) ===
 GET /api/friends/request?type=received 200 in 154ms
 GET /api/socket-health 200 in 121ms
=== FRIEND REQUEST GET START ===
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
Request type: sent User: sayantan2@gmail.com
âœ… Database connected
âœ… Current user found: {
  id: new ObjectId('6901f85f42c5d010fa811206'),
  email: 'sayantan2@gmail.com',
  friendRequestsCount: 0,
  sentRequestsCount: 1
}
Processing sent requests...
Raw sentRequests: [
  {
    from: new ObjectId('6901f85f42c5d010fa811206'),
    fromName: 'sayantan2',
    to: new ObjectId('6905adf16a22b7843b006183'),
    toName: 'sayantan3',
    status: 'pending',
    _id: new ObjectId('6905cdce14ad0d0f020b3985'),
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
Filtering sent request: { status: 'pending', to: new ObjectId('6905adf16a22b7843b006183') }
Mapping sent request: {
  from: new ObjectId('6901f85f42c5d010fa811206'),
  fromName: 'sayantan2',
  to: new ObjectId('6905adf16a22b7843b006183'),
  toName: 'sayantan3',
  status: 'pending',
  _id: new ObjectId('6905cdce14ad0d0f020b3985'),
  createdAt: 2025-11-01T09:07:26.707Z,
  updatedAt: 2025-11-01T09:07:26.707Z
}
Processed sentRequests: [
  {
    id: '6905cdce14ad0d0f020b3985',
    to: {
      id: '6905adf16a22b7843b006183',
      username: 'sayantan3',
      email: '',
      profilePicture: null
    },
    status: 'pending',
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
Populating recipient details...
Looking up recipient: 6905adf16a22b7843b006183
 GET /socket.io?EIO=4&transport=polling&t=ze3d8rfq 404 in 231ms
 GET /socket.io?EIO=4&transport=polling&t=ze3gox4n 404 in 121ms
Found recipient: sayantan3
Final populated sent requests: [
  {
    id: '6905cdce14ad0d0f020b3985',
    to: {
      id: '6905adf16a22b7843b006183',
      username: 'sayantan3',
      email: 'sayantan3@gmail.com',
      profilePicture: undefined
    },
    status: 'pending',
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
=== FRIEND REQUEST GET END (sent) ===
 GET /api/friends/request?type=sent 200 in 162ms
 GET /api/socket-health 200 in 30ms
 GET /api/socket-health 200 in 135ms
 GET /socket.io?EIO=4&transport=polling&t=ze4w4v2i 404 in 127ms
 GET /socket.io?EIO=4&transport=polling&t=ze4zxz3h 404 in 95ms
 GET /api/socket-health 200 in 31ms
 GET /api/socket-health 200 in 116ms
 GET /socket.io?EIO=4&transport=polling&t=ze6g0ux3 404 in 206ms
 GET /socket.io?EIO=4&transport=polling&t=ze6j97wg 404 in 95ms
 GET /api/socket-health 200 in 36ms
 GET /api/socket-health 200 in 120ms
 GET /socket.io?EIO=4&transport=polling&t=ze7zjpx6 404 in 220ms
 GET /socket.io?EIO=4&transport=polling&t=ze82xws5 404 in 113ms
 GET /api/socket-health 200 in 29ms
 GET /api/socket-health 200 in 115ms
 GET /socket.io?EIO=4&transport=polling&t=ze9iupy3 404 in 208ms
 GET /socket.io?EIO=4&transport=polling&t=ze9m3nii 404 in 99ms
 GET /api/socket-health 200 in 35ms
 GET /api/socket-health 200 in 120ms
 GET /socket.io?EIO=4&transport=polling&t=zeb2on3q 404 in 126ms
 GET /socket.io?EIO=4&transport=polling&t=zeb62oyi 404 in 105ms
 GET /api/socket-health 200 in 29ms
 GET /api/socket-health 200 in 113ms
 GET /socket.io?EIO=4&transport=polling&t=zecm6vkl 404 in 205ms
 GET /socket.io?EIO=4&transport=polling&t=zecpds6b 404 in 98ms
 GET /api/socket-health 200 in 31ms
 GET /api/socket-health 200 in 121ms
 GET /socket.io?EIO=4&transport=polling&t=zee5w78d 404 in 219ms
 GET /socket.io?EIO=4&transport=polling&t=zee9b84f 404 in 106ms
 GET /api/socket-health 200 in 29ms
 GET /api/socket-health 200 in 121ms
 GET /socket.io?EIO=4&transport=polling&t=zefp9fq9 404 in 210ms
 GET /socket.io?EIO=4&transport=polling&t=zefsob6x 404 in 95ms
 GET /api/socket-health 200 in 30ms
 GET /api/socket-health 200 in 119ms
 GET /socket.io?EIO=4&transport=polling&t=zeh8ps82 404 in 207ms
 GET /socket.io?EIO=4&transport=polling&t=zehc2bbq 404 in 101ms
 GET /api/socket-health 200 in 31ms
 GET /api/socket-health 200 in 118ms
 GET /socket.io?EIO=4&transport=polling&t=zeis5t7x 404 in 211ms
 GET /socket.io?EIO=4&transport=polling&t=zeiviki4 404 in 96ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
 GET /api/socket-health 200 in 68ms
 GET /api/socket-health 200 in 150ms
 GET /socket.io?EIO=4&transport=polling&t=zekd3ti9 404 in 154ms
 GET /api/conversations 200 in 249ms
 GET /socket.io?EIO=4&transport=polling&t=zekhca1z 404 in 119ms
 GET /api/socket-health 200 in 46ms
 GET /api/socket-health 200 in 201ms
 GET /socket.io?EIO=4&transport=polling&t=zelvrhr7 404 in 355ms
 GET /socket.io?EIO=4&transport=polling&t=zem1eq68 404 in 184ms
 GET /api/socket-health 200 in 31ms
 GET /api/socket-health 200 in 142ms
 GET /socket.io?EIO=4&transport=polling&t=zenev0t0 404 in 149ms
 GET /socket.io?EIO=4&transport=polling&t=zeniv06a 404 in 120ms
 GET /api/socket-health 200 in 29ms
 GET /api/socket-health 200 in 118ms
 GET /socket.io?EIO=4&transport=polling&t=zeoybebg 404 in 214ms
 GET /socket.io?EIO=4&transport=polling&t=zep1n6ej 404 in 107ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
=== FRIEND REQUEST GET START ===
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
Request type: received User: sayantan2@gmail.com
âœ… Database connected
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
 POST /api/users/heartbeat 200 in 251ms
âœ… Current user found: {
  id: new ObjectId('6901f85f42c5d010fa811206'),
  email: 'sayantan2@gmail.com',
  friendRequestsCount: 0,
  sentRequestsCount: 1
}
Processing received requests...
Raw friendRequests: []
Processed receivedRequests: []
Populating sender details...
Final populated requests: []
=== FRIEND REQUEST GET END (received) ===
 GET /api/friends/request?type=received 200 in 458ms
 GET /api/friends 200 in 493ms
=== FRIEND REQUEST GET START ===
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
Request type: sent User: sayantan2@gmail.com
âœ… Database connected
âœ… Current user found: {
  id: new ObjectId('6901f85f42c5d010fa811206'),
  email: 'sayantan2@gmail.com',
  friendRequestsCount: 0,
  sentRequestsCount: 1
}
Processing sent requests...
Raw sentRequests: [
  {
    from: new ObjectId('6901f85f42c5d010fa811206'),
    fromName: 'sayantan2',
    to: new ObjectId('6905adf16a22b7843b006183'),
    toName: 'sayantan3',
    status: 'pending',
    _id: new ObjectId('6905cdce14ad0d0f020b3985'),
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
Filtering sent request: { status: 'pending', to: new ObjectId('6905adf16a22b7843b006183') }
Mapping sent request: {
  from: new ObjectId('6901f85f42c5d010fa811206'),
  fromName: 'sayantan2',
  to: new ObjectId('6905adf16a22b7843b006183'),
  toName: 'sayantan3',
  status: 'pending',
  _id: new ObjectId('6905cdce14ad0d0f020b3985'),
  createdAt: 2025-11-01T09:07:26.707Z,
  updatedAt: 2025-11-01T09:07:26.707Z
}
Processed sentRequests: [
  {
    id: '6905cdce14ad0d0f020b3985',
    to: {
      id: '6905adf16a22b7843b006183',
      username: 'sayantan3',
      email: '',
      profilePicture: null
    },
    status: 'pending',
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
Populating recipient details...
Looking up recipient: 6905adf16a22b7843b006183
Found recipient: sayantan3
Final populated sent requests: [
  {
    id: '6905cdce14ad0d0f020b3985',
    to: {
      id: '6905adf16a22b7843b006183',
      username: 'sayantan3',
      email: 'sayantan3@gmail.com',
      profilePicture: undefined
    },
    status: 'pending',
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
=== FRIEND REQUEST GET END (sent) ===
 GET /api/friends/request?type=sent 200 in 154ms
 GET /api/socket-health 200 in 42ms
 GET /api/socket-health 200 in 168ms
 GET /socket.io?EIO=4&transport=polling&t=zeqialmz 404 in 168ms
 GET /socket.io?EIO=4&transport=polling&t=zeqn2hn8 404 in 151ms
 GET /api/socket-health 200 in 53ms
 GET /api/socket-health 200 in 222ms
 GET /socket.io?EIO=4&transport=polling&t=zes2bvnl 404 in 364ms
 GET /socket.io?EIO=4&transport=polling&t=zes8ju4x 404 in 191ms
 GET /api/socket-health 200 in 29ms
 GET /api/socket-health 200 in 115ms
 GET /socket.io?EIO=4&transport=polling&t=zetl45pz 404 in 201ms
 GET /socket.io?EIO=4&transport=polling&t=zetod0m8 404 in 97ms
 GET /api/socket-health 200 in 41ms
 GET /api/socket-health 200 in 136ms
 GET /socket.io?EIO=4&transport=polling&t=zev4zy70 404 in 133ms
 GET /socket.io?EIO=4&transport=polling&t=zev8tgky 404 in 101ms
 GET /api/socket-health 200 in 45ms
 GET /api/socket-health 200 in 136ms
 GET /socket.io?EIO=4&transport=polling&t=zewov19p 404 in 216ms
 GET /socket.io?EIO=4&transport=polling&t=zewsr72h 404 in 102ms
 GET /api/socket-health 200 in 34ms
 GET /api/socket-health 200 in 217ms
 GET /socket.io?EIO=4&transport=polling&t=zey80kbb 404 in 218ms
 GET /socket.io?EIO=4&transport=polling&t=zeye5dym 404 in 174ms
 GET /api/socket-health 200 in 39ms
 GET /api/socket-health 200 in 142ms
 GET /socket.io?EIO=4&transport=polling&t=zezrqw9h 404 in 146ms
 GET /socket.io?EIO=4&transport=polling&t=zezvv7ro 404 in 127ms
 GET /api/socket-health 200 in 54ms
 GET /api/socket-health 200 in 171ms
 GET /socket.io?EIO=4&transport=polling&t=zf1brmyr 404 in 297ms
 GET /socket.io?EIO=4&transport=polling&t=zf1gofhn 404 in 147ms
 GET /api/socket-health 200 in 48ms
 GET /api/socket-health 200 in 122ms
 GET /socket.io?EIO=4&transport=polling&t=zf2uws1u 404 in 116ms
 GET /socket.io?EIO=4&transport=polling&t=zf2yegyo 404 in 117ms
 GET /api/socket-health 200 in 37ms
 GET /api/socket-health 200 in 117ms
 GET /socket.io?EIO=4&transport=polling&t=zf4ebnt5 404 in 232ms
 GET /socket.io?EIO=4&transport=polling&t=zf4hmdal 404 in 119ms
 GET /api/socket-health 200 in 49ms
 GET /api/socket-health 200 in 116ms
 GET /socket.io?EIO=4&transport=polling&t=zf5y9q7l 404 in 221ms
 GET /socket.io?EIO=4&transport=polling&t=zf61lvvi 404 in 119ms
 GET /api/socket-health 200 in 42ms
 GET /api/socket-health 200 in 151ms
 GET /socket.io?EIO=4&transport=polling&t=zf7hi7fs 404 in 272ms
 GET /socket.io?EIO=4&transport=polling&t=zf7lth6e 404 in 128ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
 GET /api/conversations 200 in 134ms
 GET /api/socket-health 200 in 33ms
 GET /api/socket-health 200 in 151ms
 GET /socket.io?EIO=4&transport=polling&t=zf90pzb4 404 in 149ms
 GET /socket.io?EIO=4&transport=polling&t=zf94z71x 404 in 120ms
 GET /api/socket-health 200 in 34ms
 GET /api/socket-health 200 in 130ms
 GET /socket.io?EIO=4&transport=polling&t=zfakay95 404 in 244ms
 GET /socket.io?EIO=4&transport=polling&t=zfanz0hk 404 in 124ms
 GET /api/socket-health 200 in 27ms
 GET /api/socket-health 200 in 116ms
 GET /socket.io?EIO=4&transport=polling&t=zfc3o98o 404 in 190ms
 GET /socket.io?EIO=4&transport=polling&t=zfc6yj5o 404 in 96ms
 GET /api/socket-health 200 in 51ms
=== FRIEND REQUEST GET START ===
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
Request type: received User: sayantan2@gmail.com
âœ… Database connected
âœ… Current user found: {
  id: new ObjectId('6901f85f42c5d010fa811206'),
  email: 'sayantan2@gmail.com',
  friendRequestsCount: 0,
  sentRequestsCount: 1
}
Processing received requests...
Raw friendRequests: []
Processed receivedRequests: []
Populating sender details...
Final populated requests: []
=== FRIEND REQUEST GET END (received) ===
 GET /api/friends/request?type=received 200 in 161ms
 GET /api/socket-health 200 in 126ms
=== FRIEND REQUEST GET START ===
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
Request type: sent User: sayantan2@gmail.com
âœ… Database connected
 GET /socket.io?EIO=4&transport=polling&t=zfdo14ow 404 in 256ms
 GET /socket.io?EIO=4&transport=polling&t=zfdrlfp7 404 in 143ms
âœ… Current user found: {
  id: new ObjectId('6901f85f42c5d010fa811206'),
  email: 'sayantan2@gmail.com',
  friendRequestsCount: 0,
  sentRequestsCount: 1
}
Processing sent requests...
Raw sentRequests: [
  {
    from: new ObjectId('6901f85f42c5d010fa811206'),
    fromName: 'sayantan2',
    to: new ObjectId('6905adf16a22b7843b006183'),
    toName: 'sayantan3',
    status: 'pending',
    _id: new ObjectId('6905cdce14ad0d0f020b3985'),
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
Filtering sent request: { status: 'pending', to: new ObjectId('6905adf16a22b7843b006183') }
Mapping sent request: {
  from: new ObjectId('6901f85f42c5d010fa811206'),
  fromName: 'sayantan2',
  to: new ObjectId('6905adf16a22b7843b006183'),
  toName: 'sayantan3',
  status: 'pending',
  _id: new ObjectId('6905cdce14ad0d0f020b3985'),
  createdAt: 2025-11-01T09:07:26.707Z,
  updatedAt: 2025-11-01T09:07:26.707Z
}
Processed sentRequests: [
  {
    id: '6905cdce14ad0d0f020b3985',
    to: {
      id: '6905adf16a22b7843b006183',
      username: 'sayantan3',
      email: '',
      profilePicture: null
    },
    status: 'pending',
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
Populating recipient details...
Looking up recipient: 6905adf16a22b7843b006183
Found recipient: sayantan3
Final populated sent requests: [
  {
    id: '6905cdce14ad0d0f020b3985',
    to: {
      id: '6905adf16a22b7843b006183',
      username: 'sayantan3',
      email: 'sayantan3@gmail.com',
      profilePicture: undefined
    },
    status: 'pending',
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
=== FRIEND REQUEST GET END (sent) ===
 GET /api/friends/request?type=sent 200 in 222ms
 GET /api/socket-health 200 in 33ms
 GET /api/socket-health 200 in 107ms
 GET /socket.io?EIO=4&transport=polling&t=zff6ut75 404 in 201ms
 GET /socket.io?EIO=4&transport=polling&t=zff9vrwv 404 in 105ms
 GET /api/socket-health 200 in 38ms
 GET /api/socket-health 200 in 145ms
 GET /socket.io?EIO=4&transport=polling&t=zfgqlvh2 404 in 251ms
 GET /socket.io?EIO=4&transport=polling&t=zfguprwf 404 in 127ms
 GET /api/socket-health 200 in 37ms
 GET /api/socket-health 200 in 147ms
 GET /socket.io?EIO=4&transport=polling&t=zfiaeyld 404 in 246ms
 GET /socket.io?EIO=4&transport=polling&t=zfiekma7 404 in 124ms
 GET /api/socket-health 200 in 39ms
 GET /api/socket-health 200 in 143ms
 GET /socket.io?EIO=4&transport=polling&t=zfjtovo5 404 in 148ms
 GET /socket.io?EIO=4&transport=polling&t=zfjxqg92 404 in 122ms
 GET /api/socket-health 200 in 40ms
 GET /api/socket-health 200 in 148ms
 GET /socket.io?EIO=4&transport=polling&t=zfldlxps 404 in 246ms
 GET /socket.io?EIO=4&transport=polling&t=zflhsv8y 404 in 127ms
 GET /api/socket-health 200 in 40ms
 GET /api/socket-health 200 in 138ms
 GET /socket.io?EIO=4&transport=polling&t=zfmx1f86 404 in 241ms
 GET /socket.io?EIO=4&transport=polling&t=zfn11tkc 404 in 124ms
 GET /api/socket-health 200 in 77ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
 GET /api/auth/session 200 in 119ms
 GET /api/socket-health 200 in 232ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
=== FRIEND REQUEST GET START ===
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
Request type: received User: sayantan2@gmail.com
âœ… Database connected
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
 GET /socket.io?EIO=4&transport=polling&t=zfohuru4 404 in 376ms
 GET /socket.io?EIO=4&transport=polling&t=zfoogcvm 404 in 145ms
 GET /api/random-chat/queue 200 in 381ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
 GET /api/users/me 200 in 491ms
 POST /api/users/heartbeat 200 in 589ms
 GET /api/random-chat/session 200 in 251ms
 GET /api/friends 200 in 695ms
âœ… Current user found: {
  id: new ObjectId('6901f85f42c5d010fa811206'),
  email: 'sayantan2@gmail.com',
  friendRequestsCount: 0,
  sentRequestsCount: 1
}
Processing received requests...
Raw friendRequests: []
Processed receivedRequests: []
Populating sender details...
Final populated requests: []
=== FRIEND REQUEST GET END (received) ===
 GET /api/friends/request?type=received 200 in 701ms
=== FRIEND REQUEST GET START ===
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
Request type: sent User: sayantan2@gmail.com
âœ… Database connected
âœ… Current user found: {
  id: new ObjectId('6901f85f42c5d010fa811206'),
  email: 'sayantan2@gmail.com',
  friendRequestsCount: 0,
  sentRequestsCount: 1
}
Processing sent requests...
Raw sentRequests: [
  {
    from: new ObjectId('6901f85f42c5d010fa811206'),
    fromName: 'sayantan2',
    to: new ObjectId('6905adf16a22b7843b006183'),
    toName: 'sayantan3',
    status: 'pending',
    _id: new ObjectId('6905cdce14ad0d0f020b3985'),
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
Filtering sent request: { status: 'pending', to: new ObjectId('6905adf16a22b7843b006183') }
Mapping sent request: {
  from: new ObjectId('6901f85f42c5d010fa811206'),
  fromName: 'sayantan2',
  to: new ObjectId('6905adf16a22b7843b006183'),
  toName: 'sayantan3',
  status: 'pending',
  _id: new ObjectId('6905cdce14ad0d0f020b3985'),
  createdAt: 2025-11-01T09:07:26.707Z,
  updatedAt: 2025-11-01T09:07:26.707Z
}
Processed sentRequests: [
  {
    id: '6905cdce14ad0d0f020b3985',
    to: {
      id: '6905adf16a22b7843b006183',
      username: 'sayantan3',
      email: '',
      profilePicture: null
    },
    status: 'pending',
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
Populating recipient details...
Looking up recipient: 6905adf16a22b7843b006183
Found recipient: sayantan3
Final populated sent requests: [
  {
    id: '6905cdce14ad0d0f020b3985',
    to: {
      id: '6905adf16a22b7843b006183',
      username: 'sayantan3',
      email: 'sayantan3@gmail.com',
      profilePicture: undefined
    },
    status: 'pending',
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
=== FRIEND REQUEST GET END (sent) ===
 GET /api/friends/request?type=sent 200 in 162ms
 GET /api/socket-health 200 in 45ms
 GET /api/socket-health 200 in 144ms
 GET /socket.io?EIO=4&transport=polling&t=zfq0calx 404 in 252ms
 GET /socket.io?EIO=4&transport=polling&t=zfq4g018 404 in 139ms
 GET /api/socket-health 200 in 39ms
 GET /api/socket-health 200 in 149ms
 GET /socket.io?EIO=4&transport=polling&t=zfrjfsx0 404 in 155ms
 GET /socket.io?EIO=4&transport=polling&t=zfrnp2gp 404 in 121ms
 GET /api/socket-health 200 in 37ms
 GET /api/socket-health 200 in 153ms
 GET /socket.io?EIO=4&transport=polling&t=zft377ec 404 in 156ms
 GET /socket.io?EIO=4&transport=polling&t=zft7huv4 404 in 131ms
 GET /api/socket-health 200 in 40ms
 GET /api/socket-health 200 in 163ms
 GET /socket.io?EIO=4&transport=polling&t=zfumta0s 404 in 261ms
 GET /socket.io?EIO=4&transport=polling&t=zfurfsgh 404 in 125ms
 GET /api/socket-health 200 in 37ms
 GET /api/socket-health 200 in 136ms
 GET /socket.io?EIO=4&transport=polling&t=zfw65724 404 in 244ms
 GET /socket.io?EIO=4&transport=polling&t=zfwa0a70 404 in 121ms
 GET /api/socket-health 200 in 41ms
 GET /api/socket-health 200 in 208ms
 GET /socket.io?EIO=4&transport=polling&t=zfxpvlme 404 in 329ms
 GET /socket.io?EIO=4&transport=polling&t=zfxvtetj 404 in 157ms
 GET /api/socket-health 200 in 62ms
 GET /api/socket-health 200 in 205ms
 GET /socket.io?EIO=4&transport=polling&t=zfza4v2e 404 in 213ms
 GET /socket.io?EIO=4&transport=polling&t=zfzfxtm2 404 in 247ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
=== FRIEND REQUEST GET START ===
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
Request type: received User: sayantan2@gmail.com
âœ… Database connected
âœ… Current user found: {
  id: new ObjectId('6901f85f42c5d010fa811206'),
  email: 'sayantan2@gmail.com',
  friendRequestsCount: 0,
  sentRequestsCount: 1
}
Processing received requests...
Raw friendRequests: []
Processed receivedRequests: []
Populating sender details...
Final populated requests: []
=== FRIEND REQUEST GET END (received) ===
 GET /api/friends/request?type=received 200 in 229ms
 GET /api/friends 200 in 250ms
=== FRIEND REQUEST GET START ===
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
Request type: sent User: sayantan2@gmail.com
âœ… Database connected
âœ… Current user found: {
  id: new ObjectId('6901f85f42c5d010fa811206'),
  email: 'sayantan2@gmail.com',
  friendRequestsCount: 0,
  sentRequestsCount: 1
}
Processing sent requests...
Raw sentRequests: [
  {
    from: new ObjectId('6901f85f42c5d010fa811206'),
    fromName: 'sayantan2',
    to: new ObjectId('6905adf16a22b7843b006183'),
    toName: 'sayantan3',
    status: 'pending',
    _id: new ObjectId('6905cdce14ad0d0f020b3985'),
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
Filtering sent request: { status: 'pending', to: new ObjectId('6905adf16a22b7843b006183') }
Mapping sent request: {
  from: new ObjectId('6901f85f42c5d010fa811206'),
  fromName: 'sayantan2',
  to: new ObjectId('6905adf16a22b7843b006183'),
  toName: 'sayantan3',
  status: 'pending',
  _id: new ObjectId('6905cdce14ad0d0f020b3985'),
  createdAt: 2025-11-01T09:07:26.707Z,
  updatedAt: 2025-11-01T09:07:26.707Z
}
Processed sentRequests: [
  {
    id: '6905cdce14ad0d0f020b3985',
    to: {
      id: '6905adf16a22b7843b006183',
      username: 'sayantan3',
      email: '',
      profilePicture: null
    },
    status: 'pending',
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
Populating recipient details...
Looking up recipient: 6905adf16a22b7843b006183
Found recipient: sayantan3
Final populated sent requests: [
  {
    id: '6905cdce14ad0d0f020b3985',
    to: {
      id: '6905adf16a22b7843b006183',
      username: 'sayantan3',
      email: 'sayantan3@gmail.com',
      profilePicture: undefined
    },
    status: 'pending',
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
=== FRIEND REQUEST GET END (sent) ===
 GET /api/friends/request?type=sent 200 in 180ms
 GET /api/socket-health 200 in 58ms
 GET /api/socket-health 200 in 216ms
 GET /socket.io?EIO=4&transport=polling&t=zg0v3nyo 404 in 346ms
 GET /socket.io?EIO=4&transport=polling&t=zg117roo 404 in 169ms
 GET /api/socket-health 200 in 88ms
 GET /api/socket-health 200 in 84ms
 GET /socket.io?EIO=4&transport=polling&t=zg2hz5ho 404 in 306ms
 GET /socket.io?EIO=4&transport=polling&t=zg2i132l 404 in 303ms
 GET /api/socket-health 200 in 48ms
 GET /api/socket-health 200 in 148ms
 GET /socket.io?EIO=4&transport=polling&t=zg3wd3tw 404 in 276ms
 GET /socket.io?EIO=4&transport=polling&t=zg40jvyi 404 in 146ms
 GET /api/socket-health 200 in 29ms
 GET /api/socket-health 200 in 138ms
 GET /socket.io?EIO=4&transport=polling&t=zg5fdkf2 404 in 133ms
 GET /socket.io?EIO=4&transport=polling&t=zg5j90o6 404 in 103ms
 GET /api/socket-health 200 in 38ms
 GET /api/socket-health 200 in 159ms
 GET /socket.io?EIO=4&transport=polling&t=zg6z61rq 404 in 278ms
 GET /socket.io?EIO=4&transport=polling&t=zg73omtm 404 in 123ms
 GET /api/socket-health 200 in 64ms
 GET /api/socket-health 200 in 244ms
 GET /socket.io?EIO=4&transport=polling&t=zg8jjsmk 404 in 407ms
 GET /socket.io?EIO=4&transport=polling&t=zg8qg31j 404 in 177ms
 GET /api/socket-health 200 in 68ms
 GET /api/socket-health 200 in 102ms
 GET /socket.io?EIO=4&transport=polling&t=zgabs4oj 404 in 628ms
 GET /socket.io?EIO=4&transport=polling&t=zgadr45i 404 in 301ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
 GET /api/socket-health 200 in 122ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
 GET /api/socket-health 200 in 197ms
 GET /api/conversations 200 in 326ms
 POST /api/users/heartbeat 200 in 354ms
 GET /socket.io?EIO=4&transport=polling&t=zgcg8t1m 404 in 316ms
 GET /socket.io?EIO=4&transport=polling&t=zgclv9k6 404 in 140ms
 GET /api/socket-health 200 in 39ms
 GET /api/socket-health 200 in 191ms
 GET /socket.io?EIO=4&transport=polling&t=zgdxco22 404 in 303ms
 GET /socket.io?EIO=4&transport=polling&t=zge2q3st 404 in 120ms
 GET /api/socket-health 200 in 46ms
 GET /api/socket-health 200 in 145ms
 GET /socket.io?EIO=4&transport=polling&t=zgfguhpj 404 in 155ms
 GET /socket.io?EIO=4&transport=polling&t=zgfkxo1k 404 in 137ms
 GET /api/socket-health 200 in 36ms
 GET /api/socket-health 200 in 148ms
 GET /socket.io?EIO=4&transport=polling&t=zgh04jrz 404 in 259ms
 GET /socket.io?EIO=4&transport=polling&t=zgh4an4j 404 in 119ms
 GET /api/socket-health 200 in 51ms
 GET /api/socket-health 200 in 171ms
 GET /socket.io?EIO=4&transport=polling&t=zgik0atp 404 in 365ms
 GET /socket.io?EIO=4&transport=polling&t=zgiot1n3 404 in 203ms
 GET /api/socket-health 200 in 48ms
 GET /api/socket-health 200 in 488ms
 GET /socket.io?EIO=4&transport=polling&t=zgk3r3b6 404 in 562ms
 GET /socket.io?EIO=4&transport=polling&t=zgkhgdib 404 in 590ms
 GET /api/socket-health 200 in 132ms
 GET /socket.io?EIO=4&transport=polling&t=zglroq9w 404 in 271ms
 GET /api/socket-health 200 in 72ms
 GET /socket.io?EIO=4&transport=polling&t=zgmg15am 404 in 219ms
 GET /api/socket-health 200 in 51ms
 GET /socket.io?EIO=4&transport=polling&t=zgn6z3jf 404 in 135ms
 GET /api/socket-health 200 in 129ms
=== FRIEND REQUEST GET START ===
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
Request type: received User: sayantan2@gmail.com
âœ… Database connected
âœ… Current user found: {
  id: new ObjectId('6901f85f42c5d010fa811206'),
  email: 'sayantan2@gmail.com',
  friendRequestsCount: 0,
  sentRequestsCount: 1
}
Processing received requests...
Raw friendRequests: []
Processed receivedRequests: []
Populating sender details...
Final populated requests: []
=== FRIEND REQUEST GET END (received) ===
 GET /api/friends/request?type=received 200 in 316ms
=== FRIEND REQUEST GET START ===
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
Request type: sent User: sayantan2@gmail.com
âœ… Database connected
 GET /socket.io?EIO=4&transport=polling&t=zgo0nf2w 404 in 236ms
âœ… Current user found: {
  id: new ObjectId('6901f85f42c5d010fa811206'),
  email: 'sayantan2@gmail.com',
  friendRequestsCount: 0,
  sentRequestsCount: 1
}
Processing sent requests...
Raw sentRequests: [
  {
    from: new ObjectId('6901f85f42c5d010fa811206'),
    fromName: 'sayantan2',
    to: new ObjectId('6905adf16a22b7843b006183'),
    toName: 'sayantan3',
    status: 'pending',
    _id: new ObjectId('6905cdce14ad0d0f020b3985'),
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
Filtering sent request: { status: 'pending', to: new ObjectId('6905adf16a22b7843b006183') }
Mapping sent request: {
  from: new ObjectId('6901f85f42c5d010fa811206'),
  fromName: 'sayantan2',
  to: new ObjectId('6905adf16a22b7843b006183'),
  toName: 'sayantan3',
  status: 'pending',
  _id: new ObjectId('6905cdce14ad0d0f020b3985'),
  createdAt: 2025-11-01T09:07:26.707Z,
  updatedAt: 2025-11-01T09:07:26.707Z
}
Processed sentRequests: [
  {
    id: '6905cdce14ad0d0f020b3985',
    to: {
      id: '6905adf16a22b7843b006183',
      username: 'sayantan3',
      email: '',
      profilePicture: null
    },
    status: 'pending',
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
Populating recipient details...
Looking up recipient: 6905adf16a22b7843b006183
Found recipient: sayantan3
Final populated sent requests: [
  {
    id: '6905cdce14ad0d0f020b3985',
    to: {
      id: '6905adf16a22b7843b006183',
      username: 'sayantan3',
      email: 'sayantan3@gmail.com',
      profilePicture: undefined
    },
    status: 'pending',
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
=== FRIEND REQUEST GET END (sent) ===
 GET /api/friends/request?type=sent 200 in 141ms
 GET /api/socket-health 200 in 48ms
 GET /socket.io?EIO=4&transport=polling&t=zgoq6zcd 404 in 224ms
 GET /api/socket-health 200 in 48ms
 GET /socket.io?EIO=4&transport=polling&t=zgphynqm 404 in 160ms
 GET /api/socket-health 200 in 28ms
 GET /socket.io?EIO=4&transport=polling&t=zgq96yv6 404 in 110ms
 GET /api/socket-health 200 in 28ms
 GET /socket.io?EIO=4&transport=polling&t=zgr0zbz9 404 in 92ms
 GET /api/socket-health 200 in 36ms
 GET /socket.io?EIO=4&transport=polling&t=zgrtvd91 404 in 125ms
 GET /api/socket-health 200 in 36ms
 GET /socket.io?EIO=4&transport=polling&t=zgskyypm 404 in 101ms
 GET /api/socket-health 200 in 39ms
 GET /socket.io?EIO=4&transport=polling&t=zgtcqi9i 404 in 114ms
 GET /api/socket-health 200 in 26ms
 GET /socket.io?EIO=4&transport=polling&t=zgu45h4e 404 in 96ms
 GET /api/socket-health 200 in 34ms
 GET /socket.io?EIO=4&transport=polling&t=zguw4y4c 404 in 155ms
 GET /api/socket-health 200 in 60ms
 GET /socket.io?EIO=4&transport=polling&t=zgvoxneh 404 in 150ms
 GET /api/socket-health 200 in 41ms
 GET /socket.io?EIO=4&transport=polling&t=zgwfxnad 404 in 165ms
 GET /api/socket-health 200 in 41ms
 GET /socket.io?EIO=4&transport=polling&t=zgx7tvov 404 in 113ms
 GET /api/socket-health 200 in 30ms
 GET /socket.io?EIO=4&transport=polling&t=zgxzb1x1 404 in 98ms
 GET /api/socket-health 200 in 37ms
 GET /socket.io?EIO=4&transport=polling&t=zgyqvz8t 404 in 109ms
 GET /api/socket-health 200 in 56ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
 GET /socket.io?EIO=4&transport=polling&t=zgzji0uu 404 in 115ms
 POST /api/users/heartbeat 200 in 256ms
 GET /api/socket-health 200 in 55ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
 GET /socket.io?EIO=4&transport=polling&t=zh0b9l0s 404 in 131ms
 GET /api/conversations 200 in 239ms
 GET /api/socket-health 200 in 47ms
 GET /socket.io?EIO=4&transport=polling&t=zh12uwjj 404 in 122ms
 GET /api/socket-health 200 in 32ms
 GET /socket.io?EIO=4&transport=polling&t=zh1u866b 404 in 100ms
 GET /api/socket-health 200 in 27ms
 GET /socket.io?EIO=4&transport=polling&t=zh2lp6b8 404 in 103ms
 GET /api/socket-health 200 in 29ms
 GET /socket.io?EIO=4&transport=polling&t=zh3diszj 404 in 101ms
 GET /api/socket-health 200 in 42ms
 GET /socket.io?EIO=4&transport=polling&t=zh460vd1 404 in 124ms
 GET /api/socket-health 200 in 35ms
 GET /socket.io?EIO=4&transport=polling&t=zh4x0c6v 404 in 93ms
 GET /api/socket-health 200 in 37ms
 GET /socket.io?EIO=4&transport=polling&t=zh5pacw4 404 in 133ms
 GET /api/socket-health 200 in 29ms
 GET /socket.io?EIO=4&transport=polling&t=zh6gtctv 404 in 115ms
 GET /api/socket-health 200 in 39ms
 GET /socket.io?EIO=4&transport=polling&t=zh78mj87 404 in 125ms
 GET /api/socket-health 200 in 49ms
 GET /socket.io?EIO=4&transport=polling&t=zh80q2zd 404 in 125ms
 GET /api/socket-health 200 in 38ms
 GET /socket.io?EIO=4&transport=polling&t=zh8s8ufx 404 in 135ms
 GET /api/socket-health 200 in 41ms
 GET /socket.io?EIO=4&transport=polling&t=zh9k8tqx 404 in 125ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
=== FRIEND REQUEST GET START ===
 GET /api/socket-health 200 in 145ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
Request type: received User: sayantan2@gmail.com
âœ… Database connected
 GET /api/friends 200 in 427ms
 GET /socket.io?EIO=4&transport=polling&t=zhaf44nw 404 in 333ms
âœ… Current user found: {
  id: new ObjectId('6901f85f42c5d010fa811206'),
  email: 'sayantan2@gmail.com',
  friendRequestsCount: 0,
  sentRequestsCount: 1
}
Processing received requests...
Raw friendRequests: []
Processed receivedRequests: []
Populating sender details...
Final populated requests: []
=== FRIEND REQUEST GET END (received) ===
 GET /api/friends/request?type=received 200 in 776ms
=== FRIEND REQUEST GET START ===
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
Request type: sent User: sayantan2@gmail.com
âœ… Database connected
 GET /api/socket-health 200 in 77ms
âœ… Current user found: {
  id: new ObjectId('6901f85f42c5d010fa811206'),
  email: 'sayantan2@gmail.com',
  friendRequestsCount: 0,
  sentRequestsCount: 1
}
Processing sent requests...
Raw sentRequests: [
  {
    from: new ObjectId('6901f85f42c5d010fa811206'),
    fromName: 'sayantan2',
    to: new ObjectId('6905adf16a22b7843b006183'),
    toName: 'sayantan3',
    status: 'pending',
    _id: new ObjectId('6905cdce14ad0d0f020b3985'),
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
Filtering sent request: { status: 'pending', to: new ObjectId('6905adf16a22b7843b006183') }
Mapping sent request: {
  from: new ObjectId('6901f85f42c5d010fa811206'),
  fromName: 'sayantan2',
  to: new ObjectId('6905adf16a22b7843b006183'),
  toName: 'sayantan3',
  status: 'pending',
  _id: new ObjectId('6905cdce14ad0d0f020b3985'),
  createdAt: 2025-11-01T09:07:26.707Z,
  updatedAt: 2025-11-01T09:07:26.707Z
}
Processed sentRequests: [
  {
    id: '6905cdce14ad0d0f020b3985',
    to: {
      id: '6905adf16a22b7843b006183',
      username: 'sayantan3',
      email: '',
      profilePicture: null
    },
    status: 'pending',
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
Populating recipient details...
Looking up recipient: 6905adf16a22b7843b006183
 GET /socket.io?EIO=4&transport=polling&t=zhbl0f7s 404 in 131ms
Found recipient: sayantan3
Final populated sent requests: [
  {
    id: '6905cdce14ad0d0f020b3985',
    to: {
      id: '6905adf16a22b7843b006183',
      username: 'sayantan3',
      email: 'sayantan3@gmail.com',
      profilePicture: undefined
    },
    status: 'pending',
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
=== FRIEND REQUEST GET END (sent) ===
 GET /api/friends/request?type=sent 200 in 244ms
 GET /api/socket-health 200 in 54ms
 GET /socket.io?EIO=4&transport=polling&t=zhbvosz3 404 in 195ms
 GET /api/socket-health 200 in 50ms
 GET /socket.io?EIO=4&transport=polling&t=zhcnlxz2 404 in 438ms
 GET /api/socket-health 200 in 44ms
 GET /socket.io?EIO=4&transport=polling&t=zhdf9zki 404 in 165ms
 GET /api/socket-health 200 in 70ms
 GET /socket.io?EIO=4&transport=polling&t=zhe7my1t 404 in 212ms
 GET /api/socket-health 200 in 47ms
 GET /socket.io?EIO=4&transport=polling&t=zhf06piy 404 in 167ms
 GET /api/socket-health 200 in 36ms
 GET /socket.io?EIO=4&transport=polling&t=zhfq4s4c 404 in 120ms
 GET /api/socket-health 200 in 42ms
 GET /socket.io?EIO=4&transport=polling&t=zhghwnl4 404 in 117ms
 GET /api/socket-health 200 in 40ms
 GET /socket.io?EIO=4&transport=polling&t=zhh9yjg6 404 in 117ms
 GET /api/socket-health 200 in 79ms
 GET /socket.io?EIO=4&transport=polling&t=zhi9f9ex 404 in 204ms
 GET /api/socket-health 200 in 90ms
 GET /socket.io?EIO=4&transport=polling&t=zhiv13a7 404 in 213ms
 GET /api/socket-health 200 in 33ms
 GET /socket.io?EIO=4&transport=polling&t=zhjkrhuq 404 in 101ms
 GET /api/socket-health 200 in 27ms
 GET /socket.io?EIO=4&transport=polling&t=zhkci0lv 404 in 150ms
 GET /api/socket-health 200 in 28ms
 GET /socket.io?EIO=4&transport=polling&t=zhl4biqf 404 in 104ms
 GET /api/socket-health 200 in 27ms
 GET /socket.io?EIO=4&transport=polling&t=zhlw0zvj 404 in 98ms
 GET /api/socket-health 200 in 64ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
 GET /socket.io?EIO=4&transport=polling&t=zhmov83l 404 in 103ms
 POST /api/users/heartbeat 200 in 247ms
 GET /api/socket-health 200 in 26ms
 GET /socket.io?EIO=4&transport=polling&t=zhnfuaxv 404 in 95ms
 GET /api/socket-health 200 in 42ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
 GET /socket.io?EIO=4&transport=polling&t=zho86r3c 404 in 99ms
 GET /api/conversations 200 in 171ms
 GET /api/socket-health 200 in 25ms
 GET /socket.io?EIO=4&transport=polling&t=zhoz7yt6 404 in 95ms
 GET /api/socket-health 200 in 28ms
 GET /socket.io?EIO=4&transport=polling&t=zhpqwxqr 404 in 97ms
 GET /api/socket-health 200 in 31ms
 GET /socket.io?EIO=4&transport=polling&t=zhqioi3l 404 in 100ms
 GET /api/socket-health 200 in 31ms
 GET /socket.io?EIO=4&transport=polling&t=zhrawvb4 404 in 96ms
 GET /api/socket-health 200 in 26ms
 GET /socket.io?EIO=4&transport=polling&t=zhs2h9bm 404 in 90ms
 GET /api/socket-health 200 in 29ms
 GET /socket.io?EIO=4&transport=polling&t=zhsuakhw 404 in 101ms
 GET /api/socket-health 200 in 26ms
 GET /socket.io?EIO=4&transport=polling&t=zhtlwf2m 404 in 101ms
 GET /api/socket-health 200 in 29ms
 GET /socket.io?EIO=4&transport=polling&t=zhudqrsl 404 in 99ms
 GET /api/socket-health 200 in 34ms
 GET /socket.io?EIO=4&transport=polling&t=zhv5k894 404 in 99ms
 GET /api/socket-health 200 in 27ms
 GET /socket.io?EIO=4&transport=polling&t=zhvx62sm 404 in 96ms
 GET /api/socket-health 200 in 27ms
 GET /socket.io?EIO=4&transport=polling&t=zhwp7ln8 404 in 94ms
 GET /api/socket-health 200 in 35ms
 GET /socket.io?EIO=4&transport=polling&t=zhxh2heg 404 in 95ms
 GET /api/socket-health 200 in 33ms
 GET /socket.io?EIO=4&transport=polling&t=zhy8uzor 404 in 97ms
 GET /api/socket-health 200 in 45ms
=== FRIEND REQUEST GET START ===
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
Request type: received User: sayantan2@gmail.com
âœ… Database connected
âœ… Current user found: {
  id: new ObjectId('6901f85f42c5d010fa811206'),
  email: 'sayantan2@gmail.com',
  friendRequestsCount: 0,
  sentRequestsCount: 1
}
Processing received requests...
Raw friendRequests: []
Processed receivedRequests: []
Populating sender details...
Final populated requests: []
=== FRIEND REQUEST GET END (received) ===
 GET /api/friends/request?type=received 200 in 145ms
=== FRIEND REQUEST GET START ===
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
Request type: sent User: sayantan2@gmail.com
âœ… Database connected
 GET /socket.io?EIO=4&transport=polling&t=zhz0xi35 404 in 143ms
âœ… Current user found: {
  id: new ObjectId('6901f85f42c5d010fa811206'),
  email: 'sayantan2@gmail.com',
  friendRequestsCount: 0,
  sentRequestsCount: 1
}
Processing sent requests...
Raw sentRequests: [
  {
    from: new ObjectId('6901f85f42c5d010fa811206'),
    fromName: 'sayantan2',
    to: new ObjectId('6905adf16a22b7843b006183'),
    toName: 'sayantan3',
    status: 'pending',
    _id: new ObjectId('6905cdce14ad0d0f020b3985'),
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
Filtering sent request: { status: 'pending', to: new ObjectId('6905adf16a22b7843b006183') }
Mapping sent request: {
  from: new ObjectId('6901f85f42c5d010fa811206'),
  fromName: 'sayantan2',
  to: new ObjectId('6905adf16a22b7843b006183'),
  toName: 'sayantan3',
  status: 'pending',
  _id: new ObjectId('6905cdce14ad0d0f020b3985'),
  createdAt: 2025-11-01T09:07:26.707Z,
  updatedAt: 2025-11-01T09:07:26.707Z
}
Processed sentRequests: [
  {
    id: '6905cdce14ad0d0f020b3985',
    to: {
      id: '6905adf16a22b7843b006183',
      username: 'sayantan3',
      email: '',
      profilePicture: null
    },
    status: 'pending',
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
Populating recipient details...
Looking up recipient: 6905adf16a22b7843b006183
Found recipient: sayantan3
Final populated sent requests: [
  {
    id: '6905cdce14ad0d0f020b3985',
    to: {
      id: '6905adf16a22b7843b006183',
      username: 'sayantan3',
      email: 'sayantan3@gmail.com',
      profilePicture: undefined
    },
    status: 'pending',
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
=== FRIEND REQUEST GET END (sent) ===
 GET /api/friends/request?type=sent 200 in 135ms
 GET /api/socket-health 200 in 27ms
 GET /socket.io?EIO=4&transport=polling&t=zhzs6b96 404 in 102ms
 GET /api/socket-health 200 in 28ms
 GET /socket.io?EIO=4&transport=polling&t=zi0jyu92 404 in 98ms
 GET /api/socket-health 200 in 188ms
 GET /socket.io?EIO=4&transport=polling&t=zi1g8gvj 404 in 314ms
 GET /api/socket-health 200 in 57ms
 GET /socket.io?EIO=4&transport=polling&t=zi26apgn 404 in 110ms
 GET /api/socket-health 200 in 33ms
 GET /socket.io?EIO=4&transport=polling&t=zi2vjixx 404 in 112ms
 GET /api/socket-health 200 in 27ms
 GET /socket.io?EIO=4&transport=polling&t=zi3n23xz 404 in 108ms
 GET /api/socket-health 200 in 30ms
 GET /socket.io?EIO=4&transport=polling&t=zi4epkes 404 in 96ms
 GET /api/socket-health 200 in 28ms
 GET /socket.io?EIO=4&transport=polling&t=zi56hyc7 404 in 94ms
 GET /api/socket-health 200 in 27ms
 GET /socket.io?EIO=4&transport=polling&t=zi5yii2k 404 in 100ms
 GET /api/socket-health 200 in 27ms
 GET /socket.io?EIO=4&transport=polling&t=zi6qbblz 404 in 96ms
 GET /api/socket-health 200 in 34ms
 GET /socket.io?EIO=4&transport=polling&t=zi7i7j0t 404 in 90ms
 GET /api/socket-health 200 in 27ms
 GET /socket.io?EIO=4&transport=polling&t=zi89sqg9 404 in 98ms
 GET /api/socket-health 200 in 29ms
 GET /socket.io?EIO=4&transport=polling&t=zi91mngh 404 in 100ms
 GET /api/socket-health 200 in 48ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
 GET /socket.io?EIO=4&transport=polling&t=zi9tvxj2 404 in 100ms
 POST /api/users/heartbeat 200 in 225ms
 GET /api/socket-health 200 in 26ms
 GET /socket.io?EIO=4&transport=polling&t=ziakzqal 404 in 95ms
 GET /api/socket-health 200 in 25ms
 GET /socket.io?EIO=4&transport=polling&t=zibct6li 404 in 96ms
 GET /api/socket-health 200 in 46ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
 GET /socket.io?EIO=4&transport=polling&t=zic58ff5 404 in 100ms
 GET /api/conversations 200 in 177ms
 GET /api/socket-health 200 in 25ms
 GET /socket.io?EIO=4&transport=polling&t=zicwflz9 404 in 100ms
 GET /api/socket-health 200 in 28ms
 GET /socket.io?EIO=4&transport=polling&t=zidoa94s 404 in 103ms
 GET /api/socket-health 200 in 30ms
 GET /socket.io?EIO=4&transport=polling&t=ziefu48p 404 in 100ms
 GET /api/socket-health 200 in 36ms
 GET /socket.io?EIO=4&transport=polling&t=zif7w28x 404 in 100ms
 GET /api/socket-health 200 in 29ms
 GET /socket.io?EIO=4&transport=polling&t=zifzda09 404 in 121ms
 GET /api/socket-health 200 in 31ms
 GET /socket.io?EIO=4&transport=polling&t=zigr6f87 404 in 91ms
 GET /api/socket-health 200 in 25ms
 GET /socket.io?EIO=4&transport=polling&t=zihivvk2 404 in 106ms
 GET /api/socket-health 200 in 28ms
 GET /socket.io?EIO=4&transport=polling&t=ziiaot8y 404 in 93ms
 GET /api/socket-health 200 in 26ms
 GET /socket.io?EIO=4&transport=polling&t=zij2r559 404 in 96ms
 GET /api/socket-health 200 in 36ms
 GET /socket.io?EIO=4&transport=polling&t=zijupfc4 404 in 95ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
=== FRIEND REQUEST GET START ===
 GET /api/socket-health 200 in 106ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
Request type: received User: sayantan2@gmail.com
âœ… Database connected
 GET /api/friends 200 in 210ms
 GET /socket.io?EIO=4&transport=polling&t=zikoth5j 404 in 112ms
âœ… Current user found: {
  id: new ObjectId('6901f85f42c5d010fa811206'),
  email: 'sayantan2@gmail.com',
  friendRequestsCount: 0,
  sentRequestsCount: 1
}
Processing received requests...
Raw friendRequests: []
Processed receivedRequests: []
Populating sender details...
Final populated requests: []
=== FRIEND REQUEST GET END (received) ===
 GET /api/friends/request?type=received 200 in 521ms
=== FRIEND REQUEST GET START ===
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
Request type: sent User: sayantan2@gmail.com
âœ… Database connected
âœ… Current user found: {
  id: new ObjectId('6901f85f42c5d010fa811206'),
  email: 'sayantan2@gmail.com',
  friendRequestsCount: 0,
  sentRequestsCount: 1
}
Processing sent requests...
Raw sentRequests: [
  {
    from: new ObjectId('6901f85f42c5d010fa811206'),
    fromName: 'sayantan2',
    to: new ObjectId('6905adf16a22b7843b006183'),
    toName: 'sayantan3',
    status: 'pending',
    _id: new ObjectId('6905cdce14ad0d0f020b3985'),
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
Filtering sent request: { status: 'pending', to: new ObjectId('6905adf16a22b7843b006183') }
Mapping sent request: {
  from: new ObjectId('6901f85f42c5d010fa811206'),
  fromName: 'sayantan2',
  to: new ObjectId('6905adf16a22b7843b006183'),
  toName: 'sayantan3',
  status: 'pending',
  _id: new ObjectId('6905cdce14ad0d0f020b3985'),
  createdAt: 2025-11-01T09:07:26.707Z,
  updatedAt: 2025-11-01T09:07:26.707Z
}
Processed sentRequests: [
  {
    id: '6905cdce14ad0d0f020b3985',
    to: {
      id: '6905adf16a22b7843b006183',
      username: 'sayantan3',
      email: '',
      profilePicture: null
    },
    status: 'pending',
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
Populating recipient details...
Looking up recipient: 6905adf16a22b7843b006183
Found recipient: sayantan3
Final populated sent requests: [
  {
    id: '6905cdce14ad0d0f020b3985',
    to: {
      id: '6905adf16a22b7843b006183',
      username: 'sayantan3',
      email: 'sayantan3@gmail.com',
      profilePicture: undefined
    },
    status: 'pending',
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
=== FRIEND REQUEST GET END (sent) ===
 GET /api/friends/request?type=sent 200 in 135ms
 GET /api/socket-health 200 in 30ms
 GET /socket.io?EIO=4&transport=polling&t=zile1h58 404 in 99ms
 GET /api/socket-health 200 in 57ms
 GET /socket.io?EIO=4&transport=polling&t=zim6kvtv 404 in 152ms
 GET /api/socket-health 200 in 62ms
 GET /socket.io?EIO=4&transport=polling&t=zimyz4lr 404 in 190ms
 GET /api/socket-health 200 in 31ms
 GET /socket.io?EIO=4&transport=polling&t=zinpf90y 404 in 123ms
 GET /api/socket-health 200 in 42ms
 GET /socket.io?EIO=4&transport=polling&t=ziohj6xp 404 in 116ms
 GET /api/socket-health 200 in 33ms
 GET /socket.io?EIO=4&transport=polling&t=zip9hjwp 404 in 115ms
 GET /api/socket-health 200 in 38ms
 GET /socket.io?EIO=4&transport=polling&t=ziq0v8oi 404 in 101ms
 GET /api/socket-health 200 in 29ms
 GET /socket.io?EIO=4&transport=polling&t=ziqs8cbr 404 in 100ms
 GET /api/socket-health 200 in 55ms
 GET /socket.io?EIO=4&transport=polling&t=zirl0yyk 404 in 194ms
 GET /api/socket-health 200 in 58ms
 GET /socket.io?EIO=4&transport=polling&t=zisd8mci 404 in 201ms
 GET /api/socket-health 200 in 76ms
 GET /socket.io?EIO=4&transport=polling&t=zit584l3 404 in 386ms
 GET /api/socket-health 200 in 229ms
 GET /socket.io?EIO=4&transport=polling&t=ziu1jj9l 404 in 212ms
 GET /api/socket-health 200 in 54ms
 GET /socket.io?EIO=4&transport=polling&t=ziuobqmo 404 in 158ms
 GET /api/socket-health 200 in 31ms
 GET /socket.io?EIO=4&transport=polling&t=zivf9j5z 404 in 109ms
 GET /api/socket-health 200 in 82ms
 GET /socket.io?EIO=4&transport=polling&t=ziw89z4s 404 in 273ms
 GET /api/socket-health 200 in 44ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
 GET /socket.io?EIO=4&transport=polling&t=ziwz4qv0 404 in 107ms
 POST /api/users/heartbeat 200 in 235ms
 GET /api/socket-health 200 in 45ms
 GET /socket.io?EIO=4&transport=polling&t=zixqsyxu 404 in 108ms
 GET /api/socket-health 200 in 38ms
 GET /socket.io?EIO=4&transport=polling&t=ziyii00e 404 in 105ms
 GET /api/socket-health 200 in 37ms
 GET /socket.io?EIO=4&transport=polling&t=ziza31vt 404 in 121ms
 GET /api/socket-health 200 in 63ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
 GET /socket.io?EIO=4&transport=polling&t=zj02m088 404 in 113ms
 GET /api/conversations 200 in 205ms
 GET /api/socket-health 200 in 27ms
 GET /socket.io?EIO=4&transport=polling&t=zj0tpirt 404 in 101ms
 GET /api/socket-health 200 in 34ms
 GET /socket.io?EIO=4&transport=polling&t=zj1lj5nn 404 in 102ms
 GET /api/socket-health 200 in 27ms
 GET /socket.io?EIO=4&transport=polling&t=zj2d38do 404 in 97ms
 GET /api/socket-health 200 in 36ms
 GET /socket.io?EIO=4&transport=polling&t=zj352zvk 404 in 108ms
 GET /api/socket-health 200 in 28ms
 GET /socket.io?EIO=4&transport=polling&t=zj3wpigp 404 in 112ms
 GET /api/socket-health 200 in 47ms
 GET /socket.io?EIO=4&transport=polling&t=zj4p1cdd 404 in 144ms
 GET /api/socket-health 200 in 46ms
 GET /socket.io?EIO=4&transport=polling&t=zj5gxk8z 404 in 140ms
 GET /api/socket-health 200 in 42ms
 GET /socket.io?EIO=4&transport=polling&t=zj68gubk 404 in 117ms
 GET /api/socket-health 200 in 34ms
 GET /socket.io?EIO=4&transport=polling&t=zj6zyw2p 404 in 110ms
 GET /api/socket-health 200 in 27ms
 GET /socket.io?EIO=4&transport=polling&t=zj7rh71f 404 in 114ms
 GET /api/socket-health 200 in 72ms
=== FRIEND REQUEST GET START ===
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
Request type: received User: sayantan2@gmail.com
âœ… Database connected
âœ… Current user found: {
  id: new ObjectId('6901f85f42c5d010fa811206'),
  email: 'sayantan2@gmail.com',
  friendRequestsCount: 0,
  sentRequestsCount: 1
}
Processing received requests...
Raw friendRequests: []
Processed receivedRequests: []
Populating sender details...
Final populated requests: []
=== FRIEND REQUEST GET END (received) ===
 GET /api/friends/request?type=received 200 in 189ms
=== FRIEND REQUEST GET START ===
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
Request type: sent User: sayantan2@gmail.com
âœ… Database connected
 GET /socket.io?EIO=4&transport=polling&t=zj8kk599 404 in 150ms
âœ… Current user found: {
  id: new ObjectId('6901f85f42c5d010fa811206'),
  email: 'sayantan2@gmail.com',
  friendRequestsCount: 0,
  sentRequestsCount: 1
}
Processing sent requests...
Raw sentRequests: [
  {
    from: new ObjectId('6901f85f42c5d010fa811206'),
    fromName: 'sayantan2',
    to: new ObjectId('6905adf16a22b7843b006183'),
    toName: 'sayantan3',
    status: 'pending',
    _id: new ObjectId('6905cdce14ad0d0f020b3985'),
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
Filtering sent request: { status: 'pending', to: new ObjectId('6905adf16a22b7843b006183') }
Mapping sent request: {
  from: new ObjectId('6901f85f42c5d010fa811206'),
  fromName: 'sayantan2',
  to: new ObjectId('6905adf16a22b7843b006183'),
  toName: 'sayantan3',
  status: 'pending',
  _id: new ObjectId('6905cdce14ad0d0f020b3985'),
  createdAt: 2025-11-01T09:07:26.707Z,
  updatedAt: 2025-11-01T09:07:26.707Z
}
Processed sentRequests: [
  {
    id: '6905cdce14ad0d0f020b3985',
    to: {
      id: '6905adf16a22b7843b006183',
      username: 'sayantan3',
      email: '',
      profilePicture: null
    },
    status: 'pending',
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
Populating recipient details...
Looking up recipient: 6905adf16a22b7843b006183
Found recipient: sayantan3
Final populated sent requests: [
  {
    id: '6905cdce14ad0d0f020b3985',
    to: {
      id: '6905adf16a22b7843b006183',
      username: 'sayantan3',
      email: 'sayantan3@gmail.com',
      profilePicture: undefined
    },
    status: 'pending',
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
=== FRIEND REQUEST GET END (sent) ===
 GET /api/friends/request?type=sent 200 in 122ms
 GET /api/socket-health 200 in 26ms
 GET /socket.io?EIO=4&transport=polling&t=zj9azgcr 404 in 97ms
 GET /api/socket-health 200 in 46ms
 GET /socket.io?EIO=4&transport=polling&t=zja3goaa 404 in 135ms
 GET /api/socket-health 200 in 38ms
 GET /socket.io?EIO=4&transport=polling&t=zjauuacc 404 in 116ms
 GET /api/socket-health 200 in 38ms
 GET /socket.io?EIO=4&transport=polling&t=zjbmoq0n 404 in 112ms
 GET /api/socket-health 200 in 41ms
 GET /socket.io?EIO=4&transport=polling&t=zjcgkxn5 404 in 149ms
 GET /api/socket-health 200 in 66ms
 GET /socket.io?EIO=4&transport=polling&t=zjd6yn79 404 in 218ms
 GET /api/socket-health 200 in 55ms
 GET /socket.io?EIO=4&transport=polling&t=zjdyiqr6 404 in 167ms
 GET /api/socket-health 200 in 72ms
 GET /socket.io?EIO=4&transport=polling&t=zjeqz4yy 404 in 397ms
 GET /api/socket-health 200 in 45ms
 GET /socket.io?EIO=4&transport=polling&t=zjfhoo65 404 in 124ms
 GET /api/socket-health 200 in 35ms
 GET /socket.io?EIO=4&transport=polling&t=zjg98idx 404 in 109ms
 GET /api/socket-health 200 in 53ms
 GET /socket.io?EIO=4&transport=polling&t=zjh1diag 404 in 156ms
 GET /api/socket-health 200 in 44ms
 GET /socket.io?EIO=4&transport=polling&t=zjht2orj 404 in 125ms
 GET /api/socket-health 200 in 43ms
 GET /socket.io?EIO=4&transport=polling&t=zjiku2ef 404 in 125ms
 GET /api/socket-health 200 in 33ms
 GET /socket.io?EIO=4&transport=polling&t=zjjcbmn6 404 in 139ms
 GET /api/socket-health 200 in 65ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
 GET /socket.io?EIO=4&transport=polling&t=zjk53sj0 404 in 118ms
 POST /api/users/heartbeat 200 in 261ms
 GET /api/socket-health 200 in 30ms
 GET /socket.io?EIO=4&transport=polling&t=zjkvr7ry 404 in 124ms
 GET /api/socket-health 200 in 44ms
 GET /socket.io?EIO=4&transport=polling&t=zjlny6g8 404 in 117ms
 GET /api/socket-health 200 in 40ms
 GET /socket.io?EIO=4&transport=polling&t=zjmfq9mj 404 in 129ms
 GET /api/socket-health 200 in 36ms
 GET /socket.io?EIO=4&transport=polling&t=zjn7gs0t 404 in 124ms
 GET /api/socket-health 200 in 63ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
 GET /socket.io?EIO=4&transport=polling&t=zjnzv90r 404 in 126ms
 GET /api/conversations 200 in 221ms
 GET /api/socket-health 200 in 39ms
 GET /socket.io?EIO=4&transport=polling&t=zjoqxp26 404 in 122ms
 GET /api/socket-health 200 in 28ms
 GET /socket.io?EIO=4&transport=polling&t=zjpijc92 404 in 100ms
 GET /api/socket-health 200 in 26ms
 GET /socket.io?EIO=4&transport=polling&t=zjqa8ipm 404 in 98ms
 GET /api/socket-health 200 in 36ms
 GET /socket.io?EIO=4&transport=polling&t=zjr24obw 404 in 94ms
 GET /api/socket-health 200 in 32ms
 GET /socket.io?EIO=4&transport=polling&t=zjrtq9f8 404 in 105ms
 GET /api/socket-health 200 in 27ms
 GET /socket.io?EIO=4&transport=polling&t=zjslfbjx 404 in 96ms
 GET /api/socket-health 200 in 27ms
 GET /socket.io?EIO=4&transport=polling&t=zjtdbtw9 404 in 98ms
 GET /api/socket-health 200 in 35ms
 GET /socket.io?EIO=4&transport=polling&t=zju5972p 404 in 100ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
=== FRIEND REQUEST GET START ===
 GET /api/socket-health 200 in 84ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
Request type: received User: sayantan2@gmail.com
âœ… Database connected
 GET /api/friends 200 in 209ms
 GET /socket.io?EIO=4&transport=polling&t=zjuyzbkn 404 in 119ms
âœ… Current user found: {
  id: new ObjectId('6901f85f42c5d010fa811206'),
  email: 'sayantan2@gmail.com',
  friendRequestsCount: 0,
  sentRequestsCount: 1
}
Processing received requests...
Raw friendRequests: []
Processed receivedRequests: []
Populating sender details...
Final populated requests: []
=== FRIEND REQUEST GET END (received) ===
 GET /api/friends/request?type=received 200 in 562ms
=== FRIEND REQUEST GET START ===
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
Request type: sent User: sayantan2@gmail.com
âœ… Database connected
âœ… Current user found: {
  id: new ObjectId('6901f85f42c5d010fa811206'),
  email: 'sayantan2@gmail.com',
  friendRequestsCount: 0,
  sentRequestsCount: 1
}
Processing sent requests...
Raw sentRequests: [
  {
    from: new ObjectId('6901f85f42c5d010fa811206'),
    fromName: 'sayantan2',
    to: new ObjectId('6905adf16a22b7843b006183'),
    toName: 'sayantan3',
    status: 'pending',
    _id: new ObjectId('6905cdce14ad0d0f020b3985'),
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
Filtering sent request: { status: 'pending', to: new ObjectId('6905adf16a22b7843b006183') }
Mapping sent request: {
  from: new ObjectId('6901f85f42c5d010fa811206'),
  fromName: 'sayantan2',
  to: new ObjectId('6905adf16a22b7843b006183'),
  toName: 'sayantan3',
  status: 'pending',
  _id: new ObjectId('6905cdce14ad0d0f020b3985'),
  createdAt: 2025-11-01T09:07:26.707Z,
  updatedAt: 2025-11-01T09:07:26.707Z
}
Processed sentRequests: [
  {
    id: '6905cdce14ad0d0f020b3985',
    to: {
      id: '6905adf16a22b7843b006183',
      username: 'sayantan3',
      email: '',
      profilePicture: null
    },
    status: 'pending',
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
Populating recipient details...
Looking up recipient: 6905adf16a22b7843b006183
Found recipient: sayantan3
Final populated sent requests: [
  {
    id: '6905cdce14ad0d0f020b3985',
    to: {
      id: '6905adf16a22b7843b006183',
      username: 'sayantan3',
      email: 'sayantan3@gmail.com',
      profilePicture: undefined
    },
    status: 'pending',
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
=== FRIEND REQUEST GET END (sent) ===
 GET /api/friends/request?type=sent 200 in 140ms
 GET /api/socket-health 200 in 31ms
 GET /socket.io?EIO=4&transport=polling&t=zjvoo4nn 404 in 107ms
 GET /api/socket-health 200 in 41ms
 GET /socket.io?EIO=4&transport=polling&t=zjwgtlyw 404 in 181ms
 GET /api/socket-health 200 in 47ms
 GET /socket.io?EIO=4&transport=polling&t=zjx8qmah 404 in 127ms
 GET /api/socket-health 200 in 30ms
 GET /socket.io?EIO=4&transport=polling&t=zjy030pk 404 in 104ms
 GET /api/socket-health 200 in 32ms
 GET /socket.io?EIO=4&transport=polling&t=zjyrt82b 404 in 92ms
 GET /api/socket-health 200 in 37ms
 GET /socket.io?EIO=4&transport=polling&t=zjzk1dra 404 in 105ms
 GET /api/socket-health 200 in 29ms
 GET /socket.io?EIO=4&transport=polling&t=zk0b8p6a 404 in 96ms
 GET /api/socket-health 200 in 25ms
 GET /socket.io?EIO=4&transport=polling&t=zk12xdgi 404 in 99ms
 GET /api/socket-health 200 in 25ms
 GET /socket.io?EIO=4&transport=polling&t=zk1un15m 404 in 97ms
 GET /api/socket-health 200 in 34ms
 GET /socket.io?EIO=4&transport=polling&t=zk2ml44m 404 in 97ms
 GET /api/socket-health 200 in 48ms
 GET /socket.io?EIO=4&transport=polling&t=zk3frbvv 404 in 136ms
 GET /api/socket-health 200 in 29ms
 GET /socket.io?EIO=4&transport=polling&t=zk46eqpg 404 in 100ms
 GET /api/socket-health 200 in 29ms
 GET /socket.io?EIO=4&transport=polling&t=zk4y57br 404 in 101ms
 GET /api/socket-health 200 in 33ms
 GET /socket.io?EIO=4&transport=polling&t=zk5pyr3n 404 in 101ms
 GET /api/socket-health 200 in 26ms
 GET /socket.io?EIO=4&transport=polling&t=zk6hnaa3 404 in 99ms
 GET /api/socket-health 200 in 29ms
 GET /socket.io?EIO=4&transport=polling&t=zk79cqj8 404 in 93ms
 GET /api/socket-health 200 in 28ms
 GET /socket.io?EIO=4&transport=polling&t=zk817k3g 404 in 96ms
 GET /api/socket-health 200 in 26ms
 GET /socket.io?EIO=4&transport=polling&t=zk8sp8ik 404 in 98ms
 GET /api/socket-health 200 in 34ms
 GET /socket.io?EIO=4&transport=polling&t=zk9knr19 404 in 98ms
 GET /api/socket-health 200 in 29ms
 GET /socket.io?EIO=4&transport=polling&t=zkacclxj 404 in 96ms
 GET /api/socket-health 200 in 28ms
 GET /socket.io?EIO=4&transport=polling&t=zkb46clw 404 in 98ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
 GET /api/socket-health 200 in 57ms
 GET /socket.io?EIO=4&transport=polling&t=zkbwm3pb 404 in 112ms
 GET /api/conversations 200 in 191ms
 GET /api/socket-health 200 in 29ms
 GET /socket.io?EIO=4&transport=polling&t=zkcnx92r 404 in 116ms
 GET /api/socket-health 200 in 39ms
 GET /socket.io?EIO=4&transport=polling&t=zkdfk90s 404 in 123ms
 GET /api/socket-health 200 in 35ms
 GET /socket.io?EIO=4&transport=polling&t=zke7kzx5 404 in 213ms
 GET /api/socket-health 200 in 61ms
 GET /socket.io?EIO=4&transport=polling&t=zkezu4o3 404 in 170ms
 GET /api/socket-health 200 in 35ms
 GET /socket.io?EIO=4&transport=polling&t=zkfr74vx 404 in 132ms
 GET /api/socket-health 200 in 35ms
 GET /socket.io?EIO=4&transport=polling&t=zkgl0cc5 404 in 112ms
 GET /api/socket-health 200 in 28ms
 GET /socket.io?EIO=4&transport=polling&t=zkhajqux 404 in 94ms
 GET /api/socket-health 200 in 37ms
 GET /socket.io?EIO=4&transport=polling&t=zki2l0ce 404 in 102ms
 GET /api/socket-health 200 in 49ms
=== FRIEND REQUEST GET START ===
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
Request type: received User: sayantan2@gmail.com
âœ… Database connected
âœ… Current user found: {
  id: new ObjectId('6901f85f42c5d010fa811206'),
  email: 'sayantan2@gmail.com',
  friendRequestsCount: 0,
  sentRequestsCount: 1
}
Processing received requests...
Raw friendRequests: []
Processed receivedRequests: []
Populating sender details...
Final populated requests: []
=== FRIEND REQUEST GET END (received) ===
 GET /api/friends/request?type=received 200 in 156ms
=== FRIEND REQUEST GET START ===
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
Request type: sent User: sayantan2@gmail.com
âœ… Database connected
 GET /socket.io?EIO=4&transport=polling&t=zkiunfdc 404 in 142ms
âœ… Current user found: {
  id: new ObjectId('6901f85f42c5d010fa811206'),
  email: 'sayantan2@gmail.com',
  friendRequestsCount: 0,
  sentRequestsCount: 1
}
Processing sent requests...
Raw sentRequests: [
  {
    from: new ObjectId('6901f85f42c5d010fa811206'),
    fromName: 'sayantan2',
    to: new ObjectId('6905adf16a22b7843b006183'),
    toName: 'sayantan3',
    status: 'pending',
    _id: new ObjectId('6905cdce14ad0d0f020b3985'),
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
Filtering sent request: { status: 'pending', to: new ObjectId('6905adf16a22b7843b006183') }
Mapping sent request: {
  from: new ObjectId('6901f85f42c5d010fa811206'),
  fromName: 'sayantan2',
  to: new ObjectId('6905adf16a22b7843b006183'),
  toName: 'sayantan3',
  status: 'pending',
  _id: new ObjectId('6905cdce14ad0d0f020b3985'),
  createdAt: 2025-11-01T09:07:26.707Z,
  updatedAt: 2025-11-01T09:07:26.707Z
}
Processed sentRequests: [
  {
    id: '6905cdce14ad0d0f020b3985',
    to: {
      id: '6905adf16a22b7843b006183',
      username: 'sayantan3',
      email: '',
      profilePicture: null
    },
    status: 'pending',
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
Populating recipient details...
Looking up recipient: 6905adf16a22b7843b006183
Found recipient: sayantan3
Final populated sent requests: [
  {
    id: '6905cdce14ad0d0f020b3985',
    to: {
      id: '6905adf16a22b7843b006183',
      username: 'sayantan3',
      email: 'sayantan3@gmail.com',
      profilePicture: undefined
    },
    status: 'pending',
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
=== FRIEND REQUEST GET END (sent) ===
 GET /api/friends/request?type=sent 200 in 139ms
 GET /api/socket-health 200 in 34ms
 GET /socket.io?EIO=4&transport=polling&t=zkjlzwrg 404 in 122ms
 GET /api/socket-health 200 in 41ms
 GET /socket.io?EIO=4&transport=polling&t=zkkdx2ef 404 in 127ms
 GET /api/socket-health 200 in 41ms
 GET /socket.io?EIO=4&transport=polling&t=zkl5mtaz 404 in 104ms
 GET /api/socket-health 200 in 37ms
 GET /socket.io?EIO=4&transport=polling&t=zklxdo89 404 in 145ms
 GET /api/socket-health 200 in 51ms
 GET /socket.io?EIO=4&transport=polling&t=zkmrc1p1 404 in 134ms
 GET /api/socket-health 200 in 36ms
 GET /socket.io?EIO=4&transport=polling&t=zkngujpa 404 in 124ms
 GET /api/socket-health 200 in 37ms
 GET /socket.io?EIO=4&transport=polling&t=zko8i6n6 404 in 102ms
 GET /api/socket-health 200 in 28ms
 GET /socket.io?EIO=4&transport=polling&t=zkp02a94 404 in 107ms
 GET /api/socket-health 200 in 30ms
 GET /socket.io?EIO=4&transport=polling&t=zkps7mnb 404 in 117ms
 GET /api/socket-health 200 in 35ms
 GET /socket.io?EIO=4&transport=polling&t=zkqjyl0w 404 in 102ms
 GET /api/socket-health 200 in 25ms
 GET /socket.io?EIO=4&transport=polling&t=zkrbi2zi 404 in 100ms
 GET /api/socket-health 200 in 38ms
 GET /socket.io?EIO=4&transport=polling&t=zks3lias 404 in 110ms
 GET /api/socket-health 200 in 37ms
 GET /socket.io?EIO=4&transport=polling&t=zksvcynh 404 in 113ms
 GET /api/socket-health 200 in 37ms
 GET /socket.io?EIO=4&transport=polling&t=zktn5zzf 404 in 136ms
 GET /api/socket-health 200 in 45ms
 GET /socket.io?EIO=4&transport=polling&t=zkuf2uof 404 in 128ms
 GET /api/socket-health 200 in 33ms
 GET /socket.io?EIO=4&transport=polling&t=zkv6idhx 404 in 123ms
 GET /api/socket-health 200 in 31ms
 GET /socket.io?EIO=4&transport=polling&t=zkvy28e8 404 in 150ms
 GET /api/socket-health 200 in 29ms
 GET /socket.io?EIO=4&transport=polling&t=zkwq0jom 404 in 95ms
 GET /api/socket-health 200 in 41ms
 GET /socket.io?EIO=4&transport=polling&t=zkxi8hf7 404 in 92ms
 GET /api/socket-health 200 in 36ms
 GET /socket.io?EIO=4&transport=polling&t=zky9oy0i 404 in 123ms
 GET /api/socket-health 200 in 34ms
 GET /socket.io?EIO=4&transport=polling&t=zkz1c5xs 404 in 126ms
 GET /api/socket-health 200 in 457ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
 GET /socket.io?EIO=4&transport=polling&t=zl04ywb2 404 in 253ms
 GET /api/conversations 200 in 751ms
 GET /api/socket-health 200 in 50ms
 GET /socket.io?EIO=4&transport=polling&t=zl0lcrcw 404 in 269ms
 GET /api/socket-health 200 in 28ms
 GET /socket.io?EIO=4&transport=polling&t=zl1cf13p 404 in 97ms
 GET /api/socket-health 200 in 35ms
 GET /socket.io?EIO=4&transport=polling&t=zl24tmy9 404 in 140ms
 GET /api/socket-health 200 in 35ms
 GET /socket.io?EIO=4&transport=polling&t=zl2w7jcd 404 in 126ms
 GET /api/socket-health 200 in 34ms
 GET /socket.io?EIO=4&transport=polling&t=zl3obsr8 404 in 130ms
 GET /api/socket-health 200 in 39ms
 GET /socket.io?EIO=4&transport=polling&t=zl4g9kb5 404 in 121ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
=== FRIEND REQUEST GET START ===
 GET /api/socket-health 200 in 125ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
Request type: received User: sayantan2@gmail.com
âœ… Database connected
 GET /socket.io?EIO=4&transport=polling&t=zl5b5lbw 404 in 112ms
 POST /api/users/heartbeat 200 in 326ms
âœ… Current user found: {
  id: new ObjectId('6901f85f42c5d010fa811206'),
  email: 'sayantan2@gmail.com',
  friendRequestsCount: 0,
  sentRequestsCount: 1
}
Processing received requests...
Raw friendRequests: []
Processed receivedRequests: []
Populating sender details...
Final populated requests: []
=== FRIEND REQUEST GET END (received) ===
 GET /api/friends/request?type=received 200 in 612ms
 GET /api/friends 200 in 622ms
=== FRIEND REQUEST GET START ===
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
Request type: sent User: sayantan2@gmail.com
âœ… Database connected
âœ… Current user found: {
  id: new ObjectId('6901f85f42c5d010fa811206'),
  email: 'sayantan2@gmail.com',
  friendRequestsCount: 0,
  sentRequestsCount: 1
}
Processing sent requests...
Raw sentRequests: [
  {
    from: new ObjectId('6901f85f42c5d010fa811206'),
    fromName: 'sayantan2',
    to: new ObjectId('6905adf16a22b7843b006183'),
    toName: 'sayantan3',
    status: 'pending',
    _id: new ObjectId('6905cdce14ad0d0f020b3985'),
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
Filtering sent request: { status: 'pending', to: new ObjectId('6905adf16a22b7843b006183') }
Mapping sent request: {
  from: new ObjectId('6901f85f42c5d010fa811206'),
  fromName: 'sayantan2',
  to: new ObjectId('6905adf16a22b7843b006183'),
  toName: 'sayantan3',
  status: 'pending',
  _id: new ObjectId('6905cdce14ad0d0f020b3985'),
  createdAt: 2025-11-01T09:07:26.707Z,
  updatedAt: 2025-11-01T09:07:26.707Z
}
Processed sentRequests: [
  {
    id: '6905cdce14ad0d0f020b3985',
    to: {
      id: '6905adf16a22b7843b006183',
      username: 'sayantan3',
      email: '',
      profilePicture: null
    },
    status: 'pending',
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
Populating recipient details...
Looking up recipient: 6905adf16a22b7843b006183
Found recipient: sayantan3
Final populated sent requests: [
  {
    id: '6905cdce14ad0d0f020b3985',
    to: {
      id: '6905adf16a22b7843b006183',
      username: 'sayantan3',
      email: 'sayantan3@gmail.com',
      profilePicture: undefined
    },
    status: 'pending',
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
=== FRIEND REQUEST GET END (sent) ===
 GET /api/friends/request?type=sent 200 in 231ms
 GET /api/socket-health 200 in 52ms
 GET /socket.io?EIO=4&transport=polling&t=zl5zv04o 404 in 144ms
 GET /api/socket-health 200 in 34ms
 GET /socket.io?EIO=4&transport=polling&t=zl6r1dra 404 in 133ms
 GET /api/socket-health 200 in 41ms
 GET /socket.io?EIO=4&transport=polling&t=zl7j738m 404 in 231ms
 GET /api/socket-health 200 in 31ms
 GET /socket.io?EIO=4&transport=polling&t=zl8am1yf 404 in 105ms
 GET /api/socket-health 200 in 34ms
 GET /socket.io?EIO=4&transport=polling&t=zl92gex9 404 in 94ms
 GET /api/socket-health 200 in 31ms
 GET /socket.io?EIO=4&transport=polling&t=zl9uiubg 404 in 125ms
 GET /api/socket-health 200 in 28ms
 GET /socket.io?EIO=4&transport=polling&t=zlals1jx 404 in 105ms
 GET /api/socket-health 200 in 36ms
 GET /socket.io?EIO=4&transport=polling&t=zlbe59xs 404 in 117ms
 GET /api/socket-health 200 in 38ms
 GET /socket.io?EIO=4&transport=polling&t=zlc5zz4r 404 in 105ms
 GET /api/socket-health 200 in 38ms
 GET /socket.io?EIO=4&transport=polling&t=zlcxf422 404 in 118ms
 GET /api/socket-health 200 in 26ms
 GET /socket.io?EIO=4&transport=polling&t=zldp30fe 404 in 97ms
 GET /api/socket-health 200 in 82ms
 GET /socket.io?EIO=4&transport=polling&t=zleiy7qm 404 in 151ms
 GET /api/socket-health 200 in 52ms
 GET /socket.io?EIO=4&transport=polling&t=zlf96a07 404 in 116ms
 GET /api/socket-health 200 in 33ms
 GET /socket.io?EIO=4&transport=polling&t=zlg0qg16 404 in 110ms
 GET /api/socket-health 200 in 28ms
 GET /socket.io?EIO=4&transport=polling&t=zlgs6z7w 404 in 111ms
 GET /api/socket-health 200 in 39ms
 GET /socket.io?EIO=4&transport=polling&t=zlhk9nmx 404 in 132ms
 GET /api/socket-health 200 in 60ms
 GET /socket.io?EIO=4&transport=polling&t=zlicmxl7 404 in 282ms
 GET /api/socket-health 200 in 56ms
 GET /socket.io?EIO=4&transport=polling&t=zlj4jc87 404 in 161ms
 GET /api/socket-health 200 in 38ms
 GET /socket.io?EIO=4&transport=polling&t=zljwgoyk 404 in 115ms
 GET /api/socket-health 200 in 27ms
 GET /socket.io?EIO=4&transport=polling&t=zlkmxf9x 404 in 95ms
 GET /api/socket-health 200 in 27ms
 GET /socket.io?EIO=4&transport=polling&t=zlleoa7g 404 in 96ms
 GET /api/socket-health 200 in 32ms
 GET /socket.io?EIO=4&transport=polling&t=zlm6i64i 404 in 104ms
 GET /api/socket-health 200 in 26ms
 GET /socket.io?EIO=4&transport=polling&t=zlmycz5y 404 in 95ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
 GET /api/socket-health 200 in 53ms
 GET /socket.io?EIO=4&transport=polling&t=zlnqwer5 404 in 93ms
 GET /api/conversations 200 in 178ms
 GET /api/socket-health 200 in 30ms
 GET /socket.io?EIO=4&transport=polling&t=zlohyxbb 404 in 97ms
 GET /api/socket-health 200 in 28ms
 GET /socket.io?EIO=4&transport=polling&t=zlp9nqx7 404 in 104ms
 GET /api/socket-health 200 in 28ms
 GET /socket.io?EIO=4&transport=polling&t=zlq1hgpb 404 in 101ms
 GET /api/socket-health 200 in 28ms
 GET /socket.io?EIO=4&transport=polling&t=zlqt8gpy 404 in 90ms
 GET /api/socket-health 200 in 32ms
 GET /socket.io?EIO=4&transport=polling&t=zlrl6tre 404 in 95ms
 GET /api/socket-health 200 in 27ms
 GET /socket.io?EIO=4&transport=polling&t=zlscv1gj 404 in 95ms
 GET /api/socket-health 200 in 28ms
 GET /socket.io?EIO=4&transport=polling&t=zlt4n3pt 404 in 96ms
 GET /api/socket-health 200 in 47ms
=== FRIEND REQUEST GET START ===
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
Request type: received User: sayantan2@gmail.com
âœ… Database connected
âœ… Current user found: {
  id: new ObjectId('6901f85f42c5d010fa811206'),
  email: 'sayantan2@gmail.com',
  friendRequestsCount: 0,
  sentRequestsCount: 1
}
Processing received requests...
Raw friendRequests: []
Processed receivedRequests: []
Populating sender details...
Final populated requests: []
=== FRIEND REQUEST GET END (received) ===
 GET /api/friends/request?type=received 200 in 144ms
=== FRIEND REQUEST GET START ===
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
Request type: sent User: sayantan2@gmail.com
âœ… Database connected
 GET /socket.io?EIO=4&transport=polling&t=zltwyt9w 404 in 124ms
âœ… Current user found: {
  id: new ObjectId('6901f85f42c5d010fa811206'),
  email: 'sayantan2@gmail.com',
  friendRequestsCount: 0,
  sentRequestsCount: 1
}
Processing sent requests...
Raw sentRequests: [
  {
    from: new ObjectId('6901f85f42c5d010fa811206'),
    fromName: 'sayantan2',
    to: new ObjectId('6905adf16a22b7843b006183'),
    toName: 'sayantan3',
    status: 'pending',
    _id: new ObjectId('6905cdce14ad0d0f020b3985'),
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
Filtering sent request: { status: 'pending', to: new ObjectId('6905adf16a22b7843b006183') }
Mapping sent request: {
  from: new ObjectId('6901f85f42c5d010fa811206'),
  fromName: 'sayantan2',
  to: new ObjectId('6905adf16a22b7843b006183'),
  toName: 'sayantan3',
  status: 'pending',
  _id: new ObjectId('6905cdce14ad0d0f020b3985'),
  createdAt: 2025-11-01T09:07:26.707Z,
  updatedAt: 2025-11-01T09:07:26.707Z
}
Processed sentRequests: [
  {
    id: '6905cdce14ad0d0f020b3985',
    to: {
      id: '6905adf16a22b7843b006183',
      username: 'sayantan3',
      email: '',
      profilePicture: null
    },
    status: 'pending',
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
Populating recipient details...
Looking up recipient: 6905adf16a22b7843b006183
Found recipient: sayantan3
Final populated sent requests: [
  {
    id: '6905cdce14ad0d0f020b3985',
    to: {
      id: '6905adf16a22b7843b006183',
      username: 'sayantan3',
      email: 'sayantan3@gmail.com',
      profilePicture: undefined
    },
    status: 'pending',
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
=== FRIEND REQUEST GET END (sent) ===
 GET /api/friends/request?type=sent 200 in 121ms
 GET /api/socket-health 200 in 54ms
 GET /socket.io?EIO=4&transport=polling&t=zluov2iz 404 in 158ms
 GET /api/socket-health 200 in 33ms
 GET /socket.io?EIO=4&transport=polling&t=zlvg49bh 404 in 99ms
 GET /api/socket-health 200 in 34ms
 GET /socket.io?EIO=4&transport=polling&t=zlw80rlz 404 in 109ms
 GET /api/socket-health 200 in 34ms
 GET /socket.io?EIO=4&transport=polling&t=zlx0qz9p 404 in 123ms
 GET /api/socket-health 200 in 26ms
 GET /socket.io?EIO=4&transport=polling&t=zlxr6358 404 in 103ms
 GET /api/socket-health 200 in 42ms
 GET /socket.io?EIO=4&transport=polling&t=zlyjczp2 404 in 111ms
 GET /api/socket-health 200 in 30ms
 GET /socket.io?EIO=4&transport=polling&t=zlzb2nzs 404 in 100ms
 GET /api/socket-health 200 in 41ms
 GET /socket.io?EIO=4&transport=polling&t=zm034b2k 404 in 106ms
 GET /api/socket-health 200 in 28ms
 GET /socket.io?EIO=4&transport=polling&t=zm0uiagd 404 in 98ms
 GET /api/socket-health 200 in 29ms
 GET /socket.io?EIO=4&transport=polling&t=zm1m8nk9 404 in 97ms
 GET /api/socket-health 200 in 41ms
 GET /socket.io?EIO=4&transport=polling&t=zm2ecq3i 404 in 130ms
 GET /api/socket-health 200 in 39ms
 GET /socket.io?EIO=4&transport=polling&t=zm35zpht 404 in 163ms
 GET /api/socket-health 200 in 76ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
 GET /api/auth/session 200 in 89ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
=== FRIEND REQUEST GET START ===
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
Request type: received User: sayantan2@gmail.com
âœ… Database connected
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
 GET /socket.io?EIO=4&transport=polling&t=zm3yzyk2 404 in 293ms
 GET /api/random-chat/queue 200 in 299ms
 GET /api/users/me 200 in 346ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
 GET /api/friends 200 in 390ms
 GET /api/random-chat/session 200 in 184ms
âœ… Current user found: {
  id: new ObjectId('6901f85f42c5d010fa811206'),
  email: 'sayantan2@gmail.com',
  friendRequestsCount: 0,
  sentRequestsCount: 1
}
Processing received requests...
Raw friendRequests: []
Processed receivedRequests: []
Populating sender details...
Final populated requests: []
=== FRIEND REQUEST GET END (received) ===
 GET /api/friends/request?type=received 200 in 586ms
=== FRIEND REQUEST GET START ===
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
Request type: sent User: sayantan2@gmail.com
âœ… Database connected
âœ… Current user found: {
  id: new ObjectId('6901f85f42c5d010fa811206'),
  email: 'sayantan2@gmail.com',
  friendRequestsCount: 0,
  sentRequestsCount: 1
}
Processing sent requests...
Raw sentRequests: [
  {
    from: new ObjectId('6901f85f42c5d010fa811206'),
    fromName: 'sayantan2',
    to: new ObjectId('6905adf16a22b7843b006183'),
    toName: 'sayantan3',
    status: 'pending',
    _id: new ObjectId('6905cdce14ad0d0f020b3985'),
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
Filtering sent request: { status: 'pending', to: new ObjectId('6905adf16a22b7843b006183') }
Mapping sent request: {
  from: new ObjectId('6901f85f42c5d010fa811206'),
  fromName: 'sayantan2',
  to: new ObjectId('6905adf16a22b7843b006183'),
  toName: 'sayantan3',
  status: 'pending',
  _id: new ObjectId('6905cdce14ad0d0f020b3985'),
  createdAt: 2025-11-01T09:07:26.707Z,
  updatedAt: 2025-11-01T09:07:26.707Z
}
Processed sentRequests: [
  {
    id: '6905cdce14ad0d0f020b3985',
    to: {
      id: '6905adf16a22b7843b006183',
      username: 'sayantan3',
      email: '',
      profilePicture: null
    },
    status: 'pending',
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
Populating recipient details...
Looking up recipient: 6905adf16a22b7843b006183
 POST /api/users/heartbeat 200 in 711ms
Found recipient: sayantan3
Final populated sent requests: [
  {
    id: '6905cdce14ad0d0f020b3985',
    to: {
      id: '6905adf16a22b7843b006183',
      username: 'sayantan3',
      email: 'sayantan3@gmail.com',
      profilePicture: undefined
    },
    status: 'pending',
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
=== FRIEND REQUEST GET END (sent) ===
 GET /api/friends/request?type=sent 200 in 157ms
 GET /api/socket-health 200 in 31ms
 GET /socket.io?EIO=4&transport=polling&t=zm4pcwin 404 in 128ms
 GET /api/socket-health 200 in 48ms
 GET /socket.io?EIO=4&transport=polling&t=zm5hpy9p 404 in 100ms
 GET /api/socket-health 200 in 28ms
 GET /socket.io?EIO=4&transport=polling&t=zm68wt3p 404 in 105ms
 GET /api/socket-health 200 in 28ms
 GET /socket.io?EIO=4&transport=polling&t=zm70lrap 404 in 97ms
 GET /api/socket-health 200 in 27ms
 GET /socket.io?EIO=4&transport=polling&t=zm7schdo 404 in 96ms
 GET /api/socket-health 200 in 27ms
 GET /socket.io?EIO=4&transport=polling&t=zm8k5htf 404 in 102ms
 GET /api/socket-health 200 in 33ms
 GET /socket.io?EIO=4&transport=polling&t=zm9c1bl3 404 in 96ms
 GET /api/socket-health 200 in 30ms
 GET /socket.io?EIO=4&transport=polling&t=zma3r1k6 404 in 95ms
 GET /api/socket-health 200 in 31ms
 GET /socket.io?EIO=4&transport=polling&t=zmavgv0h 404 in 96ms
 GET /api/socket-health 200 in 45ms
 GET /socket.io?EIO=4&transport=polling&t=zmbnpqia 404 in 105ms
 GET /api/socket-health 200 in 34ms
 GET /socket.io?EIO=4&transport=polling&t=zmcf8q3y 404 in 102ms
 GET /api/socket-health 200 in 27ms
 GET /socket.io?EIO=4&transport=polling&t=zmd6wh8m 404 in 96ms
 GET /api/socket-health 200 in 28ms
 GET /socket.io?EIO=4&transport=polling&t=zmdylk6i 404 in 93ms
 GET /api/socket-health 200 in 30ms
 GET /socket.io?EIO=4&transport=polling&t=zmeqbev9 404 in 107ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
=== FRIEND REQUEST GET START ===
 GET /api/socket-health 200 in 84ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
Request type: received User: sayantan2@gmail.com
âœ… Database connected
âœ… Current user found: {
  id: new ObjectId('6901f85f42c5d010fa811206'),
  email: 'sayantan2@gmail.com',
  friendRequestsCount: 0,
  sentRequestsCount: 1
}
Processing received requests...
Raw friendRequests: []
Processed receivedRequests: []
Populating sender details...
Final populated requests: []
=== FRIEND REQUEST GET END (received) ===
 GET /api/friends/request?type=received 200 in 201ms
=== FRIEND REQUEST GET START ===
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
 GET /api/friends 200 in 247ms
Request type: sent User: sayantan2@gmail.com
âœ… Database connected
 GET /socket.io?EIO=4&transport=polling&t=zmfk5xug 404 in 146ms
âœ… Current user found: {
  id: new ObjectId('6901f85f42c5d010fa811206'),
  email: 'sayantan2@gmail.com',
  friendRequestsCount: 0,
  sentRequestsCount: 1
}
Processing sent requests...
Raw sentRequests: [
  {
    from: new ObjectId('6901f85f42c5d010fa811206'),
    fromName: 'sayantan2',
    to: new ObjectId('6905adf16a22b7843b006183'),
    toName: 'sayantan3',
    status: 'pending',
    _id: new ObjectId('6905cdce14ad0d0f020b3985'),
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
Filtering sent request: { status: 'pending', to: new ObjectId('6905adf16a22b7843b006183') }
Mapping sent request: {
  from: new ObjectId('6901f85f42c5d010fa811206'),
  fromName: 'sayantan2',
  to: new ObjectId('6905adf16a22b7843b006183'),
  toName: 'sayantan3',
  status: 'pending',
  _id: new ObjectId('6905cdce14ad0d0f020b3985'),
  createdAt: 2025-11-01T09:07:26.707Z,
  updatedAt: 2025-11-01T09:07:26.707Z
}
Processed sentRequests: [
  {
    id: '6905cdce14ad0d0f020b3985',
    to: {
      id: '6905adf16a22b7843b006183',
      username: 'sayantan3',
      email: '',
      profilePicture: null
    },
    status: 'pending',
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
Populating recipient details...
Looking up recipient: 6905adf16a22b7843b006183
Found recipient: sayantan3
Final populated sent requests: [
  {
    id: '6905cdce14ad0d0f020b3985',
    to: {
      id: '6905adf16a22b7843b006183',
      username: 'sayantan3',
      email: 'sayantan3@gmail.com',
      profilePicture: undefined
    },
    status: 'pending',
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
=== FRIEND REQUEST GET END (sent) ===
 GET /api/friends/request?type=sent 200 in 124ms
 GET /api/socket-health 200 in 34ms
 GET /socket.io?EIO=4&transport=polling&t=zmga38xt 404 in 109ms
 GET /api/socket-health 200 in 30ms
 GET /socket.io?EIO=4&transport=polling&t=zmh1x5xt 404 in 105ms
 GET /api/socket-health 200 in 32ms
 GET /socket.io?EIO=4&transport=polling&t=zmhthj4l 404 in 123ms
 GET /api/socket-health 200 in 30ms
 GET /socket.io?EIO=4&transport=polling&t=zmil751l 404 in 112ms
 GET /api/socket-health 200 in 40ms
 GET /socket.io?EIO=4&transport=polling&t=zmjdkrn1 404 in 110ms
 GET /api/socket-health 200 in 39ms
 GET /socket.io?EIO=4&transport=polling&t=zmk6ew25 404 in 116ms
 GET /api/socket-health 200 in 73ms
 GET /socket.io?EIO=4&transport=polling&t=zmky1y9c 404 in 170ms
 GET /api/socket-health 200 in 33ms
 GET /socket.io?EIO=4&transport=polling&t=zmlonwdl 404 in 117ms
 GET /api/socket-health 200 in 29ms
 GET /socket.io?EIO=4&transport=polling&t=zmmg1nha 404 in 99ms
 GET /api/socket-health 200 in 39ms
 GET /socket.io?EIO=4&transport=polling&t=zmn8fzay 404 in 111ms
 GET /api/socket-health 200 in 25ms
 GET /socket.io?EIO=4&transport=polling&t=zmnzo8s1 404 in 94ms
 GET /api/socket-health 200 in 45ms
 GET /socket.io?EIO=4&transport=polling&t=zmorz6xl 404 in 139ms
 GET /api/socket-health 200 in 39ms
 GET /socket.io?EIO=4&transport=polling&t=zmpjmgp3 404 in 130ms
 GET /api/socket-health 200 in 52ms
 GET /socket.io?EIO=4&transport=polling&t=zmqc4dy9 404 in 261ms
 GET /api/socket-health 200 in 44ms
 GET /socket.io?EIO=4&transport=polling&t=zmr4bv3z 404 in 259ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
 GET /api/socket-health 200 in 119ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
 POST /api/users/heartbeat 200 in 218ms
 GET /api/conversations 200 in 253ms
 GET /socket.io?EIO=4&transport=polling&t=zms1lk60 404 in 217ms
 GET /api/socket-health 200 in 39ms
 GET /socket.io?EIO=4&transport=polling&t=zmsmwo93 404 in 147ms
 GET /api/socket-health 200 in 39ms
 GET /socket.io?EIO=4&transport=polling&t=zmtf6uum 404 in 121ms
 GET /api/socket-health 200 in 126ms
 GET /socket.io?EIO=4&transport=polling&t=zmucfqb8 404 in 206ms
 GET /api/socket-health 200 in 31ms
 GET /socket.io?EIO=4&transport=polling&t=zmuxx0me 404 in 134ms
 GET /api/socket-health 200 in 43ms
 GET /socket.io?EIO=4&transport=polling&t=zmvqeigi 404 in 140ms
 GET /api/socket-health 200 in 37ms
 GET /socket.io?EIO=4&transport=polling&t=zmwhrzwo 404 in 159ms
 GET /api/socket-health 200 in 37ms
 GET /socket.io?EIO=4&transport=polling&t=zmx991sl 404 in 136ms
 GET /api/socket-health 200 in 58ms
 GET /socket.io?EIO=4&transport=polling&t=zmy1x3b4 404 in 202ms
 GET /api/socket-health 200 in 37ms
 GET /socket.io?EIO=4&transport=polling&t=zmysr23a 404 in 108ms
 GET /api/socket-health 200 in 28ms
 GET /socket.io?EIO=4&transport=polling&t=zmzkj3mv 404 in 133ms
 GET /api/socket-health 200 in 42ms
 GET /socket.io?EIO=4&transport=polling&t=zn0cenrr 404 in 162ms
 GET /api/socket-health 200 in 96ms
 GET /socket.io?EIO=4&transport=polling&t=zn16xhjh 404 in 177ms
 GET /api/socket-health 200 in 51ms
 GET /socket.io?EIO=4&transport=polling&t=zn1whiwl 404 in 168ms
 GET /api/socket-health 200 in 60ms
 GET /socket.io?EIO=4&transport=polling&t=zn2on80h 404 in 170ms
=== FRIEND REQUEST GET START ===
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
Request type: received User: sayantan2@gmail.com
âœ… Database connected
 GET /api/socket-health 200 in 99ms
âœ… Current user found: {
  id: new ObjectId('6901f85f42c5d010fa811206'),
  email: 'sayantan2@gmail.com',
  friendRequestsCount: 0,
  sentRequestsCount: 1
}
Processing received requests...
Raw friendRequests: []
Processed receivedRequests: []
Populating sender details...
Final populated requests: []
=== FRIEND REQUEST GET END (received) ===
 GET /api/friends/request?type=received 200 in 234ms
=== FRIEND REQUEST GET START ===
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
Request type: sent User: sayantan2@gmail.com
âœ… Database connected
 GET /socket.io?EIO=4&transport=polling&t=zn3h5u4c 404 in 223ms
âœ… Current user found: {
  id: new ObjectId('6901f85f42c5d010fa811206'),
  email: 'sayantan2@gmail.com',
  friendRequestsCount: 0,
  sentRequestsCount: 1
}
Processing sent requests...
Raw sentRequests: [
  {
    from: new ObjectId('6901f85f42c5d010fa811206'),
    fromName: 'sayantan2',
    to: new ObjectId('6905adf16a22b7843b006183'),
    toName: 'sayantan3',
    status: 'pending',
    _id: new ObjectId('6905cdce14ad0d0f020b3985'),
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
Filtering sent request: { status: 'pending', to: new ObjectId('6905adf16a22b7843b006183') }
Mapping sent request: {
  from: new ObjectId('6901f85f42c5d010fa811206'),
  fromName: 'sayantan2',
  to: new ObjectId('6905adf16a22b7843b006183'),
  toName: 'sayantan3',
  status: 'pending',
  _id: new ObjectId('6905cdce14ad0d0f020b3985'),
  createdAt: 2025-11-01T09:07:26.707Z,
  updatedAt: 2025-11-01T09:07:26.707Z
}
Processed sentRequests: [
  {
    id: '6905cdce14ad0d0f020b3985',
    to: {
      id: '6905adf16a22b7843b006183',
      username: 'sayantan3',
      email: '',
      profilePicture: null
    },
    status: 'pending',
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
Populating recipient details...
Looking up recipient: 6905adf16a22b7843b006183
Found recipient: sayantan3
Final populated sent requests: [
  {
    id: '6905cdce14ad0d0f020b3985',
    to: {
      id: '6905adf16a22b7843b006183',
      username: 'sayantan3',
      email: 'sayantan3@gmail.com',
      profilePicture: undefined
    },
    status: 'pending',
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
=== FRIEND REQUEST GET END (sent) ===
 GET /api/friends/request?type=sent 200 in 190ms
 GET /api/socket-health 200 in 79ms
 GET /socket.io?EIO=4&transport=polling&t=zn49bggh 404 in 316ms
 GET /api/socket-health 200 in 170ms
 GET /socket.io?EIO=4&transport=polling&t=zn53g6e7 404 in 529ms
 GET /api/socket-health 200 in 130ms
 GET /socket.io?EIO=4&transport=polling&t=zn5utbew 404 in 492ms
 GET /api/socket-health 200 in 129ms
 GET /api/socket-health 200 in 259ms
 GET /socket.io?EIO=4&transport=polling&t=zn6u3x1a 404 in 756ms
 GET /socket.io?EIO=4&transport=polling&t=zn7t82lk 404 in 467ms
 GET /api/socket-health 200 in 114ms
 GET /socket.io?EIO=4&transport=polling&t=zn8wj7co 404 in 253ms
 GET /api/socket-health 200 in 88ms
 GET /socket.io?EIO=4&transport=polling&t=zn9nk3d6 404 in 258ms
 GET /api/socket-health 200 in 105ms
 GET /socket.io?EIO=4&transport=polling&t=znafrcpf 404 in 284ms
 GET /api/socket-health 200 in 79ms
 GET /socket.io?EIO=4&transport=polling&t=znb6jxhi 404 in 415ms
 GET /api/socket-health 200 in 199ms
 GET /socket.io?EIO=4&transport=polling&t=znc1znsk 404 in 464ms
 GET /api/socket-health 200 in 131ms
 GET /socket.io?EIO=4&transport=polling&t=zncrzf32 404 in 396ms
 GET /api/socket-health 200 in 76ms
 GET /socket.io?EIO=4&transport=polling&t=zndi1bsn 404 in 313ms
 GET /api/socket-health 200 in 186ms
 GET /socket.io?EIO=4&transport=polling&t=znedjf99 404 in 383ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
 GET /api/socket-health 200 in 164ms
 POST /api/users/heartbeat 200 in 516ms
 GET /socket.io?EIO=4&transport=polling&t=znf4pthu 404 in 312ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
 GET /api/socket-health 200 in 200ms
 GET /api/conversations 200 in 305ms
 GET /api/socket-health 200 in 177ms
 GET /socket.io?EIO=4&transport=polling&t=znfxalv1 404 in 1388ms
 GET /socket.io?EIO=4&transport=polling&t=zngsalvz 404 in 226ms
 GET /api/socket-health 200 in 32ms
 GET /api/socket-health 200 in 135ms
 GET /socket.io?EIO=4&transport=polling&t=zni3704d 404 in 228ms
 GET /socket.io?EIO=4&transport=polling&t=zni70o6x 404 in 106ms
 GET /api/socket-health 200 in 42ms
 GET /api/socket-health 200 in 127ms
 GET /socket.io?EIO=4&transport=polling&t=znjn1xac 404 in 132ms
 GET /socket.io?EIO=4&transport=polling&t=znjqmvgh 404 in 116ms
 GET /api/socket-health 200 in 46ms
 GET /api/socket-health 200 in 97ms
 GET /socket.io?EIO=4&transport=polling&t=znl9mqv3 404 in 207ms
 GET /socket.io?EIO=4&transport=polling&t=znl9gtw3 404 in 211ms
 GET /api/socket-health 200 in 41ms
 GET /api/socket-health 200 in 138ms
 GET /socket.io?EIO=4&transport=polling&t=znmq2hgr 404 in 233ms
 GET /socket.io?EIO=4&transport=polling&t=znmtx8p0 404 in 112ms
 GET /api/socket-health 200 in 31ms
 GET /api/socket-health 200 in 142ms
 GET /socket.io?EIO=4&transport=polling&t=zno96sep 404 in 240ms
 GET /socket.io?EIO=4&transport=polling&t=znod6rgy 404 in 111ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
=== FRIEND REQUEST GET START ===
 GET /api/socket-health 200 in 115ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
Request type: received User: sayantan2@gmail.com
âœ… Database connected
 GET /api/friends 200 in 309ms
 GET /api/socket-health 200 in 202ms
 GET /socket.io?EIO=4&transport=polling&t=znpzpsf3 404 in 353ms
 GET /socket.io?EIO=4&transport=polling&t=znq5j6yy 404 in 175ms
âœ… Current user found: {
  id: new ObjectId('6901f85f42c5d010fa811206'),
  email: 'sayantan2@gmail.com',
  friendRequestsCount: 0,
  sentRequestsCount: 1
}
Processing received requests...
Raw friendRequests: []
Processed receivedRequests: []
Populating sender details...
Final populated requests: []
=== FRIEND REQUEST GET END (received) ===
 GET /api/friends/request?type=received 200 in 686ms
=== FRIEND REQUEST GET START ===
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
Request type: sent User: sayantan2@gmail.com
âœ… Database connected
âœ… Current user found: {
  id: new ObjectId('6901f85f42c5d010fa811206'),
  email: 'sayantan2@gmail.com',
  friendRequestsCount: 0,
  sentRequestsCount: 1
}
Processing sent requests...
Raw sentRequests: [
  {
    from: new ObjectId('6901f85f42c5d010fa811206'),
    fromName: 'sayantan2',
    to: new ObjectId('6905adf16a22b7843b006183'),
    toName: 'sayantan3',
    status: 'pending',
    _id: new ObjectId('6905cdce14ad0d0f020b3985'),
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
Filtering sent request: { status: 'pending', to: new ObjectId('6905adf16a22b7843b006183') }
Mapping sent request: {
  from: new ObjectId('6901f85f42c5d010fa811206'),
  fromName: 'sayantan2',
  to: new ObjectId('6905adf16a22b7843b006183'),
  toName: 'sayantan3',
  status: 'pending',
  _id: new ObjectId('6905cdce14ad0d0f020b3985'),
  createdAt: 2025-11-01T09:07:26.707Z,
  updatedAt: 2025-11-01T09:07:26.707Z
}
Processed sentRequests: [
  {
    id: '6905cdce14ad0d0f020b3985',
    to: {
      id: '6905adf16a22b7843b006183',
      username: 'sayantan3',
      email: '',
      profilePicture: null
    },
    status: 'pending',
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
Populating recipient details...
Looking up recipient: 6905adf16a22b7843b006183
Found recipient: sayantan3
Final populated sent requests: [
  {
    id: '6905cdce14ad0d0f020b3985',
    to: {
      id: '6905adf16a22b7843b006183',
      username: 'sayantan3',
      email: 'sayantan3@gmail.com',
      profilePicture: undefined
    },
    status: 'pending',
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
=== FRIEND REQUEST GET END (sent) ===
 GET /api/friends/request?type=sent 200 in 138ms
 GET /api/socket-health 200 in 60ms
 GET /api/socket-health 200 in 165ms
 GET /socket.io?EIO=4&transport=polling&t=znrd3nhf 404 in 290ms
 GET /socket.io?EIO=4&transport=polling&t=znrhq05x 404 in 144ms
 GET /api/socket-health 200 in 42ms
 GET /api/socket-health 200 in 161ms
 GET /socket.io?EIO=4&transport=polling&t=znswhdch 404 in 289ms
 GET /socket.io?EIO=4&transport=polling&t=znt14t4p 404 in 147ms
 GET /api/socket-health 200 in 37ms
 GET /api/socket-health 200 in 146ms
 GET /socket.io?EIO=4&transport=polling&t=znugxout 404 in 256ms
 GET /socket.io?EIO=4&transport=polling&t=znul1iso 404 in 128ms
 GET /api/socket-health 200 in 45ms
 GET /api/socket-health 200 in 55ms
 GET /socket.io?EIO=4&transport=polling&t=znvzlsa7 404 in 266ms
 GET /socket.io?EIO=4&transport=polling&t=znw17u0t 404 in 129ms
 GET /api/socket-health 200 in 43ms
 GET /api/socket-health 200 in 143ms
 GET /socket.io?EIO=4&transport=polling&t=znxj1coz 404 in 270ms
 GET /socket.io?EIO=4&transport=polling&t=znxn2xpj 404 in 144ms
 GET /?id=8fdb0b8a-7c24-4299-912c-c65fb70e3cc6&vscodeBrowserReqId=1762407069524 200 in 635ms
 GET /api/socket-health 200 in 76ms
 GET /api/socket-health 200 in 74ms
 GET /socket.io?EIO=4&transport=polling&t=znz3ofic 404 in 557ms
 GET /socket.io?EIO=4&transport=polling&t=znz5tlwt 404 in 307ms
 GET /api/socket-health 200 in 126ms
 GET /api/socket-health 200 in 179ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
 GET /socket.io?EIO=4&transport=polling&t=zo1ny8yx 404 in 928ms
 GET /socket.io?EIO=4&transport=polling&t=zo1bq29g 404 in 944ms
 POST /api/users/heartbeat 200 in 343ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
 GET /api/socket-health 200 in 235ms
 GET /api/conversations 200 in 304ms
 GET /api/socket-health 200 in 672ms
 GET /socket.io?EIO=4&transport=polling&t=zo3v6wmy 404 in 695ms
 GET /socket.io?EIO=4&transport=polling&t=zo4gyusu 404 in 658ms
 GET /api/socket-health 200 in 256ms
 GET /api/socket-health 200 in 149ms
 GET /socket.io?EIO=4&transport=polling&t=zo8kgkpe 404 in 1138ms
 GET /socket.io?EIO=4&transport=polling&t=zo8syy7f 404 in 679ms
 GET /api/socket-health 200 in 430ms
 GET /api/socket-health 200 in 151ms
 GET /socket.io?EIO=4&transport=polling&t=zobfi457 404 in 1764ms
=== FRIEND REQUEST GET START ===
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
Request type: received User: sayantan2@gmail.com
âœ… Database connected
âœ… Current user found: {
  id: new ObjectId('6901f85f42c5d010fa811206'),
  email: 'sayantan2@gmail.com',
  friendRequestsCount: 0,
  sentRequestsCount: 1
}
Processing received requests...
Raw friendRequests: []
Processed receivedRequests: []
Populating sender details...
Final populated requests: []
=== FRIEND REQUEST GET END (received) ===
 GET /api/friends/request?type=received 200 in 776ms
 GET /socket.io?EIO=4&transport=polling&t=zobi6zo3 404 in 898ms
=== FRIEND REQUEST GET START ===
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
Request type: sent User: sayantan2@gmail.com
âœ… Database connected
 GET /api/socket-health 200 in 238ms
âœ… Current user found: {
  id: new ObjectId('6901f85f42c5d010fa811206'),
  email: 'sayantan2@gmail.com',
  friendRequestsCount: 0,
  sentRequestsCount: 1
}
Processing sent requests...
Raw sentRequests: [
  {
    from: new ObjectId('6901f85f42c5d010fa811206'),
    fromName: 'sayantan2',
    to: new ObjectId('6905adf16a22b7843b006183'),
    toName: 'sayantan3',
    status: 'pending',
    _id: new ObjectId('6905cdce14ad0d0f020b3985'),
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
Filtering sent request: { status: 'pending', to: new ObjectId('6905adf16a22b7843b006183') }
Mapping sent request: {
  from: new ObjectId('6901f85f42c5d010fa811206'),
  fromName: 'sayantan2',
  to: new ObjectId('6905adf16a22b7843b006183'),
  toName: 'sayantan3',
  status: 'pending',
  _id: new ObjectId('6905cdce14ad0d0f020b3985'),
  createdAt: 2025-11-01T09:07:26.707Z,
  updatedAt: 2025-11-01T09:07:26.707Z
}
Processed sentRequests: [
  {
    id: '6905cdce14ad0d0f020b3985',
    to: {
      id: '6905adf16a22b7843b006183',
      username: 'sayantan3',
      email: '',
      profilePicture: null
    },
    status: 'pending',
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
Populating recipient details...
Looking up recipient: 6905adf16a22b7843b006183
Found recipient: sayantan3
Final populated sent requests: [
  {
    id: '6905cdce14ad0d0f020b3985',
    to: {
      id: '6905adf16a22b7843b006183',
      username: 'sayantan3',
      email: 'sayantan3@gmail.com',
      profilePicture: undefined
    },
    status: 'pending',
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
=== FRIEND REQUEST GET END (sent) ===
 GET /api/friends/request?type=sent 200 in 325ms
 GET /socket.io?EIO=4&transport=polling&t=zoghtm3d 404 in 520ms
 GET /api/socket-health 200 in 82ms
 GET /socket.io?EIO=4&transport=polling&t=zohnsdh5 404 in 318ms
 GET /api/socket-health 200 in 128ms
 GET /socket.io?EIO=4&transport=polling&t=zoihdnij 404 in 321ms
 GET /api/socket-health 200 in 106ms
 GET /socket.io?EIO=4&transport=polling&t=zoj77cj1 404 in 541ms
 GET /api/socket-health 200 in 245ms
 GET /socket.io?EIO=4&transport=polling&t=zokql8k0 404 in 531ms
 GET /api/socket-health 200 in 122ms
 GET /socket.io?EIO=4&transport=polling&t=zolle715 404 in 394ms
 GET /api/socket-health 200 in 128ms
 GET /socket.io?EIO=4&transport=polling&t=zomb9527 404 in 329ms
 GET /api/socket-health 200 in 113ms
 GET /socket.io?EIO=4&transport=polling&t=zon1up3g 404 in 341ms
 GET /api/socket-health 200 in 80ms
 GET /socket.io?EIO=4&transport=polling&t=zony2088 404 in 266ms
 GET /api/socket-health 200 in 75ms
 GET /socket.io?EIO=4&transport=polling&t=zoolt692 404 in 287ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
 GET /api/socket-health 200 in 122ms
 POST /api/users/heartbeat 200 in 443ms
 GET /socket.io?EIO=4&transport=polling&t=zope894s 404 in 269ms
 GET /api/socket-health 200 in 57ms
 GET /socket.io?EIO=4&transport=polling&t=zoq3g0hz 404 in 217ms
 GET /api/socket-health 200 in 57ms
 GET /socket.io?EIO=4&transport=polling&t=zoqvbg1e 404 in 186ms
 GET /api/socket-health 200 in 91ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
 GET /api/conversations 200 in 308ms
 GET /socket.io?EIO=4&transport=polling&t=zornng90 404 in 196ms
 GET /api/socket-health 200 in 154ms
 GET /socket.io?EIO=4&transport=polling&t=zosi9s92 404 in 227ms
 GET /api/socket-health 200 in 63ms
 GET /socket.io?EIO=4&transport=polling&t=zot6hjkm 404 in 156ms
 GET /api/socket-health 200 in 44ms
 GET /socket.io?EIO=4&transport=polling&t=zotxl8n0 404 in 164ms
 GET /api/socket-health 200 in 70ms
 GET /socket.io?EIO=4&transport=polling&t=zouqhefe 404 in 195ms
 GET /api/socket-health 200 in 40ms
 GET /socket.io?EIO=4&transport=polling&t=zovh92we 404 in 129ms
 GET /api/socket-health 200 in 59ms
 GET /socket.io?EIO=4&transport=polling&t=zow9oxb8 404 in 173ms
 GET /api/socket-health 200 in 132ms
 GET /socket.io?EIO=4&transport=polling&t=zox3y36u 404 in 345ms
 GET /api/socket-health 200 in 108ms
 GET /socket.io?EIO=4&transport=polling&t=zoxuq0mc 404 in 313ms
 GET /api/socket-health 200 in 115ms
 GET /socket.io?EIO=4&transport=polling&t=zoymkns5 404 in 360ms
 GET /api/socket-health 200 in 56ms
 GET /socket.io?EIO=4&transport=polling&t=zozcs467 404 in 210ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
=== FRIEND REQUEST GET START ===
 GET /api/socket-health 200 in 146ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
Request type: received User: sayantan2@gmail.com
âœ… Database connected
 GET /api/friends 200 in 321ms
 GET /socket.io?EIO=4&transport=polling&t=zp07majb 404 in 249ms
âœ… Current user found: {
  id: new ObjectId('6901f85f42c5d010fa811206'),
  email: 'sayantan2@gmail.com',
  friendRequestsCount: 0,
  sentRequestsCount: 1
}
Processing received requests...
Raw friendRequests: []
Processed receivedRequests: []
Populating sender details...
Final populated requests: []
=== FRIEND REQUEST GET END (received) ===
 GET /api/friends/request?type=received 200 in 639ms
=== FRIEND REQUEST GET START ===
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
Request type: sent User: sayantan2@gmail.com
âœ… Database connected
âœ… Current user found: {
  id: new ObjectId('6901f85f42c5d010fa811206'),
  email: 'sayantan2@gmail.com',
  friendRequestsCount: 0,
  sentRequestsCount: 1
}
Processing sent requests...
Raw sentRequests: [
  {
    from: new ObjectId('6901f85f42c5d010fa811206'),
    fromName: 'sayantan2',
    to: new ObjectId('6905adf16a22b7843b006183'),
    toName: 'sayantan3',
    status: 'pending',
    _id: new ObjectId('6905cdce14ad0d0f020b3985'),
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
Filtering sent request: { status: 'pending', to: new ObjectId('6905adf16a22b7843b006183') }
Mapping sent request: {
  from: new ObjectId('6901f85f42c5d010fa811206'),
  fromName: 'sayantan2',
  to: new ObjectId('6905adf16a22b7843b006183'),
  toName: 'sayantan3',
  status: 'pending',
  _id: new ObjectId('6905cdce14ad0d0f020b3985'),
  createdAt: 2025-11-01T09:07:26.707Z,
  updatedAt: 2025-11-01T09:07:26.707Z
}
Processed sentRequests: [
  {
    id: '6905cdce14ad0d0f020b3985',
    to: {
      id: '6905adf16a22b7843b006183',
      username: 'sayantan3',
      email: '',
      profilePicture: null
    },
    status: 'pending',
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
Populating recipient details...
Looking up recipient: 6905adf16a22b7843b006183
Found recipient: sayantan3
Final populated sent requests: [
  {
    id: '6905cdce14ad0d0f020b3985',
    to: {
      id: '6905adf16a22b7843b006183',
      username: 'sayantan3',
      email: 'sayantan3@gmail.com',
      profilePicture: undefined
    },
    status: 'pending',
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
=== FRIEND REQUEST GET END (sent) ===
 GET /api/friends/request?type=sent 200 in 174ms
 GET /api/socket-health 200 in 785ms
 GET /api/socket-health 200 in 42ms
 GET /socket.io?EIO=4&transport=polling&t=zp1gx734 404 in 229ms
 GET /socket.io?EIO=4&transport=polling&t=zp1nqa1g 404 in 164ms
 GET /api/socket-health 200 in 52ms
 GET /api/socket-health 200 in 201ms
 GET /socket.io?EIO=4&transport=polling&t=zp37cpb3 404 in 348ms
 GET /socket.io?EIO=4&transport=polling&t=zp3d0q28 404 in 173ms
 GET /api/socket-health 200 in 33ms
 GET /api/socket-health 200 in 48ms
 GET /socket.io?EIO=4&transport=polling&t=zp4rxjoz 404 in 241ms
 GET /socket.io?EIO=4&transport=polling&t=zp4tcs71 404 in 122ms
 GET /api/socket-health 200 in 39ms
 GET /api/socket-health 200 in 55ms
 GET /socket.io?EIO=4&transport=polling&t=zp6aarjd 404 in 919ms
 GET /socket.io?EIO=4&transport=polling&t=zp6bx3oy 404 in 751ms
 GET /api/socket-health 200 in 45ms
 GET /api/socket-health 200 in 214ms
 GET /socket.io?EIO=4&transport=polling&t=zp8likws 404 in 374ms
 GET /socket.io?EIO=4&transport=polling&t=zp8rizhy 404 in 185ms
 GET /api/socket-health 200 in 51ms
 GET /api/socket-health 200 in 82ms
 GET /socket.io?EIO=4&transport=polling&t=zpa5d5cr 404 in 403ms
 GET /socket.io?EIO=4&transport=polling&t=zpa7qdep 404 in 214ms
 GET /api/socket-health 200 in 39ms
 GET /api/socket-health 200 in 43ms
 GET /socket.io?EIO=4&transport=polling&t=zpboe7es 404 in 298ms
 GET /socket.io?EIO=4&transport=polling&t=zpbpnhky 404 in 150ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
 POST /api/users/heartbeat 200 in 197ms
 GET /api/socket-health 200 in 104ms
 GET /api/socket-health 200 in 105ms
 GET /socket.io?EIO=4&transport=polling&t=zpdaw9dr 404 in 501ms
 GET /socket.io?EIO=4&transport=polling&t=zpde0zf2 404 in 222ms
 GET /api/socket-health 200 in 49ms
 GET /api/socket-health 200 in 52ms
 GET /socket.io?EIO=4&transport=polling&t=zperyr8q 404 in 341ms
 GET /socket.io?EIO=4&transport=polling&t=zpetg586 404 in 164ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
 GET /api/conversations 200 in 163ms
 GET /api/socket-health 200 in 45ms
 GET /api/socket-health 200 in 66ms
 GET /socket.io?EIO=4&transport=polling&t=zpgbl5o3 404 in 868ms
 GET /socket.io?EIO=4&transport=polling&t=zpgdkish 404 in 663ms
 GET /api/socket-health 200 in 104ms
 GET /socket.io?EIO=4&transport=polling&t=zpip79la 404 in 132ms
 GET /api/socket-health 200 in 49ms
 GET /api/socket-health 200 in 259ms
 GET /socket.io?EIO=4&transport=polling&t=zpjjulq5 404 in 410ms
 GET /socket.io?EIO=4&transport=polling&t=zpkt9qyw 404 in 172ms
 GET /api/socket-health 200 in 41ms
 GET /api/socket-health 200 in 255ms
 GET /socket.io?EIO=4&transport=polling&t=zpmhftlb 404 in 243ms
 GET /socket.io?EIO=4&transport=polling&t=zpmol5tp 404 in 136ms
 GET /api/socket-health 200 in 61ms
=== FRIEND REQUEST GET START ===
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
Request type: received User: sayantan2@gmail.com
âœ… Database connected
âœ… Current user found: {
  id: new ObjectId('6901f85f42c5d010fa811206'),
  email: 'sayantan2@gmail.com',
  friendRequestsCount: 0,
  sentRequestsCount: 1
}
Processing received requests...
Raw friendRequests: []
Processed receivedRequests: []
Populating sender details...
Final populated requests: []
=== FRIEND REQUEST GET END (received) ===
 GET /api/friends/request?type=received 200 in 213ms
 GET /api/socket-health 200 in 185ms
=== FRIEND REQUEST GET START ===
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
Request type: sent User: sayantan2@gmail.com
âœ… Database connected
 GET /socket.io?EIO=4&transport=polling&t=zpo1p4jq 404 in 380ms
 GET /socket.io?EIO=4&transport=polling&t=zpo6yvrt 404 in 177ms
âœ… Current user found: {
  id: new ObjectId('6901f85f42c5d010fa811206'),
  email: 'sayantan2@gmail.com',
  friendRequestsCount: 0,
  sentRequestsCount: 1
}
Processing sent requests...
Raw sentRequests: [
  {
    from: new ObjectId('6901f85f42c5d010fa811206'),
    fromName: 'sayantan2',
    to: new ObjectId('6905adf16a22b7843b006183'),
    toName: 'sayantan3',
    status: 'pending',
    _id: new ObjectId('6905cdce14ad0d0f020b3985'),
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
Filtering sent request: { status: 'pending', to: new ObjectId('6905adf16a22b7843b006183') }
Mapping sent request: {
  from: new ObjectId('6901f85f42c5d010fa811206'),
  fromName: 'sayantan2',
  to: new ObjectId('6905adf16a22b7843b006183'),
  toName: 'sayantan3',
  status: 'pending',
  _id: new ObjectId('6905cdce14ad0d0f020b3985'),
  createdAt: 2025-11-01T09:07:26.707Z,
  updatedAt: 2025-11-01T09:07:26.707Z
}
Processed sentRequests: [
  {
    id: '6905cdce14ad0d0f020b3985',
    to: {
      id: '6905adf16a22b7843b006183',
      username: 'sayantan3',
      email: '',
      profilePicture: null
    },
    status: 'pending',
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
Populating recipient details...
Looking up recipient: 6905adf16a22b7843b006183
Found recipient: sayantan3
Final populated sent requests: [
  {
    id: '6905cdce14ad0d0f020b3985',
    to: {
      id: '6905adf16a22b7843b006183',
      username: 'sayantan3',
      email: 'sayantan3@gmail.com',
      profilePicture: undefined
    },
    status: 'pending',
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
=== FRIEND REQUEST GET END (sent) ===
 GET /api/friends/request?type=sent 200 in 288ms
 GET /api/socket-health 200 in 50ms
 GET /api/socket-health 200 in 346ms
 GET /socket.io?EIO=4&transport=polling&t=zppkzwxc 404 in 494ms
 GET /socket.io?EIO=4&transport=polling&t=zppznf4k 404 in 244ms
 GET /api/socket-health 200 in 65ms
 GET /socket.io?EIO=4&transport=polling&t=zpr4pxg0 404 in 513ms
 GET /api/socket-health 200 in 213ms
 GET /socket.io?EIO=4&transport=polling&t=zps1c9mi 404 in 297ms
 GET /api/socket-health 200 in 48ms
 GET /socket.io?EIO=4&transport=polling&t=zpsoae5u 404 in 187ms
 GET /api/socket-health 200 in 55ms
 GET /socket.io?EIO=4&transport=polling&t=zptfpmus 404 in 185ms
 GET /api/socket-health 200 in 36ms
 GET /socket.io?EIO=4&transport=polling&t=zpu7hi4y 404 in 171ms
 GET /api/socket-health 200 in 41ms
 GET /socket.io?EIO=4&transport=polling&t=zpuywikt 404 in 175ms
 GET /api/socket-health 200 in 31ms
 GET /socket.io?EIO=4&transport=polling&t=zpvqgu77 404 in 132ms
 GET /api/socket-health 200 in 41ms
 GET /socket.io?EIO=4&transport=polling&t=zpwiqcyh 404 in 125ms
 GET /api/socket-health 200 in 45ms
 GET /socket.io?EIO=4&transport=polling&t=zpxapk9j 404 in 193ms
 GET /api/socket-health 200 in 85ms
 GET /socket.io?EIO=4&transport=polling&t=zpy4d57d 404 in 340ms
 GET /api/socket-health 200 in 42ms
 GET /socket.io?EIO=4&transport=polling&t=zpyub50r 404 in 172ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
 GET /api/socket-health 200 in 103ms
 POST /api/users/heartbeat 200 in 503ms
 GET /socket.io?EIO=4&transport=polling&t=zpzo1n7y 404 in 373ms
 GET /api/socket-health 200 in 57ms
 GET /socket.io?EIO=4&transport=polling&t=zq0eemdm 404 in 401ms
 GET /api/socket-health 200 in 51ms
 GET /socket.io?EIO=4&transport=polling&t=zq15tc0k 404 in 318ms
 GET /api/socket-health 200 in 51ms
 GET /socket.io?EIO=4&transport=polling&t=zq1xgjac 404 in 304ms
 GET /api/socket-health 200 in 69ms
 GET /socket.io?EIO=4&transport=polling&t=zq2q5zzt 404 in 201ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
 GET /api/socket-health 200 in 352ms
 GET /api/conversations 200 in 602ms
 GET /socket.io?EIO=4&transport=polling&t=zq3pbofb 404 in 279ms
 GET /api/socket-health 200 in 70ms
 GET /socket.io?EIO=4&transport=polling&t=zq4ew7pm 404 in 370ms
 GET /api/socket-health 200 in 49ms
 GET /socket.io?EIO=4&transport=polling&t=zq530eph 404 in 251ms
 GET /api/socket-health 200 in 47ms
 GET /socket.io?EIO=4&transport=polling&t=zq5serpl 404 in 227ms
 GET /?id=ba1c0c2a-3f53-4849-b32e-caceb4fd41e9&vscodeBrowserReqId=1762407173451 200 in 414ms
 GET /api/socket-health 200 in 135ms
 GET /socket.io?EIO=4&transport=polling&t=zq6p7zn2 404 in 403ms
 GET /api/socket-health 200 in 63ms
 GET /socket.io?EIO=4&transport=polling&t=zq7cfsut 404 in 274ms
 GET /api/socket-health 200 in 61ms
 GET /socket.io?EIO=4&transport=polling&t=zq840x8l 404 in 208ms
 GET /api/socket-health 200 in 47ms
 GET /socket.io?EIO=4&transport=polling&t=zq8vepfc 404 in 210ms
 GET /api/socket-health 200 in 495ms
 GET /socket.io?EIO=4&transport=polling&t=zqa5j6q6 404 in 301ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
=== FRIEND REQUEST GET START ===
 GET /api/socket-health 200 in 695ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
Request type: received User: sayantan2@gmail.com
âœ… Database connected
 GET /api/friends 200 in 757ms
âœ… Current user found: {
  id: new ObjectId('6901f85f42c5d010fa811206'),
  email: 'sayantan2@gmail.com',
  friendRequestsCount: 0,
  sentRequestsCount: 1
}
Processing received requests...
Raw friendRequests: []
Processed receivedRequests: []
Populating sender details...
Final populated requests: []
=== FRIEND REQUEST GET END (received) ===
 GET /api/friends/request?type=received 200 in 1192ms
=== FRIEND REQUEST GET START ===
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
Request type: sent User: sayantan2@gmail.com
âœ… Database connected
 GET /socket.io?EIO=4&transport=polling&t=zqbbimoq 404 in 211ms
âœ… Current user found: {
  id: new ObjectId('6901f85f42c5d010fa811206'),
  email: 'sayantan2@gmail.com',
  friendRequestsCount: 0,
  sentRequestsCount: 1
}
Processing sent requests...
Raw sentRequests: [
  {
    from: new ObjectId('6901f85f42c5d010fa811206'),
    fromName: 'sayantan2',
    to: new ObjectId('6905adf16a22b7843b006183'),
    toName: 'sayantan3',
    status: 'pending',
    _id: new ObjectId('6905cdce14ad0d0f020b3985'),
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
Filtering sent request: { status: 'pending', to: new ObjectId('6905adf16a22b7843b006183') }
Mapping sent request: {
  from: new ObjectId('6901f85f42c5d010fa811206'),
  fromName: 'sayantan2',
  to: new ObjectId('6905adf16a22b7843b006183'),
  toName: 'sayantan3',
  status: 'pending',
  _id: new ObjectId('6905cdce14ad0d0f020b3985'),
  createdAt: 2025-11-01T09:07:26.707Z,
  updatedAt: 2025-11-01T09:07:26.707Z
}
Processed sentRequests: [
  {
    id: '6905cdce14ad0d0f020b3985',
    to: {
      id: '6905adf16a22b7843b006183',
      username: 'sayantan3',
      email: '',
      profilePicture: null
    },
    status: 'pending',
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
Populating recipient details...
Looking up recipient: 6905adf16a22b7843b006183
Found recipient: sayantan3
Final populated sent requests: [
  {
    id: '6905cdce14ad0d0f020b3985',
    to: {
      id: '6905adf16a22b7843b006183',
      username: 'sayantan3',
      email: 'sayantan3@gmail.com',
      profilePicture: undefined
    },
    status: 'pending',
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
=== FRIEND REQUEST GET END (sent) ===
 GET /api/friends/request?type=sent 200 in 302ms
 GET /api/socket-health 200 in 78ms
 GET /socket.io?EIO=4&transport=polling&t=zqbyw6u4 404 in 527ms
 GET /api/socket-health 200 in 58ms
 GET /socket.io?EIO=4&transport=polling&t=zqcr4ex4 404 in 337ms
 GET /api/socket-health 200 in 70ms
 GET /socket.io?EIO=4&transport=polling&t=zqdj4thx 404 in 449ms
 GET /api/socket-health 200 in 65ms
 GET /socket.io?EIO=4&transport=polling&t=zqei2hp6 404 in 667ms
 GET /api/socket-health 200 in 124ms
 GET /api/socket-health 200 in 150ms
 GET /socket.io?EIO=4&transport=polling&t=zqgb7qu0 404 in 758ms
 GET /socket.io?EIO=4&transport=polling&t=zqgwlbdj 404 in 588ms
 GET /api/socket-health 200 in 244ms
 GET /socket.io?EIO=4&transport=polling&t=zqid722w 404 in 280ms
 GET /api/socket-health 200 in 40ms
 GET /socket.io?EIO=4&transport=polling&t=zqivygc2 404 in 193ms
 GET /api/socket-health 200 in 62ms
 GET /socket.io?EIO=4&transport=polling&t=zqjohrwq 404 in 182ms
 GET /api/socket-health 200 in 50ms
 GET /socket.io?EIO=4&transport=polling&t=zqkfxeom 404 in 278ms
 GET /api/socket-health 200 in 55ms
 GET /socket.io?EIO=4&transport=polling&t=zql7unx9 404 in 262ms
 GET /api/socket-health 200 in 64ms
 GET /socket.io?EIO=4&transport=polling&t=zqm0sta9 404 in 414ms
 GET /api/socket-health 200 in 67ms
 GET /socket.io?EIO=4&transport=polling&t=zqmw2t6x 404 in 453ms
 GET /api/socket-health 200 in 79ms
 GET /socket.io?EIO=4&transport=polling&t=zqnk6c6v 404 in 466ms
 GET /api/socket-health 200 in 60ms
 GET /api/socket-health 200 in 195ms
 GET /socket.io?EIO=4&transport=polling&t=zqor6br0 404 in 823ms
 GET /socket.io?EIO=4&transport=polling&t=zqpfalo8 404 in 804ms
 GET /api/socket-health 200 in 62ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
 GET /socket.io?EIO=4&transport=polling&t=zqr2d99m 404 in 834ms
 GET /api/conversations 200 in 281ms
 GET /api/socket-health 200 in 41ms
 GET /socket.io?EIO=4&transport=polling&t=zqs5v1tc 404 in 251ms
 GET /api/socket-health 200 in 140ms
 GET /socket.io?EIO=4&transport=polling&t=zqt0dnoa 404 in 554ms
 GET /api/socket-health 200 in 153ms
 GET /api/socket-health 200 in 85ms
 GET /socket.io?EIO=4&transport=polling&t=zqu8zz6j 404 in 298ms
 GET /socket.io?EIO=4&transport=polling&t=zquj52la 404 in 355ms
 GET /api/socket-health 200 in 56ms
 GET /api/socket-health 200 in 88ms
 GET /socket.io?EIO=4&transport=polling&t=zqw0vjf5 404 in 388ms
 GET /socket.io?EIO=4&transport=polling&t=zqw3bazz 404 in 171ms
 GET /api/socket-health 200 in 48ms
 GET /api/socket-health 200 in 152ms
 GET /socket.io?EIO=4&transport=polling&t=zqxk8mrd 404 in 264ms
 GET /socket.io?EIO=4&transport=polling&t=zqxoj68z 404 in 124ms
 GET /api/socket-health 200 in 50ms
=== FRIEND REQUEST GET START ===
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
Request type: received User: sayantan2@gmail.com
âœ… Database connected
âœ… Current user found: {
  id: new ObjectId('6901f85f42c5d010fa811206'),
  email: 'sayantan2@gmail.com',
  friendRequestsCount: 0,
  sentRequestsCount: 1
}
Processing received requests...
Raw friendRequests: []
Processed receivedRequests: []
Populating sender details...
Final populated requests: []
=== FRIEND REQUEST GET END (received) ===
 GET /api/friends/request?type=received 200 in 179ms
 GET /api/socket-health 200 in 140ms
=== FRIEND REQUEST GET START ===
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
Request type: sent User: sayantan2@gmail.com
âœ… Database connected
âœ… Current user found: {
  id: new ObjectId('6901f85f42c5d010fa811206'),
  email: 'sayantan2@gmail.com',
  friendRequestsCount: 0,
  sentRequestsCount: 1
}
Processing sent requests...
Raw sentRequests: [
  {
    from: new ObjectId('6901f85f42c5d010fa811206'),
    fromName: 'sayantan2',
    to: new ObjectId('6905adf16a22b7843b006183'),
    toName: 'sayantan3',
    status: 'pending',
    _id: new ObjectId('6905cdce14ad0d0f020b3985'),
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
Filtering sent request: { status: 'pending', to: new ObjectId('6905adf16a22b7843b006183') }
Mapping sent request: {
  from: new ObjectId('6901f85f42c5d010fa811206'),
  fromName: 'sayantan2',
  to: new ObjectId('6905adf16a22b7843b006183'),
  toName: 'sayantan3',
  status: 'pending',
  _id: new ObjectId('6905cdce14ad0d0f020b3985'),
  createdAt: 2025-11-01T09:07:26.707Z,
  updatedAt: 2025-11-01T09:07:26.707Z
}
Processed sentRequests: [
  {
    id: '6905cdce14ad0d0f020b3985',
    to: {
      id: '6905adf16a22b7843b006183',
      username: 'sayantan3',
      email: '',
      profilePicture: null
    },
    status: 'pending',
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
Populating recipient details...
Looking up recipient: 6905adf16a22b7843b006183
 GET /socket.io?EIO=4&transport=polling&t=zqz3ohh5 404 in 256ms
 GET /socket.io?EIO=4&transport=polling&t=zqz7uqg3 404 in 131ms
Found recipient: sayantan3
Final populated sent requests: [
  {
    id: '6905cdce14ad0d0f020b3985',
    to: {
      id: '6905adf16a22b7843b006183',
      username: 'sayantan3',
      email: 'sayantan3@gmail.com',
      profilePicture: undefined
    },
    status: 'pending',
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
=== FRIEND REQUEST GET END (sent) ===
 GET /api/friends/request?type=sent 200 in 173ms
 GET /api/socket-health 200 in 28ms
 GET /api/socket-health 200 in 118ms
 GET /socket.io?EIO=4&transport=polling&t=zr0mswuo 404 in 224ms
 GET /socket.io?EIO=4&transport=polling&t=zr0q4l40 404 in 134ms
 GET /api/socket-health 200 in 31ms
 GET /api/socket-health 200 in 43ms
 GET /socket.io?EIO=4&transport=polling&t=zr273x7p 404 in 243ms
 GET /socket.io?EIO=4&transport=polling&t=zr28c8fd 404 in 136ms
 GET /api/socket-health 200 in 35ms
 GET /api/socket-health 200 in 122ms
 GET /socket.io?EIO=4&transport=polling&t=zr3prrox 404 in 223ms
 GET /socket.io?EIO=4&transport=polling&t=zr3t7vcr 404 in 113ms
 GET /api/socket-health 200 in 26ms
 GET /api/socket-health 200 in 35ms
 GET /socket.io?EIO=4&transport=polling&t=zr593ipl 404 in 206ms
 GET /socket.io?EIO=4&transport=polling&t=zr5a4klz 404 in 108ms
 GET /api/socket-health 200 in 33ms
 GET /api/socket-health 200 in 116ms
 GET /socket.io?EIO=4&transport=polling&t=zr6t7f67 404 in 201ms
 GET /socket.io?EIO=4&transport=polling&t=zr6whqnh 404 in 99ms
 GET /api/socket-health 200 in 32ms
 GET /api/socket-health 200 in 40ms
 GET /socket.io?EIO=4&transport=polling&t=zr8ce019 404 in 244ms
 GET /socket.io?EIO=4&transport=polling&t=zr8dkn16 404 in 123ms
 GET /api/socket-health 200 in 42ms
 GET /api/socket-health 200 in 117ms
 GET /socket.io?EIO=4&transport=polling&t=zr9wjsek 404 in 220ms
 GET /socket.io?EIO=4&transport=polling&t=zr9zu2b3 404 in 117ms
 GET /api/socket-health 200 in 27ms
 GET /api/socket-health 200 in 121ms
 GET /socket.io?EIO=4&transport=polling&t=zrbfgluo 404 in 211ms
 GET /socket.io?EIO=4&transport=polling&t=zrbiv0ry 404 in 98ms
 GET /api/socket-health 200 in 34ms
 GET /api/socket-health 200 in 119ms
 GET /socket.io?EIO=4&transport=polling&t=zrcz4s6u 404 in 120ms
 GET /socket.io?EIO=4&transport=polling&t=zrd2j7zt 404 in 98ms
 GET /api/socket-health 200 in 29ms
 GET /api/socket-health 200 in 114ms
 GET /socket.io?EIO=4&transport=polling&t=zreiu9wp 404 in 200ms
 GET /socket.io?EIO=4&transport=polling&t=zrem1klx 404 in 99ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
 GET /api/conversations 200 in 162ms
 GET /api/socket-health 200 in 28ms
 GET /api/socket-health 200 in 112ms
 GET /socket.io?EIO=4&transport=polling&t=zrg2bp9k 404 in 259ms
 GET /socket.io?EIO=4&transport=polling&t=zrg5i96j 404 in 149ms
 GET /api/socket-health 200 in 28ms
 GET /api/socket-health 200 in 122ms
 GET /socket.io?EIO=4&transport=polling&t=zrhlxqe6 404 in 207ms
 GET /socket.io?EIO=4&transport=polling&t=zrhpen1j 404 in 111ms
 GET /api/socket-health 200 in 28ms
 GET /api/socket-health 200 in 113ms
 GET /socket.io?EIO=4&transport=polling&t=zrj5hmqi 404 in 211ms
 GET /socket.io?EIO=4&transport=polling&t=zrj8oeo9 404 in 112ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
=== FRIEND REQUEST GET START ===
 GET /api/socket-health 200 in 98ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
Request type: received User: sayantan2@gmail.com
âœ… Database connected
 GET /api/socket-health 200 in 128ms
 POST /api/users/heartbeat 200 in 335ms
 GET /socket.io?EIO=4&transport=polling&t=zrkr1gin 404 in 225ms
 GET /socket.io?EIO=4&transport=polling&t=zrkv0mh3 404 in 107ms
âœ… Current user found: {
  id: new ObjectId('6901f85f42c5d010fa811206'),
  email: 'sayantan2@gmail.com',
  friendRequestsCount: 0,
  sentRequestsCount: 1
}
Processing received requests...
Raw friendRequests: []
Processed receivedRequests: []
Populating sender details...
Final populated requests: []
=== FRIEND REQUEST GET END (received) ===
 GET /api/friends/request?type=received 200 in 540ms
=== FRIEND REQUEST GET START ===
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
Request type: sent User: sayantan2@gmail.com
âœ… Database connected
 GET /api/friends 200 in 602ms
âœ… Current user found: {
  id: new ObjectId('6901f85f42c5d010fa811206'),
  email: 'sayantan2@gmail.com',
  friendRequestsCount: 0,
  sentRequestsCount: 1
}
Processing sent requests...
Raw sentRequests: [
  {
    from: new ObjectId('6901f85f42c5d010fa811206'),
    fromName: 'sayantan2',
    to: new ObjectId('6905adf16a22b7843b006183'),
    toName: 'sayantan3',
    status: 'pending',
    _id: new ObjectId('6905cdce14ad0d0f020b3985'),
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
Filtering sent request: { status: 'pending', to: new ObjectId('6905adf16a22b7843b006183') }
Mapping sent request: {
  from: new ObjectId('6901f85f42c5d010fa811206'),
  fromName: 'sayantan2',
  to: new ObjectId('6905adf16a22b7843b006183'),
  toName: 'sayantan3',
  status: 'pending',
  _id: new ObjectId('6905cdce14ad0d0f020b3985'),
  createdAt: 2025-11-01T09:07:26.707Z,
  updatedAt: 2025-11-01T09:07:26.707Z
}
Processed sentRequests: [
  {
    id: '6905cdce14ad0d0f020b3985',
    to: {
      id: '6905adf16a22b7843b006183',
      username: 'sayantan3',
      email: '',
      profilePicture: null
    },
    status: 'pending',
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
Populating recipient details...
Looking up recipient: 6905adf16a22b7843b006183
Found recipient: sayantan3
Final populated sent requests: [
  {
    id: '6905cdce14ad0d0f020b3985',
    to: {
      id: '6905adf16a22b7843b006183',
      username: 'sayantan3',
      email: 'sayantan3@gmail.com',
      profilePicture: undefined
    },
    status: 'pending',
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
=== FRIEND REQUEST GET END (sent) ===
 GET /api/friends/request?type=sent 200 in 126ms
 GET /api/socket-health 200 in 33ms
 GET /api/socket-health 200 in 118ms
 GET /socket.io?EIO=4&transport=polling&t=zrm8c9k4 404 in 263ms
 GET /socket.io?EIO=4&transport=polling&t=zrmbncft 404 in 156ms
 GET /api/socket-health 200 in 32ms
 GET /api/socket-health 200 in 111ms
 GET /socket.io?EIO=4&transport=polling&t=zrns8iul 404 in 201ms
 GET /socket.io?EIO=4&transport=polling&t=zrnve3w9 404 in 106ms
 GET /api/socket-health 200 in 35ms
 GET /api/socket-health 200 in 126ms
 GET /socket.io?EIO=4&transport=polling&t=zrpcgaoj 404 in 216ms
 GET /socket.io?EIO=4&transport=polling&t=zrpfzpki 404 in 97ms
 GET /api/socket-health 200 in 42ms
 GET /api/socket-health 200 in 40ms
 GET /socket.io?EIO=4&transport=polling&t=zrqvlt6l 404 in 227ms
 GET /socket.io?EIO=4&transport=polling&t=zrqwvr9z 404 in 110ms
 GET /api/socket-health 200 in 30ms
 GET /api/socket-health 200 in 123ms
 GET /socket.io?EIO=4&transport=polling&t=zrsew60t 404 in 217ms
 GET /socket.io?EIO=4&transport=polling&t=zrsidx6w 404 in 114ms
 GET /api/socket-health 200 in 29ms
 GET /api/socket-health 200 in 134ms
 GET /socket.io?EIO=4&transport=polling&t=zrty2sb1 404 in 238ms
 GET /socket.io?EIO=4&transport=polling&t=zru1u0z9 404 in 117ms
 GET /api/socket-health 200 in 33ms
 GET /api/socket-health 200 in 38ms
 GET /socket.io?EIO=4&transport=polling&t=zrvhvxab 404 in 201ms
 GET /socket.io?EIO=4&transport=polling&t=zrvizvay 404 in 95ms
 GET /api/socket-health 200 in 32ms
 GET /api/socket-health 200 in 112ms
 GET /socket.io?EIO=4&transport=polling&t=zrx1g1od 404 in 195ms
 GET /socket.io?EIO=4&transport=polling&t=zrx4mxzw 404 in 97ms
 GET /api/socket-health 200 in 48ms
 GET /api/socket-health 200 in 149ms
 GET /socket.io?EIO=4&transport=polling&t=zrylh1o1 404 in 241ms
 GET /socket.io?EIO=4&transport=polling&t=zrypo0to 404 in 121ms
 GET /api/socket-health 200 in 27ms
 GET /api/socket-health 200 in 114ms
 GET /socket.io?EIO=4&transport=polling&t=zs04e7w7 404 in 219ms
 GET /socket.io?EIO=4&transport=polling&t=zs07mxvl 404 in 117ms
 GET /api/socket-health 200 in 30ms
 GET /api/socket-health 200 in 30ms
 GET /socket.io?EIO=4&transport=polling&t=zs1o4ju0 404 in 204ms
 GET /socket.io?EIO=4&transport=polling&t=zs1ozeek 404 in 107ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
 GET /api/socket-health 200 in 57ms
 GET /api/socket-health 200 in 26ms
 GET /api/conversations 200 in 256ms
 GET /socket.io?EIO=4&transport=polling&t=zs388z1n 404 in 210ms
 GET /socket.io?EIO=4&transport=polling&t=zs3900ix 404 in 108ms
 GET /api/socket-health 200 in 27ms
 GET /api/socket-health 200 in 118ms
 GET /socket.io?EIO=4&transport=polling&t=zs4r1ykb 404 in 210ms
 GET /socket.io?EIO=4&transport=polling&t=zs4uem91 404 in 97ms
 GET /api/socket-health 200 in 34ms
 GET /api/socket-health 200 in 117ms
 GET /socket.io?EIO=4&transport=polling&t=zs6ar376 404 in 212ms
 GET /socket.io?EIO=4&transport=polling&t=zs6e17pa 404 in 105ms
 GET /api/socket-health 200 in 29ms
 GET /api/socket-health 200 in 114ms
 GET /socket.io?EIO=4&transport=polling&t=zs7ud1rw 404 in 206ms
 GET /socket.io?EIO=4&transport=polling&t=zs7xkgb2 404 in 98ms
=== FRIEND REQUEST GET START ===
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
Request type: received User: sayantan2@gmail.com
âœ… Database connected
âœ… Current user found: {
  id: new ObjectId('6901f85f42c5d010fa811206'),
  email: 'sayantan2@gmail.com',
  friendRequestsCount: 0,
  sentRequestsCount: 1
}
Processing received requests...
Raw friendRequests: []
Processed receivedRequests: []
Populating sender details...
Final populated requests: []
=== FRIEND REQUEST GET END (received) ===
 GET /api/friends/request?type=received 200 in 89ms
=== FRIEND REQUEST GET START ===
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
Request type: sent User: sayantan2@gmail.com
âœ… Database connected
âœ… Current user found: {
  id: new ObjectId('6901f85f42c5d010fa811206'),
  email: 'sayantan2@gmail.com',
  friendRequestsCount: 0,
  sentRequestsCount: 1
}
Processing sent requests...
Raw sentRequests: [
  {
    from: new ObjectId('6901f85f42c5d010fa811206'),
    fromName: 'sayantan2',
    to: new ObjectId('6905adf16a22b7843b006183'),
    toName: 'sayantan3',
    status: 'pending',
    _id: new ObjectId('6905cdce14ad0d0f020b3985'),
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
Filtering sent request: { status: 'pending', to: new ObjectId('6905adf16a22b7843b006183') }
Mapping sent request: {
  from: new ObjectId('6901f85f42c5d010fa811206'),
  fromName: 'sayantan2',
  to: new ObjectId('6905adf16a22b7843b006183'),
  toName: 'sayantan3',
  status: 'pending',
  _id: new ObjectId('6905cdce14ad0d0f020b3985'),
  createdAt: 2025-11-01T09:07:26.707Z,
  updatedAt: 2025-11-01T09:07:26.707Z
}
Processed sentRequests: [
  {
    id: '6905cdce14ad0d0f020b3985',
    to: {
      id: '6905adf16a22b7843b006183',
      username: 'sayantan3',
      email: '',
      profilePicture: null
    },
    status: 'pending',
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
Populating recipient details...
Looking up recipient: 6905adf16a22b7843b006183
Found recipient: sayantan3
Final populated sent requests: [
  {
    id: '6905cdce14ad0d0f020b3985',
    to: {
      id: '6905adf16a22b7843b006183',
      username: 'sayantan3',
      email: 'sayantan3@gmail.com',
      profilePicture: undefined
    },
    status: 'pending',
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
=== FRIEND REQUEST GET END (sent) ===
 GET /api/friends/request?type=sent 200 in 130ms
 GET /api/socket-health 200 in 36ms
 GET /api/socket-health 200 in 117ms
 GET /socket.io?EIO=4&transport=polling&t=zs9dzy1r 404 in 211ms
 GET /socket.io?EIO=4&transport=polling&t=zs9hahcn 404 in 105ms
 GET /api/socket-health 200 in 30ms
 GET /api/socket-health 200 in 117ms
 GET /socket.io?EIO=4&transport=polling&t=zsaxfuzo 404 in 206ms
 GET /socket.io?EIO=4&transport=polling&t=zsb0qspn 404 in 103ms
 GET /api/socket-health 200 in 35ms
 GET /api/socket-health 200 in 37ms
 GET /socket.io?EIO=4&transport=polling&t=zsciistz 404 in 536ms
 GET /socket.io?EIO=4&transport=polling&t=zscjl4lv 404 in 180ms
 GET /api/socket-health 200 in 33ms
 GET /api/socket-health 200 in 131ms
 GET /socket.io?EIO=4&transport=polling&t=zse0dupd 404 in 208ms
 GET /socket.io?EIO=4&transport=polling&t=zse423lp 404 in 99ms
 GET /api/socket-health 200 in 38ms
 GET /api/socket-health 200 in 44ms
 GET /socket.io?EIO=4&transport=polling&t=zsfkfufq 404 in 269ms
 GET /socket.io?EIO=4&transport=polling&t=zsflok64 404 in 136ms
 GET /api/socket-health 200 in 43ms
 GET /api/socket-health 200 in 64ms
 GET /socket.io?EIO=4&transport=polling&t=zsh4mzrl 404 in 487ms
 GET /socket.io?EIO=4&transport=polling&t=zsh6bp48 404 in 484ms
 GET /api/socket-health 200 in 43ms
 GET /api/socket-health 200 in 42ms
 GET /socket.io?EIO=4&transport=polling&t=zsinsg7o 404 in 523ms
 GET /socket.io?EIO=4&transport=polling&t=zsip21z3 404 in 295ms
 GET /api/socket-health 200 in 41ms
 GET /api/socket-health 200 in 239ms
 GET /socket.io?EIO=4&transport=polling&t=zsk75ftr 404 in 392ms
 GET /socket.io?EIO=4&transport=polling&t=zskdvkw1 404 in 168ms
 GET /api/socket-health 200 in 58ms
 GET /api/socket-health 200 in 72ms
 GET /socket.io?EIO=4&transport=polling&t=zslqxxxs 404 in 514ms
 GET /socket.io?EIO=4&transport=polling&t=zslt5rv0 404 in 302ms
 GET /api/socket-health 200 in 30ms
 GET /api/socket-health 200 in 129ms
 GET /socket.io?EIO=4&transport=polling&t=zsn9vstv 404 in 224ms
 GET /socket.io?EIO=4&transport=polling&t=zsndhc5u 404 in 120ms
 GET /api/socket-health 200 in 29ms
 GET /api/socket-health 200 in 118ms
 GET /socket.io?EIO=4&transport=polling&t=zsothll6 404 in 213ms
 GET /socket.io?EIO=4&transport=polling&t=zsows21m 404 in 109ms
 GET /api/socket-health 200 in 153ms
 GET /api/socket-health 200 in 195ms
 GET /socket.io?EIO=4&transport=polling&t=zsqjibcd 404 in 291ms
 GET /socket.io?EIO=4&transport=polling&t=zsqoz9mc 404 in 148ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
 GET /api/conversations 200 in 144ms
 GET /api/socket-health 200 in 29ms
 GET /api/socket-health 200 in 123ms
 GET /socket.io?EIO=4&transport=polling&t=zsrwkukr 404 in 211ms
 GET /socket.io?EIO=4&transport=polling&t=zss014oz 404 in 114ms
 GET /api/socket-health 200 in 30ms
 GET /api/socket-health 200 in 125ms
 GET /socket.io?EIO=4&transport=polling&t=zstg73y8 404 in 212ms
 GET /socket.io?EIO=4&transport=polling&t=zstjq999 404 in 109ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
=== FRIEND REQUEST GET START ===
 GET /api/socket-health 200 in 106ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
Request type: received User: sayantan2@gmail.com
âœ… Database connected
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
 GET /api/auth/session 200 in 162ms
 GET /api/friends 200 in 238ms
 GET /api/socket-health 200 in 188ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
 GET /socket.io?EIO=4&transport=polling&t=zsv25fsa 404 in 240ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
 GET /api/random-chat/queue 200 in 285ms
âœ… Current user found: {
  id: new ObjectId('6901f85f42c5d010fa811206'),
  email: 'sayantan2@gmail.com',
  friendRequestsCount: 0,
  sentRequestsCount: 1
}
Processing received requests...
Raw friendRequests: []
Processed receivedRequests: []
Populating sender details...
Final populated requests: []
=== FRIEND REQUEST GET END (received) ===
 GET /api/friends/request?type=received 200 in 628ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
 GET /api/users/me 200 in 418ms
 GET /api/friends 200 in 319ms
=== FRIEND REQUEST GET START ===
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
Request type: received User: sayantan2@gmail.com
âœ… Database connected
=== FRIEND REQUEST GET START ===
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
 POST /api/users/heartbeat 200 in 876ms
Request type: sent User: sayantan2@gmail.com
âœ… Database connected
âœ… Current user found: {
  id: new ObjectId('6901f85f42c5d010fa811206'),
  email: 'sayantan2@gmail.com',
  friendRequestsCount: 0,
  sentRequestsCount: 1
}
Processing received requests...
Raw friendRequests: []
Processed receivedRequests: []
Populating sender details...
Final populated requests: []
=== FRIEND REQUEST GET END (received) ===
 GET /api/friends/request?type=received 200 in 117ms
 GET /socket.io?EIO=4&transport=polling&t=zsv7oqnt 404 in 244ms
âœ… Current user found: {
  id: new ObjectId('6901f85f42c5d010fa811206'),
  email: 'sayantan2@gmail.com',
  friendRequestsCount: 0,
  sentRequestsCount: 1
}
Processing sent requests...
Raw sentRequests: [
  {
    from: new ObjectId('6901f85f42c5d010fa811206'),
    fromName: 'sayantan2',
    to: new ObjectId('6905adf16a22b7843b006183'),
    toName: 'sayantan3',
    status: 'pending',
    _id: new ObjectId('6905cdce14ad0d0f020b3985'),
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
Filtering sent request: { status: 'pending', to: new ObjectId('6905adf16a22b7843b006183') }
Mapping sent request: {
  from: new ObjectId('6901f85f42c5d010fa811206'),
  fromName: 'sayantan2',
  to: new ObjectId('6905adf16a22b7843b006183'),
  toName: 'sayantan3',
  status: 'pending',
  _id: new ObjectId('6905cdce14ad0d0f020b3985'),
  createdAt: 2025-11-01T09:07:26.707Z,
  updatedAt: 2025-11-01T09:07:26.707Z
}
Processed sentRequests: [
  {
    id: '6905cdce14ad0d0f020b3985',
    to: {
      id: '6905adf16a22b7843b006183',
      username: 'sayantan3',
      email: '',
      profilePicture: null
    },
    status: 'pending',
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
Populating recipient details...
Looking up recipient: 6905adf16a22b7843b006183
Found recipient: sayantan3
Final populated sent requests: [
  {
    id: '6905cdce14ad0d0f020b3985',
    to: {
      id: '6905adf16a22b7843b006183',
      username: 'sayantan3',
      email: 'sayantan3@gmail.com',
      profilePicture: undefined
    },
    status: 'pending',
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
=== FRIEND REQUEST GET END (sent) ===
 GET /api/friends/request?type=sent 200 in 205ms
=== FRIEND REQUEST GET START ===
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
Request type: sent User: sayantan2@gmail.com
âœ… Database connected
 POST /api/users/heartbeat 200 in 750ms
âœ… Current user found: {
  id: new ObjectId('6901f85f42c5d010fa811206'),
  email: 'sayantan2@gmail.com',
  friendRequestsCount: 0,
  sentRequestsCount: 1
}
Processing sent requests...
Raw sentRequests: [
  {
    from: new ObjectId('6901f85f42c5d010fa811206'),
    fromName: 'sayantan2',
    to: new ObjectId('6905adf16a22b7843b006183'),
    toName: 'sayantan3',
    status: 'pending',
    _id: new ObjectId('6905cdce14ad0d0f020b3985'),
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
Filtering sent request: { status: 'pending', to: new ObjectId('6905adf16a22b7843b006183') }
Mapping sent request: {
  from: new ObjectId('6901f85f42c5d010fa811206'),
  fromName: 'sayantan2',
  to: new ObjectId('6905adf16a22b7843b006183'),
  toName: 'sayantan3',
  status: 'pending',
  _id: new ObjectId('6905cdce14ad0d0f020b3985'),
  createdAt: 2025-11-01T09:07:26.707Z,
  updatedAt: 2025-11-01T09:07:26.707Z
}
Processed sentRequests: [
  {
    id: '6905cdce14ad0d0f020b3985',
    to: {
      id: '6905adf16a22b7843b006183',
      username: 'sayantan3',
      email: '',
      profilePicture: null
    },
    status: 'pending',
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
Populating recipient details...
Looking up recipient: 6905adf16a22b7843b006183
 GET /api/random-chat/session 200 in 527ms
Found recipient: sayantan3
Final populated sent requests: [
  {
    id: '6905cdce14ad0d0f020b3985',
    to: {
      id: '6905adf16a22b7843b006183',
      username: 'sayantan3',
      email: 'sayantan3@gmail.com',
      profilePicture: undefined
    },
    status: 'pending',
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
=== FRIEND REQUEST GET END (sent) ===
 GET /api/friends/request?type=sent 200 in 146ms
 GET /api/socket-health 200 in 42ms
 GET /api/socket-health 200 in 129ms
 GET /socket.io?EIO=4&transport=polling&t=zswjf5sc 404 in 222ms
 GET /socket.io?EIO=4&transport=polling&t=zswn2umu 404 in 104ms
 GET /api/socket-health 200 in 30ms
 GET /api/socket-health 200 in 116ms
 GET /socket.io?EIO=4&transport=polling&t=zsy2rwi5 404 in 195ms
 GET /socket.io?EIO=4&transport=polling&t=zsy61f0p 404 in 89ms
 GET /api/socket-health 200 in 44ms
 GET /api/socket-health 200 in 140ms
 GET /socket.io?EIO=4&transport=polling&t=zszmpabo 404 in 241ms
 GET /socket.io?EIO=4&transport=polling&t=zszqn8cu 404 in 117ms
 GET /api/socket-health 200 in 26ms
 GET /api/socket-health 200 in 118ms
 GET /socket.io?EIO=4&transport=polling&t=zt15vib4 404 in 208ms
 GET /socket.io?EIO=4&transport=polling&t=zt197ldb 404 in 109ms
 GET /api/socket-health 200 in 26ms
 GET /api/socket-health 200 in 114ms
 GET /socket.io?EIO=4&transport=polling&t=zt2pgotx 404 in 210ms
 GET /socket.io?EIO=4&transport=polling&t=zt2soi80 404 in 110ms
 GET /api/socket-health 200 in 35ms
 GET /api/socket-health 200 in 138ms
 GET /socket.io?EIO=4&transport=polling&t=zt495zfd 404 in 238ms
 GET /socket.io?EIO=4&transport=polling&t=zt4d1too 404 in 118ms
 GET /api/socket-health 200 in 27ms
 GET /api/socket-health 200 in 119ms
 GET /socket.io?EIO=4&transport=polling&t=zt5sflw3 404 in 218ms
 GET /socket.io?EIO=4&transport=polling&t=zt5vsxco 404 in 111ms
 GET /api/socket-health 200 in 293ms
 GET /api/socket-health 200 in 67ms
 GET /socket.io?EIO=4&transport=polling&t=zt7kelzz 404 in 312ms
 GET /socket.io?EIO=4&transport=polling&t=zt7m75xk 404 in 201ms
 GET /api/socket-health 200 in 36ms
 GET /api/socket-health 200 in 140ms
 GET /socket.io?EIO=4&transport=polling&t=zt8vqngo 404 in 296ms
 GET /socket.io?EIO=4&transport=polling&t=zt8zpf1z 404 in 167ms
 GET /api/socket-health 200 in 37ms
 GET /api/socket-health 200 in 129ms
 GET /socket.io?EIO=4&transport=polling&t=ztafgodg 404 in 252ms
 GET /socket.io?EIO=4&transport=polling&t=ztaj2cf4 404 in 126ms
 GET /api/socket-health 200 in 46ms
 GET /api/socket-health 200 in 64ms
 GET /socket.io?EIO=4&transport=polling&t=ztbzdutv 404 in 496ms
 GET /socket.io?EIO=4&transport=polling&t=ztc18x5m 404 in 327ms
 GET /api/socket-health 200 in 93ms
 GET /api/socket-health 200 in 227ms
 GET /socket.io?EIO=4&transport=polling&t=ztdmdlcl 404 in 530ms
 GET /socket.io?EIO=4&transport=polling&t=ztdr769m 404 in 523ms
 GET /api/socket-health 200 in 203ms
 GET /api/socket-health 200 in 296ms
 GET /socket.io?EIO=4&transport=polling&t=ztf8ntxo 404 in 1411ms
 GET /socket.io?EIO=4&transport=polling&t=ztfibr7m 404 in 835ms
 GET /api/socket-health 200 in 253ms
 GET /api/socket-health 200 in 221ms
 GET /socket.io?EIO=4&transport=polling&t=zthlp0v3 404 in 802ms
 GET /socket.io?EIO=4&transport=polling&t=zthrjjle 404 in 450ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
 POST /api/users/heartbeat 200 in 648ms
 GET /api/conversations 200 in 604ms
=== FRIEND REQUEST GET START ===
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
Request type: received User: sayantan2@gmail.com
âœ… Database connected
 GET /api/socket-health 200 in 232ms
âœ… Current user found: {
  id: new ObjectId('6901f85f42c5d010fa811206'),
  email: 'sayantan2@gmail.com',
  friendRequestsCount: 0,
  sentRequestsCount: 1
}
Processing received requests...
Raw friendRequests: []
Processed receivedRequests: []
Populating sender details...
Final populated requests: []
=== FRIEND REQUEST GET END (received) ===
 GET /api/friends/request?type=received 200 in 300ms
 GET /api/socket-health 200 in 184ms
=== FRIEND REQUEST GET START ===
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
Request type: sent User: sayantan2@gmail.com
âœ… Database connected
âœ… Current user found: {
  id: new ObjectId('6901f85f42c5d010fa811206'),
  email: 'sayantan2@gmail.com',
  friendRequestsCount: 0,
  sentRequestsCount: 1
}
Processing sent requests...
Raw sentRequests: [
  {
    from: new ObjectId('6901f85f42c5d010fa811206'),
    fromName: 'sayantan2',
    to: new ObjectId('6905adf16a22b7843b006183'),
    toName: 'sayantan3',
    status: 'pending',
    _id: new ObjectId('6905cdce14ad0d0f020b3985'),
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
Filtering sent request: { status: 'pending', to: new ObjectId('6905adf16a22b7843b006183') }
Mapping sent request: {
  from: new ObjectId('6901f85f42c5d010fa811206'),
  fromName: 'sayantan2',
  to: new ObjectId('6905adf16a22b7843b006183'),
  toName: 'sayantan3',
  status: 'pending',
  _id: new ObjectId('6905cdce14ad0d0f020b3985'),
  createdAt: 2025-11-01T09:07:26.707Z,
  updatedAt: 2025-11-01T09:07:26.707Z
}
Processed sentRequests: [
  {
    id: '6905cdce14ad0d0f020b3985',
    to: {
      id: '6905adf16a22b7843b006183',
      username: 'sayantan3',
      email: '',
      profilePicture: null
    },
    status: 'pending',
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
Populating recipient details...
Looking up recipient: 6905adf16a22b7843b006183
Found recipient: sayantan3
Final populated sent requests: [
  {
    id: '6905cdce14ad0d0f020b3985',
    to: {
      id: '6905adf16a22b7843b006183',
      username: 'sayantan3',
      email: 'sayantan3@gmail.com',
      profilePicture: undefined
    },
    status: 'pending',
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
=== FRIEND REQUEST GET END (sent) ===
 GET /api/friends/request?type=sent 200 in 584ms
 GET /socket.io?EIO=4&transport=polling&t=ztjxrasv 404 in 596ms
 GET /socket.io?EIO=4&transport=polling&t=ztk2zovw 404 in 315ms
 GET /?id=d6f8ce15-dd71-46d0-b4b1-e37e0be3ade9&vscodeBrowserReqId=1762407333003 200 in 1067ms
 GET /api/socket-health 200 in 315ms
 GET /api/socket-health 200 in 332ms
 GET /socket.io?EIO=4&transport=polling&t=ztmh2bok 404 in 960ms
 GET /socket.io?EIO=4&transport=polling&t=ztntosmv 404 in 549ms
 GET /api/socket-health 200 in 422ms
 GET /socket.io?EIO=4&transport=polling&t=ztph2qas 404 in 491ms
 GET /api/socket-health 200 in 75ms
 GET /socket.io?EIO=4&transport=polling&t=ztq00oh7 404 in 224ms
 GET /api/socket-health 200 in 48ms
 GET /socket.io?EIO=4&transport=polling&t=ztqvkucd 404 in 307ms
 GET /api/socket-health 200 in 123ms
 GET /socket.io?EIO=4&transport=polling&t=ztrt2x7d 404 in 313ms
 GET /api/socket-health 200 in 80ms
 GET /socket.io?EIO=4&transport=polling&t=zts878bq 404 in 314ms
 GET /api/socket-health 200 in 83ms
 GET /socket.io?EIO=4&transport=polling&t=ztszy8da 404 in 361ms
 GET /api/socket-health 200 in 54ms
 GET /socket.io?EIO=4&transport=polling&t=zttqr9c9 404 in 317ms
 GET /api/socket-health 200 in 55ms
 GET /socket.io?EIO=4&transport=polling&t=ztuio3qu 404 in 294ms
 GET /api/socket-health 200 in 70ms
 GET /socket.io?EIO=4&transport=polling&t=ztvbh1jb 404 in 238ms
 GET /api/socket-health 200 in 65ms
 GET /socket.io?EIO=4&transport=polling&t=ztw6jxan 404 in 292ms
 GET /api/socket-health 200 in 50ms
 GET /socket.io?EIO=4&transport=polling&t=ztwt6gib 404 in 259ms
 GET /api/socket-health 200 in 48ms
 GET /socket.io?EIO=4&transport=polling&t=ztxl3j3r 404 in 197ms
 GET /api/socket-health 200 in 159ms
 GET /api/socket-health 200 in 1482ms
 GET /socket.io?EIO=4&transport=polling&t=ztyuxz4b 404 in 4535ms
 GET /socket.io?EIO=4&transport=polling&t=zu2rpfvw 404 in 274ms
 GET /api/socket-health 200 in 58ms
 GET /socket.io?EIO=4&transport=polling&t=zu3yk5ax 404 in 435ms
 GET /api/socket-health 200 in 56ms
 GET /socket.io?EIO=4&transport=polling&t=zu4qnjsk 404 in 323ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
=== FRIEND REQUEST GET START ===
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
Request type: received User: sayantan2@gmail.com
âœ… Database connected
 GET /api/friends 200 in 292ms
âœ… Current user found: {
  id: new ObjectId('6901f85f42c5d010fa811206'),
  email: 'sayantan2@gmail.com',
  friendRequestsCount: 0,
  sentRequestsCount: 1
}
Processing received requests...
Raw friendRequests: []
Processed receivedRequests: []
Populating sender details...
Final populated requests: []
=== FRIEND REQUEST GET END (received) ===
 GET /api/friends/request?type=received 200 in 320ms
=== FRIEND REQUEST GET START ===
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
Request type: sent User: sayantan2@gmail.com
âœ… Database connected
âœ… Current user found: {
  id: new ObjectId('6901f85f42c5d010fa811206'),
  email: 'sayantan2@gmail.com',
  friendRequestsCount: 0,
  sentRequestsCount: 1
}
Processing sent requests...
Raw sentRequests: [
  {
    from: new ObjectId('6901f85f42c5d010fa811206'),
    fromName: 'sayantan2',
    to: new ObjectId('6905adf16a22b7843b006183'),
    toName: 'sayantan3',
    status: 'pending',
    _id: new ObjectId('6905cdce14ad0d0f020b3985'),
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
Filtering sent request: { status: 'pending', to: new ObjectId('6905adf16a22b7843b006183') }
Mapping sent request: {
  from: new ObjectId('6901f85f42c5d010fa811206'),
  fromName: 'sayantan2',
  to: new ObjectId('6905adf16a22b7843b006183'),
  toName: 'sayantan3',
  status: 'pending',
  _id: new ObjectId('6905cdce14ad0d0f020b3985'),
  createdAt: 2025-11-01T09:07:26.707Z,
  updatedAt: 2025-11-01T09:07:26.707Z
}
Processed sentRequests: [
  {
    id: '6905cdce14ad0d0f020b3985',
    to: {
      id: '6905adf16a22b7843b006183',
      username: 'sayantan3',
      email: '',
      profilePicture: null
    },
    status: 'pending',
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
Populating recipient details...
Looking up recipient: 6905adf16a22b7843b006183
Found recipient: sayantan3
Final populated sent requests: [
  {
    id: '6905cdce14ad0d0f020b3985',
    to: {
      id: '6905adf16a22b7843b006183',
      username: 'sayantan3',
      email: 'sayantan3@gmail.com',
      profilePicture: undefined
    },
    status: 'pending',
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
=== FRIEND REQUEST GET END (sent) ===
 GET /api/friends/request?type=sent 200 in 177ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
 GET /api/socket-health 200 in 128ms
 GET /api/socket-health 200 in 87ms
 POST /api/users/heartbeat 200 in 336ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
 GET /api/conversations 200 in 286ms
 GET /socket.io?EIO=4&transport=polling&t=zu6jkybz 404 in 1031ms
 GET /socket.io?EIO=4&transport=polling&t=zu6kmmri 404 in 1030ms
 GET /api/socket-health 200 in 148ms
 GET /api/socket-health 200 in 252ms
 GET /socket.io?EIO=4&transport=polling&t=zu8l56bu 404 in 1678ms
 GET /socket.io?EIO=4&transport=polling&t=zu8wtpyp 404 in 1086ms
 GET /api/socket-health 200 in 54ms
 GET /api/socket-health 200 in 69ms
 GET /socket.io?EIO=4&transport=polling&t=zubmrwlo 404 in 439ms
 GET /socket.io?EIO=4&transport=polling&t=zubkfxnt 404 in 443ms
 GET /api/socket-health 200 in 62ms
 GET /api/socket-health 200 in 326ms
 GET /socket.io?EIO=4&transport=polling&t=zud1ko40 404 in 329ms
 GET /socket.io?EIO=4&transport=polling&t=zudapufm 404 in 189ms
 GET /api/socket-health 200 in 58ms
 GET /api/socket-health 200 in 83ms
 GET /socket.io?EIO=4&transport=polling&t=zueoxji6 404 in 512ms
 GET /socket.io?EIO=4&transport=polling&t=zueoy6pf 404 in 511ms
 GET /api/socket-health 200 in 92ms
 GET /api/socket-health 200 in 99ms
 GET /socket.io?EIO=4&transport=polling&t=zug82dvq 404 in 1138ms
 GET /socket.io?EIO=4&transport=polling&t=zug8ab4p 404 in 1135ms
 GET /api/socket-health 200 in 43ms
 GET /api/socket-health 200 in 261ms
 GET /socket.io?EIO=4&transport=polling&t=zuiep2yy 404 in 486ms
 GET /socket.io?EIO=4&transport=polling&t=zuim1km2 404 in 231ms
 GET /api/socket-health 200 in 52ms
 GET /api/socket-health 200 in 84ms
 GET /socket.io?EIO=4&transport=polling&t=zujyvk5x 404 in 462ms
 GET /socket.io?EIO=4&transport=polling&t=zuk1btsl 404 in 205ms
 GET /api/socket-health 200 in 51ms
 GET /api/socket-health 200 in 259ms
 GET /socket.io?EIO=4&transport=polling&t=zuli0vsp 404 in 263ms
 GET /socket.io?EIO=4&transport=polling&t=zulp9hp0 404 in 184ms
 GET /api/socket-health 200 in 57ms
 GET /api/socket-health 200 in 61ms
 GET /socket.io?EIO=4&transport=polling&t=zun2o3ws 404 in 527ms
 GET /socket.io?EIO=4&transport=polling&t=zun47tlc 404 in 287ms
 GET /api/socket-health 200 in 67ms
 GET /api/socket-health 200 in 100ms
 GET /socket.io?EIO=4&transport=polling&t=zuon5icv 404 in 539ms
 GET /socket.io?EIO=4&transport=polling&t=zuopor7u 404 in 264ms
 GET /api/socket-health 200 in 53ms
 GET /api/socket-health 200 in 71ms
 GET /socket.io?EIO=4&transport=polling&t=zuq53hb8 404 in 453ms
 GET /socket.io?EIO=4&transport=polling&t=zuq74yp7 404 in 200ms
 GET /api/socket-health 200 in 48ms
 GET /api/socket-health 200 in 175ms
 GET /socket.io?EIO=4&transport=polling&t=zuroh4kr 404 in 180ms
 GET /socket.io?EIO=4&transport=polling&t=zurthe9x 404 in 187ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
=== FRIEND REQUEST GET START ===
 GET /api/socket-health 200 in 106ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
Request type: received User: sayantan2@gmail.com
âœ… Database connected
 GET /api/socket-health 200 in 139ms
 POST /api/users/heartbeat 200 in 405ms
 GET /socket.io?EIO=4&transport=polling&t=zut9mm4l 404 in 306ms
 GET /socket.io?EIO=4&transport=polling&t=zutdngeg 404 in 181ms
âœ… Current user found: {
  id: new ObjectId('6901f85f42c5d010fa811206'),
  email: 'sayantan2@gmail.com',
  friendRequestsCount: 0,
  sentRequestsCount: 1
}
Processing received requests...
Raw friendRequests: []
Processed receivedRequests: []
Populating sender details...
Final populated requests: []
=== FRIEND REQUEST GET END (received) ===
 GET /api/friends/request?type=received 200 in 810ms
=== FRIEND REQUEST GET START ===
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
Request type: sent User: sayantan2@gmail.com
âœ… Database connected
âœ… Current user found: {
  id: new ObjectId('6901f85f42c5d010fa811206'),
  email: 'sayantan2@gmail.com',
  friendRequestsCount: 0,
  sentRequestsCount: 1
}
Processing sent requests...
Raw sentRequests: [
  {
    from: new ObjectId('6901f85f42c5d010fa811206'),
    fromName: 'sayantan2',
    to: new ObjectId('6905adf16a22b7843b006183'),
    toName: 'sayantan3',
    status: 'pending',
    _id: new ObjectId('6905cdce14ad0d0f020b3985'),
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
Filtering sent request: { status: 'pending', to: new ObjectId('6905adf16a22b7843b006183') }
Mapping sent request: {
  from: new ObjectId('6901f85f42c5d010fa811206'),
  fromName: 'sayantan2',
  to: new ObjectId('6905adf16a22b7843b006183'),
  toName: 'sayantan3',
  status: 'pending',
  _id: new ObjectId('6905cdce14ad0d0f020b3985'),
  createdAt: 2025-11-01T09:07:26.707Z,
  updatedAt: 2025-11-01T09:07:26.707Z
}
Processed sentRequests: [
  {
    id: '6905cdce14ad0d0f020b3985',
    to: {
      id: '6905adf16a22b7843b006183',
      username: 'sayantan3',
      email: '',
      profilePicture: null
    },
    status: 'pending',
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
Populating recipient details...
Looking up recipient: 6905adf16a22b7843b006183
Found recipient: sayantan3
Final populated sent requests: [
  {
    id: '6905cdce14ad0d0f020b3985',
    to: {
      id: '6905adf16a22b7843b006183',
      username: 'sayantan3',
      email: 'sayantan3@gmail.com',
      profilePicture: undefined
    },
    status: 'pending',
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
=== FRIEND REQUEST GET END (sent) ===
 GET /api/friends/request?type=sent 200 in 131ms
 GET /api/socket-health 200 in 43ms
 GET /api/socket-health 200 in 141ms
 GET /socket.io?EIO=4&transport=polling&t=zuur82ei 404 in 242ms
 GET /socket.io?EIO=4&transport=polling&t=zuuv6j5h 404 in 107ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
 GET /api/conversations 200 in 138ms
 GET /api/socket-health 200 in 27ms
 GET /api/socket-health 200 in 142ms
 GET /socket.io?EIO=4&transport=polling&t=zuwaktr1 404 in 131ms
 GET /socket.io?EIO=4&transport=polling&t=zuwek14h 404 in 119ms
 GET /api/socket-health 200 in 37ms
 GET /api/socket-health 200 in 135ms
 GET /socket.io?EIO=4&transport=polling&t=zuxu3zsr 404 in 133ms
 GET /socket.io?EIO=4&transport=polling&t=zuxxv0v0 404 in 103ms
 GET /api/socket-health 200 in 30ms
 GET /api/socket-health 200 in 139ms
 GET /socket.io?EIO=4&transport=polling&t=zuzdf4s4 404 in 235ms
 GET /socket.io?EIO=4&transport=polling&t=zuzhbq7w 404 in 112ms
 GET /api/socket-health 200 in 31ms
 GET /api/socket-health 200 in 134ms
 GET /socket.io?EIO=4&transport=polling&t=zv0xfh49 404 in 233ms
 GET /socket.io?EIO=4&transport=polling&t=zv118nl4 404 in 115ms
 GET /api/socket-health 200 in 34ms
 GET /api/socket-health 200 in 151ms
 GET /socket.io?EIO=4&transport=polling&t=zv2gnefy 404 in 136ms
 GET /socket.io?EIO=4&transport=polling&t=zv2kx8qb 404 in 106ms
 GET /api/socket-health 200 in 36ms
 GET /api/socket-health 200 in 137ms
 GET /socket.io?EIO=4&transport=polling&t=zv40h9uo 404 in 144ms
 GET /socket.io?EIO=4&transport=polling&t=zv44dv78 404 in 111ms
 GET /api/socket-health 200 in 30ms
 GET /api/socket-health 200 in 116ms
 GET /socket.io?EIO=4&transport=polling&t=zv5jvevn 404 in 196ms
 GET /socket.io?EIO=4&transport=polling&t=zv5n5q2e 404 in 102ms
 GET /api/socket-health 200 in 30ms
 GET /api/socket-health 200 in 115ms
 GET /socket.io?EIO=4&transport=polling&t=zv7375py 404 in 209ms
 GET /socket.io?EIO=4&transport=polling&t=zv76fudg 404 in 107ms
 GET /api/socket-health 200 in 33ms
 GET /api/socket-health 200 in 123ms
 GET /socket.io?EIO=4&transport=polling&t=zv8mtqg1 404 in 122ms
 GET /socket.io?EIO=4&transport=polling&t=zv8qakpd 404 in 108ms
 GET /api/socket-health 200 in 33ms
 GET /api/socket-health 200 in 133ms
 GET /socket.io?EIO=4&transport=polling&t=zva6ondn 404 in 223ms
 GET /socket.io?EIO=4&transport=polling&t=zvaaft52 404 in 106ms
 GET /api/socket-health 200 in 45ms
 GET /api/socket-health 200 in 159ms
 GET /socket.io?EIO=4&transport=polling&t=zvbqk3zm 404 in 147ms
 GET /socket.io?EIO=4&transport=polling&t=zvbv0b2s 404 in 109ms
 GET /api/socket-health 200 in 34ms
 GET /api/socket-health 200 in 130ms
 GET /socket.io?EIO=4&transport=polling&t=zvd9ourf 404 in 218ms
 GET /socket.io?EIO=4&transport=polling&t=zvddc3qh 404 in 105ms
 GET /api/socket-health 200 in 28ms
 GET /api/socket-health 200 in 123ms
 GET /socket.io?EIO=4&transport=polling&t=zvesxfsv 404 in 210ms
 GET /socket.io?EIO=4&transport=polling&t=zvewdluj 404 in 110ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
=== FRIEND REQUEST GET START ===
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
Request type: received User: sayantan2@gmail.com
âœ… Database connected
âœ… Current user found: {
  id: new ObjectId('6901f85f42c5d010fa811206'),
  email: 'sayantan2@gmail.com',
  friendRequestsCount: 0,
  sentRequestsCount: 1
}
Processing received requests...
Raw friendRequests: []
Processed receivedRequests: []
Populating sender details...
Final populated requests: []
=== FRIEND REQUEST GET END (received) ===
 GET /api/friends/request?type=received 200 in 145ms
 GET /api/friends 200 in 165ms
=== FRIEND REQUEST GET START ===
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
Request type: sent User: sayantan2@gmail.com
âœ… Database connected
âœ… Current user found: {
  id: new ObjectId('6901f85f42c5d010fa811206'),
  email: 'sayantan2@gmail.com',
  friendRequestsCount: 0,
  sentRequestsCount: 1
}
Processing sent requests...
Raw sentRequests: [
  {
    from: new ObjectId('6901f85f42c5d010fa811206'),
    fromName: 'sayantan2',
    to: new ObjectId('6905adf16a22b7843b006183'),
    toName: 'sayantan3',
    status: 'pending',
    _id: new ObjectId('6905cdce14ad0d0f020b3985'),
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
Filtering sent request: { status: 'pending', to: new ObjectId('6905adf16a22b7843b006183') }
Mapping sent request: {
  from: new ObjectId('6901f85f42c5d010fa811206'),
  fromName: 'sayantan2',
  to: new ObjectId('6905adf16a22b7843b006183'),
  toName: 'sayantan3',
  status: 'pending',
  _id: new ObjectId('6905cdce14ad0d0f020b3985'),
  createdAt: 2025-11-01T09:07:26.707Z,
  updatedAt: 2025-11-01T09:07:26.707Z
}
Processed sentRequests: [
  {
    id: '6905cdce14ad0d0f020b3985',
    to: {
      id: '6905adf16a22b7843b006183',
      username: 'sayantan3',
      email: '',
      profilePicture: null
    },
    status: 'pending',
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
Populating recipient details...
Looking up recipient: 6905adf16a22b7843b006183
Found recipient: sayantan3
Final populated sent requests: [
  {
    id: '6905cdce14ad0d0f020b3985',
    to: {
      id: '6905adf16a22b7843b006183',
      username: 'sayantan3',
      email: 'sayantan3@gmail.com',
      profilePicture: undefined
    },
    status: 'pending',
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
=== FRIEND REQUEST GET END (sent) ===
 GET /api/friends/request?type=sent 200 in 135ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
 GET /api/socket-health 200 in 53ms
 GET /api/socket-health 200 in 122ms
 GET /socket.io?EIO=4&transport=polling&t=zvgddrn6 404 in 215ms
 GET /socket.io?EIO=4&transport=polling&t=zvggulff 404 in 104ms
 POST /api/users/heartbeat 200 in 319ms
 GET /api/socket-health 200 in 34ms
 GET /api/socket-health 200 in 135ms
 GET /socket.io?EIO=4&transport=polling&t=zvhwbteh 404 in 226ms
 GET /socket.io?EIO=4&transport=polling&t=zvi06k9a 404 in 102ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
 GET /api/socket-health 200 in 58ms
 GET /api/socket-health 200 in 113ms
 GET /api/conversations 200 in 274ms
 GET /socket.io?EIO=4&transport=polling&t=zvjgeyqw 404 in 220ms
 GET /socket.io?EIO=4&transport=polling&t=zvjjlvld 404 in 103ms
 GET /api/socket-health 200 in 29ms
 GET /api/socket-health 200 in 124ms
 GET /socket.io?EIO=4&transport=polling&t=zvkz5nah 404 in 214ms
 GET /socket.io?EIO=4&transport=polling&t=zvl2nd73 404 in 102ms
 GET /api/socket-health 200 in 37ms
 GET /api/socket-health 200 in 145ms
 GET /socket.io?EIO=4&transport=polling&t=zvmja7gd 404 in 147ms
 GET /socket.io?EIO=4&transport=polling&t=zvmnfizx 404 in 106ms
 GET /api/socket-health 200 in 29ms
 GET /api/socket-health 200 in 134ms
 GET /socket.io?EIO=4&transport=polling&t=zvo2bylb 404 in 228ms
 GET /socket.io?EIO=4&transport=polling&t=zvo629yl 404 in 105ms
 GET /api/socket-health 200 in 33ms
 GET /api/socket-health 200 in 153ms
 GET /socket.io?EIO=4&transport=polling&t=zvplywls 404 in 259ms
 GET /socket.io?EIO=4&transport=polling&t=zvpq9pgj 404 in 132ms
 GET /api/socket-health 200 in 52ms
 GET /api/socket-health 200 in 153ms
 GET /socket.io?EIO=4&transport=polling&t=zvr68y6f 404 in 258ms
 GET /socket.io?EIO=4&transport=polling&t=zvraja3r 404 in 112ms
 GET /api/socket-health 200 in 29ms
 GET /api/socket-health 200 in 133ms
 GET /socket.io?EIO=4&transport=polling&t=zvsp12fj 404 in 132ms
 GET /socket.io?EIO=4&transport=polling&t=zvsss16r 404 in 116ms
 GET /api/socket-health 200 in 39ms
 GET /api/socket-health 200 in 187ms
 GET /socket.io?EIO=4&transport=polling&t=zvu8shmm 404 in 195ms
 GET /socket.io?EIO=4&transport=polling&t=zvue2sp3 404 in 190ms
 GET /api/socket-health 200 in 38ms
 GET /api/socket-health 200 in 187ms
 GET /socket.io?EIO=4&transport=polling&t=zvvsi5q9 404 in 372ms
 GET /socket.io?EIO=4&transport=polling&t=zvvxr4cx 404 in 207ms
 GET /api/socket-health 200 in 51ms
 GET /api/socket-health 200 in 259ms
 GET /socket.io?EIO=4&transport=polling&t=zvxcn4y5 404 in 408ms
 GET /socket.io?EIO=4&transport=polling&t=zvxjxnri 404 in 232ms
 GET /api/socket-health 200 in 29ms
 GET /api/socket-health 200 in 115ms
 GET /socket.io?EIO=4&transport=polling&t=zvyvcxfk 404 in 210ms
 GET /socket.io?EIO=4&transport=polling&t=zvyylv3r 404 in 106ms
 GET /api/socket-health 200 in 32ms
 GET /api/socket-health 200 in 49ms
 GET /socket.io?EIO=4&transport=polling&t=zw0eup59 404 in 240ms
 GET /socket.io?EIO=4&transport=polling&t=zw0gad3d 404 in 121ms
 GET /api/socket-health 200 in 35ms
 GET /api/socket-health 200 in 112ms
 GET /socket.io?EIO=4&transport=polling&t=zw1yt1lb 404 in 118ms
 GET /socket.io?EIO=4&transport=polling&t=zw21zlt2 404 in 103ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
=== FRIEND REQUEST GET START ===
 GET /api/socket-health 200 in 109ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
Request type: received User: sayantan2@gmail.com
âœ… Database connected
 GET /api/socket-health 200 in 174ms
 POST /api/users/heartbeat 200 in 429ms
 GET /socket.io?EIO=4&transport=polling&t=zw3kflgh 404 in 323ms
 GET /socket.io?EIO=4&transport=polling&t=zw3penm3 404 in 163ms
âœ… Current user found: {
  id: new ObjectId('6901f85f42c5d010fa811206'),
  email: 'sayantan2@gmail.com',
  friendRequestsCount: 0,
  sentRequestsCount: 1
}
Processing received requests...
Raw friendRequests: []
Processed receivedRequests: []
Populating sender details...
Final populated requests: []
=== FRIEND REQUEST GET END (received) ===
 GET /api/friends/request?type=received 200 in 629ms
=== FRIEND REQUEST GET START ===
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
Request type: sent User: sayantan2@gmail.com
âœ… Database connected
âœ… Current user found: {
  id: new ObjectId('6901f85f42c5d010fa811206'),
  email: 'sayantan2@gmail.com',
  friendRequestsCount: 0,
  sentRequestsCount: 1
}
Processing sent requests...
Raw sentRequests: [
  {
    from: new ObjectId('6901f85f42c5d010fa811206'),
    fromName: 'sayantan2',
    to: new ObjectId('6905adf16a22b7843b006183'),
    toName: 'sayantan3',
    status: 'pending',
    _id: new ObjectId('6905cdce14ad0d0f020b3985'),
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
Filtering sent request: { status: 'pending', to: new ObjectId('6905adf16a22b7843b006183') }
Mapping sent request: {
  from: new ObjectId('6901f85f42c5d010fa811206'),
  fromName: 'sayantan2',
  to: new ObjectId('6905adf16a22b7843b006183'),
  toName: 'sayantan3',
  status: 'pending',
  _id: new ObjectId('6905cdce14ad0d0f020b3985'),
  createdAt: 2025-11-01T09:07:26.707Z,
  updatedAt: 2025-11-01T09:07:26.707Z
}
Processed sentRequests: [
  {
    id: '6905cdce14ad0d0f020b3985',
    to: {
      id: '6905adf16a22b7843b006183',
      username: 'sayantan3',
      email: '',
      profilePicture: null
    },
    status: 'pending',
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
Populating recipient details...
Looking up recipient: 6905adf16a22b7843b006183
Found recipient: sayantan3
Final populated sent requests: [
  {
    id: '6905cdce14ad0d0f020b3985',
    to: {
      id: '6905adf16a22b7843b006183',
      username: 'sayantan3',
      email: 'sayantan3@gmail.com',
      profilePicture: undefined
    },
    status: 'pending',
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
=== FRIEND REQUEST GET END (sent) ===
 GET /api/friends/request?type=sent 200 in 137ms
 GET /api/socket-health 200 in 42ms
 GET /api/socket-health 200 in 163ms
 GET /socket.io?EIO=4&transport=polling&t=zw51zli0 404 in 170ms
 GET /socket.io?EIO=4&transport=polling&t=zw56m4x8 404 in 131ms
 GET /api/socket-health 200 in 25ms
 GET /api/socket-health 200 in 111ms
 GET /socket.io?EIO=4&transport=polling&t=zw6l5vlb 404 in 203ms
 GET /socket.io?EIO=4&transport=polling&t=zw6oae3b 404 in 97ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
 GET /api/conversations 200 in 146ms
 GET /api/socket-health 200 in 33ms
 GET /api/socket-health 200 in 134ms
 GET /socket.io?EIO=4&transport=polling&t=zw84uefu 404 in 210ms
 GET /socket.io?EIO=4&transport=polling&t=zw88mexd 404 in 102ms
 GET /api/socket-health 200 in 33ms
 GET /api/socket-health 200 in 139ms
 GET /socket.io?EIO=4&transport=polling&t=zw9olhuk 404 in 233ms
 GET /socket.io?EIO=4&transport=polling&t=zw9shesj 404 in 110ms
 GET /api/socket-health 200 in 28ms
 GET /api/socket-health 200 in 131ms
 GET /socket.io?EIO=4&transport=polling&t=zwb7txox 404 in 202ms
 GET /socket.io?EIO=4&transport=polling&t=zwbbhvc9 404 in 100ms
 GET /api/socket-health 200 in 29ms
 GET /api/socket-health 200 in 116ms
 GET /socket.io?EIO=4&transport=polling&t=zwcre5kx 404 in 121ms
 GET /socket.io?EIO=4&transport=polling&t=zwcuotwb 404 in 98ms
 GET /api/socket-health 200 in 40ms
 GET /api/socket-health 200 in 159ms
 GET /socket.io?EIO=4&transport=polling&t=zweb7poo 404 in 151ms
 GET /socket.io?EIO=4&transport=polling&t=zwefn4zp 404 in 125ms
 GET /api/socket-health 200 in 28ms
 GET /api/socket-health 200 in 122ms
 GET /socket.io?EIO=4&transport=polling&t=zwfuaued 404 in 127ms
 GET /socket.io?EIO=4&transport=polling&t=zwfxraj3 404 in 109ms
 GET /api/socket-health 200 in 31ms
 GET /api/socket-health 200 in 129ms
 GET /socket.io?EIO=4&transport=polling&t=zwhe14sm 404 in 216ms
 GET /socket.io?EIO=4&transport=polling&t=zwhhoqg0 404 in 106ms
 GET /api/socket-health 200 in 32ms
 GET /api/socket-health 200 in 148ms
 GET /socket.io?EIO=4&transport=polling&t=zwixlbry 404 in 146ms
 GET /socket.io?EIO=4&transport=polling&t=zwj1scvc 404 in 107ms
 GET /api/socket-health 200 in 27ms
 GET /api/socket-health 200 in 125ms
 GET /socket.io?EIO=4&transport=polling&t=zwkh9n6l 404 in 204ms
 GET /socket.io?EIO=4&transport=polling&t=zwkksbau 404 in 99ms
 GET /api/socket-health 200 in 30ms
 GET /api/socket-health 200 in 121ms
 GET /socket.io?EIO=4&transport=polling&t=zwm0sdas 404 in 219ms
 GET /socket.io?EIO=4&transport=polling&t=zwm48vvv 404 in 109ms
 GET /api/socket-health 200 in 40ms
 GET /api/socket-health 200 in 167ms
 GET /socket.io?EIO=4&transport=polling&t=zwnkhq4k 404 in 158ms
 GET /socket.io?EIO=4&transport=polling&t=zwnp661m 404 in 121ms
 GET /api/socket-health 200 in 29ms
 GET /api/socket-health 200 in 131ms
 GET /socket.io?EIO=4&transport=polling&t=zwp3pool 404 in 226ms
 GET /socket.io?EIO=4&transport=polling&t=zwp7dm4o 404 in 110ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
=== FRIEND REQUEST GET START ===
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
Request type: received User: sayantan2@gmail.com
âœ… Database connected
âœ… Current user found: {
  id: new ObjectId('6901f85f42c5d010fa811206'),
  email: 'sayantan2@gmail.com',
  friendRequestsCount: 0,
  sentRequestsCount: 1
}
Processing received requests...
Raw friendRequests: []
Processed receivedRequests: []
Populating sender details...
Final populated requests: []
=== FRIEND REQUEST GET END (received) ===
 GET /api/friends/request?type=received 200 in 157ms
=== FRIEND REQUEST GET START ===
 GET /api/friends 200 in 185ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
Request type: sent User: sayantan2@gmail.com
âœ… Database connected
âœ… Current user found: {
  id: new ObjectId('6901f85f42c5d010fa811206'),
  email: 'sayantan2@gmail.com',
  friendRequestsCount: 0,
  sentRequestsCount: 1
}
Processing sent requests...
Raw sentRequests: [
  {
    from: new ObjectId('6901f85f42c5d010fa811206'),
    fromName: 'sayantan2',
    to: new ObjectId('6905adf16a22b7843b006183'),
    toName: 'sayantan3',
    status: 'pending',
    _id: new ObjectId('6905cdce14ad0d0f020b3985'),
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
Filtering sent request: { status: 'pending', to: new ObjectId('6905adf16a22b7843b006183') }
Mapping sent request: {
  from: new ObjectId('6901f85f42c5d010fa811206'),
  fromName: 'sayantan2',
  to: new ObjectId('6905adf16a22b7843b006183'),
  toName: 'sayantan3',
  status: 'pending',
  _id: new ObjectId('6905cdce14ad0d0f020b3985'),
  createdAt: 2025-11-01T09:07:26.707Z,
  updatedAt: 2025-11-01T09:07:26.707Z
}
Processed sentRequests: [
  {
    id: '6905cdce14ad0d0f020b3985',
    to: {
      id: '6905adf16a22b7843b006183',
      username: 'sayantan3',
      email: '',
      profilePicture: null
    },
    status: 'pending',
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
Populating recipient details...
Looking up recipient: 6905adf16a22b7843b006183
Found recipient: sayantan3
Final populated sent requests: [
  {
    id: '6905cdce14ad0d0f020b3985',
    to: {
      id: '6905adf16a22b7843b006183',
      username: 'sayantan3',
      email: 'sayantan3@gmail.com',
      profilePicture: undefined
    },
    status: 'pending',
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
=== FRIEND REQUEST GET END (sent) ===
 GET /api/friends/request?type=sent 200 in 115ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
 GET /api/socket-health 200 in 56ms
 GET /api/socket-health 200 in 123ms
 GET /socket.io?EIO=4&transport=polling&t=zwqo4rpy 404 in 223ms
 GET /socket.io?EIO=4&transport=polling&t=zwqrlhxp 404 in 105ms
 POST /api/users/heartbeat 200 in 327ms
 GET /api/socket-health 200 in 39ms
 GET /api/socket-health 200 in 60ms
 GET /socket.io?EIO=4&transport=polling&t=zws7ebkv 404 in 349ms
 GET /socket.io?EIO=4&transport=polling&t=zws9anh4 404 in 162ms
 GET /api/socket-health 200 in 28ms
 GET /api/socket-health 200 in 122ms
 GET /socket.io?EIO=4&transport=polling&t=zwtqlnxu 404 in 203ms
 GET /socket.io?EIO=4&transport=polling&t=zwtu2ugo 404 in 99ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
 GET /api/socket-health 200 in 61ms
 GET /api/conversations 200 in 176ms
 GET /api/socket-health 200 in 130ms
 GET /socket.io?EIO=4&transport=polling&t=zwvay9l8 404 in 212ms
 GET /socket.io?EIO=4&transport=polling&t=zwvempn8 404 in 100ms
 GET /api/socket-health 200 in 36ms
 GET /api/socket-health 200 in 143ms
 GET /socket.io?EIO=4&transport=polling&t=zwwto0ey 404 in 133ms
 GET /socket.io?EIO=4&transport=polling&t=zwwxpfe0 404 in 102ms
 GET /api/socket-health 200 in 31ms
 GET /api/socket-health 200 in 136ms
 GET /socket.io?EIO=4&transport=polling&t=zwyd431u 404 in 232ms
 GET /socket.io?EIO=4&transport=polling&t=zwygy2um 404 in 117ms
 GET /api/socket-health 200 in 27ms
 GET /api/socket-health 200 in 110ms
 GET /socket.io?EIO=4&transport=polling&t=zwzwgdhn 404 in 198ms
 GET /socket.io?EIO=4&transport=polling&t=zwzzlrp0 404 in 94ms
 GET /api/socket-health 200 in 57ms
 GET /api/socket-health 200 in 232ms
 GET /socket.io?EIO=4&transport=polling&t=zx1gscfa 404 in 236ms
 GET /socket.io?EIO=4&transport=polling&t=zx1nd4tn 404 in 479ms
 GET /api/socket-health 200 in 34ms
 GET /api/socket-health 200 in 117ms
 GET /socket.io?EIO=4&transport=polling&t=zx2zujy6 404 in 221ms
 GET /socket.io?EIO=4&transport=polling&t=zx3368hw 404 in 116ms
 GET /api/socket-health 200 in 51ms
 GET /api/socket-health 200 in 196ms
 GET /socket.io?EIO=4&transport=polling&t=zx4k072g 404 in 312ms
 GET /socket.io?EIO=4&transport=polling&t=zx4pi44m 404 in 129ms
 GET /api/socket-health 200 in 35ms
 GET /api/socket-health 200 in 165ms
 GET /socket.io?EIO=4&transport=polling&t=zx63aftx 404 in 166ms
 GET /socket.io?EIO=4&transport=polling&t=zx67x6cv 404 in 157ms
 GET /api/socket-health 200 in 37ms
 GET /api/socket-health 200 in 397ms
 GET /socket.io?EIO=4&transport=polling&t=zx7movt2 404 in 404ms
 GET /socket.io?EIO=4&transport=polling&t=zx7xeq2u 404 in 213ms
 GET /api/socket-health 200 in 41ms
 GET /api/socket-health 200 in 293ms
 GET /socket.io?EIO=4&transport=polling&t=zx96havv 404 in 310ms
 GET /socket.io?EIO=4&transport=polling&t=zx9espzd 404 in 223ms
 GET /api/socket-health 200 in 63ms
 GET /api/socket-health 200 in 276ms
 GET /socket.io?EIO=4&transport=polling&t=zxaqqppc 404 in 356ms
 GET /socket.io?EIO=4&transport=polling&t=zxaz0yfn 404 in 210ms
 GET /api/socket-health 200 in 36ms
 GET /api/socket-health 200 in 167ms
 GET /socket.io?EIO=4&transport=polling&t=zxc9dtje 404 in 281ms
 GET /socket.io?EIO=4&transport=polling&t=zxce2iq4 404 in 127ms
=== FRIEND REQUEST GET START ===
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
Request type: received User: sayantan2@gmail.com
âœ… Database connected
 GET /api/socket-health 200 in 124ms
âœ… Current user found: {
  id: new ObjectId('6901f85f42c5d010fa811206'),
  email: 'sayantan2@gmail.com',
  friendRequestsCount: 0,
  sentRequestsCount: 1
}
Processing received requests...
Raw friendRequests: []
Processed receivedRequests: []
Populating sender details...
Final populated requests: []
=== FRIEND REQUEST GET END (received) ===
 GET /api/friends/request?type=received 200 in 174ms
 GET /api/socket-health 200 in 89ms
=== FRIEND REQUEST GET START ===
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
Request type: sent User: sayantan2@gmail.com
âœ… Database connected
âœ… Current user found: {
  id: new ObjectId('6901f85f42c5d010fa811206'),
  email: 'sayantan2@gmail.com',
  friendRequestsCount: 0,
  sentRequestsCount: 1
}
Processing sent requests...
Raw sentRequests: [
  {
    from: new ObjectId('6901f85f42c5d010fa811206'),
    fromName: 'sayantan2',
    to: new ObjectId('6905adf16a22b7843b006183'),
    toName: 'sayantan3',
    status: 'pending',
    _id: new ObjectId('6905cdce14ad0d0f020b3985'),
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
Filtering sent request: { status: 'pending', to: new ObjectId('6905adf16a22b7843b006183') }
Mapping sent request: {
  from: new ObjectId('6901f85f42c5d010fa811206'),
  fromName: 'sayantan2',
  to: new ObjectId('6905adf16a22b7843b006183'),
  toName: 'sayantan3',
  status: 'pending',
  _id: new ObjectId('6905cdce14ad0d0f020b3985'),
  createdAt: 2025-11-01T09:07:26.707Z,
  updatedAt: 2025-11-01T09:07:26.707Z
}
Processed sentRequests: [
  {
    id: '6905cdce14ad0d0f020b3985',
    to: {
      id: '6905adf16a22b7843b006183',
      username: 'sayantan3',
      email: '',
      profilePicture: null
    },
    status: 'pending',
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
Populating recipient details...
Looking up recipient: 6905adf16a22b7843b006183
 GET /socket.io?EIO=4&transport=polling&t=zxdw5kvc 404 in 403ms
 GET /socket.io?EIO=4&transport=polling&t=zxdyljwu 404 in 164ms
Found recipient: sayantan3
Final populated sent requests: [
  {
    id: '6905cdce14ad0d0f020b3985',
    to: {
      id: '6905adf16a22b7843b006183',
      username: 'sayantan3',
      email: 'sayantan3@gmail.com',
      profilePicture: undefined
    },
    status: 'pending',
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
=== FRIEND REQUEST GET END (sent) ===
 GET /api/friends/request?type=sent 200 in 413ms
 GET /api/socket-health 200 in 38ms
 GET /api/socket-health 200 in 340ms
 GET /socket.io?EIO=4&transport=polling&t=zxfcc6v1 404 in 373ms
 GET /socket.io?EIO=4&transport=polling&t=zxfmachv 404 in 238ms
 GET /api/socket-health 200 in 39ms
 GET /api/socket-health 200 in 149ms
 GET /socket.io?EIO=4&transport=polling&t=zxgw46uq 404 in 270ms
 GET /socket.io?EIO=4&transport=polling&t=zxh0bydt 404 in 127ms
 GET /api/socket-health 200 in 65ms
 GET /api/socket-health 200 in 212ms
 GET /socket.io?EIO=4&transport=polling&t=zxigjfja 404 in 197ms
 GET /socket.io?EIO=4&transport=polling&t=zximjy0n 404 in 420ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
 GET /api/conversations 200 in 242ms
 GET /api/socket-health 200 in 60ms
 GET /api/socket-health 200 in 243ms
 GET /socket.io?EIO=4&transport=polling&t=zxjztznv 404 in 240ms
 GET /socket.io?EIO=4&transport=polling&t=zxk6nbbe 404 in 150ms
 GET /api/socket-health 200 in 31ms
 GET /api/socket-health 200 in 123ms
 GET /socket.io?EIO=4&transport=polling&t=zxlibolo 404 in 230ms
 GET /socket.io?EIO=4&transport=polling&t=zxllsg0o 404 in 109ms
 GET /api/socket-health 200 in 57ms
 GET /api/socket-health 200 in 214ms
 GET /socket.io?EIO=4&transport=polling&t=zxn2u20n 404 in 217ms
 GET /socket.io?EIO=4&transport=polling&t=zxn8urwd 404 in 192ms
 GET /api/socket-health 200 in 45ms
 GET /api/socket-health 200 in 172ms
 GET /socket.io?EIO=4&transport=polling&t=zxolwoxv 404 in 317ms
 GET /socket.io?EIO=4&transport=polling&t=zxoqsigi 404 in 148ms
 GET /api/socket-health 200 in 33ms
 GET /api/socket-health 200 in 112ms
 GET /socket.io?EIO=4&transport=polling&t=zxq5e3in 404 in 201ms
 GET /socket.io?EIO=4&transport=polling&t=zxq8jdud 404 in 102ms
 GET /api/socket-health 200 in 29ms
 GET /api/socket-health 200 in 107ms
 GET /socket.io?EIO=4&transport=polling&t=zxroupz1 404 in 194ms
 GET /socket.io?EIO=4&transport=polling&t=zxrrv80w 404 in 103ms
 GET /api/socket-health 200 in 26ms
 GET /api/socket-health 200 in 107ms
 GET /socket.io?EIO=4&transport=polling&t=zxt88uqe 404 in 202ms
 GET /socket.io?EIO=4&transport=polling&t=zxtb8o1s 404 in 103ms
 GET /api/socket-health 200 in 30ms
 GET /api/socket-health 200 in 108ms
 GET /socket.io?EIO=4&transport=polling&t=zxurqfao 404 in 197ms
 GET /socket.io?EIO=4&transport=polling&t=zxuut51f 404 in 95ms
 GET /api/socket-health 200 in 46ms
 GET /api/socket-health 200 in 153ms
 GET /socket.io?EIO=4&transport=polling&t=zxwbsukn 404 in 262ms
 GET /socket.io?EIO=4&transport=polling&t=zxwg5jwu 404 in 118ms
 GET /api/socket-health 200 in 43ms
 GET /api/socket-health 200 in 151ms
 GET /socket.io?EIO=4&transport=polling&t=zxxveuou 404 in 272ms
 GET /socket.io?EIO=4&transport=polling&t=zxxzpzq7 404 in 125ms
 GET /api/socket-health 200 in 27ms
 GET /api/socket-health 200 in 110ms
 GET /socket.io?EIO=4&transport=polling&t=zxzej5au 404 in 200ms
 GET /socket.io?EIO=4&transport=polling&t=zxzhnztf 404 in 104ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
=== FRIEND REQUEST GET START ===
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
Request type: received User: sayantan2@gmail.com
âœ… Database connected
 POST /api/users/heartbeat 200 in 252ms
âœ… Current user found: {
  id: new ObjectId('6901f85f42c5d010fa811206'),
  email: 'sayantan2@gmail.com',
  friendRequestsCount: 0,
  sentRequestsCount: 1
}
Processing received requests...
Raw friendRequests: []
Processed receivedRequests: []
Populating sender details...
Final populated requests: []
=== FRIEND REQUEST GET END (received) ===
 GET /api/friends/request?type=received 200 in 609ms
 GET /api/friends 200 in 612ms
=== FRIEND REQUEST GET START ===
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
Request type: sent User: sayantan2@gmail.com
âœ… Database connected
âœ… Current user found: {
  id: new ObjectId('6901f85f42c5d010fa811206'),
  email: 'sayantan2@gmail.com',
  friendRequestsCount: 0,
  sentRequestsCount: 1
}
Processing sent requests...
Raw sentRequests: [
  {
    from: new ObjectId('6901f85f42c5d010fa811206'),
    fromName: 'sayantan2',
    to: new ObjectId('6905adf16a22b7843b006183'),
    toName: 'sayantan3',
    status: 'pending',
    _id: new ObjectId('6905cdce14ad0d0f020b3985'),
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
Filtering sent request: { status: 'pending', to: new ObjectId('6905adf16a22b7843b006183') }
Mapping sent request: {
  from: new ObjectId('6901f85f42c5d010fa811206'),
  fromName: 'sayantan2',
  to: new ObjectId('6905adf16a22b7843b006183'),
  toName: 'sayantan3',
  status: 'pending',
  _id: new ObjectId('6905cdce14ad0d0f020b3985'),
  createdAt: 2025-11-01T09:07:26.707Z,
  updatedAt: 2025-11-01T09:07:26.707Z
}
Processed sentRequests: [
  {
    id: '6905cdce14ad0d0f020b3985',
    to: {
      id: '6905adf16a22b7843b006183',
      username: 'sayantan3',
      email: '',
      profilePicture: null
    },
    status: 'pending',
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
Populating recipient details...
Looking up recipient: 6905adf16a22b7843b006183
Found recipient: sayantan3
Final populated sent requests: [
  {
    id: '6905cdce14ad0d0f020b3985',
    to: {
      id: '6905adf16a22b7843b006183',
      username: 'sayantan3',
      email: 'sayantan3@gmail.com',
      profilePicture: undefined
    },
    status: 'pending',
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
=== FRIEND REQUEST GET END (sent) ===
 GET /api/friends/request?type=sent 200 in 159ms
 GET /api/socket-health 200 in 45ms
 GET /api/socket-health 200 in 169ms
 GET /socket.io?EIO=4&transport=polling&t=zy0ynki4 404 in 287ms
 GET /socket.io?EIO=4&transport=polling&t=zy13gvkt 404 in 139ms
 GET /api/socket-health 200 in 29ms
 GET /api/socket-health 200 in 117ms
 GET /socket.io?EIO=4&transport=polling&t=zy2hpf1k 404 in 212ms
 GET /socket.io?EIO=4&transport=polling&t=zy2kz0h9 404 in 100ms
 GET /api/socket-health 200 in 38ms
 GET /api/socket-health 200 in 117ms
 GET /socket.io?EIO=4&transport=polling&t=zy41g1y5 404 in 208ms
 GET /socket.io?EIO=4&transport=polling&t=zy44r7q6 404 in 103ms
 GET /api/socket-health 200 in 38ms
 GET /api/socket-health 200 in 132ms
 GET /socket.io?EIO=4&transport=polling&t=zy5l2er9 404 in 249ms
 GET /socket.io?EIO=4&transport=polling&t=zy5osz6f 404 in 128ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
 GET /api/socket-health 200 in 163ms
 GET /api/conversations 200 in 384ms
 GET /api/socket-health 200 in 852ms
 GET /socket.io?EIO=4&transport=polling&t=zy79ouco 404 in 572ms
 GET /socket.io?EIO=4&transport=polling&t=zy7wi4ga 404 in 114ms
 GET /api/socket-health 200 in 37ms
 GET /api/socket-health 200 in 130ms
 GET /socket.io?EIO=4&transport=polling&t=zy9fygzh 404 in 136ms
 GET /socket.io?EIO=4&transport=polling&t=zy9jm85m 404 in 95ms
 GET /api/socket-health 200 in 37ms
 GET /api/socket-health 200 in 152ms
 GET /socket.io?EIO=4&transport=polling&t=zyazj2nl 404 in 241ms
 GET /socket.io?EIO=4&transport=polling&t=zyb3uw7p 404 in 101ms
 GET /api/socket-health 200 in 43ms
 GET /api/socket-health 200 in 139ms
 GET /socket.io?EIO=4&transport=polling&t=zycj8mee 404 in 261ms
 GET /socket.io?EIO=4&transport=polling&t=zycn8ymv 404 in 134ms
 GET /api/socket-health 200 in 33ms
 GET /api/socket-health 200 in 150ms
 GET /socket.io?EIO=4&transport=polling&t=zye281p1 404 in 292ms
 GET /socket.io?EIO=4&transport=polling&t=zye6hho4 404 in 147ms
 GET /api/socket-health 200 in 53ms
 GET /api/socket-health 200 in 167ms
 GET /socket.io?EIO=4&transport=polling&t=zyfmfzl0 404 in 159ms
 GET /socket.io?EIO=4&transport=polling&t=zyfrczdb 404 in 114ms
 GET /api/socket-health 200 in 35ms
 GET /api/socket-health 200 in 145ms
 GET /socket.io?EIO=4&transport=polling&t=zyh5rxzj 404 in 237ms
 GET /socket.io?EIO=4&transport=polling&t=zyh9vzaj 404 in 97ms
 GET /api/socket-health 200 in 41ms
 GET /api/socket-health 200 in 164ms
 GET /socket.io?EIO=4&transport=polling&t=zyipfveu 404 in 740ms
 GET /socket.io?EIO=4&transport=polling&t=zyiu4i05 404 in 591ms
 GET /api/socket-health 200 in 34ms
 GET /api/socket-health 200 in 136ms
 GET /socket.io?EIO=4&transport=polling&t=zyk8e630 404 in 305ms
 GET /socket.io?EIO=4&transport=polling&t=zykc8o2j 404 in 181ms
 GET /api/socket-health 200 in 47ms
 GET /api/socket-health 200 in 129ms
 GET /socket.io?EIO=4&transport=polling&t=zylsi9qa 404 in 234ms
 GET /socket.io?EIO=4&transport=polling&t=zylw5mct 404 in 115ms
 GET /api/socket-health 200 in 29ms
 GET /api/socket-health 200 in 115ms
 GET /socket.io?EIO=4&transport=polling&t=zynbhmoc 404 in 216ms
 GET /socket.io?EIO=4&transport=polling&t=zyneqrre 404 in 104ms
=== FRIEND REQUEST GET START ===
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
Request type: received User: sayantan2@gmail.com
âœ… Database connected
âœ… Current user found: {
  id: new ObjectId('6901f85f42c5d010fa811206'),
  email: 'sayantan2@gmail.com',
  friendRequestsCount: 0,
  sentRequestsCount: 1
}
Processing received requests...
Raw friendRequests: []
Processed receivedRequests: []
Populating sender details...
Final populated requests: []
=== FRIEND REQUEST GET END (received) ===
 GET /api/friends/request?type=received 200 in 105ms
=== FRIEND REQUEST GET START ===
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
Request type: sent User: sayantan2@gmail.com
âœ… Database connected
âœ… Current user found: {
  id: new ObjectId('6901f85f42c5d010fa811206'),
  email: 'sayantan2@gmail.com',
  friendRequestsCount: 0,
  sentRequestsCount: 1
}
Processing sent requests...
Raw sentRequests: [
  {
    from: new ObjectId('6901f85f42c5d010fa811206'),
    fromName: 'sayantan2',
    to: new ObjectId('6905adf16a22b7843b006183'),
    toName: 'sayantan3',
    status: 'pending',
    _id: new ObjectId('6905cdce14ad0d0f020b3985'),
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
Filtering sent request: { status: 'pending', to: new ObjectId('6905adf16a22b7843b006183') }
Mapping sent request: {
  from: new ObjectId('6901f85f42c5d010fa811206'),
  fromName: 'sayantan2',
  to: new ObjectId('6905adf16a22b7843b006183'),
  toName: 'sayantan3',
  status: 'pending',
  _id: new ObjectId('6905cdce14ad0d0f020b3985'),
  createdAt: 2025-11-01T09:07:26.707Z,
  updatedAt: 2025-11-01T09:07:26.707Z
}
Processed sentRequests: [
  {
    id: '6905cdce14ad0d0f020b3985',
    to: {
      id: '6905adf16a22b7843b006183',
      username: 'sayantan3',
      email: '',
      profilePicture: null
    },
    status: 'pending',
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
Populating recipient details...
Looking up recipient: 6905adf16a22b7843b006183
Found recipient: sayantan3
Final populated sent requests: [
  {
    id: '6905cdce14ad0d0f020b3985',
    to: {
      id: '6905adf16a22b7843b006183',
      username: 'sayantan3',
      email: 'sayantan3@gmail.com',
      profilePicture: undefined
    },
    status: 'pending',
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
=== FRIEND REQUEST GET END (sent) ===
 GET /api/friends/request?type=sent 200 in 117ms
 GET /api/socket-health 200 in 46ms
 GET /api/socket-health 200 in 126ms
 GET /socket.io?EIO=4&transport=polling&t=zyovqh3a 404 in 228ms
 GET /socket.io?EIO=4&transport=polling&t=zyozbqvw 404 in 113ms
 GET /api/socket-health 200 in 36ms
 GET /api/socket-health 200 in 193ms
 GET /socket.io?EIO=4&transport=polling&t=zyqf8aol 404 in 320ms
 GET /socket.io?EIO=4&transport=polling&t=zyqkphse 404 in 138ms
 GET /api/socket-health 200 in 89ms
 GET /api/socket-health 200 in 48ms
 GET /socket.io?EIO=4&transport=polling&t=zys2xm4j 404 in 571ms
 GET /socket.io?EIO=4&transport=polling&t=zys2wuqh 404 in 576ms
 GET /api/socket-health 200 in 30ms
 GET /api/socket-health 200 in 38ms
 GET /socket.io?EIO=4&transport=polling&t=zythxzk3 404 in 221ms
 GET /socket.io?EIO=4&transport=polling&t=zytjfa9c 404 in 114ms
 GET /api/socket-health 200 in 41ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
 GET /api/socket-health 200 in 124ms
 GET /api/conversations 200 in 261ms
 GET /socket.io?EIO=4&transport=polling&t=zyv1ldty 404 in 210ms
 GET /socket.io?EIO=4&transport=polling&t=zyv57x80 404 in 108ms
 GET /api/socket-health 200 in 30ms
 GET /api/socket-health 200 in 117ms
 GET /socket.io?EIO=4&transport=polling&t=zywkvtmo 404 in 238ms
 GET /socket.io?EIO=4&transport=polling&t=zywo6kty 404 in 137ms
 GET /api/socket-health 200 in 63ms
 GET /api/socket-health 200 in 186ms
 GET /socket.io?EIO=4&transport=polling&t=zyy8q2b2 404 in 322ms
 GET /socket.io?EIO=4&transport=polling&t=zyydybw9 404 in 163ms
 GET /api/socket-health 200 in 34ms
 GET /api/socket-health 200 in 41ms
 GET /socket.io?EIO=4&transport=polling&t=zyzo5dnr 404 in 258ms
 GET /socket.io?EIO=4&transport=polling&t=zyzpcy0p 404 in 119ms
 GET /api/socket-health 200 in 35ms
 GET /api/socket-health 200 in 123ms
 GET /socket.io?EIO=4&transport=polling&t=zz17pz6r 404 in 227ms
 GET /socket.io?EIO=4&transport=polling&t=zz1b6ud8 404 in 111ms
 GET /api/socket-health 200 in 29ms
 GET /api/socket-health 200 in 41ms
 GET /socket.io?EIO=4&transport=polling&t=zz2r6cnx 404 in 242ms
 GET /socket.io?EIO=4&transport=polling&t=zz2sdt3s 404 in 130ms
 GET /api/socket-health 200 in 37ms
 GET /api/socket-health 200 in 116ms
 GET /socket.io?EIO=4&transport=polling&t=zz4awsna 404 in 213ms
 GET /socket.io?EIO=4&transport=polling&t=zz4e6pgk 404 in 109ms
 GET /api/socket-health 200 in 31ms
 GET /api/socket-health 200 in 143ms
 GET /socket.io?EIO=4&transport=polling&t=zz5udytb 404 in 232ms
 GET /socket.io?EIO=4&transport=polling&t=zz5ye1oy 404 in 104ms
 GET /api/socket-health 200 in 34ms
 GET /api/socket-health 200 in 107ms
 GET /socket.io?EIO=4&transport=polling&t=zz7e3hlz 404 in 206ms
 GET /socket.io?EIO=4&transport=polling&t=zz7h5a4s 404 in 111ms
 GET /api/socket-health 200 in 30ms
 GET /api/socket-health 200 in 37ms
 GET /socket.io?EIO=4&transport=polling&t=zz8xiz8i 404 in 218ms
 GET /socket.io?EIO=4&transport=polling&t=zz8ylz9y 404 in 116ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
=== FRIEND REQUEST GET START ===
 GET /api/socket-health 200 in 157ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
Request type: received User: sayantan2@gmail.com
âœ… Database connected
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
 GET /api/auth/session 200 in 192ms
 GET /api/friends 200 in 345ms
 GET /api/socket-health 200 in 177ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
 GET /socket.io?EIO=4&transport=polling&t=zzaldtrg 404 in 230ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
 GET /api/random-chat/queue 200 in 258ms
âœ… Current user found: {
  id: new ObjectId('6901f85f42c5d010fa811206'),
  email: 'sayantan2@gmail.com',
  friendRequestsCount: 0,
  sentRequestsCount: 1
}
Processing received requests...
Raw friendRequests: []
Processed receivedRequests: []
Populating sender details...
Final populated requests: []
=== FRIEND REQUEST GET END (received) ===
 GET /api/friends/request?type=received 200 in 634ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
 GET /api/friends 200 in 281ms
 GET /api/random-chat/session 200 in 198ms
=== FRIEND REQUEST GET START ===
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
Request type: received User: sayantan2@gmail.com
âœ… Database connected
 POST /api/users/heartbeat 200 in 875ms
=== FRIEND REQUEST GET START ===
âœ… Current user found: {
  id: new ObjectId('6901f85f42c5d010fa811206'),
  email: 'sayantan2@gmail.com',
  friendRequestsCount: 0,
  sentRequestsCount: 1
}
Processing received requests...
Raw friendRequests: []
Processed receivedRequests: []
Populating sender details...
Final populated requests: []
=== FRIEND REQUEST GET END (received) ===
 GET /api/friends/request?type=received 200 in 142ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
Request type: sent User: sayantan2@gmail.com
âœ… Database connected
 GET /socket.io?EIO=4&transport=polling&t=zzaqk16n 404 in 283ms
âœ… Current user found: {
  id: new ObjectId('6901f85f42c5d010fa811206'),
  email: 'sayantan2@gmail.com',
  friendRequestsCount: 0,
  sentRequestsCount: 1
}
Processing sent requests...
Raw sentRequests: [
  {
    from: new ObjectId('6901f85f42c5d010fa811206'),
    fromName: 'sayantan2',
    to: new ObjectId('6905adf16a22b7843b006183'),
    toName: 'sayantan3',
    status: 'pending',
    _id: new ObjectId('6905cdce14ad0d0f020b3985'),
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
Filtering sent request: { status: 'pending', to: new ObjectId('6905adf16a22b7843b006183') }
Mapping sent request: {
  from: new ObjectId('6901f85f42c5d010fa811206'),
  fromName: 'sayantan2',
  to: new ObjectId('6905adf16a22b7843b006183'),
  toName: 'sayantan3',
  status: 'pending',
  _id: new ObjectId('6905cdce14ad0d0f020b3985'),
  createdAt: 2025-11-01T09:07:26.707Z,
  updatedAt: 2025-11-01T09:07:26.707Z
}
Processed sentRequests: [
  {
    id: '6905cdce14ad0d0f020b3985',
    to: {
      id: '6905adf16a22b7843b006183',
      username: 'sayantan3',
      email: '',
      profilePicture: null
    },
    status: 'pending',
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
Populating recipient details...
Looking up recipient: 6905adf16a22b7843b006183
Found recipient: sayantan3
Final populated sent requests: [
  {
    id: '6905cdce14ad0d0f020b3985',
    to: {
      id: '6905adf16a22b7843b006183',
      username: 'sayantan3',
      email: 'sayantan3@gmail.com',
      profilePicture: undefined
    },
    status: 'pending',
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
=== FRIEND REQUEST GET END (sent) ===
 GET /api/friends/request?type=sent 200 in 196ms
 POST /api/users/heartbeat 200 in 681ms
 GET /api/users/me 200 in 672ms
=== FRIEND REQUEST GET START ===
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
Request type: sent User: sayantan2@gmail.com
âœ… Database connected
âœ… Current user found: {
  id: new ObjectId('6901f85f42c5d010fa811206'),
  email: 'sayantan2@gmail.com',
  friendRequestsCount: 0,
  sentRequestsCount: 1
}
Processing sent requests...
Raw sentRequests: [
  {
    from: new ObjectId('6901f85f42c5d010fa811206'),
    fromName: 'sayantan2',
    to: new ObjectId('6905adf16a22b7843b006183'),
    toName: 'sayantan3',
    status: 'pending',
    _id: new ObjectId('6905cdce14ad0d0f020b3985'),
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
Filtering sent request: { status: 'pending', to: new ObjectId('6905adf16a22b7843b006183') }
Mapping sent request: {
  from: new ObjectId('6901f85f42c5d010fa811206'),
  fromName: 'sayantan2',
  to: new ObjectId('6905adf16a22b7843b006183'),
  toName: 'sayantan3',
  status: 'pending',
  _id: new ObjectId('6905cdce14ad0d0f020b3985'),
  createdAt: 2025-11-01T09:07:26.707Z,
  updatedAt: 2025-11-01T09:07:26.707Z
}
Processed sentRequests: [
  {
    id: '6905cdce14ad0d0f020b3985',
    to: {
      id: '6905adf16a22b7843b006183',
      username: 'sayantan3',
      email: '',
      profilePicture: null
    },
    status: 'pending',
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
Populating recipient details...
Looking up recipient: 6905adf16a22b7843b006183
Found recipient: sayantan3
Final populated sent requests: [
  {
    id: '6905cdce14ad0d0f020b3985',
    to: {
      id: '6905adf16a22b7843b006183',
      username: 'sayantan3',
      email: 'sayantan3@gmail.com',
      profilePicture: undefined
    },
    status: 'pending',
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
=== FRIEND REQUEST GET END (sent) ===
 GET /api/friends/request?type=sent 200 in 488ms
 GET /api/socket-health 200 in 30ms
 GET /api/socket-health 200 in 132ms
 GET /socket.io?EIO=4&transport=polling&t=zzc0fwp8 404 in 256ms
 GET /socket.io?EIO=4&transport=polling&t=zzc451z6 404 in 145ms
 GET /api/socket-health 200 in 29ms
 GET /api/socket-health 200 in 104ms
 GET /socket.io?EIO=4&transport=polling&t=zzdjs6zu 404 in 192ms
 GET /socket.io?EIO=4&transport=polling&t=zzdmrhsu 404 in 93ms
 GET /api/socket-health 200 in 38ms
 GET /api/socket-health 200 in 32ms
 GET /socket.io?EIO=4&transport=polling&t=zzf4ynuq 404 in 233ms
 GET /socket.io?EIO=4&transport=polling&t=zzf5vw9x 404 in 106ms
 GET /api/socket-health 200 in 29ms
 GET /api/socket-health 200 in 112ms
 GET /socket.io?EIO=4&transport=polling&t=zzgn7vko 404 in 228ms
 GET /socket.io?EIO=4&transport=polling&t=zzgqcf3b 404 in 125ms
 GET /api/socket-health 200 in 28ms
 GET /api/socket-health 200 in 27ms
 GET /socket.io?EIO=4&transport=polling&t=zzi6swst 404 in 206ms
 GET /socket.io?EIO=4&transport=polling&t=zzi7lii1 404 in 104ms
 GET /api/socket-health 200 in 28ms
 GET /api/socket-health 200 in 35ms
 GET /socket.io?EIO=4&transport=polling&t=zzjqd503 404 in 198ms
 GET /socket.io?EIO=4&transport=polling&t=zzjrfaea 404 in 103ms
 GET /api/socket-health 200 in 30ms
 GET /api/socket-health 200 in 109ms
 GET /socket.io?EIO=4&transport=polling&t=zzl9xsv0 404 in 197ms
 GET /socket.io?EIO=4&transport=polling&t=zzlczl71 404 in 101ms
 GET /api/socket-health 200 in 29ms
 GET /api/socket-health 200 in 114ms
 GET /socket.io?EIO=4&transport=polling&t=zzmthrtp 404 in 196ms
 GET /socket.io?EIO=4&transport=polling&t=zzmwrn55 404 in 98ms
 GET /api/socket-health 200 in 29ms
 GET /api/socket-health 200 in 133ms
 GET /socket.io?EIO=4&transport=polling&t=zzocx8kz 404 in 223ms
 GET /socket.io?EIO=4&transport=polling&t=zzogpwgt 404 in 106ms
 GET /api/socket-health 200 in 32ms
 GET /api/socket-health 200 in 47ms
 GET /socket.io?EIO=4&transport=polling&t=zzpwhl2a 404 in 349ms
 GET /socket.io?EIO=4&transport=polling&t=zzpxtd7p 404 in 139ms
 GET /api/socket-health 200 in 50ms
 GET /api/socket-health 200 in 66ms
 GET /socket.io?EIO=4&transport=polling&t=zzrhrhxo 404 in 402ms
 GET /socket.io?EIO=4&transport=polling&t=zzrjlgzg 404 in 185ms
 GET /api/socket-health 200 in 40ms
 GET /api/socket-health 200 in 123ms
 GET /socket.io?EIO=4&transport=polling&t=zzszwxt8 404 in 217ms
 GET /socket.io?EIO=4&transport=polling&t=zzt3e29e 404 in 108ms
 GET /api/socket-health 200 in 29ms
 GET /api/socket-health 200 in 117ms
 GET /socket.io?EIO=4&transport=polling&t=zzuj6523 404 in 210ms
 GET /socket.io?EIO=4&transport=polling&t=zzumi4eo 404 in 101ms
 GET /api/socket-health 200 in 36ms
 GET /api/socket-health 200 in 119ms
 GET /socket.io?EIO=4&transport=polling&t=zzw2rglf 404 in 213ms
 GET /socket.io?EIO=4&transport=polling&t=zzw6450b 404 in 109ms
 GET /api/socket-health 200 in 30ms
 GET /api/socket-health 200 in 128ms
 GET /socket.io?EIO=4&transport=polling&t=zzxm5wsb 404 in 224ms
 GET /socket.io?EIO=4&transport=polling&t=zzxpt85q 404 in 107ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
 POST /api/users/heartbeat 200 in 192ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
=== FRIEND REQUEST GET START ===
 GET /api/socket-health 200 in 71ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
Request type: received User: sayantan2@gmail.com
âœ… Database connected
 GET /api/socket-health 200 in 114ms
 GET /api/conversations 200 in 310ms
 GET /socket.io?EIO=4&transport=polling&t=zzz6tjsj 404 in 228ms
 GET /socket.io?EIO=4&transport=polling&t=zzza4nps 404 in 128ms
âœ… Current user found: {
  id: new ObjectId('6901f85f42c5d010fa811206'),
  email: 'sayantan2@gmail.com',
  friendRequestsCount: 0,
  sentRequestsCount: 1
}
Processing received requests...
Raw friendRequests: []
Processed receivedRequests: []
Populating sender details...
Final populated requests: []
=== FRIEND REQUEST GET END (received) ===
 GET /api/friends/request?type=received 200 in 600ms
=== FRIEND REQUEST GET START ===
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
Request type: sent User: sayantan2@gmail.com
âœ… Database connected
âœ… Current user found: {
  id: new ObjectId('6901f85f42c5d010fa811206'),
  email: 'sayantan2@gmail.com',
  friendRequestsCount: 0,
  sentRequestsCount: 1
}
Processing sent requests...
Raw sentRequests: [
  {
    from: new ObjectId('6901f85f42c5d010fa811206'),
    fromName: 'sayantan2',
    to: new ObjectId('6905adf16a22b7843b006183'),
    toName: 'sayantan3',
    status: 'pending',
    _id: new ObjectId('6905cdce14ad0d0f020b3985'),
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
Filtering sent request: { status: 'pending', to: new ObjectId('6905adf16a22b7843b006183') }
Mapping sent request: {
  from: new ObjectId('6901f85f42c5d010fa811206'),
  fromName: 'sayantan2',
  to: new ObjectId('6905adf16a22b7843b006183'),
  toName: 'sayantan3',
  status: 'pending',
  _id: new ObjectId('6905cdce14ad0d0f020b3985'),
  createdAt: 2025-11-01T09:07:26.707Z,
  updatedAt: 2025-11-01T09:07:26.707Z
}
Processed sentRequests: [
  {
    id: '6905cdce14ad0d0f020b3985',
    to: {
      id: '6905adf16a22b7843b006183',
      username: 'sayantan3',
      email: '',
      profilePicture: null
    },
    status: 'pending',
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
Populating recipient details...
Looking up recipient: 6905adf16a22b7843b006183
Found recipient: sayantan3
Final populated sent requests: [
  {
    id: '6905cdce14ad0d0f020b3985',
    to: {
      id: '6905adf16a22b7843b006183',
      username: 'sayantan3',
      email: 'sayantan3@gmail.com',
      profilePicture: undefined
    },
    status: 'pending',
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
=== FRIEND REQUEST GET END (sent) ===
 GET /api/friends/request?type=sent 200 in 122ms
 GET /api/socket-health 200 in 47ms
 GET /api/socket-health 200 in 131ms
 GET /socket.io?EIO=4&transport=polling&t=000pym1m 404 in 235ms
 GET /socket.io?EIO=4&transport=polling&t=000tnvu8 404 in 119ms
 GET /api/socket-health 200 in 32ms
 GET /api/socket-health 200 in 127ms
 GET /socket.io?EIO=4&transport=polling&t=0029pdva 404 in 223ms
 GET /socket.io?EIO=4&transport=polling&t=002dc6j8 404 in 112ms
 GET /api/socket-health 200 in 36ms
 GET /api/socket-health 200 in 124ms
 GET /socket.io?EIO=4&transport=polling&t=003smlaj 404 in 217ms
 GET /socket.io?EIO=4&transport=polling&t=003w5rav 404 in 110ms
 GET /api/socket-health 200 in 39ms
 GET /api/socket-health 200 in 144ms
 GET /socket.io?EIO=4&transport=polling&t=005c2sry 404 in 245ms
 GET /socket.io?EIO=4&transport=polling&t=005g4jco 404 in 113ms
 GET /api/socket-health 200 in 38ms
 GET /api/socket-health 200 in 152ms
 GET /socket.io?EIO=4&transport=polling&t=006vzytp 404 in 247ms
 GET /socket.io?EIO=4&transport=polling&t=0070awgb 404 in 107ms
 GET /api/socket-health 200 in 30ms
 GET /api/socket-health 200 in 134ms
 GET /socket.io?EIO=4&transport=polling&t=008fblp1 404 in 250ms
 GET /socket.io?EIO=4&transport=polling&t=008j2kp7 404 in 131ms
 GET /api/socket-health 200 in 37ms
 GET /api/socket-health 200 in 159ms
 GET /socket.io?EIO=4&transport=polling&t=009ytmug 404 in 285ms
 GET /socket.io?EIO=4&transport=polling&t=00a3b9qk 404 in 152ms
 GET /api/socket-health 200 in 28ms
 GET /api/socket-health 200 in 110ms
 GET /socket.io?EIO=4&transport=polling&t=00bi0tkp 404 in 199ms
 GET /socket.io?EIO=4&transport=polling&t=00bl382l 404 in 102ms
 GET /api/socket-health 200 in 31ms
 GET /api/socket-health 200 in 129ms
 GET /socket.io?EIO=4&transport=polling&t=00d21i6j 404 in 230ms
 GET /socket.io?EIO=4&transport=polling&t=00d5pcgh 404 in 116ms
 GET /api/socket-health 200 in 28ms
 GET /api/socket-health 200 in 121ms
 GET /socket.io?EIO=4&transport=polling&t=00elgl9d 404 in 208ms
 GET /socket.io?EIO=4&transport=polling&t=00eoupgn 404 in 106ms
 GET /api/socket-health 200 in 30ms
 GET /api/socket-health 200 in 30ms
 GET /socket.io?EIO=4&transport=polling&t=00g51u1w 404 in 224ms
 GET /socket.io?EIO=4&transport=polling&t=00g5xp1u 404 in 126ms
 GET /api/socket-health 200 in 39ms
 GET /api/socket-health 200 in 142ms
 GET /socket.io?EIO=4&transport=polling&t=00how3yd 404 in 241ms
 GET /socket.io?EIO=4&transport=polling&t=00hsx74t 404 in 114ms
 GET /api/socket-health 200 in 27ms
 GET /api/socket-health 200 in 36ms
 GET /socket.io?EIO=4&transport=polling&t=00j7xmqu 404 in 216ms
 GET /socket.io?EIO=4&transport=polling&t=00j91n56 404 in 117ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
=== FRIEND REQUEST GET START ===
 GET /api/socket-health 200 in 83ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
Request type: received User: sayantan2@gmail.com
âœ… Database connected
âœ… Current user found: {
  id: new ObjectId('6901f85f42c5d010fa811206'),
  email: 'sayantan2@gmail.com',
  friendRequestsCount: 0,
  sentRequestsCount: 1
}
Processing received requests...
Raw friendRequests: []
Processed receivedRequests: []
Populating sender details...
Final populated requests: []
=== FRIEND REQUEST GET END (received) ===
 GET /api/friends/request?type=received 200 in 188ms
 GET /api/friends 200 in 193ms
 GET /api/socket-health 200 in 121ms
=== FRIEND REQUEST GET START ===
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
Request type: sent User: sayantan2@gmail.com
âœ… Database connected
 GET /socket.io?EIO=4&transport=polling&t=00ktasmz 404 in 234ms
 GET /socket.io?EIO=4&transport=polling&t=00kwtcyy 404 in 121ms
âœ… Current user found: {
  id: new ObjectId('6901f85f42c5d010fa811206'),
  email: 'sayantan2@gmail.com',
  friendRequestsCount: 0,
  sentRequestsCount: 1
}
Processing sent requests...
Raw sentRequests: [
  {
    from: new ObjectId('6901f85f42c5d010fa811206'),
    fromName: 'sayantan2',
    to: new ObjectId('6905adf16a22b7843b006183'),
    toName: 'sayantan3',
    status: 'pending',
    _id: new ObjectId('6905cdce14ad0d0f020b3985'),
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
Filtering sent request: { status: 'pending', to: new ObjectId('6905adf16a22b7843b006183') }
Mapping sent request: {
  from: new ObjectId('6901f85f42c5d010fa811206'),
  fromName: 'sayantan2',
  to: new ObjectId('6905adf16a22b7843b006183'),
  toName: 'sayantan3',
  status: 'pending',
  _id: new ObjectId('6905cdce14ad0d0f020b3985'),
  createdAt: 2025-11-01T09:07:26.707Z,
  updatedAt: 2025-11-01T09:07:26.707Z
}
Processed sentRequests: [
  {
    id: '6905cdce14ad0d0f020b3985',
    to: {
      id: '6905adf16a22b7843b006183',
      username: 'sayantan3',
      email: '',
      profilePicture: null
    },
    status: 'pending',
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
Populating recipient details...
Looking up recipient: 6905adf16a22b7843b006183
Found recipient: sayantan3
Final populated sent requests: [
  {
    id: '6905cdce14ad0d0f020b3985',
    to: {
      id: '6905adf16a22b7843b006183',
      username: 'sayantan3',
      email: 'sayantan3@gmail.com',
      profilePicture: undefined
    },
    status: 'pending',
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
=== FRIEND REQUEST GET END (sent) ===
 GET /api/friends/request?type=sent 200 in 204ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
 POST /api/users/heartbeat 200 in 184ms
 GET /api/socket-health 200 in 36ms
 GET /api/socket-health 200 in 132ms
 GET /socket.io?EIO=4&transport=polling&t=00mb4u8b 404 in 226ms
 GET /socket.io?EIO=4&transport=polling&t=00meuvso 404 in 107ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
 GET /api/conversations 200 in 133ms
 GET /api/socket-health 200 in 41ms
 GET /api/socket-health 200 in 28ms
 GET /socket.io?EIO=4&transport=polling&t=00nusw58 404 in 216ms
 GET /socket.io?EIO=4&transport=polling&t=00nvmz50 404 in 108ms
 GET /api/socket-health 200 in 35ms
 GET /api/socket-health 200 in 45ms
 GET /socket.io?EIO=4&transport=polling&t=00pfaybf 404 in 219ms
 GET /socket.io?EIO=4&transport=polling&t=00pgmm0m 404 in 107ms
 GET /api/socket-health 200 in 38ms
 GET /api/socket-health 200 in 115ms
 GET /socket.io?EIO=4&transport=polling&t=00qy8ief 404 in 199ms
 GET /socket.io?EIO=4&transport=polling&t=00r1hi3e 404 in 94ms
 GET /api/socket-health 200 in 27ms
 GET /api/socket-health 200 in 115ms
 GET /socket.io?EIO=4&transport=polling&t=00sh3cpc 404 in 221ms
 GET /socket.io?EIO=4&transport=polling&t=00skc7o4 404 in 118ms
 GET /api/socket-health 200 in 40ms
 GET /api/socket-health 200 in 133ms
 GET /socket.io?EIO=4&transport=polling&t=00u1iycx 404 in 235ms
 GET /socket.io?EIO=4&transport=polling&t=00u59fhk 404 in 117ms
 GET /api/socket-health 200 in 27ms
 GET /api/socket-health 200 in 115ms
 GET /socket.io?EIO=4&transport=polling&t=00vkhx2d 404 in 210ms
 GET /socket.io?EIO=4&transport=polling&t=00vnq8jd 404 in 104ms
 GET /api/socket-health 200 in 29ms
 GET /api/socket-health 200 in 111ms
 GET /socket.io?EIO=4&transport=polling&t=00x448re 404 in 193ms
 GET /socket.io?EIO=4&transport=polling&t=00x79nf0 404 in 94ms
 GET /api/socket-health 200 in 32ms
 GET /api/socket-health 200 in 121ms
 GET /socket.io?EIO=4&transport=polling&t=00ynow84 404 in 228ms
 GET /socket.io?EIO=4&transport=polling&t=00yr2w2w 404 in 123ms
 GET /api/socket-health 200 in 32ms
 GET /api/socket-health 200 in 242ms
 GET /socket.io?EIO=4&transport=polling&t=0107cg1a 404 in 337ms
 GET /socket.io?EIO=4&transport=polling&t=010e3i4c 404 in 111ms
 GET /api/socket-health 200 in 50ms
 GET /api/socket-health 200 in 68ms
 GET /socket.io?EIO=4&transport=polling&t=011riyxf 404 in 383ms
 GET /socket.io?EIO=4&transport=polling&t=011tgryc 404 in 231ms
 GET /api/socket-health 200 in 36ms
 GET /api/socket-health 200 in 140ms
 GET /socket.io?EIO=4&transport=polling&t=013ak0r4 404 in 242ms
 GET /socket.io?EIO=4&transport=polling&t=013ejmjk 404 in 121ms
 GET /api/socket-health 200 in 33ms
 GET /api/socket-health 200 in 124ms
 GET /socket.io?EIO=4&transport=polling&t=014u1ezy 404 in 216ms
 GET /socket.io?EIO=4&transport=polling&t=014xjv7n 404 in 111ms
 GET /api/socket-health 200 in 34ms
 GET /api/socket-health 200 in 130ms
 GET /socket.io?EIO=4&transport=polling&t=016dk2w3 404 in 219ms
 GET /socket.io?EIO=4&transport=polling&t=016h8l2a 404 in 105ms
 GET /api/socket-health 200 in 29ms
 GET /api/socket-health 200 in 131ms
 GET /socket.io?EIO=4&transport=polling&t=017wwds7 404 in 196ms
 GET /socket.io?EIO=4&transport=polling&t=0180llfd 404 in 94ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
=== FRIEND REQUEST GET START ===
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
Request type: received User: sayantan2@gmail.com
âœ… Database connected
 POST /api/users/heartbeat 200 in 289ms
âœ… Current user found: {
  id: new ObjectId('6901f85f42c5d010fa811206'),
  email: 'sayantan2@gmail.com',
  friendRequestsCount: 0,
  sentRequestsCount: 1
}
Processing received requests...
Raw friendRequests: []
Processed receivedRequests: []
Populating sender details...
Final populated requests: []
=== FRIEND REQUEST GET END (received) ===
 GET /api/friends/request?type=received 200 in 1048ms
 GET /api/socket-health 200 in 48ms
=== FRIEND REQUEST GET START ===
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
Request type: sent User: sayantan2@gmail.com
âœ… Database connected
 GET /api/socket-health 200 in 153ms
âœ… Current user found: {
  id: new ObjectId('6901f85f42c5d010fa811206'),
  email: 'sayantan2@gmail.com',
  friendRequestsCount: 0,
  sentRequestsCount: 1
}
Processing sent requests...
Raw sentRequests: [
  {
    from: new ObjectId('6901f85f42c5d010fa811206'),
    fromName: 'sayantan2',
    to: new ObjectId('6905adf16a22b7843b006183'),
    toName: 'sayantan3',
    status: 'pending',
    _id: new ObjectId('6905cdce14ad0d0f020b3985'),
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
Filtering sent request: { status: 'pending', to: new ObjectId('6905adf16a22b7843b006183') }
Mapping sent request: {
  from: new ObjectId('6901f85f42c5d010fa811206'),
  fromName: 'sayantan2',
  to: new ObjectId('6905adf16a22b7843b006183'),
  toName: 'sayantan3',
  status: 'pending',
  _id: new ObjectId('6905cdce14ad0d0f020b3985'),
  createdAt: 2025-11-01T09:07:26.707Z,
  updatedAt: 2025-11-01T09:07:26.707Z
}
Processed sentRequests: [
  {
    id: '6905cdce14ad0d0f020b3985',
    to: {
      id: '6905adf16a22b7843b006183',
      username: 'sayantan3',
      email: '',
      profilePicture: null
    },
    status: 'pending',
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
Populating recipient details...
Looking up recipient: 6905adf16a22b7843b006183
 GET /socket.io?EIO=4&transport=polling&t=019gv9n1 404 in 244ms
 GET /socket.io?EIO=4&transport=polling&t=019l953e 404 in 114ms
Found recipient: sayantan3
Final populated sent requests: [
  {
    id: '6905cdce14ad0d0f020b3985',
    to: {
      id: '6905adf16a22b7843b006183',
      username: 'sayantan3',
      email: 'sayantan3@gmail.com',
      profilePicture: undefined
    },
    status: 'pending',
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
=== FRIEND REQUEST GET END (sent) ===
 GET /api/friends/request?type=sent 200 in 350ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
 GET /api/socket-health 200 in 144ms
 GET /api/conversations 200 in 251ms
 GET /api/socket-health 200 in 109ms
 GET /socket.io?EIO=4&transport=polling&t=01b4bhl1 404 in 398ms
 GET /socket.io?EIO=4&transport=polling&t=01b6mdco 404 in 189ms
 GET /api/socket-health 200 in 31ms
 GET /api/socket-health 200 in 49ms
 GET /socket.io?EIO=4&transport=polling&t=01cla502 404 in 267ms
 GET /socket.io?EIO=4&transport=polling&t=01cmpfe8 404 in 145ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
=== FRIEND REQUEST GET START ===
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
Request type: received User: sayantan2@gmail.com
âœ… Database connected
âœ… Current user found: {
  id: new ObjectId('6901f85f42c5d010fa811206'),
  email: 'sayantan2@gmail.com',
  friendRequestsCount: 0,
  sentRequestsCount: 1
}
Processing received requests...
Raw friendRequests: []
Processed receivedRequests: []
Populating sender details...
Final populated requests: []
=== FRIEND REQUEST GET END (received) ===
 GET /api/friends/request?type=received 200 in 148ms
 GET /api/friends 200 in 184ms
=== FRIEND REQUEST GET START ===
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
Request type: sent User: sayantan2@gmail.com
âœ… Database connected
âœ… Current user found: {
  id: new ObjectId('6901f85f42c5d010fa811206'),
  email: 'sayantan2@gmail.com',
  friendRequestsCount: 0,
  sentRequestsCount: 1
}
Processing sent requests...
Raw sentRequests: [
  {
    from: new ObjectId('6901f85f42c5d010fa811206'),
    fromName: 'sayantan2',
    to: new ObjectId('6905adf16a22b7843b006183'),
    toName: 'sayantan3',
    status: 'pending',
    _id: new ObjectId('6905cdce14ad0d0f020b3985'),
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
Filtering sent request: { status: 'pending', to: new ObjectId('6905adf16a22b7843b006183') }
Mapping sent request: {
  from: new ObjectId('6901f85f42c5d010fa811206'),
  fromName: 'sayantan2',
  to: new ObjectId('6905adf16a22b7843b006183'),
  toName: 'sayantan3',
  status: 'pending',
  _id: new ObjectId('6905cdce14ad0d0f020b3985'),
  createdAt: 2025-11-01T09:07:26.707Z,
  updatedAt: 2025-11-01T09:07:26.707Z
}
Processed sentRequests: [
  {
    id: '6905cdce14ad0d0f020b3985',
    to: {
      id: '6905adf16a22b7843b006183',
      username: 'sayantan3',
      email: '',
      profilePicture: null
    },
    status: 'pending',
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
Populating recipient details...
Looking up recipient: 6905adf16a22b7843b006183
Found recipient: sayantan3
Final populated sent requests: [
  {
    id: '6905cdce14ad0d0f020b3985',
    to: {
      id: '6905adf16a22b7843b006183',
      username: 'sayantan3',
      email: 'sayantan3@gmail.com',
      profilePicture: undefined
    },
    status: 'pending',
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
=== FRIEND REQUEST GET END (sent) ===
 GET /api/friends/request?type=sent 200 in 142ms
 GET /api/socket-health 200 in 77ms
 GET /api/socket-health 200 in 194ms
 GET /socket.io?EIO=4&transport=polling&t=01e8e2ip 404 in 337ms
 GET /socket.io?EIO=4&transport=polling&t=01eduln7 404 in 161ms
 GET /api/socket-health 200 in 34ms
 GET /api/socket-health 200 in 133ms
 GET /socket.io?EIO=4&transport=polling&t=01fmo855 404 in 235ms
 GET /socket.io?EIO=4&transport=polling&t=01fqhzgh 404 in 119ms
 GET /api/socket-health 200 in 34ms
 GET /api/socket-health 200 in 37ms
 GET /socket.io?EIO=4&transport=polling&t=01h68tsn 404 in 340ms
 GET /socket.io?EIO=4&transport=polling&t=01h7b7r5 404 in 171ms
 GET /api/socket-health 200 in 39ms
 GET /api/socket-health 200 in 152ms
 GET /socket.io?EIO=4&transport=polling&t=01iq98y8 404 in 276ms
 GET /socket.io?EIO=4&transport=polling&t=01iuk9h6 404 in 150ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
=== FRIEND REQUEST GET START ===
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
Request type: received User: sayantan2@gmail.com
âœ… Database connected
âœ… Current user found: {
  id: new ObjectId('6901f85f42c5d010fa811206'),
  email: 'sayantan2@gmail.com',
  friendRequestsCount: 0,
  sentRequestsCount: 1
}
Processing received requests...
Raw friendRequests: []
Processed receivedRequests: []
Populating sender details...
Final populated requests: []
=== FRIEND REQUEST GET END (received) ===
 GET /api/friends/request?type=received 200 in 131ms
 GET /api/friends 200 in 166ms
=== FRIEND REQUEST GET START ===
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
Request type: sent User: sayantan2@gmail.com
âœ… Database connected
âœ… Current user found: {
  id: new ObjectId('6901f85f42c5d010fa811206'),
  email: 'sayantan2@gmail.com',
  friendRequestsCount: 0,
  sentRequestsCount: 1
}
Processing sent requests...
Raw sentRequests: [
  {
    from: new ObjectId('6901f85f42c5d010fa811206'),
    fromName: 'sayantan2',
    to: new ObjectId('6905adf16a22b7843b006183'),
    toName: 'sayantan3',
    status: 'pending',
    _id: new ObjectId('6905cdce14ad0d0f020b3985'),
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
Filtering sent request: { status: 'pending', to: new ObjectId('6905adf16a22b7843b006183') }
Mapping sent request: {
  from: new ObjectId('6901f85f42c5d010fa811206'),
  fromName: 'sayantan2',
  to: new ObjectId('6905adf16a22b7843b006183'),
  toName: 'sayantan3',
  status: 'pending',
  _id: new ObjectId('6905cdce14ad0d0f020b3985'),
  createdAt: 2025-11-01T09:07:26.707Z,
  updatedAt: 2025-11-01T09:07:26.707Z
}
Processed sentRequests: [
  {
    id: '6905cdce14ad0d0f020b3985',
    to: {
      id: '6905adf16a22b7843b006183',
      username: 'sayantan3',
      email: '',
      profilePicture: null
    },
    status: 'pending',
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
Populating recipient details...
Looking up recipient: 6905adf16a22b7843b006183
Found recipient: sayantan3
Final populated sent requests: [
  {
    id: '6905cdce14ad0d0f020b3985',
    to: {
      id: '6905adf16a22b7843b006183',
      username: 'sayantan3',
      email: 'sayantan3@gmail.com',
      profilePicture: undefined
    },
    status: 'pending',
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
=== FRIEND REQUEST GET END (sent) ===
 GET /api/friends/request?type=sent 200 in 175ms
 GET /api/socket-health 200 in 37ms
 GET /api/socket-health 200 in 41ms
 GET /socket.io?EIO=4&transport=polling&t=01k9imhu 404 in 256ms
 GET /socket.io?EIO=4&transport=polling&t=01kap88u 404 in 117ms
 GET /api/socket-health 200 in 33ms
 GET /api/socket-health 200 in 111ms
 GET /socket.io?EIO=4&transport=polling&t=01lsvpfu 404 in 203ms
 GET /socket.io?EIO=4&transport=polling&t=01lvzmus 404 in 103ms
 GET /api/socket-health 200 in 40ms
 GET /api/socket-health 200 in 61ms
 GET /socket.io?EIO=4&transport=polling&t=01nco09n 404 in 340ms
 GET /socket.io?EIO=4&transport=polling&t=01negpvd 404 in 182ms
 GET /api/socket-health 200 in 41ms
 GET /api/socket-health 200 in 215ms
 GET /socket.io?EIO=4&transport=polling&t=01owcext 404 in 376ms
 GET /socket.io?EIO=4&transport=polling&t=01p2durv 404 in 171ms
 GET /api/socket-health 200 in 37ms
 GET /api/socket-health 200 in 54ms
 GET /socket.io?EIO=4&transport=polling&t=01qfmld6 404 in 257ms
 GET /socket.io?EIO=4&transport=polling&t=01qh6g1v 404 in 127ms
 GET /api/socket-health 200 in 45ms
 GET /api/socket-health 200 in 424ms
 GET /socket.io?EIO=4&transport=polling&t=01s5x0yy 404 in 559ms
 GET /socket.io?EIO=4&transport=polling&t=01shvevb 404 in 167ms
 GET /api/socket-health 200 in 65ms
 GET /api/socket-health 200 in 223ms
 GET /socket.io?EIO=4&transport=polling&t=01ttplxy 404 in 336ms
 GET /socket.io?EIO=4&transport=polling&t=01u03hjv 404 in 132ms
 GET /api/socket-health 200 in 56ms
 GET /api/socket-health 200 in 62ms
 GET /socket.io?EIO=4&transport=polling&t=01v35zs1 404 in 231ms
 GET /socket.io?EIO=4&transport=polling&t=01v4wqba 404 in 99ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
 POST /api/users/heartbeat 200 in 239ms
 GET /api/socket-health 200 in 71ms
 GET /api/socket-health 200 in 245ms
 GET /socket.io?EIO=4&transport=polling&t=01wnc33t 404 in 363ms
 GET /socket.io?EIO=4&transport=polling&t=01wu7tot 404 in 157ms
 GET /api/socket-health 200 in 51ms
 GET /api/socket-health 200 in 215ms
 GET /socket.io?EIO=4&transport=polling&t=01y64tkh 404 in 367ms
 GET /socket.io?EIO=4&transport=polling&t=01ycbrsd 404 in 182ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
 GET /api/conversations 200 in 175ms
 GET /api/socket-health 200 in 37ms
 GET /api/socket-health 200 in 32ms
 GET /socket.io?EIO=4&transport=polling&t=01zqk2g2 404 in 228ms
 GET /socket.io?EIO=4&transport=polling&t=01zqlysx 404 in 228ms
 GET /api/socket-health 200 in 34ms
 GET /api/socket-health 200 in 122ms
 GET /socket.io?EIO=4&transport=polling&t=0218mhns 404 in 215ms
 GET /socket.io?EIO=4&transport=polling&t=021c1r08 404 in 109ms
 GET /api/socket-health 200 in 31ms
 GET /api/socket-health 200 in 66ms
 GET /socket.io?EIO=4&transport=polling&t=022rw7gp 404 in 413ms
 GET /socket.io?EIO=4&transport=polling&t=022ttcpq 404 in 203ms
 GET /api/socket-health 200 in 29ms
 GET /api/socket-health 200 in 112ms
 GET /socket.io?EIO=4&transport=polling&t=024brq6u 404 in 223ms
 GET /socket.io?EIO=4&transport=polling&t=024ex6d1 404 in 121ms
 GET /api/socket-health 200 in 31ms
 GET /api/socket-health 200 in 42ms
 GET /socket.io?EIO=4&transport=polling&t=025vd40q 404 in 217ms
 GET /socket.io?EIO=4&transport=polling&t=025wltxt 404 in 108ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
=== FRIEND REQUEST GET START ===
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
Request type: received User: sayantan2@gmail.com
âœ… Database connected
âœ… Current user found: {
  id: new ObjectId('6901f85f42c5d010fa811206'),
  email: 'sayantan2@gmail.com',
  friendRequestsCount: 0,
  sentRequestsCount: 1
}
Processing received requests...
Raw friendRequests: []
Processed receivedRequests: []
Populating sender details...
Final populated requests: []
=== FRIEND REQUEST GET END (received) ===
 GET /api/friends/request?type=received 200 in 120ms
 GET /api/friends 200 in 140ms
=== FRIEND REQUEST GET START ===
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
Request type: sent User: sayantan2@gmail.com
âœ… Database connected
âœ… Current user found: {
  id: new ObjectId('6901f85f42c5d010fa811206'),
  email: 'sayantan2@gmail.com',
  friendRequestsCount: 0,
  sentRequestsCount: 1
}
Processing sent requests...
Raw sentRequests: [
  {
    from: new ObjectId('6901f85f42c5d010fa811206'),
    fromName: 'sayantan2',
    to: new ObjectId('6905adf16a22b7843b006183'),
    toName: 'sayantan3',
    status: 'pending',
    _id: new ObjectId('6905cdce14ad0d0f020b3985'),
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
Filtering sent request: { status: 'pending', to: new ObjectId('6905adf16a22b7843b006183') }
Mapping sent request: {
  from: new ObjectId('6901f85f42c5d010fa811206'),
  fromName: 'sayantan2',
  to: new ObjectId('6905adf16a22b7843b006183'),
  toName: 'sayantan3',
  status: 'pending',
  _id: new ObjectId('6905cdce14ad0d0f020b3985'),
  createdAt: 2025-11-01T09:07:26.707Z,
  updatedAt: 2025-11-01T09:07:26.707Z
}
Processed sentRequests: [
  {
    id: '6905cdce14ad0d0f020b3985',
    to: {
      id: '6905adf16a22b7843b006183',
      username: 'sayantan3',
      email: '',
      profilePicture: null
    },
    status: 'pending',
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
Populating recipient details...
Looking up recipient: 6905adf16a22b7843b006183
Found recipient: sayantan3
Final populated sent requests: [
  {
    id: '6905cdce14ad0d0f020b3985',
    to: {
      id: '6905adf16a22b7843b006183',
      username: 'sayantan3',
      email: 'sayantan3@gmail.com',
      profilePicture: undefined
    },
    status: 'pending',
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
=== FRIEND REQUEST GET END (sent) ===
 GET /api/friends/request?type=sent 200 in 141ms
 GET /api/socket-health 200 in 30ms
 GET /api/socket-health 200 in 119ms
 GET /socket.io?EIO=4&transport=polling&t=027eojmh 404 in 207ms
 GET /socket.io?EIO=4&transport=polling&t=027i1od4 404 in 105ms
 GET /api/socket-health 200 in 37ms
 GET /api/socket-health 200 in 124ms
 GET /socket.io?EIO=4&transport=polling&t=028yfspm 404 in 228ms
 GET /socket.io?EIO=4&transport=polling&t=0291xwql 404 in 118ms
 GET /api/socket-health 200 in 39ms
 GET /api/socket-health 200 in 240ms
 GET /socket.io?EIO=4&transport=polling&t=02aialxb 404 in 370ms
 GET /socket.io?EIO=4&transport=polling&t=02ap0sva 404 in 146ms
 GET /api/socket-health 200 in 30ms
 GET /api/socket-health 200 in 38ms
 GET /socket.io?EIO=4&transport=polling&t=02c1i0hs 404 in 289ms
 GET /socket.io?EIO=4&transport=polling&t=02c2mb02 404 in 165ms
 GET /api/socket-health 200 in 46ms
 GET /api/socket-health 200 in 141ms
 GET /socket.io?EIO=4&transport=polling&t=02dll2ms 404 in 243ms
 GET /socket.io?EIO=4&transport=polling&t=02dpk3jo 404 in 124ms
 GET /api/socket-health 200 in 32ms
 GET /api/socket-health 200 in 33ms
 GET /socket.io?EIO=4&transport=polling&t=02f4jfyr 404 in 217ms
 GET /socket.io?EIO=4&transport=polling&t=02f5ium4 404 in 110ms
 GET /api/socket-health 200 in 30ms
 GET /api/socket-health 200 in 125ms
 GET /socket.io?EIO=4&transport=polling&t=02gnzgqj 404 in 233ms
 GET /socket.io?EIO=4&transport=polling&t=02grkiqe 404 in 125ms
 GET /api/socket-health 200 in 47ms
 GET /api/socket-health 200 in 55ms
 GET /socket.io?EIO=4&transport=polling&t=02i8buwp 404 in 293ms
 GET /socket.io?EIO=4&transport=polling&t=02i9wzo9 404 in 150ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
 POST /api/users/heartbeat 200 in 218ms
 GET /api/socket-health 200 in 45ms
 GET /api/socket-health 200 in 34ms
 GET /socket.io?EIO=4&transport=polling&t=02jrnooj 404 in 351ms
 GET /socket.io?EIO=4&transport=polling&t=02jspof4 404 in 147ms
 GET /api/socket-health 200 in 31ms
 GET /api/socket-health 200 in 115ms
 GET /socket.io?EIO=4&transport=polling&t=02lat5kb 404 in 208ms
 GET /socket.io?EIO=4&transport=polling&t=02le1gw4 404 in 99ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
 GET /api/socket-health 200 in 68ms
 GET /api/conversations 200 in 198ms
 GET /api/socket-health 200 in 134ms
 GET /socket.io?EIO=4&transport=polling&t=02mw6qc5 404 in 1183ms
 GET /socket.io?EIO=4&transport=polling&t=02mzgleo 404 in 126ms
 GET /api/socket-health 200 in 31ms
 GET /api/socket-health 200 in 46ms
 GET /socket.io?EIO=4&transport=polling&t=02p5eqjq 404 in 243ms
 GET /socket.io?EIO=4&transport=polling&t=02p6rz4g 404 in 130ms
 GET /api/socket-health 200 in 50ms
 GET /api/socket-health 200 in 215ms
 GET /socket.io?EIO=4&transport=polling&t=02qpj4ft 404 in 342ms
 GET /socket.io?EIO=4&transport=polling&t=02qvogwp 404 in 157ms
 GET /api/socket-health 200 in 54ms
 GET /api/socket-health 200 in 219ms
 GET /socket.io?EIO=4&transport=polling&t=02s9oyjj 404 in 390ms
 GET /socket.io?EIO=4&transport=polling&t=02sfxeco 404 in 182ms
 GET /api/socket-health 200 in 47ms
 GET /api/socket-health 200 in 227ms
 GET /socket.io?EIO=4&transport=polling&t=02tsukob 404 in 363ms
 GET /socket.io?EIO=4&transport=polling&t=02tz7vt2 404 in 163ms
=== FRIEND REQUEST GET START ===
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
Request type: received User: sayantan2@gmail.com
âœ… Database connected
âœ… Current user found: {
  id: new ObjectId('6901f85f42c5d010fa811206'),
  email: 'sayantan2@gmail.com',
  friendRequestsCount: 0,
  sentRequestsCount: 1
}
Processing received requests...
Raw friendRequests: []
Processed receivedRequests: []
Populating sender details...
Final populated requests: []
=== FRIEND REQUEST GET END (received) ===
 GET /api/friends/request?type=received 200 in 97ms
=== FRIEND REQUEST GET START ===
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
Request type: sent User: sayantan2@gmail.com
âœ… Database connected
âœ… Current user found: {
  id: new ObjectId('6901f85f42c5d010fa811206'),
  email: 'sayantan2@gmail.com',
  friendRequestsCount: 0,
  sentRequestsCount: 1
}
Processing sent requests...
Raw sentRequests: [
  {
    from: new ObjectId('6901f85f42c5d010fa811206'),
    fromName: 'sayantan2',
    to: new ObjectId('6905adf16a22b7843b006183'),
    toName: 'sayantan3',
    status: 'pending',
    _id: new ObjectId('6905cdce14ad0d0f020b3985'),
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
Filtering sent request: { status: 'pending', to: new ObjectId('6905adf16a22b7843b006183') }
Mapping sent request: {
  from: new ObjectId('6901f85f42c5d010fa811206'),
  fromName: 'sayantan2',
  to: new ObjectId('6905adf16a22b7843b006183'),
  toName: 'sayantan3',
  status: 'pending',
  _id: new ObjectId('6905cdce14ad0d0f020b3985'),
  createdAt: 2025-11-01T09:07:26.707Z,
  updatedAt: 2025-11-01T09:07:26.707Z
}
Processed sentRequests: [
  {
    id: '6905cdce14ad0d0f020b3985',
    to: {
      id: '6905adf16a22b7843b006183',
      username: 'sayantan3',
      email: '',
      profilePicture: null
    },
    status: 'pending',
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
Populating recipient details...
Looking up recipient: 6905adf16a22b7843b006183
Found recipient: sayantan3
Final populated sent requests: [
  {
    id: '6905cdce14ad0d0f020b3985',
    to: {
      id: '6905adf16a22b7843b006183',
      username: 'sayantan3',
      email: 'sayantan3@gmail.com',
      profilePicture: undefined
    },
    status: 'pending',
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
=== FRIEND REQUEST GET END (sent) ===
 GET /api/friends/request?type=sent 200 in 179ms
 GET /api/socket-health 200 in 33ms
 GET /api/socket-health 200 in 218ms
 GET /socket.io?EIO=4&transport=polling&t=02vc06ih 404 in 433ms
 GET /socket.io?EIO=4&transport=polling&t=02vi6yqm 404 in 212ms
 GET /api/socket-health 200 in 52ms
 GET /api/socket-health 200 in 65ms
 GET /socket.io?EIO=4&transport=polling&t=02wvy14e 404 in 400ms
 GET /socket.io?EIO=4&transport=polling&t=02wxvcd8 404 in 195ms
 GET /api/socket-health 200 in 56ms
 GET /api/socket-health 200 in 129ms
 GET /socket.io?EIO=4&transport=polling&t=02yfmeve 404 in 219ms
 GET /socket.io?EIO=4&transport=polling&t=02yj9arp 404 in 100ms
 GET /api/socket-health 200 in 37ms
 GET /api/socket-health 200 in 29ms
 GET /socket.io?EIO=4&transport=polling&t=02zykyhe 404 in 338ms
 GET /socket.io?EIO=4&transport=polling&t=02zzgb3n 404 in 205ms
 GET /api/socket-health 200 in 57ms
 GET /api/socket-health 200 in 155ms
 GET /socket.io?EIO=4&transport=polling&t=031isxmu 404 in 273ms
 GET /socket.io?EIO=4&transport=polling&t=031n849y 404 in 156ms
 GET /api/socket-health 200 in 47ms
 GET /api/socket-health 200 in 231ms
 GET /socket.io?EIO=4&transport=polling&t=0331zi3y 404 in 340ms
 GET /socket.io?EIO=4&transport=polling&t=0338hrt1 404 in 147ms
 GET /api/socket-health 200 in 55ms
 GET /api/socket-health 200 in 83ms
 GET /socket.io?EIO=4&transport=polling&t=034lunos 404 in 359ms
 GET /socket.io?EIO=4&transport=polling&t=034o7y0o 404 in 199ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
=== FRIEND REQUEST GET START ===
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
Request type: received User: sayantan2@gmail.com
âœ… Database connected
 GET /api/friends 200 in 211ms
âœ… Current user found: {
  id: new ObjectId('6901f85f42c5d010fa811206'),
  email: 'sayantan2@gmail.com',
  friendRequestsCount: 0,
  sentRequestsCount: 1
}
Processing received requests...
Raw friendRequests: []
Processed receivedRequests: []
Populating sender details...
Final populated requests: []
=== FRIEND REQUEST GET END (received) ===
 GET /api/friends/request?type=received 200 in 775ms
=== FRIEND REQUEST GET START ===
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
Request type: sent User: sayantan2@gmail.com
âœ… Database connected
âœ… Current user found: {
  id: new ObjectId('6901f85f42c5d010fa811206'),
  email: 'sayantan2@gmail.com',
  friendRequestsCount: 0,
  sentRequestsCount: 1
}
Processing sent requests...
Raw sentRequests: [
  {
    from: new ObjectId('6901f85f42c5d010fa811206'),
    fromName: 'sayantan2',
    to: new ObjectId('6905adf16a22b7843b006183'),
    toName: 'sayantan3',
    status: 'pending',
    _id: new ObjectId('6905cdce14ad0d0f020b3985'),
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
Filtering sent request: { status: 'pending', to: new ObjectId('6905adf16a22b7843b006183') }
Mapping sent request: {
  from: new ObjectId('6901f85f42c5d010fa811206'),
  fromName: 'sayantan2',
  to: new ObjectId('6905adf16a22b7843b006183'),
  toName: 'sayantan3',
  status: 'pending',
  _id: new ObjectId('6905cdce14ad0d0f020b3985'),
  createdAt: 2025-11-01T09:07:26.707Z,
  updatedAt: 2025-11-01T09:07:26.707Z
}
Processed sentRequests: [
  {
    id: '6905cdce14ad0d0f020b3985',
    to: {
      id: '6905adf16a22b7843b006183',
      username: 'sayantan3',
      email: '',
      profilePicture: null
    },
    status: 'pending',
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
Populating recipient details...
Looking up recipient: 6905adf16a22b7843b006183
Found recipient: sayantan3
Final populated sent requests: [
  {
    id: '6905cdce14ad0d0f020b3985',
    to: {
      id: '6905adf16a22b7843b006183',
      username: 'sayantan3',
      email: 'sayantan3@gmail.com',
      profilePicture: undefined
    },
    status: 'pending',
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
=== FRIEND REQUEST GET END (sent) ===
 GET /api/friends/request?type=sent 200 in 186ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
 GET /api/socket-health 200 in 76ms
 GET /api/socket-health 200 in 202ms
 POST /api/users/heartbeat 200 in 410ms
 GET /socket.io?EIO=4&transport=polling&t=0365vdk6 404 in 346ms
 GET /socket.io?EIO=4&transport=polling&t=036bmzu5 404 in 147ms
 GET /api/socket-health 200 in 27ms
 GET /api/socket-health 200 in 35ms
 GET /socket.io?EIO=4&transport=polling&t=037o8t7r 404 in 222ms
 GET /socket.io?EIO=4&transport=polling&t=037p92tw 404 in 118ms
 GET /api/socket-health 200 in 28ms
 GET /api/socket-health 200 in 117ms
 GET /socket.io?EIO=4&transport=polling&t=0397vh8x 404 in 121ms
 GET /socket.io?EIO=4&transport=polling&t=039b74y4 404 in 100ms
 GET /api/socket-health 200 in 51ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
 GET /api/socket-health 200 in 122ms
 GET /api/conversations 200 in 264ms
 GET /socket.io?EIO=4&transport=polling&t=03arwkcn 404 in 205ms
 GET /socket.io?EIO=4&transport=polling&t=03avdi1r 404 in 102ms
 GET /api/socket-health 200 in 41ms
 GET /api/socket-health 200 in 175ms
 GET /socket.io?EIO=4&transport=polling&t=03cb419k 404 in 287ms
 GET /socket.io?EIO=4&transport=polling&t=03cg1aqr 404 in 169ms
 GET /api/socket-health 200 in 33ms
 GET /api/socket-health 200 in 124ms
 GET /socket.io?EIO=4&transport=polling&t=03duaoam 404 in 204ms
 GET /socket.io?EIO=4&transport=polling&t=03dxs91k 404 in 100ms
 GET /api/socket-health 200 in 33ms
 GET /api/socket-health 200 in 122ms
 GET /socket.io?EIO=4&transport=polling&t=03fe4oqf 404 in 256ms
 GET /socket.io?EIO=4&transport=polling&t=03fhmgxb 404 in 132ms
 GET /api/socket-health 200 in 31ms
 GET /api/socket-health 200 in 108ms
 GET /socket.io?EIO=4&transport=polling&t=03gxjnpb 404 in 195ms
 GET /socket.io?EIO=4&transport=polling&t=03h0krxf 404 in 101ms
 GET /api/socket-health 200 in 27ms
 GET /api/socket-health 200 in 111ms
 GET /socket.io?EIO=4&transport=polling&t=03igvjp1 404 in 203ms
 GET /socket.io?EIO=4&transport=polling&t=03ik0hgu 404 in 105ms
 GET /api/socket-health 200 in 29ms
 GET /api/socket-health 200 in 32ms
 GET /socket.io?EIO=4&transport=polling&t=03k0t5p9 404 in 234ms
 GET /socket.io?EIO=4&transport=polling&t=03k1rvqv 404 in 122ms
 GET /api/socket-health 200 in 44ms
 GET /api/socket-health 200 in 43ms
 GET /socket.io?EIO=4&transport=polling&t=03lkt8a0 404 in 230ms
 GET /socket.io?EIO=4&transport=polling&t=03lm4836 404 in 112ms
 GET /api/socket-health 200 in 37ms
 GET /api/socket-health 200 in 138ms
 GET /socket.io?EIO=4&transport=polling&t=03n3vlhc 404 in 243ms
 GET /socket.io?EIO=4&transport=polling&t=03n7rml2 404 in 114ms
 GET /api/socket-health 200 in 28ms
 GET /api/socket-health 200 in 119ms
 GET /socket.io?EIO=4&transport=polling&t=03onhz8s 404 in 210ms
 GET /socket.io?EIO=4&transport=polling&t=03oqvnd6 404 in 110ms
 GET /api/socket-health 200 in 32ms
 GET /api/socket-health 200 in 33ms
 GET /socket.io?EIO=4&transport=polling&t=03q6wsam 404 in 215ms
 GET /socket.io?EIO=4&transport=polling&t=03q7wqem 404 in 111ms
 GET /api/socket-health 200 in 33ms
 GET /api/socket-health 200 in 127ms
 GET /socket.io?EIO=4&transport=polling&t=03rqe1x3 404 in 321ms
 GET /socket.io?EIO=4&transport=polling&t=03rtzcea 404 in 195ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
=== FRIEND REQUEST GET START ===
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
Request type: received User: sayantan2@gmail.com
âœ… Database connected
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
 GET /api/auth/session 200 in 148ms
 GET /api/socket-health 200 in 27ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
âœ… Current user found: {
  id: new ObjectId('6901f85f42c5d010fa811206'),
  email: 'sayantan2@gmail.com',
  friendRequestsCount: 0,
  sentRequestsCount: 1
}
Processing received requests...
Raw friendRequests: []
Processed receivedRequests: []
Populating sender details...
Final populated requests: []
=== FRIEND REQUEST GET END (received) ===
 GET /api/friends/request?type=received 200 in 280ms
 POST /api/users/heartbeat 200 in 370ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
 GET /api/friends 200 in 380ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
 GET /api/socket-health 200 in 58ms
=== FRIEND REQUEST GET START ===
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
Request type: received User: sayantan2@gmail.com
âœ… Database connected
âœ… Current user found: {
  id: new ObjectId('6901f85f42c5d010fa811206'),
  email: 'sayantan2@gmail.com',
  friendRequestsCount: 0,
  sentRequestsCount: 1
}
Processing received requests...
Raw friendRequests: []
Processed receivedRequests: []
Populating sender details...
Final populated requests: []
=== FRIEND REQUEST GET END (received) ===
 GET /api/friends/request?type=received 200 in 113ms
 POST /api/users/heartbeat 200 in 610ms
 POST /api/users/heartbeat 200 in 324ms
=== FRIEND REQUEST GET START ===
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
 POST /api/users/heartbeat 200 in 654ms
Request type: sent User: sayantan2@gmail.com
âœ… Database connected
âœ… Current user found: {
  id: new ObjectId('6901f85f42c5d010fa811206'),
  email: 'sayantan2@gmail.com',
  friendRequestsCount: 0,
  sentRequestsCount: 1
}
Processing sent requests...
Raw sentRequests: [
  {
    from: new ObjectId('6901f85f42c5d010fa811206'),
    fromName: 'sayantan2',
    to: new ObjectId('6905adf16a22b7843b006183'),
    toName: 'sayantan3',
    status: 'pending',
    _id: new ObjectId('6905cdce14ad0d0f020b3985'),
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
Filtering sent request: { status: 'pending', to: new ObjectId('6905adf16a22b7843b006183') }
Mapping sent request: {
  from: new ObjectId('6901f85f42c5d010fa811206'),
  fromName: 'sayantan2',
  to: new ObjectId('6905adf16a22b7843b006183'),
  toName: 'sayantan3',
  status: 'pending',
  _id: new ObjectId('6905cdce14ad0d0f020b3985'),
  createdAt: 2025-11-01T09:07:26.707Z,
  updatedAt: 2025-11-01T09:07:26.707Z
}
Processed sentRequests: [
  {
    id: '6905cdce14ad0d0f020b3985',
    to: {
      id: '6905adf16a22b7843b006183',
      username: 'sayantan3',
      email: '',
      profilePicture: null
    },
    status: 'pending',
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
Populating recipient details...
Looking up recipient: 6905adf16a22b7843b006183
Found recipient: sayantan3
Final populated sent requests: [
  {
    id: '6905cdce14ad0d0f020b3985',
    to: {
      id: '6905adf16a22b7843b006183',
      username: 'sayantan3',
      email: 'sayantan3@gmail.com',
      profilePicture: undefined
    },
    status: 'pending',
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
=== FRIEND REQUEST GET END (sent) ===
 GET /api/friends/request?type=sent 200 in 326ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
=== FRIEND REQUEST GET START ===
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
Request type: sent User: sayantan2@gmail.com
âœ… Database connected
 GET /api/random-chat/queue 200 in 767ms
 GET /socket.io?EIO=4&transport=polling&t=03tfeaw4 404 in 317ms
 GET /socket.io?EIO=4&transport=polling&t=03t8xc3g 404 in 332ms
âœ… Current user found: {
  id: new ObjectId('6901f85f42c5d010fa811206'),
  email: 'sayantan2@gmail.com',
  friendRequestsCount: 0,
  sentRequestsCount: 1
}
Processing sent requests...
Raw sentRequests: [
  {
    from: new ObjectId('6901f85f42c5d010fa811206'),
    fromName: 'sayantan2',
    to: new ObjectId('6905adf16a22b7843b006183'),
    toName: 'sayantan3',
    status: 'pending',
    _id: new ObjectId('6905cdce14ad0d0f020b3985'),
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
Filtering sent request: { status: 'pending', to: new ObjectId('6905adf16a22b7843b006183') }
Mapping sent request: {
  from: new ObjectId('6901f85f42c5d010fa811206'),
  fromName: 'sayantan2',
  to: new ObjectId('6905adf16a22b7843b006183'),
  toName: 'sayantan3',
  status: 'pending',
  _id: new ObjectId('6905cdce14ad0d0f020b3985'),
  createdAt: 2025-11-01T09:07:26.707Z,
  updatedAt: 2025-11-01T09:07:26.707Z
}
Processed sentRequests: [
  {
    id: '6905cdce14ad0d0f020b3985',
    to: {
      id: '6905adf16a22b7843b006183',
      username: 'sayantan3',
      email: '',
      profilePicture: null
    },
    status: 'pending',
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
Populating recipient details...
Looking up recipient: 6905adf16a22b7843b006183
 GET /api/friends 200 in 413ms
 GET /api/users/me 200 in 704ms
Found recipient: sayantan3
Final populated sent requests: [
  {
    id: '6905cdce14ad0d0f020b3985',
    to: {
      id: '6905adf16a22b7843b006183',
      username: 'sayantan3',
      email: 'sayantan3@gmail.com',
      profilePicture: undefined
    },
    status: 'pending',
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
=== FRIEND REQUEST GET END (sent) ===
 GET /api/friends/request?type=sent 200 in 164ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
 GET /api/random-chat/session 200 in 204ms
 GET /api/socket-health 200 in 24ms
 GET /api/socket-health 200 in 109ms
 GET /socket.io?EIO=4&transport=polling&t=03unhkpv 404 in 206ms
 GET /socket.io?EIO=4&transport=polling&t=03uqka0z 404 in 100ms
 GET /api/socket-health 200 in 42ms
 GET /api/socket-health 200 in 131ms
 GET /socket.io?EIO=4&transport=polling&t=03vmmhna 404 in 227ms
 GET /socket.io?EIO=4&transport=polling&t=03vqhd2q 404 in 109ms
 GET /api/socket-health 200 in 39ms
 GET /api/socket-health 200 in 159ms
 GET /socket.io?EIO=4&transport=polling&t=03x5nq0z 404 in 269ms
 GET /socket.io?EIO=4&transport=polling&t=03xa69hy 404 in 121ms
 GET /api/socket-health 200 in 41ms
 GET /api/socket-health 200 in 72ms
 GET /socket.io?EIO=4&transport=polling&t=03ypvyro 404 in 238ms
 GET /socket.io?EIO=4&transport=polling&t=03yqs4sw 404 in 111ms
 GET /api/socket-health 200 in 32ms
 GET /api/socket-health 200 in 170ms
 GET /socket.io?EIO=4&transport=polling&t=040898uo 404 in 264ms
 GET /socket.io?EIO=4&transport=polling&t=040d0ykk 404 in 140ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
 GET /api/auth/session 200 in 109ms
 GET /api/socket-health 200 in 106ms
 GET /api/socket-health 200 in 44ms
 POST /api/users/heartbeat 200 in 288ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
=== FRIEND REQUEST GET START ===
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
Request type: received User: sayantan2@gmail.com
âœ… Database connected
âœ… Current user found: {
  id: new ObjectId('6901f85f42c5d010fa811206'),
  email: 'sayantan2@gmail.com',
  friendRequestsCount: 0,
  sentRequestsCount: 1
}
Processing received requests...
Raw friendRequests: []
Processed receivedRequests: []
Populating sender details...
Final populated requests: []
=== FRIEND REQUEST GET END (received) ===
 GET /api/friends/request?type=received 200 in 263ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
 GET /api/friends 200 in 312ms
 GET /api/random-chat/queue 200 in 319ms
=== FRIEND REQUEST GET START ===
 POST /api/users/heartbeat 200 in 362ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
 GET /api/users/me 200 in 365ms
Request type: sent User: sayantan2@gmail.com
âœ… Database connected
âœ… Current user found: {
  id: new ObjectId('6901f85f42c5d010fa811206'),
  email: 'sayantan2@gmail.com',
  friendRequestsCount: 0,
  sentRequestsCount: 1
}
Processing sent requests...
Raw sentRequests: [
  {
    from: new ObjectId('6901f85f42c5d010fa811206'),
    fromName: 'sayantan2',
    to: new ObjectId('6905adf16a22b7843b006183'),
    toName: 'sayantan3',
    status: 'pending',
    _id: new ObjectId('6905cdce14ad0d0f020b3985'),
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
Filtering sent request: { status: 'pending', to: new ObjectId('6905adf16a22b7843b006183') }
Mapping sent request: {
  from: new ObjectId('6901f85f42c5d010fa811206'),
  fromName: 'sayantan2',
  to: new ObjectId('6905adf16a22b7843b006183'),
  toName: 'sayantan3',
  status: 'pending',
  _id: new ObjectId('6905cdce14ad0d0f020b3985'),
  createdAt: 2025-11-01T09:07:26.707Z,
  updatedAt: 2025-11-01T09:07:26.707Z
}
Processed sentRequests: [
  {
    id: '6905cdce14ad0d0f020b3985',
    to: {
      id: '6905adf16a22b7843b006183',
      username: 'sayantan3',
      email: '',
      profilePicture: null
    },
    status: 'pending',
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
Populating recipient details...
Looking up recipient: 6905adf16a22b7843b006183
Found recipient: sayantan3
Final populated sent requests: [
  {
    id: '6905cdce14ad0d0f020b3985',
    to: {
      id: '6905adf16a22b7843b006183',
      username: 'sayantan3',
      email: 'sayantan3@gmail.com',
      profilePicture: undefined
    },
    status: 'pending',
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
=== FRIEND REQUEST GET END (sent) ===
 GET /api/friends/request?type=sent 200 in 339ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
 GET /socket.io?EIO=4&transport=polling&t=041c2dos 404 in 545ms
 GET /socket.io?EIO=4&transport=polling&t=041d10bt 404 in 361ms
 GET /api/random-chat/session 200 in 431ms
 GET /api/socket-health 200 in 34ms
 GET /api/socket-health 200 in 139ms
 GET /socket.io?EIO=4&transport=polling&t=042ovdq4 404 in 275ms
 GET /socket.io?EIO=4&transport=polling&t=042srhbk 404 in 148ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
=== FRIEND REQUEST GET START ===
 GET /api/socket-health 200 in 141ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
Request type: received User: sayantan2@gmail.com
âœ… Database connected
âœ… Current user found: {
  id: new ObjectId('6901f85f42c5d010fa811206'),
  email: 'sayantan2@gmail.com',
  friendRequestsCount: 0,
  sentRequestsCount: 1
}
Processing received requests...
Raw friendRequests: []
Processed receivedRequests: []
Populating sender details...
Final populated requests: []
=== FRIEND REQUEST GET END (received) ===
 GET /api/friends/request?type=received 200 in 194ms
 GET /api/friends 200 in 230ms
 GET /api/socket-health 200 in 212ms
=== FRIEND REQUEST GET START ===
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
Request type: sent User: sayantan2@gmail.com
âœ… Database connected
âœ… Current user found: {
  id: new ObjectId('6901f85f42c5d010fa811206'),
  email: 'sayantan2@gmail.com',
  friendRequestsCount: 0,
  sentRequestsCount: 1
}
Processing sent requests...
Raw sentRequests: [
  {
    from: new ObjectId('6901f85f42c5d010fa811206'),
    fromName: 'sayantan2',
    to: new ObjectId('6905adf16a22b7843b006183'),
    toName: 'sayantan3',
    status: 'pending',
    _id: new ObjectId('6905cdce14ad0d0f020b3985'),
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
Filtering sent request: { status: 'pending', to: new ObjectId('6905adf16a22b7843b006183') }
Mapping sent request: {
  from: new ObjectId('6901f85f42c5d010fa811206'),
  fromName: 'sayantan2',
  to: new ObjectId('6905adf16a22b7843b006183'),
  toName: 'sayantan3',
  status: 'pending',
  _id: new ObjectId('6905cdce14ad0d0f020b3985'),
  createdAt: 2025-11-01T09:07:26.707Z,
  updatedAt: 2025-11-01T09:07:26.707Z
}
Processed sentRequests: [
  {
    id: '6905cdce14ad0d0f020b3985',
    to: {
      id: '6905adf16a22b7843b006183',
      username: 'sayantan3',
      email: '',
      profilePicture: null
    },
    status: 'pending',
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
Populating recipient details...
Looking up recipient: 6905adf16a22b7843b006183
 GET /socket.io?EIO=4&transport=polling&t=044696dy 404 in 334ms
 GET /socket.io?EIO=4&transport=polling&t=044cf1pg 404 in 144ms
Found recipient: sayantan3
Final populated sent requests: [
  {
    id: '6905cdce14ad0d0f020b3985',
    to: {
      id: '6905adf16a22b7843b006183',
      username: 'sayantan3',
      email: 'sayantan3@gmail.com',
      profilePicture: undefined
    },
    status: 'pending',
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
=== FRIEND REQUEST GET END (sent) ===
 GET /api/friends/request?type=sent 200 in 247ms
 GET /api/socket-health 200 in 34ms
 GET /api/socket-health 200 in 133ms
 GET /socket.io?EIO=4&transport=polling&t=045mr2k7 404 in 229ms
 GET /socket.io?EIO=4&transport=polling&t=045qijg8 404 in 107ms
 GET /api/socket-health 200 in 36ms
 GET /api/socket-health 200 in 142ms
 GET /socket.io?EIO=4&transport=polling&t=04767a6l 404 in 131ms
 GET /socket.io?EIO=4&transport=polling&t=047a88x4 404 in 99ms
 GET /api/socket-health 200 in 27ms
 GET /api/socket-health 200 in 113ms
 GET /socket.io?EIO=4&transport=polling&t=048pflod 404 in 216ms
 GET /socket.io?EIO=4&transport=polling&t=048sn47a 404 in 107ms
 GET /api/socket-health 200 in 36ms
 GET /api/socket-health 200 in 118ms
 GET /socket.io?EIO=4&transport=polling&t=04a9h6g5 404 in 221ms
 GET /socket.io?EIO=4&transport=polling&t=04acty4p 404 in 117ms
 GET /api/socket-health 200 in 54ms
 GET /api/socket-health 200 in 170ms
 GET /socket.io?EIO=4&transport=polling&t=04btm25e 404 in 291ms
 GET /socket.io?EIO=4&transport=polling&t=04bygub7 404 in 130ms
 GET /api/socket-health 200 in 33ms
 GET /api/socket-health 200 in 132ms
 GET /socket.io?EIO=4&transport=polling&t=04dcdv5x 404 in 137ms
 GET /socket.io?EIO=4&transport=polling&t=04dg3xwi 404 in 103ms
 GET /api/socket-health 200 in 53ms
 GET /api/socket-health 200 in 227ms
 GET /socket.io?EIO=4&transport=polling&t=04ewh9r5 404 in 355ms
 GET /socket.io?EIO=4&transport=polling&t=04f31u7j 404 in 149ms
 GET /api/socket-health 200 in 75ms
 GET /api/socket-health 200 in 235ms
 GET /socket.io?EIO=4&transport=polling&t=04ggukop 404 in 240ms
 GET /socket.io?EIO=4&transport=polling&t=04gniscd 404 in 124ms
 GET /api/socket-health 200 in 55ms
 GET /api/socket-health 200 in 207ms
 GET /socket.io?EIO=4&transport=polling&t=04hzma0j 404 in 354ms
 GET /socket.io?EIO=4&transport=polling&t=04i5elvg 404 in 160ms
 GET /api/socket-health 200 in 61ms
 GET /api/socket-health 200 in 200ms
 GET /socket.io?EIO=4&transport=polling&t=04jjijle 404 in 314ms
 GET /socket.io?EIO=4&transport=polling&t=04jp9lf8 404 in 125ms
 GET /api/socket-health 200 in 50ms
 GET /api/socket-health 200 in 193ms
 GET /socket.io?EIO=4&transport=polling&t=04l2orod 404 in 311ms
 GET /socket.io?EIO=4&transport=polling&t=04l83gg8 404 in 135ms
 GET /api/socket-health 200 in 58ms
 GET /api/socket-health 200 in 211ms
 GET /socket.io?EIO=4&transport=polling&t=04mmp6w1 404 in 333ms
 GET /socket.io?EIO=4&transport=polling&t=04msnzaf 404 in 162ms
 GET /api/socket-health 200 in 51ms
 GET /api/socket-health 200 in 162ms
 GET /socket.io?EIO=4&transport=polling&t=04o5udv9 404 in 313ms
 GET /socket.io?EIO=4&transport=polling&t=04oaebhj 404 in 176ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
 GET /api/conversations 200 in 167ms
 POST /api/users/heartbeat 200 in 215ms
 GET /api/socket-health 200 in 44ms
 GET /api/socket-health 200 in 161ms
 GET /socket.io?EIO=4&transport=polling&t=04pp4g63 404 in 314ms
 GET /socket.io?EIO=4&transport=polling&t=04ptox7u 404 in 177ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
=== FRIEND REQUEST GET START ===
 GET /api/socket-health 200 in 82ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
Request type: received User: sayantan2@gmail.com
âœ… Database connected
âœ… Current user found: {
  id: new ObjectId('6901f85f42c5d010fa811206'),
  email: 'sayantan2@gmail.com',
  friendRequestsCount: 0,
  sentRequestsCount: 1
}
Processing received requests...
Raw friendRequests: []
Processed receivedRequests: []
Populating sender details...
Final populated requests: []
=== FRIEND REQUEST GET END (received) ===
 GET /api/friends/request?type=received 200 in 210ms
 GET /api/friends 200 in 221ms
 GET /api/socket-health 200 in 151ms
=== FRIEND REQUEST GET START ===
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
Request type: sent User: sayantan2@gmail.com
âœ… Database connected
âœ… Current user found: {
  id: new ObjectId('6901f85f42c5d010fa811206'),
  email: 'sayantan2@gmail.com',
  friendRequestsCount: 0,
  sentRequestsCount: 1
}
Processing sent requests...
Raw sentRequests: [
  {
    from: new ObjectId('6901f85f42c5d010fa811206'),
    fromName: 'sayantan2',
    to: new ObjectId('6905adf16a22b7843b006183'),
    toName: 'sayantan3',
    status: 'pending',
    _id: new ObjectId('6905cdce14ad0d0f020b3985'),
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
Filtering sent request: { status: 'pending', to: new ObjectId('6905adf16a22b7843b006183') }
Mapping sent request: {
  from: new ObjectId('6901f85f42c5d010fa811206'),
  fromName: 'sayantan2',
  to: new ObjectId('6905adf16a22b7843b006183'),
  toName: 'sayantan3',
  status: 'pending',
  _id: new ObjectId('6905cdce14ad0d0f020b3985'),
  createdAt: 2025-11-01T09:07:26.707Z,
  updatedAt: 2025-11-01T09:07:26.707Z
}
Processed sentRequests: [
  {
    id: '6905cdce14ad0d0f020b3985',
    to: {
      id: '6905adf16a22b7843b006183',
      username: 'sayantan3',
      email: '',
      profilePicture: null
    },
    status: 'pending',
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
Populating recipient details...
Looking up recipient: 6905adf16a22b7843b006183
 GET /socket.io?EIO=4&transport=polling&t=04ra4ovc 404 in 277ms
 GET /socket.io?EIO=4&transport=polling&t=04reh0m2 404 in 135ms
Found recipient: sayantan3
Final populated sent requests: [
  {
    id: '6905cdce14ad0d0f020b3985',
    to: {
      id: '6905adf16a22b7843b006183',
      username: 'sayantan3',
      email: 'sayantan3@gmail.com',
      profilePicture: undefined
    },
    status: 'pending',
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
=== FRIEND REQUEST GET END (sent) ===
 GET /api/friends/request?type=sent 200 in 191ms
 GET /api/socket-health 200 in 41ms
 GET /api/socket-health 200 in 321ms
 GET /socket.io?EIO=4&transport=polling&t=04ssa0b2 404 in 278ms
 GET /socket.io?EIO=4&transport=polling&t=04t192kz 404 in 134ms
 GET /api/socket-health 200 in 49ms
 GET /api/socket-health 200 in 249ms
 GET /socket.io?EIO=4&transport=polling&t=04uc59vl 404 in 265ms
 GET /socket.io?EIO=4&transport=polling&t=04uj3wvc 404 in 175ms
 GET /api/socket-health 200 in 36ms
 GET /api/socket-health 200 in 192ms
 GET /socket.io?EIO=4&transport=polling&t=04vv1wk4 404 in 187ms
 GET /socket.io?EIO=4&transport=polling&t=04w0g6cm 404 in 145ms
 GET /api/socket-health 200 in 39ms
 GET /api/socket-health 200 in 140ms
 GET /socket.io?EIO=4&transport=polling&t=04xeov0d 404 in 250ms
 GET /socket.io?EIO=4&transport=polling&t=04xilsuy 404 in 118ms
 GET /api/socket-health 200 in 28ms
 GET /api/socket-health 200 in 125ms
 GET /socket.io?EIO=4&transport=polling&t=04yxvhz6 404 in 213ms
 GET /socket.io?EIO=4&transport=polling&t=04z1ew3a 404 in 107ms
 GET /api/socket-health 200 in 38ms
 GET /api/socket-health 200 in 139ms
 GET /socket.io?EIO=4&transport=polling&t=050hlyk9 404 in 255ms
 GET /socket.io?EIO=4&transport=polling&t=050lkf09 404 in 123ms
 GET /api/socket-health 200 in 41ms
 GET /api/socket-health 200 in 177ms
 GET /socket.io?EIO=4&transport=polling&t=0521jmkb 404 in 294ms
 GET /socket.io?EIO=4&transport=polling&t=0526g7y1 404 in 143ms
 GET /api/socket-health 200 in 68ms
 GET /api/socket-health 200 in 460ms
 GET /socket.io?EIO=4&transport=polling&t=053ltdk1 404 in 449ms
 GET /socket.io?EIO=4&transport=polling&t=053yo2iw 404 in 262ms
 GET /api/socket-health 200 in 37ms
 GET /api/socket-health 200 in 126ms
 GET /socket.io?EIO=4&transport=polling&t=0554ci5l 404 in 123ms
 GET /socket.io?EIO=4&transport=polling&t=0557w3gs 404 in 111ms
 GET /api/socket-health 200 in 37ms
 GET /api/socket-health 200 in 138ms
 GET /socket.io?EIO=4&transport=polling&t=056ny10l 404 in 222ms
 GET /socket.io?EIO=4&transport=polling&t=056rusc5 404 in 96ms
 GET /api/socket-health 200 in 57ms
 GET /api/socket-health 200 in 197ms
 GET /socket.io?EIO=4&transport=polling&t=0588lhuy 404 in 308ms
 GET /socket.io?EIO=4&transport=polling&t=058e47y0 404 in 133ms
 GET /api/socket-health 200 in 35ms
 GET /api/socket-health 200 in 121ms
 GET /socket.io?EIO=4&transport=polling&t=059r6lp4 404 in 209ms
 GET /socket.io?EIO=4&transport=polling&t=059uk0fv 404 in 94ms
 GET /api/socket-health 200 in 32ms
 GET /api/socket-health 200 in 126ms
 GET /socket.io?EIO=4&transport=polling&t=05baez4d 404 in 214ms
 GET /socket.io?EIO=4&transport=polling&t=05bdz1ly 404 in 103ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
 POST /api/users/heartbeat 200 in 191ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
 GET /api/socket-health 200 in 60ms
 GET /api/socket-health 200 in 118ms
 GET /api/conversations 200 in 284ms
 GET /socket.io?EIO=4&transport=polling&t=05cuzlzw 404 in 216ms
 GET /socket.io?EIO=4&transport=polling&t=05cycmle 404 in 104ms
 GET /api/socket-health 200 in 26ms
 GET /api/socket-health 200 in 123ms
 GET /socket.io?EIO=4&transport=polling&t=05edk0m7 404 in 192ms
 GET /socket.io?EIO=4&transport=polling&t=05eh1hgz 404 in 92ms
=== FRIEND REQUEST GET START ===
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
Request type: received User: sayantan2@gmail.com
âœ… Database connected
âœ… Current user found: {
  id: new ObjectId('6901f85f42c5d010fa811206'),
  email: 'sayantan2@gmail.com',
  friendRequestsCount: 0,
  sentRequestsCount: 1
}
Processing received requests...
Raw friendRequests: []
Processed receivedRequests: []
Populating sender details...
Final populated requests: []
=== FRIEND REQUEST GET END (received) ===
 GET /api/friends/request?type=received 200 in 109ms
=== FRIEND REQUEST GET START ===
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
Request type: sent User: sayantan2@gmail.com
âœ… Database connected
âœ… Current user found: {
  id: new ObjectId('6901f85f42c5d010fa811206'),
  email: 'sayantan2@gmail.com',
  friendRequestsCount: 0,
  sentRequestsCount: 1
}
Processing sent requests...
Raw sentRequests: [
  {
    from: new ObjectId('6901f85f42c5d010fa811206'),
    fromName: 'sayantan2',
    to: new ObjectId('6905adf16a22b7843b006183'),
    toName: 'sayantan3',
    status: 'pending',
    _id: new ObjectId('6905cdce14ad0d0f020b3985'),
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
Filtering sent request: { status: 'pending', to: new ObjectId('6905adf16a22b7843b006183') }
Mapping sent request: {
  from: new ObjectId('6901f85f42c5d010fa811206'),
  fromName: 'sayantan2',
  to: new ObjectId('6905adf16a22b7843b006183'),
  toName: 'sayantan3',
  status: 'pending',
  _id: new ObjectId('6905cdce14ad0d0f020b3985'),
  createdAt: 2025-11-01T09:07:26.707Z,
  updatedAt: 2025-11-01T09:07:26.707Z
}
Processed sentRequests: [
  {
    id: '6905cdce14ad0d0f020b3985',
    to: {
      id: '6905adf16a22b7843b006183',
      username: 'sayantan3',
      email: '',
      profilePicture: null
    },
    status: 'pending',
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
Populating recipient details...
Looking up recipient: 6905adf16a22b7843b006183
Found recipient: sayantan3
Final populated sent requests: [
  {
    id: '6905cdce14ad0d0f020b3985',
    to: {
      id: '6905adf16a22b7843b006183',
      username: 'sayantan3',
      email: 'sayantan3@gmail.com',
      profilePicture: undefined
    },
    status: 'pending',
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
=== FRIEND REQUEST GET END (sent) ===
 GET /api/friends/request?type=sent 200 in 138ms
 GET /api/socket-health 200 in 34ms
 GET /api/socket-health 200 in 113ms
 GET /socket.io?EIO=4&transport=polling&t=05fx9yrs 404 in 210ms
 GET /socket.io?EIO=4&transport=polling&t=05g0fhln 404 in 97ms
 GET /api/socket-health 200 in 29ms
 GET /api/socket-health 200 in 112ms
 GET /socket.io?EIO=4&transport=polling&t=05hgmv83 404 in 200ms
 GET /socket.io?EIO=4&transport=polling&t=05hjt9zl 404 in 96ms
 GET /api/socket-health 200 in 33ms
 GET /api/socket-health 200 in 111ms
 GET /socket.io?EIO=4&transport=polling&t=05j0f2o7 404 in 201ms
 GET /socket.io?EIO=4&transport=polling&t=05j3knyu 404 in 101ms
 GET /api/socket-health 200 in 28ms
 GET /api/socket-health 200 in 110ms
 GET /socket.io?EIO=4&transport=polling&t=05kjqyo5 404 in 194ms
 GET /socket.io?EIO=4&transport=polling&t=05kmu7v8 404 in 88ms
 GET /api/socket-health 200 in 34ms
 GET /api/socket-health 200 in 116ms
 GET /socket.io?EIO=4&transport=polling&t=05m3fovm 404 in 205ms
 GET /socket.io?EIO=4&transport=polling&t=05m6qrud 404 in 102ms
 GET /api/socket-health 200 in 27ms
 GET /api/socket-health 200 in 102ms
 GET /socket.io?EIO=4&transport=polling&t=05nmsjnf 404 in 192ms
 GET /socket.io?EIO=4&transport=polling&t=05nporrm 404 in 96ms
 GET /api/socket-health 200 in 29ms
 GET /api/socket-health 200 in 110ms
 GET /socket.io?EIO=4&transport=polling&t=05p69hfp 404 in 115ms
 GET /socket.io?EIO=4&transport=polling&t=05p9fuvu 404 in 101ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
=== FRIEND REQUEST GET START ===
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
Request type: received User: sayantan2@gmail.com
âœ… Database connected
 GET /api/auth/session 200 in 78ms
 GET /api/friends 200 in 172ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
 GET /api/users/me 200 in 397ms
âœ… Current user found: {
  id: new ObjectId('6901f85f42c5d010fa811206'),
  email: 'sayantan2@gmail.com',
  friendRequestsCount: 0,
  sentRequestsCount: 1
}
Processing received requests...
Raw friendRequests: []
Processed receivedRequests: []
Populating sender details...
Final populated requests: []
=== FRIEND REQUEST GET END (received) ===
 GET /api/friends/request?type=received 200 in 554ms
 GET /api/friends 200 in 381ms
=== FRIEND REQUEST GET START ===
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
Request type: received User: sayantan2@gmail.com
âœ… Database connected
=== FRIEND REQUEST GET START ===
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
Request type: sent User: sayantan2@gmail.com
âœ… Database connected
âœ… Current user found: {
  id: new ObjectId('6901f85f42c5d010fa811206'),
  email: 'sayantan2@gmail.com',
  friendRequestsCount: 0,
  sentRequestsCount: 1
}
Processing received requests...
Raw friendRequests: []
Processed receivedRequests: []
Populating sender details...
Final populated requests: []
=== FRIEND REQUEST GET END (received) ===
 GET /api/friends/request?type=received 200 in 97ms
âœ… Current user found: {
  id: new ObjectId('6901f85f42c5d010fa811206'),
  email: 'sayantan2@gmail.com',
  friendRequestsCount: 0,
  sentRequestsCount: 1
}
Processing sent requests...
Raw sentRequests: [
  {
    from: new ObjectId('6901f85f42c5d010fa811206'),
    fromName: 'sayantan2',
    to: new ObjectId('6905adf16a22b7843b006183'),
    toName: 'sayantan3',
    status: 'pending',
    _id: new ObjectId('6905cdce14ad0d0f020b3985'),
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
Filtering sent request: { status: 'pending', to: new ObjectId('6905adf16a22b7843b006183') }
Mapping sent request: {
  from: new ObjectId('6901f85f42c5d010fa811206'),
  fromName: 'sayantan2',
  to: new ObjectId('6905adf16a22b7843b006183'),
  toName: 'sayantan3',
  status: 'pending',
  _id: new ObjectId('6905cdce14ad0d0f020b3985'),
  createdAt: 2025-11-01T09:07:26.707Z,
  updatedAt: 2025-11-01T09:07:26.707Z
}
Processed sentRequests: [
  {
    id: '6905cdce14ad0d0f020b3985',
    to: {
      id: '6905adf16a22b7843b006183',
      username: 'sayantan3',
      email: '',
      profilePicture: null
    },
    status: 'pending',
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
Populating recipient details...
Looking up recipient: 6905adf16a22b7843b006183
 GET /api/random-chat/queue 200 in 562ms
Found recipient: sayantan3
Final populated sent requests: [
  {
    id: '6905cdce14ad0d0f020b3985',
    to: {
      id: '6905adf16a22b7843b006183',
      username: 'sayantan3',
      email: 'sayantan3@gmail.com',
      profilePicture: undefined
    },
    status: 'pending',
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
=== FRIEND REQUEST GET END (sent) ===
 GET /api/friends/request?type=sent 200 in 156ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
=== FRIEND REQUEST GET START ===
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
Request type: sent User: sayantan2@gmail.com
âœ… Database connected
âœ… Current user found: {
  id: new ObjectId('6901f85f42c5d010fa811206'),
  email: 'sayantan2@gmail.com',
  friendRequestsCount: 0,
  sentRequestsCount: 1
}
Processing sent requests...
Raw sentRequests: [
  {
    from: new ObjectId('6901f85f42c5d010fa811206'),
    fromName: 'sayantan2',
    to: new ObjectId('6905adf16a22b7843b006183'),
    toName: 'sayantan3',
    status: 'pending',
    _id: new ObjectId('6905cdce14ad0d0f020b3985'),
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
Filtering sent request: { status: 'pending', to: new ObjectId('6905adf16a22b7843b006183') }
Mapping sent request: {
  from: new ObjectId('6901f85f42c5d010fa811206'),
  fromName: 'sayantan2',
  to: new ObjectId('6905adf16a22b7843b006183'),
  toName: 'sayantan3',
  status: 'pending',
  _id: new ObjectId('6905cdce14ad0d0f020b3985'),
  createdAt: 2025-11-01T09:07:26.707Z,
  updatedAt: 2025-11-01T09:07:26.707Z
}
Processed sentRequests: [
  {
    id: '6905cdce14ad0d0f020b3985',
    to: {
      id: '6905adf16a22b7843b006183',
      username: 'sayantan3',
      email: '',
      profilePicture: null
    },
    status: 'pending',
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
Populating recipient details...
Looking up recipient: 6905adf16a22b7843b006183
 GET /api/random-chat/session 200 in 135ms
 POST /api/users/heartbeat 200 in 720ms
Found recipient: sayantan3
Final populated sent requests: [
  {
    id: '6905cdce14ad0d0f020b3985',
    to: {
      id: '6905adf16a22b7843b006183',
      username: 'sayantan3',
      email: 'sayantan3@gmail.com',
      profilePicture: undefined
    },
    status: 'pending',
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
=== FRIEND REQUEST GET END (sent) ===
 GET /api/friends/request?type=sent 200 in 128ms
 GET /api/socket-health 200 in 37ms
 GET /api/socket-health 200 in 136ms
 GET /socket.io?EIO=4&transport=polling&t=05qq6t0u 404 in 235ms
 GET /socket.io?EIO=4&transport=polling&t=05qtzg5v 404 in 110ms
 GET /api/socket-health 200 in 27ms
 GET /api/socket-health 200 in 122ms
 GET /socket.io?EIO=4&transport=polling&t=05s9kx4e 404 in 271ms
 GET /socket.io?EIO=4&transport=polling&t=05sd0nv7 404 in 144ms
 GET /api/socket-health 200 in 31ms
 GET /api/socket-health 200 in 109ms
 GET /socket.io?EIO=4&transport=polling&t=05tt9za3 404 in 204ms
 GET /socket.io?EIO=4&transport=polling&t=05twckyt 404 in 106ms
 GET /api/socket-health 200 in 27ms
 GET /api/socket-health 200 in 111ms
 GET /socket.io?EIO=4&transport=polling&t=05vcm84h 404 in 191ms
 GET /socket.io?EIO=4&transport=polling&t=05vfrrki 404 in 87ms
 GET /api/socket-health 200 in 39ms
 GET /api/socket-health 200 in 118ms
 GET /socket.io?EIO=4&transport=polling&t=05wwh40p 404 in 208ms
 GET /socket.io?EIO=4&transport=polling&t=05wztef5 404 in 104ms
 GET /api/socket-health 200 in 30ms
 GET /api/socket-health 200 in 115ms
 GET /socket.io?EIO=4&transport=polling&t=05yfm8jc 404 in 202ms
 GET /socket.io?EIO=4&transport=polling&t=05yivti2 404 in 92ms
 GET /api/socket-health 200 in 30ms
 GET /api/socket-health 200 in 117ms
 GET /socket.io?EIO=4&transport=polling&t=05zzcbm7 404 in 207ms
 GET /socket.io?EIO=4&transport=polling&t=0602nz9b 404 in 104ms
 GET /api/socket-health 200 in 40ms
 GET /api/socket-health 200 in 172ms
 GET /socket.io?EIO=4&transport=polling&t=061jadr9 404 in 271ms
 GET /socket.io?EIO=4&transport=polling&t=061o8wm4 404 in 103ms
 GET /api/socket-health 200 in 47ms
 GET /api/socket-health 200 in 38ms
 GET /socket.io?EIO=4&transport=polling&t=06335mmz 404 in 251ms
 GET /socket.io?EIO=4&transport=polling&t=06349w6r 404 in 125ms
 GET /api/socket-health 200 in 36ms
 GET /api/socket-health 200 in 147ms
 GET /socket.io?EIO=4&transport=polling&t=064mbe1y 404 in 146ms
 GET /socket.io?EIO=4&transport=polling&t=064qi8dl 404 in 118ms
 GET /api/socket-health 200 in 33ms
 GET /api/socket-health 200 in 125ms
 GET /socket.io?EIO=4&transport=polling&t=0665pchc 404 in 129ms
 GET /socket.io?EIO=4&transport=polling&t=066982qf 404 in 114ms
 GET /api/socket-health 200 in 33ms
 GET /api/socket-health 200 in 131ms
 GET /socket.io?EIO=4&transport=polling&t=067p654d 404 in 215ms
 GET /socket.io?EIO=4&transport=polling&t=067sy8ko 404 in 113ms
 GET /api/socket-health 200 in 27ms
 GET /api/socket-health 200 in 109ms
 GET /socket.io?EIO=4&transport=polling&t=0698uqye 404 in 226ms
 GET /socket.io?EIO=4&transport=polling&t=069bwfbi 404 in 122ms
 GET /api/socket-health 200 in 33ms
 GET /api/socket-health 200 in 136ms
 GET /socket.io?EIO=4&transport=polling&t=06asi6h7 404 in 131ms
 GET /socket.io?EIO=4&transport=polling&t=06awdjiu 404 in 101ms
 GET /api/socket-health 200 in 35ms
 GET /api/socket-health 200 in 159ms
 GET /socket.io?EIO=4&transport=polling&t=06cc9g00 404 in 277ms
 GET /socket.io?EIO=4&transport=polling&t=06cgparn 404 in 161ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
=== FRIEND REQUEST GET START ===
 GET /api/socket-health 200 in 220ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
Request type: received User: sayantan2@gmail.com
âœ… Database connected
 GET /api/socket-health 200 in 201ms
 GET /socket.io?EIO=4&transport=polling&t=06e0u8pj 404 in 261ms
 GET /socket.io?EIO=4&transport=polling&t=06e7svdu 404 in 111ms
 GET /api/conversations 200 in 722ms
 POST /api/users/heartbeat 200 in 854ms
âœ… Current user found: {
  id: new ObjectId('6901f85f42c5d010fa811206'),
  email: 'sayantan2@gmail.com',
  friendRequestsCount: 0,
  sentRequestsCount: 1
}
Processing received requests...
Raw friendRequests: []
Processed receivedRequests: []
Populating sender details...
Final populated requests: []
=== FRIEND REQUEST GET END (received) ===
 GET /api/friends/request?type=received 200 in 967ms
=== FRIEND REQUEST GET START ===
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
Request type: sent User: sayantan2@gmail.com
âœ… Database connected
âœ… Current user found: {
  id: new ObjectId('6901f85f42c5d010fa811206'),
  email: 'sayantan2@gmail.com',
  friendRequestsCount: 0,
  sentRequestsCount: 1
}
Processing sent requests...
Raw sentRequests: [
  {
    from: new ObjectId('6901f85f42c5d010fa811206'),
    fromName: 'sayantan2',
    to: new ObjectId('6905adf16a22b7843b006183'),
    toName: 'sayantan3',
    status: 'pending',
    _id: new ObjectId('6905cdce14ad0d0f020b3985'),
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
Filtering sent request: { status: 'pending', to: new ObjectId('6905adf16a22b7843b006183') }
Mapping sent request: {
  from: new ObjectId('6901f85f42c5d010fa811206'),
  fromName: 'sayantan2',
  to: new ObjectId('6905adf16a22b7843b006183'),
  toName: 'sayantan3',
  status: 'pending',
  _id: new ObjectId('6905cdce14ad0d0f020b3985'),
  createdAt: 2025-11-01T09:07:26.707Z,
  updatedAt: 2025-11-01T09:07:26.707Z
}
Processed sentRequests: [
  {
    id: '6905cdce14ad0d0f020b3985',
    to: {
      id: '6905adf16a22b7843b006183',
      username: 'sayantan3',
      email: '',
      profilePicture: null
    },
    status: 'pending',
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
Populating recipient details...
Looking up recipient: 6905adf16a22b7843b006183
Found recipient: sayantan3
Final populated sent requests: [
  {
    id: '6905cdce14ad0d0f020b3985',
    to: {
      id: '6905adf16a22b7843b006183',
      username: 'sayantan3',
      email: 'sayantan3@gmail.com',
      profilePicture: undefined
    },
    status: 'pending',
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
=== FRIEND REQUEST GET END (sent) ===
 GET /api/friends/request?type=sent 200 in 139ms
 GET /api/socket-health 200 in 38ms
 GET /api/socket-health 200 in 114ms
 GET /socket.io?EIO=4&transport=polling&t=06ff01wg 404 in 202ms
 GET /socket.io?EIO=4&transport=polling&t=06fi8env 404 in 102ms
 GET /api/socket-health 200 in 59ms
 GET /api/socket-health 200 in 393ms
 GET /socket.io?EIO=4&transport=polling&t=06gzg9s8 404 in 551ms
 GET /socket.io?EIO=4&transport=polling&t=06hb377m 404 in 133ms
 GET /api/socket-health 200 in 34ms
 GET /api/socket-health 200 in 149ms
 GET /socket.io?EIO=4&transport=polling&t=06ii6ch3 404 in 389ms
 GET /socket.io?EIO=4&transport=polling&t=06imdt1n 404 in 289ms
 GET /api/socket-health 200 in 145ms
 GET /api/socket-health 200 in 302ms
 GET /socket.io?EIO=4&transport=polling&t=06k7nj5h 404 in 277ms
 GET /socket.io?EIO=4&transport=polling&t=06kg5i98 404 in 94ms
 GET /api/socket-health 200 in 144ms
 GET /api/socket-health 200 in 437ms
 GET /socket.io?EIO=4&transport=polling&t=06lou5u8 404 in 651ms
 GET /socket.io?EIO=4&transport=polling&t=06m119xb 404 in 277ms
 GET /api/socket-health 200 in 32ms
 GET /api/socket-health 200 in 123ms
 GET /socket.io?EIO=4&transport=polling&t=06n4nik1 404 in 326ms
 GET /socket.io?EIO=4&transport=polling&t=06n86wa8 404 in 228ms
 GET /api/socket-health 200 in 28ms
 GET /api/socket-health 200 in 527ms
 GET /socket.io?EIO=4&transport=polling&t=06ooqa9g 404 in 617ms
 GET /socket.io?EIO=4&transport=polling&t=06p3fnja 404 in 416ms
 GET /api/socket-health 200 in 29ms
 GET /socket.io?EIO=4&transport=polling&t=06q7py5a 404 in 190ms
 GET /api/socket-health 200 in 53ms
 GET /socket.io?EIO=4&transport=polling&t=06r0iuyy 404 in 168ms
 GET /api/socket-health 200 in 156ms
 GET /socket.io?EIO=4&transport=polling&t=06rv12ul 404 in 330ms
 GET /api/socket-health 200 in 33ms
 GET /socket.io?EIO=4&transport=polling&t=06sjf83a 404 in 395ms
 GET /api/socket-health 200 in 33ms
 GET /socket.io?EIO=4&transport=polling&t=06taz4yr 404 in 226ms
 GET /api/socket-health 200 in 31ms
 GET /socket.io?EIO=4&transport=polling&t=06u2pzst 404 in 247ms
 GET /api/socket-health 200 in 38ms
 GET /socket.io?EIO=4&transport=polling&t=06uuu6b5 404 in 149ms
 GET /api/socket-health 200 in 42ms
 GET /socket.io?EIO=4&transport=polling&t=06vmx24d 404 in 122ms
 GET /api/socket-health 200 in 35ms
 GET /socket.io?EIO=4&transport=polling&t=06webs4k 404 in 244ms
 GET /api/socket-health 200 in 36ms
 GET /socket.io?EIO=4&transport=polling&t=06x65mkn 404 in 131ms
 GET /api/socket-health 200 in 51ms
 GET /socket.io?EIO=4&transport=polling&t=06xycit4 404 in 143ms
 GET /api/socket-health 200 in 64ms
 GET /socket.io?EIO=4&transport=polling&t=06yqq0tq 404 in 462ms
 GET /api/socket-health 200 in 1021ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
=== FRIEND REQUEST GET START ===
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
Request type: received User: sayantan2@gmail.com
âœ… Database connected
 GET /api/friends 200 in 842ms
 GET /api/socket-health 200 in 790ms
âœ… Current user found: {
  id: new ObjectId('6901f85f42c5d010fa811206'),
  email: 'sayantan2@gmail.com',
  friendRequestsCount: 0,
  sentRequestsCount: 1
}
Processing received requests...
Raw friendRequests: []
Processed receivedRequests: []
Populating sender details...
Final populated requests: []
=== FRIEND REQUEST GET END (received) ===
 GET /api/friends/request?type=received 200 in 861ms
 GET /socket.io?EIO=4&transport=polling&t=070axbjn 404 in 783ms
=== FRIEND REQUEST GET START ===
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
Request type: sent User: sayantan2@gmail.com
âœ… Database connected
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
âœ… Current user found: {
  id: new ObjectId('6901f85f42c5d010fa811206'),
  email: 'sayantan2@gmail.com',
  friendRequestsCount: 0,
  sentRequestsCount: 1
}
Processing sent requests...
Raw sentRequests: [
  {
    from: new ObjectId('6901f85f42c5d010fa811206'),
    fromName: 'sayantan2',
    to: new ObjectId('6905adf16a22b7843b006183'),
    toName: 'sayantan3',
    status: 'pending',
    _id: new ObjectId('6905cdce14ad0d0f020b3985'),
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
Filtering sent request: { status: 'pending', to: new ObjectId('6905adf16a22b7843b006183') }
Mapping sent request: {
  from: new ObjectId('6901f85f42c5d010fa811206'),
  fromName: 'sayantan2',
  to: new ObjectId('6905adf16a22b7843b006183'),
  toName: 'sayantan3',
  status: 'pending',
  _id: new ObjectId('6905cdce14ad0d0f020b3985'),
  createdAt: 2025-11-01T09:07:26.707Z,
  updatedAt: 2025-11-01T09:07:26.707Z
}
Processed sentRequests: [
  {
    id: '6905cdce14ad0d0f020b3985',
    to: {
      id: '6905adf16a22b7843b006183',
      username: 'sayantan3',
      email: '',
      profilePicture: null
    },
    status: 'pending',
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
Populating recipient details...
Looking up recipient: 6905adf16a22b7843b006183
Found recipient: sayantan3
Final populated sent requests: [
  {
    id: '6905cdce14ad0d0f020b3985',
    to: {
      id: '6905adf16a22b7843b006183',
      username: 'sayantan3',
      email: 'sayantan3@gmail.com',
      profilePicture: undefined
    },
    status: 'pending',
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
=== FRIEND REQUEST GET END (sent) ===
 GET /api/friends/request?type=sent 200 in 656ms
 GET /socket.io?EIO=4&transport=polling&t=070yzaaa 404 in 656ms
 POST /api/users/heartbeat 200 in 791ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
 GET /api/conversations 200 in 299ms
 GET /api/socket-health 200 in 59ms
 GET /api/socket-health 200 in 531ms
 GET /socket.io?EIO=4&transport=polling&t=072l0x7t 404 in 585ms
 GET /socket.io?EIO=4&transport=polling&t=0732cov5 404 in 224ms
 GET /api/socket-health 200 in 54ms
 GET /socket.io?EIO=4&transport=polling&t=0744lrip 404 in 222ms
 GET /api/socket-health 200 in 50ms
 GET /socket.io?EIO=4&transport=polling&t=074wkr2x 404 in 238ms
 GET /api/socket-health 200 in 42ms
 GET /socket.io?EIO=4&transport=polling&t=075nxvcx 404 in 182ms
 GET /api/socket-health 200 in 31ms
 GET /socket.io?EIO=4&transport=polling&t=076faf0s 404 in 132ms
 GET /api/socket-health 200 in 35ms
 GET /socket.io?EIO=4&transport=polling&t=07773ppk 404 in 94ms
 GET /api/socket-health 200 in 33ms
 GET /socket.io?EIO=4&transport=polling&t=077ytcet 404 in 96ms
 GET /api/socket-health 200 in 29ms
 GET /socket.io?EIO=4&transport=polling&t=078qip3m 404 in 99ms
 GET /api/socket-health 200 in 101ms
 GET /socket.io?EIO=4&transport=polling&t=079ky9iy 404 in 177ms
 GET /api/socket-health 200 in 62ms
 GET /socket.io?EIO=4&transport=polling&t=07aaxeum 404 in 129ms
 GET /api/socket-health 200 in 55ms
 GET /socket.io?EIO=4&transport=polling&t=07b2tx86 404 in 221ms
 GET /api/socket-health 200 in 27ms
 GET /socket.io?EIO=4&transport=polling&t=07bu8qwk 404 in 113ms
 GET /api/socket-health 200 in 36ms
 GET /socket.io?EIO=4&transport=polling&t=07czhnzb 404 in 112ms
 GET /api/socket-health 200 in 33ms
 GET /socket.io?EIO=4&transport=polling&t=07dd91gu 404 in 99ms
 GET /api/socket-health 200 in 28ms
 GET /socket.io?EIO=4&transport=polling&t=07e50yi7 404 in 99ms
 GET /api/socket-health 200 in 33ms
 GET /socket.io?EIO=4&transport=polling&t=07ewreeq 404 in 161ms
 GET /api/socket-health 200 in 30ms
 GET /socket.io?EIO=4&transport=polling&t=07fofri8 404 in 98ms
 GET /api/socket-health 200 in 33ms
 GET /socket.io?EIO=4&transport=polling&t=07gg9l3q 404 in 108ms
 GET /api/socket-health 200 in 35ms
 GET /socket.io?EIO=4&transport=polling&t=07h88juh 404 in 99ms
 GET /api/socket-health 200 in 40ms
 GET /socket.io?EIO=4&transport=polling&t=07i050rb 404 in 105ms
 GET /api/socket-health 200 in 30ms
 GET /socket.io?EIO=4&transport=polling&t=07irofg9 404 in 107ms
 GET /api/socket-health 200 in 28ms
 GET /socket.io?EIO=4&transport=polling&t=07jj8k1s 404 in 99ms
 GET /api/socket-health 200 in 37ms
 GET /socket.io?EIO=4&transport=polling&t=07kbc1c4 404 in 98ms
 GET /api/socket-health 200 in 71ms
 GET /socket.io?EIO=4&transport=polling&t=07l41y1h 404 in 102ms
 GET /api/socket-health 200 in 33ms
 GET /socket.io?EIO=4&transport=polling&t=07luoun2 404 in 101ms
 GET /api/socket-health 200 in 29ms
 GET /socket.io?EIO=4&transport=polling&t=07mmcrx2 404 in 105ms
 GET /api/socket-health 200 in 29ms
 GET /socket.io?EIO=4&transport=polling&t=07neg3w2 404 in 126ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
 GET /api/socket-health 200 in 88ms
 GET /socket.io?EIO=4&transport=polling&t=07o7tjwl 404 in 134ms
 POST /api/users/heartbeat 200 in 296ms
 GET /api/socket-health 200 in 80ms
=== FRIEND REQUEST GET START ===
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
Request type: received User: sayantan2@gmail.com
âœ… Database connected
âœ… Current user found: {
  id: new ObjectId('6901f85f42c5d010fa811206'),
  email: 'sayantan2@gmail.com',
  friendRequestsCount: 0,
  sentRequestsCount: 1
}
Processing received requests...
Raw friendRequests: []
Processed receivedRequests: []
Populating sender details...
Final populated requests: []
=== FRIEND REQUEST GET END (received) ===
 GET /api/friends/request?type=received 200 in 215ms
=== FRIEND REQUEST GET START ===
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
Request type: sent User: sayantan2@gmail.com
âœ… Database connected
 GET /socket.io?EIO=4&transport=polling&t=07oz680c 404 in 175ms
âœ… Current user found: {
  id: new ObjectId('6901f85f42c5d010fa811206'),
  email: 'sayantan2@gmail.com',
  friendRequestsCount: 0,
  sentRequestsCount: 1
}
Processing sent requests...
Raw sentRequests: [
  {
    from: new ObjectId('6901f85f42c5d010fa811206'),
    fromName: 'sayantan2',
    to: new ObjectId('6905adf16a22b7843b006183'),
    toName: 'sayantan3',
    status: 'pending',
    _id: new ObjectId('6905cdce14ad0d0f020b3985'),
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
Filtering sent request: { status: 'pending', to: new ObjectId('6905adf16a22b7843b006183') }
Mapping sent request: {
  from: new ObjectId('6901f85f42c5d010fa811206'),
  fromName: 'sayantan2',
  to: new ObjectId('6905adf16a22b7843b006183'),
  toName: 'sayantan3',
  status: 'pending',
  _id: new ObjectId('6905cdce14ad0d0f020b3985'),
  createdAt: 2025-11-01T09:07:26.707Z,
  updatedAt: 2025-11-01T09:07:26.707Z
}
Processed sentRequests: [
  {
    id: '6905cdce14ad0d0f020b3985',
    to: {
      id: '6905adf16a22b7843b006183',
      username: 'sayantan3',
      email: '',
      profilePicture: null
    },
    status: 'pending',
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
Populating recipient details...
Looking up recipient: 6905adf16a22b7843b006183
Found recipient: sayantan3
Final populated sent requests: [
  {
    id: '6905cdce14ad0d0f020b3985',
    to: {
      id: '6905adf16a22b7843b006183',
      username: 'sayantan3',
      email: 'sayantan3@gmail.com',
      profilePicture: undefined
    },
    status: 'pending',
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
=== FRIEND REQUEST GET END (sent) ===
 GET /api/friends/request?type=sent 200 in 136ms
 GET /api/socket-health 200 in 82ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
 GET /api/conversations 200 in 311ms
 GET /socket.io?EIO=4&transport=polling&t=07prg0h4 404 in 205ms
 GET /api/socket-health 200 in 63ms
 GET /socket.io?EIO=4&transport=polling&t=07qias6j 404 in 152ms
 GET /api/socket-health 200 in 28ms
 GET /socket.io?EIO=4&transport=polling&t=07r93qj0 404 in 103ms
 GET /api/socket-health 200 in 61ms
 GET /socket.io?EIO=4&transport=polling&t=07s3ez8s 404 in 140ms
 GET /api/socket-health 200 in 36ms
 GET /socket.io?EIO=4&transport=polling&t=07sspq56 404 in 114ms
 GET /api/socket-health 200 in 29ms
 GET /socket.io?EIO=4&transport=polling&t=07tkc30w 404 in 101ms
 GET /api/socket-health 200 in 43ms
 GET /socket.io?EIO=4&transport=polling&t=07ucja4c 404 in 129ms
 GET /api/socket-health 200 in 34ms
 GET /socket.io?EIO=4&transport=polling&t=07v420g3 404 in 115ms
 GET /api/socket-health 200 in 36ms
 GET /socket.io?EIO=4&transport=polling&t=07vvybry 404 in 109ms
 GET /api/socket-health 200 in 45ms
 GET /socket.io?EIO=4&transport=polling&t=07wo9zk9 404 in 121ms
 GET /api/socket-health 200 in 42ms
 GET /socket.io?EIO=4&transport=polling&t=07xfvh00 404 in 102ms
 GET /api/socket-health 200 in 29ms
 GET /socket.io?EIO=4&transport=polling&t=07y72ufk 404 in 103ms
 GET /api/socket-health 200 in 41ms
 GET /socket.io?EIO=4&transport=polling&t=07yzbaao 404 in 114ms
 GET /api/socket-health 200 in 31ms
 GET /socket.io?EIO=4&transport=polling&t=07zqvzsi 404 in 103ms
 GET /api/socket-health 200 in 28ms
 GET /socket.io?EIO=4&transport=polling&t=080id10u 404 in 100ms
 GET /api/socket-health 200 in 32ms
 GET /socket.io?EIO=4&transport=polling&t=081ab32y 404 in 107ms
 GET /api/socket-health 200 in 35ms
 GET /socket.io?EIO=4&transport=polling&t=0822gviq 404 in 100ms
 GET /api/socket-health 200 in 36ms
 GET /socket.io?EIO=4&transport=polling&t=082tpvs9 404 in 112ms
 GET /api/socket-health 200 in 28ms
 GET /socket.io?EIO=4&transport=polling&t=083lo1lq 404 in 94ms
 GET /api/socket-health 200 in 29ms
 GET /socket.io?EIO=4&transport=polling&t=084d4ahf 404 in 178ms
 GET /api/socket-health 200 in 37ms
 GET /socket.io?EIO=4&transport=polling&t=08558m62 404 in 105ms
 GET /api/socket-health 200 in 29ms
 GET /socket.io?EIO=4&transport=polling&t=085x4dns 404 in 113ms
 GET /api/socket-health 200 in 29ms
 GET /socket.io?EIO=4&transport=polling&t=086ohwbl 404 in 106ms
 GET /api/socket-health 200 in 47ms
 GET /socket.io?EIO=4&transport=polling&t=087gvi9b 404 in 132ms
 GET /api/socket-health 200 in 33ms
 GET /socket.io?EIO=4&transport=polling&t=08885yf1 404 in 108ms
 GET /api/socket-health 200 in 26ms
 GET /socket.io?EIO=4&transport=polling&t=088ztnz9 404 in 92ms
 GET /api/socket-health 200 in 36ms
 GET /socket.io?EIO=4&transport=polling&t=089s8w5r 404 in 145ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
=== FRIEND REQUEST GET START ===
 GET /api/socket-health 200 in 119ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
Request type: received User: sayantan2@gmail.com
âœ… Database connected
 GET /api/friends 200 in 271ms
 GET /socket.io?EIO=4&transport=polling&t=08amikja 404 in 172ms
âœ… Current user found: {
  id: new ObjectId('6901f85f42c5d010fa811206'),
  email: 'sayantan2@gmail.com',
  friendRequestsCount: 0,
  sentRequestsCount: 1
}
Processing received requests...
Raw friendRequests: []
Processed receivedRequests: []
Populating sender details...
Final populated requests: []
=== FRIEND REQUEST GET END (received) ===
 GET /api/friends/request?type=received 200 in 648ms
=== FRIEND REQUEST GET START ===
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
Request type: sent User: sayantan2@gmail.com
âœ… Database connected
âœ… Current user found: {
  id: new ObjectId('6901f85f42c5d010fa811206'),
  email: 'sayantan2@gmail.com',
  friendRequestsCount: 0,
  sentRequestsCount: 1
}
Processing sent requests...
Raw sentRequests: [
  {
    from: new ObjectId('6901f85f42c5d010fa811206'),
    fromName: 'sayantan2',
    to: new ObjectId('6905adf16a22b7843b006183'),
    toName: 'sayantan3',
    status: 'pending',
    _id: new ObjectId('6905cdce14ad0d0f020b3985'),
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
Filtering sent request: { status: 'pending', to: new ObjectId('6905adf16a22b7843b006183') }
Mapping sent request: {
  from: new ObjectId('6901f85f42c5d010fa811206'),
  fromName: 'sayantan2',
  to: new ObjectId('6905adf16a22b7843b006183'),
  toName: 'sayantan3',
  status: 'pending',
  _id: new ObjectId('6905cdce14ad0d0f020b3985'),
  createdAt: 2025-11-01T09:07:26.707Z,
  updatedAt: 2025-11-01T09:07:26.707Z
}
Processed sentRequests: [
  {
    id: '6905cdce14ad0d0f020b3985',
    to: {
      id: '6905adf16a22b7843b006183',
      username: 'sayantan3',
      email: '',
      profilePicture: null
    },
    status: 'pending',
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
Populating recipient details...
Looking up recipient: 6905adf16a22b7843b006183
Found recipient: sayantan3
Final populated sent requests: [
  {
    id: '6905cdce14ad0d0f020b3985',
    to: {
      id: '6905adf16a22b7843b006183',
      username: 'sayantan3',
      email: 'sayantan3@gmail.com',
      profilePicture: undefined
    },
    status: 'pending',
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
=== FRIEND REQUEST GET END (sent) ===
 GET /api/friends/request?type=sent 200 in 173ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
 GET /api/socket-health 200 in 75ms
 GET /socket.io?EIO=4&transport=polling&t=08bdeex2 404 in 118ms
 POST /api/users/heartbeat 200 in 278ms
 GET /api/socket-health 200 in 29ms
 GET /socket.io?EIO=4&transport=polling&t=08c2yxdt 404 in 93ms
 GET /api/socket-health 200 in 36ms
 GET /socket.io?EIO=4&transport=polling&t=08cvco3x 404 in 113ms
 GET /api/socket-health 200 in 102ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
 GET /api/conversations 200 in 291ms
 GET /socket.io?EIO=4&transport=polling&t=08dozeqb 404 in 175ms
 GET /api/socket-health 200 in 30ms
 GET /socket.io?EIO=4&transport=polling&t=08eeo3pw 404 in 131ms
 GET /api/socket-health 200 in 50ms
 GET /socket.io?EIO=4&transport=polling&t=08f8l4ix 404 in 194ms
 GET /api/socket-health 200 in 38ms
 GET /socket.io?EIO=4&transport=polling&t=08fy8ymo 404 in 167ms
 GET /api/socket-health 200 in 55ms
 GET /socket.io?EIO=4&transport=polling&t=08gqxua2 404 in 172ms
 GET /api/socket-health 200 in 37ms
 GET /socket.io?EIO=4&transport=polling&t=08hhl2n4 404 in 101ms
 GET /api/socket-health 200 in 45ms
 GET /socket.io?EIO=4&transport=polling&t=08i9wnlr 404 in 114ms
 GET /api/socket-health 200 in 34ms
 GET /socket.io?EIO=4&transport=polling&t=08j1d93p 404 in 112ms
 GET /api/socket-health 200 in 55ms
 GET /socket.io?EIO=4&transport=polling&t=08jpaesm 404 in 130ms
 GET /api/socket-health 200 in 29ms
 GET /socket.io?EIO=4&transport=polling&t=08kklt13 404 in 104ms
 GET /api/socket-health 200 in 38ms
 GET /socket.io?EIO=4&transport=polling&t=08lcwdzj 404 in 122ms
 GET /api/socket-health 200 in 103ms
=== FRIEND REQUEST GET START ===
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
Request type: received User: sayantan2@gmail.com
âœ… Database connected
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
âœ… Current user found: {
  id: new ObjectId('6901f85f42c5d010fa811206'),
  email: 'sayantan2@gmail.com',
  friendRequestsCount: 0,
  sentRequestsCount: 1
}
Processing received requests...
Raw friendRequests: []
Processed receivedRequests: []
Populating sender details...
Final populated requests: []
=== FRIEND REQUEST GET END (received) ===
 GET /api/friends/request?type=received 200 in 225ms
 GET /api/friends 200 in 269ms
=== FRIEND REQUEST GET START ===
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
Request type: sent User: sayantan2@gmail.com
âœ… Database connected
 GET /socket.io?EIO=4&transport=polling&t=08m6ib4f 404 in 171ms
âœ… Current user found: {
  id: new ObjectId('6901f85f42c5d010fa811206'),
  email: 'sayantan2@gmail.com',
  friendRequestsCount: 0,
  sentRequestsCount: 1
}
Processing sent requests...
Raw sentRequests: [
  {
    from: new ObjectId('6901f85f42c5d010fa811206'),
    fromName: 'sayantan2',
    to: new ObjectId('6905adf16a22b7843b006183'),
    toName: 'sayantan3',
    status: 'pending',
    _id: new ObjectId('6905cdce14ad0d0f020b3985'),
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
Filtering sent request: { status: 'pending', to: new ObjectId('6905adf16a22b7843b006183') }
Mapping sent request: {
  from: new ObjectId('6901f85f42c5d010fa811206'),
  fromName: 'sayantan2',
  to: new ObjectId('6905adf16a22b7843b006183'),
  toName: 'sayantan3',
  status: 'pending',
  _id: new ObjectId('6905cdce14ad0d0f020b3985'),
  createdAt: 2025-11-01T09:07:26.707Z,
  updatedAt: 2025-11-01T09:07:26.707Z
}
Processed sentRequests: [
  {
    id: '6905cdce14ad0d0f020b3985',
    to: {
      id: '6905adf16a22b7843b006183',
      username: 'sayantan3',
      email: '',
      profilePicture: null
    },
    status: 'pending',
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
Populating recipient details...
Looking up recipient: 6905adf16a22b7843b006183
Found recipient: sayantan3
Final populated sent requests: [
  {
    id: '6905cdce14ad0d0f020b3985',
    to: {
      id: '6905adf16a22b7843b006183',
      username: 'sayantan3',
      email: 'sayantan3@gmail.com',
      profilePicture: undefined
    },
    status: 'pending',
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
=== FRIEND REQUEST GET END (sent) ===
 GET /api/friends/request?type=sent 200 in 138ms
 GET /api/socket-health 200 in 45ms
 GET /socket.io?EIO=4&transport=polling&t=08mwhtoh 404 in 109ms
 GET /api/socket-health 200 in 36ms
 GET /socket.io?EIO=4&transport=polling&t=08nnzunl 404 in 135ms
 GET /api/socket-health 200 in 32ms
 GET /socket.io?EIO=4&transport=polling&t=08ofiije 404 in 148ms
 GET /api/socket-health 200 in 43ms
 GET /socket.io?EIO=4&transport=polling&t=08p7kd72 404 in 183ms
 GET /api/socket-health 200 in 77ms
 GET /socket.io?EIO=4&transport=polling&t=08q0mes6 404 in 253ms
 GET /api/socket-health 200 in 39ms
 GET /socket.io?EIO=4&transport=polling&t=08qr77x1 404 in 117ms
 GET /api/socket-health 200 in 37ms
 GET /socket.io?EIO=4&transport=polling&t=08riz7k2 404 in 104ms
 GET /api/socket-health 200 in 31ms
 GET /socket.io?EIO=4&transport=polling&t=08sagai7 404 in 107ms
 GET /api/socket-health 200 in 34ms
 GET /socket.io?EIO=4&transport=polling&t=08t281n8 404 in 149ms
 GET /api/socket-health 200 in 63ms
 GET /socket.io?EIO=4&transport=polling&t=08tv3a1n 404 in 133ms
 GET /api/socket-health 200 in 38ms
 GET /socket.io?EIO=4&transport=polling&t=08um6r8n 404 in 170ms
 GET /api/socket-health 200 in 35ms
 GET /socket.io?EIO=4&transport=polling&t=08ve40mb 404 in 216ms
 GET /api/socket-health 200 in 42ms
 GET /socket.io?EIO=4&transport=polling&t=08w61m4g 404 in 144ms
 GET /api/socket-health 200 in 49ms
 GET /socket.io?EIO=4&transport=polling&t=08wxrqba 404 in 138ms
 GET /api/socket-health 200 in 36ms
 GET /socket.io?EIO=4&transport=polling&t=08xpcbjs 404 in 124ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
 GET /api/socket-health 200 in 117ms
 GET /socket.io?EIO=4&transport=polling&t=08yjovl1 404 in 163ms
 POST /api/users/heartbeat 200 in 371ms
 GET /api/socket-health 200 in 38ms
 GET /socket.io?EIO=4&transport=polling&t=08z8mcqn 404 in 131ms
 GET /api/socket-health 200 in 41ms
 GET /socket.io?EIO=4&transport=polling&t=0900ytv4 404 in 142ms
 GET /api/socket-health 200 in 232ms
 GET /api/socket-health 200 in 560ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
 GET /socket.io?EIO=4&transport=polling&t=0911dsha 404 in 1546ms
 GET /socket.io?EIO=4&transport=polling&t=09248tbn 404 in 255ms
 GET /api/conversations 200 in 1069ms
 GET /api/socket-health 200 in 33ms
 GET /api/socket-health 200 in 126ms
 GET /socket.io?EIO=4&transport=polling&t=093v8wco 404 in 229ms
 GET /socket.io?EIO=4&transport=polling&t=093ysc2f 404 in 116ms
 GET /api/socket-health 200 in 42ms
 GET /api/socket-health 200 in 126ms
 GET /socket.io?EIO=4&transport=polling&t=095f2ihe 404 in 221ms
 GET /socket.io?EIO=4&transport=polling&t=095ipi42 404 in 108ms
 GET /api/socket-health 200 in 32ms
 GET /api/socket-health 200 in 123ms
 GET /socket.io?EIO=4&transport=polling&t=096y7fbd 404 in 219ms
 GET /socket.io?EIO=4&transport=polling&t=0971oof8 404 in 114ms
 GET /api/socket-health 200 in 28ms
 GET /api/socket-health 200 in 121ms
 GET /socket.io?EIO=4&transport=polling&t=098hkgbk 404 in 239ms
 GET /socket.io?EIO=4&transport=polling&t=098kzvpw 404 in 142ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
=== FRIEND REQUEST GET START ===
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
Request type: received User: sayantan2@gmail.com
âœ… Database connected
âœ… Current user found: {
  id: new ObjectId('6901f85f42c5d010fa811206'),
  email: 'sayantan2@gmail.com',
  friendRequestsCount: 0,
  sentRequestsCount: 1
}
Processing received requests...
Raw friendRequests: []
Processed receivedRequests: []
Populating sender details...
Final populated requests: []
=== FRIEND REQUEST GET END (received) ===
 GET /api/friends/request?type=received 200 in 126ms
 GET /api/friends 200 in 144ms
=== FRIEND REQUEST GET START ===
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
Request type: sent User: sayantan2@gmail.com
âœ… Database connected
âœ… Current user found: {
  id: new ObjectId('6901f85f42c5d010fa811206'),
  email: 'sayantan2@gmail.com',
  friendRequestsCount: 0,
  sentRequestsCount: 1
}
Processing sent requests...
Raw sentRequests: [
  {
    from: new ObjectId('6901f85f42c5d010fa811206'),
    fromName: 'sayantan2',
    to: new ObjectId('6905adf16a22b7843b006183'),
    toName: 'sayantan3',
    status: 'pending',
    _id: new ObjectId('6905cdce14ad0d0f020b3985'),
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
Filtering sent request: { status: 'pending', to: new ObjectId('6905adf16a22b7843b006183') }
Mapping sent request: {
  from: new ObjectId('6901f85f42c5d010fa811206'),
  fromName: 'sayantan2',
  to: new ObjectId('6905adf16a22b7843b006183'),
  toName: 'sayantan3',
  status: 'pending',
  _id: new ObjectId('6905cdce14ad0d0f020b3985'),
  createdAt: 2025-11-01T09:07:26.707Z,
  updatedAt: 2025-11-01T09:07:26.707Z
}
Processed sentRequests: [
  {
    id: '6905cdce14ad0d0f020b3985',
    to: {
      id: '6905adf16a22b7843b006183',
      username: 'sayantan3',
      email: '',
      profilePicture: null
    },
    status: 'pending',
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
Populating recipient details...
Looking up recipient: 6905adf16a22b7843b006183
Found recipient: sayantan3
Final populated sent requests: [
  {
    id: '6905cdce14ad0d0f020b3985',
    to: {
      id: '6905adf16a22b7843b006183',
      username: 'sayantan3',
      email: 'sayantan3@gmail.com',
      profilePicture: undefined
    },
    status: 'pending',
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
=== FRIEND REQUEST GET END (sent) ===
 GET /api/friends/request?type=sent 200 in 150ms
 GET /api/socket-health 200 in 32ms
 GET /api/socket-health 200 in 34ms
 GET /socket.io?EIO=4&transport=polling&t=09a1k0uk 404 in 221ms
 GET /socket.io?EIO=4&transport=polling&t=09a2kwtc 404 in 114ms
 GET /api/socket-health 200 in 38ms
 GET /api/socket-health 200 in 34ms
 GET /socket.io?EIO=4&transport=polling&t=09bl8jrx 404 in 248ms
 GET /socket.io?EIO=4&transport=polling&t=09bm8fp2 404 in 131ms
 GET /api/socket-health 200 in 28ms
 GET /api/socket-health 200 in 119ms
 GET /socket.io?EIO=4&transport=polling&t=09d4i1r9 404 in 215ms
 GET /socket.io?EIO=4&transport=polling&t=09d7xjja 404 in 103ms
 GET /api/socket-health 200 in 36ms
 GET /api/socket-health 200 in 32ms
 GET /socket.io?EIO=4&transport=polling&t=09eo4sl1 404 in 210ms
 GET /socket.io?EIO=4&transport=polling&t=09ep2ypm 404 in 108ms
 GET /api/socket-health 200 in 29ms
 GET /api/socket-health 200 in 126ms
 GET /socket.io?EIO=4&transport=polling&t=09g7hk5c 404 in 228ms
 GET /socket.io?EIO=4&transport=polling&t=09gb1udw 404 in 110ms
 GET /api/socket-health 200 in 33ms
 GET /api/socket-health 200 in 136ms
 GET /socket.io?EIO=4&transport=polling&t=09hrga38 404 in 233ms
 GET /socket.io?EIO=4&transport=polling&t=09hv9oz0 404 in 116ms
 GET /api/socket-health 200 in 31ms
 GET /api/socket-health 200 in 119ms
 GET /socket.io?EIO=4&transport=polling&t=09jasily 404 in 213ms
 GET /socket.io?EIO=4&transport=polling&t=09je7ffy 404 in 107ms
 GET /api/socket-health 200 in 37ms
 GET /api/socket-health 200 in 51ms
 GET /socket.io?EIO=4&transport=polling&t=09kui315 404 in 245ms
 GET /socket.io?EIO=4&transport=polling&t=09kw0u1j 404 in 115ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
 POST /api/users/heartbeat 200 in 176ms
 GET /api/socket-health 200 in 52ms
 GET /api/socket-health 200 in 114ms
 GET /socket.io?EIO=4&transport=polling&t=09meivjy 404 in 196ms
 GET /socket.io?EIO=4&transport=polling&t=09mhqbn4 404 in 100ms
 GET /api/socket-health 200 in 27ms
 GET /api/socket-health 200 in 113ms
 GET /socket.io?EIO=4&transport=polling&t=09nx889l 404 in 199ms
 GET /socket.io?EIO=4&transport=polling&t=09o0fsul 404 in 93ms
 GET /api/socket-health 200 in 38ms
 GET /api/socket-health 200 in 121ms
 GET /socket.io?EIO=4&transport=polling&t=09phgmq6 404 in 206ms
 GET /socket.io?EIO=4&transport=polling&t=09pkvyox 404 in 101ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
 GET /api/conversations 200 in 145ms
 GET /api/socket-health 200 in 34ms
 GET /api/socket-health 200 in 115ms
 GET /socket.io?EIO=4&transport=polling&t=09r0s57i 404 in 200ms
 GET /socket.io?EIO=4&transport=polling&t=09r41y7c 404 in 101ms
 GET /api/socket-health 200 in 29ms
 GET /api/socket-health 200 in 112ms
 GET /socket.io?EIO=4&transport=polling&t=09sjzrpq 404 in 193ms
 GET /socket.io?EIO=4&transport=polling&t=09sn6yk1 404 in 91ms
 GET /api/socket-health 200 in 33ms
 GET /api/socket-health 200 in 111ms
 GET /socket.io?EIO=4&transport=polling&t=09u3ov22 404 in 188ms
 GET /socket.io?EIO=4&transport=polling&t=09u6una6 404 in 94ms
 GET /api/socket-health 200 in 26ms
 GET /api/socket-health 200 in 114ms
 GET /socket.io?EIO=4&transport=polling&t=09vn0csf 404 in 204ms
 GET /socket.io?EIO=4&transport=polling&t=09vq80be 404 in 97ms
 GET /api/socket-health 200 in 43ms
=== FRIEND REQUEST GET START ===
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
Request type: received User: sayantan2@gmail.com
âœ… Database connected
 GET /api/socket-health 200 in 128ms
âœ… Current user found: {
  id: new ObjectId('6901f85f42c5d010fa811206'),
  email: 'sayantan2@gmail.com',
  friendRequestsCount: 0,
  sentRequestsCount: 1
}
Processing received requests...
Raw friendRequests: []
Processed receivedRequests: []
Populating sender details...
Final populated requests: []
=== FRIEND REQUEST GET END (received) ===
 GET /api/friends/request?type=received 200 in 177ms
=== FRIEND REQUEST GET START ===
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
Request type: sent User: sayantan2@gmail.com
âœ… Database connected
 GET /socket.io?EIO=4&transport=polling&t=09x73qpc 404 in 236ms
 GET /socket.io?EIO=4&transport=polling&t=09xarlph 404 in 117ms
âœ… Current user found: {
  id: new ObjectId('6901f85f42c5d010fa811206'),
  email: 'sayantan2@gmail.com',
  friendRequestsCount: 0,
  sentRequestsCount: 1
}
Processing sent requests...
Raw sentRequests: [
  {
    from: new ObjectId('6901f85f42c5d010fa811206'),
    fromName: 'sayantan2',
    to: new ObjectId('6905adf16a22b7843b006183'),
    toName: 'sayantan3',
    status: 'pending',
    _id: new ObjectId('6905cdce14ad0d0f020b3985'),
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
Filtering sent request: { status: 'pending', to: new ObjectId('6905adf16a22b7843b006183') }
Mapping sent request: {
  from: new ObjectId('6901f85f42c5d010fa811206'),
  fromName: 'sayantan2',
  to: new ObjectId('6905adf16a22b7843b006183'),
  toName: 'sayantan3',
  status: 'pending',
  _id: new ObjectId('6905cdce14ad0d0f020b3985'),
  createdAt: 2025-11-01T09:07:26.707Z,
  updatedAt: 2025-11-01T09:07:26.707Z
}
Processed sentRequests: [
  {
    id: '6905cdce14ad0d0f020b3985',
    to: {
      id: '6905adf16a22b7843b006183',
      username: 'sayantan3',
      email: '',
      profilePicture: null
    },
    status: 'pending',
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
Populating recipient details...
Looking up recipient: 6905adf16a22b7843b006183
Found recipient: sayantan3
Final populated sent requests: [
  {
    id: '6905cdce14ad0d0f020b3985',
    to: {
      id: '6905adf16a22b7843b006183',
      username: 'sayantan3',
      email: 'sayantan3@gmail.com',
      profilePicture: undefined
    },
    status: 'pending',
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
=== FRIEND REQUEST GET END (sent) ===
 GET /api/friends/request?type=sent 200 in 198ms
 GET /api/socket-health 200 in 26ms
 GET /api/socket-health 200 in 35ms
 GET /socket.io?EIO=4&transport=polling&t=09yqdu40 404 in 209ms
 GET /socket.io?EIO=4&transport=polling&t=09yreri3 404 in 108ms
 GET /api/socket-health 200 in 27ms
 GET /api/socket-health 200 in 112ms
 GET /socket.io?EIO=4&transport=polling&t=0a09uli4 404 in 205ms
 GET /socket.io?EIO=4&transport=polling&t=0a0d0n9l 404 in 103ms
 GET /api/socket-health 200 in 27ms
 GET /api/socket-health 200 in 121ms
 GET /socket.io?EIO=4&transport=polling&t=0a1tc0t8 404 in 204ms
 GET /socket.io?EIO=4&transport=polling&t=0a1wrjmf 404 in 102ms
 GET /api/socket-health 200 in 29ms
 GET /api/socket-health 200 in 110ms
 GET /socket.io?EIO=4&transport=polling&t=0a3cv0p6 404 in 192ms
 GET /socket.io?EIO=4&transport=polling&t=0a3g00ko 404 in 95ms
 GET /api/socket-health 200 in 37ms
 GET /api/socket-health 200 in 126ms
 GET /socket.io?EIO=4&transport=polling&t=0a4wk88c 404 in 219ms
 GET /socket.io?EIO=4&transport=polling&t=0a504sv8 404 in 114ms
 GET /api/socket-health 200 in 39ms
 GET /api/socket-health 200 in 178ms
 GET /socket.io?EIO=4&transport=polling&t=0a6g9tfl 404 in 299ms
 GET /socket.io?EIO=4&transport=polling&t=0a6l9ion 404 in 147ms
 GET /api/socket-health 200 in 84ms
 GET /api/socket-health 200 in 73ms
 GET /socket.io?EIO=4&transport=polling&t=0a8124kj 404 in 307ms
 GET /socket.io?EIO=4&transport=polling&t=0a835lv7 404 in 140ms
 GET /api/socket-health 200 in 139ms
 GET /api/socket-health 200 in 979ms
 GET /socket.io?EIO=4&transport=polling&t=0a9mj0l9 404 in 934ms
 GET /socket.io?EIO=4&transport=polling&t=0aadtn4c 404 in 172ms
 GET /api/socket-health 200 in 30ms
 GET /api/socket-health 200 in 245ms
 GET /socket.io?EIO=4&transport=polling&t=0abuhi43 404 in 384ms
 GET /socket.io?EIO=4&transport=polling&t=0ac1df33 404 in 148ms
 GET /api/socket-health 200 in 32ms
 GET /api/socket-health 200 in 196ms
 GET /socket.io?EIO=4&transport=polling&t=0ade3mzn 404 in 300ms
 GET /socket.io?EIO=4&transport=polling&t=0adjlx55 404 in 126ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
 GET /api/conversations 200 in 136ms
 GET /api/socket-health 200 in 57ms
 GET /api/socket-health 200 in 62ms
 GET /socket.io?EIO=4&transport=polling&t=0aeyhhwd 404 in 364ms
 GET /socket.io?EIO=4&transport=polling&t=0af09dol 404 in 168ms
 GET /api/socket-health 200 in 33ms
 GET /api/socket-health 200 in 111ms
 GET /socket.io?EIO=4&transport=polling&t=0agh1rpl 404 in 203ms
 GET /socket.io?EIO=4&transport=polling&t=0agk5ajj 404 in 103ms
 GET /api/socket-health 200 in 41ms
 GET /api/socket-health 200 in 125ms
 GET /socket.io?EIO=4&transport=polling&t=0ai18fay 404 in 268ms
 GET /socket.io?EIO=4&transport=polling&t=0ai4uji4 404 in 118ms
 GET /api/socket-health 200 in 44ms
 GET /api/socket-health 200 in 115ms
 GET /socket.io?EIO=4&transport=polling&t=0ajktvck 404 in 200ms
 GET /socket.io?EIO=4&transport=polling&t=0ajo3pd4 404 in 99ms
 GET /api/socket-health 200 in 47ms
=== FRIEND REQUEST GET START ===
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
Request type: received User: sayantan2@gmail.com
âœ… Database connected
âœ… Current user found: {
  id: new ObjectId('6901f85f42c5d010fa811206'),
  email: 'sayantan2@gmail.com',
  friendRequestsCount: 0,
  sentRequestsCount: 1
}
Processing received requests...
Raw friendRequests: []
Processed receivedRequests: []
Populating sender details...
Final populated requests: []
=== FRIEND REQUEST GET END (received) ===
 GET /api/friends/request?type=received 200 in 158ms
 GET /api/socket-health 200 in 119ms
=== FRIEND REQUEST GET START ===
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
Request type: sent User: sayantan2@gmail.com
âœ… Database connected
 GET /socket.io?EIO=4&transport=polling&t=0al4bwfx 404 in 224ms
 GET /socket.io?EIO=4&transport=polling&t=0al7y027 404 in 115ms
âœ… Current user found: {
  id: new ObjectId('6901f85f42c5d010fa811206'),
  email: 'sayantan2@gmail.com',
  friendRequestsCount: 0,
  sentRequestsCount: 1
}
Processing sent requests...
Raw sentRequests: [
  {
    from: new ObjectId('6901f85f42c5d010fa811206'),
    fromName: 'sayantan2',
    to: new ObjectId('6905adf16a22b7843b006183'),
    toName: 'sayantan3',
    status: 'pending',
    _id: new ObjectId('6905cdce14ad0d0f020b3985'),
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
Filtering sent request: { status: 'pending', to: new ObjectId('6905adf16a22b7843b006183') }
Mapping sent request: {
  from: new ObjectId('6901f85f42c5d010fa811206'),
  fromName: 'sayantan2',
  to: new ObjectId('6905adf16a22b7843b006183'),
  toName: 'sayantan3',
  status: 'pending',
  _id: new ObjectId('6905cdce14ad0d0f020b3985'),
  createdAt: 2025-11-01T09:07:26.707Z,
  updatedAt: 2025-11-01T09:07:26.707Z
}
Processed sentRequests: [
  {
    id: '6905cdce14ad0d0f020b3985',
    to: {
      id: '6905adf16a22b7843b006183',
      username: 'sayantan3',
      email: '',
      profilePicture: null
    },
    status: 'pending',
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
Populating recipient details...
Looking up recipient: 6905adf16a22b7843b006183
Found recipient: sayantan3
Final populated sent requests: [
  {
    id: '6905cdce14ad0d0f020b3985',
    to: {
      id: '6905adf16a22b7843b006183',
      username: 'sayantan3',
      email: 'sayantan3@gmail.com',
      profilePicture: undefined
    },
    status: 'pending',
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
=== FRIEND REQUEST GET END (sent) ===
 GET /api/friends/request?type=sent 200 in 193ms
 GET /api/socket-health 200 in 29ms
 GET /api/socket-health 200 in 123ms
 GET /socket.io?EIO=4&transport=polling&t=0amneq9a 404 in 200ms
 GET /socket.io?EIO=4&transport=polling&t=0amquyhj 404 in 99ms
 GET /api/socket-health 200 in 29ms
 GET /api/socket-health 200 in 112ms
 GET /socket.io?EIO=4&transport=polling&t=0ao6vrih 404 in 197ms
 GET /socket.io?EIO=4&transport=polling&t=0aoa0q06 404 in 99ms
 GET /api/socket-health 200 in 27ms
 GET /api/socket-health 200 in 34ms
 GET /socket.io?EIO=4&transport=polling&t=0apqk9ga 404 in 198ms
 GET /socket.io?EIO=4&transport=polling&t=0aprk950 404 in 105ms
 GET /api/socket-health 200 in 35ms
 GET /api/socket-health 200 in 51ms
 GET /socket.io?EIO=4&transport=polling&t=0ara0rce 404 in 265ms
 GET /socket.io?EIO=4&transport=polling&t=0arbi57d 404 in 127ms
 GET /api/socket-health 200 in 49ms
 GET /api/socket-health 200 in 123ms
 GET /socket.io?EIO=4&transport=polling&t=0astvgjk 404 in 212ms
 GET /socket.io?EIO=4&transport=polling&t=0asxknb6 404 in 100ms
 GET /api/socket-health 200 in 49ms
 GET /api/socket-health 200 in 76ms
 GET /socket.io?EIO=4&transport=polling&t=0audwvuy 404 in 338ms
 GET /socket.io?EIO=4&transport=polling&t=0aug4mli 404 in 176ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
=== FRIEND REQUEST GET START ===
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
Request type: received User: sayantan2@gmail.com
âœ… Database connected
 POST /api/users/heartbeat 200 in 201ms
âœ… Current user found: {
  id: new ObjectId('6901f85f42c5d010fa811206'),
  email: 'sayantan2@gmail.com',
  friendRequestsCount: 0,
  sentRequestsCount: 1
}
Processing received requests...
Raw friendRequests: []
Processed receivedRequests: []
Populating sender details...
Final populated requests: []
=== FRIEND REQUEST GET END (received) ===
 GET /api/friends/request?type=received 200 in 509ms
=== FRIEND REQUEST GET START ===
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
Request type: sent User: sayantan2@gmail.com
âœ… Database connected
 GET /api/friends 200 in 599ms
âœ… Current user found: {
  id: new ObjectId('6901f85f42c5d010fa811206'),
  email: 'sayantan2@gmail.com',
  friendRequestsCount: 0,
  sentRequestsCount: 1
}
Processing sent requests...
Raw sentRequests: [
  {
    from: new ObjectId('6901f85f42c5d010fa811206'),
    fromName: 'sayantan2',
    to: new ObjectId('6905adf16a22b7843b006183'),
    toName: 'sayantan3',
    status: 'pending',
    _id: new ObjectId('6905cdce14ad0d0f020b3985'),
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
Filtering sent request: { status: 'pending', to: new ObjectId('6905adf16a22b7843b006183') }
Mapping sent request: {
  from: new ObjectId('6901f85f42c5d010fa811206'),
  fromName: 'sayantan2',
  to: new ObjectId('6905adf16a22b7843b006183'),
  toName: 'sayantan3',
  status: 'pending',
  _id: new ObjectId('6905cdce14ad0d0f020b3985'),
  createdAt: 2025-11-01T09:07:26.707Z,
  updatedAt: 2025-11-01T09:07:26.707Z
}
Processed sentRequests: [
  {
    id: '6905cdce14ad0d0f020b3985',
    to: {
      id: '6905adf16a22b7843b006183',
      username: 'sayantan3',
      email: '',
      profilePicture: null
    },
    status: 'pending',
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
Populating recipient details...
Looking up recipient: 6905adf16a22b7843b006183
Found recipient: sayantan3
Final populated sent requests: [
  {
    id: '6905cdce14ad0d0f020b3985',
    to: {
      id: '6905adf16a22b7843b006183',
      username: 'sayantan3',
      email: 'sayantan3@gmail.com',
      profilePicture: undefined
    },
    status: 'pending',
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
=== FRIEND REQUEST GET END (sent) ===
 GET /api/friends/request?type=sent 200 in 146ms
 GET /api/socket-health 200 in 32ms
 GET /api/socket-health 200 in 45ms
 GET /socket.io?EIO=4&transport=polling&t=0avwy333 404 in 254ms
 GET /socket.io?EIO=4&transport=polling&t=0avy9s31 404 in 126ms
 GET /api/socket-health 200 in 32ms
 GET /api/socket-health 200 in 32ms
 GET /socket.io?EIO=4&transport=polling&t=0axgb8pv 404 in 235ms
 GET /socket.io?EIO=4&transport=polling&t=0axhb8bw 404 in 122ms
 GET /api/socket-health 200 in 32ms
 GET /api/socket-health 200 in 118ms
 GET /socket.io?EIO=4&transport=polling&t=0ayzt94l 404 in 228ms
 GET /socket.io?EIO=4&transport=polling&t=0az35d42 404 in 125ms
 GET /api/socket-health 200 in 36ms
 GET /api/socket-health 200 in 147ms
 GET /socket.io?EIO=4&transport=polling&t=0b0jf72a 404 in 300ms
 GET /socket.io?EIO=4&transport=polling&t=0b0nlvp0 404 in 169ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
 GET /api/socket-health 200 in 133ms
 GET /api/conversations 200 in 293ms
 GET /api/socket-health 200 in 164ms
 GET /socket.io?EIO=4&transport=polling&t=0b261z86 404 in 240ms
 GET /socket.io?EIO=4&transport=polling&t=0b2axwg8 404 in 118ms
 GET /api/socket-health 200 in 57ms
 GET /api/socket-health 200 in 84ms
 GET /socket.io?EIO=4&transport=polling&t=0b3ncwqr 404 in 457ms
 GET /socket.io?EIO=4&transport=polling&t=0b3psgl2 404 in 212ms
 GET /api/socket-health 200 in 65ms
 GET /api/socket-health 200 in 48ms
 GET /socket.io?EIO=4&transport=polling&t=0b5727ef 404 in 313ms
 GET /socket.io?EIO=4&transport=polling&t=0b58gfkv 404 in 136ms
 GET /api/socket-health 200 in 48ms
 GET /api/socket-health 200 in 56ms
 GET /socket.io?EIO=4&transport=polling&t=0b6q1986 404 in 303ms
 GET /socket.io?EIO=4&transport=polling&t=0b6rnp4l 404 in 153ms
 GET /api/socket-health 200 in 39ms
 GET /api/socket-health 200 in 32ms
 GET /socket.io?EIO=4&transport=polling&t=0b899o8j 404 in 213ms
 GET /socket.io?EIO=4&transport=polling&t=0b8a8hvw 404 in 115ms
 GET /api/socket-health 200 in 35ms
 GET /api/socket-health 200 in 45ms
 GET /socket.io?EIO=4&transport=polling&t=0b9t02xj 404 in 214ms
 GET /socket.io?EIO=4&transport=polling&t=0b9ublc2 404 in 104ms
 GET /api/socket-health 200 in 35ms
 GET /api/socket-health 200 in 124ms
 GET /socket.io?EIO=4&transport=polling&t=0bbckkvk 404 in 213ms
 GET /socket.io?EIO=4&transport=polling&t=0bbg2ypr 404 in 106ms
 GET /api/socket-health 200 in 33ms
 GET /api/socket-health 200 in 172ms
 GET /socket.io?EIO=4&transport=polling&t=0bcvvogr 404 in 305ms
 GET /socket.io?EIO=4&transport=polling&t=0bd0pee7 404 in 147ms
 GET /api/socket-health 200 in 46ms
 GET /api/socket-health 200 in 165ms
 GET /socket.io?EIO=4&transport=polling&t=0befo7ro 404 in 292ms
 GET /socket.io?EIO=4&transport=polling&t=0bekejmu 404 in 151ms
 GET /api/socket-health 200 in 38ms
 GET /api/socket-health 200 in 59ms
 GET /socket.io?EIO=4&transport=polling&t=0bfz16wq 404 in 294ms
 GET /socket.io?EIO=4&transport=polling&t=0bg0rl5x 404 in 145ms
 GET /api/socket-health 200 in 40ms
 GET /api/socket-health 200 in 158ms
 GET /socket.io?EIO=4&transport=polling&t=0bhilnst 404 in 987ms
 GET /socket.io?EIO=4&transport=polling&t=0bhn53ig 404 in 842ms
=== FRIEND REQUEST GET START ===
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
Request type: received User: sayantan2@gmail.com
âœ… Database connected
âœ… Current user found: {
  id: new ObjectId('6901f85f42c5d010fa811206'),
  email: 'sayantan2@gmail.com',
  friendRequestsCount: 0,
  sentRequestsCount: 1
}
Processing received requests...
Raw friendRequests: []
Processed receivedRequests: []
Populating sender details...
Final populated requests: []
=== FRIEND REQUEST GET END (received) ===
 GET /api/friends/request?type=received 200 in 89ms
=== FRIEND REQUEST GET START ===
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
Request type: sent User: sayantan2@gmail.com
âœ… Database connected
âœ… Current user found: {
  id: new ObjectId('6901f85f42c5d010fa811206'),
  email: 'sayantan2@gmail.com',
  friendRequestsCount: 0,
  sentRequestsCount: 1
}
Processing sent requests...
Raw sentRequests: [
  {
    from: new ObjectId('6901f85f42c5d010fa811206'),
    fromName: 'sayantan2',
    to: new ObjectId('6905adf16a22b7843b006183'),
    toName: 'sayantan3',
    status: 'pending',
    _id: new ObjectId('6905cdce14ad0d0f020b3985'),
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
Filtering sent request: { status: 'pending', to: new ObjectId('6905adf16a22b7843b006183') }
Mapping sent request: {
  from: new ObjectId('6901f85f42c5d010fa811206'),
  fromName: 'sayantan2',
  to: new ObjectId('6905adf16a22b7843b006183'),
  toName: 'sayantan3',
  status: 'pending',
  _id: new ObjectId('6905cdce14ad0d0f020b3985'),
  createdAt: 2025-11-01T09:07:26.707Z,
  updatedAt: 2025-11-01T09:07:26.707Z
}
Processed sentRequests: [
  {
    id: '6905cdce14ad0d0f020b3985',
    to: {
      id: '6905adf16a22b7843b006183',
      username: 'sayantan3',
      email: '',
      profilePicture: null
    },
    status: 'pending',
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
Populating recipient details...
Looking up recipient: 6905adf16a22b7843b006183
Found recipient: sayantan3
Final populated sent requests: [
  {
    id: '6905cdce14ad0d0f020b3985',
    to: {
      id: '6905adf16a22b7843b006183',
      username: 'sayantan3',
      email: 'sayantan3@gmail.com',
      profilePicture: undefined
    },
    status: 'pending',
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
=== FRIEND REQUEST GET END (sent) ===
 GET /api/friends/request?type=sent 200 in 130ms
 GET /api/socket-health 200 in 33ms
 GET /api/socket-health 200 in 112ms
 GET /socket.io?EIO=4&transport=polling&t=0bjtqxor 404 in 197ms
 GET /socket.io?EIO=4&transport=polling&t=0bjwwuqu 404 in 99ms
 GET /api/socket-health 200 in 28ms
 GET /api/socket-health 200 in 118ms
 GET /socket.io?EIO=4&transport=polling&t=0bldgy4x 404 in 205ms
 GET /socket.io?EIO=4&transport=polling&t=0blgs6em 404 in 95ms
 GET /api/socket-health 200 in 37ms
 GET /api/socket-health 200 in 169ms
 GET /socket.io?EIO=4&transport=polling&t=0bmxnd5c 404 in 260ms
 GET /socket.io?EIO=4&transport=polling&t=0bn2eyih 404 in 110ms
 GET /api/socket-health 200 in 26ms
 GET /api/socket-health 200 in 108ms
 GET /socket.io?EIO=4&transport=polling&t=0bogj4wc 404 in 195ms
 GET /socket.io?EIO=4&transport=polling&t=0bojl6nx 404 in 94ms
 GET /api/socket-health 200 in 45ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
 GET /api/socket-health 200 in 121ms
 GET /api/conversations 200 in 256ms
 GET /socket.io?EIO=4&transport=polling&t=0bq0l55f 404 in 204ms
 GET /socket.io?EIO=4&transport=polling&t=0bq42h50 404 in 99ms
 GET /api/socket-health 200 in 26ms
 GET /api/socket-health 200 in 32ms
 GET /socket.io?EIO=4&transport=polling&t=0brj8dor 404 in 195ms
 GET /socket.io?EIO=4&transport=polling&t=0brk65v3 404 in 98ms
 GET /api/socket-health 200 in 42ms
 GET /api/socket-health 200 in 137ms
 GET /socket.io?EIO=4&transport=polling&t=0bt3gtqp 404 in 238ms
 GET /socket.io?EIO=4&transport=polling&t=0bt7c36q 404 in 111ms
 GET /api/socket-health 200 in 44ms
 GET /api/socket-health 200 in 152ms
 GET /socket.io?EIO=4&transport=polling&t=0bun3zil 404 in 267ms
 GET /socket.io?EIO=4&transport=polling&t=0burfcrt 404 in 134ms
 GET /api/socket-health 200 in 49ms
 GET /api/socket-health 200 in 247ms
 GET /socket.io?EIO=4&transport=polling&t=0bw7232l 404 in 430ms
 GET /socket.io?EIO=4&transport=polling&t=0bwe3u7r 404 in 215ms
 GET /api/socket-health 200 in 39ms
 GET /api/socket-health 200 in 62ms
 GET /socket.io?EIO=4&transport=polling&t=0bxqreiw 404 in 368ms
 GET /socket.io?EIO=4&transport=polling&t=0bxsiktu 404 in 145ms
 GET /api/socket-health 200 in 33ms
 GET /api/socket-health 200 in 127ms
 GET /socket.io?EIO=4&transport=polling&t=0bz9dycn 404 in 217ms
 GET /socket.io?EIO=4&transport=polling&t=0bzczdbm 404 in 102ms
 GET /api/socket-health 200 in 28ms
 GET /api/socket-health 200 in 122ms
 GET /socket.io?EIO=4&transport=polling&t=0c0spfek 404 in 215ms
 GET /socket.io?EIO=4&transport=polling&t=0c0w526m 404 in 101ms
 GET /api/socket-health 200 in 34ms
 GET /api/socket-health 200 in 114ms
 GET /socket.io?EIO=4&transport=polling&t=0c2cj8rh 404 in 195ms
 GET /socket.io?EIO=4&transport=polling&t=0c2frgsd 404 in 93ms
 GET /api/socket-health 200 in 32ms
 GET /api/socket-health 200 in 38ms
 GET /socket.io?EIO=4&transport=polling&t=0c3vtcm2 404 in 219ms
 GET /socket.io?EIO=4&transport=polling&t=0c3wxjes 404 in 115ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
=== FRIEND REQUEST GET START ===
 GET /api/socket-health 200 in 102ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
Request type: received User: sayantan2@gmail.com
âœ… Database connected
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
 GET /api/auth/session 200 in 136ms
 GET /api/socket-health 200 in 171ms
 POST /api/users/heartbeat 200 in 338ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
 GET /socket.io?EIO=4&transport=polling&t=0c5ia1eb 404 in 257ms
 GET /socket.io?EIO=4&transport=polling&t=0c5nc5vo 404 in 111ms
 GET /api/random-chat/queue 200 in 273ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
âœ… Current user found: {
  id: new ObjectId('6901f85f42c5d010fa811206'),
  email: 'sayantan2@gmail.com',
  friendRequestsCount: 0,
  sentRequestsCount: 1
}
Processing received requests...
Raw friendRequests: []
Processed receivedRequests: []
Populating sender details...
Final populated requests: []
=== FRIEND REQUEST GET END (received) ===
 GET /api/friends/request?type=received 200 in 658ms
 POST /api/users/heartbeat 200 in 382ms
=== FRIEND REQUEST GET START ===
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
 GET /api/friends 200 in 723ms
Request type: received User: sayantan2@gmail.com
âœ… Database connected
=== FRIEND REQUEST GET START ===
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
Request type: sent User: sayantan2@gmail.com
âœ… Database connected
âœ… Current user found: {
  id: new ObjectId('6901f85f42c5d010fa811206'),
  email: 'sayantan2@gmail.com',
  friendRequestsCount: 0,
  sentRequestsCount: 1
}
Processing received requests...
Raw friendRequests: []
Processed receivedRequests: []
Populating sender details...
Final populated requests: []
=== FRIEND REQUEST GET END (received) ===
 GET /api/friends/request?type=received 200 in 108ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
âœ… Current user found: {
  id: new ObjectId('6901f85f42c5d010fa811206'),
  email: 'sayantan2@gmail.com',
  friendRequestsCount: 0,
  sentRequestsCount: 1
}
Processing sent requests...
Raw sentRequests: [
  {
    from: new ObjectId('6901f85f42c5d010fa811206'),
    fromName: 'sayantan2',
    to: new ObjectId('6905adf16a22b7843b006183'),
    toName: 'sayantan3',
    status: 'pending',
    _id: new ObjectId('6905cdce14ad0d0f020b3985'),
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
Filtering sent request: { status: 'pending', to: new ObjectId('6905adf16a22b7843b006183') }
Mapping sent request: {
  from: new ObjectId('6901f85f42c5d010fa811206'),
  fromName: 'sayantan2',
  to: new ObjectId('6905adf16a22b7843b006183'),
  toName: 'sayantan3',
  status: 'pending',
  _id: new ObjectId('6905cdce14ad0d0f020b3985'),
  createdAt: 2025-11-01T09:07:26.707Z,
  updatedAt: 2025-11-01T09:07:26.707Z
}
Processed sentRequests: [
  {
    id: '6905cdce14ad0d0f020b3985',
    to: {
      id: '6905adf16a22b7843b006183',
      username: 'sayantan3',
      email: '',
      profilePicture: null
    },
    status: 'pending',
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
Populating recipient details...
Looking up recipient: 6905adf16a22b7843b006183
Found recipient: sayantan3
Final populated sent requests: [
  {
    id: '6905cdce14ad0d0f020b3985',
    to: {
      id: '6905adf16a22b7843b006183',
      username: 'sayantan3',
      email: 'sayantan3@gmail.com',
      profilePicture: undefined
    },
    status: 'pending',
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
=== FRIEND REQUEST GET END (sent) ===
 GET /api/friends/request?type=sent 200 in 164ms
=== FRIEND REQUEST GET START ===
 GET /api/friends 200 in 148ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
Request type: sent User: sayantan2@gmail.com
âœ… Database connected
âœ… Current user found: {
  id: new ObjectId('6901f85f42c5d010fa811206'),
  email: 'sayantan2@gmail.com',
  friendRequestsCount: 0,
  sentRequestsCount: 1
}
Processing sent requests...
Raw sentRequests: [
  {
    from: new ObjectId('6901f85f42c5d010fa811206'),
    fromName: 'sayantan2',
    to: new ObjectId('6905adf16a22b7843b006183'),
    toName: 'sayantan3',
    status: 'pending',
    _id: new ObjectId('6905cdce14ad0d0f020b3985'),
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
Filtering sent request: { status: 'pending', to: new ObjectId('6905adf16a22b7843b006183') }
Mapping sent request: {
  from: new ObjectId('6901f85f42c5d010fa811206'),
  fromName: 'sayantan2',
  to: new ObjectId('6905adf16a22b7843b006183'),
  toName: 'sayantan3',
  status: 'pending',
  _id: new ObjectId('6905cdce14ad0d0f020b3985'),
  createdAt: 2025-11-01T09:07:26.707Z,
  updatedAt: 2025-11-01T09:07:26.707Z
}
Processed sentRequests: [
  {
    id: '6905cdce14ad0d0f020b3985',
    to: {
      id: '6905adf16a22b7843b006183',
      username: 'sayantan3',
      email: '',
      profilePicture: null
    },
    status: 'pending',
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
Populating recipient details...
Looking up recipient: 6905adf16a22b7843b006183
 GET /api/users/me 200 in 602ms
Found recipient: sayantan3
Final populated sent requests: [
  {
    id: '6905cdce14ad0d0f020b3985',
    to: {
      id: '6905adf16a22b7843b006183',
      username: 'sayantan3',
      email: 'sayantan3@gmail.com',
      profilePicture: undefined
    },
    status: 'pending',
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
=== FRIEND REQUEST GET END (sent) ===
 GET /api/friends/request?type=sent 200 in 139ms
 GET /api/random-chat/session 200 in 458ms
 GET /api/socket-health 200 in 27ms
 GET /api/socket-health 200 in 125ms
 GET /socket.io?EIO=4&transport=polling&t=0c6z6x4w 404 in 197ms
 GET /socket.io?EIO=4&transport=polling&t=0c72obub 404 in 100ms
 GET /api/socket-health 200 in 30ms
 GET /api/socket-health 200 in 119ms
 GET /socket.io?EIO=4&transport=polling&t=0c8is69j 404 in 208ms
 GET /socket.io?EIO=4&transport=polling&t=0c8m56um 404 in 98ms
 GET /api/socket-health 200 in 33ms
 GET /api/socket-health 200 in 115ms
 GET /socket.io?EIO=4&transport=polling&t=0ca2kuna 404 in 210ms
 GET /socket.io?EIO=4&transport=polling&t=0ca5sq1u 404 in 109ms
 GET /api/socket-health 200 in 29ms
 GET /api/socket-health 200 in 114ms
 GET /socket.io?EIO=4&transport=polling&t=0cbltqvj 404 in 204ms
 GET /socket.io?EIO=4&transport=polling&t=0cbp1m1a 404 in 100ms
 GET /api/socket-health 200 in 35ms
 GET /api/socket-health 200 in 109ms
 GET /socket.io?EIO=4&transport=polling&t=0cd5ga29 404 in 202ms
 GET /socket.io?EIO=4&transport=polling&t=0cd8kekq 404 in 108ms
 GET /api/socket-health 200 in 29ms
 GET /api/socket-health 200 in 125ms
 GET /socket.io?EIO=4&transport=polling&t=0ceotfxw 404 in 213ms
 GET /socket.io?EIO=4&transport=polling&t=0ceschkh 404 in 97ms
 GET /api/socket-health 200 in 35ms
 GET /api/socket-health 200 in 112ms
 GET /socket.io?EIO=4&transport=polling&t=0cg8fy41 404 in 199ms
 GET /socket.io?EIO=4&transport=polling&t=0cgbmr9d 404 in 100ms
 GET /api/socket-health 200 in 30ms
 GET /api/socket-health 200 in 117ms
 GET /socket.io?EIO=4&transport=polling&t=0chs4hf0 404 in 204ms
 GET /socket.io?EIO=4&transport=polling&t=0chvforo 404 in 96ms
 GET /api/socket-health 200 in 28ms
 GET /api/socket-health 200 in 119ms
 GET /socket.io?EIO=4&transport=polling&t=0cjbowj9 404 in 205ms
 GET /socket.io?EIO=4&transport=polling&t=0cjf2prx 404 in 101ms
 GET /api/socket-health 200 in 28ms
 GET /api/socket-health 200 in 47ms
 GET /socket.io?EIO=4&transport=polling&t=0ckuzopu 404 in 574ms
 GET /socket.io?EIO=4&transport=polling&t=0ckwcpvb 404 in 411ms
 GET /api/socket-health 200 in 32ms
 GET /api/socket-health 200 in 30ms
 GET /socket.io?EIO=4&transport=polling&t=0cmenocb 404 in 199ms
 GET /socket.io?EIO=4&transport=polling&t=0cmfk087 404 in 106ms
 GET /api/socket-health 200 in 29ms
 GET /api/socket-health 200 in 115ms
 GET /socket.io?EIO=4&transport=polling&t=0cny5gui 404 in 210ms
 GET /socket.io?EIO=4&transport=polling&t=0co1eded 404 in 107ms
 GET /api/socket-health 200 in 29ms
 GET /api/socket-health 200 in 117ms
 GET /socket.io?EIO=4&transport=polling&t=0cphy58b 404 in 211ms
 GET /socket.io?EIO=4&transport=polling&t=0cpl8ceq 404 in 109ms
 GET /api/socket-health 200 in 30ms
 GET /api/socket-health 200 in 118ms
 GET /socket.io?EIO=4&transport=polling&t=0cr181nn 404 in 198ms
 GET /socket.io?EIO=4&transport=polling&t=0cr4jbaz 404 in 105ms
 GET /api/socket-health 200 in 27ms
 GET /api/socket-health 200 in 115ms
 GET /socket.io?EIO=4&transport=polling&t=0cskskxo 404 in 205ms
 GET /socket.io?EIO=4&transport=polling&t=0cso1apx 404 in 103ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
=== FRIEND REQUEST GET START ===
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
Request type: received User: sayantan2@gmail.com
âœ… Database connected
 GET /api/conversations 200 in 483ms
 POST /api/users/heartbeat 200 in 578ms
âœ… Current user found: {
  id: new ObjectId('6901f85f42c5d010fa811206'),
  email: 'sayantan2@gmail.com',
  friendRequestsCount: 0,
  sentRequestsCount: 1
}
Processing received requests...
Raw friendRequests: []
Processed receivedRequests: []
Populating sender details...
Final populated requests: []
=== FRIEND REQUEST GET END (received) ===
 GET /api/friends/request?type=received 200 in 759ms
=== FRIEND REQUEST GET START ===
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
Request type: sent User: sayantan2@gmail.com
âœ… Database connected
âœ… Current user found: {
  id: new ObjectId('6901f85f42c5d010fa811206'),
  email: 'sayantan2@gmail.com',
  friendRequestsCount: 0,
  sentRequestsCount: 1
}
Processing sent requests...
Raw sentRequests: [
  {
    from: new ObjectId('6901f85f42c5d010fa811206'),
    fromName: 'sayantan2',
    to: new ObjectId('6905adf16a22b7843b006183'),
    toName: 'sayantan3',
    status: 'pending',
    _id: new ObjectId('6905cdce14ad0d0f020b3985'),
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
Filtering sent request: { status: 'pending', to: new ObjectId('6905adf16a22b7843b006183') }
Mapping sent request: {
  from: new ObjectId('6901f85f42c5d010fa811206'),
  fromName: 'sayantan2',
  to: new ObjectId('6905adf16a22b7843b006183'),
  toName: 'sayantan3',
  status: 'pending',
  _id: new ObjectId('6905cdce14ad0d0f020b3985'),
  createdAt: 2025-11-01T09:07:26.707Z,
  updatedAt: 2025-11-01T09:07:26.707Z
}
Processed sentRequests: [
  {
    id: '6905cdce14ad0d0f020b3985',
    to: {
      id: '6905adf16a22b7843b006183',
      username: 'sayantan3',
      email: '',
      profilePicture: null
    },
    status: 'pending',
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
Populating recipient details...
Looking up recipient: 6905adf16a22b7843b006183
Found recipient: sayantan3
Final populated sent requests: [
  {
    id: '6905cdce14ad0d0f020b3985',
    to: {
      id: '6905adf16a22b7843b006183',
      username: 'sayantan3',
      email: 'sayantan3@gmail.com',
      profilePicture: undefined
    },
    status: 'pending',
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
=== FRIEND REQUEST GET END (sent) ===
 GET /api/friends/request?type=sent 200 in 140ms
 GET /api/socket-health 200 in 28ms
 GET /api/socket-health 200 in 120ms
 GET /socket.io?EIO=4&transport=polling&t=0cu4akkc 404 in 206ms
 GET /socket.io?EIO=4&transport=polling&t=0cu7oatn 404 in 118ms
 GET /api/socket-health 200 in 27ms
 GET /api/socket-health 200 in 36ms
 GET /socket.io?EIO=4&transport=polling&t=0cvnxj13 404 in 203ms
 GET /socket.io?EIO=4&transport=polling&t=0cvoyoe2 404 in 101ms
 GET /api/socket-health 200 in 28ms
 GET /api/socket-health 200 in 35ms
 GET /socket.io?EIO=4&transport=polling&t=0cx7sxbh 404 in 218ms
 GET /socket.io?EIO=4&transport=polling&t=0cx8spov 404 in 114ms
 GET /api/socket-health 200 in 38ms
 GET /api/socket-health 200 in 135ms
 GET /socket.io?EIO=4&transport=polling&t=0cyrllwv 404 in 250ms
 GET /socket.io?EIO=4&transport=polling&t=0cyveoom 404 in 133ms
 GET /api/socket-health 200 in 57ms
 GET /api/socket-health 200 in 192ms
 GET /socket.io?EIO=4&transport=polling&t=0d0bdsmw 404 in 198ms
 GET /socket.io?EIO=4&transport=polling&t=0d0hhqyl 404 in 133ms
 GET /api/socket-health 200 in 40ms
 GET /api/socket-health 200 in 138ms
 GET /socket.io?EIO=4&transport=polling&t=0d1urjzk 404 in 242ms
 GET /socket.io?EIO=4&transport=polling&t=0d1ynx5f 404 in 125ms
 GET /api/socket-health 200 in 25ms
 GET /api/socket-health 200 in 118ms
 GET /socket.io?EIO=4&transport=polling&t=0d3dgs8w 404 in 205ms
 GET /socket.io?EIO=4&transport=polling&t=0d3gs90y 404 in 103ms
 GET /api/socket-health 200 in 29ms
 GET /api/socket-health 200 in 118ms
 GET /socket.io?EIO=4&transport=polling&t=0d4xg5j9 404 in 208ms
 GET /socket.io?EIO=4&transport=polling&t=0d50ssam 404 in 104ms
 GET /api/socket-health 200 in 62ms
 GET /api/socket-health 200 in 141ms
 GET /socket.io?EIO=4&transport=polling&t=0d6ib79w 404 in 242ms
 GET /socket.io?EIO=4&transport=polling&t=0d6ma3qa 404 in 132ms
 GET /api/socket-health 200 in 28ms
 GET /api/socket-health 200 in 128ms
 GET /socket.io?EIO=4&transport=polling&t=0d80j80u 404 in 206ms
 GET /socket.io?EIO=4&transport=polling&t=0d845e88 404 in 106ms
 GET /api/socket-health 200 in 37ms
 GET /api/socket-health 200 in 152ms
 GET /socket.io?EIO=4&transport=polling&t=0d9k7ji8 404 in 325ms
 GET /socket.io?EIO=4&transport=polling&t=0d9oh2wu 404 in 186ms
 GET /api/socket-health 200 in 39ms
 GET /api/socket-health 200 in 167ms
 GET /socket.io?EIO=4&transport=polling&t=0db3lc6l 404 in 303ms
 GET /socket.io?EIO=4&transport=polling&t=0db8al4i 404 in 167ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
=== FRIEND REQUEST GET START ===
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
Request type: received User: sayantan2@gmail.com
âœ… Database connected
âœ… Current user found: {
  id: new ObjectId('6901f85f42c5d010fa811206'),
  email: 'sayantan2@gmail.com',
  friendRequestsCount: 0,
  sentRequestsCount: 1
}
Processing received requests...
Raw friendRequests: []
Processed receivedRequests: []
Populating sender details...
Final populated requests: []
=== FRIEND REQUEST GET END (received) ===
 GET /api/friends/request?type=received 200 in 305ms
 GET /api/friends 200 in 336ms
=== FRIEND REQUEST GET START ===
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
Request type: sent User: sayantan2@gmail.com
âœ… Database connected
âœ… Current user found: {
  id: new ObjectId('6901f85f42c5d010fa811206'),
  email: 'sayantan2@gmail.com',
  friendRequestsCount: 0,
  sentRequestsCount: 1
}
Processing sent requests...
Raw sentRequests: [
  {
    from: new ObjectId('6901f85f42c5d010fa811206'),
    fromName: 'sayantan2',
    to: new ObjectId('6905adf16a22b7843b006183'),
    toName: 'sayantan3',
    status: 'pending',
    _id: new ObjectId('6905cdce14ad0d0f020b3985'),
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
Filtering sent request: { status: 'pending', to: new ObjectId('6905adf16a22b7843b006183') }
Mapping sent request: {
  from: new ObjectId('6901f85f42c5d010fa811206'),
  fromName: 'sayantan2',
  to: new ObjectId('6905adf16a22b7843b006183'),
  toName: 'sayantan3',
  status: 'pending',
  _id: new ObjectId('6905cdce14ad0d0f020b3985'),
  createdAt: 2025-11-01T09:07:26.707Z,
  updatedAt: 2025-11-01T09:07:26.707Z
}
Processed sentRequests: [
  {
    id: '6905cdce14ad0d0f020b3985',
    to: {
      id: '6905adf16a22b7843b006183',
      username: 'sayantan3',
      email: '',
      profilePicture: null
    },
    status: 'pending',
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
Populating recipient details...
Looking up recipient: 6905adf16a22b7843b006183
Found recipient: sayantan3
Final populated sent requests: [
  {
    id: '6905cdce14ad0d0f020b3985',
    to: {
      id: '6905adf16a22b7843b006183',
      username: 'sayantan3',
      email: 'sayantan3@gmail.com',
      profilePicture: undefined
    },
    status: 'pending',
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
=== FRIEND REQUEST GET END (sent) ===
 GET /api/friends/request?type=sent 200 in 187ms
 GET /api/socket-health 200 in 49ms
 GET /api/socket-health 200 in 66ms
 GET /socket.io?EIO=4&transport=polling&t=0dcntv1t 404 in 339ms
 GET /socket.io?EIO=4&transport=polling&t=0dcptfyq 404 in 177ms
 GET /api/socket-health 200 in 47ms
 GET /api/socket-health 200 in 56ms
 GET /socket.io?EIO=4&transport=polling&t=0de75yza 404 in 325ms
 GET /socket.io?EIO=4&transport=polling&t=0de922xo 404 in 153ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
 GET /api/auth/session 200 in 113ms
 POST /api/users/heartbeat 200 in 272ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
=== FRIEND REQUEST GET START ===
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
Request type: received User: sayantan2@gmail.com
âœ… Database connected
 GET /api/friends 200 in 245ms
 POST /api/users/heartbeat 200 in 267ms
 GET /api/random-chat/queue 200 in 269ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
 GET /api/random-chat/session 200 in 148ms
âœ… Current user found: {
  id: new ObjectId('6901f85f42c5d010fa811206'),
  email: 'sayantan2@gmail.com',
  friendRequestsCount: 0,
  sentRequestsCount: 1
}
Processing received requests...
Raw friendRequests: []
Processed receivedRequests: []
Populating sender details...
Final populated requests: []
=== FRIEND REQUEST GET END (received) ===
 GET /api/friends/request?type=received 200 in 490ms
=== FRIEND REQUEST GET START ===
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
Request type: sent User: sayantan2@gmail.com
âœ… Database connected
 GET /api/users/me 200 in 566ms
âœ… Current user found: {
  id: new ObjectId('6901f85f42c5d010fa811206'),
  email: 'sayantan2@gmail.com',
  friendRequestsCount: 0,
  sentRequestsCount: 1
}
Processing sent requests...
Raw sentRequests: [
  {
    from: new ObjectId('6901f85f42c5d010fa811206'),
    fromName: 'sayantan2',
    to: new ObjectId('6905adf16a22b7843b006183'),
    toName: 'sayantan3',
    status: 'pending',
    _id: new ObjectId('6905cdce14ad0d0f020b3985'),
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
Filtering sent request: { status: 'pending', to: new ObjectId('6905adf16a22b7843b006183') }
Mapping sent request: {
  from: new ObjectId('6901f85f42c5d010fa811206'),
  fromName: 'sayantan2',
  to: new ObjectId('6905adf16a22b7843b006183'),
  toName: 'sayantan3',
  status: 'pending',
  _id: new ObjectId('6905cdce14ad0d0f020b3985'),
  createdAt: 2025-11-01T09:07:26.707Z,
  updatedAt: 2025-11-01T09:07:26.707Z
}
Processed sentRequests: [
  {
    id: '6905cdce14ad0d0f020b3985',
    to: {
      id: '6905adf16a22b7843b006183',
      username: 'sayantan3',
      email: '',
      profilePicture: null
    },
    status: 'pending',
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
Populating recipient details...
Looking up recipient: 6905adf16a22b7843b006183
Found recipient: sayantan3
Final populated sent requests: [
  {
    id: '6905cdce14ad0d0f020b3985',
    to: {
      id: '6905adf16a22b7843b006183',
      username: 'sayantan3',
      email: 'sayantan3@gmail.com',
      profilePicture: undefined
    },
    status: 'pending',
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
=== FRIEND REQUEST GET END (sent) ===
 GET /api/friends/request?type=sent 200 in 244ms
 GET /api/socket-health 200 in 46ms
 GET /api/socket-health 200 in 169ms
 GET /socket.io?EIO=4&transport=polling&t=0dfbd42j 404 in 269ms
 GET /socket.io?EIO=4&transport=polling&t=0dfg3z6i 404 in 114ms
 GET /api/socket-health 200 in 29ms
 GET /api/socket-health 200 in 129ms
 GET /socket.io?EIO=4&transport=polling&t=0dghvy01 404 in 223ms
 GET /socket.io?EIO=4&transport=polling&t=0dglhqki 404 in 112ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
 GET /api/auth/session 200 in 67ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
=== FRIEND REQUEST GET START ===
 POST /api/users/heartbeat 200 in 248ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
Request type: received User: sayantan2@gmail.com
âœ… Database connected
âœ… Current user found: {
  id: new ObjectId('6901f85f42c5d010fa811206'),
  email: 'sayantan2@gmail.com',
  friendRequestsCount: 0,
  sentRequestsCount: 1
}
Processing received requests...
Raw friendRequests: []
Processed receivedRequests: []
Populating sender details...
Final populated requests: []
=== FRIEND REQUEST GET END (received) ===
 GET /api/friends/request?type=received 200 in 210ms
 GET /api/random-chat/queue 200 in 249ms
 GET /api/friends 200 in 258ms
 POST /api/users/heartbeat 200 in 265ms
 GET /api/users/me 200 in 270ms
=== FRIEND REQUEST GET START ===
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
Request type: sent User: sayantan2@gmail.com
âœ… Database connected
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
âœ… Current user found: {
  id: new ObjectId('6901f85f42c5d010fa811206'),
  email: 'sayantan2@gmail.com',
  friendRequestsCount: 0,
  sentRequestsCount: 1
}
Processing sent requests...
Raw sentRequests: [
  {
    from: new ObjectId('6901f85f42c5d010fa811206'),
    fromName: 'sayantan2',
    to: new ObjectId('6905adf16a22b7843b006183'),
    toName: 'sayantan3',
    status: 'pending',
    _id: new ObjectId('6905cdce14ad0d0f020b3985'),
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
Filtering sent request: { status: 'pending', to: new ObjectId('6905adf16a22b7843b006183') }
Mapping sent request: {
  from: new ObjectId('6901f85f42c5d010fa811206'),
  fromName: 'sayantan2',
  to: new ObjectId('6905adf16a22b7843b006183'),
  toName: 'sayantan3',
  status: 'pending',
  _id: new ObjectId('6905cdce14ad0d0f020b3985'),
  createdAt: 2025-11-01T09:07:26.707Z,
  updatedAt: 2025-11-01T09:07:26.707Z
}
Processed sentRequests: [
  {
    id: '6905cdce14ad0d0f020b3985',
    to: {
      id: '6905adf16a22b7843b006183',
      username: 'sayantan3',
      email: '',
      profilePicture: null
    },
    status: 'pending',
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
Populating recipient details...
Looking up recipient: 6905adf16a22b7843b006183
Found recipient: sayantan3
Final populated sent requests: [
  {
    id: '6905cdce14ad0d0f020b3985',
    to: {
      id: '6905adf16a22b7843b006183',
      username: 'sayantan3',
      email: 'sayantan3@gmail.com',
      profilePicture: undefined
    },
    status: 'pending',
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
=== FRIEND REQUEST GET END (sent) ===
 GET /api/friends/request?type=sent 200 in 200ms
 GET /api/random-chat/session 200 in 193ms
 GET /api/socket-health 200 in 59ms
 GET /api/socket-health 200 in 169ms
 GET /socket.io?EIO=4&transport=polling&t=0dhiaxrt 404 in 284ms
 GET /socket.io?EIO=4&transport=polling&t=0dhn3vxn 404 in 123ms
 GET /api/socket-health 200 in 24ms
 GET /api/socket-health 200 in 111ms
 GET /socket.io?EIO=4&transport=polling&t=0dijhstf 404 in 241ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
 GET /socket.io?EIO=4&transport=polling&t=0dimmcy2 404 in 412ms
 GET /dashboard/discover?method=bluetooth 200 in 343ms
 POST /api/users/heartbeat 200 in 380ms
 GET /favicon.ico 200 in 78ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
 GET /api/auth/session 200 in 53ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
 GET /api/users/wifi 200 in 210ms
 GET /api/socket-health 200 in 164ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
 GET /api/users/bluetooth 200 in 260ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
=== FRIEND REQUEST GET START ===
 GET /api/random-chat/queue 200 in 311ms
 GET /api/messages/chats 200 in 316ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
Request type: received User: sayantan2@gmail.com
âœ… Database connected
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
 POST /api/users/heartbeat 200 in 349ms
âœ… Current user found: {
  id: new ObjectId('6901f85f42c5d010fa811206'),
  email: 'sayantan2@gmail.com',
  friendRequestsCount: 0,
  sentRequestsCount: 1
}
Processing received requests...
Raw friendRequests: []
Processed receivedRequests: []
Populating sender details...
Final populated requests: []
=== FRIEND REQUEST GET END (received) ===
 GET /api/friends/request?type=received 200 in 195ms
 GET /api/friends 200 in 253ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
 GET /api/users/me 200 in 273ms
 GET /api/socket-health 200 in 144ms
 GET /api/users/wifi 200 in 174ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
 GET /api/users/bluetooth 200 in 246ms
=== FRIEND REQUEST GET START ===
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
Request type: sent User: sayantan2@gmail.com
âœ… Database connected
 GET /api/random-chat/session 200 in 324ms
âœ… Current user found: {
  id: new ObjectId('6901f85f42c5d010fa811206'),
  email: 'sayantan2@gmail.com',
  friendRequestsCount: 0,
  sentRequestsCount: 1
}
Processing sent requests...
Raw sentRequests: [
  {
    from: new ObjectId('6901f85f42c5d010fa811206'),
    fromName: 'sayantan2',
    to: new ObjectId('6905adf16a22b7843b006183'),
    toName: 'sayantan3',
    status: 'pending',
    _id: new ObjectId('6905cdce14ad0d0f020b3985'),
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
Filtering sent request: { status: 'pending', to: new ObjectId('6905adf16a22b7843b006183') }
Mapping sent request: {
  from: new ObjectId('6901f85f42c5d010fa811206'),
  fromName: 'sayantan2',
  to: new ObjectId('6905adf16a22b7843b006183'),
  toName: 'sayantan3',
  status: 'pending',
  _id: new ObjectId('6905cdce14ad0d0f020b3985'),
  createdAt: 2025-11-01T09:07:26.707Z,
  updatedAt: 2025-11-01T09:07:26.707Z
}
Processed sentRequests: [
  {
    id: '6905cdce14ad0d0f020b3985',
    to: {
      id: '6905adf16a22b7843b006183',
      username: 'sayantan3',
      email: '',
      profilePicture: null
    },
    status: 'pending',
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
Populating recipient details...
Looking up recipient: 6905adf16a22b7843b006183
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
 GET /socket.io?EIO=4&transport=polling&t=0dkgaqb0 404 in 282ms
 GET /socket.io?EIO=4&transport=polling&t=0dko1xpm 404 in 259ms
Found recipient: sayantan3
Final populated sent requests: [
  {
    id: '6905cdce14ad0d0f020b3985',
    to: {
      id: '6905adf16a22b7843b006183',
      username: 'sayantan3',
      email: 'sayantan3@gmail.com',
      profilePicture: undefined
    },
    status: 'pending',
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
=== FRIEND REQUEST GET END (sent) ===
 GET /api/friends/request?type=sent 200 in 395ms
 GET /api/users/bluetooth 200 in 174ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
 GET /api/users/bluetooth 200 in 132ms
 GET /dashboard/discover?method=bluetooth 200 in 152ms
 GET /favicon.ico 200 in 54ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
 GET /api/auth/session 200 in 57ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
 GET /api/users/wifi 200 in 146ms
 GET /api/users/bluetooth 200 in 169ms
 GET /api/socket-health 200 in 116ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
=== FRIEND REQUEST GET START ===
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
Request type: received User: sayantan2@gmail.com
âœ… Database connected
 GET /api/random-chat/queue 200 in 223ms
 GET /api/messages/chats 200 in 224ms
âœ… Current user found: {
  id: new ObjectId('6901f85f42c5d010fa811206'),
  email: 'sayantan2@gmail.com',
  friendRequestsCount: 0,
  sentRequestsCount: 1
}
Processing received requests...
Raw friendRequests: []
Processed receivedRequests: []
Populating sender details...
Final populated requests: []
=== FRIEND REQUEST GET END (received) ===
 GET /api/friends/request?type=received 200 in 125ms
 POST /api/users/heartbeat 200 in 264ms
 GET /api/friends 200 in 204ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
 GET /api/users/wifi 200 in 134ms
 GET /api/socket-health 200 in 105ms
 GET /api/users/bluetooth 200 in 152ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
=== FRIEND REQUEST GET START ===
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
Request type: sent User: sayantan2@gmail.com
âœ… Database connected
âœ… Current user found: {
  id: new ObjectId('6901f85f42c5d010fa811206'),
  email: 'sayantan2@gmail.com',
  friendRequestsCount: 0,
  sentRequestsCount: 1
}
Processing sent requests...
Raw sentRequests: [
  {
    from: new ObjectId('6901f85f42c5d010fa811206'),
    fromName: 'sayantan2',
    to: new ObjectId('6905adf16a22b7843b006183'),
    toName: 'sayantan3',
    status: 'pending',
    _id: new ObjectId('6905cdce14ad0d0f020b3985'),
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
Filtering sent request: { status: 'pending', to: new ObjectId('6905adf16a22b7843b006183') }
Mapping sent request: {
  from: new ObjectId('6901f85f42c5d010fa811206'),
  fromName: 'sayantan2',
  to: new ObjectId('6905adf16a22b7843b006183'),
  toName: 'sayantan3',
  status: 'pending',
  _id: new ObjectId('6905cdce14ad0d0f020b3985'),
  createdAt: 2025-11-01T09:07:26.707Z,
  updatedAt: 2025-11-01T09:07:26.707Z
}
Processed sentRequests: [
  {
    id: '6905cdce14ad0d0f020b3985',
    to: {
      id: '6905adf16a22b7843b006183',
      username: 'sayantan3',
      email: '',
      profilePicture: null
    },
    status: 'pending',
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
Populating recipient details...
Looking up recipient: 6905adf16a22b7843b006183
 GET /api/random-chat/session 200 in 313ms
Found recipient: sayantan3
Final populated sent requests: [
  {
    id: '6905cdce14ad0d0f020b3985',
    to: {
      id: '6905adf16a22b7843b006183',
      username: 'sayantan3',
      email: 'sayantan3@gmail.com',
      profilePicture: undefined
    },
    status: 'pending',
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
=== FRIEND REQUEST GET END (sent) ===
 GET /api/friends/request?type=sent 200 in 311ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
 GET /socket.io?EIO=4&transport=polling&t=0dmaoywj 404 in 270ms
 GET /socket.io?EIO=4&transport=polling&t=0dmhu0n9 404 in 251ms
 GET /api/users/bluetooth 200 in 302ms
 GET /api/users/me 200 in 570ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
 GET /api/users/bluetooth 200 in 106ms
 GET /api/socket-health 200 in 33ms
 GET /api/socket-health 200 in 130ms
 GET /socket.io?EIO=4&transport=polling&t=0do7w176 404 in 223ms
 GET /socket.io?EIO=4&transport=polling&t=0dobljaf 404 in 101ms
 GET /api/socket-health 200 in 28ms
 GET /api/socket-health 200 in 113ms
 GET /socket.io?EIO=4&transport=polling&t=0dprivee 404 in 199ms
 GET /socket.io?EIO=4&transport=polling&t=0dpuryre 404 in 97ms
 GET /api/socket-health 200 in 43ms
 GET /api/socket-health 200 in 40ms
 GET /socket.io?EIO=4&transport=polling&t=0drbjpxn 404 in 231ms
 GET /socket.io?EIO=4&transport=polling&t=0drcpnle 404 in 116ms
 GET /api/socket-health 200 in 27ms
 GET /api/socket-health 200 in 118ms
 GET /socket.io?EIO=4&transport=polling&t=0dsudocg 404 in 191ms
 GET /socket.io?EIO=4&transport=polling&t=0dsxp51y 404 in 98ms
 GET /api/socket-health 200 in 29ms
 GET /api/socket-health 200 in 31ms
 GET /socket.io?EIO=4&transport=polling&t=0dudud1w 404 in 215ms
 GET /socket.io?EIO=4&transport=polling&t=0duetazo 404 in 111ms
 GET /api/socket-health 200 in 29ms
 GET /api/socket-health 200 in 117ms
 GET /socket.io?EIO=4&transport=polling&t=0dvxp4e1 404 in 247ms
 GET /socket.io?EIO=4&transport=polling&t=0dw10jgx 404 in 146ms
 GET /api/socket-health 200 in 41ms
 GET /api/socket-health 200 in 64ms
 GET /socket.io?EIO=4&transport=polling&t=0dxi4iet 404 in 314ms
 GET /socket.io?EIO=4&transport=polling&t=0dxjrqdx 404 in 167ms
 GET /api/socket-health 200 in 92ms
 GET /api/socket-health 200 in 77ms
 GET /socket.io?EIO=4&transport=polling&t=0dz4h9wk 404 in 275ms
 GET /socket.io?EIO=4&transport=polling&t=0dz6bp8u 404 in 141ms
 GET /api/socket-health 200 in 56ms
 GET /api/socket-health 200 in 60ms
 GET /socket.io?EIO=4&transport=polling&t=0e0l2277 404 in 318ms
 GET /socket.io?EIO=4&transport=polling&t=0e0mrw77 404 in 159ms
 GET /api/socket-health 200 in 51ms
 GET /api/socket-health 200 in 268ms
 GET /socket.io?EIO=4&transport=polling&t=0e26dbzu 404 in 417ms
 GET /socket.io?EIO=4&transport=polling&t=0e2dwmj0 404 in 166ms
 GET /api/socket-health 200 in 82ms
 GET /api/socket-health 200 in 185ms
 GET /socket.io?EIO=4&transport=polling&t=0e3opagp 404 in 297ms
 GET /socket.io?EIO=4&transport=polling&t=0e3tw2o1 404 in 137ms
 GET /api/socket-health 200 in 39ms
 GET /api/socket-health 200 in 117ms
 GET /socket.io?EIO=4&transport=polling&t=0e57dvwt 404 in 200ms
 GET /socket.io?EIO=4&transport=polling&t=0e5aoatu 404 in 97ms
 GET /api/socket-health 200 in 59ms
 GET /api/socket-health 200 in 167ms
 GET /socket.io?EIO=4&transport=polling&t=0e6revbs 404 in 271ms
 GET /socket.io?EIO=4&transport=polling&t=0e6w8j93 404 in 132ms
 GET /api/socket-health 200 in 40ms
 GET /api/socket-health 200 in 56ms
 GET /socket.io?EIO=4&transport=polling&t=0e8aeopx 404 in 401ms
 GET /socket.io?EIO=4&transport=polling&t=0e8c3yky 404 in 164ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
=== FRIEND REQUEST GET START ===
 GET /api/socket-health 200 in 260ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
Request type: received User: sayantan2@gmail.com
âœ… Database connected
 GET /api/socket-health 200 in 291ms
 GET /socket.io?EIO=4&transport=polling&t=0ea0qhr5 404 in 604ms
 GET /socket.io?EIO=4&transport=polling&t=0ea9dr99 404 in 188ms
âœ… Current user found: {
  id: new ObjectId('6901f85f42c5d010fa811206'),
  email: 'sayantan2@gmail.com',
  friendRequestsCount: 0,
  sentRequestsCount: 1
}
Processing received requests...
Raw friendRequests: []
Processed receivedRequests: []
Populating sender details...
Final populated requests: []
=== FRIEND REQUEST GET END (received) ===
 GET /api/friends/request?type=received 200 in 1042ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
=== FRIEND REQUEST GET START ===
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
Request type: sent User: sayantan2@gmail.com
âœ… Database connected
 POST /api/users/heartbeat 200 in 1121ms
 GET /api/conversations 200 in 171ms
 GET /api/friends 200 in 1331ms
âœ… Current user found: {
  id: new ObjectId('6901f85f42c5d010fa811206'),
  email: 'sayantan2@gmail.com',
  friendRequestsCount: 0,
  sentRequestsCount: 1
}
Processing sent requests...
Raw sentRequests: [
  {
    from: new ObjectId('6901f85f42c5d010fa811206'),
    fromName: 'sayantan2',
    to: new ObjectId('6905adf16a22b7843b006183'),
    toName: 'sayantan3',
    status: 'pending',
    _id: new ObjectId('6905cdce14ad0d0f020b3985'),
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
Filtering sent request: { status: 'pending', to: new ObjectId('6905adf16a22b7843b006183') }
Mapping sent request: {
  from: new ObjectId('6901f85f42c5d010fa811206'),
  fromName: 'sayantan2',
  to: new ObjectId('6905adf16a22b7843b006183'),
  toName: 'sayantan3',
  status: 'pending',
  _id: new ObjectId('6905cdce14ad0d0f020b3985'),
  createdAt: 2025-11-01T09:07:26.707Z,
  updatedAt: 2025-11-01T09:07:26.707Z
}
Processed sentRequests: [
  {
    id: '6905cdce14ad0d0f020b3985',
    to: {
      id: '6905adf16a22b7843b006183',
      username: 'sayantan3',
      email: '',
      profilePicture: null
    },
    status: 'pending',
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
Populating recipient details...
Looking up recipient: 6905adf16a22b7843b006183
Found recipient: sayantan3
Final populated sent requests: [
  {
    id: '6905cdce14ad0d0f020b3985',
    to: {
      id: '6905adf16a22b7843b006183',
      username: 'sayantan3',
      email: 'sayantan3@gmail.com',
      profilePicture: undefined
    },
    status: 'pending',
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
=== FRIEND REQUEST GET END (sent) ===
 GET /api/friends/request?type=sent 200 in 415ms
 GET /api/socket-health 200 in 50ms
 GET /api/socket-health 200 in 483ms
 GET /socket.io?EIO=4&transport=polling&t=0ebdyplq 404 in 518ms
 GET /socket.io?EIO=4&transport=polling&t=0ebrixcl 404 in 546ms
 GET /api/socket-health 200 in 30ms
 GET /socket.io?EIO=4&transport=polling&t=0ecws2hf 404 in 112ms
 GET /api/socket-health 200 in 77ms
 GET /socket.io?EIO=4&transport=polling&t=0edqkoi5 404 in 226ms
 GET /api/socket-health 200 in 60ms
 GET /socket.io?EIO=4&transport=polling&t=0eegzay3 404 in 186ms
 GET /api/socket-health 200 in 43ms
 GET /socket.io?EIO=4&transport=polling&t=0ef8nd61 404 in 171ms
 GET /api/socket-health 200 in 59ms
 GET /socket.io?EIO=4&transport=polling&t=0eg10o24 404 in 205ms
 GET /api/socket-health 200 in 32ms
 GET /socket.io?EIO=4&transport=polling&t=0egu6tdl 404 in 108ms
 GET /api/socket-health 200 in 32ms
 GET /socket.io?EIO=4&transport=polling&t=0ehjjtlw 404 in 105ms
 GET /api/socket-health 200 in 31ms
 GET /socket.io?EIO=4&transport=polling&t=0eib8x7v 404 in 106ms
 GET /api/socket-health 200 in 29ms
 GET /socket.io?EIO=4&transport=polling&t=0ej2whpq 404 in 107ms
 GET /api/socket-health 200 in 35ms
 GET /socket.io?EIO=4&transport=polling&t=0ejuyl9h 404 in 107ms
 GET /api/socket-health 200 in 29ms
 GET /socket.io?EIO=4&transport=polling&t=0ekmiaq8 404 in 102ms
 GET /api/socket-health 200 in 33ms
 GET /socket.io?EIO=4&transport=polling&t=0elei073 404 in 100ms
 GET /api/socket-health 200 in 30ms
 GET /socket.io?EIO=4&transport=polling&t=0em61p2h 404 in 103ms
 GET /api/socket-health 200 in 30ms
 GET /socket.io?EIO=4&transport=polling&t=0emxs1l1 404 in 100ms
 GET /api/socket-health 200 in 38ms
 GET /socket.io?EIO=4&transport=polling&t=0enpq3ky 404 in 100ms
 GET /api/socket-health 200 in 33ms
 GET /socket.io?EIO=4&transport=polling&t=0eohm2xg 404 in 102ms
 GET /api/socket-health 200 in 31ms
 GET /socket.io?EIO=4&transport=polling&t=0ep99tnl 404 in 104ms
 GET /api/socket-health 200 in 37ms
 GET /socket.io?EIO=4&transport=polling&t=0eq16c5w 404 in 113ms
 GET /api/socket-health 200 in 45ms
 GET /socket.io?EIO=4&transport=polling&t=0eqt0cvg 404 in 111ms
 GET /api/socket-health 200 in 30ms
 GET /socket.io?EIO=4&transport=polling&t=0erkfdqj 404 in 105ms
 GET /api/socket-health 200 in 29ms
 GET /socket.io?EIO=4&transport=polling&t=0esc7g4w 404 in 111ms
 GET /api/socket-health 200 in 28ms
 GET /socket.io?EIO=4&transport=polling&t=0et3x58n 404 in 103ms
 GET /api/socket-health 200 in 29ms
 GET /socket.io?EIO=4&transport=polling&t=0etvsktg 404 in 95ms
 GET /api/socket-health 200 in 46ms
 GET /socket.io?EIO=4&transport=polling&t=0euoo0y1 404 in 99ms
 GET /api/socket-health 200 in 31ms
 GET /socket.io?EIO=4&transport=polling&t=0evfgsh9 404 in 106ms
 GET /api/socket-health 200 in 32ms
 GET /socket.io?EIO=4&transport=polling&t=0ew78u4m 404 in 118ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
 GET /api/socket-health 200 in 86ms
=== FRIEND REQUEST GET START ===
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
Request type: received User: sayantan2@gmail.com
âœ… Database connected
âœ… Current user found: {
  id: new ObjectId('6901f85f42c5d010fa811206'),
  email: 'sayantan2@gmail.com',
  friendRequestsCount: 0,
  sentRequestsCount: 1
}
Processing received requests...
Raw friendRequests: []
Processed receivedRequests: []
Populating sender details...
Final populated requests: []
=== FRIEND REQUEST GET END (received) ===
 GET /api/friends/request?type=received 200 in 192ms
=== FRIEND REQUEST GET START ===
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
 GET /api/friends 200 in 233ms
Request type: sent User: sayantan2@gmail.com
âœ… Database connected
 GET /socket.io?EIO=4&transport=polling&t=0ex0hns8 404 in 145ms
 POST /api/users/heartbeat 200 in 271ms
âœ… Current user found: {
  id: new ObjectId('6901f85f42c5d010fa811206'),
  email: 'sayantan2@gmail.com',
  friendRequestsCount: 0,
  sentRequestsCount: 1
}
Processing sent requests...
Raw sentRequests: [
  {
    from: new ObjectId('6901f85f42c5d010fa811206'),
    fromName: 'sayantan2',
    to: new ObjectId('6905adf16a22b7843b006183'),
    toName: 'sayantan3',
    status: 'pending',
    _id: new ObjectId('6905cdce14ad0d0f020b3985'),
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
Filtering sent request: { status: 'pending', to: new ObjectId('6905adf16a22b7843b006183') }
Mapping sent request: {
  from: new ObjectId('6901f85f42c5d010fa811206'),
  fromName: 'sayantan2',
  to: new ObjectId('6905adf16a22b7843b006183'),
  toName: 'sayantan3',
  status: 'pending',
  _id: new ObjectId('6905cdce14ad0d0f020b3985'),
  createdAt: 2025-11-01T09:07:26.707Z,
  updatedAt: 2025-11-01T09:07:26.707Z
}
Processed sentRequests: [
  {
    id: '6905cdce14ad0d0f020b3985',
    to: {
      id: '6905adf16a22b7843b006183',
      username: 'sayantan3',
      email: '',
      profilePicture: null
    },
    status: 'pending',
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
Populating recipient details...
Looking up recipient: 6905adf16a22b7843b006183
Found recipient: sayantan3
Final populated sent requests: [
  {
    id: '6905cdce14ad0d0f020b3985',
    to: {
      id: '6905adf16a22b7843b006183',
      username: 'sayantan3',
      email: 'sayantan3@gmail.com',
      profilePicture: undefined
    },
    status: 'pending',
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
=== FRIEND REQUEST GET END (sent) ===
 GET /api/friends/request?type=sent 200 in 121ms
 GET /api/socket-health 200 in 29ms
 GET /socket.io?EIO=4&transport=polling&t=0exqi2v5 404 in 100ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
 GET /api/socket-health 200 in 58ms
 GET /socket.io?EIO=4&transport=polling&t=0eyj4mxf 404 in 103ms
 GET /api/conversations 200 in 186ms
 GET /api/socket-health 200 in 29ms
 GET /socket.io?EIO=4&transport=polling&t=0ezafgaz 404 in 100ms
 GET /api/socket-health 200 in 31ms
 GET /socket.io?EIO=4&transport=polling&t=0f0282lt 404 in 100ms
 GET /api/socket-health 200 in 29ms
 GET /socket.io?EIO=4&transport=polling&t=0f0trre0 404 in 98ms
 GET /api/socket-health 200 in 29ms
 GET /socket.io?EIO=4&transport=polling&t=0f1lgfd2 404 in 101ms
 GET /api/socket-health 200 in 33ms
 GET /socket.io?EIO=4&transport=polling&t=0f2dbh4k 404 in 98ms
 GET /api/socket-health 200 in 29ms
 GET /socket.io?EIO=4&transport=polling&t=0f34yis9 404 in 98ms
 GET /api/socket-health 200 in 27ms
 GET /socket.io?EIO=4&transport=polling&t=0f3wt9lo 404 in 96ms
 GET /api/socket-health 200 in 31ms
 GET /socket.io?EIO=4&transport=polling&t=0f4owjse 404 in 105ms
 GET /api/socket-health 200 in 34ms
 GET /socket.io?EIO=4&transport=polling&t=0f5gsm5w 404 in 92ms
 GET /api/socket-health 200 in 25ms
 GET /socket.io?EIO=4&transport=polling&t=0f67xkns 404 in 93ms
 GET /api/socket-health 200 in 27ms
 GET /socket.io?EIO=4&transport=polling&t=0f6zzawp 404 in 109ms
 GET /api/socket-health 200 in 26ms
 GET /socket.io?EIO=4&transport=polling&t=0f7rnixd 404 in 101ms
 GET /api/socket-health 200 in 35ms
 GET /socket.io?EIO=4&transport=polling&t=0f8jp5rm 404 in 104ms
 GET /api/socket-health 200 in 38ms
 GET /socket.io?EIO=4&transport=polling&t=0f9bipoh 404 in 96ms
 GET /api/socket-health 200 in 29ms
 GET /socket.io?EIO=4&transport=polling&t=0fa3io9f 404 in 95ms
 GET /api/socket-health 200 in 27ms
 GET /socket.io?EIO=4&transport=polling&t=0faursci 404 in 97ms
 GET /api/socket-health 200 in 26ms
 GET /socket.io?EIO=4&transport=polling&t=0fbmfl6a 404 in 96ms
 GET /api/socket-health 200 in 27ms
 GET /socket.io?EIO=4&transport=polling&t=0fcej1e3 404 in 102ms
 GET /api/socket-health 200 in 34ms
 GET /socket.io?EIO=4&transport=polling&t=0fd6fzzv 404 in 94ms
 GET /api/socket-health 200 in 27ms
 GET /socket.io?EIO=4&transport=polling&t=0fdxwb6u 404 in 98ms
 GET /api/socket-health 200 in 28ms
 GET /socket.io?EIO=4&transport=polling&t=0fepqm86 404 in 98ms
 GET /api/socket-health 200 in 27ms
 GET /socket.io?EIO=4&transport=polling&t=0ffhevb8 404 in 103ms
 GET /api/socket-health 200 in 35ms
 GET /socket.io?EIO=4&transport=polling&t=0fg9c4zb 404 in 99ms
 GET /api/socket-health 200 in 28ms
 GET /socket.io?EIO=4&transport=polling&t=0fh0zlff 404 in 98ms
 GET /api/socket-health 200 in 31ms
 GET /socket.io?EIO=4&transport=polling&t=0fht1m5e 404 in 101ms
 GET /api/socket-health 200 in 29ms
 GET /socket.io?EIO=4&transport=polling&t=0fikhszx 404 in 96ms
 GET /api/socket-health 200 in 27ms
 GET /socket.io?EIO=4&transport=polling&t=0fjckm8j 404 in 99ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
=== FRIEND REQUEST GET START ===
 GET /api/socket-health 200 in 93ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
Request type: received User: sayantan2@gmail.com
âœ… Database connected
âœ… Current user found: {
  id: new ObjectId('6901f85f42c5d010fa811206'),
  email: 'sayantan2@gmail.com',
  friendRequestsCount: 0,
  sentRequestsCount: 1
}
Processing received requests...
Raw friendRequests: []
Processed receivedRequests: []
Populating sender details...
Final populated requests: []
=== FRIEND REQUEST GET END (received) ===
 GET /api/friends/request?type=received 200 in 182ms
=== FRIEND REQUEST GET START ===
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
Request type: sent User: sayantan2@gmail.com
âœ… Database connected
 GET /api/friends 200 in 246ms
 GET /socket.io?EIO=4&transport=polling&t=0fk6bmlo 404 in 147ms
âœ… Current user found: {
  id: new ObjectId('6901f85f42c5d010fa811206'),
  email: 'sayantan2@gmail.com',
  friendRequestsCount: 0,
  sentRequestsCount: 1
}
Processing sent requests...
Raw sentRequests: [
  {
    from: new ObjectId('6901f85f42c5d010fa811206'),
    fromName: 'sayantan2',
    to: new ObjectId('6905adf16a22b7843b006183'),
    toName: 'sayantan3',
    status: 'pending',
    _id: new ObjectId('6905cdce14ad0d0f020b3985'),
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
Filtering sent request: { status: 'pending', to: new ObjectId('6905adf16a22b7843b006183') }
Mapping sent request: {
  from: new ObjectId('6901f85f42c5d010fa811206'),
  fromName: 'sayantan2',
  to: new ObjectId('6905adf16a22b7843b006183'),
  toName: 'sayantan3',
  status: 'pending',
  _id: new ObjectId('6905cdce14ad0d0f020b3985'),
  createdAt: 2025-11-01T09:07:26.707Z,
  updatedAt: 2025-11-01T09:07:26.707Z
}
Processed sentRequests: [
  {
    id: '6905cdce14ad0d0f020b3985',
    to: {
      id: '6905adf16a22b7843b006183',
      username: 'sayantan3',
      email: '',
      profilePicture: null
    },
    status: 'pending',
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
Populating recipient details...
Looking up recipient: 6905adf16a22b7843b006183
 POST /api/users/heartbeat 200 in 284ms
Found recipient: sayantan3
Final populated sent requests: [
  {
    id: '6905cdce14ad0d0f020b3985',
    to: {
      id: '6905adf16a22b7843b006183',
      username: 'sayantan3',
      email: 'sayantan3@gmail.com',
      profilePicture: undefined
    },
    status: 'pending',
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
=== FRIEND REQUEST GET END (sent) ===
 GET /api/friends/request?type=sent 200 in 122ms
 GET /api/socket-health 200 in 30ms
 GET /socket.io?EIO=4&transport=polling&t=0fkvv80p 404 in 96ms
 GET /api/socket-health 200 in 28ms
 GET /socket.io?EIO=4&transport=polling&t=0flnmuoq 404 in 98ms
 GET /api/socket-health 200 in 53ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
 GET /socket.io?EIO=4&transport=polling&t=0fmg4erj 404 in 101ms
 GET /api/conversations 200 in 186ms
 GET /api/socket-health 200 in 26ms
 GET /socket.io?EIO=4&transport=polling&t=0fn783mn 404 in 99ms
 GET /api/socket-health 200 in 28ms
 GET /socket.io?EIO=4&transport=polling&t=0fnyzpri 404 in 99ms
 GET /api/socket-health 200 in 26ms
 GET /socket.io?EIO=4&transport=polling&t=0foqns28 404 in 99ms
 GET /api/socket-health 200 in 27ms
 GET /socket.io?EIO=4&transport=polling&t=0fpie88y 404 in 90ms
 GET /api/socket-health 200 in 39ms
 GET /socket.io?EIO=4&transport=polling&t=0fqatpii 404 in 101ms
 GET /api/socket-health 200 in 32ms
 GET /socket.io?EIO=4&transport=polling&t=0fr2dkqs 404 in 110ms
 GET /api/socket-health 200 in 25ms
 GET /socket.io?EIO=4&transport=polling&t=0frtzffw 404 in 99ms
 GET /api/socket-health 200 in 27ms
 GET /socket.io?EIO=4&transport=polling&t=0fslrsgp 404 in 97ms
 GET /api/socket-health 200 in 31ms
 GET /socket.io?EIO=4&transport=polling&t=0ftdlebt 404 in 97ms
 GET /api/socket-health 200 in 30ms
 GET /socket.io?EIO=4&transport=polling&t=0fu5as7n 404 in 96ms
 GET /api/socket-health 200 in 25ms
 GET /socket.io?EIO=4&transport=polling&t=0fuwulz8 404 in 98ms
 GET /api/socket-health 200 in 30ms
 GET /socket.io?EIO=4&transport=polling&t=0fvotf6g 404 in 99ms
 GET /api/socket-health 200 in 33ms
 GET /socket.io?EIO=4&transport=polling&t=0fwgn3iv 404 in 90ms
 GET /api/socket-health 200 in 30ms
 GET /socket.io?EIO=4&transport=polling&t=0fx8h61f 404 in 96ms
 GET /api/socket-health 200 in 27ms
 GET /socket.io?EIO=4&transport=polling&t=0fy046s5 404 in 104ms
 GET /api/socket-health 200 in 27ms
 GET /socket.io?EIO=4&transport=polling&t=0fys0gxk 404 in 103ms
 GET /api/socket-health 200 in 26ms
 GET /socket.io?EIO=4&transport=polling&t=0fzjm4od 404 in 102ms
 GET /api/socket-health 200 in 44ms
 GET /socket.io?EIO=4&transport=polling&t=0g0byfg8 404 in 123ms
 GET /api/socket-health 200 in 33ms
 GET /socket.io?EIO=4&transport=polling&t=0g13lyhk 404 in 128ms
 GET /api/socket-health 200 in 39ms
 GET /socket.io?EIO=4&transport=polling&t=0g1vkrs6 404 in 125ms
 GET /api/socket-health 200 in 67ms
 GET /socket.io?EIO=4&transport=polling&t=0g2oj1xh 404 in 150ms
 GET /api/socket-health 200 in 34ms
 GET /socket.io?EIO=4&transport=polling&t=0g3ezk99 404 in 97ms
 GET /api/socket-health 200 in 25ms
 GET /socket.io?EIO=4&transport=polling&t=0g46hsqx 404 in 100ms
 GET /api/socket-health 200 in 31ms
 GET /socket.io?EIO=4&transport=polling&t=0g4yhct0 404 in 97ms
 GET /api/socket-health 200 in 26ms
 GET /socket.io?EIO=4&transport=polling&t=0g5q133q 404 in 100ms
 GET /api/socket-health 200 in 28ms
 GET /socket.io?EIO=4&transport=polling&t=0g6hshi1 404 in 96ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
=== FRIEND REQUEST GET START ===
 GET /api/socket-health 200 in 87ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
Request type: received User: sayantan2@gmail.com
âœ… Database connected
âœ… Current user found: {
  id: new ObjectId('6901f85f42c5d010fa811206'),
  email: 'sayantan2@gmail.com',
  friendRequestsCount: 0,
  sentRequestsCount: 1
}
Processing received requests...
Raw friendRequests: []
Processed receivedRequests: []
Populating sender details...
Final populated requests: []
=== FRIEND REQUEST GET END (received) ===
 GET /api/friends/request?type=received 200 in 177ms
=== FRIEND REQUEST GET START ===
 GET /api/friends 200 in 216ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
Request type: sent User: sayantan2@gmail.com
âœ… Database connected
 GET /socket.io?EIO=4&transport=polling&t=0g7b44mw 404 in 133ms
 POST /api/users/heartbeat 200 in 262ms
âœ… Current user found: {
  id: new ObjectId('6901f85f42c5d010fa811206'),
  email: 'sayantan2@gmail.com',
  friendRequestsCount: 0,
  sentRequestsCount: 1
}
Processing sent requests...
Raw sentRequests: [
  {
    from: new ObjectId('6901f85f42c5d010fa811206'),
    fromName: 'sayantan2',
    to: new ObjectId('6905adf16a22b7843b006183'),
    toName: 'sayantan3',
    status: 'pending',
    _id: new ObjectId('6905cdce14ad0d0f020b3985'),
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
Filtering sent request: { status: 'pending', to: new ObjectId('6905adf16a22b7843b006183') }
Mapping sent request: {
  from: new ObjectId('6901f85f42c5d010fa811206'),
  fromName: 'sayantan2',
  to: new ObjectId('6905adf16a22b7843b006183'),
  toName: 'sayantan3',
  status: 'pending',
  _id: new ObjectId('6905cdce14ad0d0f020b3985'),
  createdAt: 2025-11-01T09:07:26.707Z,
  updatedAt: 2025-11-01T09:07:26.707Z
}
Processed sentRequests: [
  {
    id: '6905cdce14ad0d0f020b3985',
    to: {
      id: '6905adf16a22b7843b006183',
      username: 'sayantan3',
      email: '',
      profilePicture: null
    },
    status: 'pending',
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
Populating recipient details...
Looking up recipient: 6905adf16a22b7843b006183
Found recipient: sayantan3
Final populated sent requests: [
  {
    id: '6905cdce14ad0d0f020b3985',
    to: {
      id: '6905adf16a22b7843b006183',
      username: 'sayantan3',
      email: 'sayantan3@gmail.com',
      profilePicture: undefined
    },
    status: 'pending',
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
=== FRIEND REQUEST GET END (sent) ===
 GET /api/friends/request?type=sent 200 in 115ms
 GET /api/socket-health 200 in 31ms
 GET /socket.io?EIO=4&transport=polling&t=0g817jo2 404 in 97ms
 GET /api/socket-health 200 in 26ms
 GET /socket.io?EIO=4&transport=polling&t=0g8swnrg 404 in 99ms
 GET /api/socket-health 200 in 27ms
 GET /socket.io?EIO=4&transport=polling&t=0g9kr47v 404 in 97ms
 GET /api/socket-health 200 in 51ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
 GET /socket.io?EIO=4&transport=polling&t=0gad73gq 404 in 98ms
 GET /api/conversations 200 in 175ms
 GET /api/socket-health 200 in 29ms
 GET /socket.io?EIO=4&transport=polling&t=0gb4e9al 404 in 118ms
 GET /api/socket-health 200 in 26ms
 GET /socket.io?EIO=4&transport=polling&t=0gbw5sgv 404 in 98ms
 GET /api/socket-health 200 in 27ms
 GET /socket.io?EIO=4&transport=polling&t=0gco0z76 404 in 97ms
 GET /api/socket-health 200 in 27ms
 GET /socket.io?EIO=4&transport=polling&t=0gdfqsh3 404 in 88ms
 GET /api/socket-health 200 in 33ms
 GET /socket.io?EIO=4&transport=polling&t=0ge7o8t9 404 in 95ms
 GET /api/socket-health 200 in 26ms
 GET /socket.io?EIO=4&transport=polling&t=0gezbax7 404 in 102ms
 GET /api/socket-health 200 in 27ms
 GET /socket.io?EIO=4&transport=polling&t=0gfr2rs4 404 in 95ms
 GET /api/socket-health 200 in 27ms
 GET /socket.io?EIO=4&transport=polling&t=0ggipnak 404 in 97ms
 GET /api/socket-health 200 in 35ms
 GET /socket.io?EIO=4&transport=polling&t=0ghao8mw 404 in 98ms
 GET /api/socket-health 200 in 29ms
 GET /socket.io?EIO=4&transport=polling&t=0gi2bxcl 404 in 102ms
 GET /api/socket-health 200 in 27ms
 GET /socket.io?EIO=4&transport=polling&t=0gitygr5 404 in 96ms
 GET /api/socket-health 200 in 27ms
 GET /socket.io?EIO=4&transport=polling&t=0gjm3d83 404 in 100ms
 GET /api/socket-health 200 in 33ms
 GET /socket.io?EIO=4&transport=polling&t=0gkdoibx 404 in 88ms
 GET /api/socket-health 200 in 27ms
 GET /socket.io?EIO=4&transport=polling&t=0gl5c1sz 404 in 96ms
 GET /api/socket-health 200 in 30ms
 GET /socket.io?EIO=4&transport=polling&t=0glxcihz 404 in 104ms
 GET /api/socket-health 200 in 25ms
 GET /socket.io?EIO=4&transport=polling&t=0gmp07nk 404 in 94ms
 GET /api/socket-health 200 in 26ms
 GET /socket.io?EIO=4&transport=polling&t=0gngsjl4 404 in 95ms
 GET /api/socket-health 200 in 33ms
 GET /socket.io?EIO=4&transport=polling&t=0go8owkr 404 in 97ms
 GET /api/socket-health 200 in 31ms
 GET /socket.io?EIO=4&transport=polling&t=0gp0n296 404 in 102ms
 GET /api/socket-health 200 in 27ms
 GET /socket.io?EIO=4&transport=polling&t=0gpsajm3 404 in 121ms
 GET /api/socket-health 200 in 27ms
 GET /socket.io?EIO=4&transport=polling&t=0gqk3jpu 404 in 104ms
 GET /api/socket-health 200 in 26ms
 GET /socket.io?EIO=4&transport=polling&t=0grbuo9t 404 in 104ms
 GET /api/socket-health 200 in 32ms
 GET /socket.io?EIO=4&transport=polling&t=0gs3ment 404 in 103ms
 GET /api/socket-health 200 in 25ms
 GET /socket.io?EIO=4&transport=polling&t=0gsv2x81 404 in 91ms
 GET /api/socket-health 200 in 35ms
 GET /socket.io?EIO=4&transport=polling&t=0gtn4ee9 404 in 98ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
=== FRIEND REQUEST GET START ===
 GET /api/socket-health 200 in 79ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
Request type: received User: sayantan2@gmail.com
âœ… Database connected
âœ… Current user found: {
  id: new ObjectId('6901f85f42c5d010fa811206'),
  email: 'sayantan2@gmail.com',
  friendRequestsCount: 0,
  sentRequestsCount: 1
}
Processing received requests...
Raw friendRequests: []
Processed receivedRequests: []
Populating sender details...
Final populated requests: []
=== FRIEND REQUEST GET END (received) ===
 GET /api/friends/request?type=received 200 in 168ms
=== FRIEND REQUEST GET START ===
 GET /api/friends 200 in 209ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
Request type: sent User: sayantan2@gmail.com
âœ… Database connected
 GET /socket.io?EIO=4&transport=polling&t=0gug7rux 404 in 131ms
 POST /api/users/heartbeat 200 in 246ms
âœ… Current user found: {
  id: new ObjectId('6901f85f42c5d010fa811206'),
  email: 'sayantan2@gmail.com',
  friendRequestsCount: 0,
  sentRequestsCount: 1
}
Processing sent requests...
Raw sentRequests: [
  {
    from: new ObjectId('6901f85f42c5d010fa811206'),
    fromName: 'sayantan2',
    to: new ObjectId('6905adf16a22b7843b006183'),
    toName: 'sayantan3',
    status: 'pending',
    _id: new ObjectId('6905cdce14ad0d0f020b3985'),
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
Filtering sent request: { status: 'pending', to: new ObjectId('6905adf16a22b7843b006183') }
Mapping sent request: {
  from: new ObjectId('6901f85f42c5d010fa811206'),
  fromName: 'sayantan2',
  to: new ObjectId('6905adf16a22b7843b006183'),
  toName: 'sayantan3',
  status: 'pending',
  _id: new ObjectId('6905cdce14ad0d0f020b3985'),
  createdAt: 2025-11-01T09:07:26.707Z,
  updatedAt: 2025-11-01T09:07:26.707Z
}
Processed sentRequests: [
  {
    id: '6905cdce14ad0d0f020b3985',
    to: {
      id: '6905adf16a22b7843b006183',
      username: 'sayantan3',
      email: '',
      profilePicture: null
    },
    status: 'pending',
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
Populating recipient details...
Looking up recipient: 6905adf16a22b7843b006183
Found recipient: sayantan3
Final populated sent requests: [
  {
    id: '6905cdce14ad0d0f020b3985',
    to: {
      id: '6905adf16a22b7843b006183',
      username: 'sayantan3',
      email: 'sayantan3@gmail.com',
      profilePicture: undefined
    },
    status: 'pending',
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
=== FRIEND REQUEST GET END (sent) ===
 GET /api/friends/request?type=sent 200 in 113ms
 GET /api/socket-health 200 in 32ms
 GET /socket.io?EIO=4&transport=polling&t=0gv6uti7 404 in 99ms
 GET /api/socket-health 200 in 29ms
 GET /socket.io?EIO=4&transport=polling&t=0gvygflg 404 in 100ms
 GET /api/socket-health 200 in 25ms
 GET /socket.io?EIO=4&transport=polling&t=0gwq549f 404 in 99ms
 GET /api/socket-health 200 in 27ms
 GET /socket.io?EIO=4&transport=polling&t=0gxhy7rv 404 in 99ms
 GET /api/socket-health 200 in 51ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
 GET /socket.io?EIO=4&transport=polling&t=0gyacnjt 404 in 98ms
 GET /api/conversations 200 in 183ms
 GET /api/socket-health 200 in 28ms
 GET /socket.io?EIO=4&transport=polling&t=0gz1klqt 404 in 125ms
 GET /api/socket-health 200 in 26ms
 GET /socket.io?EIO=4&transport=polling&t=0gztd3f7 404 in 93ms
 GET /api/socket-health 200 in 27ms
 GET /socket.io?EIO=4&transport=polling&t=0h0l7ntd 404 in 99ms
 GET /api/socket-health 200 in 34ms
 GET /socket.io?EIO=4&transport=polling&t=0h1d7930 404 in 101ms
 GET /api/socket-health 200 in 25ms
 GET /socket.io?EIO=4&transport=polling&t=0h24pv5t 404 in 98ms
 GET /api/socket-health 200 in 32ms
 GET /socket.io?EIO=4&transport=polling&t=0h2woevq 404 in 92ms
 GET /api/socket-health 200 in 25ms
 GET /socket.io?EIO=4&transport=polling&t=0h3o83nt 404 in 99ms
 GET /api/socket-health 200 in 37ms
 GET /socket.io?EIO=4&transport=polling&t=0h4gdu35 404 in 93ms
 GET /api/socket-health 200 in 25ms
 GET /socket.io?EIO=4&transport=polling&t=0h57hv2t 404 in 94ms
 GET /api/socket-health 200 in 26ms
 GET /socket.io?EIO=4&transport=polling&t=0h5zmurd 404 in 93ms
 GET /api/socket-health 200 in 27ms
 GET /socket.io?EIO=4&transport=polling&t=0h6r48rx 404 in 97ms
 GET /api/socket-health 200 in 27ms
 GET /socket.io?EIO=4&transport=polling&t=0h7izgbm 404 in 93ms
 GET /api/socket-health 200 in 32ms
 GET /socket.io?EIO=4&transport=polling&t=0h8axjzr 404 in 94ms
 GET /api/socket-health 200 in 29ms
 GET /socket.io?EIO=4&transport=polling&t=0h92gbm7 404 in 98ms
 GET /api/socket-health 200 in 29ms
 GET /socket.io?EIO=4&transport=polling&t=0h9umbj1 404 in 98ms
 GET /api/socket-health 200 in 33ms
 GET /socket.io?EIO=4&transport=polling&t=0hamdzkw 404 in 104ms
 GET /api/socket-health 200 in 32ms
 GET /socket.io?EIO=4&transport=polling&t=0hbdyfyk 404 in 97ms
 GET /api/socket-health 200 in 27ms
 GET /socket.io?EIO=4&transport=polling&t=0hc5kj8r 404 in 94ms
 GET /api/socket-health 200 in 28ms
 GET /socket.io?EIO=4&transport=polling&t=0hcxb05e 404 in 97ms
 GET /api/socket-health 200 in 28ms
 GET /socket.io?EIO=4&transport=polling&t=0hdp67ix 404 in 101ms
 GET /api/socket-health 200 in 33ms
 GET /socket.io?EIO=4&transport=polling&t=0heh21e4 404 in 91ms
 GET /api/socket-health 200 in 29ms
 GET /socket.io?EIO=4&transport=polling&t=0hf90itf 404 in 100ms
 GET /api/socket-health 200 in 27ms
 GET /socket.io?EIO=4&transport=polling&t=0hg0mg6s 404 in 97ms
 GET /api/socket-health 200 in 27ms
 GET /socket.io?EIO=4&transport=polling&t=0hgs67tv 404 in 111ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
 GET /api/socket-health 200 in 78ms
=== FRIEND REQUEST GET START ===
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
Request type: received User: sayantan2@gmail.com
âœ… Database connected
âœ… Current user found: {
  id: new ObjectId('6901f85f42c5d010fa811206'),
  email: 'sayantan2@gmail.com',
  friendRequestsCount: 0,
  sentRequestsCount: 1
}
Processing received requests...
Raw friendRequests: []
Processed receivedRequests: []
Populating sender details...
Final populated requests: []
=== FRIEND REQUEST GET END (received) ===
 GET /api/friends/request?type=received 200 in 176ms
=== FRIEND REQUEST GET START ===
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
Request type: sent User: sayantan2@gmail.com
âœ… Database connected
 GET /api/friends 200 in 215ms
 GET /socket.io?EIO=4&transport=polling&t=0hhli0ew 404 in 136ms
âœ… Current user found: {
  id: new ObjectId('6901f85f42c5d010fa811206'),
  email: 'sayantan2@gmail.com',
  friendRequestsCount: 0,
  sentRequestsCount: 1
}
Processing sent requests...
Raw sentRequests: [
  {
    from: new ObjectId('6901f85f42c5d010fa811206'),
    fromName: 'sayantan2',
    to: new ObjectId('6905adf16a22b7843b006183'),
    toName: 'sayantan3',
    status: 'pending',
    _id: new ObjectId('6905cdce14ad0d0f020b3985'),
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
Filtering sent request: { status: 'pending', to: new ObjectId('6905adf16a22b7843b006183') }
Mapping sent request: {
  from: new ObjectId('6901f85f42c5d010fa811206'),
  fromName: 'sayantan2',
  to: new ObjectId('6905adf16a22b7843b006183'),
  toName: 'sayantan3',
  status: 'pending',
  _id: new ObjectId('6905cdce14ad0d0f020b3985'),
  createdAt: 2025-11-01T09:07:26.707Z,
  updatedAt: 2025-11-01T09:07:26.707Z
}
Processed sentRequests: [
  {
    id: '6905cdce14ad0d0f020b3985',
    to: {
      id: '6905adf16a22b7843b006183',
      username: 'sayantan3',
      email: '',
      profilePicture: null
    },
    status: 'pending',
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
Populating recipient details...
Looking up recipient: 6905adf16a22b7843b006183
 POST /api/users/heartbeat 200 in 260ms
Found recipient: sayantan3
Final populated sent requests: [
  {
    id: '6905cdce14ad0d0f020b3985',
    to: {
      id: '6905adf16a22b7843b006183',
      username: 'sayantan3',
      email: 'sayantan3@gmail.com',
      profilePicture: undefined
    },
    status: 'pending',
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
=== FRIEND REQUEST GET END (sent) ===
 GET /api/friends/request?type=sent 200 in 120ms
 GET /api/socket-health 200 in 26ms
 GET /socket.io?EIO=4&transport=polling&t=0hibp0ka 404 in 99ms
 GET /api/socket-health 200 in 28ms
 GET /socket.io?EIO=4&transport=polling&t=0hj3p0cy 404 in 90ms
 GET /api/socket-health 200 in 25ms
 GET /socket.io?EIO=4&transport=polling&t=0hjvjypn 404 in 93ms
 GET /api/socket-health 200 in 25ms
 GET /socket.io?EIO=4&transport=polling&t=0hknaiap 404 in 99ms
 GET /api/socket-health 200 in 33ms
 GET /socket.io?EIO=4&transport=polling&t=0hlf9jsl 404 in 88ms
 GET /api/socket-health 200 in 42ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
 GET /socket.io?EIO=4&transport=polling&t=0hm7bl55 404 in 100ms
 GET /api/conversations 200 in 182ms
 GET /api/socket-health 200 in 27ms
 GET /socket.io?EIO=4&transport=polling&t=0hmyrvsw 404 in 89ms
 GET /api/socket-health 200 in 35ms
 GET /socket.io?EIO=4&transport=polling&t=0hnqnlkl 404 in 123ms
 GET /api/socket-health 200 in 42ms
 GET /socket.io?EIO=4&transport=polling&t=0hoix2ql 404 in 138ms
 GET /api/socket-health 200 in 26ms
 GET /socket.io?EIO=4&transport=polling&t=0hp9z2yc 404 in 105ms
 GET /api/socket-health 200 in 53ms
 GET /socket.io?EIO=4&transport=polling&t=0hq2l5gr 404 in 112ms
 GET /api/socket-health 200 in 27ms
 GET /socket.io?EIO=4&transport=polling&t=0hqtnkf6 404 in 99ms
 GET /api/socket-health 200 in 27ms
 GET /socket.io?EIO=4&transport=polling&t=0hrlcxb7 404 in 98ms
 GET /api/socket-health 200 in 25ms
 GET /socket.io?EIO=4&transport=polling&t=0hsczsw9 404 in 101ms
 GET /api/socket-health 200 in 38ms
 GET /socket.io?EIO=4&transport=polling&t=0ht545de 404 in 105ms
 GET /api/socket-health 200 in 30ms
 GET /socket.io?EIO=4&transport=polling&t=0htwpo48 404 in 120ms
 GET /api/socket-health 200 in 38ms
 GET /socket.io?EIO=4&transport=polling&t=0huonn9u 404 in 114ms
 GET /api/socket-health 200 in 29ms
 GET /socket.io?EIO=4&transport=polling&t=0hvg2rfl 404 in 115ms
 GET /api/socket-health 200 in 31ms
 GET /socket.io?EIO=4&transport=polling&t=0hw81hpj 404 in 115ms
 GET /api/socket-health 200 in 28ms
 GET /socket.io?EIO=4&transport=polling&t=0hwzvw3l 404 in 108ms
 GET /api/socket-health 200 in 36ms
 GET /socket.io?EIO=4&transport=polling&t=0hxrtycw 404 in 105ms
 GET /api/socket-health 200 in 26ms
 GET /socket.io?EIO=4&transport=polling&t=0hyj9bv9 404 in 112ms
 GET /api/socket-health 200 in 28ms
 GET /socket.io?EIO=4&transport=polling&t=0hzb1b3p 404 in 104ms
 GET /api/socket-health 200 in 32ms
 GET /socket.io?EIO=4&transport=polling&t=0i0307wn 404 in 104ms
 GET /api/socket-health 200 in 30ms
 GET /socket.io?EIO=4&transport=polling&t=0i0uuisd 404 in 104ms
 GET /api/socket-health 200 in 33ms
 GET /socket.io?EIO=4&transport=polling&t=0i1mcwws 404 in 104ms
 GET /api/socket-health 200 in 35ms
 GET /socket.io?EIO=4&transport=polling&t=0i2ey5n8 404 in 108ms
 GET /api/socket-health 200 in 31ms
 GET /socket.io?EIO=4&transport=polling&t=0i366du7 404 in 109ms
 GET /api/socket-health 200 in 27ms
 GET /socket.io?EIO=4&transport=polling&t=0i3xilk4 404 in 109ms
 GET /api/socket-health 200 in 38ms
 GET /socket.io?EIO=4&transport=polling&t=0i4plfc5 404 in 104ms
 GET /api/socket-health 200 in 52ms
=== FRIEND REQUEST GET START ===
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
Request type: received User: sayantan2@gmail.com
âœ… Database connected
âœ… Current user found: {
  id: new ObjectId('6901f85f42c5d010fa811206'),
  email: 'sayantan2@gmail.com',
  friendRequestsCount: 0,
  sentRequestsCount: 1
}
Processing received requests...
Raw friendRequests: []
Processed receivedRequests: []
Populating sender details...
Final populated requests: []
=== FRIEND REQUEST GET END (received) ===
 GET /api/friends/request?type=received 200 in 168ms
=== FRIEND REQUEST GET START ===
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
Request type: sent User: sayantan2@gmail.com
âœ… Database connected
 GET /socket.io?EIO=4&transport=polling&t=0i5hyhxv 404 in 145ms
âœ… Current user found: {
  id: new ObjectId('6901f85f42c5d010fa811206'),
  email: 'sayantan2@gmail.com',
  friendRequestsCount: 0,
  sentRequestsCount: 1
}
Processing sent requests...
Raw sentRequests: [
  {
    from: new ObjectId('6901f85f42c5d010fa811206'),
    fromName: 'sayantan2',
    to: new ObjectId('6905adf16a22b7843b006183'),
    toName: 'sayantan3',
    status: 'pending',
    _id: new ObjectId('6905cdce14ad0d0f020b3985'),
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
Filtering sent request: { status: 'pending', to: new ObjectId('6905adf16a22b7843b006183') }
Mapping sent request: {
  from: new ObjectId('6901f85f42c5d010fa811206'),
  fromName: 'sayantan2',
  to: new ObjectId('6905adf16a22b7843b006183'),
  toName: 'sayantan3',
  status: 'pending',
  _id: new ObjectId('6905cdce14ad0d0f020b3985'),
  createdAt: 2025-11-01T09:07:26.707Z,
  updatedAt: 2025-11-01T09:07:26.707Z
}
Processed sentRequests: [
  {
    id: '6905cdce14ad0d0f020b3985',
    to: {
      id: '6905adf16a22b7843b006183',
      username: 'sayantan3',
      email: '',
      profilePicture: null
    },
    status: 'pending',
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
Populating recipient details...
Looking up recipient: 6905adf16a22b7843b006183
Found recipient: sayantan3
Final populated sent requests: [
  {
    id: '6905cdce14ad0d0f020b3985',
    to: {
      id: '6905adf16a22b7843b006183',
      username: 'sayantan3',
      email: 'sayantan3@gmail.com',
      profilePicture: undefined
    },
    status: 'pending',
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
=== FRIEND REQUEST GET END (sent) ===
 GET /api/friends/request?type=sent 200 in 126ms
 GET /api/socket-health 200 in 30ms
 GET /socket.io?EIO=4&transport=polling&t=0i6924bv 404 in 118ms
 GET /api/socket-health 200 in 29ms
 GET /socket.io?EIO=4&transport=polling&t=0i70thva 404 in 98ms
 GET /api/socket-health 200 in 29ms
 GET /socket.io?EIO=4&transport=polling&t=0i7sn8fe 404 in 104ms
 GET /api/socket-health 200 in 31ms
 GET /socket.io?EIO=4&transport=polling&t=0i8khwal 404 in 97ms
 GET /api/socket-health 200 in 35ms
 GET /socket.io?EIO=4&transport=polling&t=0i9cbxc0 404 in 105ms
 GET /api/socket-health 200 in 43ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
 GET /socket.io?EIO=4&transport=polling&t=0ia47xeu 404 in 100ms
 GET /api/conversations 200 in 188ms
 GET /api/socket-health 200 in 27ms
 GET /socket.io?EIO=4&transport=polling&t=0iavnbr6 404 in 105ms
 GET /api/socket-health 200 in 33ms
 GET /socket.io?EIO=4&transport=polling&t=0ibnlwd9 404 in 105ms
 GET /api/socket-health 200 in 26ms
 GET /socket.io?EIO=4&transport=polling&t=0icf2baa 404 in 108ms
 GET /api/socket-health 200 in 32ms
 GET /socket.io?EIO=4&transport=polling&t=0id7alnr 404 in 97ms
 GET /api/socket-health 200 in 34ms
 GET /socket.io?EIO=4&transport=polling&t=0idz3425 404 in 104ms
 GET /api/socket-health 200 in 31ms
 GET /socket.io?EIO=4&transport=polling&t=0iequu2o 404 in 96ms
 GET /api/socket-health 200 in 31ms
 GET /socket.io?EIO=4&transport=polling&t=0ifima7v 404 in 104ms
 GET /api/socket-health 200 in 33ms
 GET /socket.io?EIO=4&transport=polling&t=0igahkx8 404 in 104ms
 GET /api/socket-health 200 in 35ms
 GET /socket.io?EIO=4&transport=polling&t=0ih2bql4 404 in 108ms
 GET /api/socket-health 200 in 30ms
 GET /socket.io?EIO=4&transport=polling&t=0ihtxeoj 404 in 106ms
 GET /api/socket-health 200 in 29ms
 GET /socket.io?EIO=4&transport=polling&t=0iilpwut 404 in 103ms
 GET /api/socket-health 200 in 28ms
 GET /socket.io?EIO=4&transport=polling&t=0ijdebt1 404 in 101ms
 GET /api/socket-health 200 in 34ms
 GET /socket.io?EIO=4&transport=polling&t=0ik56e97 404 in 114ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
=== FRIEND REQUEST GET START ===
 GET /api/socket-health 200 in 92ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
Request type: received User: sayantan2@gmail.com
âœ… Database connected
 GET /socket.io?EIO=4&transport=polling&t=0ikzg7o7 404 in 127ms
 GET /api/friends 200 in 280ms
âœ… Current user found: {
  id: new ObjectId('6901f85f42c5d010fa811206'),
  email: 'sayantan2@gmail.com',
  friendRequestsCount: 0,
  sentRequestsCount: 1
}
Processing received requests...
Raw friendRequests: []
Processed receivedRequests: []
Populating sender details...
Final populated requests: []
=== FRIEND REQUEST GET END (received) ===
 GET /api/friends/request?type=received 200 in 628ms
=== FRIEND REQUEST GET START ===
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
Request type: sent User: sayantan2@gmail.com
âœ… Database connected
âœ… Current user found: {
  id: new ObjectId('6901f85f42c5d010fa811206'),
  email: 'sayantan2@gmail.com',
  friendRequestsCount: 0,
  sentRequestsCount: 1
}
Processing sent requests...
Raw sentRequests: [
  {
    from: new ObjectId('6901f85f42c5d010fa811206'),
    fromName: 'sayantan2',
    to: new ObjectId('6905adf16a22b7843b006183'),
    toName: 'sayantan3',
    status: 'pending',
    _id: new ObjectId('6905cdce14ad0d0f020b3985'),
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
Filtering sent request: { status: 'pending', to: new ObjectId('6905adf16a22b7843b006183') }
Mapping sent request: {
  from: new ObjectId('6901f85f42c5d010fa811206'),
  fromName: 'sayantan2',
  to: new ObjectId('6905adf16a22b7843b006183'),
  toName: 'sayantan3',
  status: 'pending',
  _id: new ObjectId('6905cdce14ad0d0f020b3985'),
  createdAt: 2025-11-01T09:07:26.707Z,
  updatedAt: 2025-11-01T09:07:26.707Z
}
Processed sentRequests: [
  {
    id: '6905cdce14ad0d0f020b3985',
    to: {
      id: '6905adf16a22b7843b006183',
      username: 'sayantan3',
      email: '',
      profilePicture: null
    },
    status: 'pending',
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
Populating recipient details...
Looking up recipient: 6905adf16a22b7843b006183
 POST /api/users/heartbeat 200 in 738ms
Found recipient: sayantan3
Final populated sent requests: [
  {
    id: '6905cdce14ad0d0f020b3985',
    to: {
      id: '6905adf16a22b7843b006183',
      username: 'sayantan3',
      email: 'sayantan3@gmail.com',
      profilePicture: undefined
    },
    status: 'pending',
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
=== FRIEND REQUEST GET END (sent) ===
 GET /api/friends/request?type=sent 200 in 134ms
 GET /api/socket-health 200 in 40ms
 GET /socket.io?EIO=4&transport=polling&t=0ilosn6w 404 in 124ms
 GET /api/socket-health 200 in 30ms
 GET /socket.io?EIO=4&transport=polling&t=0imgc2m7 404 in 112ms
 GET /api/socket-health 200 in 27ms
 GET /socket.io?EIO=4&transport=polling&t=0in7zuu9 404 in 105ms
 GET /api/socket-health 200 in 27ms
 GET /socket.io?EIO=4&transport=polling&t=0io02ow0 404 in 99ms
 GET /api/socket-health 200 in 28ms
 GET /socket.io?EIO=4&transport=polling&t=0iortf5z 404 in 96ms
 GET /api/socket-health 200 in 39ms
 GET /socket.io?EIO=4&transport=polling&t=0ipkxk6y 404 in 102ms
 GET /api/socket-health 200 in 32ms
 GET /socket.io?EIO=4&transport=polling&t=0iqbktb0 404 in 102ms
 GET /api/socket-health 200 in 30ms
 GET /socket.io?EIO=4&transport=polling&t=0ir39vjt 404 in 107ms
 GET /api/socket-health 200 in 30ms
 GET /socket.io?EIO=4&transport=polling&t=0iruuznz 404 in 139ms
 GET /api/socket-health 200 in 36ms
 GET /socket.io?EIO=4&transport=polling&t=0ismrukj 404 in 104ms
 GET /api/socket-health 200 in 26ms
 GET /socket.io?EIO=4&transport=polling&t=0ite9srx 404 in 98ms
 GET /api/socket-health 200 in 27ms
 GET /socket.io?EIO=4&transport=polling&t=0iu6cgb0 404 in 98ms
 GET /api/socket-health 200 in 26ms
 GET /socket.io?EIO=4&transport=polling&t=0iuy29nr 404 in 98ms
 GET /api/socket-health 200 in 36ms
 GET /socket.io?EIO=4&transport=polling&t=0ivq24un 404 in 109ms
 GET /api/socket-health 200 in 36ms
 GET /socket.io?EIO=4&transport=polling&t=0iwhl9qv 404 in 106ms
 GET /api/socket-health 200 in 44ms
 GET /socket.io?EIO=4&transport=polling&t=0ix9szvs 404 in 138ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
 GET /api/socket-health 200 in 72ms
 GET /socket.io?EIO=4&transport=polling&t=0iy2jvji 404 in 122ms
 GET /api/conversations 200 in 220ms
 GET /api/socket-health 200 in 47ms
 GET /socket.io?EIO=4&transport=polling&t=0iytblg9 404 in 197ms
 GET /api/socket-health 200 in 44ms
 GET /socket.io?EIO=4&transport=polling&t=0izl0iyk 404 in 243ms
 GET /api/socket-health 200 in 74ms
 GET /socket.io?EIO=4&transport=polling&t=0j0h8s5z 404 in 158ms
 GET /api/socket-health 200 in 39ms
 GET /socket.io?EIO=4&transport=polling&t=0j14hi1h 404 in 164ms
 GET /api/socket-health 200 in 34ms
 GET /socket.io?EIO=4&transport=polling&t=0j1w1zjo 404 in 125ms
 GET /api/socket-health 200 in 30ms
 GET /socket.io?EIO=4&transport=polling&t=0j2nqk1w 404 in 108ms
 GET /api/socket-health 200 in 38ms
 GET /socket.io?EIO=4&transport=polling&t=0j3fqilh 404 in 102ms
 GET /api/socket-health 200 in 32ms
 GET /socket.io?EIO=4&transport=polling&t=0j47h3vw 404 in 115ms
 GET /api/socket-health 200 in 30ms
 GET /socket.io?EIO=4&transport=polling&t=0j4z82lc 404 in 110ms
 GET /api/socket-health 200 in 33ms
 GET /socket.io?EIO=4&transport=polling&t=0j5r1rw5 404 in 110ms
 GET /api/socket-health 200 in 31ms
 GET /socket.io?EIO=4&transport=polling&t=0j6irnwi 404 in 111ms
 GET /api/socket-health 200 in 34ms
 GET /socket.io?EIO=4&transport=polling&t=0j7ai51h 404 in 100ms
 GET /api/socket-health 200 in 28ms
 GET /socket.io?EIO=4&transport=polling&t=0j823kwq 404 in 99ms
 GET /api/socket-health 200 in 48ms
=== FRIEND REQUEST GET START ===
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
Request type: received User: sayantan2@gmail.com
âœ… Database connected
âœ… Current user found: {
  id: new ObjectId('6901f85f42c5d010fa811206'),
  email: 'sayantan2@gmail.com',
  friendRequestsCount: 0,
  sentRequestsCount: 1
}
Processing received requests...
Raw friendRequests: []
Processed receivedRequests: []
Populating sender details...
Final populated requests: []
=== FRIEND REQUEST GET END (received) ===
 GET /api/friends/request?type=received 200 in 136ms
=== FRIEND REQUEST GET START ===
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
Request type: sent User: sayantan2@gmail.com
âœ… Database connected
 GET /socket.io?EIO=4&transport=polling&t=0j8uqr3q 404 in 124ms
âœ… Current user found: {
  id: new ObjectId('6901f85f42c5d010fa811206'),
  email: 'sayantan2@gmail.com',
  friendRequestsCount: 0,
  sentRequestsCount: 1
}
Processing sent requests...
Raw sentRequests: [
  {
    from: new ObjectId('6901f85f42c5d010fa811206'),
    fromName: 'sayantan2',
    to: new ObjectId('6905adf16a22b7843b006183'),
    toName: 'sayantan3',
    status: 'pending',
    _id: new ObjectId('6905cdce14ad0d0f020b3985'),
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
Filtering sent request: { status: 'pending', to: new ObjectId('6905adf16a22b7843b006183') }
Mapping sent request: {
  from: new ObjectId('6901f85f42c5d010fa811206'),
  fromName: 'sayantan2',
  to: new ObjectId('6905adf16a22b7843b006183'),
  toName: 'sayantan3',
  status: 'pending',
  _id: new ObjectId('6905cdce14ad0d0f020b3985'),
  createdAt: 2025-11-01T09:07:26.707Z,
  updatedAt: 2025-11-01T09:07:26.707Z
}
Processed sentRequests: [
  {
    id: '6905cdce14ad0d0f020b3985',
    to: {
      id: '6905adf16a22b7843b006183',
      username: 'sayantan3',
      email: '',
      profilePicture: null
    },
    status: 'pending',
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
Populating recipient details...
Looking up recipient: 6905adf16a22b7843b006183
Found recipient: sayantan3
Final populated sent requests: [
  {
    id: '6905cdce14ad0d0f020b3985',
    to: {
      id: '6905adf16a22b7843b006183',
      username: 'sayantan3',
      email: 'sayantan3@gmail.com',
      profilePicture: undefined
    },
    status: 'pending',
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
=== FRIEND REQUEST GET END (sent) ===
 GET /api/friends/request?type=sent 200 in 123ms
 GET /api/socket-health 200 in 26ms
 GET /socket.io?EIO=4&transport=polling&t=0j9luixm 404 in 94ms
 GET /api/socket-health 200 in 34ms
 GET /socket.io?EIO=4&transport=polling&t=0jadwr2k 404 in 100ms
 GET /api/socket-health 200 in 27ms
 GET /socket.io?EIO=4&transport=polling&t=0jb5cfoh 404 in 100ms
 GET /api/socket-health 200 in 27ms
 GET /socket.io?EIO=4&transport=polling&t=0jbx5nu0 404 in 97ms
 GET /api/socket-health 200 in 30ms
 GET /socket.io?EIO=4&transport=polling&t=0jcp8hqj 404 in 101ms
 GET /api/socket-health 200 in 38ms
 GET /socket.io?EIO=4&transport=polling&t=0jdh20xn 404 in 102ms
 GET /api/socket-health 200 in 28ms
 GET /socket.io?EIO=4&transport=polling&t=0je8kd72 404 in 103ms
 GET /api/socket-health 200 in 23ms
 GET /socket.io?EIO=4&transport=polling&t=0jf05yv6 404 in 94ms
 GET /api/socket-health 200 in 27ms
 GET /socket.io?EIO=4&transport=polling&t=0jfrz3yv 404 in 98ms
 GET /api/socket-health 200 in 29ms
 GET /socket.io?EIO=4&transport=polling&t=0jgjyunl 404 in 110ms
 GET /api/socket-health 200 in 34ms
 GET /socket.io?EIO=4&transport=polling&t=0jhbsazk 404 in 95ms
 GET /api/socket-health 200 in 26ms
 GET /socket.io?EIO=4&transport=polling&t=0ji3depv 404 in 91ms
 GET /api/socket-health 200 in 29ms
 GET /socket.io?EIO=4&transport=polling&t=0jiv1vrl 404 in 93ms
 GET /api/socket-health 200 in 30ms
 GET /socket.io?EIO=4&transport=polling&t=0jjmsf4f 404 in 104ms
 GET /api/socket-health 200 in 40ms
 GET /socket.io?EIO=4&transport=polling&t=0jkf4p5x 404 in 106ms
 GET /api/socket-health 200 in 30ms
 GET /socket.io?EIO=4&transport=polling&t=0jl6iu4z 404 in 105ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
 GET /api/socket-health 200 in 64ms
 GET /socket.io?EIO=4&transport=polling&t=0jlz9goa 404 in 111ms
 GET /api/conversations 200 in 214ms
 GET /api/socket-health 200 in 30ms
 GET /socket.io?EIO=4&transport=polling&t=0jmpwts3 404 in 110ms
 GET /api/socket-health 200 in 33ms
 GET /socket.io?EIO=4&transport=polling&t=0jni2m2x 404 in 115ms
 GET /api/socket-health 200 in 33ms
 GET /socket.io?EIO=4&transport=polling&t=0jo9o8th 404 in 124ms
 GET /api/socket-health 200 in 27ms
 GET /socket.io?EIO=4&transport=polling&t=0jp15l9x 404 in 113ms
 GET /api/socket-health 200 in 37ms
 GET /socket.io?EIO=4&transport=polling&t=0jpt5y86 404 in 102ms
 GET /api/socket-health 200 in 29ms
 GET /socket.io?EIO=4&transport=polling&t=0jqko3bv 404 in 104ms
 GET /api/socket-health 200 in 37ms
 GET /socket.io?EIO=4&transport=polling&t=0jrcq8yj 404 in 100ms
 GET /api/socket-health 200 in 34ms
 GET /socket.io?EIO=4&transport=polling&t=0js4fo0g 404 in 110ms
 GET /api/socket-health 200 in 36ms
 GET /socket.io?EIO=4&transport=polling&t=0jsw90st 404 in 105ms
 GET /api/socket-health 200 in 27ms
 GET /socket.io?EIO=4&transport=polling&t=0jto20cx 404 in 106ms
 GET /api/socket-health 200 in 76ms
 GET /socket.io?EIO=4&transport=polling&t=0juh8qte 404 in 113ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
=== FRIEND REQUEST GET START ===
 GET /api/socket-health 200 in 113ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
Request type: received User: sayantan2@gmail.com
âœ… Database connected
 GET /socket.io?EIO=4&transport=polling&t=0jvajymm 404 in 115ms
 POST /api/users/heartbeat 200 in 336ms
 GET /api/friends 200 in 589ms
âœ… Current user found: {
  id: new ObjectId('6901f85f42c5d010fa811206'),
  email: 'sayantan2@gmail.com',
  friendRequestsCount: 0,
  sentRequestsCount: 1
}
Processing received requests...
Raw friendRequests: []
Processed receivedRequests: []
Populating sender details...
Final populated requests: []
=== FRIEND REQUEST GET END (received) ===
 GET /api/friends/request?type=received 200 in 593ms
=== FRIEND REQUEST GET START ===
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
Request type: sent User: sayantan2@gmail.com
âœ… Database connected
âœ… Current user found: {
  id: new ObjectId('6901f85f42c5d010fa811206'),
  email: 'sayantan2@gmail.com',
  friendRequestsCount: 0,
  sentRequestsCount: 1
}
Processing sent requests...
Raw sentRequests: [
  {
    from: new ObjectId('6901f85f42c5d010fa811206'),
    fromName: 'sayantan2',
    to: new ObjectId('6905adf16a22b7843b006183'),
    toName: 'sayantan3',
    status: 'pending',
    _id: new ObjectId('6905cdce14ad0d0f020b3985'),
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
Filtering sent request: { status: 'pending', to: new ObjectId('6905adf16a22b7843b006183') }
Mapping sent request: {
  from: new ObjectId('6901f85f42c5d010fa811206'),
  fromName: 'sayantan2',
  to: new ObjectId('6905adf16a22b7843b006183'),
  toName: 'sayantan3',
  status: 'pending',
  _id: new ObjectId('6905cdce14ad0d0f020b3985'),
  createdAt: 2025-11-01T09:07:26.707Z,
  updatedAt: 2025-11-01T09:07:26.707Z
}
Processed sentRequests: [
  {
    id: '6905cdce14ad0d0f020b3985',
    to: {
      id: '6905adf16a22b7843b006183',
      username: 'sayantan3',
      email: '',
      profilePicture: null
    },
    status: 'pending',
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
Populating recipient details...
Looking up recipient: 6905adf16a22b7843b006183
Found recipient: sayantan3
Final populated sent requests: [
  {
    id: '6905cdce14ad0d0f020b3985',
    to: {
      id: '6905adf16a22b7843b006183',
      username: 'sayantan3',
      email: 'sayantan3@gmail.com',
      profilePicture: undefined
    },
    status: 'pending',
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
=== FRIEND REQUEST GET END (sent) ===
 GET /api/friends/request?type=sent 200 in 145ms
 GET /api/socket-health 200 in 30ms
 GET /socket.io?EIO=4&transport=polling&t=0jvziii0 404 in 128ms
 GET /api/socket-health 200 in 35ms
 GET /socket.io?EIO=4&transport=polling&t=0jwrc121 404 in 115ms
 GET /api/socket-health 200 in 29ms
 GET /socket.io?EIO=4&transport=polling&t=0jxj1b1b 404 in 135ms
 GET /api/socket-health 200 in 35ms
 GET /socket.io?EIO=4&transport=polling&t=0jyatfb7 404 in 122ms
 GET /api/socket-health 200 in 28ms
 GET /socket.io?EIO=4&transport=polling&t=0jz2e0yz 404 in 99ms
 GET /api/socket-health 200 in 39ms
 GET /socket.io?EIO=4&transport=polling&t=0jzvcbyu 404 in 126ms
 GET /api/socket-health 200 in 31ms
 GET /socket.io?EIO=4&transport=polling&t=0k0m5wg3 404 in 99ms
 GET /api/socket-health 200 in 35ms
 GET /socket.io?EIO=4&transport=polling&t=0k1e24m7 404 in 114ms
 GET /api/socket-health 200 in 45ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
 GET /api/auth/session 200 in 65ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
=== FRIEND REQUEST GET START ===
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
Request type: received User: sayantan2@gmail.com
âœ… Database connected
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
 GET /socket.io?EIO=4&transport=polling&t=0k265761 404 in 240ms
âœ… Current user found: {
  id: new ObjectId('6901f85f42c5d010fa811206'),
  email: 'sayantan2@gmail.com',
  friendRequestsCount: 0,
  sentRequestsCount: 1
}
Processing received requests...
Raw friendRequests: []
Processed receivedRequests: []
Populating sender details...
Final populated requests: []
=== FRIEND REQUEST GET END (received) ===
 GET /api/friends/request?type=received 200 in 158ms
 GET /api/random-chat/queue 200 in 176ms
 GET /api/friends 200 in 192ms
=== FRIEND REQUEST GET START ===
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
Request type: sent User: sayantan2@gmail.com
âœ… Database connected
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
âœ… Current user found: {
  id: new ObjectId('6901f85f42c5d010fa811206'),
  email: 'sayantan2@gmail.com',
  friendRequestsCount: 0,
  sentRequestsCount: 1
}
Processing sent requests...
Raw sentRequests: [
  {
    from: new ObjectId('6901f85f42c5d010fa811206'),
    fromName: 'sayantan2',
    to: new ObjectId('6905adf16a22b7843b006183'),
    toName: 'sayantan3',
    status: 'pending',
    _id: new ObjectId('6905cdce14ad0d0f020b3985'),
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
Filtering sent request: { status: 'pending', to: new ObjectId('6905adf16a22b7843b006183') }
Mapping sent request: {
  from: new ObjectId('6901f85f42c5d010fa811206'),
  fromName: 'sayantan2',
  to: new ObjectId('6905adf16a22b7843b006183'),
  toName: 'sayantan3',
  status: 'pending',
  _id: new ObjectId('6905cdce14ad0d0f020b3985'),
  createdAt: 2025-11-01T09:07:26.707Z,
  updatedAt: 2025-11-01T09:07:26.707Z
}
Processed sentRequests: [
  {
    id: '6905cdce14ad0d0f020b3985',
    to: {
      id: '6905adf16a22b7843b006183',
      username: 'sayantan3',
      email: '',
      profilePicture: null
    },
    status: 'pending',
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
Populating recipient details...
Looking up recipient: 6905adf16a22b7843b006183
Found recipient: sayantan3
Final populated sent requests: [
  {
    id: '6905cdce14ad0d0f020b3985',
    to: {
      id: '6905adf16a22b7843b006183',
      username: 'sayantan3',
      email: 'sayantan3@gmail.com',
      profilePicture: undefined
    },
    status: 'pending',
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
=== FRIEND REQUEST GET END (sent) ===
 GET /api/friends/request?type=sent 200 in 131ms
 GET /api/random-chat/session 200 in 158ms
 GET /api/socket-health 200 in 34ms
 GET /api/users/me 200 in 1009ms
 GET /socket.io?EIO=4&transport=polling&t=0k2ykvha 404 in 146ms
 POST /api/users/heartbeat 200 in 1060ms
 GET /api/socket-health 200 in 32ms
 GET /socket.io?EIO=4&transport=polling&t=0k3pb8vw 404 in 135ms
 GET /api/socket-health 200 in 31ms
 GET /socket.io?EIO=4&transport=polling&t=0k4h1s7n 404 in 112ms
 GET /api/socket-health 200 in 34ms
 GET /socket.io?EIO=4&transport=polling&t=0k58zfna 404 in 97ms
 GET /api/socket-health 200 in 44ms
 GET /socket.io?EIO=4&transport=polling&t=0k60yvt0 404 in 109ms
 GET /api/socket-health 200 in 32ms
 GET /socket.io?EIO=4&transport=polling&t=0k6sft16 404 in 113ms
 GET /api/socket-health 200 in 33ms
 GET /socket.io?EIO=4&transport=polling&t=0k7k7cq3 404 in 110ms
 GET /api/socket-health 200 in 27ms
 GET /socket.io?EIO=4&transport=polling&t=0k8bp9ui 404 in 115ms
 GET /api/socket-health 200 in 39ms
 GET /socket.io?EIO=4&transport=polling&t=0k93s8gn 404 in 126ms
 GET /api/socket-health 200 in 33ms
 GET /socket.io?EIO=4&transport=polling&t=0k9vcn6p 404 in 95ms
 GET /api/socket-health 200 in 37ms
 GET /socket.io?EIO=4&transport=polling&t=0kan84dg 404 in 110ms
 GET /api/socket-health 200 in 27ms
 GET /socket.io?EIO=4&transport=polling&t=0kbeoz31 404 in 112ms
 GET /api/socket-health 200 in 29ms
 GET /socket.io?EIO=4&transport=polling&t=0kc6h350 404 in 97ms
 GET /api/socket-health 200 in 33ms
 GET /socket.io?EIO=4&transport=polling&t=0kcyg6jr 404 in 99ms
 GET /api/socket-health 200 in 51ms
 GET /socket.io?EIO=4&transport=polling&t=0kdqojjj 404 in 108ms
 GET /api/socket-health 200 in 26ms
 GET /socket.io?EIO=4&transport=polling&t=0kehvjt3 404 in 107ms
 GET /api/socket-health 200 in 27ms
 GET /socket.io?EIO=4&transport=polling&t=0kf9tw4i 404 in 102ms
 GET /api/socket-health 200 in 33ms
 GET /socket.io?EIO=4&transport=polling&t=0kg1qc3o 404 in 99ms
 GET /api/socket-health 200 in 33ms
 GET /socket.io?EIO=4&transport=polling&t=0kgtic57 404 in 99ms
 GET /api/socket-health 200 in 25ms
 GET /socket.io?EIO=4&transport=polling&t=0khkz0k2 404 in 93ms
 GET /api/socket-health 200 in 28ms
 GET /socket.io?EIO=4&transport=polling&t=0kicrtgd 404 in 100ms
 GET /api/socket-health 200 in 32ms
 GET /socket.io?EIO=4&transport=polling&t=0kj4j0yl 404 in 91ms
 GET /api/socket-health 200 in 39ms
 GET /socket.io?EIO=4&transport=polling&t=0kjwouud 404 in 129ms
 GET /api/socket-health 200 in 28ms
 GET /socket.io?EIO=4&transport=polling&t=0kko6n2n 404 in 107ms
 GET /api/socket-health 200 in 26ms
 GET /socket.io?EIO=4&transport=polling&t=0klfxpif 404 in 100ms
 GET /api/socket-health 200 in 27ms
 GET /socket.io?EIO=4&transport=polling&t=0km7o42p 404 in 95ms
 GET /api/socket-health 200 in 37ms
 GET /socket.io?EIO=4&transport=polling&t=0kmzyhoi 404 in 99ms
 GET /api/socket-health 200 in 26ms
 GET /socket.io?EIO=4&transport=polling&t=0knrbu02 404 in 100ms
 GET /api/socket-health 200 in 26ms
 GET /socket.io?EIO=4&transport=polling&t=0koj340a 404 in 94ms
 GET /api/socket-health 200 in 26ms
 GET /socket.io?EIO=4&transport=polling&t=0kparrzt 404 in 99ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
 GET /api/socket-health 200 in 56ms
 GET /socket.io?EIO=4&transport=polling&t=0kq3c337 404 in 91ms
 POST /api/users/heartbeat 200 in 236ms
 GET /api/socket-health 200 in 69ms
=== FRIEND REQUEST GET START ===
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
Request type: received User: sayantan2@gmail.com
âœ… Database connected
âœ… Current user found: {
  id: new ObjectId('6901f85f42c5d010fa811206'),
  email: 'sayantan2@gmail.com',
  friendRequestsCount: 0,
  sentRequestsCount: 1
}
Processing received requests...
Raw friendRequests: []
Processed receivedRequests: []
Populating sender details...
Final populated requests: []
=== FRIEND REQUEST GET END (received) ===
 GET /api/friends/request?type=received 200 in 241ms
=== FRIEND REQUEST GET START ===
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
Request type: sent User: sayantan2@gmail.com
âœ… Database connected
 GET /socket.io?EIO=4&transport=polling&t=0kqvjoma 404 in 219ms
âœ… Current user found: {
  id: new ObjectId('6901f85f42c5d010fa811206'),
  email: 'sayantan2@gmail.com',
  friendRequestsCount: 0,
  sentRequestsCount: 1
}
Processing sent requests...
Raw sentRequests: [
  {
    from: new ObjectId('6901f85f42c5d010fa811206'),
    fromName: 'sayantan2',
    to: new ObjectId('6905adf16a22b7843b006183'),
    toName: 'sayantan3',
    status: 'pending',
    _id: new ObjectId('6905cdce14ad0d0f020b3985'),
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
Filtering sent request: { status: 'pending', to: new ObjectId('6905adf16a22b7843b006183') }
Mapping sent request: {
  from: new ObjectId('6901f85f42c5d010fa811206'),
  fromName: 'sayantan2',
  to: new ObjectId('6905adf16a22b7843b006183'),
  toName: 'sayantan3',
  status: 'pending',
  _id: new ObjectId('6905cdce14ad0d0f020b3985'),
  createdAt: 2025-11-01T09:07:26.707Z,
  updatedAt: 2025-11-01T09:07:26.707Z
}
Processed sentRequests: [
  {
    id: '6905cdce14ad0d0f020b3985',
    to: {
      id: '6905adf16a22b7843b006183',
      username: 'sayantan3',
      email: '',
      profilePicture: null
    },
    status: 'pending',
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
Populating recipient details...
Looking up recipient: 6905adf16a22b7843b006183
Found recipient: sayantan3
Final populated sent requests: [
  {
    id: '6905cdce14ad0d0f020b3985',
    to: {
      id: '6905adf16a22b7843b006183',
      username: 'sayantan3',
      email: 'sayantan3@gmail.com',
      profilePicture: undefined
    },
    status: 'pending',
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
=== FRIEND REQUEST GET END (sent) ===
 GET /api/friends/request?type=sent 200 in 132ms
 GET /api/conversations 200 in 587ms
 GET /api/socket-health 200 in 41ms
 GET /socket.io?EIO=4&transport=polling&t=0krmfqtt 404 in 120ms
 GET /api/socket-health 200 in 28ms
 GET /socket.io?EIO=4&transport=polling&t=0ksdt5r1 404 in 102ms
 GET /api/socket-health 200 in 31ms
 GET /socket.io?EIO=4&transport=polling&t=0kt5o0u1 404 in 114ms
 GET /api/socket-health 200 in 36ms
 GET /socket.io?EIO=4&transport=polling&t=0ktxx7gz 404 in 99ms
 GET /api/socket-health 200 in 27ms
 GET /socket.io?EIO=4&transport=polling&t=0kup5ohc 404 in 95ms
 GET /api/socket-health 200 in 32ms
 GET /socket.io?EIO=4&transport=polling&t=0kvh1s1j 404 in 97ms
 GET /api/socket-health 200 in 32ms
 GET /socket.io?EIO=4&transport=polling&t=0kw8svp2 404 in 102ms
 GET /api/socket-health 200 in 26ms
 GET /socket.io?EIO=4&transport=polling&t=0kx0qa90 404 in 99ms
 GET /api/socket-health 200 in 26ms
 GET /socket.io?EIO=4&transport=polling&t=0kxs4cu3 404 in 101ms
 GET /api/socket-health 200 in 35ms
 GET /socket.io?EIO=4&transport=polling&t=0kyk9l0i 404 in 96ms
 GET /api/socket-health 200 in 26ms
 GET /socket.io?EIO=4&transport=polling&t=0kzbs8v1 404 in 100ms
 GET /api/socket-health 200 in 25ms
 GET /socket.io?EIO=4&transport=polling&t=0l03lwej 404 in 104ms
 GET /api/socket-health 200 in 27ms
 GET /socket.io?EIO=4&transport=polling&t=0l0vk1s7 404 in 118ms
 GET /api/socket-health 200 in 28ms
 GET /socket.io?EIO=4&transport=polling&t=0l1nd8at 404 in 95ms
 GET /api/socket-health 200 in 34ms
 GET /socket.io?EIO=4&transport=polling&t=0l2fexmt 404 in 102ms
 GET /api/socket-health 200 in 25ms
 GET /socket.io?EIO=4&transport=polling&t=0l36l1p8 404 in 98ms
 GET /api/socket-health 200 in 28ms
 GET /socket.io?EIO=4&transport=polling&t=0l3yho3h 404 in 98ms
 GET /api/socket-health 200 in 28ms
 GET /socket.io?EIO=4&transport=polling&t=0l4q87fd 404 in 95ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
=== FRIEND REQUEST GET START ===
 GET /api/socket-health 200 in 81ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
Request type: received User: sayantan2@gmail.com
âœ… Database connected
âœ… Current user found: {
  id: new ObjectId('6901f85f42c5d010fa811206'),
  email: 'sayantan2@gmail.com',
  friendRequestsCount: 0,
  sentRequestsCount: 1
}
Processing received requests...
Raw friendRequests: []
Processed receivedRequests: []
Populating sender details...
Final populated requests: []
=== FRIEND REQUEST GET END (received) ===
 GET /api/friends/request?type=received 200 in 175ms
=== FRIEND REQUEST GET START ===
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
Request type: sent User: sayantan2@gmail.com
âœ… Database connected
 GET /api/friends 200 in 221ms
 GET /socket.io?EIO=4&transport=polling&t=0l5k3nhy 404 in 127ms
âœ… Current user found: {
  id: new ObjectId('6901f85f42c5d010fa811206'),
  email: 'sayantan2@gmail.com',
  friendRequestsCount: 0,
  sentRequestsCount: 1
}
Processing sent requests...
Raw sentRequests: [
  {
    from: new ObjectId('6901f85f42c5d010fa811206'),
    fromName: 'sayantan2',
    to: new ObjectId('6905adf16a22b7843b006183'),
    toName: 'sayantan3',
    status: 'pending',
    _id: new ObjectId('6905cdce14ad0d0f020b3985'),
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
Filtering sent request: { status: 'pending', to: new ObjectId('6905adf16a22b7843b006183') }
Mapping sent request: {
  from: new ObjectId('6901f85f42c5d010fa811206'),
  fromName: 'sayantan2',
  to: new ObjectId('6905adf16a22b7843b006183'),
  toName: 'sayantan3',
  status: 'pending',
  _id: new ObjectId('6905cdce14ad0d0f020b3985'),
  createdAt: 2025-11-01T09:07:26.707Z,
  updatedAt: 2025-11-01T09:07:26.707Z
}
Processed sentRequests: [
  {
    id: '6905cdce14ad0d0f020b3985',
    to: {
      id: '6905adf16a22b7843b006183',
      username: 'sayantan3',
      email: '',
      profilePicture: null
    },
    status: 'pending',
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
Populating recipient details...
Looking up recipient: 6905adf16a22b7843b006183
Found recipient: sayantan3
Final populated sent requests: [
  {
    id: '6905cdce14ad0d0f020b3985',
    to: {
      id: '6905adf16a22b7843b006183',
      username: 'sayantan3',
      email: 'sayantan3@gmail.com',
      profilePicture: undefined
    },
    status: 'pending',
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
=== FRIEND REQUEST GET END (sent) ===
 GET /api/friends/request?type=sent 200 in 137ms
 GET /api/socket-health 200 in 33ms
 GET /socket.io?EIO=4&transport=polling&t=0l6a8583 404 in 94ms
 GET /api/socket-health 200 in 26ms
 GET /socket.io?EIO=4&transport=polling&t=0l71pwxu 404 in 115ms
 GET /api/socket-health 200 in 28ms
 GET /socket.io?EIO=4&transport=polling&t=0l7tlcsn 404 in 97ms
 GET /api/socket-health 200 in 30ms
 GET /socket.io?EIO=4&transport=polling&t=0l8lfrqy 404 in 99ms
 GET /api/socket-health 200 in 25ms
 GET /socket.io?EIO=4&transport=polling&t=0l9d4ybg 404 in 92ms
 GET /api/socket-health 200 in 30ms
 GET /socket.io?EIO=4&transport=polling&t=0la5vtqn 404 in 107ms
 GET /api/socket-health 200 in 37ms
 GET /socket.io?EIO=4&transport=polling&t=0lawst34 404 in 104ms
 GET /api/socket-health 200 in 28ms
 GET /socket.io?EIO=4&transport=polling&t=0lboasum 404 in 97ms
 GET /api/socket-health 200 in 27ms
 GET /socket.io?EIO=4&transport=polling&t=0lcg5sj8 404 in 95ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
 GET /api/socket-health 200 in 61ms
 GET /socket.io?EIO=4&transport=polling&t=0ld8v99u 404 in 101ms
 POST /api/users/heartbeat 200 in 260ms
 GET /api/socket-health 200 in 32ms
 GET /socket.io?EIO=4&transport=polling&t=0ldzqf27 404 in 95ms
 GET /api/socket-health 200 in 63ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
 GET /socket.io?EIO=4&transport=polling&t=0lesnusy 404 in 102ms
 GET /api/conversations 200 in 207ms
 GET /api/socket-health 200 in 30ms
 GET /socket.io?EIO=4&transport=polling&t=0lfj8l2q 404 in 123ms
 GET /api/socket-health 200 in 33ms
 GET /socket.io?EIO=4&transport=polling&t=0lgb9mhb 404 in 104ms
 GET /api/socket-health 200 in 26ms
 GET /socket.io?EIO=4&transport=polling&t=0lh2u79k 404 in 102ms
 GET /api/socket-health 200 in 35ms
 GET /socket.io?EIO=4&transport=polling&t=0lhuu84l 404 in 104ms
 GET /api/socket-health 200 in 49ms
 GET /socket.io?EIO=4&transport=polling&t=0limzvsu 404 in 115ms
 GET /api/socket-health 200 in 26ms
 GET /socket.io?EIO=4&transport=polling&t=0lje704u 404 in 95ms
 GET /api/socket-health 200 in 28ms
 GET /socket.io?EIO=4&transport=polling&t=0lk5x83g 404 in 118ms
 GET /api/socket-health 200 in 40ms
 GET /socket.io?EIO=4&transport=polling&t=0lky18i6 404 in 122ms
 GET /api/socket-health 200 in 33ms
 GET /socket.io?EIO=4&transport=polling&t=0llpkkxf 404 in 98ms
 GET /api/socket-health 200 in 26ms
 GET /socket.io?EIO=4&transport=polling&t=0lmh5kcp 404 in 106ms
 GET /api/socket-health 200 in 27ms
 GET /socket.io?EIO=4&transport=polling&t=0ln9359t 404 in 97ms
 GET /api/socket-health 200 in 28ms
 GET /socket.io?EIO=4&transport=polling&t=0lo10f7y 404 in 103ms
 GET /api/socket-health 200 in 41ms
 GET /socket.io?EIO=4&transport=polling&t=0lot464k 404 in 109ms
 GET /api/socket-health 200 in 28ms
 GET /socket.io?EIO=4&transport=polling&t=0lpkkmwq 404 in 117ms
 GET /api/socket-health 200 in 27ms
 GET /socket.io?EIO=4&transport=polling&t=0lqbybjn 404 in 97ms
 GET /api/socket-health 200 in 30ms
 GET /socket.io?EIO=4&transport=polling&t=0lr44xef 404 in 108ms
 GET /api/socket-health 200 in 26ms
 GET /socket.io?EIO=4&transport=polling&t=0lrvss0p 404 in 94ms
 GET /api/socket-health 200 in 34ms
 GET /socket.io?EIO=4&transport=polling&t=0lsnqtsu 404 in 108ms
 GET /api/socket-health 200 in 43ms
=== FRIEND REQUEST GET START ===
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
Request type: received User: sayantan2@gmail.com
âœ… Database connected
âœ… Current user found: {
  id: new ObjectId('6901f85f42c5d010fa811206'),
  email: 'sayantan2@gmail.com',
  friendRequestsCount: 0,
  sentRequestsCount: 1
}
Processing received requests...
Raw friendRequests: []
Processed receivedRequests: []
Populating sender details...
Final populated requests: []
=== FRIEND REQUEST GET END (received) ===
 GET /api/friends/request?type=received 200 in 141ms
=== FRIEND REQUEST GET START ===
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
Request type: sent User: sayantan2@gmail.com
âœ… Database connected
 GET /socket.io?EIO=4&transport=polling&t=0ltfnryp 404 in 128ms
âœ… Current user found: {
  id: new ObjectId('6901f85f42c5d010fa811206'),
  email: 'sayantan2@gmail.com',
  friendRequestsCount: 0,
  sentRequestsCount: 1
}
Processing sent requests...
Raw sentRequests: [
  {
    from: new ObjectId('6901f85f42c5d010fa811206'),
    fromName: 'sayantan2',
    to: new ObjectId('6905adf16a22b7843b006183'),
    toName: 'sayantan3',
    status: 'pending',
    _id: new ObjectId('6905cdce14ad0d0f020b3985'),
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
Filtering sent request: { status: 'pending', to: new ObjectId('6905adf16a22b7843b006183') }
Mapping sent request: {
  from: new ObjectId('6901f85f42c5d010fa811206'),
  fromName: 'sayantan2',
  to: new ObjectId('6905adf16a22b7843b006183'),
  toName: 'sayantan3',
  status: 'pending',
  _id: new ObjectId('6905cdce14ad0d0f020b3985'),
  createdAt: 2025-11-01T09:07:26.707Z,
  updatedAt: 2025-11-01T09:07:26.707Z
}
Processed sentRequests: [
  {
    id: '6905cdce14ad0d0f020b3985',
    to: {
      id: '6905adf16a22b7843b006183',
      username: 'sayantan3',
      email: '',
      profilePicture: null
    },
    status: 'pending',
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
Populating recipient details...
Looking up recipient: 6905adf16a22b7843b006183
Found recipient: sayantan3
Final populated sent requests: [
  {
    id: '6905cdce14ad0d0f020b3985',
    to: {
      id: '6905adf16a22b7843b006183',
      username: 'sayantan3',
      email: 'sayantan3@gmail.com',
      profilePicture: undefined
    },
    status: 'pending',
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
=== FRIEND REQUEST GET END (sent) ===
 GET /api/friends/request?type=sent 200 in 132ms
 GET /api/socket-health 200 in 27ms
 GET /socket.io?EIO=4&transport=polling&t=0lu6y8lo 404 in 102ms
 GET /api/socket-health 200 in 27ms
 GET /socket.io?EIO=4&transport=polling&t=0luyrc0x 404 in 94ms
 GET /api/socket-health 200 in 33ms
 GET /socket.io?EIO=4&transport=polling&t=0lvqnq1p 404 in 97ms
 GET /api/socket-health 200 in 27ms
 GET /socket.io?EIO=4&transport=polling&t=0lwi6sua 404 in 96ms
 GET /api/socket-health 200 in 32ms
 GET /socket.io?EIO=4&transport=polling&t=0lxb2z3n 404 in 116ms
 GET /api/socket-health 200 in 27ms
 GET /socket.io?EIO=4&transport=polling&t=0ly23l1l 404 in 137ms
 GET /api/socket-health 200 in 32ms
 GET /socket.io?EIO=4&transport=polling&t=0lytza2x 404 in 97ms
 GET /api/socket-health 200 in 26ms
 GET /socket.io?EIO=4&transport=polling&t=0lzlmkq9 404 in 102ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
 GET /api/socket-health 200 in 56ms
 GET /socket.io?EIO=4&transport=polling&t=0m0dxojb 404 in 103ms
 POST /api/users/heartbeat 200 in 250ms
 GET /api/socket-health 200 in 28ms
 GET /socket.io?EIO=4&transport=polling&t=0m1571ln 404 in 93ms
 GET /api/socket-health 200 in 33ms
 GET /socket.io?EIO=4&transport=polling&t=0m1x42hr 404 in 95ms
 GET /api/socket-health 200 in 49ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
 GET /socket.io?EIO=4&transport=polling&t=0m2pa5vn 404 in 127ms
 GET /api/conversations 200 in 213ms
 GET /api/socket-health 200 in 41ms
 GET /socket.io?EIO=4&transport=polling&t=0m3gtv6h 404 in 94ms
 GET /api/socket-health 200 in 30ms
 GET /socket.io?EIO=4&transport=polling&t=0m487op4 404 in 103ms
 GET /api/socket-health 200 in 29ms
 GET /socket.io?EIO=4&transport=polling&t=0m4zxmjn 404 in 99ms
 GET /api/socket-health 200 in 26ms
 GET /socket.io?EIO=4&transport=polling&t=0m5rpqbu 404 in 91ms
 GET /api/socket-health 200 in 35ms
 GET /socket.io?EIO=4&transport=polling&t=0m6jrcee 404 in 101ms
 GET /api/socket-health 200 in 35ms
 GET /socket.io?EIO=4&transport=polling&t=0m7bs94j 404 in 132ms
 GET /api/socket-health 200 in 32ms
 GET /socket.io?EIO=4&transport=polling&t=0m83cx1z 404 in 112ms
 GET /api/socket-health 200 in 27ms
 GET /socket.io?EIO=4&transport=polling&t=0m8usur0 404 in 101ms
 GET /api/socket-health 200 in 69ms
 GET /socket.io?EIO=4&transport=polling&t=0m9nzr2s 404 in 279ms
 GET /api/socket-health 200 in 44ms
 GET /socket.io?EIO=4&transport=polling&t=0mafjqzv 404 in 306ms
 GET /api/socket-health 200 in 64ms
 GET /socket.io?EIO=4&transport=polling&t=0mb7ew50 404 in 180ms
 GET /api/socket-health 200 in 46ms
 GET /socket.io?EIO=4&transport=polling&t=0mbydamc 404 in 125ms
 GET /api/socket-health 200 in 36ms
 GET /socket.io?EIO=4&transport=polling&t=0mcq4s8m 404 in 142ms
 GET /api/socket-health 200 in 29ms
 GET /socket.io?EIO=4&transport=polling&t=0mdhohvf 404 in 107ms
 GET /api/socket-health 200 in 27ms
 GET /socket.io?EIO=4&transport=polling&t=0me9ef0d 404 in 99ms
 GET /api/socket-health 200 in 31ms
 GET /socket.io?EIO=4&transport=polling&t=0mf18nj9 404 in 107ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
=== FRIEND REQUEST GET START ===
 GET /api/socket-health 200 in 80ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
Request type: received User: sayantan2@gmail.com
âœ… Database connected
 GET /socket.io?EIO=4&transport=polling&t=0mfuptjj 404 in 105ms
 GET /api/friends 200 in 229ms
âœ… Current user found: {
  id: new ObjectId('6901f85f42c5d010fa811206'),
  email: 'sayantan2@gmail.com',
  friendRequestsCount: 0,
  sentRequestsCount: 1
}
Processing received requests...
Raw friendRequests: []
Processed receivedRequests: []
Populating sender details...
Final populated requests: []
=== FRIEND REQUEST GET END (received) ===
 GET /api/friends/request?type=received 200 in 496ms
=== FRIEND REQUEST GET START ===
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
Request type: sent User: sayantan2@gmail.com
âœ… Database connected
âœ… Current user found: {
  id: new ObjectId('6901f85f42c5d010fa811206'),
  email: 'sayantan2@gmail.com',
  friendRequestsCount: 0,
  sentRequestsCount: 1
}
Processing sent requests...
Raw sentRequests: [
  {
    from: new ObjectId('6901f85f42c5d010fa811206'),
    fromName: 'sayantan2',
    to: new ObjectId('6905adf16a22b7843b006183'),
    toName: 'sayantan3',
    status: 'pending',
    _id: new ObjectId('6905cdce14ad0d0f020b3985'),
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
Filtering sent request: { status: 'pending', to: new ObjectId('6905adf16a22b7843b006183') }
Mapping sent request: {
  from: new ObjectId('6901f85f42c5d010fa811206'),
  fromName: 'sayantan2',
  to: new ObjectId('6905adf16a22b7843b006183'),
  toName: 'sayantan3',
  status: 'pending',
  _id: new ObjectId('6905cdce14ad0d0f020b3985'),
  createdAt: 2025-11-01T09:07:26.707Z,
  updatedAt: 2025-11-01T09:07:26.707Z
}
Processed sentRequests: [
  {
    id: '6905cdce14ad0d0f020b3985',
    to: {
      id: '6905adf16a22b7843b006183',
      username: 'sayantan3',
      email: '',
      profilePicture: null
    },
    status: 'pending',
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
Populating recipient details...
Looking up recipient: 6905adf16a22b7843b006183
Found recipient: sayantan3
Final populated sent requests: [
  {
    id: '6905cdce14ad0d0f020b3985',
    to: {
      id: '6905adf16a22b7843b006183',
      username: 'sayantan3',
      email: 'sayantan3@gmail.com',
      profilePicture: undefined
    },
    status: 'pending',
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
=== FRIEND REQUEST GET END (sent) ===
 GET /api/friends/request?type=sent 200 in 133ms
 GET /api/socket-health 200 in 32ms
 GET /socket.io?EIO=4&transport=polling&t=0mgkq63s 404 in 101ms
 GET /api/socket-health 200 in 27ms
 GET /socket.io?EIO=4&transport=polling&t=0mhce2s9 404 in 97ms
 GET /api/socket-health 200 in 26ms
 GET /socket.io?EIO=4&transport=polling&t=0mi422ft 404 in 100ms
 GET /api/socket-health 200 in 27ms
 GET /socket.io?EIO=4&transport=polling&t=0mivvj82 404 in 99ms
 GET /api/socket-health 200 in 35ms
 GET /socket.io?EIO=4&transport=polling&t=0mjnq6u4 404 in 98ms
 GET /api/socket-health 200 in 32ms
 GET /socket.io?EIO=4&transport=polling&t=0mkfw6wk 404 in 109ms
 GET /api/socket-health 200 in 26ms
 GET /socket.io?EIO=4&transport=polling&t=0ml7cxkd 404 in 103ms
 GET /api/socket-health 200 in 29ms
 GET /socket.io?EIO=4&transport=polling&t=0mlz658z 404 in 99ms
 GET /api/socket-health 200 in 29ms
 GET /socket.io?EIO=4&transport=polling&t=0mmqyo7h 404 in 100ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
 GET /api/socket-health 200 in 59ms
 GET /socket.io?EIO=4&transport=polling&t=0mnjh680 404 in 101ms
 POST /api/users/heartbeat 200 in 239ms
 GET /api/socket-health 200 in 28ms
 GET /socket.io?EIO=4&transport=polling&t=0moabn6j 404 in 103ms
 GET /api/socket-health 200 in 34ms
 GET /socket.io?EIO=4&transport=polling&t=0mp2axq3 404 in 95ms
 GET /api/socket-health 200 in 27ms
 GET /socket.io?EIO=4&transport=polling&t=0mptt20r 404 in 104ms
 GET /api/socket-health 200 in 41ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
 GET /socket.io?EIO=4&transport=polling&t=0mqmagrn 404 in 100ms
 GET /api/conversations 200 in 179ms
 GET /api/socket-health 200 in 25ms
 GET /socket.io?EIO=4&transport=polling&t=0mrd8rlm 404 in 98ms
 GET /api/socket-health 200 in 27ms
 GET /socket.io?EIO=4&transport=polling&t=0ms5axmk 404 in 96ms
 GET /api/socket-health 200 in 39ms
 GET /socket.io?EIO=4&transport=polling&t=0msxcs13 404 in 153ms
 GET /api/socket-health 200 in 26ms
 GET /socket.io?EIO=4&transport=polling&t=0mtp013i 404 in 531ms
 GET /api/socket-health 200 in 43ms
 GET /socket.io?EIO=4&transport=polling&t=0mugxua8 404 in 139ms
 GET /api/socket-health 200 in 52ms
 GET /socket.io?EIO=4&transport=polling&t=0mvaru0o 404 in 158ms
 GET /api/socket-health 200 in 32ms
 GET /socket.io?EIO=4&transport=polling&t=0mw0gyyb 404 in 108ms
 GET /api/socket-health 200 in 31ms
 GET /socket.io?EIO=4&transport=polling&t=0mws4xig 404 in 428ms
 GET /api/socket-health 200 in 65ms
 GET /socket.io?EIO=4&transport=polling&t=0mxl3mgz 404 in 294ms
 GET /api/socket-health 200 in 28ms
 GET /socket.io?EIO=4&transport=polling&t=0mybqenr 404 in 480ms
 GET /api/socket-health 200 in 180ms
 GET /socket.io?EIO=4&transport=polling&t=0mza66k8 404 in 143ms
 GET /api/socket-health 200 in 35ms
 GET /socket.io?EIO=4&transport=polling&t=0mzvivzy 404 in 142ms
 GET /api/socket-health 200 in 32ms
 GET /socket.io?EIO=4&transport=polling&t=0n0ms89t 404 in 99ms
 GET /api/socket-health 200 in 34ms
 GET /socket.io?EIO=4&transport=polling&t=0n1ezlx5 404 in 101ms
 GET /api/socket-health 200 in 26ms
 GET /socket.io?EIO=4&transport=polling&t=0n26hx2c 404 in 104ms
 GET /api/socket-health 200 in 33ms
 GET /socket.io?EIO=4&transport=polling&t=0n2yaz2n 404 in 124ms
=== FRIEND REQUEST GET START ===
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
Request type: received User: sayantan2@gmail.com
âœ… Database connected
 GET /api/socket-health 200 in 63ms
âœ… Current user found: {
  id: new ObjectId('6901f85f42c5d010fa811206'),
  email: 'sayantan2@gmail.com',
  friendRequestsCount: 0,
  sentRequestsCount: 1
}
Processing received requests...
Raw friendRequests: []
Processed receivedRequests: []
Populating sender details...
Final populated requests: []
=== FRIEND REQUEST GET END (received) ===
 GET /api/friends/request?type=received 200 in 150ms
=== FRIEND REQUEST GET START ===
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
Request type: sent User: sayantan2@gmail.com
âœ… Database connected
 GET /socket.io?EIO=4&transport=polling&t=0n3quc7z 404 in 144ms
âœ… Current user found: {
  id: new ObjectId('6901f85f42c5d010fa811206'),
  email: 'sayantan2@gmail.com',
  friendRequestsCount: 0,
  sentRequestsCount: 1
}
Processing sent requests...
Raw sentRequests: [
  {
    from: new ObjectId('6901f85f42c5d010fa811206'),
    fromName: 'sayantan2',
    to: new ObjectId('6905adf16a22b7843b006183'),
    toName: 'sayantan3',
    status: 'pending',
    _id: new ObjectId('6905cdce14ad0d0f020b3985'),
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
Filtering sent request: { status: 'pending', to: new ObjectId('6905adf16a22b7843b006183') }
Mapping sent request: {
  from: new ObjectId('6901f85f42c5d010fa811206'),
  fromName: 'sayantan2',
  to: new ObjectId('6905adf16a22b7843b006183'),
  toName: 'sayantan3',
  status: 'pending',
  _id: new ObjectId('6905cdce14ad0d0f020b3985'),
  createdAt: 2025-11-01T09:07:26.707Z,
  updatedAt: 2025-11-01T09:07:26.707Z
}
Processed sentRequests: [
  {
    id: '6905cdce14ad0d0f020b3985',
    to: {
      id: '6905adf16a22b7843b006183',
      username: 'sayantan3',
      email: '',
      profilePicture: null
    },
    status: 'pending',
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
Populating recipient details...
Looking up recipient: 6905adf16a22b7843b006183
Found recipient: sayantan3
Final populated sent requests: [
  {
    id: '6905cdce14ad0d0f020b3985',
    to: {
      id: '6905adf16a22b7843b006183',
      username: 'sayantan3',
      email: 'sayantan3@gmail.com',
      profilePicture: undefined
    },
    status: 'pending',
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
=== FRIEND REQUEST GET END (sent) ===
 GET /api/friends/request?type=sent 200 in 125ms
 GET /api/socket-health 200 in 33ms
 GET /socket.io?EIO=4&transport=polling&t=0n4i0lu7 404 in 95ms
 GET /api/socket-health 200 in 26ms
 GET /socket.io?EIO=4&transport=polling&t=0n59gq3v 404 in 102ms
 GET /api/socket-health 200 in 27ms
 GET /socket.io?EIO=4&transport=polling&t=0n6172rn 404 in 97ms
 GET /api/socket-health 200 in 26ms
 GET /socket.io?EIO=4&transport=polling&t=0n6swx78 404 in 94ms
 GET /api/socket-health 200 in 29ms
 GET /socket.io?EIO=4&transport=polling&t=0n7l4r1l 404 in 96ms
 GET /api/socket-health 200 in 33ms
 GET /socket.io?EIO=4&transport=polling&t=0n8clq43 404 in 97ms
 GET /api/socket-health 200 in 28ms
 GET /socket.io?EIO=4&transport=polling&t=0n94kpqh 404 in 97ms
 GET /api/socket-health 200 in 392ms
 GET /socket.io?EIO=4&transport=polling&t=0nacv4on 404 in 216ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
 GET /api/socket-health 200 in 52ms
 GET /socket.io?EIO=4&transport=polling&t=0naofdi7 404 in 102ms
 POST /api/users/heartbeat 200 in 227ms
 GET /api/socket-health 200 in 26ms
 GET /socket.io?EIO=4&transport=polling&t=0nbfufwd 404 in 98ms
 GET /api/socket-health 200 in 29ms
 GET /socket.io?EIO=4&transport=polling&t=0nc7kzn6 404 in 95ms
 GET /api/socket-health 200 in 26ms
 GET /socket.io?EIO=4&transport=polling&t=0nczap7y 404 in 96ms
 GET /api/socket-health 200 in 26ms
 GET /socket.io?EIO=4&transport=polling&t=0ndr2nyp 404 in 92ms
 GET /api/socket-health 200 in 44ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
 GET /socket.io?EIO=4&transport=polling&t=0nejong2 404 in 119ms
 GET /api/conversations 200 in 197ms
 GET /api/socket-health 200 in 33ms
 GET /socket.io?EIO=4&transport=polling&t=0nfawbiw 404 in 146ms
 GET /api/socket-health 200 in 48ms
 GET /socket.io?EIO=4&transport=polling&t=0ng2zpbn 404 in 187ms
 GET /api/socket-health 200 in 32ms
 GET /socket.io?EIO=4&transport=polling&t=0nguejnu 404 in 132ms
 GET /api/socket-health 200 in 29ms
 GET /socket.io?EIO=4&transport=polling&t=0nhm5psa 404 in 99ms
 GET /api/socket-health 200 in 31ms
 GET /socket.io?EIO=4&transport=polling&t=0nidyeby 404 in 99ms
 GET /api/socket-health 200 in 59ms
 GET /socket.io?EIO=4&transport=polling&t=0nj6i4mv 404 in 184ms
 GET /api/socket-health 200 in 35ms
 GET /socket.io?EIO=4&transport=polling&t=0njxouhj 404 in 137ms
 GET /api/socket-health 200 in 38ms
 GET /socket.io?EIO=4&transport=polling&t=0nkp90yi 404 in 102ms
 GET /api/socket-health 200 in 30ms
 GET /socket.io?EIO=4&transport=polling&t=0nlgwg4b 404 in 108ms
 GET /api/socket-health 200 in 38ms
 GET /socket.io?EIO=4&transport=polling&t=0nm8u2u6 404 in 109ms
 GET /api/socket-health 200 in 47ms
 GET /socket.io?EIO=4&transport=polling&t=0nn0tdo7 404 in 192ms
 GET /api/socket-health 200 in 862ms
 GET /api/socket-health 200 in 132ms
 GET /socket.io?EIO=4&transport=polling&t=0noppymr 404 in 1074ms
 GET /socket.io?EIO=4&transport=polling&t=0nopo1tx 404 in 1073ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
=== FRIEND REQUEST GET START ===
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
Request type: received User: sayantan2@gmail.com
âœ… Database connected
 GET /api/friends 200 in 252ms
âœ… Current user found: {
  id: new ObjectId('6901f85f42c5d010fa811206'),
  email: 'sayantan2@gmail.com',
  friendRequestsCount: 0,
  sentRequestsCount: 1
}
Processing received requests...
Raw friendRequests: []
Processed receivedRequests: []
Populating sender details...
Final populated requests: []
=== FRIEND REQUEST GET END (received) ===
 GET /api/friends/request?type=received 200 in 600ms
 GET /api/socket-health 200 in 43ms
=== FRIEND REQUEST GET START ===
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
Request type: sent User: sayantan2@gmail.com
âœ… Database connected
 GET /api/socket-health 200 in 142ms
âœ… Current user found: {
  id: new ObjectId('6901f85f42c5d010fa811206'),
  email: 'sayantan2@gmail.com',
  friendRequestsCount: 0,
  sentRequestsCount: 1
}
Processing sent requests...
Raw sentRequests: [
  {
    from: new ObjectId('6901f85f42c5d010fa811206'),
    fromName: 'sayantan2',
    to: new ObjectId('6905adf16a22b7843b006183'),
    toName: 'sayantan3',
    status: 'pending',
    _id: new ObjectId('6905cdce14ad0d0f020b3985'),
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
Filtering sent request: { status: 'pending', to: new ObjectId('6905adf16a22b7843b006183') }
Mapping sent request: {
  from: new ObjectId('6901f85f42c5d010fa811206'),
  fromName: 'sayantan2',
  to: new ObjectId('6905adf16a22b7843b006183'),
  toName: 'sayantan3',
  status: 'pending',
  _id: new ObjectId('6905cdce14ad0d0f020b3985'),
  createdAt: 2025-11-01T09:07:26.707Z,
  updatedAt: 2025-11-01T09:07:26.707Z
}
Processed sentRequests: [
  {
    id: '6905cdce14ad0d0f020b3985',
    to: {
      id: '6905adf16a22b7843b006183',
      username: 'sayantan3',
      email: '',
      profilePicture: null
    },
    status: 'pending',
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
Populating recipient details...
Looking up recipient: 6905adf16a22b7843b006183
Found recipient: sayantan3
Final populated sent requests: [
  {
    id: '6905cdce14ad0d0f020b3985',
    to: {
      id: '6905adf16a22b7843b006183',
      username: 'sayantan3',
      email: 'sayantan3@gmail.com',
      profilePicture: undefined
    },
    status: 'pending',
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
=== FRIEND REQUEST GET END (sent) ===
 GET /api/friends/request?type=sent 200 in 432ms
 GET /socket.io?EIO=4&transport=polling&t=0nqvvtwf 404 in 283ms
 GET /socket.io?EIO=4&transport=polling&t=0nr100wp 404 in 127ms
 GET /api/socket-health 200 in 28ms
 GET /api/socket-health 200 in 118ms
 GET /socket.io?EIO=4&transport=polling&t=0nsenymt 404 in 221ms
 GET /socket.io?EIO=4&transport=polling&t=0nshydol 404 in 115ms
 GET /api/socket-health 200 in 31ms
 GET /api/socket-health 200 in 41ms
 GET /socket.io?EIO=4&transport=polling&t=0ntyptpr 404 in 509ms
 GET /socket.io?EIO=4&transport=polling&t=0ntzwuhb 404 in 405ms
 GET /api/socket-health 200 in 25ms
 GET /api/socket-health 200 in 124ms
 GET /socket.io?EIO=4&transport=polling&t=0nvi0b6n 404 in 212ms
 GET /socket.io?EIO=4&transport=polling&t=0nvlhg14 404 in 101ms
 GET /api/socket-health 200 in 97ms
 GET /api/socket-health 200 in 182ms
 GET /socket.io?EIO=4&transport=polling&t=0nx3ly5k 404 in 271ms
 GET /socket.io?EIO=4&transport=polling&t=0nx8p5ml 404 in 128ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
 POST /api/users/heartbeat 200 in 176ms
 GET /api/socket-health 200 in 26ms
 GET /api/socket-health 200 in 114ms
 GET /socket.io?EIO=4&transport=polling&t=0nyl3i0l 404 in 206ms
 GET /socket.io?EIO=4&transport=polling&t=0nyohqgm 404 in 103ms
 GET /api/socket-health 200 in 26ms
 GET /api/socket-health 200 in 114ms
 GET /socket.io?EIO=4&transport=polling&t=0o04mh7p 404 in 199ms
 GET /socket.io?EIO=4&transport=polling&t=0o07vrv0 404 in 94ms
 GET /api/socket-health 200 in 36ms
 GET /api/socket-health 200 in 113ms
 GET /socket.io?EIO=4&transport=polling&t=0o1ob4pc 404 in 201ms
 GET /socket.io?EIO=4&transport=polling&t=0o1riw0j 404 in 102ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
 GET /api/conversations 200 in 154ms
 GET /api/socket-health 200 in 32ms
 GET /api/socket-health 200 in 107ms
 GET /socket.io?EIO=4&transport=polling&t=0o37u6ib 404 in 192ms
 GET /socket.io?EIO=4&transport=polling&t=0o3aud3x 404 in 100ms
 GET /api/socket-health 200 in 26ms
 GET /api/socket-health 200 in 140ms
 GET /socket.io?EIO=4&transport=polling&t=0o4r2hf5 404 in 272ms
 GET /socket.io?EIO=4&transport=polling&t=0o4v0795 404 in 139ms
 GET /api/socket-health 200 in 25ms
 GET /api/socket-health 200 in 135ms
 GET /socket.io?EIO=4&transport=polling&t=0o6aqr91 404 in 221ms
 GET /socket.io?EIO=4&transport=polling&t=0o6ek9bz 404 in 99ms
 GET /api/socket-health 200 in 42ms
 GET /api/socket-health 200 in 182ms
 GET /socket.io?EIO=4&transport=polling&t=0o7upmyh 404 in 289ms
 GET /socket.io?EIO=4&transport=polling&t=0o7zuqy6 404 in 115ms
 GET /api/socket-health 200 in 784ms
 GET /api/socket-health 200 in 159ms
 GET /socket.io?EIO=4&transport=polling&t=0o9zwe7y 404 in 949ms
 GET /socket.io?EIO=4&transport=polling&t=0oa4gzva 404 in 714ms
 GET /api/socket-health 200 in 32ms
 GET /api/socket-health 200 in 136ms
 GET /socket.io?EIO=4&transport=polling&t=0obpbfeh 404 in 246ms
 GET /socket.io?EIO=4&transport=polling&t=0obt51sj 404 in 122ms
 GET /api/socket-health 200 in 28ms
 GET /api/socket-health 200 in 28ms
 GET /socket.io?EIO=4&transport=polling&t=0od8m0by 404 in 207ms
 GET /socket.io?EIO=4&transport=polling&t=0od9gaao 404 in 106ms
 GET /api/socket-health 200 in 94ms
=== FRIEND REQUEST GET START ===
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
Request type: received User: sayantan2@gmail.com
âœ… Database connected
âœ… Current user found: {
  id: new ObjectId('6901f85f42c5d010fa811206'),
  email: 'sayantan2@gmail.com',
  friendRequestsCount: 0,
  sentRequestsCount: 1
}
Processing received requests...
Raw friendRequests: []
Processed receivedRequests: []
Populating sender details...
Final populated requests: []
=== FRIEND REQUEST GET END (received) ===
 GET /api/friends/request?type=received 200 in 327ms
 GET /api/socket-health 200 in 245ms
=== FRIEND REQUEST GET START ===
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
Request type: sent User: sayantan2@gmail.com
âœ… Database connected
 GET /socket.io?EIO=4&transport=polling&t=0of5epko 404 in 330ms
 GET /socket.io?EIO=4&transport=polling&t=0ofcfj5g 404 in 131ms
âœ… Current user found: {
  id: new ObjectId('6901f85f42c5d010fa811206'),
  email: 'sayantan2@gmail.com',
  friendRequestsCount: 0,
  sentRequestsCount: 1
}
Processing sent requests...
Raw sentRequests: [
  {
    from: new ObjectId('6901f85f42c5d010fa811206'),
    fromName: 'sayantan2',
    to: new ObjectId('6905adf16a22b7843b006183'),
    toName: 'sayantan3',
    status: 'pending',
    _id: new ObjectId('6905cdce14ad0d0f020b3985'),
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
Filtering sent request: { status: 'pending', to: new ObjectId('6905adf16a22b7843b006183') }
Mapping sent request: {
  from: new ObjectId('6901f85f42c5d010fa811206'),
  fromName: 'sayantan2',
  to: new ObjectId('6905adf16a22b7843b006183'),
  toName: 'sayantan3',
  status: 'pending',
  _id: new ObjectId('6905cdce14ad0d0f020b3985'),
  createdAt: 2025-11-01T09:07:26.707Z,
  updatedAt: 2025-11-01T09:07:26.707Z
}
Processed sentRequests: [
  {
    id: '6905cdce14ad0d0f020b3985',
    to: {
      id: '6905adf16a22b7843b006183',
      username: 'sayantan3',
      email: '',
      profilePicture: null
    },
    status: 'pending',
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
Populating recipient details...
Looking up recipient: 6905adf16a22b7843b006183
Found recipient: sayantan3
Final populated sent requests: [
  {
    id: '6905cdce14ad0d0f020b3985',
    to: {
      id: '6905adf16a22b7843b006183',
      username: 'sayantan3',
      email: 'sayantan3@gmail.com',
      profilePicture: undefined
    },
    status: 'pending',
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
=== FRIEND REQUEST GET END (sent) ===
 GET /api/friends/request?type=sent 200 in 270ms
 GET /api/socket-health 200 in 30ms
 GET /api/socket-health 200 in 130ms
 GET /socket.io?EIO=4&transport=polling&t=0ogc4roi 404 in 228ms
 GET /socket.io?EIO=4&transport=polling&t=0ogfse9l 404 in 119ms
 GET /api/socket-health 200 in 33ms
 GET /api/socket-health 200 in 137ms
 GET /socket.io?EIO=4&transport=polling&t=0ohwy81g 404 in 229ms
 GET /socket.io?EIO=4&transport=polling&t=0oi0umuy 404 in 109ms
 GET /api/socket-health 200 in 33ms
 GET /api/socket-health 200 in 134ms
 GET /socket.io?EIO=4&transport=polling&t=0ojfd6kx 404 in 289ms
 GET /socket.io?EIO=4&transport=polling&t=0ojj4vxl 404 in 170ms
 GET /api/socket-health 200 in 31ms
 GET /api/socket-health 200 in 39ms
 GET /socket.io?EIO=4&transport=polling&t=0okysvv4 404 in 232ms
 GET /socket.io?EIO=4&transport=polling&t=0okzzdc6 404 in 114ms
 GET /api/socket-health 200 in 39ms
 GET /api/socket-health 200 in 36ms
 GET /socket.io?EIO=4&transport=polling&t=0omii7p5 404 in 291ms
 GET /socket.io?EIO=4&transport=polling&t=0omjjp0p 404 in 146ms
 GET /api/socket-health 200 in 39ms
 GET /api/socket-health 200 in 128ms
 GET /socket.io?EIO=4&transport=polling&t=0oo22l2h 404 in 208ms
 GET /socket.io?EIO=4&transport=polling&t=0oo5nsvw 404 in 106ms
 GET /api/socket-health 200 in 32ms
 GET /api/socket-health 200 in 57ms
 GET /socket.io?EIO=4&transport=polling&t=0opla8g0 404 in 236ms
 GET /socket.io?EIO=4&transport=polling&t=0opmxp4q 404 in 124ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
 GET /api/conversations 200 in 155ms
 GET /api/socket-health 200 in 33ms
 GET /api/socket-health 200 in 141ms
 GET /socket.io?EIO=4&transport=polling&t=0or51xep 404 in 266ms
 GET /socket.io?EIO=4&transport=polling&t=0or94jrx 404 in 130ms
 GET /api/socket-health 200 in 33ms
 GET /api/socket-health 200 in 115ms
 GET /socket.io?EIO=4&transport=polling&t=0osongev 404 in 212ms
 GET /socket.io?EIO=4&transport=polling&t=0osrwmzl 404 in 109ms
 GET /api/socket-health 200 in 31ms
 GET /api/socket-health 200 in 123ms
 GET /socket.io?EIO=4&transport=polling&t=0ou804e8 404 in 227ms
 GET /socket.io?EIO=4&transport=polling&t=0oubi4sq 404 in 121ms
 GET /api/socket-health 200 in 53ms
 GET /api/socket-health 200 in 134ms
 GET /socket.io?EIO=4&transport=polling&t=0ovs9bb3 404 in 630ms
 GET /socket.io?EIO=4&transport=polling&t=0ovw2jva 404 in 528ms
 GET /api/socket-health 200 in 140ms
 GET /api/socket-health 200 in 91ms
 GET /socket.io?EIO=4&transport=polling&t=0oxfiyrc 404 in 536ms
 GET /socket.io?EIO=4&transport=polling&t=0oxi2osp 404 in 157ms
 GET /api/socket-health 200 in 45ms
 GET /api/socket-health 200 in 113ms
 GET /socket.io?EIO=4&transport=polling&t=0oyxzpmh 404 in 215ms
 GET /socket.io?EIO=4&transport=polling&t=0oz17e7o 404 in 113ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
=== FRIEND REQUEST GET START ===
 GET /api/socket-health 200 in 94ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
Request type: received User: sayantan2@gmail.com
âœ… Database connected
 GET /api/socket-health 200 in 117ms
 GET /socket.io?EIO=4&transport=polling&t=0p0g7od6 404 in 206ms
 GET /socket.io?EIO=4&transport=polling&t=0p0jqhh7 404 in 101ms
 POST /api/users/heartbeat 200 in 376ms
âœ… Current user found: {
  id: new ObjectId('6901f85f42c5d010fa811206'),
  email: 'sayantan2@gmail.com',
  friendRequestsCount: 0,
  sentRequestsCount: 1
}
Processing received requests...
Raw friendRequests: []
Processed receivedRequests: []
Populating sender details...
Final populated requests: []
=== FRIEND REQUEST GET END (received) ===
 GET /api/friends/request?type=received 200 in 634ms
=== FRIEND REQUEST GET START ===
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
Request type: sent User: sayantan2@gmail.com
âœ… Database connected
 GET /api/friends 200 in 675ms
âœ… Current user found: {
  id: new ObjectId('6901f85f42c5d010fa811206'),
  email: 'sayantan2@gmail.com',
  friendRequestsCount: 0,
  sentRequestsCount: 1
}
Processing sent requests...
Raw sentRequests: [
  {
    from: new ObjectId('6901f85f42c5d010fa811206'),
    fromName: 'sayantan2',
    to: new ObjectId('6905adf16a22b7843b006183'),
    toName: 'sayantan3',
    status: 'pending',
    _id: new ObjectId('6905cdce14ad0d0f020b3985'),
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
Filtering sent request: { status: 'pending', to: new ObjectId('6905adf16a22b7843b006183') }
Mapping sent request: {
  from: new ObjectId('6901f85f42c5d010fa811206'),
  fromName: 'sayantan2',
  to: new ObjectId('6905adf16a22b7843b006183'),
  toName: 'sayantan3',
  status: 'pending',
  _id: new ObjectId('6905cdce14ad0d0f020b3985'),
  createdAt: 2025-11-01T09:07:26.707Z,
  updatedAt: 2025-11-01T09:07:26.707Z
}
Processed sentRequests: [
  {
    id: '6905cdce14ad0d0f020b3985',
    to: {
      id: '6905adf16a22b7843b006183',
      username: 'sayantan3',
      email: '',
      profilePicture: null
    },
    status: 'pending',
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
Populating recipient details...
Looking up recipient: 6905adf16a22b7843b006183
Found recipient: sayantan3
Final populated sent requests: [
  {
    id: '6905cdce14ad0d0f020b3985',
    to: {
      id: '6905adf16a22b7843b006183',
      username: 'sayantan3',
      email: 'sayantan3@gmail.com',
      profilePicture: undefined
    },
    status: 'pending',
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
=== FRIEND REQUEST GET END (sent) ===
 GET /api/friends/request?type=sent 200 in 129ms
 GET /api/socket-health 200 in 26ms
 GET /api/socket-health 200 in 115ms
 GET /socket.io?EIO=4&transport=polling&t=0p1xppr6 404 in 195ms
 GET /socket.io?EIO=4&transport=polling&t=0p20yszg 404 in 97ms
 GET /api/socket-health 200 in 29ms
 GET /api/socket-health 200 in 37ms
 GET /socket.io?EIO=4&transport=polling&t=0p3h8fwo 404 in 200ms
 GET /socket.io?EIO=4&transport=polling&t=0p3ibo4t 404 in 111ms
 GET /api/socket-health 200 in 39ms
 GET /api/socket-health 200 in 35ms
 GET /socket.io?EIO=4&transport=polling&t=0p51kp0u 404 in 214ms
 GET /socket.io?EIO=4&transport=polling&t=0p52ln9i 404 in 108ms
 GET /api/socket-health 200 in 146ms
 GET /api/socket-health 200 in 54ms
 GET /socket.io?EIO=4&transport=polling&t=0p6q2jyh 404 in 409ms
 GET /socket.io?EIO=4&transport=polling&t=0p6rmbry 404 in 245ms
 GET /api/socket-health 200 in 37ms
 GET /api/socket-health 200 in 108ms
 GET /socket.io?EIO=4&transport=polling&t=0p848fi3 404 in 207ms
 GET /socket.io?EIO=4&transport=polling&t=0p87a4lu 404 in 108ms
 GET /api/socket-health 200 in 37ms
 GET /api/socket-health 200 in 41ms
 GET /socket.io?EIO=4&transport=polling&t=0p9np6zt 404 in 224ms
 GET /socket.io?EIO=4&transport=polling&t=0p9owkgd 404 in 119ms
 GET /api/socket-health 200 in 50ms
 GET /api/socket-health 200 in 163ms
 GET /socket.io?EIO=4&transport=polling&t=0pb7wtv6 404 in 325ms
 GET /socket.io?EIO=4&transport=polling&t=0pbchq7q 404 in 179ms
 GET /api/socket-health 200 in 33ms
 GET /api/socket-health 200 in 138ms
 GET /socket.io?EIO=4&transport=polling&t=0pcqr2zz 404 in 274ms
 GET /socket.io?EIO=4&transport=polling&t=0pcuqsy2 404 in 138ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
 GET /api/socket-health 200 in 478ms
 GET /api/conversations 200 in 610ms
 GET /api/socket-health 200 in 127ms
 GET /socket.io?EIO=4&transport=polling&t=0peoowxl 404 in 288ms
 GET /socket.io?EIO=4&transport=polling&t=0persp3s 404 in 130ms
 GET /api/socket-health 200 in 55ms
 GET /api/socket-health 200 in 110ms
 GET /socket.io?EIO=4&transport=polling&t=0pfxujog 404 in 269ms
 GET /socket.io?EIO=4&transport=polling&t=0pfyjwbf 404 in 266ms
 GET /api/socket-health 200 in 38ms
 GET /api/socket-health 200 in 134ms
 GET /socket.io?EIO=4&transport=polling&t=0phdmup6 404 in 218ms
 GET /socket.io?EIO=4&transport=polling&t=0phhdujn 404 in 118ms
 GET /api/socket-health 200 in 291ms
 GET /api/socket-health 200 in 56ms
 GET /socket.io?EIO=4&transport=polling&t=0pj9jbyp 404 in 276ms
 GET /socket.io?EIO=4&transport=polling&t=0pjas31o 404 in 122ms
 GET /api/socket-health 200 in 27ms
 GET /api/socket-health 200 in 114ms
 GET /socket.io?EIO=4&transport=polling&t=0pkg6k2j 404 in 205ms
 GET /socket.io?EIO=4&transport=polling&t=0pkjeekg 404 in 104ms
 GET /api/socket-health 200 in 159ms
 GET /api/socket-health 200 in 112ms
 GET /socket.io?EIO=4&transport=polling&t=0pmhsow0 404 in 312ms
 GET /socket.io?EIO=4&transport=polling&t=0pmkupgs 404 in 300ms
 GET /api/socket-health 200 in 242ms
=== FRIEND REQUEST GET START ===
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
Request type: received User: sayantan2@gmail.com
âœ… Database connected
âœ… Current user found: {
  id: new ObjectId('6901f85f42c5d010fa811206'),
  email: 'sayantan2@gmail.com',
  friendRequestsCount: 0,
  sentRequestsCount: 1
}
Processing received requests...
Raw friendRequests: []
Processed receivedRequests: []
Populating sender details...
Final populated requests: []
=== FRIEND REQUEST GET END (received) ===
 GET /api/friends/request?type=received 200 in 294ms
 GET /api/socket-health 200 in 250ms
=== FRIEND REQUEST GET START ===
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
Request type: sent User: sayantan2@gmail.com
âœ… Database connected
 GET /socket.io?EIO=4&transport=polling&t=0poiyonb 404 in 432ms
 GET /socket.io?EIO=4&transport=polling&t=0poq2xe6 404 in 191ms
âœ… Current user found: {
  id: new ObjectId('6901f85f42c5d010fa811206'),
  email: 'sayantan2@gmail.com',
  friendRequestsCount: 0,
  sentRequestsCount: 1
}
Processing sent requests...
Raw sentRequests: [
  {
    from: new ObjectId('6901f85f42c5d010fa811206'),
    fromName: 'sayantan2',
    to: new ObjectId('6905adf16a22b7843b006183'),
    toName: 'sayantan3',
    status: 'pending',
    _id: new ObjectId('6905cdce14ad0d0f020b3985'),
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
Filtering sent request: { status: 'pending', to: new ObjectId('6905adf16a22b7843b006183') }
Mapping sent request: {
  from: new ObjectId('6901f85f42c5d010fa811206'),
  fromName: 'sayantan2',
  to: new ObjectId('6905adf16a22b7843b006183'),
  toName: 'sayantan3',
  status: 'pending',
  _id: new ObjectId('6905cdce14ad0d0f020b3985'),
  createdAt: 2025-11-01T09:07:26.707Z,
  updatedAt: 2025-11-01T09:07:26.707Z
}
Processed sentRequests: [
  {
    id: '6905cdce14ad0d0f020b3985',
    to: {
      id: '6905adf16a22b7843b006183',
      username: 'sayantan3',
      email: '',
      profilePicture: null
    },
    status: 'pending',
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
Populating recipient details...
Looking up recipient: 6905adf16a22b7843b006183
Found recipient: sayantan3
Final populated sent requests: [
  {
    id: '6905cdce14ad0d0f020b3985',
    to: {
      id: '6905adf16a22b7843b006183',
      username: 'sayantan3',
      email: 'sayantan3@gmail.com',
      profilePicture: undefined
    },
    status: 'pending',
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
=== FRIEND REQUEST GET END (sent) ===
 GET /api/friends/request?type=sent 200 in 300ms
 GET /api/socket-health 200 in 59ms
 GET /api/socket-health 200 in 53ms
 GET /socket.io?EIO=4&transport=polling&t=0ppw50ay 404 in 331ms
 GET /socket.io?EIO=4&transport=polling&t=0ppxoiey 404 in 132ms
 GET /api/socket-health 200 in 91ms
 GET /api/socket-health 200 in 83ms
 GET /socket.io?EIO=4&transport=polling&t=0prg3es6 404 in 599ms
 GET /socket.io?EIO=4&transport=polling&t=0prig02t 404 in 472ms
 GET /api/socket-health 200 in 26ms
 GET /api/socket-health 200 in 120ms
 GET /socket.io?EIO=4&transport=polling&t=0psy3yaj 404 in 205ms
 GET /socket.io?EIO=4&transport=polling&t=0pt1g2nk 404 in 105ms
 GET /api/socket-health 200 in 38ms
 GET /api/socket-health 200 in 133ms
 GET /socket.io?EIO=4&transport=polling&t=0puhvu0g 404 in 219ms
 GET /socket.io?EIO=4&transport=polling&t=0pulnlri 404 in 99ms
 GET /api/socket-health 200 in 46ms
 GET /api/socket-health 200 in 56ms
 GET /socket.io?EIO=4&transport=polling&t=0pw1qdy0 404 in 422ms
 GET /socket.io?EIO=4&transport=polling&t=0pw3dy6s 404 in 266ms
 GET /api/socket-health 200 in 39ms
 GET /api/socket-health 200 in 201ms
 GET /socket.io?EIO=4&transport=polling&t=0pxkwuu3 404 in 339ms
 GET /socket.io?EIO=4&transport=polling&t=0pxqk76l 404 in 459ms
 GET /api/socket-health 200 in 43ms
 GET /api/socket-health 200 in 175ms
 GET /socket.io?EIO=4&transport=polling&t=0pz4wip2 404 in 1161ms
 GET /socket.io?EIO=4&transport=polling&t=0pzabaux 404 in 395ms
 GET /api/socket-health 200 in 31ms
 GET /api/socket-health 200 in 133ms
 GET /socket.io?EIO=4&transport=polling&t=0q1fo14z 404 in 227ms
 GET /socket.io?EIO=4&transport=polling&t=0q1jgxc6 404 in 114ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
 GET /api/conversations 200 in 141ms
 GET /api/socket-health 200 in 26ms
 GET /api/socket-health 200 in 123ms
 GET /socket.io?EIO=4&transport=polling&t=0q2z09ag 404 in 213ms
 GET /socket.io?EIO=4&transport=polling&t=0q32g4st 404 in 109ms
 GET /api/socket-health 200 in 26ms
 GET /api/socket-health 200 in 111ms
 GET /socket.io?EIO=4&transport=polling&t=0q4iket3 404 in 202ms
 GET /socket.io?EIO=4&transport=polling&t=0q4lp9xc 404 in 104ms
 GET /api/socket-health 200 in 34ms
 GET /api/socket-health 200 in 117ms
 GET /socket.io?EIO=4&transport=polling&t=0q6291jf 404 in 210ms
 GET /socket.io?EIO=4&transport=polling&t=0q65kq1a 404 in 107ms
 GET /api/socket-health 200 in 28ms
 GET /api/socket-health 200 in 111ms
 GET /socket.io?EIO=4&transport=polling&t=0q7lnb53 404 in 199ms
 GET /socket.io?EIO=4&transport=polling&t=0q7ot8gh 404 in 96ms
 GET /api/socket-health 200 in 78ms
 GET /api/socket-health 200 in 81ms
 GET /socket.io?EIO=4&transport=polling&t=0q97ohg2 404 in 385ms
 GET /socket.io?EIO=4&transport=polling&t=0q9a6mot 404 in 380ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
=== FRIEND REQUEST GET START ===
 GET /api/socket-health 200 in 86ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
Request type: received User: sayantan2@gmail.com
âœ… Database connected
 GET /api/socket-health 200 in 111ms
 POST /api/users/heartbeat 200 in 310ms
 GET /socket.io?EIO=4&transport=polling&t=0qaqworf 404 in 206ms
 GET /socket.io?EIO=4&transport=polling&t=0qaubx9i 404 in 104ms
âœ… Current user found: {
  id: new ObjectId('6901f85f42c5d010fa811206'),
  email: 'sayantan2@gmail.com',
  friendRequestsCount: 0,
  sentRequestsCount: 1
}
Processing received requests...
Raw friendRequests: []
Processed receivedRequests: []
Populating sender details...
Final populated requests: []
=== FRIEND REQUEST GET END (received) ===
 GET /api/friends/request?type=received 200 in 528ms
=== FRIEND REQUEST GET START ===
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
Request type: sent User: sayantan2@gmail.com
âœ… Database connected
 GET /api/friends 200 in 578ms
âœ… Current user found: {
  id: new ObjectId('6901f85f42c5d010fa811206'),
  email: 'sayantan2@gmail.com',
  friendRequestsCount: 0,
  sentRequestsCount: 1
}
Processing sent requests...
Raw sentRequests: [
  {
    from: new ObjectId('6901f85f42c5d010fa811206'),
    fromName: 'sayantan2',
    to: new ObjectId('6905adf16a22b7843b006183'),
    toName: 'sayantan3',
    status: 'pending',
    _id: new ObjectId('6905cdce14ad0d0f020b3985'),
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
Filtering sent request: { status: 'pending', to: new ObjectId('6905adf16a22b7843b006183') }
Mapping sent request: {
  from: new ObjectId('6901f85f42c5d010fa811206'),
  fromName: 'sayantan2',
  to: new ObjectId('6905adf16a22b7843b006183'),
  toName: 'sayantan3',
  status: 'pending',
  _id: new ObjectId('6905cdce14ad0d0f020b3985'),
  createdAt: 2025-11-01T09:07:26.707Z,
  updatedAt: 2025-11-01T09:07:26.707Z
}
Processed sentRequests: [
  {
    id: '6905cdce14ad0d0f020b3985',
    to: {
      id: '6905adf16a22b7843b006183',
      username: 'sayantan3',
      email: '',
      profilePicture: null
    },
    status: 'pending',
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
Populating recipient details...
Looking up recipient: 6905adf16a22b7843b006183
Found recipient: sayantan3
Final populated sent requests: [
  {
    id: '6905cdce14ad0d0f020b3985',
    to: {
      id: '6905adf16a22b7843b006183',
      username: 'sayantan3',
      email: 'sayantan3@gmail.com',
      profilePicture: undefined
    },
    status: 'pending',
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
=== FRIEND REQUEST GET END (sent) ===
 GET /api/friends/request?type=sent 200 in 140ms
 GET /api/socket-health 200 in 27ms
 GET /api/socket-health 200 in 125ms
 GET /socket.io?EIO=4&transport=polling&t=0qc88i2a 404 in 219ms
 GET /socket.io?EIO=4&transport=polling&t=0qcbunay 404 in 109ms
 GET /api/socket-health 200 in 27ms
 GET /api/socket-health 200 in 121ms
 GET /socket.io?EIO=4&transport=polling&t=0qdrpr69 404 in 125ms
 GET /socket.io?EIO=4&transport=polling&t=0qdvhn9r 404 in 104ms
 GET /api/socket-health 200 in 28ms
 GET /api/socket-health 200 in 130ms
 GET /socket.io?EIO=4&transport=polling&t=0qfblk2s 404 in 217ms
 GET /socket.io?EIO=4&transport=polling&t=0qff9bok 404 in 107ms
 GET /api/socket-health 200 in 30ms
 GET /api/socket-health 200 in 113ms
 GET /socket.io?EIO=4&transport=polling&t=0qgvb3o7 404 in 240ms
 GET /socket.io?EIO=4&transport=polling&t=0qgyirdz 404 in 138ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
 GET /api/auth/session 200 in 44ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
=== FRIEND REQUEST GET START ===
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
Request type: received User: sayantan2@gmail.com
âœ… Database connected
 GET /api/random-chat/queue 200 in 204ms
 GET /api/friends 200 in 208ms
 POST /api/users/heartbeat 200 in 231ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
 GET /api/random-chat/session 200 in 151ms
âœ… Current user found: {
  id: new ObjectId('6901f85f42c5d010fa811206'),
  email: 'sayantan2@gmail.com',
  friendRequestsCount: 0,
  sentRequestsCount: 1
}
Processing received requests...
Raw friendRequests: []
Processed receivedRequests: []
Populating sender details...
Final populated requests: []
=== FRIEND REQUEST GET END (received) ===
 GET /api/friends/request?type=received 200 in 575ms
 GET /api/users/me 200 in 577ms
=== FRIEND REQUEST GET START ===
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
Request type: sent User: sayantan2@gmail.com
âœ… Database connected
âœ… Current user found: {
  id: new ObjectId('6901f85f42c5d010fa811206'),
  email: 'sayantan2@gmail.com',
  friendRequestsCount: 0,
  sentRequestsCount: 1
}
Processing sent requests...
Raw sentRequests: [
  {
    from: new ObjectId('6901f85f42c5d010fa811206'),
    fromName: 'sayantan2',
    to: new ObjectId('6905adf16a22b7843b006183'),
    toName: 'sayantan3',
    status: 'pending',
    _id: new ObjectId('6905cdce14ad0d0f020b3985'),
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
Filtering sent request: { status: 'pending', to: new ObjectId('6905adf16a22b7843b006183') }
Mapping sent request: {
  from: new ObjectId('6901f85f42c5d010fa811206'),
  fromName: 'sayantan2',
  to: new ObjectId('6905adf16a22b7843b006183'),
  toName: 'sayantan3',
  status: 'pending',
  _id: new ObjectId('6905cdce14ad0d0f020b3985'),
  createdAt: 2025-11-01T09:07:26.707Z,
  updatedAt: 2025-11-01T09:07:26.707Z
}
Processed sentRequests: [
  {
    id: '6905cdce14ad0d0f020b3985',
    to: {
      id: '6905adf16a22b7843b006183',
      username: 'sayantan3',
      email: '',
      profilePicture: null
    },
    status: 'pending',
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
Populating recipient details...
Looking up recipient: 6905adf16a22b7843b006183
Found recipient: sayantan3
Final populated sent requests: [
  {
    id: '6905cdce14ad0d0f020b3985',
    to: {
      id: '6905adf16a22b7843b006183',
      username: 'sayantan3',
      email: 'sayantan3@gmail.com',
      profilePicture: undefined
    },
    status: 'pending',
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
=== FRIEND REQUEST GET END (sent) ===
 GET /api/friends/request?type=sent 200 in 144ms
 GET /api/socket-health 200 in 33ms
 GET /api/socket-health 200 in 44ms
 GET /socket.io?EIO=4&transport=polling&t=0qienbem 404 in 224ms
 GET /socket.io?EIO=4&transport=polling&t=0qifwynn 404 in 104ms
 GET /api/socket-health 200 in 42ms
 GET /api/socket-health 200 in 132ms
 GET /socket.io?EIO=4&transport=polling&t=0qjyk0s2 404 in 221ms
 GET /socket.io?EIO=4&transport=polling&t=0qk2d49n 404 in 109ms
 GET /api/socket-health 200 in 41ms
 GET /api/socket-health 200 in 165ms
 GET /socket.io?EIO=4&transport=polling&t=0qli4j5e 404 in 233ms
 GET /socket.io?EIO=4&transport=polling&t=0qlmuudz 404 in 109ms
 GET /api/socket-health 200 in 25ms
 GET /api/socket-health 200 in 109ms
 GET /socket.io?EIO=4&transport=polling&t=0qn1f2ar 404 in 205ms
 GET /socket.io?EIO=4&transport=polling&t=0qn4i2jp 404 in 110ms
 GET /api/socket-health 200 in 29ms
 GET /api/socket-health 200 in 116ms
 GET /socket.io?EIO=4&transport=polling&t=0qol2lua 404 in 204ms
 GET /socket.io?EIO=4&transport=polling&t=0qoocdtl 404 in 103ms
 GET /api/socket-health 200 in 26ms
 GET /api/socket-health 200 in 32ms
 GET /socket.io?EIO=4&transport=polling&t=0qq4d1eo 404 in 208ms
 GET /socket.io?EIO=4&transport=polling&t=0qq5cbyh 404 in 109ms
 GET /api/socket-health 200 in 30ms
 GET /api/socket-health 200 in 48ms
 GET /socket.io?EIO=4&transport=polling&t=0qro7c8p 404 in 380ms
 GET /socket.io?EIO=4&transport=polling&t=0qrpl1ay 404 in 214ms
 GET /api/socket-health 200 in 28ms
 GET /api/socket-health 200 in 118ms
 GET /socket.io?EIO=4&transport=polling&t=0qt7bjr8 404 in 221ms
 GET /socket.io?EIO=4&transport=polling&t=0qtamafn 404 in 116ms
 GET /api/socket-health 200 in 26ms
 GET /api/socket-health 200 in 116ms
 GET /socket.io?EIO=4&transport=polling&t=0qur54dc 404 in 194ms
 GET /socket.io?EIO=4&transport=polling&t=0quuenom 404 in 102ms
 GET /api/socket-health 200 in 27ms
 GET /api/socket-health 200 in 32ms
 GET /socket.io?EIO=4&transport=polling&t=0qwan4n5 404 in 287ms
 GET /socket.io?EIO=4&transport=polling&t=0qwbkrub 404 in 163ms
 GET /api/socket-health 200 in 32ms
 GET /api/socket-health 200 in 116ms
 GET /socket.io?EIO=4&transport=polling&t=0qxucg5z 404 in 243ms
 GET /socket.io?EIO=4&transport=polling&t=0qxxm7e0 404 in 133ms
 GET /api/socket-health 200 in 30ms
 GET /api/socket-health 200 in 109ms
 GET /socket.io?EIO=4&transport=polling&t=0qzdn2ei 404 in 194ms
 GET /socket.io?EIO=4&transport=polling&t=0qzgqrrg 404 in 99ms
 GET /api/socket-health 200 in 144ms
 GET /api/socket-health 200 in 345ms
 GET /socket.io?EIO=4&transport=polling&t=0r13a3ue 404 in 809ms
 GET /socket.io?EIO=4&transport=polling&t=0r1d41qd 404 in 111ms
 GET /api/socket-health 200 in 75ms
 GET /api/socket-health 200 in 164ms
 GET /socket.io?EIO=4&transport=polling&t=0r3btb0c 404 in 540ms
 GET /socket.io?EIO=4&transport=polling&t=0r3ge9a0 404 in 308ms
 GET /api/socket-health 200 in 38ms
 GET /api/socket-health 200 in 139ms
 GET /socket.io?EIO=4&transport=polling&t=0r4snqip 404 in 222ms
 GET /socket.io?EIO=4&transport=polling&t=0r4wkh4o 404 in 107ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
=== FRIEND REQUEST GET START ===
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
Request type: received User: sayantan2@gmail.com
âœ… Database connected
 GET /api/conversations 200 in 456ms
 POST /api/users/heartbeat 200 in 484ms
âœ… Current user found: {
  id: new ObjectId('6901f85f42c5d010fa811206'),
  email: 'sayantan2@gmail.com',
  friendRequestsCount: 0,
  sentRequestsCount: 1
}
Processing received requests...
Raw friendRequests: []
Processed receivedRequests: []
Populating sender details...
Final populated requests: []
=== FRIEND REQUEST GET END (received) ===
 GET /api/friends/request?type=received 200 in 681ms
=== FRIEND REQUEST GET START ===
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
Request type: sent User: sayantan2@gmail.com
âœ… Database connected
âœ… Current user found: {
  id: new ObjectId('6901f85f42c5d010fa811206'),
  email: 'sayantan2@gmail.com',
  friendRequestsCount: 0,
  sentRequestsCount: 1
}
Processing sent requests...
Raw sentRequests: [
  {
    from: new ObjectId('6901f85f42c5d010fa811206'),
    fromName: 'sayantan2',
    to: new ObjectId('6905adf16a22b7843b006183'),
    toName: 'sayantan3',
    status: 'pending',
    _id: new ObjectId('6905cdce14ad0d0f020b3985'),
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
Filtering sent request: { status: 'pending', to: new ObjectId('6905adf16a22b7843b006183') }
Mapping sent request: {
  from: new ObjectId('6901f85f42c5d010fa811206'),
  fromName: 'sayantan2',
  to: new ObjectId('6905adf16a22b7843b006183'),
  toName: 'sayantan3',
  status: 'pending',
  _id: new ObjectId('6905cdce14ad0d0f020b3985'),
  createdAt: 2025-11-01T09:07:26.707Z,
  updatedAt: 2025-11-01T09:07:26.707Z
}
Processed sentRequests: [
  {
    id: '6905cdce14ad0d0f020b3985',
    to: {
      id: '6905adf16a22b7843b006183',
      username: 'sayantan3',
      email: '',
      profilePicture: null
    },
    status: 'pending',
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
Populating recipient details...
Looking up recipient: 6905adf16a22b7843b006183
Found recipient: sayantan3
Final populated sent requests: [
  {
    id: '6905cdce14ad0d0f020b3985',
    to: {
      id: '6905adf16a22b7843b006183',
      username: 'sayantan3',
      email: 'sayantan3@gmail.com',
      profilePicture: undefined
    },
    status: 'pending',
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
=== FRIEND REQUEST GET END (sent) ===
 GET /api/friends/request?type=sent 200 in 136ms
 GET /api/socket-health 200 in 33ms
 GET /api/socket-health 200 in 117ms
 GET /socket.io?EIO=4&transport=polling&t=0r6bysph 404 in 228ms
 GET /socket.io?EIO=4&transport=polling&t=0r6f8f07 404 in 125ms
 GET /api/socket-health 200 in 29ms
 GET /api/socket-health 200 in 41ms
 GET /socket.io?EIO=4&transport=polling&t=0r7vg2xs 404 in 212ms
 GET /socket.io?EIO=4&transport=polling&t=0r7wmhkk 404 in 116ms
 GET /api/socket-health 200 in 54ms
 GET /api/socket-health 200 in 175ms
 GET /socket.io?EIO=4&transport=polling&t=0r9fn0oi 404 in 370ms
 GET /socket.io?EIO=4&transport=polling&t=0r9kkk9k 404 in 214ms
 GET /api/socket-health 200 in 32ms
 GET /api/socket-health 200 in 590ms
 GET /socket.io?EIO=4&transport=polling&t=0raye9qw 404 in 1354ms
 GET /socket.io?EIO=4&transport=polling&t=0rbf10zh 404 in 757ms
 GET /api/socket-health 200 in 26ms
 GET /api/socket-health 200 in 107ms
 GET /socket.io?EIO=4&transport=polling&t=0rd9seiq 404 in 196ms
 GET /socket.io?EIO=4&transport=polling&t=0rdcuujf 404 in 99ms
 GET /api/socket-health 200 in 28ms
 GET /api/socket-health 200 in 37ms
 GET /socket.io?EIO=4&transport=polling&t=0ret2imc 404 in 207ms
 GET /socket.io?EIO=4&transport=polling&t=0reu6th4 404 in 103ms
 GET /api/socket-health 200 in 33ms
 GET /api/socket-health 200 in 115ms
 GET /socket.io?EIO=4&transport=polling&t=0rgd0nxf 404 in 206ms
 GET /socket.io?EIO=4&transport=polling&t=0rggarle 404 in 102ms
 GET /api/socket-health 200 in 27ms
 GET /api/socket-health 200 in 115ms
 GET /socket.io?EIO=4&transport=polling&t=0rhwa5cm 404 in 201ms
 GET /socket.io?EIO=4&transport=polling&t=0rhzk5de 404 in 92ms
 GET /api/socket-health 200 in 33ms
 GET /api/socket-health 200 in 108ms
 GET /socket.io?EIO=4&transport=polling&t=0rjfvs0c 404 in 188ms
 GET /socket.io?EIO=4&transport=polling&t=0rjixcey 404 in 93ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
=== FRIEND REQUEST GET START ===
 GET /api/socket-health 200 in 92ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
Request type: received User: sayantan2@gmail.com
âœ… Database connected
âœ… Current user found: {
  id: new ObjectId('6901f85f42c5d010fa811206'),
  email: 'sayantan2@gmail.com',
  friendRequestsCount: 0,
  sentRequestsCount: 1
}
Processing received requests...
Raw friendRequests: []
Processed receivedRequests: []
Populating sender details...
Final populated requests: []
=== FRIEND REQUEST GET END (received) ===
 GET /api/friends/request?type=received 200 in 210ms
 GET /api/friends 200 in 213ms
 GET /api/socket-health 200 in 126ms
=== FRIEND REQUEST GET START ===
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
Request type: sent User: sayantan2@gmail.com
âœ… Database connected
 GET /socket.io?EIO=4&transport=polling&t=0rl1qxgq 404 in 281ms
 GET /socket.io?EIO=4&transport=polling&t=0rl5eaty 404 in 151ms
âœ… Current user found: {
  id: new ObjectId('6901f85f42c5d010fa811206'),
  email: 'sayantan2@gmail.com',
  friendRequestsCount: 0,
  sentRequestsCount: 1
}
Processing sent requests...
Raw sentRequests: [
  {
    from: new ObjectId('6901f85f42c5d010fa811206'),
    fromName: 'sayantan2',
    to: new ObjectId('6905adf16a22b7843b006183'),
    toName: 'sayantan3',
    status: 'pending',
    _id: new ObjectId('6905cdce14ad0d0f020b3985'),
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
Filtering sent request: { status: 'pending', to: new ObjectId('6905adf16a22b7843b006183') }
Mapping sent request: {
  from: new ObjectId('6901f85f42c5d010fa811206'),
  fromName: 'sayantan2',
  to: new ObjectId('6905adf16a22b7843b006183'),
  toName: 'sayantan3',
  status: 'pending',
  _id: new ObjectId('6905cdce14ad0d0f020b3985'),
  createdAt: 2025-11-01T09:07:26.707Z,
  updatedAt: 2025-11-01T09:07:26.707Z
}
Processed sentRequests: [
  {
    id: '6905cdce14ad0d0f020b3985',
    to: {
      id: '6905adf16a22b7843b006183',
      username: 'sayantan3',
      email: '',
      profilePicture: null
    },
    status: 'pending',
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
Populating recipient details...
Looking up recipient: 6905adf16a22b7843b006183
Found recipient: sayantan3
Final populated sent requests: [
  {
    id: '6905cdce14ad0d0f020b3985',
    to: {
      id: '6905adf16a22b7843b006183',
      username: 'sayantan3',
      email: 'sayantan3@gmail.com',
      profilePicture: undefined
    },
    status: 'pending',
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
=== FRIEND REQUEST GET END (sent) ===
 GET /api/friends/request?type=sent 200 in 241ms
 GET /api/socket-health 200 in 41ms
 GET /api/socket-health 200 in 31ms
 GET /socket.io?EIO=4&transport=polling&t=0rmjcvwu 404 in 211ms
 GET /socket.io?EIO=4&transport=polling&t=0rmkaafx 404 in 110ms
 GET /api/socket-health 200 in 29ms
 GET /api/socket-health 200 in 122ms
 GET /socket.io?EIO=4&transport=polling&t=0ro2hvvn 404 in 223ms
 GET /socket.io?EIO=4&transport=polling&t=0ro5w11y 404 in 98ms
 GET /api/socket-health 200 in 35ms
 GET /api/socket-health 200 in 121ms
 GET /socket.io?EIO=4&transport=polling&t=0rpmll4i 404 in 208ms
 GET /socket.io?EIO=4&transport=polling&t=0rpq1r1l 404 in 102ms
 GET /api/socket-health 200 in 28ms
 GET /api/socket-health 200 in 34ms
 GET /socket.io?EIO=4&transport=polling&t=0rr5tipt 404 in 204ms
 GET /socket.io?EIO=4&transport=polling&t=0rr6v5dw 404 in 105ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
 GET /api/socket-health 200 in 58ms
 GET /api/socket-health 200 in 128ms
 POST /api/users/heartbeat 200 in 277ms
 GET /socket.io?EIO=4&transport=polling&t=0rsq38oo 404 in 215ms
 GET /socket.io?EIO=4&transport=polling&t=0rstps3y 404 in 105ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
 GET /api/conversations 200 in 131ms
 GET /api/socket-health 200 in 27ms
 GET /api/socket-health 200 in 110ms
 GET /socket.io?EIO=4&transport=polling&t=0ru8rfxe 404 in 195ms
 GET /socket.io?EIO=4&transport=polling&t=0rubwu2o 404 in 103ms
 GET /api/socket-health 200 in 29ms
 GET /api/socket-health 200 in 114ms
 GET /socket.io?EIO=4&transport=polling&t=0rvsj2l8 404 in 204ms
 GET /socket.io?EIO=4&transport=polling&t=0rvvrolx 404 in 102ms
 GET /api/socket-health 200 in 27ms
 GET /api/socket-health 200 in 119ms
 GET /socket.io?EIO=4&transport=polling&t=0rxbx1wa 404 in 201ms
 GET /socket.io?EIO=4&transport=polling&t=0rxfb0qk 404 in 106ms
 GET /api/socket-health 200 in 25ms
 GET /api/socket-health 200 in 114ms
 GET /socket.io?EIO=4&transport=polling&t=0ryvdetw 404 in 207ms
 GET /socket.io?EIO=4&transport=polling&t=0ryyl6jc 404 in 103ms
 GET /api/socket-health 200 in 27ms
 GET /api/socket-health 200 in 112ms
 GET /socket.io?EIO=4&transport=polling&t=0s0f6tz9 404 in 197ms
 GET /socket.io?EIO=4&transport=polling&t=0s0id0hq 404 in 98ms
 GET /api/socket-health 200 in 51ms
 GET /api/socket-health 200 in 83ms
 GET /socket.io?EIO=4&transport=polling&t=0s1z9vqm 404 in 273ms
 GET /socket.io?EIO=4&transport=polling&t=0s21mrmn 404 in 268ms
 GET /api/socket-health 200 in 36ms
 GET /api/socket-health 200 in 179ms
 GET /socket.io?EIO=4&transport=polling&t=0s3ibr6j 404 in 371ms
 GET /socket.io?EIO=4&transport=polling&t=0s3nf0i8 404 in 223ms
 GET /api/socket-health 200 in 641ms
 GET /api/socket-health 200 in 574ms
 GET /socket.io?EIO=4&transport=polling&t=0s5pwmr3 404 in 510ms
 GET /socket.io?EIO=4&transport=polling&t=0s6b6bsi 404 in 180ms
 GET /api/socket-health 200 in 32ms
 GET /api/socket-health 200 in 36ms
 GET /socket.io?EIO=4&transport=polling&t=0s855zbj 404 in 217ms
 GET /socket.io?EIO=4&transport=polling&t=0s86657c 404 in 120ms
=== FRIEND REQUEST GET START ===
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
Request type: received User: sayantan2@gmail.com
âœ… Database connected
âœ… Current user found: {
  id: new ObjectId('6901f85f42c5d010fa811206'),
  email: 'sayantan2@gmail.com',
  friendRequestsCount: 0,
  sentRequestsCount: 1
}
Processing received requests...
Raw friendRequests: []
Processed receivedRequests: []
Populating sender details...
Final populated requests: []
=== FRIEND REQUEST GET END (received) ===
 GET /api/friends/request?type=received 200 in 89ms
=== FRIEND REQUEST GET START ===
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
Request type: sent User: sayantan2@gmail.com
âœ… Database connected
âœ… Current user found: {
  id: new ObjectId('6901f85f42c5d010fa811206'),
  email: 'sayantan2@gmail.com',
  friendRequestsCount: 0,
  sentRequestsCount: 1
}
Processing sent requests...
Raw sentRequests: [
  {
    from: new ObjectId('6901f85f42c5d010fa811206'),
    fromName: 'sayantan2',
    to: new ObjectId('6905adf16a22b7843b006183'),
    toName: 'sayantan3',
    status: 'pending',
    _id: new ObjectId('6905cdce14ad0d0f020b3985'),
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
Filtering sent request: { status: 'pending', to: new ObjectId('6905adf16a22b7843b006183') }
Mapping sent request: {
  from: new ObjectId('6901f85f42c5d010fa811206'),
  fromName: 'sayantan2',
  to: new ObjectId('6905adf16a22b7843b006183'),
  toName: 'sayantan3',
  status: 'pending',
  _id: new ObjectId('6905cdce14ad0d0f020b3985'),
  createdAt: 2025-11-01T09:07:26.707Z,
  updatedAt: 2025-11-01T09:07:26.707Z
}
Processed sentRequests: [
  {
    id: '6905cdce14ad0d0f020b3985',
    to: {
      id: '6905adf16a22b7843b006183',
      username: 'sayantan3',
      email: '',
      profilePicture: null
    },
    status: 'pending',
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
Populating recipient details...
Looking up recipient: 6905adf16a22b7843b006183
Found recipient: sayantan3
Final populated sent requests: [
  {
    id: '6905cdce14ad0d0f020b3985',
    to: {
      id: '6905adf16a22b7843b006183',
      username: 'sayantan3',
      email: 'sayantan3@gmail.com',
      profilePicture: undefined
    },
    status: 'pending',
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
=== FRIEND REQUEST GET END (sent) ===
 GET /api/friends/request?type=sent 200 in 132ms
 GET /api/socket-health 200 in 33ms
 GET /api/socket-health 200 in 113ms
 GET /socket.io?EIO=4&transport=polling&t=0s9oplsl 404 in 204ms
 GET /socket.io?EIO=4&transport=polling&t=0s9rwpbi 404 in 107ms
 GET /api/socket-health 200 in 27ms
 GET /api/socket-health 200 in 111ms
 GET /socket.io?EIO=4&transport=polling&t=0sb83vtl 404 in 199ms
 GET /socket.io?EIO=4&transport=polling&t=0sbb8je9 404 in 94ms
 GET /api/socket-health 200 in 35ms
 GET /api/socket-health 200 in 116ms
 GET /socket.io?EIO=4&transport=polling&t=0scrylbt 404 in 198ms
 GET /socket.io?EIO=4&transport=polling&t=0scv87vg 404 in 96ms
 GET /api/socket-health 200 in 29ms
 GET /api/socket-health 200 in 35ms
 GET /socket.io?EIO=4&transport=polling&t=0seb9lmf 404 in 223ms
 GET /socket.io?EIO=4&transport=polling&t=0secabcj 404 in 113ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
 GET /api/socket-health 200 in 66ms
 GET /api/socket-health 200 in 119ms
 GET /socket.io?EIO=4&transport=polling&t=0sfvn6um 404 in 203ms
 GET /socket.io?EIO=4&transport=polling&t=0sfz4rhq 404 in 102ms
 POST /api/users/heartbeat 200 in 324ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
 GET /api/socket-health 200 in 46ms
 GET /api/socket-health 200 in 115ms
 GET /api/conversations 200 in 256ms
 GET /socket.io?EIO=4&transport=polling&t=0shene45 404 in 211ms
 GET /socket.io?EIO=4&transport=polling&t=0shhv0ar 404 in 110ms
 GET /api/socket-health 200 in 27ms
 GET /api/socket-health 200 in 118ms
 GET /socket.io?EIO=4&transport=polling&t=0sixw0fu 404 in 208ms
 GET /socket.io?EIO=4&transport=polling&t=0sj18ztl 404 in 104ms
 GET /api/socket-health 200 in 26ms
 GET /api/socket-health 200 in 121ms
 GET /socket.io?EIO=4&transport=polling&t=0skhd0wj 404 in 205ms
 GET /socket.io?EIO=4&transport=polling&t=0skks22m 404 in 105ms
 GET /api/socket-health 200 in 25ms
 GET /api/socket-health 200 in 121ms
 GET /socket.io?EIO=4&transport=polling&t=0sm0xcjt 404 in 207ms
 GET /socket.io?EIO=4&transport=polling&t=0sm4c4cr 404 in 98ms
 GET /api/socket-health 200 in 26ms
 GET /api/socket-health 200 in 38ms
 GET /socket.io?EIO=4&transport=polling&t=0snkgyjy 404 in 233ms
 GET /socket.io?EIO=4&transport=polling&t=0snlkxd2 404 in 128ms
 GET /api/socket-health 200 in 25ms
 GET /api/socket-health 200 in 109ms
 GET /socket.io?EIO=4&transport=polling&t=0sp42d2h 404 in 205ms
 GET /socket.io?EIO=4&transport=polling&t=0sp74617 404 in 104ms
 GET /api/socket-health 200 in 25ms
 GET /api/socket-health 200 in 108ms
 GET /socket.io?EIO=4&transport=polling&t=0sqnfbwm 404 in 199ms
 GET /socket.io?EIO=4&transport=polling&t=0sqqi7vt 404 in 103ms
 GET /api/socket-health 200 in 28ms
 GET /api/socket-health 200 in 116ms
 GET /socket.io?EIO=4&transport=polling&t=0ss6zrcz 404 in 209ms
 GET /socket.io?EIO=4&transport=polling&t=0ssa9uii 404 in 106ms
 GET /api/socket-health 200 in 28ms
 GET /api/socket-health 200 in 34ms
 GET /socket.io?EIO=4&transport=polling&t=0stqjb8k 404 in 205ms
 GET /socket.io?EIO=4&transport=polling&t=0stritou 404 in 108ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
=== FRIEND REQUEST GET START ===
 GET /api/socket-health 200 in 83ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
Request type: received User: sayantan2@gmail.com
âœ… Database connected
 GET /api/socket-health 200 in 118ms
 GET /api/friends 200 in 319ms
 GET /socket.io?EIO=4&transport=polling&t=0svc6mxd 404 in 253ms
 GET /socket.io?EIO=4&transport=polling&t=0svfmtq4 404 in 143ms
âœ… Current user found: {
  id: new ObjectId('6901f85f42c5d010fa811206'),
  email: 'sayantan2@gmail.com',
  friendRequestsCount: 0,
  sentRequestsCount: 1
}
Processing received requests...
Raw friendRequests: []
Processed receivedRequests: []
Populating sender details...
Final populated requests: []
=== FRIEND REQUEST GET END (received) ===
 GET /api/friends/request?type=received 200 in 639ms
=== FRIEND REQUEST GET START ===
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
Request type: sent User: sayantan2@gmail.com
âœ… Database connected
âœ… Current user found: {
  id: new ObjectId('6901f85f42c5d010fa811206'),
  email: 'sayantan2@gmail.com',
  friendRequestsCount: 0,
  sentRequestsCount: 1
}
Processing sent requests...
Raw sentRequests: [
  {
    from: new ObjectId('6901f85f42c5d010fa811206'),
    fromName: 'sayantan2',
    to: new ObjectId('6905adf16a22b7843b006183'),
    toName: 'sayantan3',
    status: 'pending',
    _id: new ObjectId('6905cdce14ad0d0f020b3985'),
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
Filtering sent request: { status: 'pending', to: new ObjectId('6905adf16a22b7843b006183') }
Mapping sent request: {
  from: new ObjectId('6901f85f42c5d010fa811206'),
  fromName: 'sayantan2',
  to: new ObjectId('6905adf16a22b7843b006183'),
  toName: 'sayantan3',
  status: 'pending',
  _id: new ObjectId('6905cdce14ad0d0f020b3985'),
  createdAt: 2025-11-01T09:07:26.707Z,
  updatedAt: 2025-11-01T09:07:26.707Z
}
Processed sentRequests: [
  {
    id: '6905cdce14ad0d0f020b3985',
    to: {
      id: '6905adf16a22b7843b006183',
      username: 'sayantan3',
      email: '',
      profilePicture: null
    },
    status: 'pending',
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
Populating recipient details...
Looking up recipient: 6905adf16a22b7843b006183
Found recipient: sayantan3
Final populated sent requests: [
  {
    id: '6905cdce14ad0d0f020b3985',
    to: {
      id: '6905adf16a22b7843b006183',
      username: 'sayantan3',
      email: 'sayantan3@gmail.com',
      profilePicture: undefined
    },
    status: 'pending',
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
=== FRIEND REQUEST GET END (sent) ===
 GET /api/friends/request?type=sent 200 in 146ms
 GET /api/socket-health 200 in 33ms
 GET /api/socket-health 200 in 112ms
 GET /socket.io?EIO=4&transport=polling&t=0swu17hv 404 in 190ms
 GET /socket.io?EIO=4&transport=polling&t=0swx799f 404 in 93ms
 GET /api/socket-health 200 in 27ms
 GET /api/socket-health 200 in 114ms
 GET /socket.io?EIO=4&transport=polling&t=0syd72fm 404 in 195ms
 GET /socket.io?EIO=4&transport=polling&t=0syge3it 404 in 88ms
 GET /api/socket-health 200 in 37ms
 GET /api/socket-health 200 in 113ms
 GET /socket.io?EIO=4&transport=polling&t=0szx2eu0 404 in 198ms
 GET /socket.io?EIO=4&transport=polling&t=0t008rn3 404 in 101ms
 GET /api/socket-health 200 in 28ms
 GET /api/socket-health 200 in 114ms
 GET /socket.io?EIO=4&transport=polling&t=0t1ge69l 404 in 197ms
 GET /socket.io?EIO=4&transport=polling&t=0t1jn7uv 404 in 92ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
 GET /api/socket-health 200 in 48ms
 GET /api/socket-health 200 in 124ms
 GET /socket.io?EIO=4&transport=polling&t=0t30iq9c 404 in 212ms
 GET /socket.io?EIO=4&transport=polling&t=0t340lm7 404 in 106ms
 POST /api/users/heartbeat 200 in 314ms
 GET /api/socket-health 200 in 31ms
 GET /api/socket-health 200 in 124ms
 GET /socket.io?EIO=4&transport=polling&t=0t4jqz0c 404 in 214ms
 GET /socket.io?EIO=4&transport=polling&t=0t4n7dz1 404 in 102ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
 GET /api/conversations 200 in 145ms
 GET /api/socket-health 200 in 35ms
 GET /api/socket-health 200 in 114ms
 GET /socket.io?EIO=4&transport=polling&t=0t639qwp 404 in 202ms
 GET /socket.io?EIO=4&transport=polling&t=0t66i7cm 404 in 99ms
 GET /api/socket-health 200 in 28ms
 GET /api/socket-health 200 in 113ms
 GET /socket.io?EIO=4&transport=polling&t=0t7mnk25 404 in 204ms
 GET /socket.io?EIO=4&transport=polling&t=0t7pupmw 404 in 104ms
 GET /api/socket-health 200 in 28ms
 GET /api/socket-health 200 in 110ms
 GET /socket.io?EIO=4&transport=polling&t=0t96312r 404 in 198ms
 GET /socket.io?EIO=4&transport=polling&t=0t9983hq 404 in 101ms
 GET /api/socket-health 200 in 28ms
 GET /api/socket-health 200 in 149ms
 GET /socket.io?EIO=4&transport=polling&t=0tapr9du 404 in 278ms
 GET /socket.io?EIO=4&transport=polling&t=0taty230 404 in 147ms
 GET /api/socket-health 200 in 32ms
 GET /api/socket-health 200 in 117ms
 GET /socket.io?EIO=4&transport=polling&t=0tc9en4b 404 in 217ms
 GET /socket.io?EIO=4&transport=polling&t=0tccp988 404 in 111ms
 GET /api/socket-health 200 in 27ms
 GET /api/socket-health 200 in 111ms
 GET /socket.io?EIO=4&transport=polling&t=0tdsvgml 404 in 200ms
 GET /socket.io?EIO=4&transport=polling&t=0tdw0h2z 404 in 98ms
 GET /api/socket-health 200 in 33ms
 GET /api/socket-health 200 in 109ms
 GET /socket.io?EIO=4&transport=polling&t=0tfchl24 404 in 206ms
 GET /socket.io?EIO=4&transport=polling&t=0tffkd4e 404 in 104ms
 GET /api/socket-health 200 in 27ms
 GET /api/socket-health 200 in 104ms
 GET /socket.io?EIO=4&transport=polling&t=0tgvtn0v 404 in 184ms
 GET /socket.io?EIO=4&transport=polling&t=0tgys6ko 404 in 89ms
 GET /api/socket-health 200 in 30ms
 GET /api/socket-health 200 in 116ms
 GET /socket.io?EIO=4&transport=polling&t=0tifnsrz 404 in 206ms
 GET /socket.io?EIO=4&transport=polling&t=0tiix33f 404 in 104ms
=== FRIEND REQUEST GET START ===
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
Request type: received User: sayantan2@gmail.com
âœ… Database connected
âœ… Current user found: {
  id: new ObjectId('6901f85f42c5d010fa811206'),
  email: 'sayantan2@gmail.com',
  friendRequestsCount: 0,
  sentRequestsCount: 1
}
Processing received requests...
Raw friendRequests: []
Processed receivedRequests: []
Populating sender details...
Final populated requests: []
=== FRIEND REQUEST GET END (received) ===
 GET /api/friends/request?type=received 200 in 96ms
=== FRIEND REQUEST GET START ===
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
Request type: sent User: sayantan2@gmail.com
âœ… Database connected
âœ… Current user found: {
  id: new ObjectId('6901f85f42c5d010fa811206'),
  email: 'sayantan2@gmail.com',
  friendRequestsCount: 0,
  sentRequestsCount: 1
}
Processing sent requests...
Raw sentRequests: [
  {
    from: new ObjectId('6901f85f42c5d010fa811206'),
    fromName: 'sayantan2',
    to: new ObjectId('6905adf16a22b7843b006183'),
    toName: 'sayantan3',
    status: 'pending',
    _id: new ObjectId('6905cdce14ad0d0f020b3985'),
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
Filtering sent request: { status: 'pending', to: new ObjectId('6905adf16a22b7843b006183') }
Mapping sent request: {
  from: new ObjectId('6901f85f42c5d010fa811206'),
  fromName: 'sayantan2',
  to: new ObjectId('6905adf16a22b7843b006183'),
  toName: 'sayantan3',
  status: 'pending',
  _id: new ObjectId('6905cdce14ad0d0f020b3985'),
  createdAt: 2025-11-01T09:07:26.707Z,
  updatedAt: 2025-11-01T09:07:26.707Z
}
Processed sentRequests: [
  {
    id: '6905cdce14ad0d0f020b3985',
    to: {
      id: '6905adf16a22b7843b006183',
      username: 'sayantan3',
      email: '',
      profilePicture: null
    },
    status: 'pending',
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
Populating recipient details...
Looking up recipient: 6905adf16a22b7843b006183
Found recipient: sayantan3
Final populated sent requests: [
  {
    id: '6905cdce14ad0d0f020b3985',
    to: {
      id: '6905adf16a22b7843b006183',
      username: 'sayantan3',
      email: 'sayantan3@gmail.com',
      profilePicture: undefined
    },
    status: 'pending',
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
=== FRIEND REQUEST GET END (sent) ===
 GET /api/friends/request?type=sent 200 in 155ms
 GET /api/socket-health 200 in 24ms
 GET /api/socket-health 200 in 106ms
 GET /socket.io?EIO=4&transport=polling&t=0tjz0u77 404 in 191ms
 GET /socket.io?EIO=4&transport=polling&t=0tk2082k 404 in 96ms
 GET /api/socket-health 200 in 28ms
 GET /api/socket-health 200 in 121ms
 GET /socket.io?EIO=4&transport=polling&t=0tlimofb 404 in 194ms
 GET /socket.io?EIO=4&transport=polling&t=0tlm20le 404 in 101ms
 GET /api/socket-health 200 in 29ms
 GET /api/socket-health 200 in 118ms
 GET /socket.io?EIO=4&transport=polling&t=0tn2cpwa 404 in 217ms
 GET /socket.io?EIO=4&transport=polling&t=0tn5ph32 404 in 108ms
 GET /api/socket-health 200 in 30ms
 GET /api/socket-health 200 in 113ms
 GET /socket.io?EIO=4&transport=polling&t=0tolpbzj 404 in 207ms
 GET /socket.io?EIO=4&transport=polling&t=0toow8u9 404 in 116ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
 GET /api/socket-health 200 in 52ms
 GET /api/socket-health 200 in 124ms
 GET /socket.io?EIO=4&transport=polling&t=0tq65957 404 in 203ms
 GET /socket.io?EIO=4&transport=polling&t=0tq9o02j 404 in 98ms
 POST /api/users/heartbeat 200 in 307ms
 GET /api/socket-health 200 in 28ms
 GET /api/socket-health 200 in 113ms
 GET /socket.io?EIO=4&transport=polling&t=0troyaxo 404 in 208ms
 GET /socket.io?EIO=4&transport=polling&t=0trs58s8 404 in 102ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
 GET /api/socket-health 200 in 57ms
 GET /api/socket-health 200 in 27ms
 GET /api/conversations 200 in 261ms
 GET /socket.io?EIO=4&transport=polling&t=0tt94e74 404 in 209ms
 GET /socket.io?EIO=4&transport=polling&t=0tt9xqyu 404 in 107ms
 GET /api/socket-health 200 in 27ms
 GET /api/socket-health 200 in 118ms
 GET /socket.io?EIO=4&transport=polling&t=0tursgnd 404 in 197ms
 GET /socket.io?EIO=4&transport=polling&t=0tuv44s9 404 in 105ms
 GET /api/socket-health 200 in 27ms
 GET /api/socket-health 200 in 114ms
 GET /socket.io?EIO=4&transport=polling&t=0twblkqa 404 in 196ms
 GET /socket.io?EIO=4&transport=polling&t=0twethxm 404 in 94ms
 GET /api/socket-health 200 in 27ms
 GET /api/socket-health 200 in 111ms
 GET /socket.io?EIO=4&transport=polling&t=0txuzdqm 404 in 203ms
 GET /socket.io?EIO=4&transport=polling&t=0txy4ume 404 in 105ms
 GET /api/socket-health 200 in 33ms
 GET /api/socket-health 200 in 132ms
 GET /socket.io?EIO=4&transport=polling&t=0tzeusyj 404 in 220ms
 GET /socket.io?EIO=4&transport=polling&t=0tzilksa 404 in 105ms
 GET /api/socket-health 200 in 41ms
 GET /api/socket-health 200 in 58ms
 GET /socket.io?EIO=4&transport=polling&t=0u0yn4lw 404 in 385ms
 GET /socket.io?EIO=4&transport=polling&t=0u10c1jg 404 in 122ms
 GET /api/socket-health 200 in 68ms
 GET /api/socket-health 200 in 135ms
 GET /socket.io?EIO=4&transport=polling&t=0u2j1cve 404 in 229ms
 GET /socket.io?EIO=4&transport=polling&t=0u2mu0fk 404 in 116ms
 GET /api/socket-health 200 in 27ms
 GET /api/socket-health 200 in 113ms
 GET /socket.io?EIO=4&transport=polling&t=0u41cy0l 404 in 202ms
 GET /socket.io?EIO=4&transport=polling&t=0u44kwl9 404 in 102ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
=== FRIEND REQUEST GET START ===
 GET /api/socket-health 200 in 75ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
Request type: received User: sayantan2@gmail.com
âœ… Database connected
 GET /api/socket-health 200 in 112ms
 GET /api/friends 200 in 284ms
 GET /socket.io?EIO=4&transport=polling&t=0u5md3xd 404 in 212ms
 GET /socket.io?EIO=4&transport=polling&t=0u5pndzq 404 in 107ms
âœ… Current user found: {
  id: new ObjectId('6901f85f42c5d010fa811206'),
  email: 'sayantan2@gmail.com',
  friendRequestsCount: 0,
  sentRequestsCount: 1
}
Processing received requests...
Raw friendRequests: []
Processed receivedRequests: []
Populating sender details...
Final populated requests: []
=== FRIEND REQUEST GET END (received) ===
 GET /api/friends/request?type=received 200 in 516ms
=== FRIEND REQUEST GET START ===
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
Request type: sent User: sayantan2@gmail.com
âœ… Database connected
âœ… Current user found: {
  id: new ObjectId('6901f85f42c5d010fa811206'),
  email: 'sayantan2@gmail.com',
  friendRequestsCount: 0,
  sentRequestsCount: 1
}
Processing sent requests...
Raw sentRequests: [
  {
    from: new ObjectId('6901f85f42c5d010fa811206'),
    fromName: 'sayantan2',
    to: new ObjectId('6905adf16a22b7843b006183'),
    toName: 'sayantan3',
    status: 'pending',
    _id: new ObjectId('6905cdce14ad0d0f020b3985'),
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
Filtering sent request: { status: 'pending', to: new ObjectId('6905adf16a22b7843b006183') }
Mapping sent request: {
  from: new ObjectId('6901f85f42c5d010fa811206'),
  fromName: 'sayantan2',
  to: new ObjectId('6905adf16a22b7843b006183'),
  toName: 'sayantan3',
  status: 'pending',
  _id: new ObjectId('6905cdce14ad0d0f020b3985'),
  createdAt: 2025-11-01T09:07:26.707Z,
  updatedAt: 2025-11-01T09:07:26.707Z
}
Processed sentRequests: [
  {
    id: '6905cdce14ad0d0f020b3985',
    to: {
      id: '6905adf16a22b7843b006183',
      username: 'sayantan3',
      email: '',
      profilePicture: null
    },
    status: 'pending',
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
Populating recipient details...
Looking up recipient: 6905adf16a22b7843b006183
Found recipient: sayantan3
Final populated sent requests: [
  {
    id: '6905cdce14ad0d0f020b3985',
    to: {
      id: '6905adf16a22b7843b006183',
      username: 'sayantan3',
      email: 'sayantan3@gmail.com',
      profilePicture: undefined
    },
    status: 'pending',
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
=== FRIEND REQUEST GET END (sent) ===
 GET /api/friends/request?type=sent 200 in 149ms
 GET /api/socket-health 200 in 36ms
 GET /api/socket-health 200 in 33ms
 GET /socket.io?EIO=4&transport=polling&t=0u74hyc0 404 in 208ms
 GET /socket.io?EIO=4&transport=polling&t=0u75fbcw 404 in 102ms
 GET /api/socket-health 200 in 27ms
 GET /api/socket-health 200 in 38ms
 GET /socket.io?EIO=4&transport=polling&t=0u8nvm2i 404 in 201ms
 GET /socket.io?EIO=4&transport=polling&t=0u8ozar5 404 in 104ms
 GET /api/socket-health 200 in 37ms
 GET /api/socket-health 200 in 32ms
 GET /socket.io?EIO=4&transport=polling&t=0ua7t2lg 404 in 200ms
 GET /socket.io?EIO=4&transport=polling&t=0ua8t74b 404 in 104ms
 GET /api/socket-health 200 in 26ms
 GET /api/socket-health 200 in 113ms
 GET /socket.io?EIO=4&transport=polling&t=0ubqv3jy 404 in 199ms
 GET /socket.io?EIO=4&transport=polling&t=0ubu2mlo 404 in 93ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
 GET /api/socket-health 200 in 48ms
 GET /api/socket-health 200 in 33ms
 GET /socket.io?EIO=4&transport=polling&t=0udb65bg 404 in 207ms
 GET /socket.io?EIO=4&transport=polling&t=0udc50vt 404 in 105ms
 POST /api/users/heartbeat 200 in 295ms
 GET /api/socket-health 200 in 31ms
 GET /api/socket-health 200 in 113ms
 GET /socket.io?EIO=4&transport=polling&t=0ueufox4 404 in 204ms
 GET /socket.io?EIO=4&transport=polling&t=0uexlkdj 404 in 103ms
 GET /api/socket-health 200 in 27ms
 GET /api/socket-health 200 in 127ms
 GET /socket.io?EIO=4&transport=polling&t=0ugdvt5x 404 in 254ms
 GET /socket.io?EIO=4&transport=polling&t=0ughgryq 404 in 146ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
 GET /api/conversations 200 in 142ms
 GET /api/socket-health 200 in 32ms
 GET /api/socket-health 200 in 117ms
 GET /socket.io?EIO=4&transport=polling&t=0uhx8owp 404 in 206ms
 GET /socket.io?EIO=4&transport=polling&t=0ui0i0cb 404 in 102ms
 GET /api/socket-health 200 in 49ms
 GET /api/socket-health 200 in 47ms
 GET /socket.io?EIO=4&transport=polling&t=0ujhqgsf 404 in 281ms
 GET /socket.io?EIO=4&transport=polling&t=0ujj3g0g 404 in 145ms
 GET /api/socket-health 200 in 28ms
 GET /api/socket-health 200 in 36ms
 GET /socket.io?EIO=4&transport=polling&t=0ul0cjtk 404 in 203ms
 GET /socket.io?EIO=4&transport=polling&t=0ul1dzl5 404 in 107ms
 GET /api/socket-health 200 in 29ms
 GET /api/socket-health 200 in 114ms
 GET /socket.io?EIO=4&transport=polling&t=0umjy2ht 404 in 208ms
 GET /socket.io?EIO=4&transport=polling&t=0umn6q5o 404 in 107ms
 GET /api/socket-health 200 in 27ms
 GET /api/socket-health 200 in 118ms
 GET /socket.io?EIO=4&transport=polling&t=0uo3h3ge 404 in 192ms
 GET /socket.io?EIO=4&transport=polling&t=0uo6sp7m 404 in 100ms
 GET /api/socket-health 200 in 29ms
 GET /api/socket-health 200 in 111ms
 GET /socket.io?EIO=4&transport=polling&t=0upn9oaz 404 in 199ms
 GET /socket.io?EIO=4&transport=polling&t=0upqd9k4 404 in 101ms
 GET /api/socket-health 200 in 29ms
 GET /api/socket-health 200 in 114ms
 GET /socket.io?EIO=4&transport=polling&t=0ur6o1me 404 in 201ms
 GET /socket.io?EIO=4&transport=polling&t=0ur9ytde 404 in 104ms
 GET /api/socket-health 200 in 26ms
 GET /api/socket-health 200 in 114ms
 GET /socket.io?EIO=4&transport=polling&t=0uspxj4n 404 in 199ms
 GET /socket.io?EIO=4&transport=polling&t=0ust4rli 404 in 99ms
=== FRIEND REQUEST GET START ===
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
Request type: received User: sayantan2@gmail.com
âœ… Database connected
âœ… Current user found: {
  id: new ObjectId('6901f85f42c5d010fa811206'),
  email: 'sayantan2@gmail.com',
  friendRequestsCount: 0,
  sentRequestsCount: 1
}
Processing received requests...
Raw friendRequests: []
Processed receivedRequests: []
Populating sender details...
Final populated requests: []
=== FRIEND REQUEST GET END (received) ===
 GET /api/friends/request?type=received 200 in 95ms
=== FRIEND REQUEST GET START ===
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
Request type: sent User: sayantan2@gmail.com
âœ… Database connected
âœ… Current user found: {
  id: new ObjectId('6901f85f42c5d010fa811206'),
  email: 'sayantan2@gmail.com',
  friendRequestsCount: 0,
  sentRequestsCount: 1
}
Processing sent requests...
Raw sentRequests: [
  {
    from: new ObjectId('6901f85f42c5d010fa811206'),
    fromName: 'sayantan2',
    to: new ObjectId('6905adf16a22b7843b006183'),
    toName: 'sayantan3',
    status: 'pending',
    _id: new ObjectId('6905cdce14ad0d0f020b3985'),
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
Filtering sent request: { status: 'pending', to: new ObjectId('6905adf16a22b7843b006183') }
Mapping sent request: {
  from: new ObjectId('6901f85f42c5d010fa811206'),
  fromName: 'sayantan2',
  to: new ObjectId('6905adf16a22b7843b006183'),
  toName: 'sayantan3',
  status: 'pending',
  _id: new ObjectId('6905cdce14ad0d0f020b3985'),
  createdAt: 2025-11-01T09:07:26.707Z,
  updatedAt: 2025-11-01T09:07:26.707Z
}
Processed sentRequests: [
  {
    id: '6905cdce14ad0d0f020b3985',
    to: {
      id: '6905adf16a22b7843b006183',
      username: 'sayantan3',
      email: '',
      profilePicture: null
    },
    status: 'pending',
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
Populating recipient details...
Looking up recipient: 6905adf16a22b7843b006183
Found recipient: sayantan3
Final populated sent requests: [
  {
    id: '6905cdce14ad0d0f020b3985',
    to: {
      id: '6905adf16a22b7843b006183',
      username: 'sayantan3',
      email: 'sayantan3@gmail.com',
      profilePicture: undefined
    },
    status: 'pending',
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
=== FRIEND REQUEST GET END (sent) ===
 GET /api/friends/request?type=sent 200 in 155ms
 GET /api/socket-health 200 in 30ms
 GET /api/socket-health 200 in 110ms
 GET /socket.io?EIO=4&transport=polling&t=0uu9y7eh 404 in 199ms
 GET /socket.io?EIO=4&transport=polling&t=0uud38dd 404 in 101ms
 GET /api/socket-health 200 in 29ms
 GET /api/socket-health 200 in 107ms
 GET /socket.io?EIO=4&transport=polling&t=0uvtgrow 404 in 191ms
 GET /socket.io?EIO=4&transport=polling&t=0uvwgsnj 404 in 98ms
 GET /api/socket-health 200 in 31ms
 GET /api/socket-health 200 in 40ms
 GET /socket.io?EIO=4&transport=polling&t=0uxd5rdz 404 in 221ms
 GET /socket.io?EIO=4&transport=polling&t=0uxebyn8 404 in 103ms
 GET /api/socket-health 200 in 25ms
 GET /api/socket-health 200 in 111ms
 GET /socket.io?EIO=4&transport=polling&t=0uyw67t2 404 in 198ms
 GET /socket.io?EIO=4&transport=polling&t=0uyzawp4 404 in 100ms
 GET /api/socket-health 200 in 26ms
 GET /api/socket-health 200 in 121ms
 GET /socket.io?EIO=4&transport=polling&t=0v0g0949 404 in 222ms
 GET /socket.io?EIO=4&transport=polling&t=0v0jgep7 404 in 107ms
 GET /api/socket-health 200 in 27ms
 GET /api/socket-health 200 in 28ms
 GET /socket.io?EIO=4&transport=polling&t=0v1zk2cm 404 in 208ms
 GET /socket.io?EIO=4&transport=polling&t=0v20ec5l 404 in 103ms
 GET /api/socket-health 200 in 26ms
 GET /api/socket-health 200 in 37ms
 GET /socket.io?EIO=4&transport=polling&t=0v3j4ra9 404 in 201ms
 GET /socket.io?EIO=4&transport=polling&t=0v3k7jua 404 in 102ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
 GET /api/socket-health 200 in 51ms
 GET /api/socket-health 200 in 115ms
 GET /api/conversations 200 in 263ms
 GET /socket.io?EIO=4&transport=polling&t=0v536vxb 404 in 204ms
 GET /socket.io?EIO=4&transport=polling&t=0v56i6xy 404 in 106ms
 GET /api/socket-health 200 in 28ms
 GET /api/socket-health 200 in 112ms
 GET /socket.io?EIO=4&transport=polling&t=0v6m2tqs 404 in 197ms
 GET /socket.io?EIO=4&transport=polling&t=0v6p824t 404 in 97ms
 GET /api/socket-health 200 in 28ms
 GET /api/socket-health 200 in 127ms
 GET /socket.io?EIO=4&transport=polling&t=0v85odfc 404 in 196ms
 GET /socket.io?EIO=4&transport=polling&t=0v899g1p 404 in 100ms
 GET /api/socket-health 200 in 26ms
 GET /api/socket-health 200 in 115ms
 GET /socket.io?EIO=4&transport=polling&t=0v9p4tpo 404 in 205ms
 GET /socket.io?EIO=4&transport=polling&t=0v9seizm 404 in 102ms
 GET /api/socket-health 200 in 27ms
 GET /api/socket-health 200 in 112ms
 GET /socket.io?EIO=4&transport=polling&t=0vb8z44q 404 in 200ms
 GET /socket.io?EIO=4&transport=polling&t=0vbc6038 404 in 101ms
 GET /api/socket-health 200 in 27ms
 GET /api/socket-health 200 in 109ms
 GET /socket.io?EIO=4&transport=polling&t=0vcsewkm 404 in 194ms
 GET /socket.io?EIO=4&transport=polling&t=0vcvfqyq 404 in 99ms
 GET /api/socket-health 200 in 25ms
 GET /api/socket-health 200 in 110ms
 GET /socket.io?EIO=4&transport=polling&t=0vebx71d 404 in 193ms
 GET /socket.io?EIO=4&transport=polling&t=0vef1pdi 404 in 98ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
=== FRIEND REQUEST GET START ===
 GET /api/socket-health 200 in 86ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
Request type: received User: sayantan2@gmail.com
âœ… Database connected
 GET /api/socket-health 200 in 120ms
 GET /socket.io?EIO=4&transport=polling&t=0vfxdf0r 404 in 216ms
 GET /socket.io?EIO=4&transport=polling&t=0vg0ybap 404 in 106ms
 POST /api/users/heartbeat 200 in 368ms
âœ… Current user found: {
  id: new ObjectId('6901f85f42c5d010fa811206'),
  email: 'sayantan2@gmail.com',
  friendRequestsCount: 0,
  sentRequestsCount: 1
}
Processing received requests...
Raw friendRequests: []
Processed receivedRequests: []
Populating sender details...
Final populated requests: []
=== FRIEND REQUEST GET END (received) ===
 GET /api/friends/request?type=received 200 in 587ms
=== FRIEND REQUEST GET START ===
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
Request type: sent User: sayantan2@gmail.com
âœ… Database connected
 GET /api/friends 200 in 650ms
âœ… Current user found: {
  id: new ObjectId('6901f85f42c5d010fa811206'),
  email: 'sayantan2@gmail.com',
  friendRequestsCount: 0,
  sentRequestsCount: 1
}
Processing sent requests...
Raw sentRequests: [
  {
    from: new ObjectId('6901f85f42c5d010fa811206'),
    fromName: 'sayantan2',
    to: new ObjectId('6905adf16a22b7843b006183'),
    toName: 'sayantan3',
    status: 'pending',
    _id: new ObjectId('6905cdce14ad0d0f020b3985'),
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
Filtering sent request: { status: 'pending', to: new ObjectId('6905adf16a22b7843b006183') }
Mapping sent request: {
  from: new ObjectId('6901f85f42c5d010fa811206'),
  fromName: 'sayantan2',
  to: new ObjectId('6905adf16a22b7843b006183'),
  toName: 'sayantan3',
  status: 'pending',
  _id: new ObjectId('6905cdce14ad0d0f020b3985'),
  createdAt: 2025-11-01T09:07:26.707Z,
  updatedAt: 2025-11-01T09:07:26.707Z
}
Processed sentRequests: [
  {
    id: '6905cdce14ad0d0f020b3985',
    to: {
      id: '6905adf16a22b7843b006183',
      username: 'sayantan3',
      email: '',
      profilePicture: null
    },
    status: 'pending',
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
Populating recipient details...
Looking up recipient: 6905adf16a22b7843b006183
Found recipient: sayantan3
Final populated sent requests: [
  {
    id: '6905cdce14ad0d0f020b3985',
    to: {
      id: '6905adf16a22b7843b006183',
      username: 'sayantan3',
      email: 'sayantan3@gmail.com',
      profilePicture: undefined
    },
    status: 'pending',
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
=== FRIEND REQUEST GET END (sent) ===
 GET /api/friends/request?type=sent 200 in 144ms
 GET /api/socket-health 200 in 32ms
 GET /api/socket-health 200 in 32ms
 GET /socket.io?EIO=4&transport=polling&t=0vhf09c2 404 in 207ms
 GET /socket.io?EIO=4&transport=polling&t=0vhfxfq2 404 in 104ms
 GET /api/socket-health 200 in 37ms
 GET /api/socket-health 200 in 156ms
 GET /socket.io?EIO=4&transport=polling&t=0viz172b 404 in 311ms
 GET /socket.io?EIO=4&transport=polling&t=0vj3fzze 404 in 157ms
 GET /api/socket-health 200 in 51ms
 GET /api/socket-health 200 in 39ms
 GET /socket.io?EIO=4&transport=polling&t=0vkl0mj0 404 in 261ms
 GET /socket.io?EIO=4&transport=polling&t=0vkkzatr 404 in 265ms
 GET /api/socket-health 200 in 32ms
 GET /api/socket-health 200 in 181ms
 GET /socket.io?EIO=4&transport=polling&t=0vm1q3fq 404 in 295ms
 GET /socket.io?EIO=4&transport=polling&t=0vm6sgwd 404 in 145ms
 GET /api/socket-health 200 in 27ms
 GET /api/socket-health 200 in 109ms
 GET /socket.io?EIO=4&transport=polling&t=0vnl7fmb 404 in 202ms
 GET /socket.io?EIO=4&transport=polling&t=0vnoauqs 404 in 104ms
 GET /api/socket-health 200 in 28ms
 GET /api/socket-health 200 in 111ms
 GET /socket.io?EIO=4&transport=polling&t=0vp4w54v 404 in 192ms
 GET /socket.io?EIO=4&transport=polling&t=0vp8138t 404 in 87ms
 GET /api/socket-health 200 in 37ms
 GET /api/socket-health 200 in 144ms
 GET /socket.io?EIO=4&transport=polling&t=0vqom5s8 404 in 246ms
 GET /socket.io?EIO=4&transport=polling&t=0vqso7sv 404 in 118ms
 GET /api/socket-health 200 in 34ms
 GET /api/socket-health 200 in 136ms
 GET /socket.io?EIO=4&transport=polling&t=0vs87nzk 404 in 264ms
 GET /socket.io?EIO=4&transport=polling&t=0vsc1qdu 404 in 132ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
 GET /api/conversations 200 in 149ms
 GET /api/socket-health 200 in 26ms
 GET /api/socket-health 200 in 112ms
 GET /socket.io?EIO=4&transport=polling&t=0vtrl8xs 404 in 198ms
 GET /socket.io?EIO=4&transport=polling&t=0vtur9wz 404 in 98ms
 GET /api/socket-health 200 in 27ms
 GET /api/socket-health 200 in 114ms
 GET /socket.io?EIO=4&transport=polling&t=0vvb2py1 404 in 116ms
 GET /socket.io?EIO=4&transport=polling&t=0vve9shk 404 in 102ms
 GET /api/socket-health 200 in 28ms
 GET /api/socket-health 200 in 114ms
 GET /socket.io?EIO=4&transport=polling&t=0vwug51e 404 in 188ms
 GET /socket.io?EIO=4&transport=polling&t=0vwxpmvq 404 in 99ms
 GET /api/socket-health 200 in 28ms
 GET /api/socket-health 200 in 116ms
 GET /socket.io?EIO=4&transport=polling&t=0vye7id2 404 in 120ms
 GET /socket.io?EIO=4&transport=polling&t=0vyhh7q5 404 in 96ms
 GET /api/socket-health 200 in 27ms
 GET /api/socket-health 200 in 124ms
 GET /socket.io?EIO=4&transport=polling&t=0vzxrq72 404 in 195ms
 GET /socket.io?EIO=4&transport=polling&t=0w018v99 404 in 95ms
 GET /api/socket-health 200 in 28ms
 GET /api/socket-health 200 in 105ms
 GET /socket.io?EIO=4&transport=polling&t=0w1hfz67 404 in 196ms
 GET /socket.io?EIO=4&transport=polling&t=0w1kdu2u 404 in 102ms
 GET /api/socket-health 200 in 30ms
 GET /api/socket-health 200 in 116ms
 GET /socket.io?EIO=4&transport=polling&t=0w30ygjg 404 in 113ms
 GET /socket.io?EIO=4&transport=polling&t=0w348pdx 404 in 95ms
=== FRIEND REQUEST GET START ===
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
Request type: received User: sayantan2@gmail.com
âœ… Database connected
âœ… Current user found: {
  id: new ObjectId('6901f85f42c5d010fa811206'),
  email: 'sayantan2@gmail.com',
  friendRequestsCount: 0,
  sentRequestsCount: 1
}
Processing received requests...
Raw friendRequests: []
Processed receivedRequests: []
Populating sender details...
Final populated requests: []
=== FRIEND REQUEST GET END (received) ===
 GET /api/friends/request?type=received 200 in 89ms
=== FRIEND REQUEST GET START ===
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
Request type: sent User: sayantan2@gmail.com
âœ… Database connected
âœ… Current user found: {
  id: new ObjectId('6901f85f42c5d010fa811206'),
  email: 'sayantan2@gmail.com',
  friendRequestsCount: 0,
  sentRequestsCount: 1
}
Processing sent requests...
Raw sentRequests: [
  {
    from: new ObjectId('6901f85f42c5d010fa811206'),
    fromName: 'sayantan2',
    to: new ObjectId('6905adf16a22b7843b006183'),
    toName: 'sayantan3',
    status: 'pending',
    _id: new ObjectId('6905cdce14ad0d0f020b3985'),
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
Filtering sent request: { status: 'pending', to: new ObjectId('6905adf16a22b7843b006183') }
Mapping sent request: {
  from: new ObjectId('6901f85f42c5d010fa811206'),
  fromName: 'sayantan2',
  to: new ObjectId('6905adf16a22b7843b006183'),
  toName: 'sayantan3',
  status: 'pending',
  _id: new ObjectId('6905cdce14ad0d0f020b3985'),
  createdAt: 2025-11-01T09:07:26.707Z,
  updatedAt: 2025-11-01T09:07:26.707Z
}
Processed sentRequests: [
  {
    id: '6905cdce14ad0d0f020b3985',
    to: {
      id: '6905adf16a22b7843b006183',
      username: 'sayantan3',
      email: '',
      profilePicture: null
    },
    status: 'pending',
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
Populating recipient details...
Looking up recipient: 6905adf16a22b7843b006183
Found recipient: sayantan3
Final populated sent requests: [
  {
    id: '6905cdce14ad0d0f020b3985',
    to: {
      id: '6905adf16a22b7843b006183',
      username: 'sayantan3',
      email: 'sayantan3@gmail.com',
      profilePicture: undefined
    },
    status: 'pending',
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
=== FRIEND REQUEST GET END (sent) ===
 GET /api/friends/request?type=sent 200 in 120ms
 GET /api/socket-health 200 in 27ms
 GET /api/socket-health 200 in 107ms
 GET /socket.io?EIO=4&transport=polling&t=0w4kbr84 404 in 191ms
 GET /socket.io?EIO=4&transport=polling&t=0w4nchfb 404 in 101ms
 GET /api/socket-health 200 in 28ms
 GET /api/socket-health 200 in 111ms
 GET /socket.io?EIO=4&transport=polling&t=0w646i1m 404 in 199ms
 GET /socket.io?EIO=4&transport=polling&t=0w67ahc1 404 in 93ms
 GET /api/socket-health 200 in 35ms
 GET /api/socket-health 200 in 112ms
 GET /socket.io?EIO=4&transport=polling&t=0w7ns67f 404 in 197ms
 GET /socket.io?EIO=4&transport=polling&t=0w7qzcnm 404 in 101ms
 GET /api/socket-health 200 in 27ms
 GET /api/socket-health 200 in 110ms
 GET /socket.io?EIO=4&transport=polling&t=0w970hq7 404 in 198ms
 GET /socket.io?EIO=4&transport=polling&t=0w9a53ai 404 in 93ms
 GET /api/socket-health 200 in 26ms
 GET /api/socket-health 200 in 106ms
 GET /socket.io?EIO=4&transport=polling&t=0waqnkf3 404 in 107ms
 GET /socket.io?EIO=4&transport=polling&t=0wato4xp 404 in 96ms
 GET /api/socket-health 200 in 28ms
 GET /api/socket-health 200 in 113ms
 GET /socket.io?EIO=4&transport=polling&t=0wca4oks 404 in 196ms
 GET /socket.io?EIO=4&transport=polling&t=0wcdbfi5 404 in 90ms
 GET /api/socket-health 200 in 44ms
 GET /api/socket-health 200 in 110ms
 GET /socket.io?EIO=4&transport=polling&t=0wdu3xcj 404 in 197ms
 GET /socket.io?EIO=4&transport=polling&t=0wdx7yda 404 in 100ms
 GET /api/socket-health 200 in 25ms
 GET /api/socket-health 200 in 110ms
 GET /socket.io?EIO=4&transport=polling&t=0wfd3oqo 404 in 193ms
 GET /socket.io?EIO=4&transport=polling&t=0wfg607q 404 in 89ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
 GET /api/socket-health 200 in 57ms
 GET /api/socket-health 200 in 116ms
 GET /api/conversations 200 in 265ms
 GET /socket.io?EIO=4&transport=polling&t=0wgxj36q 404 in 199ms
 GET /socket.io?EIO=4&transport=polling&t=0wh0t0yc 404 in 99ms
 GET /api/socket-health 200 in 26ms
 GET /api/socket-health 200 in 115ms
 GET /socket.io?EIO=4&transport=polling&t=0wig6cmo 404 in 198ms
 GET /socket.io?EIO=4&transport=polling&t=0wijff1g 404 in 97ms
 GET /api/socket-health 200 in 26ms
 GET /api/socket-health 200 in 116ms
 GET /socket.io?EIO=4&transport=polling&t=0wjzwlt9 404 in 113ms
 GET /socket.io?EIO=4&transport=polling&t=0wk362ah 404 in 99ms
 GET /api/socket-health 200 in 29ms
 GET /api/socket-health 200 in 106ms
 GET /socket.io?EIO=4&transport=polling&t=0wljfard 404 in 190ms
 GET /socket.io?EIO=4&transport=polling&t=0wlmflsv 404 in 95ms
 GET /api/socket-health 200 in 30ms
 GET /api/socket-health 200 in 121ms
 GET /socket.io?EIO=4&transport=polling&t=0wn39s6h 404 in 205ms
 GET /socket.io?EIO=4&transport=polling&t=0wn6nlgo 404 in 103ms
 GET /api/socket-health 200 in 34ms
 GET /api/socket-health 200 in 169ms
 GET /socket.io?EIO=4&transport=polling&t=0won0324 404 in 272ms
 GET /socket.io?EIO=4&transport=polling&t=0worqm4m 404 in 123ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
=== FRIEND REQUEST GET START ===
 GET /api/socket-health 200 in 116ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
Request type: received User: sayantan2@gmail.com
âœ… Database connected
 GET /api/socket-health 200 in 153ms
 GET /socket.io?EIO=4&transport=polling&t=0wq9abmr 404 in 157ms
 POST /api/users/heartbeat 200 in 391ms
 GET /socket.io?EIO=4&transport=polling&t=0wqdvjae 404 in 114ms
âœ… Current user found: {
  id: new ObjectId('6901f85f42c5d010fa811206'),
  email: 'sayantan2@gmail.com',
  friendRequestsCount: 0,
  sentRequestsCount: 1
}
Processing received requests...
Raw friendRequests: []
Processed receivedRequests: []
Populating sender details...
Final populated requests: []
=== FRIEND REQUEST GET END (received) ===
 GET /api/friends/request?type=received 200 in 608ms
=== FRIEND REQUEST GET START ===
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
Request type: sent User: sayantan2@gmail.com
âœ… Database connected
 GET /api/friends 200 in 650ms
âœ… Current user found: {
  id: new ObjectId('6901f85f42c5d010fa811206'),
  email: 'sayantan2@gmail.com',
  friendRequestsCount: 0,
  sentRequestsCount: 1
}
Processing sent requests...
Raw sentRequests: [
  {
    from: new ObjectId('6901f85f42c5d010fa811206'),
    fromName: 'sayantan2',
    to: new ObjectId('6905adf16a22b7843b006183'),
    toName: 'sayantan3',
    status: 'pending',
    _id: new ObjectId('6905cdce14ad0d0f020b3985'),
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
Filtering sent request: { status: 'pending', to: new ObjectId('6905adf16a22b7843b006183') }
Mapping sent request: {
  from: new ObjectId('6901f85f42c5d010fa811206'),
  fromName: 'sayantan2',
  to: new ObjectId('6905adf16a22b7843b006183'),
  toName: 'sayantan3',
  status: 'pending',
  _id: new ObjectId('6905cdce14ad0d0f020b3985'),
  createdAt: 2025-11-01T09:07:26.707Z,
  updatedAt: 2025-11-01T09:07:26.707Z
}
Processed sentRequests: [
  {
    id: '6905cdce14ad0d0f020b3985',
    to: {
      id: '6905adf16a22b7843b006183',
      username: 'sayantan3',
      email: '',
      profilePicture: null
    },
    status: 'pending',
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
Populating recipient details...
Looking up recipient: 6905adf16a22b7843b006183
Found recipient: sayantan3
Final populated sent requests: [
  {
    id: '6905cdce14ad0d0f020b3985',
    to: {
      id: '6905adf16a22b7843b006183',
      username: 'sayantan3',
      email: 'sayantan3@gmail.com',
      profilePicture: undefined
    },
    status: 'pending',
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
=== FRIEND REQUEST GET END (sent) ===
 GET /api/friends/request?type=sent 200 in 111ms
 GET /api/socket-health 200 in 33ms
 GET /api/socket-health 200 in 128ms
 GET /socket.io?EIO=4&transport=polling&t=0wrq0bsc 404 in 277ms
 GET /socket.io?EIO=4&transport=polling&t=0wrtnma6 404 in 159ms
 GET /api/socket-health 200 in 33ms
 GET /api/socket-health 200 in 113ms
 GET /socket.io?EIO=4&transport=polling&t=0wt9n1s3 404 in 201ms
 GET /socket.io?EIO=4&transport=polling&t=0wtcu1gl 404 in 100ms
 GET /api/socket-health 200 in 30ms
 GET /api/socket-health 200 in 115ms
 GET /socket.io?EIO=4&transport=polling&t=0wutcun2 404 in 203ms
 GET /socket.io?EIO=4&transport=polling&t=0wuwkqn8 404 in 93ms
 GET /api/socket-health 200 in 34ms
 GET /api/socket-health 200 in 113ms
 GET /socket.io?EIO=4&transport=polling&t=0wwckjrk 404 in 201ms
 GET /socket.io?EIO=4&transport=polling&t=0wwfrvg1 404 in 98ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
 GET /api/auth/session 200 in 46ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
=== FRIEND REQUEST GET START ===
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
Request type: received User: sayantan2@gmail.com
âœ… Database connected
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
 GET /api/random-chat/queue 200 in 241ms
 GET /api/friends 200 in 245ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
 POST /api/users/heartbeat 200 in 310ms
 GET /api/random-chat/session 200 in 202ms
âœ… Current user found: {
  id: new ObjectId('6901f85f42c5d010fa811206'),
  email: 'sayantan2@gmail.com',
  friendRequestsCount: 0,
  sentRequestsCount: 1
}
Processing received requests...
Raw friendRequests: []
Processed receivedRequests: []
Populating sender details...
Final populated requests: []
=== FRIEND REQUEST GET END (received) ===
 GET /api/friends/request?type=received 200 in 647ms
=== FRIEND REQUEST GET START ===
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
Request type: sent User: sayantan2@gmail.com
âœ… Database connected
 GET /api/users/me 200 in 711ms
âœ… Current user found: {
  id: new ObjectId('6901f85f42c5d010fa811206'),
  email: 'sayantan2@gmail.com',
  friendRequestsCount: 0,
  sentRequestsCount: 1
}
Processing sent requests...
Raw sentRequests: [
  {
    from: new ObjectId('6901f85f42c5d010fa811206'),
    fromName: 'sayantan2',
    to: new ObjectId('6905adf16a22b7843b006183'),
    toName: 'sayantan3',
    status: 'pending',
    _id: new ObjectId('6905cdce14ad0d0f020b3985'),
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
Filtering sent request: { status: 'pending', to: new ObjectId('6905adf16a22b7843b006183') }
Mapping sent request: {
  from: new ObjectId('6901f85f42c5d010fa811206'),
  fromName: 'sayantan2',
  to: new ObjectId('6905adf16a22b7843b006183'),
  toName: 'sayantan3',
  status: 'pending',
  _id: new ObjectId('6905cdce14ad0d0f020b3985'),
  createdAt: 2025-11-01T09:07:26.707Z,
  updatedAt: 2025-11-01T09:07:26.707Z
}
Processed sentRequests: [
  {
    id: '6905cdce14ad0d0f020b3985',
    to: {
      id: '6905adf16a22b7843b006183',
      username: 'sayantan3',
      email: '',
      profilePicture: null
    },
    status: 'pending',
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
Populating recipient details...
Looking up recipient: 6905adf16a22b7843b006183
Found recipient: sayantan3
Final populated sent requests: [
  {
    id: '6905cdce14ad0d0f020b3985',
    to: {
      id: '6905adf16a22b7843b006183',
      username: 'sayantan3',
      email: 'sayantan3@gmail.com',
      profilePicture: undefined
    },
    status: 'pending',
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
=== FRIEND REQUEST GET END (sent) ===
 GET /api/friends/request?type=sent 200 in 173ms
 GET /api/socket-health 200 in 33ms
 GET /api/socket-health 200 in 127ms
 GET /socket.io?EIO=4&transport=polling&t=0wxw0gea 404 in 218ms
 GET /socket.io?EIO=4&transport=polling&t=0wxzmxvq 404 in 103ms
 GET /api/socket-health 200 in 27ms
 GET /api/socket-health 200 in 110ms
 GET /socket.io?EIO=4&transport=polling&t=0wzfmals 404 in 195ms
 GET /socket.io?EIO=4&transport=polling&t=0wzissx6 404 in 97ms
 GET /api/socket-health 200 in 28ms
 GET /api/socket-health 200 in 116ms
 GET /socket.io?EIO=4&transport=polling&t=0x0yz37e 404 in 202ms
 GET /socket.io?EIO=4&transport=polling&t=0x129nve 404 in 98ms
 GET /api/socket-health 200 in 23ms
 GET /api/socket-health 200 in 116ms
 GET /socket.io?EIO=4&transport=polling&t=0x38hpu2 404 in 122ms
 GET /socket.io?EIO=4&transport=polling&t=0x3bso18 404 in 101ms
 GET /api/socket-health 200 in 26ms
 GET /api/socket-health 200 in 119ms
 GET /socket.io?EIO=4&transport=polling&t=0x4tqjsf 404 in 203ms
 GET /socket.io?EIO=4&transport=polling&t=0x4x3j3u 404 in 94ms
 GET /api/socket-health 200 in 26ms
 GET /api/socket-health 200 in 104ms
 GET /socket.io?EIO=4&transport=polling&t=0x6dm698 404 in 191ms
 GET /socket.io?EIO=4&transport=polling&t=0x6gl3dp 404 in 101ms
 GET /api/socket-health 200 in 29ms
 GET /api/socket-health 200 in 114ms
 GET /socket.io?EIO=4&transport=polling&t=0x7x1ycl 404 in 202ms
 GET /socket.io?EIO=4&transport=polling&t=0x809d3f 404 in 94ms
 GET /api/socket-health 200 in 33ms
 GET /api/socket-health 200 in 112ms
 GET /socket.io?EIO=4&transport=polling&t=0x9gvfsv 404 in 201ms
 GET /socket.io?EIO=4&transport=polling&t=0x9k14cl 404 in 99ms
 GET /api/socket-health 200 in 28ms
 GET /api/socket-health 200 in 113ms
 GET /socket.io?EIO=4&transport=polling&t=0xb0cul0 404 in 197ms
 GET /socket.io?EIO=4&transport=polling&t=0xb3jn5h 404 in 90ms
 GET /api/socket-health 200 in 32ms
 GET /api/socket-health 200 in 105ms
 GET /socket.io?EIO=4&transport=polling&t=0xck0p93 404 in 195ms
 GET /socket.io?EIO=4&transport=polling&t=0xcmz1b6 404 in 101ms
 GET /api/socket-health 200 in 27ms
 GET /api/socket-health 200 in 115ms
 GET /socket.io?EIO=4&transport=polling&t=0xe3dg6k 404 in 204ms
 GET /socket.io?EIO=4&transport=polling&t=0xe6m4s9 404 in 94ms
 GET /api/socket-health 200 in 39ms
 GET /api/socket-health 200 in 134ms
 GET /socket.io?EIO=4&transport=polling&t=0xfn9dhh 404 in 233ms
 GET /socket.io?EIO=4&transport=polling&t=0xfr0kjo 404 in 112ms
 GET /api/socket-health 200 in 26ms
 GET /api/socket-health 200 in 114ms
 GET /socket.io?EIO=4&transport=polling&t=0xh6emgh 404 in 198ms
 GET /socket.io?EIO=4&transport=polling&t=0xh9muyq 404 in 91ms
 GET /api/socket-health 200 in 30ms
 GET /api/socket-health 200 in 121ms
 GET /socket.io?EIO=4&transport=polling&t=0xiq7dei 404 in 210ms
 GET /socket.io?EIO=4&transport=polling&t=0xitlh1k 404 in 102ms
 GET /api/socket-health 200 in 28ms
 GET /api/socket-health 200 in 117ms
 GET /socket.io?EIO=4&transport=polling&t=0xk9opmv 404 in 203ms
 GET /socket.io?EIO=4&transport=polling&t=0xkcyggd 404 in 93ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
=== FRIEND REQUEST GET START ===
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
Request type: received User: sayantan2@gmail.com
âœ… Database connected
 GET /api/conversations 200 in 478ms
 POST /api/users/heartbeat 200 in 531ms
âœ… Current user found: {
  id: new ObjectId('6901f85f42c5d010fa811206'),
  email: 'sayantan2@gmail.com',
  friendRequestsCount: 0,
  sentRequestsCount: 1
}
Processing received requests...
Raw friendRequests: []
Processed receivedRequests: []
Populating sender details...
Final populated requests: []
=== FRIEND REQUEST GET END (received) ===
 GET /api/friends/request?type=received 200 in 723ms
=== FRIEND REQUEST GET START ===
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
Request type: sent User: sayantan2@gmail.com
âœ… Database connected
âœ… Current user found: {
  id: new ObjectId('6901f85f42c5d010fa811206'),
  email: 'sayantan2@gmail.com',
  friendRequestsCount: 0,
  sentRequestsCount: 1
}
Processing sent requests...
Raw sentRequests: [
  {
    from: new ObjectId('6901f85f42c5d010fa811206'),
    fromName: 'sayantan2',
    to: new ObjectId('6905adf16a22b7843b006183'),
    toName: 'sayantan3',
    status: 'pending',
    _id: new ObjectId('6905cdce14ad0d0f020b3985'),
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
Filtering sent request: { status: 'pending', to: new ObjectId('6905adf16a22b7843b006183') }
Mapping sent request: {
  from: new ObjectId('6901f85f42c5d010fa811206'),
  fromName: 'sayantan2',
  to: new ObjectId('6905adf16a22b7843b006183'),
  toName: 'sayantan3',
  status: 'pending',
  _id: new ObjectId('6905cdce14ad0d0f020b3985'),
  createdAt: 2025-11-01T09:07:26.707Z,
  updatedAt: 2025-11-01T09:07:26.707Z
}
Processed sentRequests: [
  {
    id: '6905cdce14ad0d0f020b3985',
    to: {
      id: '6905adf16a22b7843b006183',
      username: 'sayantan3',
      email: '',
      profilePicture: null
    },
    status: 'pending',
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
Populating recipient details...
Looking up recipient: 6905adf16a22b7843b006183
Found recipient: sayantan3
Final populated sent requests: [
  {
    id: '6905cdce14ad0d0f020b3985',
    to: {
      id: '6905adf16a22b7843b006183',
      username: 'sayantan3',
      email: 'sayantan3@gmail.com',
      profilePicture: undefined
    },
    status: 'pending',
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
=== FRIEND REQUEST GET END (sent) ===
 GET /api/friends/request?type=sent 200 in 134ms
 GET /api/socket-health 200 in 33ms
 GET /api/socket-health 200 in 111ms
 GET /socket.io?EIO=4&transport=polling&t=0xlt8h5o 404 in 113ms
 GET /socket.io?EIO=4&transport=polling&t=0xlwde0j 404 in 100ms
 GET /api/socket-health 200 in 29ms
 GET /api/socket-health 200 in 118ms
 GET /socket.io?EIO=4&transport=polling&t=0xnckrjz 404 in 204ms
 GET /socket.io?EIO=4&transport=polling&t=0xnfxgl9 404 in 93ms
 GET /api/socket-health 200 in 34ms
 GET /api/socket-health 200 in 118ms
 GET /socket.io?EIO=4&transport=polling&t=0xowa0up 404 in 208ms
 GET /socket.io?EIO=4&transport=polling&t=0xozmijj 404 in 101ms
 GET /api/socket-health 200 in 28ms
 GET /api/socket-health 200 in 114ms
 GET /socket.io?EIO=4&transport=polling&t=0xqfwynr 404 in 191ms
 GET /socket.io?EIO=4&transport=polling&t=0xqj40fu 404 in 83ms
 GET /api/socket-health 200 in 33ms
 GET /api/socket-health 200 in 111ms
 GET /socket.io?EIO=4&transport=polling&t=0xrzdl7h 404 in 117ms
 GET /socket.io?EIO=4&transport=polling&t=0xs2iwcy 404 in 98ms
 GET /api/socket-health 200 in 26ms
 GET /api/socket-health 200 in 113ms
 GET /socket.io?EIO=4&transport=polling&t=0xtimgrh 404 in 201ms
 GET /socket.io?EIO=4&transport=polling&t=0xtltsju 404 in 95ms
 GET /api/socket-health 200 in 33ms
 GET /api/socket-health 200 in 108ms
 GET /socket.io?EIO=4&transport=polling&t=0xv2hr2k 404 in 193ms
 GET /socket.io?EIO=4&transport=polling&t=0xv5jumq 404 in 94ms
 GET /api/socket-health 200 in 28ms
 GET /api/socket-health 200 in 114ms
 GET /socket.io?EIO=4&transport=polling&t=0xwlw7ib 404 in 201ms
 GET /socket.io?EIO=4&transport=polling&t=0xwp40id 404 in 94ms
 GET /api/socket-health 200 in 55ms
 GET /api/socket-health 200 in 183ms
 GET /socket.io?EIO=4&transport=polling&t=0xy66ydw 404 in 576ms
 GET /socket.io?EIO=4&transport=polling&t=0xyba7bp 404 in 408ms
 GET /api/socket-health 200 in 27ms
 GET /api/socket-health 200 in 122ms
 GET /socket.io?EIO=4&transport=polling&t=0xzp4hxh 404 in 218ms
 GET /socket.io?EIO=4&transport=polling&t=0xzslica 404 in 106ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
=== FRIEND REQUEST GET START ===
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
Request type: received User: sayantan2@gmail.com
âœ… Database connected
âœ… Current user found: {
  id: new ObjectId('6901f85f42c5d010fa811206'),
  email: 'sayantan2@gmail.com',
  friendRequestsCount: 0,
  sentRequestsCount: 1
}
Processing received requests...
Raw friendRequests: []
Processed receivedRequests: []
Populating sender details...
Final populated requests: []
=== FRIEND REQUEST GET END (received) ===
 GET /api/friends/request?type=received 200 in 130ms
 GET /api/friends 200 in 135ms
=== FRIEND REQUEST GET START ===
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
Request type: sent User: sayantan2@gmail.com
âœ… Database connected
âœ… Current user found: {
  id: new ObjectId('6901f85f42c5d010fa811206'),
  email: 'sayantan2@gmail.com',
  friendRequestsCount: 0,
  sentRequestsCount: 1
}
Processing sent requests...
Raw sentRequests: [
  {
    from: new ObjectId('6901f85f42c5d010fa811206'),
    fromName: 'sayantan2',
    to: new ObjectId('6905adf16a22b7843b006183'),
    toName: 'sayantan3',
    status: 'pending',
    _id: new ObjectId('6905cdce14ad0d0f020b3985'),
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
Filtering sent request: { status: 'pending', to: new ObjectId('6905adf16a22b7843b006183') }
Mapping sent request: {
  from: new ObjectId('6901f85f42c5d010fa811206'),
  fromName: 'sayantan2',
  to: new ObjectId('6905adf16a22b7843b006183'),
  toName: 'sayantan3',
  status: 'pending',
  _id: new ObjectId('6905cdce14ad0d0f020b3985'),
  createdAt: 2025-11-01T09:07:26.707Z,
  updatedAt: 2025-11-01T09:07:26.707Z
}
Processed sentRequests: [
  {
    id: '6905cdce14ad0d0f020b3985',
    to: {
      id: '6905adf16a22b7843b006183',
      username: 'sayantan3',
      email: '',
      profilePicture: null
    },
    status: 'pending',
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
Populating recipient details...
Looking up recipient: 6905adf16a22b7843b006183
Found recipient: sayantan3
Final populated sent requests: [
  {
    id: '6905cdce14ad0d0f020b3985',
    to: {
      id: '6905adf16a22b7843b006183',
      username: 'sayantan3',
      email: 'sayantan3@gmail.com',
      profilePicture: undefined
    },
    status: 'pending',
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
=== FRIEND REQUEST GET END (sent) ===
 GET /api/friends/request?type=sent 200 in 125ms
 GET /api/socket-health 200 in 33ms
 GET /api/socket-health 200 in 118ms
 GET /socket.io?EIO=4&transport=polling&t=0y18lku2 404 in 207ms
 GET /socket.io?EIO=4&transport=polling&t=0y1bygbz 404 in 101ms
 GET /api/socket-health 200 in 27ms
 GET /api/socket-health 200 in 112ms
 GET /socket.io?EIO=4&transport=polling&t=0y2s9ylw 404 in 203ms
 GET /socket.io?EIO=4&transport=polling&t=0y2vel6s 404 in 98ms
 GET /api/socket-health 200 in 33ms
 GET /api/socket-health 200 in 114ms
 GET /socket.io?EIO=4&transport=polling&t=0y4c2bk8 404 in 115ms
 GET /socket.io?EIO=4&transport=polling&t=0y4fafu0 404 in 97ms
 GET /api/socket-health 200 in 28ms
 GET /api/socket-health 200 in 114ms
 GET /socket.io?EIO=4&transport=polling&t=0y5vbffi 404 in 200ms
 GET /socket.io?EIO=4&transport=polling&t=0y5yj5s1 404 in 93ms
 GET /api/socket-health 200 in 34ms
 GET /api/socket-health 200 in 112ms
 GET /socket.io?EIO=4&transport=polling&t=0y7er110 404 in 115ms
 GET /socket.io?EIO=4&transport=polling&t=0y7hyvd4 404 in 96ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
 POST /api/users/heartbeat 200 in 171ms
 GET /api/socket-health 200 in 64ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
 GET /api/conversations 200 in 411ms
 GET /api/socket-health 200 in 354ms
 GET /socket.io?EIO=4&transport=polling&t=0y8znbtt 404 in 342ms
 GET /socket.io?EIO=4&transport=polling&t=0y99nhuk 404 in 94ms
 GET /api/socket-health 200 in 26ms
 GET /api/socket-health 200 in 138ms
 GET /socket.io?EIO=4&transport=polling&t=0yahpxxy 404 in 206ms
 GET /socket.io?EIO=4&transport=polling&t=0yalltwc 404 in 98ms
 GET /api/socket-health 200 in 30ms
 GET /api/socket-health 200 in 116ms
 GET /socket.io?EIO=4&transport=polling&t=0yc1f5ln 404 in 121ms
 GET /socket.io?EIO=4&transport=polling&t=0yc4pveo 404 in 93ms
 GET /api/socket-health 200 in 25ms
 GET /api/socket-health 200 in 118ms
 GET /socket.io?EIO=4&transport=polling&t=0ydksn5o 404 in 112ms
 GET /socket.io?EIO=4&transport=polling&t=0ydo3by8 404 in 99ms
 GET /api/socket-health 200 in 42ms
 GET /api/socket-health 200 in 181ms
 GET /socket.io?EIO=4&transport=polling&t=0yf55tsz 404 in 311ms
 GET /socket.io?EIO=4&transport=polling&t=0yfa9f0r 404 in 159ms
 GET /api/socket-health 200 in 31ms
 GET /api/socket-health 200 in 127ms
 GET /socket.io?EIO=4&transport=polling&t=0ygo5r01 404 in 126ms
 GET /socket.io?EIO=4&transport=polling&t=0ygrpob7 404 in 113ms
 GET /api/socket-health 200 in 41ms
 GET /api/socket-health 200 in 134ms
 GET /socket.io?EIO=4&transport=polling&t=0yi84wtr 404 in 230ms
 GET /socket.io?EIO=4&transport=polling&t=0yibx5p7 404 in 118ms
 GET /api/socket-health 200 in 36ms
 GET /api/socket-health 200 in 127ms
 GET /socket.io?EIO=4&transport=polling&t=0yjrfsj7 404 in 215ms
 GET /socket.io?EIO=4&transport=polling&t=0yjv398x 404 in 106ms
 GET /api/socket-health 200 in 31ms
 GET /api/socket-health 200 in 133ms
 GET /socket.io?EIO=4&transport=polling&t=0ylasawl 404 in 133ms
 GET /socket.io?EIO=4&transport=polling&t=0ylej3w1 404 in 98ms
 GET /api/socket-health 200 in 29ms
 GET /api/socket-health 200 in 115ms
 GET /socket.io?EIO=4&transport=polling&t=0ymubp8t 404 in 114ms
 GET /socket.io?EIO=4&transport=polling&t=0ymxkfjg 404 in 133ms
 GET /api/socket-health 200 in 50ms
=== FRIEND REQUEST GET START ===
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
Request type: received User: sayantan2@gmail.com
âœ… Database connected
âœ… Current user found: {
  id: new ObjectId('6901f85f42c5d010fa811206'),
  email: 'sayantan2@gmail.com',
  friendRequestsCount: 0,
  sentRequestsCount: 1
}
Processing received requests...
Raw friendRequests: []
Processed receivedRequests: []
Populating sender details...
Final populated requests: []
=== FRIEND REQUEST GET END (received) ===
 GET /api/friends/request?type=received 200 in 181ms
 GET /api/socket-health 200 in 149ms
=== FRIEND REQUEST GET START ===
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
Request type: sent User: sayantan2@gmail.com
âœ… Database connected
 GET /socket.io?EIO=4&transport=polling&t=0yoerkwl 404 in 254ms
 GET /socket.io?EIO=4&transport=polling&t=0yoj136v 404 in 116ms
âœ… Current user found: {
  id: new ObjectId('6901f85f42c5d010fa811206'),
  email: 'sayantan2@gmail.com',
  friendRequestsCount: 0,
  sentRequestsCount: 1
}
Processing sent requests...
Raw sentRequests: [
  {
    from: new ObjectId('6901f85f42c5d010fa811206'),
    fromName: 'sayantan2',
    to: new ObjectId('6905adf16a22b7843b006183'),
    toName: 'sayantan3',
    status: 'pending',
    _id: new ObjectId('6905cdce14ad0d0f020b3985'),
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
Filtering sent request: { status: 'pending', to: new ObjectId('6905adf16a22b7843b006183') }
Mapping sent request: {
  from: new ObjectId('6901f85f42c5d010fa811206'),
  fromName: 'sayantan2',
  to: new ObjectId('6905adf16a22b7843b006183'),
  toName: 'sayantan3',
  status: 'pending',
  _id: new ObjectId('6905cdce14ad0d0f020b3985'),
  createdAt: 2025-11-01T09:07:26.707Z,
  updatedAt: 2025-11-01T09:07:26.707Z
}
Processed sentRequests: [
  {
    id: '6905cdce14ad0d0f020b3985',
    to: {
      id: '6905adf16a22b7843b006183',
      username: 'sayantan3',
      email: '',
      profilePicture: null
    },
    status: 'pending',
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
Populating recipient details...
Looking up recipient: 6905adf16a22b7843b006183
Found recipient: sayantan3
Final populated sent requests: [
  {
    id: '6905cdce14ad0d0f020b3985',
    to: {
      id: '6905adf16a22b7843b006183',
      username: 'sayantan3',
      email: 'sayantan3@gmail.com',
      profilePicture: undefined
    },
    status: 'pending',
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
=== FRIEND REQUEST GET END (sent) ===
 GET /api/friends/request?type=sent 200 in 212ms
 GET /api/socket-health 200 in 30ms
 GET /api/socket-health 200 in 131ms
 GET /socket.io?EIO=4&transport=polling&t=0ypxpukr 404 in 209ms
 GET /socket.io?EIO=4&transport=polling&t=0yq1ezg2 404 in 108ms
 GET /api/socket-health 200 in 27ms
 GET /api/socket-health 200 in 121ms
 GET /socket.io?EIO=4&transport=polling&t=0yrh8jwe 404 in 214ms
 GET /socket.io?EIO=4&transport=polling&t=0yrknssq 404 in 104ms
 GET /api/socket-health 200 in 33ms
 GET /api/socket-health 200 in 130ms
 GET /socket.io?EIO=4&transport=polling&t=0yt0y4xq 404 in 220ms
 GET /socket.io?EIO=4&transport=polling&t=0yt4m1t7 404 in 107ms
 GET /api/socket-health 200 in 29ms
 GET /api/socket-health 200 in 119ms
 GET /socket.io?EIO=4&transport=polling&t=0yuk90vx 404 in 121ms
 GET /socket.io?EIO=4&transport=polling&t=0yunmxza 404 in 101ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
 POST /api/users/heartbeat 200 in 170ms
 GET /api/socket-health 200 in 33ms
 GET /api/socket-health 200 in 112ms
 GET /socket.io?EIO=4&transport=polling&t=0yw3v6h2 404 in 115ms
 GET /socket.io?EIO=4&transport=polling&t=0yw71rpe 404 in 96ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
 GET /api/conversations 200 in 136ms
 GET /api/socket-health 200 in 34ms
 GET /api/socket-health 200 in 108ms
 GET /socket.io?EIO=4&transport=polling&t=0yxne76u 404 in 205ms
 GET /socket.io?EIO=4&transport=polling&t=0yxqg3t5 404 in 109ms
 GET /api/socket-health 200 in 36ms
 GET /api/socket-health 200 in 153ms
 GET /socket.io?EIO=4&transport=polling&t=0yz78wig 404 in 237ms
 GET /socket.io?EIO=4&transport=polling&t=0yzbjw8h 404 in 95ms
 GET /api/socket-health 200 in 31ms
 GET /api/socket-health 200 in 111ms
 GET /socket.io?EIO=4&transport=polling&t=0z0qj9cd 404 in 199ms
 GET /socket.io?EIO=4&transport=polling&t=0z0tof9o 404 in 100ms
 GET /api/socket-health 200 in 27ms
 GET /api/socket-health 200 in 114ms
 GET /socket.io?EIO=4&transport=polling&t=0z2a4qta 404 in 197ms
 GET /socket.io?EIO=4&transport=polling&t=0z2dbwzl 404 in 91ms
 GET /api/socket-health 200 in 29ms
 GET /api/socket-health 200 in 133ms
 GET /socket.io?EIO=4&transport=polling&t=0z3tfo7d 404 in 139ms
 GET /socket.io?EIO=4&transport=polling&t=0z3xdtv6 404 in 171ms
 GET /api/socket-health 200 in 32ms
 GET /api/socket-health 200 in 114ms
 GET /socket.io?EIO=4&transport=polling&t=0z5dbh2g 404 in 202ms
 GET /socket.io?EIO=4&transport=polling&t=0z5gkfjm 404 in 99ms
 GET /api/socket-health 200 in 26ms
 GET /api/socket-health 200 in 115ms
 GET /socket.io?EIO=4&transport=polling&t=0z6wfzwi 404 in 200ms
 GET /socket.io?EIO=4&transport=polling&t=0z6zo3os 404 in 91ms
 GET /api/socket-health 200 in 33ms
 GET /api/socket-health 200 in 108ms
 GET /socket.io?EIO=4&transport=polling&t=0z8g67py 404 in 193ms
 GET /socket.io?EIO=4&transport=polling&t=0z8j8epd 404 in 95ms
 GET /api/socket-health 200 in 26ms
 GET /api/socket-health 200 in 111ms
 GET /socket.io?EIO=4&transport=polling&t=0z9zkq8o 404 in 205ms
 GET /socket.io?EIO=4&transport=polling&t=0za2q1n0 404 in 103ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
=== FRIEND REQUEST GET START ===
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
Request type: received User: sayantan2@gmail.com
âœ… Database connected
 GET /api/friends 200 in 150ms
âœ… Current user found: {
  id: new ObjectId('6901f85f42c5d010fa811206'),
  email: 'sayantan2@gmail.com',
  friendRequestsCount: 0,
  sentRequestsCount: 1
}
Processing received requests...
Raw friendRequests: []
Processed receivedRequests: []
Populating sender details...
Final populated requests: []
=== FRIEND REQUEST GET END (received) ===
 GET /api/friends/request?type=received 200 in 467ms
=== FRIEND REQUEST GET START ===
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
Request type: sent User: sayantan2@gmail.com
âœ… Database connected
âœ… Current user found: {
  id: new ObjectId('6901f85f42c5d010fa811206'),
  email: 'sayantan2@gmail.com',
  friendRequestsCount: 0,
  sentRequestsCount: 1
}
Processing sent requests...
Raw sentRequests: [
  {
    from: new ObjectId('6901f85f42c5d010fa811206'),
    fromName: 'sayantan2',
    to: new ObjectId('6905adf16a22b7843b006183'),
    toName: 'sayantan3',
    status: 'pending',
    _id: new ObjectId('6905cdce14ad0d0f020b3985'),
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
Filtering sent request: { status: 'pending', to: new ObjectId('6905adf16a22b7843b006183') }
Mapping sent request: {
  from: new ObjectId('6901f85f42c5d010fa811206'),
  fromName: 'sayantan2',
  to: new ObjectId('6905adf16a22b7843b006183'),
  toName: 'sayantan3',
  status: 'pending',
  _id: new ObjectId('6905cdce14ad0d0f020b3985'),
  createdAt: 2025-11-01T09:07:26.707Z,
  updatedAt: 2025-11-01T09:07:26.707Z
}
Processed sentRequests: [
  {
    id: '6905cdce14ad0d0f020b3985',
    to: {
      id: '6905adf16a22b7843b006183',
      username: 'sayantan3',
      email: '',
      profilePicture: null
    },
    status: 'pending',
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
Populating recipient details...
Looking up recipient: 6905adf16a22b7843b006183
Found recipient: sayantan3
Final populated sent requests: [
  {
    id: '6905cdce14ad0d0f020b3985',
    to: {
      id: '6905adf16a22b7843b006183',
      username: 'sayantan3',
      email: 'sayantan3@gmail.com',
      profilePicture: undefined
    },
    status: 'pending',
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
=== FRIEND REQUEST GET END (sent) ===
 GET /api/friends/request?type=sent 200 in 146ms
 GET /api/socket-health 200 in 31ms
 GET /api/socket-health 200 in 152ms
 GET /socket.io?EIO=4&transport=polling&t=0zbjcmd0 404 in 282ms
 GET /socket.io?EIO=4&transport=polling&t=0zbnmvod 404 in 142ms
 GET /api/socket-health 200 in 40ms
 GET /api/socket-health 200 in 174ms
 GET /socket.io?EIO=4&transport=polling&t=0zd38j57 404 in 177ms
 GET /socket.io?EIO=4&transport=polling&t=0zd84hiw 404 in 128ms
 GET /api/socket-health 200 in 29ms
 GET /api/socket-health 200 in 123ms
 GET /socket.io?EIO=4&transport=polling&t=0zemi72x 404 in 222ms
 GET /socket.io?EIO=4&transport=polling&t=0zepzhrs 404 in 102ms
 GET /api/socket-health 200 in 129ms
 GET /api/socket-health 200 in 31ms
 GET /socket.io?EIO=4&transport=polling&t=0zg8s3cr 404 in 248ms
 GET /socket.io?EIO=4&transport=polling&t=0zg9pejh 404 in 216ms
 GET /api/socket-health 200 in 38ms
 GET /api/socket-health 200 in 126ms
 GET /socket.io?EIO=4&transport=polling&t=0zhprjav 404 in 128ms
 GET /socket.io?EIO=4&transport=polling&t=0zhtbsay 404 in 108ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
 POST /api/users/heartbeat 200 in 222ms
 GET /api/socket-health 200 in 32ms
 GET /api/socket-health 200 in 129ms
 GET /socket.io?EIO=4&transport=polling&t=0zj9a7h5 404 in 128ms
 GET /socket.io?EIO=4&transport=polling&t=0zjcwoyd 404 in 105ms
 GET /api/socket-health 200 in 49ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
 GET /api/socket-health 200 in 149ms
 GET /socket.io?EIO=4&transport=polling&t=0zktbr3o 404 in 153ms
 GET /api/conversations 200 in 232ms
 GET /socket.io?EIO=4&transport=polling&t=0zkxqzr8 404 in 111ms
 GET /api/socket-health 200 in 29ms
 GET /api/socket-health 200 in 122ms
 GET /socket.io?EIO=4&transport=polling&t=0zmc72j1 404 in 215ms
 GET /socket.io?EIO=4&transport=polling&t=0zmfn2s4 404 in 100ms
 GET /api/socket-health 200 in 34ms
 GET /api/socket-health 200 in 125ms
 GET /socket.io?EIO=4&transport=polling&t=0znvphpi 404 in 218ms
 GET /socket.io?EIO=4&transport=polling&t=0znz9p3n 404 in 106ms
 GET /api/socket-health 200 in 28ms
 GET /api/socket-health 200 in 124ms
 GET /socket.io?EIO=4&transport=polling&t=0zpf6xgh 404 in 217ms
 GET /socket.io?EIO=4&transport=polling&t=0zpip9n8 404 in 101ms
 GET /api/socket-health 200 in 30ms
 GET /api/socket-health 200 in 119ms
 GET /socket.io?EIO=4&transport=polling&t=0zqywmv2 404 in 121ms
 GET /socket.io?EIO=4&transport=polling&t=0zr2acf5 404 in 106ms
 GET /api/socket-health 200 in 29ms
 GET /api/socket-health 200 in 122ms
 GET /socket.io?EIO=4&transport=polling&t=0zsi9z4q 404 in 220ms
 GET /socket.io?EIO=4&transport=polling&t=0zslpw1p 404 in 104ms
 GET /api/socket-health 200 in 39ms
 GET /api/socket-health 200 in 133ms
 GET /socket.io?EIO=4&transport=polling&t=0zulwl88 404 in 132ms
 GET /socket.io?EIO=4&transport=polling&t=0zupmwhu 404 in 119ms
 GET /api/socket-health 200 in 30ms
 GET /socket.io?EIO=4&transport=polling&t=0zvlnft8 404 in 116ms
 GET /api/socket-health 200 in 29ms
 GET /socket.io?EIO=4&transport=polling&t=0zwdijcn 404 in 105ms
 GET /api/socket-health 200 in 28ms
 GET /socket.io?EIO=4&transport=polling&t=0zx57yj0 404 in 94ms
 GET /api/socket-health 200 in 53ms
 GET /socket.io?EIO=4&transport=polling&t=0zxy68hn 404 in 288ms
 GET /api/socket-health 200 in 108ms
=== FRIEND REQUEST GET START ===
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
Request type: received User: sayantan2@gmail.com
âœ… Database connected
âœ… Current user found: {
  id: new ObjectId('6901f85f42c5d010fa811206'),
  email: 'sayantan2@gmail.com',
  friendRequestsCount: 0,
  sentRequestsCount: 1
}
Processing received requests...
Raw friendRequests: []
Processed receivedRequests: []
Populating sender details...
Final populated requests: []
=== FRIEND REQUEST GET END (received) ===
 GET /api/friends/request?type=received 200 in 319ms
=== FRIEND REQUEST GET START ===
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
Request type: sent User: sayantan2@gmail.com
âœ… Database connected
 GET /socket.io?EIO=4&transport=polling&t=0zyr308y 404 in 230ms
âœ… Current user found: {
  id: new ObjectId('6901f85f42c5d010fa811206'),
  email: 'sayantan2@gmail.com',
  friendRequestsCount: 0,
  sentRequestsCount: 1
}
Processing sent requests...
Raw sentRequests: [
  {
    from: new ObjectId('6901f85f42c5d010fa811206'),
    fromName: 'sayantan2',
    to: new ObjectId('6905adf16a22b7843b006183'),
    toName: 'sayantan3',
    status: 'pending',
    _id: new ObjectId('6905cdce14ad0d0f020b3985'),
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
Filtering sent request: { status: 'pending', to: new ObjectId('6905adf16a22b7843b006183') }
Mapping sent request: {
  from: new ObjectId('6901f85f42c5d010fa811206'),
  fromName: 'sayantan2',
  to: new ObjectId('6905adf16a22b7843b006183'),
  toName: 'sayantan3',
  status: 'pending',
  _id: new ObjectId('6905cdce14ad0d0f020b3985'),
  createdAt: 2025-11-01T09:07:26.707Z,
  updatedAt: 2025-11-01T09:07:26.707Z
}
Processed sentRequests: [
  {
    id: '6905cdce14ad0d0f020b3985',
    to: {
      id: '6905adf16a22b7843b006183',
      username: 'sayantan3',
      email: '',
      profilePicture: null
    },
    status: 'pending',
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
Populating recipient details...
Looking up recipient: 6905adf16a22b7843b006183
Found recipient: sayantan3
Final populated sent requests: [
  {
    id: '6905cdce14ad0d0f020b3985',
    to: {
      id: '6905adf16a22b7843b006183',
      username: 'sayantan3',
      email: 'sayantan3@gmail.com',
      profilePicture: undefined
    },
    status: 'pending',
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
=== FRIEND REQUEST GET END (sent) ===
 GET /api/friends/request?type=sent 200 in 247ms
 GET /api/socket-health 200 in 29ms
 GET /socket.io?EIO=4&transport=polling&t=0zzge6xv 404 in 264ms
 GET /api/socket-health 200 in 42ms
 GET /socket.io?EIO=4&transport=polling&t=100iy48a 404 in 352ms
 GET /api/socket-health 200 in 49ms
 GET /api/socket-health 200 in 121ms
 GET /socket.io?EIO=4&transport=polling&t=101gj1jl 404 in 1253ms
 GET /socket.io?EIO=4&transport=polling&t=102lqqjb 404 in 216ms
 GET /api/socket-health 200 in 30ms
 GET /api/socket-health 200 in 131ms
 GET /socket.io?EIO=4&transport=polling&t=10433d91 404 in 275ms
 GET /socket.io?EIO=4&transport=polling&t=1046sf36 404 in 132ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
 GET /api/socket-health 200 in 58ms
 GET /api/socket-health 200 in 129ms
 GET /socket.io?EIO=4&transport=polling&t=105no7zh 404 in 221ms
 GET /socket.io?EIO=4&transport=polling&t=105rbymd 404 in 112ms
 POST /api/users/heartbeat 200 in 326ms
 GET /api/socket-health 200 in 30ms
 GET /api/socket-health 200 in 137ms
 GET /socket.io?EIO=4&transport=polling&t=1076bao1 404 in 227ms
 GET /socket.io?EIO=4&transport=polling&t=107a7ony 404 in 99ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
 GET /api/socket-health 200 in 58ms
 GET /api/socket-health 200 in 36ms
 GET /api/conversations 200 in 183ms
 GET /socket.io?EIO=4&transport=polling&t=108qmkm8 404 in 230ms
 GET /socket.io?EIO=4&transport=polling&t=108rokcv 404 in 108ms
 GET /api/socket-health 200 in 29ms
 GET /api/socket-health 200 in 119ms
 GET /socket.io?EIO=4&transport=polling&t=10a9c98f 404 in 228ms
 GET /socket.io?EIO=4&transport=polling&t=10acpeet 404 in 126ms
 GET /api/socket-health 200 in 32ms
 GET /api/socket-health 200 in 31ms
 GET /socket.io?EIO=4&transport=polling&t=10bt45er 404 in 207ms
 GET /socket.io?EIO=4&transport=polling&t=10bu1iaq 404 in 108ms
 GET /api/socket-health 200 in 30ms
 GET /api/socket-health 200 in 119ms
 GET /socket.io?EIO=4&transport=polling&t=10dcfwsu 404 in 215ms
 GET /socket.io?EIO=4&transport=polling&t=10dfshtg 404 in 104ms
 GET /api/socket-health 200 in 28ms
 GET /api/socket-health 200 in 113ms
 GET /socket.io?EIO=4&transport=polling&t=10ew5oya 404 in 197ms
 GET /socket.io?EIO=4&transport=polling&t=10ezbx2n 404 in 97ms
 GET /api/socket-health 200 in 25ms
 GET /api/socket-health 200 in 34ms
 GET /socket.io?EIO=4&transport=polling&t=10gfkjr6 404 in 192ms
 GET /socket.io?EIO=4&transport=polling&t=10ggkpnj 404 in 103ms
 GET /api/socket-health 200 in 26ms
 GET /api/socket-health 200 in 107ms
 GET /socket.io?EIO=4&transport=polling&t=10hywkrw 404 in 191ms
 GET /socket.io?EIO=4&transport=polling&t=10i1whm0 404 in 98ms
 GET /api/socket-health 200 in 26ms
 GET /api/socket-health 200 in 33ms
 GET /socket.io?EIO=4&transport=polling&t=10jironv 404 in 197ms
 GET /socket.io?EIO=4&transport=polling&t=10jjr3a5 404 in 101ms
=== FRIEND REQUEST GET START ===
 GET /api/socket-health 200 in 67ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
Request type: received User: sayantan2@gmail.com
âœ… Database connected
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
âœ… Current user found: {
  id: new ObjectId('6901f85f42c5d010fa811206'),
  email: 'sayantan2@gmail.com',
  friendRequestsCount: 0,
  sentRequestsCount: 1
}
Processing received requests...
Raw friendRequests: []
Processed receivedRequests: []
Populating sender details...
Final populated requests: []
=== FRIEND REQUEST GET END (received) ===
 GET /api/friends/request?type=received 200 in 123ms
 GET /api/socket-health 200 in 132ms
=== FRIEND REQUEST GET START ===
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
Request type: sent User: sayantan2@gmail.com
âœ… Database connected
 GET /socket.io?EIO=4&transport=polling&t=10l3q7jn 404 in 213ms
 GET /socket.io?EIO=4&transport=polling&t=10l7ldqt 404 in 105ms
âœ… Current user found: {
  id: new ObjectId('6901f85f42c5d010fa811206'),
  email: 'sayantan2@gmail.com',
  friendRequestsCount: 0,
  sentRequestsCount: 1
}
Processing sent requests...
Raw sentRequests: [
  {
    from: new ObjectId('6901f85f42c5d010fa811206'),
    fromName: 'sayantan2',
    to: new ObjectId('6905adf16a22b7843b006183'),
    toName: 'sayantan3',
    status: 'pending',
    _id: new ObjectId('6905cdce14ad0d0f020b3985'),
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
Filtering sent request: { status: 'pending', to: new ObjectId('6905adf16a22b7843b006183') }
Mapping sent request: {
  from: new ObjectId('6901f85f42c5d010fa811206'),
  fromName: 'sayantan2',
  to: new ObjectId('6905adf16a22b7843b006183'),
  toName: 'sayantan3',
  status: 'pending',
  _id: new ObjectId('6905cdce14ad0d0f020b3985'),
  createdAt: 2025-11-01T09:07:26.707Z,
  updatedAt: 2025-11-01T09:07:26.707Z
}
Processed sentRequests: [
  {
    id: '6905cdce14ad0d0f020b3985',
    to: {
      id: '6905adf16a22b7843b006183',
      username: 'sayantan3',
      email: '',
      profilePicture: null
    },
    status: 'pending',
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
Populating recipient details...
Looking up recipient: 6905adf16a22b7843b006183
Found recipient: sayantan3
Final populated sent requests: [
  {
    id: '6905cdce14ad0d0f020b3985',
    to: {
      id: '6905adf16a22b7843b006183',
      username: 'sayantan3',
      email: 'sayantan3@gmail.com',
      profilePicture: undefined
    },
    status: 'pending',
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
=== FRIEND REQUEST GET END (sent) ===
 GET /api/friends/request?type=sent 200 in 200ms
 GET /api/friends 200 in 584ms
 GET /api/socket-health 200 in 27ms
 GET /api/socket-health 200 in 157ms
 GET /socket.io?EIO=4&transport=polling&t=10mlqdjy 404 in 137ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
=== FRIEND REQUEST GET START ===
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
Request type: received User: sayantan2@gmail.com
âœ… Database connected
 GET /api/socket-health 200 in 854ms
 GET /api/socket-health 200 in 79ms
 GET /socket.io?EIO=4&transport=polling&t=11h0iya6 404 in 609ms
 GET /socket.io?EIO=4&transport=polling&t=11h2q4yx 404 in 336ms
 GET /api/conversations 200 in 1736ms
 POST /api/users/heartbeat 200 in 2120ms
âœ… Current user found: {
  id: new ObjectId('6901f85f42c5d010fa811206'),
  email: 'sayantan2@gmail.com',
  friendRequestsCount: 0,
  sentRequestsCount: 1
}
Processing received requests...
Raw friendRequests: []
Processed receivedRequests: []
Populating sender details...
Final populated requests: []
=== FRIEND REQUEST GET END (received) ===
 GET /api/friends/request?type=received 200 in 1941ms
=== FRIEND REQUEST GET START ===
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
Request type: sent User: sayantan2@gmail.com
âœ… Database connected
âœ… Current user found: {
  id: new ObjectId('6901f85f42c5d010fa811206'),
  email: 'sayantan2@gmail.com',
  friendRequestsCount: 0,
  sentRequestsCount: 1
}
Processing sent requests...
Raw sentRequests: [
  {
    from: new ObjectId('6901f85f42c5d010fa811206'),
    fromName: 'sayantan2',
    to: new ObjectId('6905adf16a22b7843b006183'),
    toName: 'sayantan3',
    status: 'pending',
    _id: new ObjectId('6905cdce14ad0d0f020b3985'),
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
Filtering sent request: { status: 'pending', to: new ObjectId('6905adf16a22b7843b006183') }
Mapping sent request: {
  from: new ObjectId('6901f85f42c5d010fa811206'),
  fromName: 'sayantan2',
  to: new ObjectId('6905adf16a22b7843b006183'),
  toName: 'sayantan3',
  status: 'pending',
  _id: new ObjectId('6905cdce14ad0d0f020b3985'),
  createdAt: 2025-11-01T09:07:26.707Z,
  updatedAt: 2025-11-01T09:07:26.707Z
}
Processed sentRequests: [
  {
    id: '6905cdce14ad0d0f020b3985',
    to: {
      id: '6905adf16a22b7843b006183',
      username: 'sayantan3',
      email: '',
      profilePicture: null
    },
    status: 'pending',
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
Populating recipient details...
Looking up recipient: 6905adf16a22b7843b006183
Found recipient: sayantan3
Final populated sent requests: [
  {
    id: '6905cdce14ad0d0f020b3985',
    to: {
      id: '6905adf16a22b7843b006183',
      username: 'sayantan3',
      email: 'sayantan3@gmail.com',
      profilePicture: undefined
    },
    status: 'pending',
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
=== FRIEND REQUEST GET END (sent) ===
 GET /api/friends/request?type=sent 200 in 161ms
 GET /api/socket-health 200 in 42ms
 GET /api/socket-health 200 in 150ms
 GET /socket.io?EIO=4&transport=polling&t=11j0tqd5 404 in 266ms
 GET /socket.io?EIO=4&transport=polling&t=11j51d6i 404 in 126ms
 GET /api/socket-health 200 in 31ms
 GET /api/socket-health 200 in 43ms
 GET /socket.io?EIO=4&transport=polling&t=11kjyje9 404 in 236ms
 GET /socket.io?EIO=4&transport=polling&t=11kl6few 404 in 117ms
 GET /api/socket-health 200 in 30ms
 GET /api/socket-health 200 in 27ms
 GET /socket.io?EIO=4&transport=polling&t=11m3ir23 404 in 203ms
 GET /socket.io?EIO=4&transport=polling&t=11m4bmtg 404 in 106ms
 GET /api/socket-health 200 in 23ms
 GET /api/socket-health 200 in 116ms
 GET /socket.io?EIO=4&transport=polling&t=11nmtkcv 404 in 207ms
 GET /socket.io?EIO=4&transport=polling&t=11nq2wb8 404 in 105ms
 GET /api/socket-health 200 in 32ms
 GET /api/socket-health 200 in 28ms
 GET /socket.io?EIO=4&transport=polling&t=11p6wyvz 404 in 203ms
 GET /socket.io?EIO=4&transport=polling&t=11p7pdit 404 in 110ms
 GET /api/socket-health 200 in 24ms
 GET /api/socket-health 200 in 123ms
 GET /socket.io?EIO=4&transport=polling&t=11qq5ofz 404 in 207ms
 GET /socket.io?EIO=4&transport=polling&t=11qtmdd0 404 in 93ms
 GET /api/socket-health 200 in 28ms
 GET /api/socket-health 200 in 106ms
 GET /socket.io?EIO=4&transport=polling&t=11s9sr5x 404 in 192ms
 GET /socket.io?EIO=4&transport=polling&t=11scrway 404 in 98ms
 GET /api/socket-health 200 in 23ms
 GET /api/socket-health 200 in 32ms
 GET /socket.io?EIO=4&transport=polling&t=11tt6l4z 404 in 222ms
 GET /socket.io?EIO=4&transport=polling&t=11tu4i21 404 in 119ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
=== FRIEND REQUEST GET START ===
 GET /api/socket-health 200 in 80ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
Request type: received User: sayantan2@gmail.com
âœ… Database connected
âœ… Current user found: {
  id: new ObjectId('6901f85f42c5d010fa811206'),
  email: 'sayantan2@gmail.com',
  friendRequestsCount: 0,
  sentRequestsCount: 1
}
Processing received requests...
Raw friendRequests: []
Processed receivedRequests: []
Populating sender details...
Final populated requests: []
=== FRIEND REQUEST GET END (received) ===
 GET /api/friends/request?type=received 200 in 194ms
 GET /api/friends 200 in 196ms
 GET /api/socket-health 200 in 131ms
=== FRIEND REQUEST GET START ===
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
Request type: sent User: sayantan2@gmail.com
âœ… Database connected
 GET /socket.io?EIO=4&transport=polling&t=11vf84g7 404 in 247ms
 GET /socket.io?EIO=4&transport=polling&t=11vj372a 404 in 123ms
âœ… Current user found: {
  id: new ObjectId('6901f85f42c5d010fa811206'),
  email: 'sayantan2@gmail.com',
  friendRequestsCount: 0,
  sentRequestsCount: 1
}
Processing sent requests...
Raw sentRequests: [
  {
    from: new ObjectId('6901f85f42c5d010fa811206'),
    fromName: 'sayantan2',
    to: new ObjectId('6905adf16a22b7843b006183'),
    toName: 'sayantan3',
    status: 'pending',
    _id: new ObjectId('6905cdce14ad0d0f020b3985'),
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
Filtering sent request: { status: 'pending', to: new ObjectId('6905adf16a22b7843b006183') }
Mapping sent request: {
  from: new ObjectId('6901f85f42c5d010fa811206'),
  fromName: 'sayantan2',
  to: new ObjectId('6905adf16a22b7843b006183'),
  toName: 'sayantan3',
  status: 'pending',
  _id: new ObjectId('6905cdce14ad0d0f020b3985'),
  createdAt: 2025-11-01T09:07:26.707Z,
  updatedAt: 2025-11-01T09:07:26.707Z
}
Processed sentRequests: [
  {
    id: '6905cdce14ad0d0f020b3985',
    to: {
      id: '6905adf16a22b7843b006183',
      username: 'sayantan3',
      email: '',
      profilePicture: null
    },
    status: 'pending',
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
Populating recipient details...
Looking up recipient: 6905adf16a22b7843b006183
Found recipient: sayantan3
Final populated sent requests: [
  {
    id: '6905cdce14ad0d0f020b3985',
    to: {
      id: '6905adf16a22b7843b006183',
      username: 'sayantan3',
      email: 'sayantan3@gmail.com',
      profilePicture: undefined
    },
    status: 'pending',
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
=== FRIEND REQUEST GET END (sent) ===
 GET /api/friends/request?type=sent 200 in 206ms
 GET /api/socket-health 200 in 24ms
 GET /api/socket-health 200 in 127ms
 GET /socket.io?EIO=4&transport=polling&t=11wwbi9n 404 in 194ms
 GET /socket.io?EIO=4&transport=polling&t=11wzx5qf 404 in 99ms
 GET /api/socket-health 200 in 21ms
 GET /api/socket-health 200 in 27ms
 GET /socket.io?EIO=4&transport=polling&t=11yfv6kr 404 in 215ms
 GET /socket.io?EIO=4&transport=polling&t=11ygn00i 404 in 111ms
 GET /api/socket-health 200 in 26ms
 GET /api/socket-health 200 in 122ms
 GET /socket.io?EIO=4&transport=polling&t=11zzftw3 404 in 197ms
 GET /socket.io?EIO=4&transport=polling&t=1202vac7 404 in 105ms
 GET /api/socket-health 200 in 24ms
 GET /api/socket-health 200 in 130ms
 GET /socket.io?EIO=4&transport=polling&t=121j5sbo 404 in 227ms
 GET /socket.io?EIO=4&transport=polling&t=121mut4f 404 in 110ms
 GET /api/socket-health 200 in 26ms
 GET /api/socket-health 200 in 40ms
 GET /socket.io?EIO=4&transport=polling&t=1232hrua 404 in 230ms
 GET /socket.io?EIO=4&transport=polling&t=1233n45b 404 in 113ms
 GET /api/socket-health 200 in 25ms
 GET /api/socket-health 200 in 121ms
 GET /socket.io?EIO=4&transport=polling&t=124lw215 404 in 226ms
 GET /socket.io?EIO=4&transport=polling&t=124pbtcp 404 in 113ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
 GET /api/conversations 200 in 116ms
 GET /api/socket-health 200 in 32ms
 GET /api/socket-health 200 in 122ms
 GET /socket.io?EIO=4&transport=polling&t=12660k8h 404 in 215ms
 GET /socket.io?EIO=4&transport=polling&t=1269fx2f 404 in 106ms
 GET /api/socket-health 200 in 23ms
 GET /api/socket-health 200 in 37ms
 GET /socket.io?EIO=4&transport=polling&t=127p9t1j 404 in 205ms
 GET /socket.io?EIO=4&transport=polling&t=127qbn0b 404 in 107ms
 GET /api/socket-health 200 in 31ms
 GET /api/socket-health 200 in 28ms
 GET /socket.io?EIO=4&transport=polling&t=1298t8wu 404 in 211ms
 GET /socket.io?EIO=4&transport=polling&t=1299m8zq 404 in 108ms
 GET /api/socket-health 200 in 27ms
 GET /api/socket-health 200 in 123ms
 GET /socket.io?EIO=4&transport=polling&t=12ase55g 404 in 231ms
 GET /socket.io?EIO=4&transport=polling&t=12avuz2g 404 in 123ms
 GET /api/socket-health 200 in 28ms
 GET /api/socket-health 200 in 107ms
 GET /socket.io?EIO=4&transport=polling&t=12cbul0a 404 in 192ms
 GET /socket.io?EIO=4&transport=polling&t=12cevmcc 404 in 97ms
 GET /api/socket-health 200 in 26ms
 GET /api/socket-health 200 in 34ms
 GET /socket.io?EIO=4&transport=polling&t=12dvdof5 404 in 208ms
 GET /socket.io?EIO=4&transport=polling&t=12dwc2nr 404 in 106ms
 GET /api/socket-health 200 in 31ms
 GET /api/socket-health 200 in 118ms
 GET /socket.io?EIO=4&transport=polling&t=12ffb5yh 404 in 216ms
 GET /socket.io?EIO=4&transport=polling&t=12finmys 404 in 109ms
 GET /api/socket-health 200 in 24ms
 GET /api/socket-health 200 in 34ms
 GET /socket.io?EIO=4&transport=polling&t=12gymep7 404 in 214ms
 GET /socket.io?EIO=4&transport=polling&t=12gzluxo 404 in 110ms
 GET /api/socket-health 200 in 30ms
 GET /api/socket-health 200 in 27ms
 GET /socket.io?EIO=4&transport=polling&t=12iib8ir 404 in 242ms
 GET /socket.io?EIO=4&transport=polling&t=12ij395r 404 in 122ms
=== FRIEND REQUEST GET START ===
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
Request type: received User: sayantan2@gmail.com
âœ… Database connected
âœ… Current user found: {
  id: new ObjectId('6901f85f42c5d010fa811206'),
  email: 'sayantan2@gmail.com',
  friendRequestsCount: 0,
  sentRequestsCount: 1
}
Processing received requests...
Raw friendRequests: []
Processed receivedRequests: []
Populating sender details...
Final populated requests: []
=== FRIEND REQUEST GET END (received) ===
 GET /api/friends/request?type=received 200 in 88ms
=== FRIEND REQUEST GET START ===
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
Request type: sent User: sayantan2@gmail.com
âœ… Database connected
âœ… Current user found: {
  id: new ObjectId('6901f85f42c5d010fa811206'),
  email: 'sayantan2@gmail.com',
  friendRequestsCount: 0,
  sentRequestsCount: 1
}
Processing sent requests...
Raw sentRequests: [
  {
    from: new ObjectId('6901f85f42c5d010fa811206'),
    fromName: 'sayantan2',
    to: new ObjectId('6905adf16a22b7843b006183'),
    toName: 'sayantan3',
    status: 'pending',
    _id: new ObjectId('6905cdce14ad0d0f020b3985'),
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
Filtering sent request: { status: 'pending', to: new ObjectId('6905adf16a22b7843b006183') }
Mapping sent request: {
  from: new ObjectId('6901f85f42c5d010fa811206'),
  fromName: 'sayantan2',
  to: new ObjectId('6905adf16a22b7843b006183'),
  toName: 'sayantan3',
  status: 'pending',
  _id: new ObjectId('6905cdce14ad0d0f020b3985'),
  createdAt: 2025-11-01T09:07:26.707Z,
  updatedAt: 2025-11-01T09:07:26.707Z
}
Processed sentRequests: [
  {
    id: '6905cdce14ad0d0f020b3985',
    to: {
      id: '6905adf16a22b7843b006183',
      username: 'sayantan3',
      email: '',
      profilePicture: null
    },
    status: 'pending',
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
Populating recipient details...
Looking up recipient: 6905adf16a22b7843b006183
Found recipient: sayantan3
Final populated sent requests: [
  {
    id: '6905cdce14ad0d0f020b3985',
    to: {
      id: '6905adf16a22b7843b006183',
      username: 'sayantan3',
      email: 'sayantan3@gmail.com',
      profilePicture: undefined
    },
    status: 'pending',
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
=== FRIEND REQUEST GET END (sent) ===
 GET /api/friends/request?type=sent 200 in 117ms
 GET /api/socket-health 200 in 24ms
 GET /api/socket-health 200 in 129ms
 GET /socket.io?EIO=4&transport=polling&t=12k1ick1 404 in 239ms
 GET /socket.io?EIO=4&transport=polling&t=12k56ctf 404 in 123ms
 GET /api/socket-health 200 in 37ms
 GET /api/socket-health 200 in 39ms
 GET /socket.io?EIO=4&transport=polling&t=12lle1vs 404 in 243ms
 GET /socket.io?EIO=4&transport=polling&t=12lmi8kg 404 in 126ms
 GET /api/socket-health 200 in 24ms
 GET /api/socket-health 200 in 127ms
 GET /socket.io?EIO=4&transport=polling&t=12n4y57h 404 in 247ms
 GET /socket.io?EIO=4&transport=polling&t=12n8jax6 404 in 133ms
 GET /api/socket-health 200 in 24ms
 GET /api/socket-health 200 in 134ms
 GET /socket.io?EIO=4&transport=polling&t=12ooct8v 404 in 231ms
 GET /socket.io?EIO=4&transport=polling&t=12os3m2b 404 in 114ms
 GET /api/socket-health 200 in 38ms
 GET /api/socket-health 200 in 38ms
 GET /socket.io?EIO=4&transport=polling&t=12q87r16 404 in 284ms
 GET /socket.io?EIO=4&transport=polling&t=12q9d7k8 404 in 137ms
 GET /api/socket-health 200 in 33ms
 GET /api/socket-health 200 in 148ms
 GET /socket.io?EIO=4&transport=polling&t=12rri3zj 404 in 264ms
 GET /socket.io?EIO=4&transport=polling&t=12rvpqa1 404 in 134ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
 GET /api/socket-health 200 in 45ms
 GET /api/socket-health 200 in 123ms
 GET /api/conversations 200 in 261ms
 GET /socket.io?EIO=4&transport=polling&t=12tbfk39 404 in 211ms
 GET /socket.io?EIO=4&transport=polling&t=12teyfri 404 in 104ms
 GET /api/socket-health 200 in 22ms
 GET /api/socket-health 200 in 110ms
 GET /socket.io?EIO=4&transport=polling&t=12uuofxi 404 in 195ms
 GET /socket.io?EIO=4&transport=polling&t=12uxtsgz 404 in 97ms
 GET /api/socket-health 200 in 23ms
 GET /api/socket-health 200 in 111ms
 GET /socket.io?EIO=4&transport=polling&t=12we7o2o 404 in 186ms
 GET /socket.io?EIO=4&transport=polling&t=12whcii2 404 in 97ms
 GET /api/socket-health 200 in 27ms
 GET /api/socket-health 200 in 34ms
 GET /socket.io?EIO=4&transport=polling&t=12xxtftc 404 in 221ms
 GET /socket.io?EIO=4&transport=polling&t=12xyu65u 404 in 120ms
 GET /api/socket-health 200 in 29ms
 GET /api/socket-health 200 in 115ms
 GET /socket.io?EIO=4&transport=polling&t=12zhdvm2 404 in 203ms
 GET /socket.io?EIO=4&transport=polling&t=12zkmf6k 404 in 98ms
 GET /api/socket-health 200 in 22ms
 GET /api/socket-health 200 in 111ms
 GET /socket.io?EIO=4&transport=polling&t=1310qo2j 404 in 201ms
 GET /socket.io?EIO=4&transport=polling&t=1313u5bx 404 in 102ms
 GET /api/socket-health 200 in 24ms
 GET /api/socket-health 200 in 28ms
 GET /socket.io?EIO=4&transport=polling&t=132khagp 404 in 209ms
 GET /socket.io?EIO=4&transport=polling&t=132la69w 404 in 117ms
 GET /api/socket-health 200 in 22ms
 GET /api/socket-health 200 in 32ms
 GET /socket.io?EIO=4&transport=polling&t=1343wk4y 404 in 213ms
 GET /socket.io?EIO=4&transport=polling&t=1344t9uz 404 in 113ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
=== FRIEND REQUEST GET START ===
 GET /api/socket-health 200 in 74ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
Request type: received User: sayantan2@gmail.com
âœ… Database connected
 GET /api/friends 200 in 201ms
 GET /api/socket-health 200 in 136ms
 GET /socket.io?EIO=4&transport=polling&t=136f26gh 404 in 224ms
 GET /socket.io?EIO=4&transport=polling&t=136j0h9d 404 in 106ms
âœ… Current user found: {
  id: new ObjectId('6901f85f42c5d010fa811206'),
  email: 'sayantan2@gmail.com',
  friendRequestsCount: 0,
  sentRequestsCount: 1
}
Processing received requests...
Raw friendRequests: []
Processed receivedRequests: []
Populating sender details...
Final populated requests: []
=== FRIEND REQUEST GET END (received) ===
 GET /api/friends/request?type=received 200 in 631ms
=== FRIEND REQUEST GET START ===
 POST /api/users/heartbeat 200 in 678ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
Request type: sent User: sayantan2@gmail.com
âœ… Database connected
âœ… Current user found: {
  id: new ObjectId('6901f85f42c5d010fa811206'),
  email: 'sayantan2@gmail.com',
  friendRequestsCount: 0,
  sentRequestsCount: 1
}
Processing sent requests...
Raw sentRequests: [
  {
    from: new ObjectId('6901f85f42c5d010fa811206'),
    fromName: 'sayantan2',
    to: new ObjectId('6905adf16a22b7843b006183'),
    toName: 'sayantan3',
    status: 'pending',
    _id: new ObjectId('6905cdce14ad0d0f020b3985'),
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
Filtering sent request: { status: 'pending', to: new ObjectId('6905adf16a22b7843b006183') }
Mapping sent request: {
  from: new ObjectId('6901f85f42c5d010fa811206'),
  fromName: 'sayantan2',
  to: new ObjectId('6905adf16a22b7843b006183'),
  toName: 'sayantan3',
  status: 'pending',
  _id: new ObjectId('6905cdce14ad0d0f020b3985'),
  createdAt: 2025-11-01T09:07:26.707Z,
  updatedAt: 2025-11-01T09:07:26.707Z
}
Processed sentRequests: [
  {
    id: '6905cdce14ad0d0f020b3985',
    to: {
      id: '6905adf16a22b7843b006183',
      username: 'sayantan3',
      email: '',
      profilePicture: null
    },
    status: 'pending',
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
Populating recipient details...
Looking up recipient: 6905adf16a22b7843b006183
Found recipient: sayantan3
Final populated sent requests: [
  {
    id: '6905cdce14ad0d0f020b3985',
    to: {
      id: '6905adf16a22b7843b006183',
      username: 'sayantan3',
      email: 'sayantan3@gmail.com',
      profilePicture: undefined
    },
    status: 'pending',
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
=== FRIEND REQUEST GET END (sent) ===
 GET /api/friends/request?type=sent 200 in 143ms
 GET /api/socket-health 200 in 33ms
 GET /api/socket-health 200 in 28ms
 GET /socket.io?EIO=4&transport=polling&t=137yzwxk 404 in 213ms
 GET /socket.io?EIO=4&transport=polling&t=137ztqcw 404 in 109ms
 GET /api/socket-health 200 in 23ms
 GET /api/socket-health 200 in 113ms
 GET /socket.io?EIO=4&transport=polling&t=139i5y7j 404 in 203ms
 GET /socket.io?EIO=4&transport=polling&t=139lccuk 404 in 103ms
 GET /api/socket-health 200 in 24ms
 GET /api/socket-health 200 in 25ms
 GET /socket.io?EIO=4&transport=polling&t=13b1p3s3 404 in 205ms
 GET /socket.io?EIO=4&transport=polling&t=13b2fk9f 404 in 104ms
 GET /api/socket-health 200 in 53ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
 GET /api/auth/session 200 in 1080ms
 GET /api/socket-health 200 in 1155ms
=== FRIEND REQUEST GET START ===
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
Request type: received User: sayantan2@gmail.com
âœ… Database connected
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
âœ… Current user found: {
  id: new ObjectId('6901f85f42c5d010fa811206'),
  email: 'sayantan2@gmail.com',
  friendRequestsCount: 0,
  sentRequestsCount: 1
}
Processing received requests...
Raw friendRequests: []
Processed receivedRequests: []
Populating sender details...
Final populated requests: []
=== FRIEND REQUEST GET END (received) ===
 GET /api/friends/request?type=received 200 in 169ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
 GET /api/friends 200 in 204ms
 GET /socket.io?EIO=4&transport=polling&t=13cmevkv 404 in 323ms
=== FRIEND REQUEST GET START ===
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
Request type: sent User: sayantan2@gmail.com
âœ… Database connected
 POST /api/users/heartbeat 200 in 309ms
âœ… Current user found: {
  id: new ObjectId('6901f85f42c5d010fa811206'),
  email: 'sayantan2@gmail.com',
  friendRequestsCount: 0,
  sentRequestsCount: 1
}
Processing sent requests...
Raw sentRequests: [
  {
    from: new ObjectId('6901f85f42c5d010fa811206'),
    fromName: 'sayantan2',
    to: new ObjectId('6905adf16a22b7843b006183'),
    toName: 'sayantan3',
    status: 'pending',
    _id: new ObjectId('6905cdce14ad0d0f020b3985'),
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
Filtering sent request: { status: 'pending', to: new ObjectId('6905adf16a22b7843b006183') }
Mapping sent request: {
  from: new ObjectId('6901f85f42c5d010fa811206'),
  fromName: 'sayantan2',
  to: new ObjectId('6905adf16a22b7843b006183'),
  toName: 'sayantan3',
  status: 'pending',
  _id: new ObjectId('6905cdce14ad0d0f020b3985'),
  createdAt: 2025-11-01T09:07:26.707Z,
  updatedAt: 2025-11-01T09:07:26.707Z
}
Processed sentRequests: [
  {
    id: '6905cdce14ad0d0f020b3985',
    to: {
      id: '6905adf16a22b7843b006183',
      username: 'sayantan3',
      email: '',
      profilePicture: null
    },
    status: 'pending',
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
Populating recipient details...
Looking up recipient: 6905adf16a22b7843b006183
 GET /api/users/me 200 in 303ms
 GET /socket.io?EIO=4&transport=polling&t=13dijag3 404 in 125ms
Found recipient: sayantan3
Final populated sent requests: [
  {
    id: '6905cdce14ad0d0f020b3985',
    to: {
      id: '6905adf16a22b7843b006183',
      username: 'sayantan3',
      email: 'sayantan3@gmail.com',
      profilePicture: undefined
    },
    status: 'pending',
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
=== FRIEND REQUEST GET END (sent) ===
 GET /api/friends/request?type=sent 200 in 184ms
 GET /api/random-chat/queue 200 in 572ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
 GET /api/random-chat/session 200 in 168ms
 GET /api/socket-health 200 in 33ms
 GET /api/socket-health 200 in 30ms
 GET /socket.io?EIO=4&transport=polling&t=13ex30wv 404 in 213ms
 GET /socket.io?EIO=4&transport=polling&t=13exy1c8 404 in 112ms
 GET /api/socket-health 200 in 23ms
 GET /api/socket-health 200 in 122ms
 GET /socket.io?EIO=4&transport=polling&t=13ggcy2n 404 in 249ms
 GET /socket.io?EIO=4&transport=polling&t=13gjs90x 404 in 133ms
 GET /api/socket-health 200 in 35ms
 GET /api/socket-health 200 in 124ms
 GET /socket.io?EIO=4&transport=polling&t=13i08jac 404 in 232ms
 GET /socket.io?EIO=4&transport=polling&t=13i3ryxh 404 in 120ms
 GET /api/socket-health 200 in 37ms
 GET /api/socket-health 200 in 137ms
 GET /socket.io?EIO=4&transport=polling&t=13jjqrn7 404 in 230ms
 GET /socket.io?EIO=4&transport=polling&t=13jnlvlt 404 in 102ms
 GET /api/socket-health 200 in 33ms
 GET /api/socket-health 200 in 137ms
 GET /socket.io?EIO=4&transport=polling&t=13l3akip 404 in 225ms
 GET /socket.io?EIO=4&transport=polling&t=13l74l2x 404 in 102ms
 GET /api/socket-health 200 in 28ms
 GET /api/socket-health 200 in 117ms
 GET /socket.io?EIO=4&transport=polling&t=13mmj2mg 404 in 215ms
 GET /socket.io?EIO=4&transport=polling&t=13mpvhkw 404 in 113ms
 GET /api/socket-health 200 in 29ms
 GET /api/socket-health 200 in 35ms
 GET /socket.io?EIO=4&transport=polling&t=13o69exl 404 in 253ms
 GET /socket.io?EIO=4&transport=polling&t=13o7a1f5 404 in 149ms
 GET /api/socket-health 200 in 26ms
 GET /api/socket-health 200 in 129ms
 GET /socket.io?EIO=4&transport=polling&t=13ppslcb 404 in 215ms
 GET /socket.io?EIO=4&transport=polling&t=13ptfswt 404 in 103ms
 GET /api/socket-health 200 in 24ms
 GET /api/socket-health 200 in 126ms
 GET /socket.io?EIO=4&transport=polling&t=13r9b49i 404 in 252ms
 GET /socket.io?EIO=4&transport=polling&t=13rcvznq 404 in 139ms
 GET /api/socket-health 200 in 26ms
 GET /api/socket-health 200 in 121ms
 GET /socket.io?EIO=4&transport=polling&t=13ssuffk 404 in 220ms
 GET /socket.io?EIO=4&transport=polling&t=13sw8hy7 404 in 105ms
 GET /api/socket-health 200 in 25ms
 GET /api/socket-health 200 in 26ms
 GET /socket.io?EIO=4&transport=polling&t=13uccytc 404 in 218ms
 GET /socket.io?EIO=4&transport=polling&t=13ud418m 404 in 121ms
 GET /api/socket-health 200 in 24ms
 GET /api/socket-health 200 in 110ms
 GET /socket.io?EIO=4&transport=polling&t=13vvt4v8 404 in 240ms
 GET /socket.io?EIO=4&transport=polling&t=13vyxkzy 404 in 140ms
 GET /api/socket-health 200 in 24ms
 GET /api/socket-health 200 in 29ms
 GET /socket.io?EIO=4&transport=polling&t=13xfbanz 404 in 213ms
 GET /socket.io?EIO=4&transport=polling&t=13xg6br7 404 in 121ms
 GET /api/socket-health 200 in 24ms
 GET /api/socket-health 200 in 36ms
 GET /socket.io?EIO=4&transport=polling&t=13yyx72z 404 in 208ms
 GET /socket.io?EIO=4&transport=polling&t=13yzz9w3 404 in 110ms
 GET /api/socket-health 200 in 25ms
 GET /api/socket-health 200 in 116ms
 GET /socket.io?EIO=4&transport=polling&t=140iio8f 404 in 200ms
 GET /socket.io?EIO=4&transport=polling&t=140ls4h6 404 in 98ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
=== FRIEND REQUEST GET START ===
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
Request type: received User: sayantan2@gmail.com
âœ… Database connected
 GET /api/conversations 200 in 469ms
 POST /api/users/heartbeat 200 in 493ms
âœ… Current user found: {
  id: new ObjectId('6901f85f42c5d010fa811206'),
  email: 'sayantan2@gmail.com',
  friendRequestsCount: 0,
  sentRequestsCount: 1
}
Processing received requests...
Raw friendRequests: []
Processed receivedRequests: []
Populating sender details...
Final populated requests: []
=== FRIEND REQUEST GET END (received) ===
 GET /api/friends/request?type=received 200 in 703ms
=== FRIEND REQUEST GET START ===
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
Request type: sent User: sayantan2@gmail.com
âœ… Database connected
âœ… Current user found: {
  id: new ObjectId('6901f85f42c5d010fa811206'),
  email: 'sayantan2@gmail.com',
  friendRequestsCount: 0,
  sentRequestsCount: 1
}
Processing sent requests...
Raw sentRequests: [
  {
    from: new ObjectId('6901f85f42c5d010fa811206'),
    fromName: 'sayantan2',
    to: new ObjectId('6905adf16a22b7843b006183'),
    toName: 'sayantan3',
    status: 'pending',
    _id: new ObjectId('6905cdce14ad0d0f020b3985'),
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
Filtering sent request: { status: 'pending', to: new ObjectId('6905adf16a22b7843b006183') }
Mapping sent request: {
  from: new ObjectId('6901f85f42c5d010fa811206'),
  fromName: 'sayantan2',
  to: new ObjectId('6905adf16a22b7843b006183'),
  toName: 'sayantan3',
  status: 'pending',
  _id: new ObjectId('6905cdce14ad0d0f020b3985'),
  createdAt: 2025-11-01T09:07:26.707Z,
  updatedAt: 2025-11-01T09:07:26.707Z
}
Processed sentRequests: [
  {
    id: '6905cdce14ad0d0f020b3985',
    to: {
      id: '6905adf16a22b7843b006183',
      username: 'sayantan3',
      email: '',
      profilePicture: null
    },
    status: 'pending',
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
Populating recipient details...
Looking up recipient: 6905adf16a22b7843b006183
Found recipient: sayantan3
Final populated sent requests: [
  {
    id: '6905cdce14ad0d0f020b3985',
    to: {
      id: '6905adf16a22b7843b006183',
      username: 'sayantan3',
      email: 'sayantan3@gmail.com',
      profilePicture: undefined
    },
    status: 'pending',
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
=== FRIEND REQUEST GET END (sent) ===
 GET /api/friends/request?type=sent 200 in 136ms
 GET /api/socket-health 200 in 44ms
 GET /api/socket-health 200 in 52ms
 GET /socket.io?EIO=4&transport=polling&t=1422lp0f 404 in 1107ms
 GET /socket.io?EIO=4&transport=polling&t=14245heu 404 in 907ms
 GET /api/socket-health 200 in 25ms
 GET /api/socket-health 200 in 36ms
 GET /socket.io?EIO=4&transport=polling&t=144dgahd 404 in 218ms
 GET /socket.io?EIO=4&transport=polling&t=144eimb8 404 in 113ms
 GET /api/socket-health 200 in 33ms
 GET /api/socket-health 200 in 113ms
 GET /socket.io?EIO=4&transport=polling&t=145xdbhn 404 in 207ms
 GET /socket.io?EIO=4&transport=polling&t=1460lo97 404 in 102ms
 GET /api/socket-health 200 in 25ms
 GET /api/socket-health 200 in 105ms
 GET /socket.io?EIO=4&transport=polling&t=147gb2nt 404 in 197ms
 GET /socket.io?EIO=4&transport=polling&t=147j9s86 404 in 103ms
 GET /api/socket-health 200 in 42ms
 GET /api/socket-health 200 in 149ms
 GET /socket.io?EIO=4&transport=polling&t=1490jedu 404 in 258ms
 GET /socket.io?EIO=4&transport=polling&t=1494s5bj 404 in 124ms
 GET /api/socket-health 200 in 28ms
 GET /api/socket-health 200 in 38ms
 GET /socket.io?EIO=4&transport=polling&t=14ajp11u 404 in 232ms
 GET /socket.io?EIO=4&transport=polling&t=14aksfgb 404 in 118ms
 GET /api/socket-health 200 in 37ms
 GET /api/socket-health 200 in 131ms
 GET /socket.io?EIO=4&transport=polling&t=14c3kmg8 404 in 223ms
 GET /socket.io?EIO=4&transport=polling&t=14c7aq2i 404 in 110ms
 GET /api/socket-health 200 in 22ms
 GET /api/socket-health 200 in 31ms
 GET /socket.io?EIO=4&transport=polling&t=14dmm7c2 404 in 201ms
 GET /socket.io?EIO=4&transport=polling&t=14dniu0t 404 in 105ms
 GET /api/socket-health 200 in 28ms
 GET /api/socket-health 200 in 28ms
 GET /socket.io?EIO=4&transport=polling&t=14f6fwyq 404 in 205ms
 GET /socket.io?EIO=4&transport=polling&t=14f7axoz 404 in 104ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
=== FRIEND REQUEST GET START ===
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
Request type: received User: sayantan2@gmail.com
âœ… Database connected
âœ… Current user found: {
  id: new ObjectId('6901f85f42c5d010fa811206'),
  email: 'sayantan2@gmail.com',
  friendRequestsCount: 0,
  sentRequestsCount: 1
}
Processing received requests...
Raw friendRequests: []
Processed receivedRequests: []
Populating sender details...
Final populated requests: []
=== FRIEND REQUEST GET END (received) ===
 GET /api/friends/request?type=received 200 in 104ms
=== FRIEND REQUEST GET START ===
 GET /api/friends 200 in 130ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
Request type: sent User: sayantan2@gmail.com
âœ… Database connected
âœ… Current user found: {
  id: new ObjectId('6901f85f42c5d010fa811206'),
  email: 'sayantan2@gmail.com',
  friendRequestsCount: 0,
  sentRequestsCount: 1
}
Processing sent requests...
Raw sentRequests: [
  {
    from: new ObjectId('6901f85f42c5d010fa811206'),
    fromName: 'sayantan2',
    to: new ObjectId('6905adf16a22b7843b006183'),
    toName: 'sayantan3',
    status: 'pending',
    _id: new ObjectId('6905cdce14ad0d0f020b3985'),
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
Filtering sent request: { status: 'pending', to: new ObjectId('6905adf16a22b7843b006183') }
Mapping sent request: {
  from: new ObjectId('6901f85f42c5d010fa811206'),
  fromName: 'sayantan2',
  to: new ObjectId('6905adf16a22b7843b006183'),
  toName: 'sayantan3',
  status: 'pending',
  _id: new ObjectId('6905cdce14ad0d0f020b3985'),
  createdAt: 2025-11-01T09:07:26.707Z,
  updatedAt: 2025-11-01T09:07:26.707Z
}
Processed sentRequests: [
  {
    id: '6905cdce14ad0d0f020b3985',
    to: {
      id: '6905adf16a22b7843b006183',
      username: 'sayantan3',
      email: '',
      profilePicture: null
    },
    status: 'pending',
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
Populating recipient details...
Looking up recipient: 6905adf16a22b7843b006183
Found recipient: sayantan3
Final populated sent requests: [
  {
    id: '6905cdce14ad0d0f020b3985',
    to: {
      id: '6905adf16a22b7843b006183',
      username: 'sayantan3',
      email: 'sayantan3@gmail.com',
      profilePicture: undefined
    },
    status: 'pending',
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
=== FRIEND REQUEST GET END (sent) ===
 GET /api/friends/request?type=sent 200 in 126ms
 GET /api/socket-health 200 in 41ms
 GET /api/socket-health 200 in 120ms
 GET /socket.io?EIO=4&transport=polling&t=14gq87ki 404 in 213ms
 GET /socket.io?EIO=4&transport=polling&t=14gtnp65 404 in 104ms
 GET /api/socket-health 200 in 27ms
 GET /api/socket-health 200 in 43ms
 GET /socket.io?EIO=4&transport=polling&t=14i9gyx9 404 in 207ms
 GET /socket.io?EIO=4&transport=polling&t=14iaocxo 404 in 95ms
 GET /api/socket-health 200 in 31ms
 GET /api/socket-health 200 in 123ms
 GET /socket.io?EIO=4&transport=polling&t=14jt7f4t 404 in 220ms
 GET /socket.io?EIO=4&transport=polling&t=14jwosot 404 in 106ms
 GET /api/socket-health 200 in 26ms
 GET /api/socket-health 200 in 34ms
 GET /socket.io?EIO=4&transport=polling&t=14lchi5u 404 in 227ms
 GET /socket.io?EIO=4&transport=polling&t=14ldis1a 404 in 118ms
 GET /api/socket-health 200 in 28ms
 GET /api/socket-health 200 in 111ms
 GET /socket.io?EIO=4&transport=polling&t=14mw6rt9 404 in 203ms
 GET /socket.io?EIO=4&transport=polling&t=14mzbnck 404 in 104ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
 GET /api/socket-health 200 in 47ms
 GET /api/socket-health 200 in 29ms
 GET /socket.io?EIO=4&transport=polling&t=14ogi386 404 in 221ms
 GET /socket.io?EIO=4&transport=polling&t=14ohdiuf 404 in 112ms
 POST /api/users/heartbeat 200 in 313ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
 GET /api/conversations 200 in 139ms
 GET /api/socket-health 200 in 29ms
 GET /api/socket-health 200 in 116ms
 GET /socket.io?EIO=4&transport=polling&t=14pzbbt0 404 in 212ms
 GET /socket.io?EIO=4&transport=polling&t=14q2lnph 404 in 109ms
 GET /api/socket-health 200 in 24ms
 GET /api/socket-health 200 in 37ms
 GET /socket.io?EIO=4&transport=polling&t=14rioczd 404 in 216ms
 GET /socket.io?EIO=4&transport=polling&t=14rjqunf 404 in 113ms
 GET /api/socket-health 200 in 32ms
 GET /api/socket-health 200 in 120ms
 GET /socket.io?EIO=4&transport=polling&t=14t2c36r 404 in 216ms
 GET /socket.io?EIO=4&transport=polling&t=14t5qzhq 404 in 119ms
 GET /api/socket-health 200 in 33ms
 GET /api/socket-health 200 in 130ms
 GET /socket.io?EIO=4&transport=polling&t=14um46o1 404 in 210ms
 GET /socket.io?EIO=4&transport=polling&t=14ups35k 404 in 91ms
 GET /api/socket-health 200 in 29ms
 GET /api/socket-health 200 in 123ms
 GET /socket.io?EIO=4&transport=polling&t=14w5h13r 404 in 222ms
 GET /socket.io?EIO=4&transport=polling&t=14w8zj5e 404 in 113ms
 GET /api/socket-health 200 in 24ms
 GET /api/socket-health 200 in 118ms
 GET /socket.io?EIO=4&transport=polling&t=14xoz8pm 404 in 215ms
 GET /socket.io?EIO=4&transport=polling&t=14xsb7jm 404 in 109ms
 GET /api/socket-health 200 in 25ms
 GET /api/socket-health 200 in 28ms
 GET /socket.io?EIO=4&transport=polling&t=14z8r8n9 404 in 220ms
 GET /socket.io?EIO=4&transport=polling&t=14z9lort 404 in 123ms
 GET /api/socket-health 200 in 28ms
 GET /api/socket-health 200 in 139ms
 GET /socket.io?EIO=4&transport=polling&t=150ryj4b 404 in 238ms
 GET /socket.io?EIO=4&transport=polling&t=150vu27r 404 in 114ms
 GET /api/socket-health 200 in 23ms
 GET /api/socket-health 200 in 28ms
 GET /socket.io?EIO=4&transport=polling&t=152bhp72 404 in 209ms
 GET /socket.io?EIO=4&transport=polling&t=152cbspq 404 in 112ms
=== FRIEND REQUEST GET START ===
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
Request type: received User: sayantan2@gmail.com
âœ… Database connected
 GET /api/socket-health 200 in 50ms
âœ… Current user found: {
  id: new ObjectId('6901f85f42c5d010fa811206'),
  email: 'sayantan2@gmail.com',
  friendRequestsCount: 0,
  sentRequestsCount: 1
}
Processing received requests...
Raw friendRequests: []
Processed receivedRequests: []
Populating sender details...
Final populated requests: []
=== FRIEND REQUEST GET END (received) ===
 GET /api/friends/request?type=received 200 in 173ms
 GET /api/socket-health 200 in 135ms
=== FRIEND REQUEST GET START ===
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
Request type: sent User: sayantan2@gmail.com
âœ… Database connected
 GET /socket.io?EIO=4&transport=polling&t=153w4jfg 404 in 251ms
 GET /socket.io?EIO=4&transport=polling&t=153zxron 404 in 121ms
âœ… Current user found: {
  id: new ObjectId('6901f85f42c5d010fa811206'),
  email: 'sayantan2@gmail.com',
  friendRequestsCount: 0,
  sentRequestsCount: 1
}
Processing sent requests...
Raw sentRequests: [
  {
    from: new ObjectId('6901f85f42c5d010fa811206'),
    fromName: 'sayantan2',
    to: new ObjectId('6905adf16a22b7843b006183'),
    toName: 'sayantan3',
    status: 'pending',
    _id: new ObjectId('6905cdce14ad0d0f020b3985'),
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
Filtering sent request: { status: 'pending', to: new ObjectId('6905adf16a22b7843b006183') }
Mapping sent request: {
  from: new ObjectId('6901f85f42c5d010fa811206'),
  fromName: 'sayantan2',
  to: new ObjectId('6905adf16a22b7843b006183'),
  toName: 'sayantan3',
  status: 'pending',
  _id: new ObjectId('6905cdce14ad0d0f020b3985'),
  createdAt: 2025-11-01T09:07:26.707Z,
  updatedAt: 2025-11-01T09:07:26.707Z
}
Processed sentRequests: [
  {
    id: '6905cdce14ad0d0f020b3985',
    to: {
      id: '6905adf16a22b7843b006183',
      username: 'sayantan3',
      email: '',
      profilePicture: null
    },
    status: 'pending',
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
Populating recipient details...
Looking up recipient: 6905adf16a22b7843b006183
Found recipient: sayantan3
Final populated sent requests: [
  {
    id: '6905cdce14ad0d0f020b3985',
    to: {
      id: '6905adf16a22b7843b006183',
      username: 'sayantan3',
      email: 'sayantan3@gmail.com',
      profilePicture: undefined
    },
    status: 'pending',
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
=== FRIEND REQUEST GET END (sent) ===
 GET /api/friends/request?type=sent 200 in 212ms
 GET /api/socket-health 200 in 23ms
 GET /api/socket-health 200 in 123ms
 GET /socket.io?EIO=4&transport=polling&t=155erpgw 404 in 207ms
 GET /socket.io?EIO=4&transport=polling&t=155i75gb 404 in 104ms
 GET /api/socket-health 200 in 23ms
 GET /api/socket-health 200 in 112ms
 GET /socket.io?EIO=4&transport=polling&t=156yadgw 404 in 213ms
 GET /socket.io?EIO=4&transport=polling&t=1571gm0f 404 in 118ms
 GET /api/socket-health 200 in 22ms
 GET /api/socket-health 200 in 113ms
 GET /socket.io?EIO=4&transport=polling&t=158hvf5f 404 in 203ms
 GET /socket.io?EIO=4&transport=polling&t=158l2yuk 404 in 104ms
 GET /api/socket-health 200 in 22ms
 GET /api/socket-health 200 in 106ms
 GET /socket.io?EIO=4&transport=polling&t=15a1d4by 404 in 196ms
 GET /socket.io?EIO=4&transport=polling&t=15a4dl0r 404 in 97ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
 GET /api/socket-health 200 in 52ms
 GET /api/socket-health 200 in 33ms
 GET /socket.io?EIO=4&transport=polling&t=15blqnmo 404 in 258ms
 GET /socket.io?EIO=4&transport=polling&t=15bmpyhy 404 in 132ms
 POST /api/users/heartbeat 200 in 333ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
 GET /api/socket-health 200 in 44ms
 GET /api/socket-health 200 in 126ms
 GET /api/conversations 200 in 273ms
 GET /socket.io?EIO=4&transport=polling&t=15d51fy9 404 in 221ms
 GET /socket.io?EIO=4&transport=polling&t=15d8lezz 404 in 118ms
 GET /api/socket-health 200 in 25ms
 GET /api/socket-health 200 in 31ms
 GET /socket.io?EIO=4&transport=polling&t=15eo4wcg 404 in 203ms
 GET /socket.io?EIO=4&transport=polling&t=15ep2096 404 in 105ms
 GET /api/socket-health 200 in 36ms
 GET /api/socket-health 200 in 130ms
 GET /socket.io?EIO=4&transport=polling&t=15g80w3t 404 in 221ms
 GET /socket.io?EIO=4&transport=polling&t=15gboj6o 404 in 113ms
 GET /api/socket-health 200 in 27ms
 GET /api/socket-health 200 in 112ms
 GET /socket.io?EIO=4&transport=polling&t=15hrd1ml 404 in 201ms
 GET /socket.io?EIO=4&transport=polling&t=15hujzvr 404 in 99ms
 GET /api/socket-health 200 in 33ms
 GET /api/socket-health 200 in 27ms
 GET /socket.io?EIO=4&transport=polling&t=15jb4izi 404 in 206ms
 GET /socket.io?EIO=4&transport=polling&t=15jbx3ov 404 in 107ms
 GET /api/socket-health 200 in 26ms
 GET /api/socket-health 200 in 127ms
 GET /socket.io?EIO=4&transport=polling&t=15kufi4v 404 in 219ms
 GET /socket.io?EIO=4&transport=polling&t=15kxzd9g 404 in 107ms
 GET /api/socket-health 200 in 24ms
 GET /api/socket-health 200 in 117ms
 GET /socket.io?EIO=4&transport=polling&t=15me0jv3 404 in 210ms
 GET /socket.io?EIO=4&transport=polling&t=15mhbffo 404 in 107ms
 GET /api/socket-health 200 in 23ms
 GET /api/socket-health 200 in 112ms
 GET /socket.io?EIO=4&transport=polling&t=15nxaiis 404 in 212ms
 GET /socket.io?EIO=4&transport=polling&t=15o0f2au 404 in 113ms
 GET /api/socket-health 200 in 25ms
 GET /api/socket-health 200 in 30ms
 GET /socket.io?EIO=4&transport=polling&t=15ph3du1 404 in 222ms
 GET /socket.io?EIO=4&transport=polling&t=15phz8cy 404 in 116ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
=== FRIEND REQUEST GET START ===
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
Request type: received User: sayantan2@gmail.com
âœ… Database connected
 GET /api/friends 200 in 149ms
âœ… Current user found: {
  id: new ObjectId('6901f85f42c5d010fa811206'),
  email: 'sayantan2@gmail.com',
  friendRequestsCount: 0,
  sentRequestsCount: 1
}
Processing received requests...
Raw friendRequests: []
Processed receivedRequests: []
Populating sender details...
Final populated requests: []
=== FRIEND REQUEST GET END (received) ===
 GET /api/friends/request?type=received 200 in 488ms
=== FRIEND REQUEST GET START ===
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
Request type: sent User: sayantan2@gmail.com
âœ… Database connected
âœ… Current user found: {
  id: new ObjectId('6901f85f42c5d010fa811206'),
  email: 'sayantan2@gmail.com',
  friendRequestsCount: 0,
  sentRequestsCount: 1
}
Processing sent requests...
Raw sentRequests: [
  {
    from: new ObjectId('6901f85f42c5d010fa811206'),
    fromName: 'sayantan2',
    to: new ObjectId('6905adf16a22b7843b006183'),
    toName: 'sayantan3',
    status: 'pending',
    _id: new ObjectId('6905cdce14ad0d0f020b3985'),
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
Filtering sent request: { status: 'pending', to: new ObjectId('6905adf16a22b7843b006183') }
Mapping sent request: {
  from: new ObjectId('6901f85f42c5d010fa811206'),
  fromName: 'sayantan2',
  to: new ObjectId('6905adf16a22b7843b006183'),
  toName: 'sayantan3',
  status: 'pending',
  _id: new ObjectId('6905cdce14ad0d0f020b3985'),
  createdAt: 2025-11-01T09:07:26.707Z,
  updatedAt: 2025-11-01T09:07:26.707Z
}
Processed sentRequests: [
  {
    id: '6905cdce14ad0d0f020b3985',
    to: {
      id: '6905adf16a22b7843b006183',
      username: 'sayantan3',
      email: '',
      profilePicture: null
    },
    status: 'pending',
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
Populating recipient details...
Looking up recipient: 6905adf16a22b7843b006183
Found recipient: sayantan3
Final populated sent requests: [
  {
    id: '6905cdce14ad0d0f020b3985',
    to: {
      id: '6905adf16a22b7843b006183',
      username: 'sayantan3',
      email: 'sayantan3@gmail.com',
      profilePicture: undefined
    },
    status: 'pending',
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
=== FRIEND REQUEST GET END (sent) ===
 GET /api/friends/request?type=sent 200 in 112ms
 GET /api/socket-health 200 in 33ms
 GET /api/socket-health 200 in 144ms
 GET /socket.io?EIO=4&transport=polling&t=15r0t9py 404 in 245ms
 GET /socket.io?EIO=4&transport=polling&t=15r4x1ed 404 in 112ms
 GET /api/socket-health 200 in 27ms
 GET /api/socket-health 200 in 120ms
 GET /socket.io?EIO=4&transport=polling&t=15sk5dsz 404 in 225ms
 GET /socket.io?EIO=4&transport=polling&t=15snkzck 404 in 113ms
 GET /api/socket-health 200 in 29ms
 GET /api/socket-health 200 in 28ms
 GET /socket.io?EIO=4&transport=polling&t=15u3r7w8 404 in 198ms
 GET /socket.io?EIO=4&transport=polling&t=15u4kru8 404 in 103ms
 GET /api/socket-health 200 in 25ms
 GET /api/socket-health 200 in 35ms
 GET /socket.io?EIO=4&transport=polling&t=15vn520b 404 in 225ms
 GET /socket.io?EIO=4&transport=polling&t=15vo6o17 404 in 111ms
 GET /api/socket-health 200 in 28ms
 GET /api/socket-health 200 in 26ms
 GET /socket.io?EIO=4&transport=polling&t=15x6no9e 404 in 215ms
 GET /socket.io?EIO=4&transport=polling&t=15x7gsco 404 in 110ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
 GET /api/socket-health 200 in 66ms
 GET /api/socket-health 200 in 121ms
 POST /api/users/heartbeat 200 in 285ms
 GET /socket.io?EIO=4&transport=polling&t=15yr2t8x 404 in 216ms
 GET /socket.io?EIO=4&transport=polling&t=15yuuaak 404 in 108ms
 GET /api/socket-health 200 in 41ms
 GET /api/socket-health 200 in 33ms
 GET /socket.io?EIO=4&transport=polling&t=160aa5f1 404 in 212ms
 GET /socket.io?EIO=4&transport=polling&t=160b91gk 404 in 107ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
 GET /api/conversations 200 in 145ms
 GET /api/socket-health 200 in 29ms
 GET /api/socket-health 200 in 126ms
 GET /socket.io?EIO=4&transport=polling&t=161tdsv8 404 in 221ms
 GET /socket.io?EIO=4&transport=polling&t=161wyldo 404 in 107ms
 GET /api/socket-health 200 in 35ms
 GET /api/socket-health 200 in 125ms
 GET /socket.io?EIO=4&transport=polling&t=163d7bvp 404 in 233ms
 GET /socket.io?EIO=4&transport=polling&t=163gqcfj 404 in 125ms
 GET /api/socket-health 200 in 25ms
 GET /api/socket-health 200 in 34ms
 GET /socket.io?EIO=4&transport=polling&t=164wl9gh 404 in 250ms
 GET /socket.io?EIO=4&transport=polling&t=164xlntw 404 in 146ms
 GET /api/socket-health 200 in 30ms
 GET /api/socket-health 200 in 105ms
 GET /socket.io?EIO=4&transport=polling&t=166g67br 404 in 203ms
 GET /socket.io?EIO=4&transport=polling&t=166j5x05 404 in 112ms
 GET /api/socket-health 200 in 25ms
 GET /api/socket-health 200 in 46ms
 GET /socket.io?EIO=4&transport=polling&t=167zq1p6 404 in 249ms
 GET /socket.io?EIO=4&transport=polling&t=16812tt4 404 in 125ms
 GET /api/socket-health 200 in 28ms
 GET /api/socket-health 200 in 30ms
 GET /socket.io?EIO=4&transport=polling&t=169jhenx 404 in 195ms
 GET /socket.io?EIO=4&transport=polling&t=169kcmtk 404 in 104ms
 GET /api/socket-health 200 in 43ms
 GET /api/socket-health 200 in 128ms
 GET /socket.io?EIO=4&transport=polling&t=16b3hm8n 404 in 402ms
 GET /socket.io?EIO=4&transport=polling&t=16b73lh5 404 in 182ms
 GET /api/socket-health 200 in 25ms
 GET /api/socket-health 200 in 26ms
 GET /socket.io?EIO=4&transport=polling&t=16cmcka0 404 in 218ms
 GET /socket.io?EIO=4&transport=polling&t=16cn4elr 404 in 118ms
 GET /api/socket-health 200 in 46ms
=== FRIEND REQUEST GET START ===
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
Request type: received User: sayantan2@gmail.com
âœ… Database connected
âœ… Current user found: {
  id: new ObjectId('6901f85f42c5d010fa811206'),
  email: 'sayantan2@gmail.com',
  friendRequestsCount: 0,
  sentRequestsCount: 1
}
Processing received requests...
Raw friendRequests: []
Processed receivedRequests: []
Populating sender details...
Final populated requests: []
=== FRIEND REQUEST GET END (received) ===
 GET /api/friends/request?type=received 200 in 174ms
 GET /api/socket-health 200 in 151ms
=== FRIEND REQUEST GET START ===
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
Request type: sent User: sayantan2@gmail.com
âœ… Database connected
 GET /socket.io?EIO=4&transport=polling&t=16e6gtrl 404 in 308ms
 GET /socket.io?EIO=4&transport=polling&t=16eay1yh 404 in 159ms
âœ… Current user found: {
  id: new ObjectId('6901f85f42c5d010fa811206'),
  email: 'sayantan2@gmail.com',
  friendRequestsCount: 0,
  sentRequestsCount: 1
}
Processing sent requests...
Raw sentRequests: [
  {
    from: new ObjectId('6901f85f42c5d010fa811206'),
    fromName: 'sayantan2',
    to: new ObjectId('6905adf16a22b7843b006183'),
    toName: 'sayantan3',
    status: 'pending',
    _id: new ObjectId('6905cdce14ad0d0f020b3985'),
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
Filtering sent request: { status: 'pending', to: new ObjectId('6905adf16a22b7843b006183') }
Mapping sent request: {
  from: new ObjectId('6901f85f42c5d010fa811206'),
  fromName: 'sayantan2',
  to: new ObjectId('6905adf16a22b7843b006183'),
  toName: 'sayantan3',
  status: 'pending',
  _id: new ObjectId('6905cdce14ad0d0f020b3985'),
  createdAt: 2025-11-01T09:07:26.707Z,
  updatedAt: 2025-11-01T09:07:26.707Z
}
Processed sentRequests: [
  {
    id: '6905cdce14ad0d0f020b3985',
    to: {
      id: '6905adf16a22b7843b006183',
      username: 'sayantan3',
      email: '',
      profilePicture: null
    },
    status: 'pending',
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
Populating recipient details...
Looking up recipient: 6905adf16a22b7843b006183
Found recipient: sayantan3
Final populated sent requests: [
  {
    id: '6905cdce14ad0d0f020b3985',
    to: {
      id: '6905adf16a22b7843b006183',
      username: 'sayantan3',
      email: 'sayantan3@gmail.com',
      profilePicture: undefined
    },
    status: 'pending',
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
=== FRIEND REQUEST GET END (sent) ===
 GET /api/friends/request?type=sent 200 in 258ms
 GET /api/socket-health 200 in 32ms
 GET /api/socket-health 200 in 160ms
 GET /socket.io?EIO=4&transport=polling&t=16fphbcd 404 in 302ms
 GET /socket.io?EIO=4&transport=polling&t=16ftybpz 404 in 172ms
 GET /api/socket-health 200 in 26ms
 GET /api/socket-health 200 in 35ms
 GET /socket.io?EIO=4&transport=polling&t=16h91uye 404 in 211ms
 GET /socket.io?EIO=4&transport=polling&t=16ha1pyv 404 in 108ms
 GET /api/socket-health 200 in 31ms
 GET /api/socket-health 200 in 26ms
 GET /socket.io?EIO=4&transport=polling&t=16issnre 404 in 210ms
 GET /socket.io?EIO=4&transport=polling&t=16itj3zq 404 in 107ms
 GET /api/socket-health 200 in 23ms
 GET /api/socket-health 200 in 109ms
 GET /socket.io?EIO=4&transport=polling&t=16kc5ol1 404 in 198ms
 GET /socket.io?EIO=4&transport=polling&t=16kf8xw2 404 in 94ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
 GET /api/socket-health 200 in 62ms
 GET /api/socket-health 200 in 123ms
 GET /socket.io?EIO=4&transport=polling&t=16lwtl7q 404 in 231ms
 GET /socket.io?EIO=4&transport=polling&t=16m0abb0 404 in 126ms
 POST /api/users/heartbeat 200 in 334ms
 GET /api/socket-health 200 in 35ms
 GET /api/socket-health 200 in 143ms
 GET /socket.io?EIO=4&transport=polling&t=16nfghd8 404 in 252ms
 GET /socket.io?EIO=4&transport=polling&t=16njh7rt 404 in 123ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
 GET /api/socket-health 200 in 48ms
 GET /api/socket-health 200 in 29ms
 GET /api/conversations 200 in 244ms
 GET /socket.io?EIO=4&transport=polling&t=16ozeiba 404 in 207ms
 GET /socket.io?EIO=4&transport=polling&t=16p09bbe 404 in 101ms
 GET /api/socket-health 200 in 23ms
 GET /api/socket-health 200 in 36ms
 GET /socket.io?EIO=4&transport=polling&t=16qieeah 404 in 203ms
 GET /socket.io?EIO=4&transport=polling&t=16qjh477 404 in 97ms
 GET /api/socket-health 200 in 27ms
 GET /api/socket-health 200 in 105ms
 GET /socket.io?EIO=4&transport=polling&t=16s1s5hl 404 in 192ms
 GET /socket.io?EIO=4&transport=polling&t=16s4snji 404 in 100ms
 GET /api/socket-health 200 in 22ms
 GET /api/socket-health 200 in 106ms
 GET /socket.io?EIO=4&transport=polling&t=16tlj8p4 404 in 190ms
 GET /socket.io?EIO=4&transport=polling&t=16toi1wv 404 in 91ms
 GET /api/socket-health 200 in 30ms
 GET /api/socket-health 200 in 122ms
 GET /socket.io?EIO=4&transport=polling&t=16v51dc9 404 in 231ms
 GET /socket.io?EIO=4&transport=polling&t=16v8hayj 404 in 129ms
 GET /api/socket-health 200 in 29ms
 GET /api/socket-health 200 in 113ms
 GET /socket.io?EIO=4&transport=polling&t=16woj75h 404 in 201ms
 GET /socket.io?EIO=4&transport=polling&t=16wrpce6 404 in 95ms
 GET /api/socket-health 200 in 30ms
 GET /api/socket-health 200 in 138ms
 GET /socket.io?EIO=4&transport=polling&t=16y8e3ig 404 in 238ms
 GET /socket.io?EIO=4&transport=polling&t=16ycaxo5 404 in 109ms
 GET /api/socket-health 200 in 20ms
 GET /api/socket-health 200 in 110ms
 GET /socket.io?EIO=4&transport=polling&t=16zrizgz 404 in 201ms
 GET /socket.io?EIO=4&transport=polling&t=16zumk96 404 in 100ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
=== FRIEND REQUEST GET START ===
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
Request type: received User: sayantan2@gmail.com
âœ… Database connected
 GET /api/friends 200 in 139ms
âœ… Current user found: {
  id: new ObjectId('6901f85f42c5d010fa811206'),
  email: 'sayantan2@gmail.com',
  friendRequestsCount: 0,
  sentRequestsCount: 1
}
Processing received requests...
Raw friendRequests: []
Processed receivedRequests: []
Populating sender details...
Final populated requests: []
=== FRIEND REQUEST GET END (received) ===
 GET /api/friends/request?type=received 200 in 407ms
=== FRIEND REQUEST GET START ===
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
Request type: sent User: sayantan2@gmail.com
âœ… Database connected
âœ… Current user found: {
  id: new ObjectId('6901f85f42c5d010fa811206'),
  email: 'sayantan2@gmail.com',
  friendRequestsCount: 0,
  sentRequestsCount: 1
}
Processing sent requests...
Raw sentRequests: [
  {
    from: new ObjectId('6901f85f42c5d010fa811206'),
    fromName: 'sayantan2',
    to: new ObjectId('6905adf16a22b7843b006183'),
    toName: 'sayantan3',
    status: 'pending',
    _id: new ObjectId('6905cdce14ad0d0f020b3985'),
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
Filtering sent request: { status: 'pending', to: new ObjectId('6905adf16a22b7843b006183') }
Mapping sent request: {
  from: new ObjectId('6901f85f42c5d010fa811206'),
  fromName: 'sayantan2',
  to: new ObjectId('6905adf16a22b7843b006183'),
  toName: 'sayantan3',
  status: 'pending',
  _id: new ObjectId('6905cdce14ad0d0f020b3985'),
  createdAt: 2025-11-01T09:07:26.707Z,
  updatedAt: 2025-11-01T09:07:26.707Z
}
Processed sentRequests: [
  {
    id: '6905cdce14ad0d0f020b3985',
    to: {
      id: '6905adf16a22b7843b006183',
      username: 'sayantan3',
      email: '',
      profilePicture: null
    },
    status: 'pending',
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
Populating recipient details...
Looking up recipient: 6905adf16a22b7843b006183
Found recipient: sayantan3
Final populated sent requests: [
  {
    id: '6905cdce14ad0d0f020b3985',
    to: {
      id: '6905adf16a22b7843b006183',
      username: 'sayantan3',
      email: 'sayantan3@gmail.com',
      profilePicture: undefined
    },
    status: 'pending',
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
=== FRIEND REQUEST GET END (sent) ===
 GET /api/friends/request?type=sent 200 in 148ms
 GET /api/socket-health 200 in 25ms
 GET /api/socket-health 200 in 46ms
 GET /socket.io?EIO=4&transport=polling&t=171bee8b 404 in 251ms
 GET /socket.io?EIO=4&transport=polling&t=171cqhre 404 in 131ms
 GET /api/socket-health 200 in 34ms
 GET /api/socket-health 200 in 111ms
 GET /socket.io?EIO=4&transport=polling&t=172v510y 404 in 202ms
 GET /socket.io?EIO=4&transport=polling&t=172yaf02 404 in 102ms
 GET /api/socket-health 200 in 23ms
 GET /api/socket-health 200 in 31ms
 GET /socket.io?EIO=4&transport=polling&t=174efc1h 404 in 191ms
 GET /socket.io?EIO=4&transport=polling&t=174fb4wb 404 in 103ms
 GET /api/socket-health 200 in 27ms
 GET /api/socket-health 200 in 25ms
 GET /socket.io?EIO=4&transport=polling&t=175xxah7 404 in 197ms
 GET /socket.io?EIO=4&transport=polling&t=175yosf6 404 in 107ms
 GET /api/socket-health 200 in 23ms
 GET /api/socket-health 200 in 31ms
 GET /socket.io?EIO=4&transport=polling&t=177hahpe 404 in 216ms
 GET /socket.io?EIO=4&transport=polling&t=177i8djj 404 in 115ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
 GET /api/socket-health 200 in 43ms
 GET /api/socket-health 200 in 121ms
 GET /socket.io?EIO=4&transport=polling&t=1791lny9 404 in 208ms
 GET /socket.io?EIO=4&transport=polling&t=17950ty0 404 in 101ms
 POST /api/users/heartbeat 200 in 299ms
 GET /api/socket-health 200 in 27ms
 GET /api/socket-health 200 in 41ms
 GET /socket.io?EIO=4&transport=polling&t=17akjsdk 404 in 215ms
 GET /socket.io?EIO=4&transport=polling&t=17alrkyb 404 in 113ms
 GET /api/socket-health 200 in 39ms
 GET /api/socket-health 200 in 37ms
 GET /socket.io?EIO=4&transport=polling&t=17c4bv5v 404 in 240ms
 GET /socket.io?EIO=4&transport=polling&t=17c5du3t 404 in 122ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
 GET /api/conversations 200 in 129ms
 GET /api/socket-health 200 in 27ms
 GET /api/socket-health 200 in 26ms
 GET /socket.io?EIO=4&transport=polling&t=17dniqyu 404 in 190ms
 GET /socket.io?EIO=4&transport=polling&t=17doa6o1 404 in 102ms
 GET /api/socket-health 200 in 25ms
 GET /api/socket-health 200 in 103ms
 GET /socket.io?EIO=4&transport=polling&t=17f78gow 404 in 201ms
 GET /socket.io?EIO=4&transport=polling&t=17fa5l84 404 in 114ms
 GET /api/socket-health 200 in 23ms
 GET /api/socket-health 200 in 31ms
 GET /socket.io?EIO=4&transport=polling&t=17gqtva2 404 in 209ms
 GET /socket.io?EIO=4&transport=polling&t=17grpe8o 404 in 105ms
 GET /api/socket-health 200 in 22ms
 GET /api/socket-health 200 in 109ms
 GET /socket.io?EIO=4&transport=polling&t=17ia9791 404 in 194ms
 GET /socket.io?EIO=4&transport=polling&t=17idcmxg 404 in 100ms
 GET /api/socket-health 200 in 22ms
 GET /api/socket-health 200 in 103ms
 GET /socket.io?EIO=4&transport=polling&t=17jtw3x5 404 in 191ms
 GET /socket.io?EIO=4&transport=polling&t=17jwssh0 404 in 99ms
 GET /api/socket-health 200 in 22ms
 GET /api/socket-health 200 in 105ms
 GET /socket.io?EIO=4&transport=polling&t=17ldgpri 404 in 197ms
 GET /socket.io?EIO=4&transport=polling&t=17lgfesl 404 in 102ms
 GET /api/socket-health 200 in 21ms
 GET /api/socket-health 200 in 107ms
 GET /socket.io?EIO=4&transport=polling&t=17mwr6dy 404 in 201ms
 GET /socket.io?EIO=4&transport=polling&t=17mzuyoj 404 in 104ms
 GET /api/socket-health 200 in 56ms
=== FRIEND REQUEST GET START ===
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
Request type: received User: sayantan2@gmail.com
âœ… Database connected
âœ… Current user found: {
  id: new ObjectId('6901f85f42c5d010fa811206'),
  email: 'sayantan2@gmail.com',
  friendRequestsCount: 0,
  sentRequestsCount: 1
}
Processing received requests...
Raw friendRequests: []
Processed receivedRequests: []
Populating sender details...
Final populated requests: []
=== FRIEND REQUEST GET END (received) ===
 GET /api/friends/request?type=received 200 in 198ms
 GET /api/socket-health 200 in 158ms
=== FRIEND REQUEST GET START ===
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
Request type: sent User: sayantan2@gmail.com
âœ… Database connected
 GET /socket.io?EIO=4&transport=polling&t=17ohgtq3 404 in 288ms
 GET /socket.io?EIO=4&transport=polling&t=17olzzxd 404 in 148ms
âœ… Current user found: {
  id: new ObjectId('6901f85f42c5d010fa811206'),
  email: 'sayantan2@gmail.com',
  friendRequestsCount: 0,
  sentRequestsCount: 1
}
Processing sent requests...
Raw sentRequests: [
  {
    from: new ObjectId('6901f85f42c5d010fa811206'),
    fromName: 'sayantan2',
    to: new ObjectId('6905adf16a22b7843b006183'),
    toName: 'sayantan3',
    status: 'pending',
    _id: new ObjectId('6905cdce14ad0d0f020b3985'),
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
Filtering sent request: { status: 'pending', to: new ObjectId('6905adf16a22b7843b006183') }
Mapping sent request: {
  from: new ObjectId('6901f85f42c5d010fa811206'),
  fromName: 'sayantan2',
  to: new ObjectId('6905adf16a22b7843b006183'),
  toName: 'sayantan3',
  status: 'pending',
  _id: new ObjectId('6905cdce14ad0d0f020b3985'),
  createdAt: 2025-11-01T09:07:26.707Z,
  updatedAt: 2025-11-01T09:07:26.707Z
}
Processed sentRequests: [
  {
    id: '6905cdce14ad0d0f020b3985',
    to: {
      id: '6905adf16a22b7843b006183',
      username: 'sayantan3',
      email: '',
      profilePicture: null
    },
    status: 'pending',
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
Populating recipient details...
Looking up recipient: 6905adf16a22b7843b006183
Found recipient: sayantan3
Final populated sent requests: [
  {
    id: '6905cdce14ad0d0f020b3985',
    to: {
      id: '6905adf16a22b7843b006183',
      username: 'sayantan3',
      email: 'sayantan3@gmail.com',
      profilePicture: undefined
    },
    status: 'pending',
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
=== FRIEND REQUEST GET END (sent) ===
 GET /api/friends/request?type=sent 200 in 234ms
 GET /api/socket-health 200 in 33ms
 GET /api/socket-health 200 in 164ms
 GET /socket.io?EIO=4&transport=polling&t=17q0ezuv 404 in 275ms
 GET /socket.io?EIO=4&transport=polling&t=17q504kr 404 in 135ms
 GET /api/socket-health 200 in 26ms
 GET /api/socket-health 200 in 112ms
 GET /socket.io?EIO=4&transport=polling&t=17rjn11l 404 in 206ms
 GET /socket.io?EIO=4&transport=polling&t=17rmsaxb 404 in 103ms
 GET /api/socket-health 200 in 25ms
 GET /api/socket-health 200 in 128ms
 GET /socket.io?EIO=4&transport=polling&t=17t3ef0m 404 in 223ms
 GET /socket.io?EIO=4&transport=polling&t=17t70jtn 404 in 106ms
 GET /api/socket-health 200 in 25ms
 GET /api/socket-health 200 in 106ms
 GET /socket.io?EIO=4&transport=polling&t=17umy5kr 404 in 196ms
 GET /socket.io?EIO=4&transport=polling&t=17upyk6u 404 in 99ms
 GET /api/socket-health 200 in 31ms
 GET /api/socket-health 200 in 142ms
 GET /socket.io?EIO=4&transport=polling&t=17w6bun4 404 in 261ms
 GET /socket.io?EIO=4&transport=polling&t=17wabe8h 404 in 147ms
 GET /api/socket-health 200 in 30ms
 GET /api/socket-health 200 in 139ms
 GET /socket.io?EIO=4&transport=polling&t=17xq6vgo 404 in 256ms
 GET /socket.io?EIO=4&transport=polling&t=17xu3yua 404 in 130ms
 GET /api/socket-health 200 in 35ms
 GET /api/socket-health 200 in 174ms
 GET /socket.io?EIO=4&transport=polling&t=17z9qf3e 404 in 233ms
 GET /socket.io?EIO=4&transport=polling&t=17zeniix 404 in 105ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
 GET /api/socket-health 200 in 119ms
 GET /api/conversations 200 in 240ms
 GET /api/socket-health 200 in 178ms
 GET /socket.io?EIO=4&transport=polling&t=180vvgio 404 in 392ms
 GET /socket.io?EIO=4&transport=polling&t=1810qv6o 404 in 169ms
 GET /api/socket-health 200 in 23ms
 GET /api/socket-health 200 in 128ms
 GET /socket.io?EIO=4&transport=polling&t=182co1jf 404 in 231ms
 GET /socket.io?EIO=4&transport=polling&t=182g9u6d 404 in 116ms
 GET /api/socket-health 200 in 71ms
 GET /api/socket-health 200 in 181ms
 GET /socket.io?EIO=4&transport=polling&t=183xlwek 404 in 297ms
 GET /socket.io?EIO=4&transport=polling&t=1842p2ii 404 in 152ms
 GET /api/socket-health 200 in 58ms
 GET /api/socket-health 200 in 102ms
 GET /socket.io?EIO=4&transport=polling&t=185hvods 404 in 281ms
 GET /socket.io?EIO=4&transport=polling&t=185jjosb 404 in 143ms
 GET /api/socket-health 200 in 35ms
 GET /api/socket-health 200 in 213ms
 GET /socket.io?EIO=4&transport=polling&t=186zeyx3 404 in 340ms
 GET /socket.io?EIO=4&transport=polling&t=1875fodm 404 in 137ms
 GET /api/socket-health 200 in 51ms
 GET /api/socket-health 200 in 60ms
 GET /socket.io?EIO=4&transport=polling&t=188jkd13 404 in 334ms
 GET /socket.io?EIO=4&transport=polling&t=188ldy11 404 in 149ms
 GET /api/socket-health 200 in 45ms
 GET /api/socket-health 200 in 80ms
 GET /socket.io?EIO=4&transport=polling&t=18a30k0t 404 in 400ms
 GET /socket.io?EIO=4&transport=polling&t=18a5bbbd 404 in 182ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
=== FRIEND REQUEST GET START ===
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
Request type: received User: sayantan2@gmail.com
âœ… Database connected
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
 GET /api/friends 200 in 226ms
âœ… Current user found: {
  id: new ObjectId('6901f85f42c5d010fa811206'),
  email: 'sayantan2@gmail.com',
  friendRequestsCount: 0,
  sentRequestsCount: 1
}
Processing received requests...
Raw friendRequests: []
Processed receivedRequests: []
Populating sender details...
Final populated requests: []
=== FRIEND REQUEST GET END (received) ===
 GET /api/friends/request?type=received 200 in 652ms
 POST /api/users/heartbeat 200 in 670ms
=== FRIEND REQUEST GET START ===
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
Request type: sent User: sayantan2@gmail.com
âœ… Database connected
âœ… Current user found: {
  id: new ObjectId('6901f85f42c5d010fa811206'),
  email: 'sayantan2@gmail.com',
  friendRequestsCount: 0,
  sentRequestsCount: 1
}
Processing sent requests...
Raw sentRequests: [
  {
    from: new ObjectId('6901f85f42c5d010fa811206'),
    fromName: 'sayantan2',
    to: new ObjectId('6905adf16a22b7843b006183'),
    toName: 'sayantan3',
    status: 'pending',
    _id: new ObjectId('6905cdce14ad0d0f020b3985'),
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
Filtering sent request: { status: 'pending', to: new ObjectId('6905adf16a22b7843b006183') }
Mapping sent request: {
  from: new ObjectId('6901f85f42c5d010fa811206'),
  fromName: 'sayantan2',
  to: new ObjectId('6905adf16a22b7843b006183'),
  toName: 'sayantan3',
  status: 'pending',
  _id: new ObjectId('6905cdce14ad0d0f020b3985'),
  createdAt: 2025-11-01T09:07:26.707Z,
  updatedAt: 2025-11-01T09:07:26.707Z
}
Processed sentRequests: [
  {
    id: '6905cdce14ad0d0f020b3985',
    to: {
      id: '6905adf16a22b7843b006183',
      username: 'sayantan3',
      email: '',
      profilePicture: null
    },
    status: 'pending',
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
Populating recipient details...
Looking up recipient: 6905adf16a22b7843b006183
Found recipient: sayantan3
Final populated sent requests: [
  {
    id: '6905cdce14ad0d0f020b3985',
    to: {
      id: '6905adf16a22b7843b006183',
      username: 'sayantan3',
      email: 'sayantan3@gmail.com',
      profilePicture: undefined
    },
    status: 'pending',
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
=== FRIEND REQUEST GET END (sent) ===
 GET /api/friends/request?type=sent 200 in 163ms
 GET /api/socket-health 200 in 64ms
 GET /api/socket-health 200 in 66ms
 GET /socket.io?EIO=4&transport=polling&t=18bmyqpi 404 in 893ms
 GET /socket.io?EIO=4&transport=polling&t=18bov2j5 404 in 307ms
 GET /api/socket-health 200 in 39ms
 GET /api/socket-health 200 in 244ms
 GET /socket.io?EIO=4&transport=polling&t=18dxwsq9 404 in 434ms
 GET /socket.io?EIO=4&transport=polling&t=18e4xdlw 404 in 196ms
 GET /api/socket-health 200 in 56ms
 GET /api/socket-health 200 in 76ms
 GET /socket.io?EIO=4&transport=polling&t=18fhnl2j 404 in 623ms
 GET /socket.io?EIO=4&transport=polling&t=18fk3abd 404 in 318ms
 GET /api/socket-health 200 in 50ms
 GET /api/socket-health 200 in 92ms
 GET /socket.io?EIO=4&transport=polling&t=18h0w6lz 404 in 558ms
 GET /socket.io?EIO=4&transport=polling&t=18h3o10n 404 in 238ms
 GET /api/socket-health 200 in 45ms
 GET /api/socket-health 200 in 68ms
 GET /socket.io?EIO=4&transport=polling&t=18ikmxqd 404 in 568ms
 GET /socket.io?EIO=4&transport=polling&t=18imoccv 404 in 307ms
 GET /api/socket-health 200 in 81ms
 GET /api/socket-health 200 in 117ms
 GET /socket.io?EIO=4&transport=polling&t=18k5h7nz 404 in 794ms
 GET /socket.io?EIO=4&transport=polling&t=18k8t2zq 404 in 519ms
 GET /api/socket-health 200 in 96ms
 GET /api/socket-health 200 in 84ms
 GET /socket.io?EIO=4&transport=polling&t=18mh2nkq 404 in 494ms
 GET /socket.io?EIO=4&transport=polling&t=18mjedpo 404 in 257ms
 GET /api/socket-health 200 in 44ms
 GET /api/socket-health 200 in 70ms
 GET /socket.io?EIO=4&transport=polling&t=18nyyftc 404 in 454ms
 GET /socket.io?EIO=4&transport=polling&t=18o0zw1r 404 in 256ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
 GET /api/conversations 200 in 164ms
 GET /api/socket-health 200 in 47ms
 GET /api/socket-health 200 in 104ms
 GET /socket.io?EIO=4&transport=polling&t=18pigw6d 404 in 637ms
 GET /socket.io?EIO=4&transport=polling&t=18plhnei 404 in 389ms
 GET /api/socket-health 200 in 42ms
 GET /api/socket-health 200 in 60ms
 GET /socket.io?EIO=4&transport=polling&t=18r293tn 404 in 495ms
 GET /socket.io?EIO=4&transport=polling&t=18r431tl 404 in 264ms
 GET /api/socket-health 200 in 45ms
 GET /api/socket-health 200 in 65ms
 GET /socket.io?EIO=4&transport=polling&t=18sln5uu 404 in 449ms
 GET /socket.io?EIO=4&transport=polling&t=18snioj0 404 in 271ms
 GET /api/socket-health 200 in 43ms
 GET /api/socket-health 200 in 63ms
 GET /socket.io?EIO=4&transport=polling&t=18u54bo1 404 in 430ms
 GET /socket.io?EIO=4&transport=polling&t=18u6z87w 404 in 248ms
 GET /api/socket-health 200 in 45ms
 GET /api/socket-health 200 in 61ms
 GET /socket.io?EIO=4&transport=polling&t=18vom619 404 in 548ms
 GET /socket.io?EIO=4&transport=polling&t=18vqdp31 404 in 354ms
 GET /api/socket-health 200 in 83ms
 GET /api/socket-health 200 in 91ms
 GET /socket.io?EIO=4&transport=polling&t=18xes6ub 404 in 563ms
 GET /socket.io?EIO=4&transport=polling&t=18xefcue 404 in 572ms
=== FRIEND REQUEST GET START ===
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
Request type: received User: sayantan2@gmail.com
âœ… Database connected
 GET /api/socket-health 200 in 130ms
âœ… Current user found: {
  id: new ObjectId('6901f85f42c5d010fa811206'),
  email: 'sayantan2@gmail.com',
  friendRequestsCount: 0,
  sentRequestsCount: 1
}
Processing received requests...
Raw friendRequests: []
Processed receivedRequests: []
Populating sender details...
Final populated requests: []
=== FRIEND REQUEST GET END (received) ===
 GET /api/friends/request?type=received 200 in 166ms
 GET /api/socket-health 200 in 296ms
=== FRIEND REQUEST GET START ===
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
Request type: sent User: sayantan2@gmail.com
âœ… Database connected
âœ… Current user found: {
  id: new ObjectId('6901f85f42c5d010fa811206'),
  email: 'sayantan2@gmail.com',
  friendRequestsCount: 0,
  sentRequestsCount: 1
}
Processing sent requests...
Raw sentRequests: [
  {
    from: new ObjectId('6901f85f42c5d010fa811206'),
    fromName: 'sayantan2',
    to: new ObjectId('6905adf16a22b7843b006183'),
    toName: 'sayantan3',
    status: 'pending',
    _id: new ObjectId('6905cdce14ad0d0f020b3985'),
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
Filtering sent request: { status: 'pending', to: new ObjectId('6905adf16a22b7843b006183') }
Mapping sent request: {
  from: new ObjectId('6901f85f42c5d010fa811206'),
  fromName: 'sayantan2',
  to: new ObjectId('6905adf16a22b7843b006183'),
  toName: 'sayantan3',
  status: 'pending',
  _id: new ObjectId('6905cdce14ad0d0f020b3985'),
  createdAt: 2025-11-01T09:07:26.707Z,
  updatedAt: 2025-11-01T09:07:26.707Z
}
Processed sentRequests: [
  {
    id: '6905cdce14ad0d0f020b3985',
    to: {
      id: '6905adf16a22b7843b006183',
      username: 'sayantan3',
      email: '',
      profilePicture: null
    },
    status: 'pending',
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
Populating recipient details...
Looking up recipient: 6905adf16a22b7843b006183
Found recipient: sayantan3
Final populated sent requests: [
  {
    id: '6905cdce14ad0d0f020b3985',
    to: {
      id: '6905adf16a22b7843b006183',
      username: 'sayantan3',
      email: 'sayantan3@gmail.com',
      profilePicture: undefined
    },
    status: 'pending',
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
=== FRIEND REQUEST GET END (sent) ===
 GET /api/friends/request?type=sent 200 in 726ms
 GET /socket.io?EIO=4&transport=polling&t=18yuacil 404 in 798ms
 GET /socket.io?EIO=4&transport=polling&t=18z2pd9p 404 in 535ms
 GET /api/socket-health 200 in 252ms
 GET /api/socket-health 200 in 173ms
 GET /socket.io?EIO=4&transport=polling&t=1919pf14 404 in 1245ms
 GET /socket.io?EIO=4&transport=polling&t=191f79jo 404 in 683ms
 GET /api/socket-health 200 in 185ms
 GET /api/socket-health 200 in 160ms
 GET /socket.io?EIO=4&transport=polling&t=193nt82w 404 in 1827ms
 GET /socket.io?EIO=4&transport=polling&t=193r7uv1 404 in 1007ms
 GET /api/socket-health 200 in 180ms
 GET /api/socket-health 200 in 144ms
 GET /socket.io?EIO=4&transport=polling&t=196o4gm7 404 in 1277ms
 GET /socket.io?EIO=4&transport=polling&t=196sirak 404 in 727ms
 GET /api/socket-health 200 in 80ms
 GET /api/socket-health 200 in 235ms
 GET /socket.io?EIO=4&transport=polling&t=198v4qut 404 in 1364ms
 GET /socket.io?EIO=4&transport=polling&t=1992c8xp 404 in 916ms
 GET /api/socket-health 200 in 157ms
 GET /api/socket-health 200 in 292ms
 GET /socket.io?EIO=4&transport=polling&t=19bf53wo 404 in 986ms
 GET /socket.io?EIO=4&transport=polling&t=19bhz4xp 404 in 569ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
 GET /api/conversations 200 in 262ms
 GET /api/socket-health 200 in 70ms
 GET /api/socket-health 200 in 113ms
 GET /socket.io?EIO=4&transport=polling&t=19dg8hu3 404 in 523ms
 GET /socket.io?EIO=4&transport=polling&t=19djlvlk 404 in 296ms
 GET /api/socket-health 200 in 38ms
 GET /api/socket-health 200 in 65ms
 GET /socket.io?EIO=4&transport=polling&t=19eys3sr 404 in 374ms
 GET /socket.io?EIO=4&transport=polling&t=19f0pf4g 404 in 184ms
 GET /api/socket-health 200 in 30ms
 GET /api/socket-health 200 in 43ms
 GET /socket.io?EIO=4&transport=polling&t=19gicxi1 404 in 276ms
 GET /socket.io?EIO=4&transport=polling&t=19gjkri8 404 in 143ms
 GET /api/socket-health 200 in 77ms
 GET /api/socket-health 200 in 162ms
 GET /socket.io?EIO=4&transport=polling&t=19i3pot5 404 in 889ms
 GET /socket.io?EIO=4&transport=polling&t=19i85xch 404 in 373ms
 GET /api/socket-health 200 in 31ms
 GET /api/socket-health 200 in 195ms
 GET /socket.io?EIO=4&transport=polling&t=19kd95aj 404 in 465ms
 GET /socket.io?EIO=4&transport=polling&t=19kiq9da 404 in 291ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
=== FRIEND REQUEST GET START ===
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
Request type: received User: sayantan2@gmail.com
âœ… Database connected
 GET /api/friends 200 in 253ms
âœ… Current user found: {
  id: new ObjectId('6901f85f42c5d010fa811206'),
  email: 'sayantan2@gmail.com',
  friendRequestsCount: 0,
  sentRequestsCount: 1
}
Processing received requests...
Raw friendRequests: []
Processed receivedRequests: []
Populating sender details...
Final populated requests: []
=== FRIEND REQUEST GET END (received) ===
 GET /api/friends/request?type=received 200 in 541ms
=== FRIEND REQUEST GET START ===
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
Request type: sent User: sayantan2@gmail.com
âœ… Database connected
âœ… Current user found: {
  id: new ObjectId('6901f85f42c5d010fa811206'),
  email: 'sayantan2@gmail.com',
  friendRequestsCount: 0,
  sentRequestsCount: 1
}
Processing sent requests...
Raw sentRequests: [
  {
    from: new ObjectId('6901f85f42c5d010fa811206'),
    fromName: 'sayantan2',
    to: new ObjectId('6905adf16a22b7843b006183'),
    toName: 'sayantan3',
    status: 'pending',
    _id: new ObjectId('6905cdce14ad0d0f020b3985'),
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
Filtering sent request: { status: 'pending', to: new ObjectId('6905adf16a22b7843b006183') }
Mapping sent request: {
  from: new ObjectId('6901f85f42c5d010fa811206'),
  fromName: 'sayantan2',
  to: new ObjectId('6905adf16a22b7843b006183'),
  toName: 'sayantan3',
  status: 'pending',
  _id: new ObjectId('6905cdce14ad0d0f020b3985'),
  createdAt: 2025-11-01T09:07:26.707Z,
  updatedAt: 2025-11-01T09:07:26.707Z
}
Processed sentRequests: [
  {
    id: '6905cdce14ad0d0f020b3985',
    to: {
      id: '6905adf16a22b7843b006183',
      username: 'sayantan3',
      email: '',
      profilePicture: null
    },
    status: 'pending',
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
Populating recipient details...
Looking up recipient: 6905adf16a22b7843b006183
 POST /api/users/heartbeat 200 in 672ms
Found recipient: sayantan3
Final populated sent requests: [
  {
    id: '6905cdce14ad0d0f020b3985',
    to: {
      id: '6905adf16a22b7843b006183',
      username: 'sayantan3',
      email: 'sayantan3@gmail.com',
      profilePicture: undefined
    },
    status: 'pending',
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
=== FRIEND REQUEST GET END (sent) ===
 GET /api/friends/request?type=sent 200 in 148ms
 GET /api/socket-health 200 in 40ms
 GET /api/socket-health 200 in 41ms
 GET /socket.io?EIO=4&transport=polling&t=19lwve0n 404 in 299ms
 GET /socket.io?EIO=4&transport=polling&t=19ly5848 404 in 143ms
 GET /api/socket-health 200 in 25ms
 GET /api/socket-health 200 in 33ms
 GET /socket.io?EIO=4&transport=polling&t=19nfxjrx 404 in 231ms
 GET /socket.io?EIO=4&transport=polling&t=19ngwo81 404 in 121ms
 GET /api/socket-health 200 in 30ms
 GET /api/socket-health 200 in 251ms
 GET /socket.io?EIO=4&transport=polling&t=19ozteoh 404 in 379ms
 GET /socket.io?EIO=4&transport=polling&t=19p6uihp 404 in 152ms
 GET /api/socket-health 200 in 38ms
 GET /api/socket-health 200 in 47ms
 GET /socket.io?EIO=4&transport=polling&t=19qjuv1x 404 in 255ms
 GET /socket.io?EIO=4&transport=polling&t=19ql5tyy 404 in 121ms
 GET /api/socket-health 200 in 48ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
 GET /api/auth/session 200 in 77ms
 GET /api/socket-health 200 in 184ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
=== FRIEND REQUEST GET START ===
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
Request type: received User: sayantan2@gmail.com
âœ… Database connected
 GET /socket.io?EIO=4&transport=polling&t=19s3nyvk 404 in 266ms
 GET /api/random-chat/queue 200 in 244ms
 GET /api/friends 200 in 293ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
 GET /socket.io?EIO=4&transport=polling&t=19s8u0cq 404 in 158ms
 POST /api/users/heartbeat 200 in 323ms
 GET /api/random-chat/session 200 in 213ms
âœ… Current user found: {
  id: new ObjectId('6901f85f42c5d010fa811206'),
  email: 'sayantan2@gmail.com',
  friendRequestsCount: 0,
  sentRequestsCount: 1
}
Processing received requests...
Raw friendRequests: []
Processed receivedRequests: []
Populating sender details...
Final populated requests: []
=== FRIEND REQUEST GET END (received) ===
 GET /api/friends/request?type=received 200 in 684ms
 GET /api/users/me 200 in 694ms
=== FRIEND REQUEST GET START ===
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
Request type: sent User: sayantan2@gmail.com
âœ… Database connected
âœ… Current user found: {
  id: new ObjectId('6901f85f42c5d010fa811206'),
  email: 'sayantan2@gmail.com',
  friendRequestsCount: 0,
  sentRequestsCount: 1
}
Processing sent requests...
Raw sentRequests: [
  {
    from: new ObjectId('6901f85f42c5d010fa811206'),
    fromName: 'sayantan2',
    to: new ObjectId('6905adf16a22b7843b006183'),
    toName: 'sayantan3',
    status: 'pending',
    _id: new ObjectId('6905cdce14ad0d0f020b3985'),
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
Filtering sent request: { status: 'pending', to: new ObjectId('6905adf16a22b7843b006183') }
Mapping sent request: {
  from: new ObjectId('6901f85f42c5d010fa811206'),
  fromName: 'sayantan2',
  to: new ObjectId('6905adf16a22b7843b006183'),
  toName: 'sayantan3',
  status: 'pending',
  _id: new ObjectId('6905cdce14ad0d0f020b3985'),
  createdAt: 2025-11-01T09:07:26.707Z,
  updatedAt: 2025-11-01T09:07:26.707Z
}
Processed sentRequests: [
  {
    id: '6905cdce14ad0d0f020b3985',
    to: {
      id: '6905adf16a22b7843b006183',
      username: 'sayantan3',
      email: '',
      profilePicture: null
    },
    status: 'pending',
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
Populating recipient details...
Looking up recipient: 6905adf16a22b7843b006183
Found recipient: sayantan3
Final populated sent requests: [
  {
    id: '6905cdce14ad0d0f020b3985',
    to: {
      id: '6905adf16a22b7843b006183',
      username: 'sayantan3',
      email: 'sayantan3@gmail.com',
      profilePicture: undefined
    },
    status: 'pending',
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
=== FRIEND REQUEST GET END (sent) ===
 GET /api/friends/request?type=sent 200 in 150ms
 GET /api/socket-health 200 in 36ms
 GET /api/socket-health 200 in 43ms
 GET /socket.io?EIO=4&transport=polling&t=19tmrgwj 404 in 333ms
 GET /socket.io?EIO=4&transport=polling&t=19tnzk5j 404 in 195ms
 GET /api/socket-health 200 in 51ms
 GET /api/socket-health 200 in 70ms
 GET /socket.io?EIO=4&transport=polling&t=19v6pqfd 404 in 286ms
 GET /socket.io?EIO=4&transport=polling&t=19v8qdap 404 in 118ms
 GET /api/socket-health 200 in 38ms
 GET /api/socket-health 200 in 60ms
 GET /socket.io?EIO=4&transport=polling&t=19wpvoqr 404 in 307ms
 GET /socket.io?EIO=4&transport=polling&t=19wrka0m 404 in 136ms
 GET /api/socket-health 200 in 24ms
 GET /api/socket-health 200 in 129ms
 GET /socket.io?EIO=4&transport=polling&t=19y8ubr3 404 in 230ms
 GET /socket.io?EIO=4&transport=polling&t=19yck9kc 404 in 110ms
 GET /api/socket-health 200 in 30ms
 GET /api/socket-health 200 in 135ms
 GET /socket.io?EIO=4&transport=polling&t=19zssi0d 404 in 290ms
 GET /socket.io?EIO=4&transport=polling&t=19zwllw4 404 in 160ms
 GET /api/socket-health 200 in 44ms
 GET /api/socket-health 200 in 45ms
 GET /socket.io?EIO=4&transport=polling&t=1a1cits8 404 in 236ms
 GET /socket.io?EIO=4&transport=polling&t=1a1duenc 404 in 117ms
 GET /api/socket-health 200 in 27ms
 GET /api/socket-health 200 in 29ms
 GET /socket.io?EIO=4&transport=polling&t=1a2vq0g6 404 in 255ms
 GET /socket.io?EIO=4&transport=polling&t=1a2wkcb5 404 in 155ms
 GET /api/socket-health 200 in 34ms
 GET /api/socket-health 200 in 37ms
 GET /socket.io?EIO=4&transport=polling&t=1a4fab4a 404 in 233ms
 GET /socket.io?EIO=4&transport=polling&t=1a4gdckm 404 in 125ms
 GET /api/socket-health 200 in 34ms
 GET /api/socket-health 200 in 141ms
 GET /socket.io?EIO=4&transport=polling&t=1a5yw6aq 404 in 253ms
 GET /socket.io?EIO=4&transport=polling&t=1a62vros 404 in 145ms
 GET /api/socket-health 200 in 26ms
 GET /api/socket-health 200 in 121ms
 GET /socket.io?EIO=4&transport=polling&t=1a7i6r7f 404 in 228ms
 GET /socket.io?EIO=4&transport=polling&t=1a7llveb 404 in 118ms
 GET /api/socket-health 200 in 40ms
 GET /api/socket-health 200 in 44ms
 GET /socket.io?EIO=4&transport=polling&t=1a926heh 404 in 248ms
 GET /socket.io?EIO=4&transport=polling&t=1a93fh4p 404 in 121ms
 GET /api/socket-health 200 in 34ms
 GET /api/socket-health 200 in 154ms
 GET /socket.io?EIO=4&transport=polling&t=1aaljsqg 404 in 250ms
 GET /socket.io?EIO=4&transport=polling&t=1aapx6il 404 in 113ms
 GET /api/socket-health 200 in 27ms
 GET /api/socket-health 200 in 132ms
 GET /socket.io?EIO=4&transport=polling&t=1ac55hjn 404 in 230ms
 GET /socket.io?EIO=4&transport=polling&t=1ac8w5z3 404 in 116ms
 GET /api/socket-health 200 in 45ms
 GET /api/socket-health 200 in 64ms
 GET /socket.io?EIO=4&transport=polling&t=1adpnq3a 404 in 386ms
 GET /socket.io?EIO=4&transport=polling&t=1adriwns 404 in 150ms
 GET /api/socket-health 200 in 33ms
 GET /api/socket-health 200 in 111ms
 GET /socket.io?EIO=4&transport=polling&t=1af8fp5m 404 in 200ms
 GET /socket.io?EIO=4&transport=polling&t=1afbkge6 404 in 100ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
 GET /api/conversations 200 in 485ms
 POST /api/users/heartbeat 200 in 493ms
=== FRIEND REQUEST GET START ===
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
Request type: received User: sayantan2@gmail.com
âœ… Database connected
 GET /api/socket-health 200 in 83ms
âœ… Current user found: {
  id: new ObjectId('6901f85f42c5d010fa811206'),
  email: 'sayantan2@gmail.com',
  friendRequestsCount: 0,
  sentRequestsCount: 1
}
Processing received requests...
Raw friendRequests: []
Processed receivedRequests: []
Populating sender details...
Final populated requests: []
=== FRIEND REQUEST GET END (received) ===
 GET /api/friends/request?type=received 200 in 130ms
 GET /api/socket-health 200 in 58ms
=== FRIEND REQUEST GET START ===
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
Request type: sent User: sayantan2@gmail.com
âœ… Database connected
 GET /socket.io?EIO=4&transport=polling&t=1agtgoyo 404 in 241ms
 GET /socket.io?EIO=4&transport=polling&t=1agv59kh 404 in 116ms
âœ… Current user found: {
  id: new ObjectId('6901f85f42c5d010fa811206'),
  email: 'sayantan2@gmail.com',
  friendRequestsCount: 0,
  sentRequestsCount: 1
}
Processing sent requests...
Raw sentRequests: [
  {
    from: new ObjectId('6901f85f42c5d010fa811206'),
    fromName: 'sayantan2',
    to: new ObjectId('6905adf16a22b7843b006183'),
    toName: 'sayantan3',
    status: 'pending',
    _id: new ObjectId('6905cdce14ad0d0f020b3985'),
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
Filtering sent request: { status: 'pending', to: new ObjectId('6905adf16a22b7843b006183') }
Mapping sent request: {
  from: new ObjectId('6901f85f42c5d010fa811206'),
  fromName: 'sayantan2',
  to: new ObjectId('6905adf16a22b7843b006183'),
  toName: 'sayantan3',
  status: 'pending',
  _id: new ObjectId('6905cdce14ad0d0f020b3985'),
  createdAt: 2025-11-01T09:07:26.707Z,
  updatedAt: 2025-11-01T09:07:26.707Z
}
Processed sentRequests: [
  {
    id: '6905cdce14ad0d0f020b3985',
    to: {
      id: '6905adf16a22b7843b006183',
      username: 'sayantan3',
      email: '',
      profilePicture: null
    },
    status: 'pending',
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
Populating recipient details...
Looking up recipient: 6905adf16a22b7843b006183
Found recipient: sayantan3
Final populated sent requests: [
  {
    id: '6905cdce14ad0d0f020b3985',
    to: {
      id: '6905adf16a22b7843b006183',
      username: 'sayantan3',
      email: 'sayantan3@gmail.com',
      profilePicture: undefined
    },
    status: 'pending',
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
=== FRIEND REQUEST GET END (sent) ===
 GET /api/friends/request?type=sent 200 in 287ms
 GET /api/socket-health 200 in 25ms
 GET /api/socket-health 200 in 131ms
 GET /socket.io?EIO=4&transport=polling&t=1aib84jq 404 in 218ms
 GET /socket.io?EIO=4&transport=polling&t=1aiexfey 404 in 104ms
 GET /api/socket-health 200 in 24ms
 GET /api/socket-health 200 in 29ms
 GET /socket.io?EIO=4&transport=polling&t=1ajusqop 404 in 235ms
 GET /socket.io?EIO=4&transport=polling&t=1ajvn6xe 404 in 130ms
 GET /api/socket-health 200 in 26ms
 GET /api/socket-health 200 in 151ms
 GET /socket.io?EIO=4&transport=polling&t=1ale8rxj 404 in 248ms
 GET /socket.io?EIO=4&transport=polling&t=1alj30fv 404 in 126ms
 GET /api/socket-health 200 in 30ms
 GET /api/socket-health 200 in 120ms
 GET /socket.io?EIO=4&transport=polling&t=1amxuwdl 404 in 221ms
 GET /socket.io?EIO=4&transport=polling&t=1an18mn1 404 in 113ms
 GET /api/socket-health 200 in 24ms
 GET /api/socket-health 200 in 31ms
 GET /socket.io?EIO=4&transport=polling&t=1aohbygb 404 in 213ms
 GET /socket.io?EIO=4&transport=polling&t=1aoi87kl 404 in 110ms
 GET /api/socket-health 200 in 40ms
 GET /api/socket-health 200 in 61ms
 GET /socket.io?EIO=4&transport=polling&t=1aq1dqd8 404 in 334ms
 GET /socket.io?EIO=4&transport=polling&t=1aq36hyb 404 in 159ms
 GET /api/socket-health 200 in 37ms
 GET /api/socket-health 200 in 136ms
 GET /socket.io?EIO=4&transport=polling&t=1arl2703 404 in 249ms
 GET /socket.io?EIO=4&transport=polling&t=1arovixc 404 in 119ms
 GET /api/socket-health 200 in 29ms
 GET /api/socket-health 200 in 135ms
 GET /socket.io?EIO=4&transport=polling&t=1at4dwh1 404 in 243ms
 GET /socket.io?EIO=4&transport=polling&t=1at88qx5 404 in 112ms
 GET /api/socket-health 200 in 44ms
 GET /api/socket-health 200 in 271ms
 GET /socket.io?EIO=4&transport=polling&t=1auo16wm 404 in 647ms
 GET /socket.io?EIO=4&transport=polling&t=1auvtyok 404 in 359ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
=== FRIEND REQUEST GET START ===
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
Request type: received User: sayantan2@gmail.com
âœ… Database connected
 GET /api/friends 200 in 185ms
âœ… Current user found: {
  id: new ObjectId('6901f85f42c5d010fa811206'),
  email: 'sayantan2@gmail.com',
  friendRequestsCount: 0,
  sentRequestsCount: 1
}
Processing received requests...
Raw friendRequests: []
Processed receivedRequests: []
Populating sender details...
Final populated requests: []
=== FRIEND REQUEST GET END (received) ===
 GET /api/friends/request?type=received 200 in 177ms
=== FRIEND REQUEST GET START ===
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
Request type: sent User: sayantan2@gmail.com
âœ… Database connected
âœ… Current user found: {
  id: new ObjectId('6901f85f42c5d010fa811206'),
  email: 'sayantan2@gmail.com',
  friendRequestsCount: 0,
  sentRequestsCount: 1
}
Processing sent requests...
Raw sentRequests: [
  {
    from: new ObjectId('6901f85f42c5d010fa811206'),
    fromName: 'sayantan2',
    to: new ObjectId('6905adf16a22b7843b006183'),
    toName: 'sayantan3',
    status: 'pending',
    _id: new ObjectId('6905cdce14ad0d0f020b3985'),
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
Filtering sent request: { status: 'pending', to: new ObjectId('6905adf16a22b7843b006183') }
Mapping sent request: {
  from: new ObjectId('6901f85f42c5d010fa811206'),
  fromName: 'sayantan2',
  to: new ObjectId('6905adf16a22b7843b006183'),
  toName: 'sayantan3',
  status: 'pending',
  _id: new ObjectId('6905cdce14ad0d0f020b3985'),
  createdAt: 2025-11-01T09:07:26.707Z,
  updatedAt: 2025-11-01T09:07:26.707Z
}
Processed sentRequests: [
  {
    id: '6905cdce14ad0d0f020b3985',
    to: {
      id: '6905adf16a22b7843b006183',
      username: 'sayantan3',
      email: '',
      profilePicture: null
    },
    status: 'pending',
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
Populating recipient details...
Looking up recipient: 6905adf16a22b7843b006183
Found recipient: sayantan3
Final populated sent requests: [
  {
    id: '6905cdce14ad0d0f020b3985',
    to: {
      id: '6905adf16a22b7843b006183',
      username: 'sayantan3',
      email: 'sayantan3@gmail.com',
      profilePicture: undefined
    },
    status: 'pending',
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
=== FRIEND REQUEST GET END (sent) ===
 GET /api/friends/request?type=sent 200 in 163ms
 GET /api/socket-health 200 in 25ms
 GET /api/socket-health 200 in 110ms
 GET /socket.io?EIO=4&transport=polling&t=1aw7a8y0 404 in 203ms
 GET /socket.io?EIO=4&transport=polling&t=1awakqcf 404 in 104ms
 GET /api/socket-health 200 in 25ms
 GET /api/socket-health 200 in 111ms
 GET /socket.io?EIO=4&transport=polling&t=1axqq4nd 404 in 195ms
 GET /socket.io?EIO=4&transport=polling&t=1axtvaq6 404 in 91ms
 GET /api/socket-health 200 in 32ms
 GET /api/socket-health 200 in 186ms
 GET /socket.io?EIO=4&transport=polling&t=1azaiiu8 404 in 582ms
 GET /socket.io?EIO=4&transport=polling&t=1azfqdek 404 in 413ms
 GET /api/socket-health 200 in 70ms
 GET /api/socket-health 200 in 63ms
 GET /socket.io?EIO=4&transport=polling&t=1b112u6t 404 in 343ms
 GET /socket.io?EIO=4&transport=polling&t=1b12neve 404 in 174ms
 GET /api/socket-health 200 in 32ms
 GET /api/socket-health 200 in 49ms
 GET /socket.io?EIO=4&transport=polling&t=1b2dtouc 404 in 269ms
 GET /socket.io?EIO=4&transport=polling&t=1b2f9ujr 404 in 133ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
 POST /api/users/heartbeat 200 in 207ms
 GET /api/socket-health 200 in 47ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
 GET /api/socket-health 200 in 120ms
 GET /api/conversations 200 in 258ms
 GET /socket.io?EIO=4&transport=polling&t=1b3xqde5 404 in 206ms
 GET /socket.io?EIO=4&transport=polling&t=1b415q1b 404 in 107ms
 GET /api/socket-health 200 in 25ms
 GET /api/socket-health 200 in 39ms
 GET /socket.io?EIO=4&transport=polling&t=1b5gg471 404 in 216ms
 GET /socket.io?EIO=4&transport=polling&t=1b5hk89g 404 in 116ms
 GET /api/socket-health 200 in 25ms
 GET /api/socket-health 200 in 110ms
 GET /socket.io?EIO=4&transport=polling&t=1b6zxg1e 404 in 202ms
 GET /socket.io?EIO=4&transport=polling&t=1b731yjk 404 in 103ms
 GET /api/socket-health 200 in 29ms
 GET /api/socket-health 200 in 123ms
 GET /socket.io?EIO=4&transport=polling&t=1b8jkkhh 404 in 220ms
 GET /socket.io?EIO=4&transport=polling&t=1b8n28pa 404 in 111ms
 GET /api/socket-health 200 in 24ms
 GET /api/socket-health 200 in 110ms
 GET /socket.io?EIO=4&transport=polling&t=1ba39p1q 404 in 200ms
 GET /socket.io?EIO=4&transport=polling&t=1ba6e2r0 404 in 100ms
 GET /api/socket-health 200 in 28ms
 GET /api/socket-health 200 in 133ms
 GET /socket.io?EIO=4&transport=polling&t=1bbmvi0y 404 in 237ms
 GET /socket.io?EIO=4&transport=polling&t=1bbqowbm 404 in 116ms
 GET /api/socket-health 200 in 41ms
 GET /api/socket-health 200 in 32ms
 GET /socket.io?EIO=4&transport=polling&t=1bd6x72h 404 in 225ms
 GET /socket.io?EIO=4&transport=polling&t=1bd7ucx9 404 in 108ms
 GET /api/socket-health 200 in 24ms
 GET /api/socket-health 200 in 33ms
 GET /socket.io?EIO=4&transport=polling&t=1bepsnpc 404 in 195ms
 GET /socket.io?EIO=4&transport=polling&t=1beqqss0 404 in 104ms
 GET /api/socket-health 200 in 23ms
 GET /api/socket-health 200 in 26ms
 GET /socket.io?EIO=4&transport=polling&t=1bg9er7a 404 in 208ms
 GET /socket.io?EIO=4&transport=polling&t=1bga66ig 404 in 108ms
 GET /api/socket-health 200 in 26ms
 GET /api/socket-health 200 in 116ms
 GET /socket.io?EIO=4&transport=polling&t=1bht6bks 404 in 205ms
 GET /socket.io?EIO=4&transport=polling&t=1bhwgnhc 404 in 102ms
 GET /api/socket-health 200 in 36ms
=== FRIEND REQUEST GET START ===
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
Request type: received User: sayantan2@gmail.com
âœ… Database connected
âœ… Current user found: {
  id: new ObjectId('6901f85f42c5d010fa811206'),
  email: 'sayantan2@gmail.com',
  friendRequestsCount: 0,
  sentRequestsCount: 1
}
Processing received requests...
Raw friendRequests: []
Processed receivedRequests: []
Populating sender details...
Final populated requests: []
=== FRIEND REQUEST GET END (received) ===
 GET /api/friends/request?type=received 200 in 145ms
 GET /api/socket-health 200 in 120ms
=== FRIEND REQUEST GET START ===
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
Request type: sent User: sayantan2@gmail.com
âœ… Database connected
âœ… Current user found: {
  id: new ObjectId('6901f85f42c5d010fa811206'),
  email: 'sayantan2@gmail.com',
  friendRequestsCount: 0,
  sentRequestsCount: 1
}
Processing sent requests...
Raw sentRequests: [
  {
    from: new ObjectId('6901f85f42c5d010fa811206'),
    fromName: 'sayantan2',
    to: new ObjectId('6905adf16a22b7843b006183'),
    toName: 'sayantan3',
    status: 'pending',
    _id: new ObjectId('6905cdce14ad0d0f020b3985'),
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
Filtering sent request: { status: 'pending', to: new ObjectId('6905adf16a22b7843b006183') }
Mapping sent request: {
  from: new ObjectId('6901f85f42c5d010fa811206'),
  fromName: 'sayantan2',
  to: new ObjectId('6905adf16a22b7843b006183'),
  toName: 'sayantan3',
  status: 'pending',
  _id: new ObjectId('6905cdce14ad0d0f020b3985'),
  createdAt: 2025-11-01T09:07:26.707Z,
  updatedAt: 2025-11-01T09:07:26.707Z
}
Processed sentRequests: [
  {
    id: '6905cdce14ad0d0f020b3985',
    to: {
      id: '6905adf16a22b7843b006183',
      username: 'sayantan3',
      email: '',
      profilePicture: null
    },
    status: 'pending',
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
Populating recipient details...
Looking up recipient: 6905adf16a22b7843b006183
 GET /socket.io?EIO=4&transport=polling&t=1bjd03is 404 in 233ms
 GET /socket.io?EIO=4&transport=polling&t=1bjglhxy 404 in 123ms
Found recipient: sayantan3
Final populated sent requests: [
  {
    id: '6905cdce14ad0d0f020b3985',
    to: {
      id: '6905adf16a22b7843b006183',
      username: 'sayantan3',
      email: 'sayantan3@gmail.com',
      profilePicture: undefined
    },
    status: 'pending',
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
=== FRIEND REQUEST GET END (sent) ===
 GET /api/friends/request?type=sent 200 in 164ms
 GET /api/socket-health 200 in 25ms
 GET /api/socket-health 200 in 106ms
 GET /socket.io?EIO=4&transport=polling&t=1bkw5uq2 404 in 197ms
 GET /socket.io?EIO=4&transport=polling&t=1bkz5l5r 404 in 101ms
 GET /api/socket-health 200 in 24ms
 GET /api/socket-health 200 in 27ms
 GET /socket.io?EIO=4&transport=polling&t=1bmfkb8y 404 in 204ms
 GET /socket.io?EIO=4&transport=polling&t=1bmgd9k2 404 in 103ms
 GET /api/socket-health 200 in 29ms
 GET /api/socket-health 200 in 31ms
 GET /socket.io?EIO=4&transport=polling&t=1bnzecmt 404 in 203ms
 GET /socket.io?EIO=4&transport=polling&t=1bo0bzwo 404 in 104ms
 GET /api/socket-health 200 in 24ms
 GET /api/socket-health 200 in 31ms
 GET /socket.io?EIO=4&transport=polling&t=1bpirgi5 404 in 210ms
 GET /socket.io?EIO=4&transport=polling&t=1bpjoeip 404 in 112ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
 POST /api/users/heartbeat 200 in 199ms
 GET /api/socket-health 200 in 27ms
 GET /api/socket-health 200 in 109ms
 GET /socket.io?EIO=4&transport=polling&t=1br2i2qq 404 in 198ms
 GET /socket.io?EIO=4&transport=polling&t=1br5l0yh 404 in 99ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
 GET /api/conversations 200 in 140ms
 GET /api/socket-health 200 in 34ms
 GET /api/socket-health 200 in 106ms
 GET /socket.io?EIO=4&transport=polling&t=1bsm0jne 404 in 201ms
 GET /socket.io?EIO=4&transport=polling&t=1bsp2uqr 404 in 102ms
 GET /api/socket-health 200 in 38ms
 GET /api/socket-health 200 in 64ms
 GET /socket.io?EIO=4&transport=polling&t=1bu5n7iv 404 in 441ms
 GET /socket.io?EIO=4&transport=polling&t=1bu88gdg 404 in 220ms
 GET /api/socket-health 200 in 51ms
 GET /api/socket-health 200 in 51ms
 GET /socket.io?EIO=4&transport=polling&t=1bvpt13p 404 in 266ms
 GET /socket.io?EIO=4&transport=polling&t=1bvravkl 404 in 132ms
 GET /api/socket-health 200 in 279ms
 GET /api/socket-health 200 in 96ms
 GET /socket.io?EIO=4&transport=polling&t=1bxjtd8w 404 in 1190ms
 GET /socket.io?EIO=4&transport=polling&t=1bxmje00 404 in 622ms
 GET /api/socket-health 200 in 26ms
 GET /api/socket-health 200 in 115ms
 GET /socket.io?EIO=4&transport=polling&t=1bzjwd2y 404 in 201ms
 GET /socket.io?EIO=4&transport=polling&t=1bzn5ssu 404 in 100ms
 GET /api/socket-health 200 in 25ms
 GET /api/socket-health 200 in 35ms
 GET /socket.io?EIO=4&transport=polling&t=1c13969y 404 in 207ms
 GET /socket.io?EIO=4&transport=polling&t=1c149mys 404 in 106ms
 GET /api/socket-health 200 in 25ms
 GET /api/socket-health 200 in 108ms
 GET /socket.io?EIO=4&transport=polling&t=1c2n5xjr 404 in 205ms
 GET /socket.io?EIO=4&transport=polling&t=1c2q620y 404 in 105ms
 GET /api/socket-health 200 in 24ms
 GET /api/socket-health 200 in 134ms
 GET /socket.io?EIO=4&transport=polling&t=1c46ow2f 404 in 231ms
 GET /socket.io?EIO=4&transport=polling&t=1c4afnph 404 in 106ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
=== FRIEND REQUEST GET START ===
 GET /api/socket-health 200 in 82ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
Request type: received User: sayantan2@gmail.com
âœ… Database connected
 GET /api/friends 200 in 265ms
 GET /api/socket-health 200 in 184ms
 GET /socket.io?EIO=4&transport=polling&t=1c5s4djr 404 in 598ms
 GET /socket.io?EIO=4&transport=polling&t=1c5xhuxy 404 in 418ms
âœ… Current user found: {
  id: new ObjectId('6901f85f42c5d010fa811206'),
  email: 'sayantan2@gmail.com',
  friendRequestsCount: 0,
  sentRequestsCount: 1
}
Processing received requests...
Raw friendRequests: []
Processed receivedRequests: []
Populating sender details...
Final populated requests: []
=== FRIEND REQUEST GET END (received) ===
 GET /api/friends/request?type=received 200 in 967ms
=== FRIEND REQUEST GET START ===
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
Request type: sent User: sayantan2@gmail.com
âœ… Database connected
âœ… Current user found: {
  id: new ObjectId('6901f85f42c5d010fa811206'),
  email: 'sayantan2@gmail.com',
  friendRequestsCount: 0,
  sentRequestsCount: 1
}
Processing sent requests...
Raw sentRequests: [
  {
    from: new ObjectId('6901f85f42c5d010fa811206'),
    fromName: 'sayantan2',
    to: new ObjectId('6905adf16a22b7843b006183'),
    toName: 'sayantan3',
    status: 'pending',
    _id: new ObjectId('6905cdce14ad0d0f020b3985'),
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
Filtering sent request: { status: 'pending', to: new ObjectId('6905adf16a22b7843b006183') }
Mapping sent request: {
  from: new ObjectId('6901f85f42c5d010fa811206'),
  fromName: 'sayantan2',
  to: new ObjectId('6905adf16a22b7843b006183'),
  toName: 'sayantan3',
  status: 'pending',
  _id: new ObjectId('6905cdce14ad0d0f020b3985'),
  createdAt: 2025-11-01T09:07:26.707Z,
  updatedAt: 2025-11-01T09:07:26.707Z
}
Processed sentRequests: [
  {
    id: '6905cdce14ad0d0f020b3985',
    to: {
      id: '6905adf16a22b7843b006183',
      username: 'sayantan3',
      email: '',
      profilePicture: null
    },
    status: 'pending',
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
Populating recipient details...
Looking up recipient: 6905adf16a22b7843b006183
Found recipient: sayantan3
Final populated sent requests: [
  {
    id: '6905cdce14ad0d0f020b3985',
    to: {
      id: '6905adf16a22b7843b006183',
      username: 'sayantan3',
      email: 'sayantan3@gmail.com',
      profilePicture: undefined
    },
    status: 'pending',
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
=== FRIEND REQUEST GET END (sent) ===
 GET /api/friends/request?type=sent 200 in 132ms
 GET /api/socket-health 200 in 23ms
 GET /api/socket-health 200 in 127ms
 GET /socket.io?EIO=4&transport=polling&t=1c79ks7p 404 in 218ms
 GET /socket.io?EIO=4&transport=polling&t=1c7d9yld 404 in 102ms
 GET /api/socket-health 200 in 23ms
 GET /api/socket-health 200 in 32ms
 GET /socket.io?EIO=4&transport=polling&t=1c8sy6hq 404 in 201ms
 GET /socket.io?EIO=4&transport=polling&t=1c8twodv 404 in 104ms
 GET /api/socket-health 200 in 31ms
 GET /api/socket-health 200 in 26ms
 GET /socket.io?EIO=4&transport=polling&t=1cacrdmh 404 in 201ms
 GET /socket.io?EIO=4&transport=polling&t=1cadikhl 404 in 106ms
 GET /api/socket-health 200 in 27ms
 GET /api/socket-health 200 in 156ms
 GET /socket.io?EIO=4&transport=polling&t=1cbw7r8p 404 in 246ms
 GET /socket.io?EIO=4&transport=polling&t=1cc0kfpn 404 in 103ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
 GET /api/socket-health 200 in 47ms
 GET /api/socket-health 200 in 120ms
 GET /socket.io?EIO=4&transport=polling&t=1cdg9fc8 404 in 278ms
 GET /socket.io?EIO=4&transport=polling&t=1cdjo92s 404 in 166ms
 POST /api/users/heartbeat 200 in 429ms
 GET /api/socket-health 200 in 26ms
 GET /api/socket-health 200 in 28ms
 GET /socket.io?EIO=4&transport=polling&t=1cezcay5 404 in 211ms
 GET /socket.io?EIO=4&transport=polling&t=1cf05wcb 404 in 114ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
 GET /api/conversations 200 in 122ms
 GET /api/socket-health 200 in 366ms
 GET /api/socket-health 200 in 194ms
 GET /socket.io?EIO=4&transport=polling&t=1cgsohna 404 in 511ms
 GET /socket.io?EIO=4&transport=polling&t=1cgyroj8 404 in 237ms
 GET /api/socket-health 200 in 38ms
 GET /api/socket-health 200 in 170ms
 GET /socket.io?EIO=4&transport=polling&t=1ciuyh8k 404 in 476ms
 GET /socket.io?EIO=4&transport=polling&t=1cizq0d3 404 in 332ms
 GET /api/socket-health 200 in 128ms
 GET /api/socket-health 200 in 76ms
 GET /socket.io?EIO=4&transport=polling&t=1ckjpknw 404 in 496ms
 GET /socket.io?EIO=4&transport=polling&t=1cklutot 404 in 314ms
 GET /api/socket-health 200 in 33ms
 GET /socket.io?EIO=4&transport=polling&t=1clxjmby 404 in 129ms
 GET /api/socket-health 200 in 30ms
 GET /socket.io?EIO=4&transport=polling&t=1cmp5lln 404 in 98ms
 GET /api/socket-health 200 in 33ms
 GET /socket.io?EIO=4&transport=polling&t=1cnh13tv 404 in 104ms
 GET /api/socket-health 200 in 24ms
 GET /socket.io?EIO=4&transport=polling&t=1co8w023 404 in 96ms
 GET /api/socket-health 200 in 24ms
 GET /socket.io?EIO=4&transport=polling&t=1cp0cvtc 404 in 98ms
 GET /api/socket-health 200 in 21ms
 GET /socket.io?EIO=4&transport=polling&t=1cpsd136 404 in 97ms
 GET /api/socket-health 200 in 33ms
 GET /socket.io?EIO=4&transport=polling&t=1cqkda8o 404 in 103ms
 GET /api/socket-health 200 in 27ms
 GET /socket.io?EIO=4&transport=polling&t=1crbxgc7 404 in 108ms
 GET /api/socket-health 200 in 36ms
 GET /socket.io?EIO=4&transport=polling&t=1cs3w99o 404 in 224ms
 GET /api/socket-health 200 in 65ms
 GET /socket.io?EIO=4&transport=polling&t=1csy5urc 404 in 348ms
 GET /api/socket-health 200 in 56ms
 GET /socket.io?EIO=4&transport=polling&t=1ctp23gv 404 in 624ms
=== FRIEND REQUEST GET START ===
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
Request type: received User: sayantan2@gmail.com
âœ… Database connected
 GET /api/socket-health 200 in 189ms
âœ… Current user found: {
  id: new ObjectId('6901f85f42c5d010fa811206'),
  email: 'sayantan2@gmail.com',
  friendRequestsCount: 0,
  sentRequestsCount: 1
}
Processing received requests...
Raw friendRequests: []
Processed receivedRequests: []
Populating sender details...
Final populated requests: []
=== FRIEND REQUEST GET END (received) ===
 GET /api/friends/request?type=received 200 in 217ms
=== FRIEND REQUEST GET START ===
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
Request type: sent User: sayantan2@gmail.com
âœ… Database connected
 GET /socket.io?EIO=4&transport=polling&t=1cuzmxvd 404 in 1085ms
âœ… Current user found: {
  id: new ObjectId('6901f85f42c5d010fa811206'),
  email: 'sayantan2@gmail.com',
  friendRequestsCount: 0,
  sentRequestsCount: 1
}
Processing sent requests...
Raw sentRequests: [
  {
    from: new ObjectId('6901f85f42c5d010fa811206'),
    fromName: 'sayantan2',
    to: new ObjectId('6905adf16a22b7843b006183'),
    toName: 'sayantan3',
    status: 'pending',
    _id: new ObjectId('6905cdce14ad0d0f020b3985'),
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
Filtering sent request: { status: 'pending', to: new ObjectId('6905adf16a22b7843b006183') }
Mapping sent request: {
  from: new ObjectId('6901f85f42c5d010fa811206'),
  fromName: 'sayantan2',
  to: new ObjectId('6905adf16a22b7843b006183'),
  toName: 'sayantan3',
  status: 'pending',
  _id: new ObjectId('6905cdce14ad0d0f020b3985'),
  createdAt: 2025-11-01T09:07:26.707Z,
  updatedAt: 2025-11-01T09:07:26.707Z
}
Processed sentRequests: [
  {
    id: '6905cdce14ad0d0f020b3985',
    to: {
      id: '6905adf16a22b7843b006183',
      username: 'sayantan3',
      email: '',
      profilePicture: null
    },
    status: 'pending',
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
Populating recipient details...
Looking up recipient: 6905adf16a22b7843b006183
Found recipient: sayantan3
Final populated sent requests: [
  {
    id: '6905cdce14ad0d0f020b3985',
    to: {
      id: '6905adf16a22b7843b006183',
      username: 'sayantan3',
      email: 'sayantan3@gmail.com',
      profilePicture: undefined
    },
    status: 'pending',
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
=== FRIEND REQUEST GET END (sent) ===
 GET /api/friends/request?type=sent 200 in 257ms
 GET /api/socket-health 200 in 87ms
 GET /socket.io?EIO=4&transport=polling&t=1cw20lwe 404 in 317ms
 GET /api/socket-health 200 in 74ms
 GET /socket.io?EIO=4&transport=polling&t=1cws46ld 404 in 233ms
 GET /api/socket-health 200 in 33ms
 GET /socket.io?EIO=4&transport=polling&t=1cxi8ec5 404 in 109ms
 GET /api/socket-health 200 in 58ms
 GET /socket.io?EIO=4&transport=polling&t=1cyaz1xx 404 in 143ms
 GET /api/socket-health 200 in 33ms
 GET /socket.io?EIO=4&transport=polling&t=1cz1zbap 404 in 113ms
 GET /api/socket-health 200 in 46ms
 GET /socket.io?EIO=4&transport=polling&t=1czu3q6q 404 in 107ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
 GET /api/socket-health 200 in 69ms
 GET /socket.io?EIO=4&transport=polling&t=1d0mk7m2 404 in 108ms
 POST /api/users/heartbeat 200 in 261ms
 GET /api/socket-health 200 in 31ms
 GET /socket.io?EIO=4&transport=polling&t=1d1d59c8 404 in 155ms
 GET /api/socket-health 200 in 46ms
 GET /socket.io?EIO=4&transport=polling&t=1d25g84l 404 in 203ms
 GET /api/socket-health 200 in 49ms
 GET /socket.io?EIO=4&transport=polling&t=1d2xiie9 404 in 107ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
 GET /api/socket-health 200 in 103ms
 GET /socket.io?EIO=4&transport=polling&t=1d3qosim 404 in 161ms
 GET /api/conversations 200 in 300ms
 GET /api/socket-health 200 in 31ms
 GET /socket.io?EIO=4&transport=polling&t=1d4g85m8 404 in 116ms
 GET /api/socket-health 200 in 26ms
 GET /socket.io?EIO=4&transport=polling&t=1d57r1q9 404 in 97ms
 GET /api/socket-health 200 in 28ms
 GET /socket.io?EIO=4&transport=polling&t=1d5zrjxq 404 in 99ms
 GET /api/socket-health 200 in 41ms
 GET /socket.io?EIO=4&transport=polling&t=1d6ruq9f 404 in 109ms
 GET /api/socket-health 200 in 23ms
 GET /socket.io?EIO=4&transport=polling&t=1d7j2u7s 404 in 101ms
 GET /api/socket-health 200 in 30ms
 GET /socket.io?EIO=4&transport=polling&t=1d8bcq2r 404 in 100ms
 GET /api/socket-health 200 in 28ms
 GET /socket.io?EIO=4&transport=polling&t=1d92njap 404 in 112ms
 GET /api/socket-health 200 in 35ms
 GET /socket.io?EIO=4&transport=polling&t=1d9uko2x 404 in 105ms
 GET /api/socket-health 200 in 38ms
 GET /socket.io?EIO=4&transport=polling&t=1damwskr 404 in 252ms
 GET /api/socket-health 200 in 86ms
 GET /socket.io?EIO=4&transport=polling&t=1dbg9qm1 404 in 291ms
 GET /api/socket-health 200 in 29ms
 GET /socket.io?EIO=4&transport=polling&t=1dc5zns2 404 in 121ms
 GET /api/socket-health 200 in 41ms
 GET /socket.io?EIO=4&transport=polling&t=1dcy3axb 404 in 128ms
 GET /api/socket-health 200 in 165ms
 GET /api/socket-health 200 in 46ms
 GET /socket.io?EIO=4&transport=polling&t=1ddteu81 404 in 1030ms
 GET /socket.io?EIO=4&transport=polling&t=1dem9l56 404 in 114ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
=== FRIEND REQUEST GET START ===
 GET /api/socket-health 200 in 68ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
Request type: received User: sayantan2@gmail.com
âœ… Database connected
 GET /api/socket-health 200 in 122ms
 GET /api/friends 200 in 327ms
 GET /socket.io?EIO=4&transport=polling&t=1dg2ggaw 404 in 239ms
 GET /socket.io?EIO=4&transport=polling&t=1dg613t0 404 in 127ms
âœ… Current user found: {
  id: new ObjectId('6901f85f42c5d010fa811206'),
  email: 'sayantan2@gmail.com',
  friendRequestsCount: 0,
  sentRequestsCount: 1
}
Processing received requests...
Raw friendRequests: []
Processed receivedRequests: []
Populating sender details...
Final populated requests: []
=== FRIEND REQUEST GET END (received) ===
 GET /api/friends/request?type=received 200 in 562ms
=== FRIEND REQUEST GET START ===
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
Request type: sent User: sayantan2@gmail.com
âœ… Database connected
âœ… Current user found: {
  id: new ObjectId('6901f85f42c5d010fa811206'),
  email: 'sayantan2@gmail.com',
  friendRequestsCount: 0,
  sentRequestsCount: 1
}
Processing sent requests...
Raw sentRequests: [
  {
    from: new ObjectId('6901f85f42c5d010fa811206'),
    fromName: 'sayantan2',
    to: new ObjectId('6905adf16a22b7843b006183'),
    toName: 'sayantan3',
    status: 'pending',
    _id: new ObjectId('6905cdce14ad0d0f020b3985'),
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
Filtering sent request: { status: 'pending', to: new ObjectId('6905adf16a22b7843b006183') }
Mapping sent request: {
  from: new ObjectId('6901f85f42c5d010fa811206'),
  fromName: 'sayantan2',
  to: new ObjectId('6905adf16a22b7843b006183'),
  toName: 'sayantan3',
  status: 'pending',
  _id: new ObjectId('6905cdce14ad0d0f020b3985'),
  createdAt: 2025-11-01T09:07:26.707Z,
  updatedAt: 2025-11-01T09:07:26.707Z
}
Processed sentRequests: [
  {
    id: '6905cdce14ad0d0f020b3985',
    to: {
      id: '6905adf16a22b7843b006183',
      username: 'sayantan3',
      email: '',
      profilePicture: null
    },
    status: 'pending',
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
Populating recipient details...
Looking up recipient: 6905adf16a22b7843b006183
Found recipient: sayantan3
Final populated sent requests: [
  {
    id: '6905cdce14ad0d0f020b3985',
    to: {
      id: '6905adf16a22b7843b006183',
      username: 'sayantan3',
      email: 'sayantan3@gmail.com',
      profilePicture: undefined
    },
    status: 'pending',
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
=== FRIEND REQUEST GET END (sent) ===
 GET /api/friends/request?type=sent 200 in 157ms
 GET /api/socket-health 200 in 57ms
 GET /api/socket-health 200 in 205ms
 GET /socket.io?EIO=4&transport=polling&t=1dhliuoy 404 in 184ms
 GET /socket.io?EIO=4&transport=polling&t=1dhr9lar 404 in 104ms
 GET /api/socket-health 200 in 27ms
 GET /api/socket-health 200 in 112ms
 GET /socket.io?EIO=4&transport=polling&t=1dj3rwvg 404 in 121ms
 GET /socket.io?EIO=4&transport=polling&t=1dj6xxxq 404 in 106ms
 GET /api/socket-health 200 in 41ms
 GET /api/socket-health 200 in 182ms
 GET /socket.io?EIO=4&transport=polling&t=1dko1g6p 404 in 182ms
 GET /socket.io?EIO=4&transport=polling&t=1dkt5t06 404 in 112ms
 GET /api/socket-health 200 in 24ms
 GET /api/socket-health 200 in 104ms
 GET /socket.io?EIO=4&transport=polling&t=1dm71yij 404 in 203ms
 GET /socket.io?EIO=4&transport=polling&t=1dm9zb2p 404 in 110ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
 GET /api/socket-health 200 in 50ms
 GET /api/socket-health 200 in 130ms
 GET /socket.io?EIO=4&transport=polling&t=1dnrblw6 404 in 224ms
 GET /socket.io?EIO=4&transport=polling&t=1dnuzmoo 404 in 111ms
 POST /api/users/heartbeat 200 in 330ms
 GET /api/socket-health 200 in 25ms
 GET /api/socket-health 200 in 122ms
 GET /socket.io?EIO=4&transport=polling&t=1dpa8iee 404 in 218ms
 GET /socket.io?EIO=4&transport=polling&t=1dpdonj6 404 in 100ms
 GET /api/socket-health 200 in 26ms
 GET /api/socket-health 200 in 123ms
 GET /socket.io?EIO=4&transport=polling&t=1dqtn099 404 in 123ms
 GET /socket.io?EIO=4&transport=polling&t=1dqx4xwc 404 in 98ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
 GET /api/conversations 200 in 144ms
 GET /api/socket-health 200 in 62ms
 GET /api/socket-health 200 in 175ms
 GET /socket.io?EIO=4&transport=polling&t=1dse7s7z 404 in 175ms
 GET /socket.io?EIO=4&transport=polling&t=1dsj5scw 404 in 134ms
 GET /api/socket-health 200 in 29ms
 GET /api/socket-health 200 in 193ms
 GET /socket.io?EIO=4&transport=polling&t=1dtwq8q8 404 in 297ms
 GET /socket.io?EIO=4&transport=polling&t=1du24j6i 404 in 124ms
 GET /api/socket-health 200 in 38ms
 GET /api/socket-health 200 in 230ms
 GET /socket.io?EIO=4&transport=polling&t=1dvgrrvz 404 in 352ms
 GET /socket.io?EIO=4&transport=polling&t=1dvn7kb6 404 in 135ms
 GET /api/socket-health 200 in 34ms
 GET /api/socket-health 200 in 127ms
 GET /socket.io?EIO=4&transport=polling&t=1dx031mi 404 in 227ms
 GET /socket.io?EIO=4&transport=polling&t=1dx3o75k 404 in 105ms
 GET /api/socket-health 200 in 30ms
 GET /api/socket-health 200 in 109ms
 GET /socket.io?EIO=4&transport=polling&t=1dyjlm5l 404 in 200ms
 GET /socket.io?EIO=4&transport=polling&t=1dymplr9 404 in 100ms
 GET /api/socket-health 200 in 44ms
 GET /api/socket-health 200 in 140ms
 GET /socket.io?EIO=4&transport=polling&t=1e03m6kb 404 in 273ms
 GET /socket.io?EIO=4&transport=polling&t=1e07kvg7 404 in 145ms
 GET /api/socket-health 200 in 53ms
 GET /api/socket-health 200 in 225ms
 GET /socket.io?EIO=4&transport=polling&t=1e1n8bki 404 in 325ms
 GET /socket.io?EIO=4&transport=polling&t=1e1tkh45 404 in 136ms
 GET /api/socket-health 200 in 25ms
 GET /api/socket-health 200 in 113ms
 GET /socket.io?EIO=4&transport=polling&t=1e36b89a 404 in 214ms
 GET /socket.io?EIO=4&transport=polling&t=1e39ijz3 404 in 102ms
=== FRIEND REQUEST GET START ===
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
Request type: received User: sayantan2@gmail.com
âœ… Database connected
âœ… Current user found: {
  id: new ObjectId('6901f85f42c5d010fa811206'),
  email: 'sayantan2@gmail.com',
  friendRequestsCount: 0,
  sentRequestsCount: 1
}
Processing received requests...
Raw friendRequests: []
Processed receivedRequests: []
Populating sender details...
Final populated requests: []
=== FRIEND REQUEST GET END (received) ===
 GET /api/friends/request?type=received 200 in 106ms
=== FRIEND REQUEST GET START ===
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
Request type: sent User: sayantan2@gmail.com
âœ… Database connected
âœ… Current user found: {
  id: new ObjectId('6901f85f42c5d010fa811206'),
  email: 'sayantan2@gmail.com',
  friendRequestsCount: 0,
  sentRequestsCount: 1
}
Processing sent requests...
Raw sentRequests: [
  {
    from: new ObjectId('6901f85f42c5d010fa811206'),
    fromName: 'sayantan2',
    to: new ObjectId('6905adf16a22b7843b006183'),
    toName: 'sayantan3',
    status: 'pending',
    _id: new ObjectId('6905cdce14ad0d0f020b3985'),
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
Filtering sent request: { status: 'pending', to: new ObjectId('6905adf16a22b7843b006183') }
Mapping sent request: {
  from: new ObjectId('6901f85f42c5d010fa811206'),
  fromName: 'sayantan2',
  to: new ObjectId('6905adf16a22b7843b006183'),
  toName: 'sayantan3',
  status: 'pending',
  _id: new ObjectId('6905cdce14ad0d0f020b3985'),
  createdAt: 2025-11-01T09:07:26.707Z,
  updatedAt: 2025-11-01T09:07:26.707Z
}
Processed sentRequests: [
  {
    id: '6905cdce14ad0d0f020b3985',
    to: {
      id: '6905adf16a22b7843b006183',
      username: 'sayantan3',
      email: '',
      profilePicture: null
    },
    status: 'pending',
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
Populating recipient details...
Looking up recipient: 6905adf16a22b7843b006183
Found recipient: sayantan3
Final populated sent requests: [
  {
    id: '6905cdce14ad0d0f020b3985',
    to: {
      id: '6905adf16a22b7843b006183',
      username: 'sayantan3',
      email: 'sayantan3@gmail.com',
      profilePicture: undefined
    },
    status: 'pending',
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
=== FRIEND REQUEST GET END (sent) ===
 GET /api/friends/request?type=sent 200 in 199ms
 GET /api/socket-health 200 in 31ms
 GET /api/socket-health 200 in 121ms
 GET /socket.io?EIO=4&transport=polling&t=1e4przo3 404 in 218ms
 GET /socket.io?EIO=4&transport=polling&t=1e4t7l8o 404 in 112ms
 GET /api/socket-health 200 in 75ms
 GET /api/socket-health 200 in 134ms
 GET /socket.io?EIO=4&transport=polling&t=1e6aye4q 404 in 266ms
 GET /socket.io?EIO=4&transport=polling&t=1e6eu0fb 404 in 136ms
 GET /api/socket-health 200 in 30ms
 GET /api/socket-health 200 in 110ms
 GET /socket.io?EIO=4&transport=polling&t=1e7szrke 404 in 201ms
 GET /socket.io?EIO=4&transport=polling&t=1e7w3zwx 404 in 100ms
 GET /api/socket-health 200 in 33ms
 GET /api/socket-health 200 in 129ms
 GET /socket.io?EIO=4&transport=polling&t=1e9cfs9l 404 in 230ms
 GET /socket.io?EIO=4&transport=polling&t=1e9g3ojs 404 in 106ms
 GET /api/socket-health 200 in 40ms
 GET /api/socket-health 200 in 162ms
 GET /socket.io?EIO=4&transport=polling&t=1eawzvmr 404 in 170ms
 GET /socket.io?EIO=4&transport=polling&t=1eb1iyxa 404 in 126ms
 GET /api/socket-health 200 in 28ms
 GET /api/socket-health 200 in 110ms
 GET /socket.io?EIO=4&transport=polling&t=1ecfg3s1 404 in 201ms
 GET /socket.io?EIO=4&transport=polling&t=1ecikjsq 404 in 95ms
 GET /api/socket-health 200 in 31ms
 GET /api/socket-health 200 in 119ms
 GET /socket.io?EIO=4&transport=polling&t=1edzjgck 404 in 205ms
 GET /socket.io?EIO=4&transport=polling&t=1ee2x8c3 404 in 97ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
 GET /api/socket-health 200 in 85ms
 GET /api/socket-health 200 in 126ms
 GET /socket.io?EIO=4&transport=polling&t=1efk4a4r 404 in 131ms
 GET /api/conversations 200 in 311ms
 GET /socket.io?EIO=4&transport=polling&t=1efnoz8b 404 in 103ms
 GET /api/socket-health 200 in 41ms
 GET /api/socket-health 200 in 225ms
 GET /socket.io?EIO=4&transport=polling&t=1eh2ov1s 404 in 361ms
 GET /socket.io?EIO=4&transport=polling&t=1eh912m6 404 in 161ms
 GET /api/socket-health 200 in 31ms
 GET /api/socket-health 200 in 128ms
 GET /socket.io?EIO=4&transport=polling&t=1eilmnza 404 in 142ms
 GET /socket.io?EIO=4&transport=polling&t=1eip847i 404 in 221ms
 GET /api/socket-health 200 in 57ms
 GET /api/socket-health 200 in 178ms
 GET /socket.io?EIO=4&transport=polling&t=1ek66ij5 404 in 292ms
 GET /socket.io?EIO=4&transport=polling&t=1ekb6ay5 404 in 131ms
 GET /api/socket-health 200 in 25ms
 GET /api/socket-health 200 in 111ms
 GET /socket.io?EIO=4&transport=polling&t=1elotfs1 404 in 196ms
 GET /socket.io?EIO=4&transport=polling&t=1elryjhv 404 in 89ms
 GET /api/socket-health 200 in 30ms
 GET /api/socket-health 200 in 116ms
 GET /socket.io?EIO=4&transport=polling&t=1en8d4yd 404 in 201ms
 GET /socket.io?EIO=4&transport=polling&t=1enboegw 404 in 101ms
 GET /api/socket-health 200 in 26ms
 GET /api/socket-health 200 in 115ms
 GET /socket.io?EIO=4&transport=polling&t=1eoruybs 404 in 209ms
 GET /socket.io?EIO=4&transport=polling&t=1eov2bbb 404 in 102ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
=== FRIEND REQUEST GET START ===
 GET /api/socket-health 200 in 117ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
Request type: received User: sayantan2@gmail.com
âœ… Database connected
 GET /api/socket-health 200 in 119ms
 GET /socket.io?EIO=4&transport=polling&t=1eqf3uiy 404 in 130ms
 GET /socket.io?EIO=4&transport=polling&t=1eqipg2c 404 in 131ms
 POST /api/users/heartbeat 200 in 440ms
âœ… Current user found: {
  id: new ObjectId('6901f85f42c5d010fa811206'),
  email: 'sayantan2@gmail.com',
  friendRequestsCount: 0,
  sentRequestsCount: 1
}
Processing received requests...
Raw friendRequests: []
Processed receivedRequests: []
Populating sender details...
Final populated requests: []
=== FRIEND REQUEST GET END (received) ===
 GET /api/friends/request?type=received 200 in 660ms
 GET /api/friends 200 in 720ms
=== FRIEND REQUEST GET START ===
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
Request type: sent User: sayantan2@gmail.com
âœ… Database connected
âœ… Current user found: {
  id: new ObjectId('6901f85f42c5d010fa811206'),
  email: 'sayantan2@gmail.com',
  friendRequestsCount: 0,
  sentRequestsCount: 1
}
Processing sent requests...
Raw sentRequests: [
  {
    from: new ObjectId('6901f85f42c5d010fa811206'),
    fromName: 'sayantan2',
    to: new ObjectId('6905adf16a22b7843b006183'),
    toName: 'sayantan3',
    status: 'pending',
    _id: new ObjectId('6905cdce14ad0d0f020b3985'),
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
Filtering sent request: { status: 'pending', to: new ObjectId('6905adf16a22b7843b006183') }
Mapping sent request: {
  from: new ObjectId('6901f85f42c5d010fa811206'),
  fromName: 'sayantan2',
  to: new ObjectId('6905adf16a22b7843b006183'),
  toName: 'sayantan3',
  status: 'pending',
  _id: new ObjectId('6905cdce14ad0d0f020b3985'),
  createdAt: 2025-11-01T09:07:26.707Z,
  updatedAt: 2025-11-01T09:07:26.707Z
}
Processed sentRequests: [
  {
    id: '6905cdce14ad0d0f020b3985',
    to: {
      id: '6905adf16a22b7843b006183',
      username: 'sayantan3',
      email: '',
      profilePicture: null
    },
    status: 'pending',
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
Populating recipient details...
Looking up recipient: 6905adf16a22b7843b006183
Found recipient: sayantan3
Final populated sent requests: [
  {
    id: '6905cdce14ad0d0f020b3985',
    to: {
      id: '6905adf16a22b7843b006183',
      username: 'sayantan3',
      email: 'sayantan3@gmail.com',
      profilePicture: undefined
    },
    status: 'pending',
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
=== FRIEND REQUEST GET END (sent) ===
 GET /api/friends/request?type=sent 200 in 193ms
 GET /api/socket-health 200 in 43ms
 GET /api/socket-health 200 in 165ms
 GET /socket.io?EIO=4&transport=polling&t=1erveg29 404 in 168ms
 GET /socket.io?EIO=4&transport=polling&t=1es03ch9 404 in 127ms
 GET /api/socket-health 200 in 23ms
 GET /api/socket-health 200 in 109ms
 GET /socket.io?EIO=4&transport=polling&t=1etejfu2 404 in 202ms
 GET /socket.io?EIO=4&transport=polling&t=1ethll7r 404 in 96ms
 GET /api/socket-health 200 in 25ms
 GET /api/socket-health 200 in 101ms
 GET /socket.io?EIO=4&transport=polling&t=1euy9xcq 404 in 191ms
 GET /socket.io?EIO=4&transport=polling&t=1ev14qgi 404 in 104ms
 GET /api/socket-health 200 in 23ms
 GET /api/socket-health 200 in 108ms
 GET /socket.io?EIO=4&transport=polling&t=1ewhl5gl 404 in 201ms
 GET /socket.io?EIO=4&transport=polling&t=1ewkm0zj 404 in 95ms
 GET /api/socket-health 200 in 29ms
 GET /api/socket-health 200 in 107ms
 GET /socket.io?EIO=4&transport=polling&t=1ey19lk9 404 in 112ms
 GET /socket.io?EIO=4&transport=polling&t=1ey49ic5 404 in 98ms
 GET /api/socket-health 200 in 24ms
 GET /api/socket-health 200 in 107ms
 GET /socket.io?EIO=4&transport=polling&t=1ezkswry 404 in 198ms
 GET /socket.io?EIO=4&transport=polling&t=1eznt7ds 404 in 97ms
 GET /api/socket-health 200 in 54ms
 GET /api/socket-health 200 in 177ms
 GET /socket.io?EIO=4&transport=polling&t=1f15a3e3 404 in 331ms
 GET /socket.io?EIO=4&transport=polling&t=1f1abe10 404 in 164ms
 GET /api/socket-health 200 in 24ms
 GET /api/socket-health 200 in 111ms
 GET /socket.io?EIO=4&transport=polling&t=1f2o1c0r 404 in 200ms
 GET /socket.io?EIO=4&transport=polling&t=1f2r537d 404 in 95ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
 GET /api/conversations 200 in 165ms
 GET /api/socket-health 200 in 42ms
 GET /api/socket-health 200 in 156ms
 GET /socket.io?EIO=4&transport=polling&t=1f47ykbg 404 in 242ms
 GET /socket.io?EIO=4&transport=polling&t=1f4ccv92 404 in 115ms
 GET /api/socket-health 200 in 24ms
 GET /api/socket-health 200 in 103ms
 GET /socket.io?EIO=4&transport=polling&t=1f5qwgws 404 in 107ms
 GET /socket.io?EIO=4&transport=polling&t=1f5ttxfp 404 in 94ms
 GET /api/socket-health 200 in 22ms
 GET /api/socket-health 200 in 117ms
 GET /socket.io?EIO=4&transport=polling&t=1f7a9fb5 404 in 209ms
 GET /socket.io?EIO=4&transport=polling&t=1f7dlw93 404 in 106ms
 GET /api/socket-health 200 in 27ms
 GET /api/socket-health 200 in 117ms
 GET /socket.io?EIO=4&transport=polling&t=1f8u398q 404 in 206ms
 GET /socket.io?EIO=4&transport=polling&t=1f8xeman 404 in 99ms
 GET /api/socket-health 200 in 21ms
 GET /api/socket-health 200 in 117ms
 GET /socket.io?EIO=4&transport=polling&t=1fadngpz 404 in 199ms
 GET /socket.io?EIO=4&transport=polling&t=1fagyi2k 404 in 99ms
 GET /api/socket-health 200 in 24ms
 GET /api/socket-health 200 in 111ms
 GET /socket.io?EIO=4&transport=polling&t=1fbx0irk 404 in 200ms
 GET /socket.io?EIO=4&transport=polling&t=1fc05khu 404 in 100ms
 GET /api/socket-health 200 in 23ms
 GET /api/socket-health 200 in 111ms
 GET /socket.io?EIO=4&transport=polling&t=1fdguokc 404 in 186ms
 GET /socket.io?EIO=4&transport=polling&t=1fdk0tq1 404 in 94ms
=== FRIEND REQUEST GET START ===
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
Request type: received User: sayantan2@gmail.com
âœ… Database connected
 GET /api/socket-health 200 in 56ms
âœ… Current user found: {
  id: new ObjectId('6901f85f42c5d010fa811206'),
  email: 'sayantan2@gmail.com',
  friendRequestsCount: 0,
  sentRequestsCount: 1
}
Processing received requests...
Raw friendRequests: []
Processed receivedRequests: []
Populating sender details...
Final populated requests: []
=== FRIEND REQUEST GET END (received) ===
 GET /api/friends/request?type=received 200 in 108ms
 GET /api/socket-health 200 in 169ms
=== FRIEND REQUEST GET START ===
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
Request type: sent User: sayantan2@gmail.com
âœ… Database connected
âœ… Current user found: {
  id: new ObjectId('6901f85f42c5d010fa811206'),
  email: 'sayantan2@gmail.com',
  friendRequestsCount: 0,
  sentRequestsCount: 1
}
Processing sent requests...
Raw sentRequests: [
  {
    from: new ObjectId('6901f85f42c5d010fa811206'),
    fromName: 'sayantan2',
    to: new ObjectId('6905adf16a22b7843b006183'),
    toName: 'sayantan3',
    status: 'pending',
    _id: new ObjectId('6905cdce14ad0d0f020b3985'),
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
Filtering sent request: { status: 'pending', to: new ObjectId('6905adf16a22b7843b006183') }
Mapping sent request: {
  from: new ObjectId('6901f85f42c5d010fa811206'),
  fromName: 'sayantan2',
  to: new ObjectId('6905adf16a22b7843b006183'),
  toName: 'sayantan3',
  status: 'pending',
  _id: new ObjectId('6905cdce14ad0d0f020b3985'),
  createdAt: 2025-11-01T09:07:26.707Z,
  updatedAt: 2025-11-01T09:07:26.707Z
}
Processed sentRequests: [
  {
    id: '6905cdce14ad0d0f020b3985',
    to: {
      id: '6905adf16a22b7843b006183',
      username: 'sayantan3',
      email: '',
      profilePicture: null
    },
    status: 'pending',
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
Populating recipient details...
Looking up recipient: 6905adf16a22b7843b006183
 GET /socket.io?EIO=4&transport=polling&t=1ff1asfj 404 in 258ms
 GET /socket.io?EIO=4&transport=polling&t=1ff62j71 404 in 115ms
Found recipient: sayantan3
Final populated sent requests: [
  {
    id: '6905cdce14ad0d0f020b3985',
    to: {
      id: '6905adf16a22b7843b006183',
      username: 'sayantan3',
      email: 'sayantan3@gmail.com',
      profilePicture: undefined
    },
    status: 'pending',
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
=== FRIEND REQUEST GET END (sent) ===
 GET /api/friends/request?type=sent 200 in 269ms
 GET /api/socket-health 200 in 22ms
 GET /api/socket-health 200 in 113ms
 GET /socket.io?EIO=4&transport=polling&t=1fgjx81u 404 in 202ms
 GET /socket.io?EIO=4&transport=polling&t=1fgn40vc 404 in 121ms
 GET /api/socket-health 200 in 23ms
 GET /api/socket-health 200 in 110ms
 GET /socket.io?EIO=4&transport=polling&t=1fi3gz5n 404 in 203ms
 GET /socket.io?EIO=4&transport=polling&t=1fi6lszn 404 in 102ms
 GET /api/socket-health 200 in 41ms
 GET /api/socket-health 200 in 168ms
 GET /socket.io?EIO=4&transport=polling&t=1fjnc829 404 in 293ms
 GET /socket.io?EIO=4&transport=polling&t=1fjs7evw 404 in 142ms
 GET /api/socket-health 200 in 29ms
 GET /api/socket-health 200 in 114ms
 GET /socket.io?EIO=4&transport=polling&t=1fl6q0a9 404 in 121ms
 GET /socket.io?EIO=4&transport=polling&t=1fl9y2ta 404 in 116ms
 GET /api/socket-health 200 in 31ms
 GET /api/socket-health 200 in 140ms
 GET /socket.io?EIO=4&transport=polling&t=1fmqabip 404 in 291ms
 GET /socket.io?EIO=4&transport=polling&t=1fmu9ucx 404 in 170ms
 GET /api/socket-health 200 in 37ms
 GET /api/socket-health 200 in 143ms
 GET /socket.io?EIO=4&transport=polling&t=1foa5ihu 404 in 251ms
 GET /socket.io?EIO=4&transport=polling&t=1foe7re3 404 in 124ms
 GET /api/socket-health 200 in 37ms
 GET /api/socket-health 200 in 131ms
 GET /socket.io?EIO=4&transport=polling&t=1fptd1m1 404 in 224ms
 GET /socket.io?EIO=4&transport=polling&t=1fpx21c5 404 in 105ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
 GET /api/socket-health 200 in 45ms
 GET /api/socket-health 200 in 117ms
 GET /api/conversations 200 in 195ms
 GET /socket.io?EIO=4&transport=polling&t=1frdaq9z 404 in 134ms
 GET /socket.io?EIO=4&transport=polling&t=1frgm5pu 404 in 162ms
 GET /api/socket-health 200 in 41ms
 GET /api/socket-health 200 in 192ms
 GET /socket.io?EIO=4&transport=polling&t=1fswrblb 404 in 283ms
 GET /socket.io?EIO=4&transport=polling&t=1ft258rw 404 in 101ms
 GET /api/socket-health 200 in 52ms
 GET /api/socket-health 200 in 127ms
 GET /socket.io?EIO=4&transport=polling&t=1fugi6v7 404 in 118ms
 GET /socket.io?EIO=4&transport=polling&t=1fuk4m5r 404 in 98ms
 GET /api/socket-health 200 in 27ms
 GET /api/socket-health 200 in 112ms
 GET /socket.io?EIO=4&transport=polling&t=1fvzofm8 404 in 202ms
 GET /socket.io?EIO=4&transport=polling&t=1fw2tkjv 404 in 96ms
 GET /api/socket-health 200 in 44ms
 GET /api/socket-health 200 in 143ms
 GET /socket.io?EIO=4&transport=polling&t=1fxk1lhq 404 in 142ms
 GET /socket.io?EIO=4&transport=polling&t=1fxo4jno 404 in 98ms
 GET /api/socket-health 200 in 25ms
 GET /api/socket-health 200 in 107ms
 GET /socket.io?EIO=4&transport=polling&t=1fz2gdqq 404 in 198ms
 GET /socket.io?EIO=4&transport=polling&t=1fz5hdyw 404 in 93ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
=== FRIEND REQUEST GET START ===
 GET /api/socket-health 200 in 169ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
Request type: received User: sayantan2@gmail.com
âœ… Database connected
 GET /api/socket-health 200 in 153ms
 POST /api/users/heartbeat 200 in 473ms
 GET /socket.io?EIO=4&transport=polling&t=1g0rh3zw 404 in 268ms
 GET /socket.io?EIO=4&transport=polling&t=1g0w1dnq 404 in 119ms
âœ… Current user found: {
  id: new ObjectId('6901f85f42c5d010fa811206'),
  email: 'sayantan2@gmail.com',
  friendRequestsCount: 0,
  sentRequestsCount: 1
}
Processing received requests...
Raw friendRequests: []
Processed receivedRequests: []
Populating sender details...
Final populated requests: []
=== FRIEND REQUEST GET END (received) ===
 GET /api/friends/request?type=received 200 in 692ms
=== FRIEND REQUEST GET START ===
 GET /api/friends 200 in 728ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
Request type: sent User: sayantan2@gmail.com
âœ… Database connected
âœ… Current user found: {
  id: new ObjectId('6901f85f42c5d010fa811206'),
  email: 'sayantan2@gmail.com',
  friendRequestsCount: 0,
  sentRequestsCount: 1
}
Processing sent requests...
Raw sentRequests: [
  {
    from: new ObjectId('6901f85f42c5d010fa811206'),
    fromName: 'sayantan2',
    to: new ObjectId('6905adf16a22b7843b006183'),
    toName: 'sayantan3',
    status: 'pending',
    _id: new ObjectId('6905cdce14ad0d0f020b3985'),
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
Filtering sent request: { status: 'pending', to: new ObjectId('6905adf16a22b7843b006183') }
Mapping sent request: {
  from: new ObjectId('6901f85f42c5d010fa811206'),
  fromName: 'sayantan2',
  to: new ObjectId('6905adf16a22b7843b006183'),
  toName: 'sayantan3',
  status: 'pending',
  _id: new ObjectId('6905cdce14ad0d0f020b3985'),
  createdAt: 2025-11-01T09:07:26.707Z,
  updatedAt: 2025-11-01T09:07:26.707Z
}
Processed sentRequests: [
  {
    id: '6905cdce14ad0d0f020b3985',
    to: {
      id: '6905adf16a22b7843b006183',
      username: 'sayantan3',
      email: '',
      profilePicture: null
    },
    status: 'pending',
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
Populating recipient details...
Looking up recipient: 6905adf16a22b7843b006183
Found recipient: sayantan3
Final populated sent requests: [
  {
    id: '6905cdce14ad0d0f020b3985',
    to: {
      id: '6905adf16a22b7843b006183',
      username: 'sayantan3',
      email: 'sayantan3@gmail.com',
      profilePicture: undefined
    },
    status: 'pending',
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
=== FRIEND REQUEST GET END (sent) ===
 GET /api/friends/request?type=sent 200 in 125ms
 GET /api/socket-health 200 in 47ms
 GET /api/socket-health 200 in 76ms
 GET /socket.io?EIO=4&transport=polling&t=1g26djw0 404 in 290ms
 GET /socket.io?EIO=4&transport=polling&t=1g28hke4 404 in 138ms
 GET /api/socket-health 200 in 30ms
 GET /api/socket-health 200 in 111ms
 GET /socket.io?EIO=4&transport=polling&t=1g3pefhv 404 in 200ms
 GET /socket.io?EIO=4&transport=polling&t=1g3sih0s 404 in 94ms
 GET /api/socket-health 200 in 23ms
 GET /api/socket-health 200 in 109ms
 GET /socket.io?EIO=4&transport=polling&t=1g58na70 404 in 123ms
 GET /socket.io?EIO=4&transport=polling&t=1g5br9hd 404 in 167ms
 GET /api/socket-health 200 in 30ms
 GET /api/socket-health 200 in 108ms
 GET /socket.io?EIO=4&transport=polling&t=1g6sl0hr 404 in 204ms
 GET /socket.io?EIO=4&transport=polling&t=1g6vn0se 404 in 107ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
 GET /api/auth/session 200 in 51ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
=== FRIEND REQUEST GET START ===
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
Request type: received User: sayantan2@gmail.com
âœ… Database connected
 GET /api/random-chat/queue 200 in 169ms
 GET /api/friends 200 in 195ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
 POST /api/users/heartbeat 200 in 221ms
 GET /api/random-chat/session 200 in 149ms
âœ… Current user found: {
  id: new ObjectId('6901f85f42c5d010fa811206'),
  email: 'sayantan2@gmail.com',
  friendRequestsCount: 0,
  sentRequestsCount: 1
}
Processing received requests...
Raw friendRequests: []
Processed receivedRequests: []
Populating sender details...
Final populated requests: []
=== FRIEND REQUEST GET END (received) ===
 GET /api/friends/request?type=received 200 in 502ms
=== FRIEND REQUEST GET START ===
 GET /api/users/me 200 in 545ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
Request type: sent User: sayantan2@gmail.com
âœ… Database connected
âœ… Current user found: {
  id: new ObjectId('6901f85f42c5d010fa811206'),
  email: 'sayantan2@gmail.com',
  friendRequestsCount: 0,
  sentRequestsCount: 1
}
Processing sent requests...
Raw sentRequests: [
  {
    from: new ObjectId('6901f85f42c5d010fa811206'),
    fromName: 'sayantan2',
    to: new ObjectId('6905adf16a22b7843b006183'),
    toName: 'sayantan3',
    status: 'pending',
    _id: new ObjectId('6905cdce14ad0d0f020b3985'),
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
Filtering sent request: { status: 'pending', to: new ObjectId('6905adf16a22b7843b006183') }
Mapping sent request: {
  from: new ObjectId('6901f85f42c5d010fa811206'),
  fromName: 'sayantan2',
  to: new ObjectId('6905adf16a22b7843b006183'),
  toName: 'sayantan3',
  status: 'pending',
  _id: new ObjectId('6905cdce14ad0d0f020b3985'),
  createdAt: 2025-11-01T09:07:26.707Z,
  updatedAt: 2025-11-01T09:07:26.707Z
}
Processed sentRequests: [
  {
    id: '6905cdce14ad0d0f020b3985',
    to: {
      id: '6905adf16a22b7843b006183',
      username: 'sayantan3',
      email: '',
      profilePicture: null
    },
    status: 'pending',
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
Populating recipient details...
Looking up recipient: 6905adf16a22b7843b006183
Found recipient: sayantan3
Final populated sent requests: [
  {
    id: '6905cdce14ad0d0f020b3985',
    to: {
      id: '6905adf16a22b7843b006183',
      username: 'sayantan3',
      email: 'sayantan3@gmail.com',
      profilePicture: undefined
    },
    status: 'pending',
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
=== FRIEND REQUEST GET END (sent) ===
 GET /api/friends/request?type=sent 200 in 131ms
 GET /api/socket-health 200 in 50ms
 GET /api/socket-health 200 in 121ms
 GET /socket.io?EIO=4&transport=polling&t=1g8cptub 404 in 121ms
 GET /socket.io?EIO=4&transport=polling&t=1g8g44pb 404 in 126ms
 GET /api/socket-health 200 in 48ms
 GET /api/socket-health 200 in 159ms
 GET /socket.io?EIO=4&transport=polling&t=1g9w4j4d 404 in 250ms
 GET /socket.io?EIO=4&transport=polling&t=1ga0m3wg 404 in 101ms
 GET /api/socket-health 200 in 60ms
 GET /api/socket-health 200 in 169ms
 GET /socket.io?EIO=4&transport=polling&t=1gbgch3y 404 in 303ms
 GET /socket.io?EIO=4&transport=polling&t=1gbl270b 404 in 145ms
 GET /api/socket-health 200 in 34ms
 GET /api/socket-health 200 in 169ms
 GET /socket.io?EIO=4&transport=polling&t=1gcyklk3 404 in 314ms
 GET /socket.io?EIO=4&transport=polling&t=1gd3evus 404 in 169ms
 GET /api/socket-health 200 in 25ms
 GET /api/socket-health 200 in 67ms
 GET /socket.io?EIO=4&transport=polling&t=1gei1unw 404 in 341ms
 GET /socket.io?EIO=4&transport=polling&t=1gejyebl 404 in 186ms
 GET /api/socket-health 200 in 53ms
 GET /api/socket-health 200 in 164ms
 GET /socket.io?EIO=4&transport=polling&t=1gg2pyds 404 in 259ms
 GET /socket.io?EIO=4&transport=polling&t=1gg7dsls 404 in 113ms
 GET /api/socket-health 200 in 57ms
 GET /api/socket-health 200 in 181ms
 GET /socket.io?EIO=4&transport=polling&t=1ghmbydk 404 in 173ms
 GET /socket.io?EIO=4&transport=polling&t=1ghrlni3 404 in 104ms
 GET /api/socket-health 200 in 43ms
 GET /api/socket-health 200 in 120ms
 GET /socket.io?EIO=4&transport=polling&t=1gj5i688 404 in 203ms
 GET /socket.io?EIO=4&transport=polling&t=1gj8wcht 404 in 100ms
 GET /api/socket-health 200 in 31ms
 GET /api/socket-health 200 in 116ms
 GET /socket.io?EIO=4&transport=polling&t=1gkol68o 404 in 218ms
 GET /socket.io?EIO=4&transport=polling&t=1gkrvs21 404 in 128ms
 GET /api/socket-health 200 in 67ms
 GET /api/socket-health 200 in 298ms
 GET /socket.io?EIO=4&transport=polling&t=1gm96hos 404 in 367ms
 GET /socket.io?EIO=4&transport=polling&t=1gmhlggi 404 in 117ms
 GET /api/socket-health 200 in 37ms
 GET /api/socket-health 200 in 178ms
 GET /socket.io?EIO=4&transport=polling&t=1gns1iao 404 in 186ms
 GET /socket.io?EIO=4&transport=polling&t=1gnx6lhu 404 in 150ms
 GET /api/socket-health 200 in 49ms
 GET /api/socket-health 200 in 145ms
 GET /socket.io?EIO=4&transport=polling&t=1gpbvmp2 404 in 244ms
 GET /socket.io?EIO=4&transport=polling&t=1gpfy2xa 404 in 138ms
 GET /api/socket-health 200 in 27ms
 GET /api/socket-health 200 in 42ms
 GET /socket.io?EIO=4&transport=polling&t=1gqutr1e 404 in 287ms
 GET /socket.io?EIO=4&transport=polling&t=1gqw4z15 404 in 110ms
 GET /api/socket-health 200 in 24ms
 GET /api/socket-health 200 in 31ms
 GET /socket.io?EIO=4&transport=polling&t=1gsdwzfm 404 in 267ms
 GET /socket.io?EIO=4&transport=polling&t=1gsetb0n 404 in 158ms
 GET /api/socket-health 200 in 29ms
 GET /api/socket-health 200 in 109ms
 GET /socket.io?EIO=4&transport=polling&t=1gtxt723 404 in 111ms
 GET /socket.io?EIO=4&transport=polling&t=1gu0vl2o 404 in 96ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
=== FRIEND REQUEST GET START ===
 GET /api/socket-health 200 in 75ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
Request type: received User: sayantan2@gmail.com
âœ… Database connected
 GET /api/socket-health 200 in 113ms
 GET /socket.io?EIO=4&transport=polling&t=1gviozzb 404 in 206ms
 GET /socket.io?EIO=4&transport=polling&t=1gvm0ai0 404 in 103ms
 GET /api/conversations 200 in 528ms
 POST /api/users/heartbeat 200 in 647ms
âœ… Current user found: {
  id: new ObjectId('6901f85f42c5d010fa811206'),
  email: 'sayantan2@gmail.com',
  friendRequestsCount: 0,
  sentRequestsCount: 1
}
Processing received requests...
Raw friendRequests: []
Processed receivedRequests: []
Populating sender details...
Final populated requests: []
=== FRIEND REQUEST GET END (received) ===
 GET /api/friends/request?type=received 200 in 765ms
=== FRIEND REQUEST GET START ===
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
Request type: sent User: sayantan2@gmail.com
âœ… Database connected
âœ… Current user found: {
  id: new ObjectId('6901f85f42c5d010fa811206'),
  email: 'sayantan2@gmail.com',
  friendRequestsCount: 0,
  sentRequestsCount: 1
}
Processing sent requests...
Raw sentRequests: [
  {
    from: new ObjectId('6901f85f42c5d010fa811206'),
    fromName: 'sayantan2',
    to: new ObjectId('6905adf16a22b7843b006183'),
    toName: 'sayantan3',
    status: 'pending',
    _id: new ObjectId('6905cdce14ad0d0f020b3985'),
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
Filtering sent request: { status: 'pending', to: new ObjectId('6905adf16a22b7843b006183') }
Mapping sent request: {
  from: new ObjectId('6901f85f42c5d010fa811206'),
  fromName: 'sayantan2',
  to: new ObjectId('6905adf16a22b7843b006183'),
  toName: 'sayantan3',
  status: 'pending',
  _id: new ObjectId('6905cdce14ad0d0f020b3985'),
  createdAt: 2025-11-01T09:07:26.707Z,
  updatedAt: 2025-11-01T09:07:26.707Z
}
Processed sentRequests: [
  {
    id: '6905cdce14ad0d0f020b3985',
    to: {
      id: '6905adf16a22b7843b006183',
      username: 'sayantan3',
      email: '',
      profilePicture: null
    },
    status: 'pending',
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
Populating recipient details...
Looking up recipient: 6905adf16a22b7843b006183
Found recipient: sayantan3
Final populated sent requests: [
  {
    id: '6905cdce14ad0d0f020b3985',
    to: {
      id: '6905adf16a22b7843b006183',
      username: 'sayantan3',
      email: 'sayantan3@gmail.com',
      profilePicture: undefined
    },
    status: 'pending',
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
=== FRIEND REQUEST GET END (sent) ===
 GET /api/friends/request?type=sent 200 in 128ms
 GET /api/socket-health 200 in 32ms
 GET /api/socket-health 200 in 107ms
 GET /socket.io?EIO=4&transport=polling&t=1gx0qwm8 404 in 190ms
 GET /socket.io?EIO=4&transport=polling&t=1gx3qfzc 404 in 96ms
 GET /api/socket-health 200 in 24ms
 GET /api/socket-health 200 in 105ms
 GET /socket.io?EIO=4&transport=polling&t=1gykcbg8 404 in 192ms
 GET /socket.io?EIO=4&transport=polling&t=1gynazlf 404 in 92ms
 GET /api/socket-health 200 in 42ms
 GET /api/socket-health 200 in 125ms
 GET /socket.io?EIO=4&transport=polling&t=1h04nnku 404 in 209ms
 GET /socket.io?EIO=4&transport=polling&t=1h087y7w 404 in 103ms
 GET /api/socket-health 200 in 34ms
 GET /api/socket-health 200 in 175ms
 GET /socket.io?EIO=4&transport=polling&t=1h1njxxx 404 in 349ms
 GET /socket.io?EIO=4&transport=polling&t=1h1sizin 404 in 176ms
 GET /api/socket-health 200 in 28ms
 GET /api/socket-health 200 in 109ms
 GET /socket.io?EIO=4&transport=polling&t=1h36who7 404 in 204ms
 GET /socket.io?EIO=4&transport=polling&t=1h39zp0t 404 in 104ms
 GET /api/socket-health 200 in 35ms
 GET /api/socket-health 200 in 132ms
 GET /socket.io?EIO=4&transport=polling&t=1h4r154f 404 in 216ms
 GET /socket.io?EIO=4&transport=polling&t=1h4urx32 404 in 95ms
 GET /api/socket-health 200 in 28ms
 GET /api/socket-health 200 in 106ms
 GET /socket.io?EIO=4&transport=polling&t=1h6a8r0o 404 in 198ms
 GET /socket.io?EIO=4&transport=polling&t=1h6d87x3 404 in 100ms
 GET /api/socket-health 200 in 23ms
 GET /api/socket-health 200 in 111ms
 GET /socket.io?EIO=4&transport=polling&t=1h7tpruw 404 in 200ms
 GET /socket.io?EIO=4&transport=polling&t=1h7wta4a 404 in 91ms
 GET /api/socket-health 200 in 28ms
 GET /api/socket-health 200 in 108ms
 GET /socket.io?EIO=4&transport=polling&t=1h9deroc 404 in 116ms
 GET /socket.io?EIO=4&transport=polling&t=1h9gh5mf 404 in 101ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
=== FRIEND REQUEST GET START ===
 GET /api/socket-health 200 in 70ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
Request type: received User: sayantan2@gmail.com
âœ… Database connected
âœ… Current user found: {
  id: new ObjectId('6901f85f42c5d010fa811206'),
  email: 'sayantan2@gmail.com',
  friendRequestsCount: 0,
  sentRequestsCount: 1
}
Processing received requests...
Raw friendRequests: []
Processed receivedRequests: []
Populating sender details...
Final populated requests: []
=== FRIEND REQUEST GET END (received) ===
 GET /api/friends/request?type=received 200 in 176ms
 GET /api/socket-health 200 in 114ms
 GET /api/friends 200 in 218ms
=== FRIEND REQUEST GET START ===
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
Request type: sent User: sayantan2@gmail.com
âœ… Database connected
âœ… Current user found: {
  id: new ObjectId('6901f85f42c5d010fa811206'),
  email: 'sayantan2@gmail.com',
  friendRequestsCount: 0,
  sentRequestsCount: 1
}
Processing sent requests...
Raw sentRequests: [
  {
    from: new ObjectId('6901f85f42c5d010fa811206'),
    fromName: 'sayantan2',
    to: new ObjectId('6905adf16a22b7843b006183'),
    toName: 'sayantan3',
    status: 'pending',
    _id: new ObjectId('6905cdce14ad0d0f020b3985'),
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
Filtering sent request: { status: 'pending', to: new ObjectId('6905adf16a22b7843b006183') }
Mapping sent request: {
  from: new ObjectId('6901f85f42c5d010fa811206'),
  fromName: 'sayantan2',
  to: new ObjectId('6905adf16a22b7843b006183'),
  toName: 'sayantan3',
  status: 'pending',
  _id: new ObjectId('6905cdce14ad0d0f020b3985'),
  createdAt: 2025-11-01T09:07:26.707Z,
  updatedAt: 2025-11-01T09:07:26.707Z
}
Processed sentRequests: [
  {
    id: '6905cdce14ad0d0f020b3985',
    to: {
      id: '6905adf16a22b7843b006183',
      username: 'sayantan3',
      email: '',
      profilePicture: null
    },
    status: 'pending',
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
Populating recipient details...
Looking up recipient: 6905adf16a22b7843b006183
 GET /socket.io?EIO=4&transport=polling&t=1hay1a3f 404 in 240ms
 GET /socket.io?EIO=4&transport=polling&t=1hb1bp7t 404 in 125ms
Found recipient: sayantan3
Final populated sent requests: [
  {
    id: '6905cdce14ad0d0f020b3985',
    to: {
      id: '6905adf16a22b7843b006183',
      username: 'sayantan3',
      email: 'sayantan3@gmail.com',
      profilePicture: undefined
    },
    status: 'pending',
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
=== FRIEND REQUEST GET END (sent) ===
 GET /api/friends/request?type=sent 200 in 167ms
 GET /api/socket-health 200 in 27ms
 GET /api/socket-health 200 in 108ms
 GET /socket.io?EIO=4&transport=polling&t=1hcge5qf 404 in 197ms
 GET /socket.io?EIO=4&transport=polling&t=1hcjg14p 404 in 97ms
 GET /api/socket-health 200 in 22ms
 GET /api/socket-health 200 in 109ms
 GET /socket.io?EIO=4&transport=polling&t=1hdzvkbz 404 in 199ms
 GET /socket.io?EIO=4&transport=polling&t=1he2xwda 404 in 95ms
 GET /api/socket-health 200 in 29ms
 GET /api/socket-health 200 in 26ms
 GET /socket.io?EIO=4&transport=polling&t=1hfjg73u 404 in 204ms
 GET /socket.io?EIO=4&transport=polling&t=1hfk7tdz 404 in 110ms
 GET /api/socket-health 200 in 26ms
 GET /api/socket-health 200 in 113ms
 GET /socket.io?EIO=4&transport=polling&t=1hh2yhpv 404 in 196ms
 GET /socket.io?EIO=4&transport=polling&t=1hh64otk 404 in 100ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
 GET /api/socket-health 200 in 48ms
 GET /api/socket-health 200 in 138ms
 GET /socket.io?EIO=4&transport=polling&t=1hin705g 404 in 140ms
 POST /api/users/heartbeat 200 in 285ms
 GET /socket.io?EIO=4&transport=polling&t=1hir5xif 404 in 99ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
 GET /api/conversations 200 in 127ms
 GET /api/socket-health 200 in 23ms
 GET /api/socket-health 200 in 108ms
 GET /socket.io?EIO=4&transport=polling&t=1hk61k5k 404 in 106ms
 GET /socket.io?EIO=4&transport=polling&t=1hk92oej 404 in 94ms
 GET /api/socket-health 200 in 28ms
 GET /api/socket-health 200 in 123ms
 GET /socket.io?EIO=4&transport=polling&t=1hlpwd3q 404 in 211ms
 GET /socket.io?EIO=4&transport=polling&t=1hltdoxn 404 in 93ms
 GET /api/socket-health 200 in 21ms
 GET /api/socket-health 200 in 101ms
 GET /socket.io?EIO=4&transport=polling&t=1hn9fkk9 404 in 106ms
 GET /socket.io?EIO=4&transport=polling&t=1hncappv 404 in 91ms
 GET /api/socket-health 200 in 28ms
 GET /api/socket-health 200 in 127ms
 GET /socket.io?EIO=4&transport=polling&t=1hoszaun 404 in 217ms
 GET /socket.io?EIO=4&transport=polling&t=1howkhp3 404 in 96ms
 GET /api/socket-health 200 in 32ms
 GET /api/socket-health 200 in 114ms
 GET /socket.io?EIO=4&transport=polling&t=1hqck8cx 404 in 232ms
 GET /socket.io?EIO=4&transport=polling&t=1hqfr692 404 in 123ms
 GET /api/socket-health 200 in 24ms
 GET /api/socket-health 200 in 110ms
 GET /socket.io?EIO=4&transport=polling&t=1hrw1mfr 404 in 204ms
 GET /socket.io?EIO=4&transport=polling&t=1hrz5nq7 404 in 98ms
 GET /api/socket-health 200 in 21ms
 GET /api/socket-health 200 in 102ms
 GET /socket.io?EIO=4&transport=polling&t=1htfk2kj 404 in 193ms
 GET /socket.io?EIO=4&transport=polling&t=1htigo4e 404 in 99ms
 GET /api/socket-health 200 in 27ms
 GET /api/socket-health 200 in 126ms
 GET /socket.io?EIO=4&transport=polling&t=1huz2p8t 404 in 224ms
 GET /socket.io?EIO=4&transport=polling&t=1hv2no0x 404 in 98ms
 GET /api/socket-health 200 in 33ms
 GET /api/socket-health 200 in 113ms
 GET /socket.io?EIO=4&transport=polling&t=1hwimfnl 404 in 117ms
 GET /socket.io?EIO=4&transport=polling&t=1hwltbmr 404 in 102ms
 GET /api/socket-health 200 in 23ms
 GET /api/socket-health 200 in 185ms
 GET /socket.io?EIO=4&transport=polling&t=1hy222bo 404 in 337ms
 GET /socket.io?EIO=4&transport=polling&t=1hy791wm 404 in 150ms
=== FRIEND REQUEST GET START ===
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
Request type: received User: sayantan2@gmail.com
âœ… Database connected
âœ… Current user found: {
  id: new ObjectId('6901f85f42c5d010fa811206'),
  email: 'sayantan2@gmail.com',
  friendRequestsCount: 0,
  sentRequestsCount: 1
}
Processing received requests...
Raw friendRequests: []
Processed receivedRequests: []
Populating sender details...
Final populated requests: []
=== FRIEND REQUEST GET END (received) ===
 GET /api/friends/request?type=received 200 in 76ms
=== FRIEND REQUEST GET START ===
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
Request type: sent User: sayantan2@gmail.com
âœ… Database connected
âœ… Current user found: {
  id: new ObjectId('6901f85f42c5d010fa811206'),
  email: 'sayantan2@gmail.com',
  friendRequestsCount: 0,
  sentRequestsCount: 1
}
Processing sent requests...
Raw sentRequests: [
  {
    from: new ObjectId('6901f85f42c5d010fa811206'),
    fromName: 'sayantan2',
    to: new ObjectId('6905adf16a22b7843b006183'),
    toName: 'sayantan3',
    status: 'pending',
    _id: new ObjectId('6905cdce14ad0d0f020b3985'),
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
Filtering sent request: { status: 'pending', to: new ObjectId('6905adf16a22b7843b006183') }
Mapping sent request: {
  from: new ObjectId('6901f85f42c5d010fa811206'),
  fromName: 'sayantan2',
  to: new ObjectId('6905adf16a22b7843b006183'),
  toName: 'sayantan3',
  status: 'pending',
  _id: new ObjectId('6905cdce14ad0d0f020b3985'),
  createdAt: 2025-11-01T09:07:26.707Z,
  updatedAt: 2025-11-01T09:07:26.707Z
}
Processed sentRequests: [
  {
    id: '6905cdce14ad0d0f020b3985',
    to: {
      id: '6905adf16a22b7843b006183',
      username: 'sayantan3',
      email: '',
      profilePicture: null
    },
    status: 'pending',
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
Populating recipient details...
Looking up recipient: 6905adf16a22b7843b006183
Found recipient: sayantan3
Final populated sent requests: [
  {
    id: '6905cdce14ad0d0f020b3985',
    to: {
      id: '6905adf16a22b7843b006183',
      username: 'sayantan3',
      email: 'sayantan3@gmail.com',
      profilePicture: undefined
    },
    status: 'pending',
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
=== FRIEND REQUEST GET END (sent) ===
 GET /api/friends/request?type=sent 200 in 127ms
 GET /api/socket-health 200 in 34ms
 GET /api/socket-health 200 in 128ms
 GET /socket.io?EIO=4&transport=polling&t=1hzlx9yf 404 in 127ms
 GET /socket.io?EIO=4&transport=polling&t=1hzpjtuy 404 in 108ms
 GET /api/socket-health 200 in 23ms
 GET /api/socket-health 200 in 104ms
 GET /socket.io?EIO=4&transport=polling&t=1i155c31 404 in 189ms
 GET /socket.io?EIO=4&transport=polling&t=1i183s6s 404 in 88ms
 GET /api/socket-health 200 in 24ms
 GET /api/socket-health 200 in 112ms
 GET /socket.io?EIO=4&transport=polling&t=1i2orbem 404 in 200ms
 GET /socket.io?EIO=4&transport=polling&t=1i2rxhg8 404 in 99ms
 GET /api/socket-health 200 in 24ms
 GET /api/socket-health 200 in 107ms
 GET /socket.io?EIO=4&transport=polling&t=1i48dwu2 404 in 197ms
 GET /socket.io?EIO=4&transport=polling&t=1i4beu4d 404 in 94ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
 GET /api/socket-health 200 in 50ms
 GET /api/socket-health 200 in 112ms
 GET /socket.io?EIO=4&transport=polling&t=1i5soo19 404 in 198ms
 GET /socket.io?EIO=4&transport=polling&t=1i5vv03r 404 in 100ms
 POST /api/users/heartbeat 200 in 296ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
 GET /api/socket-health 200 in 44ms
 GET /api/socket-health 200 in 119ms
 GET /api/conversations 200 in 260ms
 GET /socket.io?EIO=4&transport=polling&t=1i7by8t4 404 in 209ms
 GET /socket.io?EIO=4&transport=polling&t=1i7fblqu 404 in 104ms
 GET /api/socket-health 200 in 23ms
 GET /api/socket-health 200 in 107ms
 GET /socket.io?EIO=4&transport=polling&t=1i8us4l1 404 in 194ms
 GET /socket.io?EIO=4&transport=polling&t=1i8xsbvk 404 in 91ms
 GET /api/socket-health 200 in 27ms
 GET /api/socket-health 200 in 25ms
 GET /socket.io?EIO=4&transport=polling&t=1iaefsig 404 in 198ms
 GET /socket.io?EIO=4&transport=polling&t=1iaf5zrw 404 in 107ms
 GET /api/socket-health 200 in 22ms
 GET /api/socket-health 200 in 108ms
 GET /socket.io?EIO=4&transport=polling&t=1iby7seb 404 in 196ms
 GET /socket.io?EIO=4&transport=polling&t=1ic19i7i 404 in 98ms
 GET /api/socket-health 200 in 23ms
 GET /api/socket-health 200 in 109ms
 GET /socket.io?EIO=4&transport=polling&t=1idhdqyp 404 in 192ms
 GET /socket.io?EIO=4&transport=polling&t=1idkgwpr 404 in 92ms
 GET /api/socket-health 200 in 23ms
 GET /api/socket-health 200 in 113ms
 GET /socket.io?EIO=4&transport=polling&t=1if1b334 404 in 203ms
 GET /socket.io?EIO=4&transport=polling&t=1if4ijml 404 in 93ms
 GET /api/socket-health 200 in 25ms
 GET /api/socket-health 200 in 132ms
 GET /socket.io?EIO=4&transport=polling&t=1igktgft 404 in 135ms
 GET /socket.io?EIO=4&transport=polling&t=1igoiby8 404 in 118ms
 GET /api/socket-health 200 in 24ms
 GET /api/socket-health 200 in 112ms
 GET /socket.io?EIO=4&transport=polling&t=1ii463if 404 in 208ms
 GET /socket.io?EIO=4&transport=polling&t=1ii7dn6l 404 in 100ms
 GET /api/socket-health 200 in 30ms
 GET /api/socket-health 200 in 109ms
 GET /socket.io?EIO=4&transport=polling&t=1ijo7wy9 404 in 114ms
 GET /socket.io?EIO=4&transport=polling&t=1ijraiyt 404 in 91ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
=== FRIEND REQUEST GET START ===
 GET /api/socket-health 200 in 76ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
Request type: received User: sayantan2@gmail.com
âœ… Database connected
 GET /api/friends 200 in 204ms
 GET /api/socket-health 200 in 121ms
 GET /socket.io?EIO=4&transport=polling&t=1il9khjo 404 in 222ms
 GET /socket.io?EIO=4&transport=polling&t=1ild41hy 404 in 108ms
âœ… Current user found: {
  id: new ObjectId('6901f85f42c5d010fa811206'),
  email: 'sayantan2@gmail.com',
  friendRequestsCount: 0,
  sentRequestsCount: 1
}
Processing received requests...
Raw friendRequests: []
Processed receivedRequests: []
Populating sender details...
Final populated requests: []
=== FRIEND REQUEST GET END (received) ===
 GET /api/friends/request?type=received 200 in 605ms
=== FRIEND REQUEST GET START ===
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
Request type: sent User: sayantan2@gmail.com
âœ… Database connected
âœ… Current user found: {
  id: new ObjectId('6901f85f42c5d010fa811206'),
  email: 'sayantan2@gmail.com',
  friendRequestsCount: 0,
  sentRequestsCount: 1
}
Processing sent requests...
Raw sentRequests: [
  {
    from: new ObjectId('6901f85f42c5d010fa811206'),
    fromName: 'sayantan2',
    to: new ObjectId('6905adf16a22b7843b006183'),
    toName: 'sayantan3',
    status: 'pending',
    _id: new ObjectId('6905cdce14ad0d0f020b3985'),
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
Filtering sent request: { status: 'pending', to: new ObjectId('6905adf16a22b7843b006183') }
Mapping sent request: {
  from: new ObjectId('6901f85f42c5d010fa811206'),
  fromName: 'sayantan2',
  to: new ObjectId('6905adf16a22b7843b006183'),
  toName: 'sayantan3',
  status: 'pending',
  _id: new ObjectId('6905cdce14ad0d0f020b3985'),
  createdAt: 2025-11-01T09:07:26.707Z,
  updatedAt: 2025-11-01T09:07:26.707Z
}
Processed sentRequests: [
  {
    id: '6905cdce14ad0d0f020b3985',
    to: {
      id: '6905adf16a22b7843b006183',
      username: 'sayantan3',
      email: '',
      profilePicture: null
    },
    status: 'pending',
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
Populating recipient details...
Looking up recipient: 6905adf16a22b7843b006183
Found recipient: sayantan3
Final populated sent requests: [
  {
    id: '6905cdce14ad0d0f020b3985',
    to: {
      id: '6905adf16a22b7843b006183',
      username: 'sayantan3',
      email: 'sayantan3@gmail.com',
      profilePicture: undefined
    },
    status: 'pending',
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
=== FRIEND REQUEST GET END (sent) ===
 GET /api/friends/request?type=sent 200 in 143ms
 GET /api/socket-health 200 in 37ms
 GET /api/socket-health 200 in 148ms
 GET /socket.io?EIO=4&transport=polling&t=1imr5wh4 404 in 158ms
 GET /socket.io?EIO=4&transport=polling&t=1imva68w 404 in 107ms
 GET /api/socket-health 200 in 26ms
 GET /api/socket-health 200 in 138ms
 GET /socket.io?EIO=4&transport=polling&t=1ioae2qm 404 in 225ms
 GET /socket.io?EIO=4&transport=polling&t=1ioe9ik5 404 in 93ms
 GET /api/socket-health 200 in 27ms
 GET /api/socket-health 200 in 115ms
 GET /socket.io?EIO=4&transport=polling&t=1ipudmfc 404 in 206ms
 GET /socket.io?EIO=4&transport=polling&t=1ipxm69t 404 in 101ms
 GET /api/socket-health 200 in 25ms
 GET /api/socket-health 200 in 107ms
 GET /socket.io?EIO=4&transport=polling&t=1irdskvz 404 in 201ms
 GET /socket.io?EIO=4&transport=polling&t=1irgtf1t 404 in 98ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
 GET /api/socket-health 200 in 76ms
 GET /api/socket-health 200 in 117ms
 GET /socket.io?EIO=4&transport=polling&t=1isynrst 404 in 123ms
 GET /socket.io?EIO=4&transport=polling&t=1it1yg4k 404 in 97ms
 POST /api/users/heartbeat 200 in 330ms
 GET /api/socket-health 200 in 32ms
 GET /api/socket-health 200 in 138ms
 GET /socket.io?EIO=4&transport=polling&t=1iuh4t8k 404 in 248ms
 GET /socket.io?EIO=4&transport=polling&t=1iukzapr 404 in 121ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
 GET /api/conversations 200 in 139ms
 GET /api/socket-health 200 in 104ms
 GET /api/socket-health 200 in 131ms
 GET /socket.io?EIO=4&transport=polling&t=1iw2cf78 404 in 211ms
 GET /socket.io?EIO=4&transport=polling&t=1iw61241 404 in 98ms
 GET /api/socket-health 200 in 28ms
 GET /api/socket-health 200 in 208ms
 GET /socket.io?EIO=4&transport=polling&t=1ixk3tfl 404 in 367ms
 GET /socket.io?EIO=4&transport=polling&t=1ixpw2je 404 in 154ms
 GET /api/socket-health 200 in 72ms
 GET /api/socket-health 200 in 707ms
 GET /socket.io?EIO=4&transport=polling&t=1iz5ib7y 404 in 701ms
 GET /socket.io?EIO=4&transport=polling&t=1izp8rqe 404 in 178ms
 GET /api/socket-health 200 in 38ms
 GET /socket.io?EIO=4&transport=polling&t=1j0pyi6t 404 in 193ms
 GET /api/socket-health 200 in 48ms
 GET /socket.io?EIO=4&transport=polling&t=1j1ggdk1 404 in 160ms
 GET /api/socket-health 200 in 47ms
 GET /socket.io?EIO=4&transport=polling&t=1j27ukrw 404 in 169ms
 GET /api/socket-health 200 in 90ms
 GET /socket.io?EIO=4&transport=polling&t=1j30xey2 404 in 230ms
 GET /api/socket-health 200 in 44ms
 GET /socket.io?EIO=4&transport=polling&t=1j3xqbm8 404 in 922ms
 GET /api/socket-health 200 in 654ms
 GET /socket.io?EIO=4&transport=polling&t=1j59hih5 404 in 164ms
 GET /api/socket-health 200 in 27ms
 GET /socket.io?EIO=4&transport=polling&t=1j61ifq7 404 in 95ms
 GET /api/socket-health 200 in 25ms
 GET /socket.io?EIO=4&transport=polling&t=1j6t9nfd 404 in 94ms
 GET /api/socket-health 200 in 25ms
 GET /socket.io?EIO=4&transport=polling&t=1j7kreih 404 in 102ms
 GET /api/socket-health 200 in 25ms
 GET /socket.io?EIO=4&transport=polling&t=1j8cxfnl 404 in 100ms
 GET /api/socket-health 200 in 45ms
=== FRIEND REQUEST GET START ===
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
Request type: received User: sayantan2@gmail.com
âœ… Database connected
âœ… Current user found: {
  id: new ObjectId('6901f85f42c5d010fa811206'),
  email: 'sayantan2@gmail.com',
  friendRequestsCount: 0,
  sentRequestsCount: 1
}
Processing received requests...
Raw friendRequests: []
Processed receivedRequests: []
Populating sender details...
Final populated requests: []
=== FRIEND REQUEST GET END (received) ===
 GET /api/friends/request?type=received 200 in 142ms
=== FRIEND REQUEST GET START ===
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
Request type: sent User: sayantan2@gmail.com
âœ… Database connected
 GET /socket.io?EIO=4&transport=polling&t=1j956pd5 404 in 121ms
âœ… Current user found: {
  id: new ObjectId('6901f85f42c5d010fa811206'),
  email: 'sayantan2@gmail.com',
  friendRequestsCount: 0,
  sentRequestsCount: 1
}
Processing sent requests...
Raw sentRequests: [
  {
    from: new ObjectId('6901f85f42c5d010fa811206'),
    fromName: 'sayantan2',
    to: new ObjectId('6905adf16a22b7843b006183'),
    toName: 'sayantan3',
    status: 'pending',
    _id: new ObjectId('6905cdce14ad0d0f020b3985'),
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
Filtering sent request: { status: 'pending', to: new ObjectId('6905adf16a22b7843b006183') }
Mapping sent request: {
  from: new ObjectId('6901f85f42c5d010fa811206'),
  fromName: 'sayantan2',
  to: new ObjectId('6905adf16a22b7843b006183'),
  toName: 'sayantan3',
  status: 'pending',
  _id: new ObjectId('6905cdce14ad0d0f020b3985'),
  createdAt: 2025-11-01T09:07:26.707Z,
  updatedAt: 2025-11-01T09:07:26.707Z
}
Processed sentRequests: [
  {
    id: '6905cdce14ad0d0f020b3985',
    to: {
      id: '6905adf16a22b7843b006183',
      username: 'sayantan3',
      email: '',
      profilePicture: null
    },
    status: 'pending',
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
Populating recipient details...
Looking up recipient: 6905adf16a22b7843b006183
Found recipient: sayantan3
Final populated sent requests: [
  {
    id: '6905cdce14ad0d0f020b3985',
    to: {
      id: '6905adf16a22b7843b006183',
      username: 'sayantan3',
      email: 'sayantan3@gmail.com',
      profilePicture: undefined
    },
    status: 'pending',
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
=== FRIEND REQUEST GET END (sent) ===
 GET /api/friends/request?type=sent 200 in 122ms
 GET /api/socket-health 200 in 370ms
 GET /socket.io?EIO=4&transport=polling&t=1ja7an0d 404 in 119ms
 GET /api/socket-health 200 in 29ms
 GET /socket.io?EIO=4&transport=polling&t=1jao86ij 404 in 122ms
 GET /api/socket-health 200 in 29ms
 GET /socket.io?EIO=4&transport=polling&t=1jbg2236 404 in 100ms
 GET /api/socket-health 200 in 24ms
 GET /socket.io?EIO=4&transport=polling&t=1jc7n9yv 404 in 103ms
 GET /api/socket-health 200 in 25ms
 GET /socket.io?EIO=4&transport=polling&t=1jczesve 404 in 94ms
 GET /api/socket-health 200 in 28ms
 GET /socket.io?EIO=4&transport=polling&t=1jdr89mu 404 in 98ms
 GET /api/socket-health 200 in 25ms
 GET /socket.io?EIO=4&transport=polling&t=1jeix2r9 404 in 96ms
 GET /api/socket-health 200 in 33ms
 GET /socket.io?EIO=4&transport=polling&t=1jfazmrm 404 in 103ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
 GET /api/socket-health 200 in 52ms
 GET /socket.io?EIO=4&transport=polling&t=1jg3i7kt 404 in 104ms
 POST /api/users/heartbeat 200 in 238ms
 GET /api/socket-health 200 in 21ms
 GET /socket.io?EIO=4&transport=polling&t=1jguana6 404 in 94ms
 GET /api/socket-health 200 in 23ms
 GET /socket.io?EIO=4&transport=polling&t=1jhm251o 404 in 150ms
 GET /api/socket-health 200 in 23ms
 GET /socket.io?EIO=4&transport=polling&t=1jidt02w 404 in 90ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
 GET /api/socket-health 200 in 43ms
 GET /socket.io?EIO=4&transport=polling&t=1jj6dvpb 404 in 98ms
 GET /api/conversations 200 in 192ms
 GET /api/socket-health 200 in 22ms
 GET /socket.io?EIO=4&transport=polling&t=1jjx5omo 404 in 108ms
 GET /api/socket-health 200 in 29ms
 GET /socket.io?EIO=4&transport=polling&t=1jkpidsv 404 in 104ms
 GET /api/socket-health 200 in 25ms
 GET /socket.io?EIO=4&transport=polling&t=1jlh22jj 404 in 97ms
 GET /api/socket-health 200 in 29ms
 GET /socket.io?EIO=4&transport=polling&t=1jm919vj 404 in 102ms
 GET /api/socket-health 200 in 24ms
 GET /socket.io?EIO=4&transport=polling&t=1jn0kfui 404 in 96ms
 GET /api/socket-health 200 in 24ms
 GET /socket.io?EIO=4&transport=polling&t=1jnsa45o 404 in 97ms
 GET /api/socket-health 200 in 81ms
 GET /socket.io?EIO=4&transport=polling&t=1jolpxuy 404 in 337ms
 GET /api/socket-health 200 in 99ms
 GET /socket.io?EIO=4&transport=polling&t=1jpf8bql 404 in 434ms
 GET /api/socket-health 200 in 193ms
 GET /socket.io?EIO=4&transport=polling&t=1jqf7xwx 404 in 263ms
 GET /api/socket-health 200 in 25ms
 GET /socket.io?EIO=4&transport=polling&t=1jqvdnxl 404 in 118ms
 GET /api/socket-health 200 in 28ms
 GET /socket.io?EIO=4&transport=polling&t=1jrnivey 404 in 122ms
 GET /api/socket-health 200 in 24ms
 GET /socket.io?EIO=4&transport=polling&t=1jserl2e 404 in 94ms
 GET /api/socket-health 200 in 23ms
 GET /socket.io?EIO=4&transport=polling&t=1jt6lfjh 404 in 101ms
 GET /api/socket-health 200 in 27ms
 GET /socket.io?EIO=4&transport=polling&t=1jtyri9o 404 in 101ms
 GET /api/socket-health 200 in 24ms
 GET /socket.io?EIO=4&transport=polling&t=1juq6dfy 404 in 97ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
=== FRIEND REQUEST GET START ===
 GET /api/socket-health 200 in 62ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
Request type: received User: sayantan2@gmail.com
âœ… Database connected
 GET /socket.io?EIO=4&transport=polling&t=1jvjqs8v 404 in 110ms
 GET /api/friends 200 in 225ms
âœ… Current user found: {
  id: new ObjectId('6901f85f42c5d010fa811206'),
  email: 'sayantan2@gmail.com',
  friendRequestsCount: 0,
  sentRequestsCount: 1
}
Processing received requests...
Raw friendRequests: []
Processed receivedRequests: []
Populating sender details...
Final populated requests: []
=== FRIEND REQUEST GET END (received) ===
 GET /api/friends/request?type=received 200 in 484ms
=== FRIEND REQUEST GET START ===
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
Request type: sent User: sayantan2@gmail.com
âœ… Database connected
âœ… Current user found: {
  id: new ObjectId('6901f85f42c5d010fa811206'),
  email: 'sayantan2@gmail.com',
  friendRequestsCount: 0,
  sentRequestsCount: 1
}
Processing sent requests...
Raw sentRequests: [
  {
    from: new ObjectId('6901f85f42c5d010fa811206'),
    fromName: 'sayantan2',
    to: new ObjectId('6905adf16a22b7843b006183'),
    toName: 'sayantan3',
    status: 'pending',
    _id: new ObjectId('6905cdce14ad0d0f020b3985'),
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
Filtering sent request: { status: 'pending', to: new ObjectId('6905adf16a22b7843b006183') }
Mapping sent request: {
  from: new ObjectId('6901f85f42c5d010fa811206'),
  fromName: 'sayantan2',
  to: new ObjectId('6905adf16a22b7843b006183'),
  toName: 'sayantan3',
  status: 'pending',
  _id: new ObjectId('6905cdce14ad0d0f020b3985'),
  createdAt: 2025-11-01T09:07:26.707Z,
  updatedAt: 2025-11-01T09:07:26.707Z
}
Processed sentRequests: [
  {
    id: '6905cdce14ad0d0f020b3985',
    to: {
      id: '6905adf16a22b7843b006183',
      username: 'sayantan3',
      email: '',
      profilePicture: null
    },
    status: 'pending',
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
Populating recipient details...
Looking up recipient: 6905adf16a22b7843b006183
Found recipient: sayantan3
Final populated sent requests: [
  {
    id: '6905cdce14ad0d0f020b3985',
    to: {
      id: '6905adf16a22b7843b006183',
      username: 'sayantan3',
      email: 'sayantan3@gmail.com',
      profilePicture: undefined
    },
    status: 'pending',
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
=== FRIEND REQUEST GET END (sent) ===
 GET /api/friends/request?type=sent 200 in 142ms
 GET /api/socket-health 200 in 22ms
 GET /socket.io?EIO=4&transport=polling&t=1jw9w467 404 in 98ms
 GET /api/socket-health 200 in 56ms
 GET /socket.io?EIO=4&transport=polling&t=1jx2mci2 404 in 106ms
 GET /api/socket-health 200 in 25ms
 GET /socket.io?EIO=4&transport=polling&t=1jxtl259 404 in 101ms
 GET /api/socket-health 200 in 29ms
 GET /socket.io?EIO=4&transport=polling&t=1jyl3tl3 404 in 91ms
 GET /api/socket-health 200 in 22ms
 GET /socket.io?EIO=4&transport=polling&t=1jzd2ly6 404 in 97ms
 GET /api/socket-health 200 in 24ms
 GET /socket.io?EIO=4&transport=polling&t=1k04imft 404 in 95ms
 GET /api/socket-health 200 in 24ms
 GET /socket.io?EIO=4&transport=polling&t=1k0wma7m 404 in 96ms
 GET /api/socket-health 200 in 44ms
 GET /socket.io?EIO=4&transport=polling&t=1k1oypwe 404 in 115ms
 GET /api/socket-health 200 in 33ms
 GET /socket.io?EIO=4&transport=polling&t=1k2gcwwu 404 in 141ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
 GET /api/socket-health 200 in 86ms
 GET /socket.io?EIO=4&transport=polling&t=1k3bg96d 404 in 250ms
 POST /api/users/heartbeat 200 in 446ms
 GET /api/socket-health 200 in 42ms
 GET /socket.io?EIO=4&transport=polling&t=1k40eq5e 404 in 200ms
 GET /api/socket-health 200 in 76ms
 GET /socket.io?EIO=4&transport=polling&t=1k4t14ok 404 in 264ms
 GET /api/socket-health 200 in 56ms
 GET /socket.io?EIO=4&transport=polling&t=1k5kckm0 404 in 237ms
 GET /api/socket-health 200 in 85ms
 GET /socket.io?EIO=4&transport=polling&t=1k6d02t6 404 in 136ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
 GET /api/socket-health 200 in 96ms
 GET /socket.io?EIO=4&transport=polling&t=1k74l8z6 404 in 160ms
 GET /api/conversations 200 in 292ms
 GET /api/socket-health 200 in 62ms
 GET /socket.io?EIO=4&transport=polling&t=1k7vfsyy 404 in 133ms
 GET /api/socket-health 200 in 60ms
 GET /socket.io?EIO=4&transport=polling&t=1k8n5oz5 404 in 112ms
 GET /api/socket-health 200 in 45ms
 GET /api/socket-health 200 in 49ms
 GET /socket.io?EIO=4&transport=polling&t=1k9eu20b 404 in 1025ms
 GET /socket.io?EIO=4&transport=polling&t=1ka7pj0x 404 in 181ms
 GET /api/socket-health 200 in 26ms
 GET /api/socket-health 200 in 36ms
 GET /socket.io?EIO=4&transport=polling&t=1kbpnbk7 404 in 204ms
 GET /socket.io?EIO=4&transport=polling&t=1kbqpx6k 404 in 102ms
 GET /api/socket-health 200 in 35ms
 GET /api/socket-health 200 in 32ms
 GET /socket.io?EIO=4&transport=polling&t=1kd9gdpe 404 in 211ms
 GET /socket.io?EIO=4&transport=polling&t=1kdadvyb 404 in 111ms
 GET /api/socket-health 200 in 127ms
 GET /api/socket-health 200 in 113ms
 GET /socket.io?EIO=4&transport=polling&t=1kficw73 404 in 449ms
 GET /socket.io?EIO=4&transport=polling&t=1kfln8ht 404 in 451ms
 GET /api/socket-health 200 in 368ms
 GET /api/socket-health 200 in 125ms
 GET /socket.io?EIO=4&transport=polling&t=1khnjeap 404 in 425ms
 GET /socket.io?EIO=4&transport=polling&t=1khospj3 404 in 420ms
 GET /api/socket-health 200 in 55ms
=== FRIEND REQUEST GET START ===
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
Request type: received User: sayantan2@gmail.com
âœ… Database connected
âœ… Current user found: {
  id: new ObjectId('6901f85f42c5d010fa811206'),
  email: 'sayantan2@gmail.com',
  friendRequestsCount: 0,
  sentRequestsCount: 1
}
Processing received requests...
Raw friendRequests: []
Processed receivedRequests: []
Populating sender details...
Final populated requests: []
=== FRIEND REQUEST GET END (received) ===
 GET /api/friends/request?type=received 200 in 178ms
 GET /api/socket-health 200 in 131ms
=== FRIEND REQUEST GET START ===
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
Request type: sent User: sayantan2@gmail.com
âœ… Database connected
 GET /socket.io?EIO=4&transport=polling&t=1kjg6yab 404 in 239ms
 GET /socket.io?EIO=4&transport=polling&t=1kjk66kj 404 in 125ms
âœ… Current user found: {
  id: new ObjectId('6901f85f42c5d010fa811206'),
  email: 'sayantan2@gmail.com',
  friendRequestsCount: 0,
  sentRequestsCount: 1
}
Processing sent requests...
Raw sentRequests: [
  {
    from: new ObjectId('6901f85f42c5d010fa811206'),
    fromName: 'sayantan2',
    to: new ObjectId('6905adf16a22b7843b006183'),
    toName: 'sayantan3',
    status: 'pending',
    _id: new ObjectId('6905cdce14ad0d0f020b3985'),
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
Filtering sent request: { status: 'pending', to: new ObjectId('6905adf16a22b7843b006183') }
Mapping sent request: {
  from: new ObjectId('6901f85f42c5d010fa811206'),
  fromName: 'sayantan2',
  to: new ObjectId('6905adf16a22b7843b006183'),
  toName: 'sayantan3',
  status: 'pending',
  _id: new ObjectId('6905cdce14ad0d0f020b3985'),
  createdAt: 2025-11-01T09:07:26.707Z,
  updatedAt: 2025-11-01T09:07:26.707Z
}
Processed sentRequests: [
  {
    id: '6905cdce14ad0d0f020b3985',
    to: {
      id: '6905adf16a22b7843b006183',
      username: 'sayantan3',
      email: '',
      profilePicture: null
    },
    status: 'pending',
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
Populating recipient details...
Looking up recipient: 6905adf16a22b7843b006183
Found recipient: sayantan3
Final populated sent requests: [
  {
    id: '6905cdce14ad0d0f020b3985',
    to: {
      id: '6905adf16a22b7843b006183',
      username: 'sayantan3',
      email: 'sayantan3@gmail.com',
      profilePicture: undefined
    },
    status: 'pending',
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
=== FRIEND REQUEST GET END (sent) ===
 GET /api/friends/request?type=sent 200 in 218ms
 GET /api/socket-health 200 in 24ms
 GET /api/socket-health 200 in 119ms
 GET /socket.io?EIO=4&transport=polling&t=1kkyrpdp 404 in 208ms
 GET /socket.io?EIO=4&transport=polling&t=1kl23xwi 404 in 105ms
 GET /api/socket-health 200 in 25ms
 GET /api/socket-health 200 in 112ms
 GET /socket.io?EIO=4&transport=polling&t=1kmickhr 404 in 201ms
 GET /socket.io?EIO=4&transport=polling&t=1kmlimxk 404 in 100ms
 GET /api/socket-health 200 in 23ms
 GET /api/socket-health 200 in 118ms
 GET /socket.io?EIO=4&transport=polling&t=1ko1uzfy 404 in 204ms
 GET /socket.io?EIO=4&transport=polling&t=1ko550x7 404 in 112ms
 GET /api/socket-health 200 in 29ms
 GET /api/socket-health 200 in 34ms
 GET /socket.io?EIO=4&transport=polling&t=1kpmdlho 404 in 196ms
 GET /socket.io?EIO=4&transport=polling&t=1kpndjd1 404 in 105ms
 GET /api/socket-health 200 in 30ms
 GET /api/socket-health 200 in 114ms
 GET /socket.io?EIO=4&transport=polling&t=1kr50kfn 404 in 202ms
 GET /socket.io?EIO=4&transport=polling&t=1kr8820b 404 in 101ms
 GET /api/socket-health 200 in 24ms
 GET /api/socket-health 200 in 31ms
 GET /socket.io?EIO=4&transport=polling&t=1ksoda5p 404 in 204ms
 GET /socket.io?EIO=4&transport=polling&t=1kspamcu 404 in 105ms
 GET /api/socket-health 200 in 32ms
 GET /api/socket-health 200 in 126ms
 GET /socket.io?EIO=4&transport=polling&t=1ku8htru 404 in 216ms
 GET /socket.io?EIO=4&transport=polling&t=1kuc1qni 404 in 101ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
 GET /api/conversations 200 in 149ms
 GET /api/socket-health 200 in 32ms
 GET /api/socket-health 200 in 113ms
 GET /socket.io?EIO=4&transport=polling&t=1kvrvbcu 404 in 212ms
 GET /socket.io?EIO=4&transport=polling&t=1kvv2d71 404 in 109ms
 GET /api/socket-health 200 in 27ms
 GET /api/socket-health 200 in 134ms
 GET /socket.io?EIO=4&transport=polling&t=1kxb7nbx 404 in 262ms
 GET /socket.io?EIO=4&transport=polling&t=1kxezpr2 404 in 143ms
 GET /api/socket-health 200 in 33ms
 GET /api/socket-health 200 in 42ms
 GET /socket.io?EIO=4&transport=polling&t=1kyuwtxx 404 in 320ms
 GET /socket.io?EIO=4&transport=polling&t=1kyw49z2 404 in 173ms
 GET /api/socket-health 200 in 27ms
 GET /api/socket-health 200 in 107ms
 GET /socket.io?EIO=4&transport=polling&t=1l0edzx5 404 in 192ms
 GET /socket.io?EIO=4&transport=polling&t=1l0hem6c 404 in 97ms
 GET /api/socket-health 200 in 23ms
 GET /api/socket-health 200 in 120ms
 GET /socket.io?EIO=4&transport=polling&t=1l1xwyol 404 in 205ms
 GET /socket.io?EIO=4&transport=polling&t=1l21aco4 404 in 101ms
 GET /api/socket-health 200 in 34ms
 GET /api/socket-health 200 in 107ms
 GET /socket.io?EIO=4&transport=polling&t=1l3hq9eo 404 in 194ms
 GET /socket.io?EIO=4&transport=polling&t=1l3kq27i 404 in 99ms
 GET /api/socket-health 200 in 29ms
 GET /api/socket-health 200 in 110ms
 GET /socket.io?EIO=4&transport=polling&t=1l5100a2 404 in 197ms
 GET /socket.io?EIO=4&transport=polling&t=1l544lcy 404 in 99ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
=== FRIEND REQUEST GET START ===
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
Request type: received User: sayantan2@gmail.com
âœ… Database connected
 POST /api/users/heartbeat 200 in 234ms
âœ… Current user found: {
  id: new ObjectId('6901f85f42c5d010fa811206'),
  email: 'sayantan2@gmail.com',
  friendRequestsCount: 0,
  sentRequestsCount: 1
}
Processing received requests...
Raw friendRequests: []
Processed receivedRequests: []
Populating sender details...
Final populated requests: []
=== FRIEND REQUEST GET END (received) ===
 GET /api/friends/request?type=received 200 in 496ms
=== FRIEND REQUEST GET START ===
 GET /api/friends 200 in 545ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
Request type: sent User: sayantan2@gmail.com
âœ… Database connected
âœ… Current user found: {
  id: new ObjectId('6901f85f42c5d010fa811206'),
  email: 'sayantan2@gmail.com',
  friendRequestsCount: 0,
  sentRequestsCount: 1
}
Processing sent requests...
Raw sentRequests: [
  {
    from: new ObjectId('6901f85f42c5d010fa811206'),
    fromName: 'sayantan2',
    to: new ObjectId('6905adf16a22b7843b006183'),
    toName: 'sayantan3',
    status: 'pending',
    _id: new ObjectId('6905cdce14ad0d0f020b3985'),
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
Filtering sent request: { status: 'pending', to: new ObjectId('6905adf16a22b7843b006183') }
Mapping sent request: {
  from: new ObjectId('6901f85f42c5d010fa811206'),
  fromName: 'sayantan2',
  to: new ObjectId('6905adf16a22b7843b006183'),
  toName: 'sayantan3',
  status: 'pending',
  _id: new ObjectId('6905cdce14ad0d0f020b3985'),
  createdAt: 2025-11-01T09:07:26.707Z,
  updatedAt: 2025-11-01T09:07:26.707Z
}
Processed sentRequests: [
  {
    id: '6905cdce14ad0d0f020b3985',
    to: {
      id: '6905adf16a22b7843b006183',
      username: 'sayantan3',
      email: '',
      profilePicture: null
    },
    status: 'pending',
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
Populating recipient details...
Looking up recipient: 6905adf16a22b7843b006183
Found recipient: sayantan3
Final populated sent requests: [
  {
    id: '6905cdce14ad0d0f020b3985',
    to: {
      id: '6905adf16a22b7843b006183',
      username: 'sayantan3',
      email: 'sayantan3@gmail.com',
      profilePicture: undefined
    },
    status: 'pending',
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
=== FRIEND REQUEST GET END (sent) ===
 GET /api/friends/request?type=sent 200 in 132ms
 GET /api/socket-health 200 in 29ms
 GET /api/socket-health 200 in 26ms
 GET /socket.io?EIO=4&transport=polling&t=1l6kunxl 404 in 194ms
 GET /socket.io?EIO=4&transport=polling&t=1l6lm0s9 404 in 100ms
 GET /api/socket-health 200 in 25ms
 GET /api/socket-health 200 in 110ms
 GET /socket.io?EIO=4&transport=polling&t=1l83ydr4 404 in 198ms
 GET /socket.io?EIO=4&transport=polling&t=1l873jul 404 in 100ms
 GET /api/socket-health 200 in 28ms
 GET /api/socket-health 200 in 25ms
 GET /socket.io?EIO=4&transport=polling&t=1l9nknob 404 in 190ms
 GET /socket.io?EIO=4&transport=polling&t=1l9oan6u 404 in 99ms
 GET /api/socket-health 200 in 25ms
 GET /api/socket-health 200 in 109ms
 GET /socket.io?EIO=4&transport=polling&t=1lb7d7q0 404 in 204ms
 GET /socket.io?EIO=4&transport=polling&t=1lbag2gr 404 in 102ms
 GET /api/socket-health 200 in 30ms
 GET /api/socket-health 200 in 136ms
 GET /socket.io?EIO=4&transport=polling&t=1lcrjmiu 404 in 268ms
 GET /socket.io?EIO=4&transport=polling&t=1lcvdb8u 404 in 147ms
 GET /api/socket-health 200 in 45ms
 GET /api/socket-health 200 in 47ms
 GET /socket.io?EIO=4&transport=polling&t=1legoxn7 404 in 640ms
 GET /socket.io?EIO=4&transport=polling&t=1lei49et 404 in 442ms
 GET /api/socket-health 200 in 57ms
 GET /api/socket-health 200 in 44ms
 GET /socket.io?EIO=4&transport=polling&t=1lfvp14f 404 in 308ms
 GET /socket.io?EIO=4&transport=polling&t=1lfx0jce 404 in 183ms
 GET /api/socket-health 200 in 39ms
 GET /api/socket-health 200 in 36ms
 GET /socket.io?EIO=4&transport=polling&t=1lhdvk1g 404 in 226ms
 GET /socket.io?EIO=4&transport=polling&t=1lhextjn 404 in 117ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
 GET /api/socket-health 200 in 69ms
 GET /api/conversations 200 in 198ms
 GET /api/socket-health 200 in 138ms
 GET /socket.io?EIO=4&transport=polling&t=1liyf0xz 404 in 228ms
 GET /socket.io?EIO=4&transport=polling&t=1lj2df4t 404 in 102ms
 GET /api/socket-health 200 in 24ms
 GET /api/socket-health 200 in 29ms
 GET /socket.io?EIO=4&transport=polling&t=1lkgk4x5 404 in 198ms
 GET /socket.io?EIO=4&transport=polling&t=1lkhflqb 404 in 100ms
 GET /api/socket-health 200 in 33ms
 GET /api/socket-health 200 in 24ms
 GET /socket.io?EIO=4&transport=polling&t=1lm0cv4x 404 in 216ms
 GET /socket.io?EIO=4&transport=polling&t=1lm12ber 404 in 121ms
 GET /api/socket-health 200 in 26ms
 GET /api/socket-health 200 in 33ms
 GET /socket.io?EIO=4&transport=polling&t=1lnjnwrp 404 in 198ms
 GET /socket.io?EIO=4&transport=polling&t=1lnkkpde 404 in 106ms
 GET /api/socket-health 200 in 31ms
 GET /api/socket-health 200 in 114ms
 GET /socket.io?EIO=4&transport=polling&t=1lp3azza 404 in 201ms
 GET /socket.io?EIO=4&transport=polling&t=1lp6ibde 404 in 99ms
 GET /api/socket-health 200 in 25ms
 GET /api/socket-health 200 in 118ms
 GET /socket.io?EIO=4&transport=polling&t=1lqmqxun 404 in 249ms
 GET /socket.io?EIO=4&transport=polling&t=1lqq12dv 404 in 142ms
 GET /api/socket-health 200 in 32ms
 GET /api/socket-health 200 in 28ms
 GET /socket.io?EIO=4&transport=polling&t=1ls6b13o 404 in 206ms
 GET /socket.io?EIO=4&transport=polling&t=1ls746mj 404 in 102ms
 GET /api/socket-health 200 in 53ms
=== FRIEND REQUEST GET START ===
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
Request type: received User: sayantan2@gmail.com
âœ… Database connected
âœ… Current user found: {
  id: new ObjectId('6901f85f42c5d010fa811206'),
  email: 'sayantan2@gmail.com',
  friendRequestsCount: 0,
  sentRequestsCount: 1
}
Processing received requests...
Raw friendRequests: []
Processed receivedRequests: []
Populating sender details...
Final populated requests: []
=== FRIEND REQUEST GET END (received) ===
 GET /api/friends/request?type=received 200 in 169ms
 GET /api/socket-health 200 in 129ms
=== FRIEND REQUEST GET START ===
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
Request type: sent User: sayantan2@gmail.com
âœ… Database connected
âœ… Current user found: {
  id: new ObjectId('6901f85f42c5d010fa811206'),
  email: 'sayantan2@gmail.com',
  friendRequestsCount: 0,
  sentRequestsCount: 1
}
Processing sent requests...
Raw sentRequests: [
  {
    from: new ObjectId('6901f85f42c5d010fa811206'),
    fromName: 'sayantan2',
    to: new ObjectId('6905adf16a22b7843b006183'),
    toName: 'sayantan3',
    status: 'pending',
    _id: new ObjectId('6905cdce14ad0d0f020b3985'),
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
Filtering sent request: { status: 'pending', to: new ObjectId('6905adf16a22b7843b006183') }
Mapping sent request: {
  from: new ObjectId('6901f85f42c5d010fa811206'),
  fromName: 'sayantan2',
  to: new ObjectId('6905adf16a22b7843b006183'),
  toName: 'sayantan3',
  status: 'pending',
  _id: new ObjectId('6905cdce14ad0d0f020b3985'),
  createdAt: 2025-11-01T09:07:26.707Z,
  updatedAt: 2025-11-01T09:07:26.707Z
}
Processed sentRequests: [
  {
    id: '6905cdce14ad0d0f020b3985',
    to: {
      id: '6905adf16a22b7843b006183',
      username: 'sayantan3',
      email: '',
      profilePicture: null
    },
    status: 'pending',
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
Populating recipient details...
Looking up recipient: 6905adf16a22b7843b006183
Found recipient: sayantan3
Final populated sent requests: [
  {
    id: '6905cdce14ad0d0f020b3985',
    to: {
      id: '6905adf16a22b7843b006183',
      username: 'sayantan3',
      email: 'sayantan3@gmail.com',
      profilePicture: undefined
    },
    status: 'pending',
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
=== FRIEND REQUEST GET END (sent) ===
 GET /api/friends/request?type=sent 200 in 989ms
 GET /socket.io?EIO=4&transport=polling&t=1ltqwcwp 404 in 1118ms
 GET /socket.io?EIO=4&transport=polling&t=1ltulb1i 404 in 999ms
 GET /api/socket-health 200 in 48ms
 GET /api/socket-health 200 in 58ms
 GET /socket.io?EIO=4&transport=polling&t=1lw5x7d2 404 in 1206ms
 GET /socket.io?EIO=4&transport=polling&t=1lw6qtb7 404 in 1142ms
 GET /api/socket-health 200 in 78ms
 GET /api/socket-health 200 in 80ms
 GET /socket.io?EIO=4&transport=polling&t=1lyyij1q 404 in 493ms
 GET /socket.io?EIO=4&transport=polling&t=1lyyln0k 404 in 482ms
 GET /api/socket-health 200 in 104ms
 GET /api/socket-health 200 in 158ms
 GET /socket.io?EIO=4&transport=polling&t=1m0z7vgn 404 in 889ms
 GET /socket.io?EIO=4&transport=polling&t=1m137g9d 404 in 408ms
 GET /api/socket-health 200 in 57ms
 GET /api/socket-health 200 in 133ms
 GET /socket.io?EIO=4&transport=polling&t=1m3652xx 404 in 730ms
 GET /socket.io?EIO=4&transport=polling&t=1m3abn94 404 in 332ms
 GET /api/socket-health 200 in 69ms
 GET /api/socket-health 200 in 168ms
 GET /socket.io?EIO=4&transport=polling&t=1m5bl1xz 404 in 312ms
 GET /socket.io?EIO=4&transport=polling&t=1m5ggqx0 404 in 163ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
 GET /api/socket-health 200 in 72ms
 GET /api/socket-health 200 in 153ms
 GET /api/conversations 200 in 250ms
 GET /socket.io?EIO=4&transport=polling&t=1m6voeni 404 in 443ms
 GET /socket.io?EIO=4&transport=polling&t=1m700fei 404 in 300ms
 GET /api/socket-health 200 in 24ms
 GET /api/socket-health 200 in 112ms
 GET /socket.io?EIO=4&transport=polling&t=1m8dugij 404 in 207ms
 GET /socket.io?EIO=4&transport=polling&t=1m8h1c19 404 in 98ms
 GET /api/socket-health 200 in 32ms
 GET /api/socket-health 200 in 113ms
 GET /socket.io?EIO=4&transport=polling&t=1m9xlu5k 404 in 206ms
 GET /socket.io?EIO=4&transport=polling&t=1ma0sxgz 404 in 104ms
 GET /api/socket-health 200 in 26ms
 GET /api/socket-health 200 in 136ms
 GET /socket.io?EIO=4&transport=polling&t=1mbgvsok 404 in 229ms
 GET /socket.io?EIO=4&transport=polling&t=1mbkofib 404 in 98ms
 GET /api/socket-health 200 in 27ms
 GET /api/socket-health 200 in 105ms
 GET /socket.io?EIO=4&transport=polling&t=1md0frg4 404 in 110ms
 GET /socket.io?EIO=4&transport=polling&t=1md3e80n 404 in 101ms
 GET /api/socket-health 200 in 22ms
 GET /api/socket-health 200 in 111ms
 GET /socket.io?EIO=4&transport=polling&t=1mejpst5 404 in 207ms
 GET /socket.io?EIO=4&transport=polling&t=1memubp5 404 in 98ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
=== FRIEND REQUEST GET START ===
 GET /api/socket-health 200 in 70ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
Request type: received User: sayantan2@gmail.com
âœ… Database connected
 GET /api/friends 200 in 212ms
 GET /api/socket-health 200 in 125ms
 GET /socket.io?EIO=4&transport=polling&t=1mg5pxhh 404 in 223ms
 GET /socket.io?EIO=4&transport=polling&t=1mg9feke 404 in 108ms
âœ… Current user found: {
  id: new ObjectId('6901f85f42c5d010fa811206'),
  email: 'sayantan2@gmail.com',
  friendRequestsCount: 0,
  sentRequestsCount: 1
}
Processing received requests...
Raw friendRequests: []
Processed receivedRequests: []
Populating sender details...
Final populated requests: []
=== FRIEND REQUEST GET END (received) ===
 GET /api/friends/request?type=received 200 in 527ms
=== FRIEND REQUEST GET START ===
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
Request type: sent User: sayantan2@gmail.com
âœ… Database connected
âœ… Current user found: {
  id: new ObjectId('6901f85f42c5d010fa811206'),
  email: 'sayantan2@gmail.com',
  friendRequestsCount: 0,
  sentRequestsCount: 1
}
Processing sent requests...
Raw sentRequests: [
  {
    from: new ObjectId('6901f85f42c5d010fa811206'),
    fromName: 'sayantan2',
    to: new ObjectId('6905adf16a22b7843b006183'),
    toName: 'sayantan3',
    status: 'pending',
    _id: new ObjectId('6905cdce14ad0d0f020b3985'),
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
Filtering sent request: { status: 'pending', to: new ObjectId('6905adf16a22b7843b006183') }
Mapping sent request: {
  from: new ObjectId('6901f85f42c5d010fa811206'),
  fromName: 'sayantan2',
  to: new ObjectId('6905adf16a22b7843b006183'),
  toName: 'sayantan3',
  status: 'pending',
  _id: new ObjectId('6905cdce14ad0d0f020b3985'),
  createdAt: 2025-11-01T09:07:26.707Z,
  updatedAt: 2025-11-01T09:07:26.707Z
}
Processed sentRequests: [
  {
    id: '6905cdce14ad0d0f020b3985',
    to: {
      id: '6905adf16a22b7843b006183',
      username: 'sayantan3',
      email: '',
      profilePicture: null
    },
    status: 'pending',
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
Populating recipient details...
Looking up recipient: 6905adf16a22b7843b006183
 POST /api/users/heartbeat 200 in 612ms
Found recipient: sayantan3
Final populated sent requests: [
  {
    id: '6905cdce14ad0d0f020b3985',
    to: {
      id: '6905adf16a22b7843b006183',
      username: 'sayantan3',
      email: 'sayantan3@gmail.com',
      profilePicture: undefined
    },
    status: 'pending',
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
=== FRIEND REQUEST GET END (sent) ===
 GET /api/friends/request?type=sent 200 in 133ms
 GET /api/socket-health 200 in 31ms
 GET /api/socket-health 200 in 115ms
 GET /socket.io?EIO=4&transport=polling&t=1mhn19kg 404 in 209ms
 GET /socket.io?EIO=4&transport=polling&t=1mhqa91e 404 in 104ms
 GET /api/socket-health 200 in 31ms
 GET /api/socket-health 200 in 100ms
 GET /socket.io?EIO=4&transport=polling&t=1mj6sy8n 404 in 185ms
 GET /socket.io?EIO=4&transport=polling&t=1mj9mtzl 404 in 90ms
 GET /api/socket-health 200 in 32ms
 GET /api/socket-health 200 in 116ms
 GET /socket.io?EIO=4&transport=polling&t=1mkqbt3d 404 in 211ms
 GET /socket.io?EIO=4&transport=polling&t=1mktl72s 404 in 105ms
 GET /api/socket-health 200 in 23ms
 GET /api/socket-health 200 in 110ms
 GET /socket.io?EIO=4&transport=polling&t=1mm9owtf 404 in 198ms
 GET /socket.io?EIO=4&transport=polling&t=1mmcsyky 404 in 93ms
 GET /api/socket-health 200 in 30ms
 GET /api/socket-health 200 in 110ms
 GET /socket.io?EIO=4&transport=polling&t=1mnti5to 404 in 114ms
 GET /socket.io?EIO=4&transport=polling&t=1mnwlo7o 404 in 102ms
 GET /api/socket-health 200 in 48ms
 GET /api/socket-health 200 in 227ms
 GET /socket.io?EIO=4&transport=polling&t=1mpdgqq8 404 in 758ms
 GET /socket.io?EIO=4&transport=polling&t=1mpjvhhm 404 in 1304ms
 GET /api/socket-health 200 in 28ms
 GET /socket.io?EIO=4&transport=polling&t=1mqwltor 404 in 122ms
 GET /api/socket-health 200 in 26ms
 GET /socket.io?EIO=4&transport=polling&t=1mro4gx1 404 in 126ms
 GET /api/socket-health 200 in 23ms
 GET /socket.io?EIO=4&transport=polling&t=1msfur3j 404 in 97ms
 GET /api/socket-health 200 in 26ms
 GET /socket.io?EIO=4&transport=polling&t=1mt7pay8 404 in 94ms
 GET /api/socket-health 200 in 29ms
 GET /socket.io?EIO=4&transport=polling&t=1mtzhp6e 404 in 92ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
 GET /api/socket-health 200 in 52ms
 GET /socket.io?EIO=4&transport=polling&t=1murxowe 404 in 96ms
 GET /api/conversations 200 in 180ms
 GET /api/socket-health 200 in 23ms
 GET /socket.io?EIO=4&transport=polling&t=1mviwp9p 404 in 91ms
 GET /api/socket-health 200 in 24ms
 GET /socket.io?EIO=4&transport=polling&t=1mwanw11 404 in 95ms
 GET /api/socket-health 200 in 28ms
 GET /socket.io?EIO=4&transport=polling&t=1mx2ijxh 404 in 99ms
 GET /api/socket-health 200 in 24ms
 GET /socket.io?EIO=4&transport=polling&t=1mxu586h 404 in 101ms
 GET /api/socket-health 200 in 32ms
 GET /socket.io?EIO=4&transport=polling&t=1mym8uwv 404 in 135ms
 GET /api/socket-health 200 in 24ms
 GET /socket.io?EIO=4&transport=polling&t=1mzdob2r 404 in 98ms
 GET /api/socket-health 200 in 24ms
 GET /socket.io?EIO=4&transport=polling&t=1n05sbua 404 in 100ms
 GET /api/socket-health 200 in 21ms
 GET /socket.io?EIO=4&transport=polling&t=1n0xfruo 404 in 105ms
 GET /api/socket-health 200 in 22ms
 GET /socket.io?EIO=4&transport=polling&t=1n1p8u4x 404 in 94ms
 GET /api/socket-health 200 in 28ms
 GET /socket.io?EIO=4&transport=polling&t=1n2h1goo 404 in 96ms
 GET /api/socket-health 200 in 36ms
 GET /socket.io?EIO=4&transport=polling&t=1n399ey8 404 in 122ms
 GET /api/socket-health 200 in 46ms
=== FRIEND REQUEST GET START ===
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
Request type: received User: sayantan2@gmail.com
âœ… Database connected
âœ… Current user found: {
  id: new ObjectId('6901f85f42c5d010fa811206'),
  email: 'sayantan2@gmail.com',
  friendRequestsCount: 0,
  sentRequestsCount: 1
}
Processing received requests...
Raw friendRequests: []
Processed receivedRequests: []
Populating sender details...
Final populated requests: []
=== FRIEND REQUEST GET END (received) ===
 GET /api/friends/request?type=received 200 in 137ms
=== FRIEND REQUEST GET START ===
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
Request type: sent User: sayantan2@gmail.com
âœ… Database connected
 GET /socket.io?EIO=4&transport=polling&t=1n41bw0l 404 in 123ms
âœ… Current user found: {
  id: new ObjectId('6901f85f42c5d010fa811206'),
  email: 'sayantan2@gmail.com',
  friendRequestsCount: 0,
  sentRequestsCount: 1
}
Processing sent requests...
Raw sentRequests: [
  {
    from: new ObjectId('6901f85f42c5d010fa811206'),
    fromName: 'sayantan2',
    to: new ObjectId('6905adf16a22b7843b006183'),
    toName: 'sayantan3',
    status: 'pending',
    _id: new ObjectId('6905cdce14ad0d0f020b3985'),
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
Filtering sent request: { status: 'pending', to: new ObjectId('6905adf16a22b7843b006183') }
Mapping sent request: {
  from: new ObjectId('6901f85f42c5d010fa811206'),
  fromName: 'sayantan2',
  to: new ObjectId('6905adf16a22b7843b006183'),
  toName: 'sayantan3',
  status: 'pending',
  _id: new ObjectId('6905cdce14ad0d0f020b3985'),
  createdAt: 2025-11-01T09:07:26.707Z,
  updatedAt: 2025-11-01T09:07:26.707Z
}
Processed sentRequests: [
  {
    id: '6905cdce14ad0d0f020b3985',
    to: {
      id: '6905adf16a22b7843b006183',
      username: 'sayantan3',
      email: '',
      profilePicture: null
    },
    status: 'pending',
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
Populating recipient details...
Looking up recipient: 6905adf16a22b7843b006183
Found recipient: sayantan3
Final populated sent requests: [
  {
    id: '6905cdce14ad0d0f020b3985',
    to: {
      id: '6905adf16a22b7843b006183',
      username: 'sayantan3',
      email: 'sayantan3@gmail.com',
      profilePicture: undefined
    },
    status: 'pending',
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
=== FRIEND REQUEST GET END (sent) ===
 GET /api/friends/request?type=sent 200 in 109ms
 GET /api/socket-health 200 in 22ms
 GET /socket.io?EIO=4&transport=polling&t=1n4sdcs8 404 in 99ms
 GET /api/socket-health 200 in 32ms
 GET /socket.io?EIO=4&transport=polling&t=1n5kfx9l 404 in 97ms
 GET /api/socket-health 200 in 22ms
 GET /socket.io?EIO=4&transport=polling&t=1n6bwske 404 in 91ms
 GET /api/socket-health 200 in 24ms
 GET /socket.io?EIO=4&transport=polling&t=1n73sy47 404 in 93ms
 GET /api/socket-health 200 in 25ms
 GET /socket.io?EIO=4&transport=polling&t=1n7vklzd 404 in 97ms
 GET /api/socket-health 200 in 32ms
 GET /socket.io?EIO=4&transport=polling&t=1n8n76e1 404 in 104ms
 GET /api/socket-health 200 in 61ms
 GET /socket.io?EIO=4&transport=polling&t=1n9g5l7u 404 in 115ms
 GET /api/socket-health 200 in 38ms
 GET /socket.io?EIO=4&transport=polling&t=1na7cfpb 404 in 121ms
 GET /api/socket-health 200 in 24ms
 GET /socket.io?EIO=4&transport=polling&t=1nayig09 404 in 100ms
 GET /api/socket-health 200 in 29ms
 GET /socket.io?EIO=4&transport=polling&t=1nbqgiaz 404 in 99ms
 GET /api/socket-health 200 in 28ms
 GET /socket.io?EIO=4&transport=polling&t=1nci69ub 404 in 92ms
 GET /api/socket-health 200 in 41ms
 GET /socket.io?EIO=4&transport=polling&t=1ndabr80 404 in 146ms
 GET /api/socket-health 200 in 22ms
 GET /socket.io?EIO=4&transport=polling&t=1ne1gz47 404 in 162ms
 GET /api/socket-health 200 in 23ms
 GET /socket.io?EIO=4&transport=polling&t=1net6mbz 404 in 98ms
 GET /api/socket-health 200 in 37ms
 GET /socket.io?EIO=4&transport=polling&t=1nflm4ht 404 in 173ms
 GET /api/socket-health 200 in 40ms
 GET /socket.io?EIO=4&transport=polling&t=1ngdhajp 404 in 171ms
 GET /api/socket-health 200 in 56ms
 GET /socket.io?EIO=4&transport=polling&t=1nh5zj4o 404 in 249ms
 GET /api/socket-health 200 in 92ms
 GET /socket.io?EIO=4&transport=polling&t=1nhyftsd 404 in 274ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
 GET /api/socket-health 200 in 125ms
 GET /socket.io?EIO=4&transport=polling&t=1nir6k0i 404 in 159ms
 GET /api/conversations 200 in 308ms
 GET /api/socket-health 200 in 39ms
 GET /socket.io?EIO=4&transport=polling&t=1njgblel 404 in 183ms
 GET /api/socket-health 200 in 34ms
 GET /socket.io?EIO=4&transport=polling&t=1nk8b085 404 in 135ms
 GET /api/socket-health 200 in 88ms
 GET /socket.io?EIO=4&transport=polling&t=1nl1s6z9 404 in 380ms
 GET /api/socket-health 200 in 32ms
 GET /socket.io?EIO=4&transport=polling&t=1nlrpsw2 404 in 106ms
 GET /api/socket-health 200 in 26ms
 GET /socket.io?EIO=4&transport=polling&t=1nmjfl3s 404 in 101ms
 GET /api/socket-health 200 in 36ms
 GET /socket.io?EIO=4&transport=polling&t=1nnb49jl 404 in 125ms
 GET /api/socket-health 200 in 46ms
 GET /socket.io?EIO=4&transport=polling&t=1no3msfb 404 in 136ms
 GET /api/socket-health 200 in 47ms
 GET /socket.io?EIO=4&transport=polling&t=1nouzeko 404 in 138ms
 GET /api/socket-health 200 in 42ms
 GET /socket.io?EIO=4&transport=polling&t=1npmz9sp 404 in 134ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
=== FRIEND REQUEST GET START ===
 GET /api/socket-health 200 in 152ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
Request type: received User: sayantan2@gmail.com
âœ… Database connected
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
 GET /api/auth/session 200 in 172ms
 POST /api/users/heartbeat 200 in 387ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
 GET /socket.io?EIO=4&transport=polling&t=1nqirdlv 404 in 254ms
 GET /api/random-chat/queue 200 in 233ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
 GET /api/users/me 200 in 279ms
âœ… Current user found: {
  id: new ObjectId('6901f85f42c5d010fa811206'),
  email: 'sayantan2@gmail.com',
  friendRequestsCount: 0,
  sentRequestsCount: 1
}
Processing received requests...
Raw friendRequests: []
Processed receivedRequests: []
Populating sender details...
Final populated requests: []
=== FRIEND REQUEST GET END (received) ===
 GET /api/friends/request?type=received 200 in 710ms
 GET /api/random-chat/session 200 in 189ms
=== FRIEND REQUEST GET START ===
 GET /api/friends 200 in 793ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
Request type: received User: sayantan2@gmail.com
âœ… Database connected
=== FRIEND REQUEST GET START ===
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
Request type: sent User: sayantan2@gmail.com
âœ… Database connected
âœ… Current user found: {
  id: new ObjectId('6901f85f42c5d010fa811206'),
  email: 'sayantan2@gmail.com',
  friendRequestsCount: 0,
  sentRequestsCount: 1
}
Processing received requests...
Raw friendRequests: []
Processed receivedRequests: []
Populating sender details...
Final populated requests: []
=== FRIEND REQUEST GET END (received) ===
 GET /api/friends/request?type=received 200 in 161ms
âœ… Current user found: {
  id: new ObjectId('6901f85f42c5d010fa811206'),
  email: 'sayantan2@gmail.com',
  friendRequestsCount: 0,
  sentRequestsCount: 1
}
Processing sent requests...
Raw sentRequests: [
  {
    from: new ObjectId('6901f85f42c5d010fa811206'),
    fromName: 'sayantan2',
    to: new ObjectId('6905adf16a22b7843b006183'),
    toName: 'sayantan3',
    status: 'pending',
    _id: new ObjectId('6905cdce14ad0d0f020b3985'),
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
Filtering sent request: { status: 'pending', to: new ObjectId('6905adf16a22b7843b006183') }
Mapping sent request: {
  from: new ObjectId('6901f85f42c5d010fa811206'),
  fromName: 'sayantan2',
  to: new ObjectId('6905adf16a22b7843b006183'),
  toName: 'sayantan3',
  status: 'pending',
  _id: new ObjectId('6905cdce14ad0d0f020b3985'),
  createdAt: 2025-11-01T09:07:26.707Z,
  updatedAt: 2025-11-01T09:07:26.707Z
}
Processed sentRequests: [
  {
    id: '6905cdce14ad0d0f020b3985',
    to: {
      id: '6905adf16a22b7843b006183',
      username: 'sayantan3',
      email: '',
      profilePicture: null
    },
    status: 'pending',
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
Populating recipient details...
Looking up recipient: 6905adf16a22b7843b006183
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
Found recipient: sayantan3
Final populated sent requests: [
  {
    id: '6905cdce14ad0d0f020b3985',
    to: {
      id: '6905adf16a22b7843b006183',
      username: 'sayantan3',
      email: 'sayantan3@gmail.com',
      profilePicture: undefined
    },
    status: 'pending',
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
=== FRIEND REQUEST GET END (sent) ===
 GET /api/friends/request?type=sent 200 in 228ms
 POST /api/users/heartbeat 200 in 663ms
 GET /api/friends 200 in 208ms
=== FRIEND REQUEST GET START ===
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
Request type: sent User: sayantan2@gmail.com
âœ… Database connected
 GET /api/socket-health 200 in 72ms
âœ… Current user found: {
  id: new ObjectId('6901f85f42c5d010fa811206'),
  email: 'sayantan2@gmail.com',
  friendRequestsCount: 0,
  sentRequestsCount: 1
}
Processing sent requests...
Raw sentRequests: [
  {
    from: new ObjectId('6901f85f42c5d010fa811206'),
    fromName: 'sayantan2',
    to: new ObjectId('6905adf16a22b7843b006183'),
    toName: 'sayantan3',
    status: 'pending',
    _id: new ObjectId('6905cdce14ad0d0f020b3985'),
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
Filtering sent request: { status: 'pending', to: new ObjectId('6905adf16a22b7843b006183') }
Mapping sent request: {
  from: new ObjectId('6901f85f42c5d010fa811206'),
  fromName: 'sayantan2',
  to: new ObjectId('6905adf16a22b7843b006183'),
  toName: 'sayantan3',
  status: 'pending',
  _id: new ObjectId('6905cdce14ad0d0f020b3985'),
  createdAt: 2025-11-01T09:07:26.707Z,
  updatedAt: 2025-11-01T09:07:26.707Z
}
Processed sentRequests: [
  {
    id: '6905cdce14ad0d0f020b3985',
    to: {
      id: '6905adf16a22b7843b006183',
      username: 'sayantan3',
      email: '',
      profilePicture: null
    },
    status: 'pending',
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
Populating recipient details...
Looking up recipient: 6905adf16a22b7843b006183
 GET /socket.io?EIO=4&transport=polling&t=1nr7g74m 404 in 139ms
Found recipient: sayantan3
Final populated sent requests: [
  {
    id: '6905cdce14ad0d0f020b3985',
    to: {
      id: '6905adf16a22b7843b006183',
      username: 'sayantan3',
      email: 'sayantan3@gmail.com',
      profilePicture: undefined
    },
    status: 'pending',
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
=== FRIEND REQUEST GET END (sent) ===
 GET /api/friends/request?type=sent 200 in 270ms
 GET /api/socket-health 200 in 32ms
 GET /socket.io?EIO=4&transport=polling&t=1nry1dnh 404 in 94ms
 GET /api/socket-health 200 in 33ms
 GET /socket.io?EIO=4&transport=polling&t=1nsprip2 404 in 119ms
 GET /api/socket-health 200 in 24ms
 GET /socket.io?EIO=4&transport=polling&t=1nth67s6 404 in 158ms
 GET /api/socket-health 200 in 26ms
 GET /socket.io?EIO=4&transport=polling&t=1nu98uzi 404 in 103ms
 GET /api/socket-health 200 in 22ms
 GET /socket.io?EIO=4&transport=polling&t=1nv0hgsz 404 in 97ms
 GET /api/socket-health 200 in 26ms
 GET /socket.io?EIO=4&transport=polling&t=1nvsef13 404 in 102ms
 GET /api/socket-health 200 in 23ms
 GET /socket.io?EIO=4&transport=polling&t=1nwkgan9 404 in 91ms
 GET /api/socket-health 200 in 49ms
 GET /socket.io?EIO=4&transport=polling&t=1nxcqw29 404 in 128ms
 GET /api/socket-health 200 in 22ms
 GET /socket.io?EIO=4&transport=polling&t=1ny3ouqs 404 in 93ms
 GET /api/socket-health 200 in 30ms
 GET /socket.io?EIO=4&transport=polling&t=1nyvryhx 404 in 118ms
 GET /api/socket-health 200 in 22ms
 GET /socket.io?EIO=4&transport=polling&t=1nznc46v 404 in 99ms
 GET /api/socket-health 200 in 26ms
 GET /socket.io?EIO=4&transport=polling&t=1o0fcpzl 404 in 97ms
 GET /api/socket-health 200 in 30ms
 GET /socket.io?EIO=4&transport=polling&t=1o1731e4 404 in 97ms
 GET /api/socket-health 200 in 27ms
 GET /socket.io?EIO=4&transport=polling&t=1o1ylwzp 404 in 97ms
 GET /api/socket-health 200 in 23ms
 GET /socket.io?EIO=4&transport=polling&t=1o2qozmq 404 in 100ms
 GET /api/socket-health 200 in 27ms
 GET /socket.io?EIO=4&transport=polling&t=1o3ihm4t 404 in 98ms
 GET /api/socket-health 200 in 30ms
 GET /socket.io?EIO=4&transport=polling&t=1o4abxaa 404 in 97ms
 GET /api/socket-health 200 in 26ms
 GET /socket.io?EIO=4&transport=polling&t=1o51yzql 404 in 103ms
 GET /api/socket-health 200 in 23ms
 GET /socket.io?EIO=4&transport=polling&t=1o5tls5c 404 in 95ms
 GET /api/socket-health 200 in 28ms
 GET /socket.io?EIO=4&transport=polling&t=1o6llyc7 404 in 104ms
 GET /api/socket-health 200 in 27ms
 GET /socket.io?EIO=4&transport=polling&t=1o7dbtcl 404 in 99ms
 GET /api/socket-health 200 in 42ms
 GET /socket.io?EIO=4&transport=polling&t=1o85l0t8 404 in 111ms
 GET /api/socket-health 200 in 24ms
 GET /socket.io?EIO=4&transport=polling&t=1o8wu6sx 404 in 94ms
 GET /api/socket-health 200 in 40ms
 GET /socket.io?EIO=4&transport=polling&t=1o9ot64v 404 in 157ms
 GET /api/socket-health 200 in 23ms
 GET /socket.io?EIO=4&transport=polling&t=1oag7j6m 404 in 95ms
 GET /api/socket-health 200 in 33ms
 GET /socket.io?EIO=4&transport=polling&t=1ob89bzd 404 in 103ms
 GET /api/socket-health 200 in 27ms
 GET /socket.io?EIO=4&transport=polling&t=1obzzsd2 404 in 97ms
 GET /api/socket-health 200 in 48ms
 GET /socket.io?EIO=4&transport=polling&t=1ocsj831 404 in 117ms
 GET /api/socket-health 200 in 44ms
 GET /socket.io?EIO=4&transport=polling&t=1odjrblv 404 in 149ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
 GET /api/socket-health 200 in 63ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
 GET /socket.io?EIO=4&transport=polling&t=1oec58lx 404 in 100ms
 POST /api/users/heartbeat 200 in 270ms
 GET /api/conversations 200 in 489ms
 GET /api/socket-health 200 in 88ms
=== FRIEND REQUEST GET START ===
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
Request type: received User: sayantan2@gmail.com
âœ… Database connected
âœ… Current user found: {
  id: new ObjectId('6901f85f42c5d010fa811206'),
  email: 'sayantan2@gmail.com',
  friendRequestsCount: 0,
  sentRequestsCount: 1
}
Processing received requests...
Raw friendRequests: []
Processed receivedRequests: []
Populating sender details...
Final populated requests: []
=== FRIEND REQUEST GET END (received) ===
 GET /api/friends/request?type=received 200 in 219ms
=== FRIEND REQUEST GET START ===
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
Request type: sent User: sayantan2@gmail.com
âœ… Database connected
 GET /socket.io?EIO=4&transport=polling&t=1of4m5ly 404 in 158ms
âœ… Current user found: {
  id: new ObjectId('6901f85f42c5d010fa811206'),
  email: 'sayantan2@gmail.com',
  friendRequestsCount: 0,
  sentRequestsCount: 1
}
Processing sent requests...
Raw sentRequests: [
  {
    from: new ObjectId('6901f85f42c5d010fa811206'),
    fromName: 'sayantan2',
    to: new ObjectId('6905adf16a22b7843b006183'),
    toName: 'sayantan3',
    status: 'pending',
    _id: new ObjectId('6905cdce14ad0d0f020b3985'),
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
Filtering sent request: { status: 'pending', to: new ObjectId('6905adf16a22b7843b006183') }
Mapping sent request: {
  from: new ObjectId('6901f85f42c5d010fa811206'),
  fromName: 'sayantan2',
  to: new ObjectId('6905adf16a22b7843b006183'),
  toName: 'sayantan3',
  status: 'pending',
  _id: new ObjectId('6905cdce14ad0d0f020b3985'),
  createdAt: 2025-11-01T09:07:26.707Z,
  updatedAt: 2025-11-01T09:07:26.707Z
}
Processed sentRequests: [
  {
    id: '6905cdce14ad0d0f020b3985',
    to: {
      id: '6905adf16a22b7843b006183',
      username: 'sayantan3',
      email: '',
      profilePicture: null
    },
    status: 'pending',
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
Populating recipient details...
Looking up recipient: 6905adf16a22b7843b006183
Found recipient: sayantan3
Final populated sent requests: [
  {
    id: '6905cdce14ad0d0f020b3985',
    to: {
      id: '6905adf16a22b7843b006183',
      username: 'sayantan3',
      email: 'sayantan3@gmail.com',
      profilePicture: undefined
    },
    status: 'pending',
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
=== FRIEND REQUEST GET END (sent) ===
 GET /api/friends/request?type=sent 200 in 120ms
 GET /api/socket-health 200 in 24ms
 GET /socket.io?EIO=4&transport=polling&t=1ofuuz9t 404 in 100ms
 GET /api/socket-health 200 in 29ms
 GET /socket.io?EIO=4&transport=polling&t=1ogmuzn0 404 in 95ms
 GET /api/socket-health 200 in 24ms
 GET /socket.io?EIO=4&transport=polling&t=1ohefnoj 404 in 91ms
 GET /api/socket-health 200 in 48ms
 GET /socket.io?EIO=4&transport=polling&t=1oi6zse6 404 in 122ms
 GET /api/socket-health 200 in 24ms
 GET /socket.io?EIO=4&transport=polling&t=1oixop6s 404 in 99ms
 GET /api/socket-health 200 in 29ms
 GET /socket.io?EIO=4&transport=polling&t=1ojpm4oj 404 in 98ms
 GET /api/socket-health 200 in 95ms
 GET /socket.io?EIO=4&transport=polling&t=1okjeytb 404 in 164ms
 GET /api/socket-health 200 in 23ms
 GET /socket.io?EIO=4&transport=polling&t=1ol928pt 404 in 96ms
 GET /api/socket-health 200 in 24ms
 GET /socket.io?EIO=4&transport=polling&t=1om0v8jo 404 in 90ms
 GET /api/socket-health 200 in 24ms
 GET /socket.io?EIO=4&transport=polling&t=1omsmh2d 404 in 99ms
 GET /api/socket-health 200 in 29ms
 GET /socket.io?EIO=4&transport=polling&t=1onkg4zl 404 in 95ms
 GET /api/socket-health 200 in 22ms
 GET /socket.io?EIO=4&transport=polling&t=1ooce20g 404 in 91ms
 GET /api/socket-health 200 in 34ms
 GET /socket.io?EIO=4&transport=polling&t=1op4hmgc 404 in 119ms
 GET /api/socket-health 200 in 22ms
 GET /socket.io?EIO=4&transport=polling&t=1opvustn 404 in 100ms
 GET /api/socket-health 200 in 31ms
 GET /socket.io?EIO=4&transport=polling&t=1oqntezh 404 in 95ms
 GET /api/socket-health 200 in 23ms
 GET /socket.io?EIO=4&transport=polling&t=1orfd16p 404 in 90ms
 GET /api/socket-health 200 in 22ms
 GET /socket.io?EIO=4&transport=polling&t=1os73eoy 404 in 93ms
 GET /api/socket-health 200 in 23ms
 GET /socket.io?EIO=4&transport=polling&t=1osyvwp9 404 in 95ms
 GET /api/socket-health 200 in 24ms
 GET /socket.io?EIO=4&transport=polling&t=1otqjfw1 404 in 96ms
 GET /api/socket-health 200 in 31ms
 GET /socket.io?EIO=4&transport=polling&t=1ouijfxh 404 in 93ms
 GET /api/socket-health 200 in 24ms
 GET /socket.io?EIO=4&transport=polling&t=1ovaeqci 404 in 93ms
 GET /api/socket-health 200 in 43ms
 GET /socket.io?EIO=4&transport=polling&t=1ow2tjes 404 in 186ms
 GET /api/socket-health 200 in 36ms
 GET /socket.io?EIO=4&transport=polling&t=1owubb47 404 in 126ms
 GET /api/socket-health 200 in 49ms
 GET /socket.io?EIO=4&transport=polling&t=1oxmewc9 404 in 176ms
 GET /api/socket-health 200 in 45ms
 GET /socket.io?EIO=4&transport=polling&t=1oye459p 404 in 184ms
 GET /api/socket-health 200 in 25ms
 GET /socket.io?EIO=4&transport=polling&t=1oz51aqa 404 in 91ms
 GET /api/socket-health 200 in 25ms
 GET /socket.io?EIO=4&transport=polling&t=1ozwvnry 404 in 124ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
=== FRIEND REQUEST GET START ===
 GET /api/socket-health 200 in 72ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
Request type: received User: sayantan2@gmail.com
âœ… Database connected
âœ… Current user found: {
  id: new ObjectId('6901f85f42c5d010fa811206'),
  email: 'sayantan2@gmail.com',
  friendRequestsCount: 0,
  sentRequestsCount: 1
}
Processing received requests...
Raw friendRequests: []
Processed receivedRequests: []
Populating sender details...
Final populated requests: []
=== FRIEND REQUEST GET END (received) ===
 GET /api/friends/request?type=received 200 in 173ms
=== FRIEND REQUEST GET START ===
 GET /api/friends 200 in 218ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
Request type: sent User: sayantan2@gmail.com
âœ… Database connected
 GET /socket.io?EIO=4&transport=polling&t=1p0q9vq1 404 in 149ms
âœ… Current user found: {
  id: new ObjectId('6901f85f42c5d010fa811206'),
  email: 'sayantan2@gmail.com',
  friendRequestsCount: 0,
  sentRequestsCount: 1
}
Processing sent requests...
Raw sentRequests: [
  {
    from: new ObjectId('6901f85f42c5d010fa811206'),
    fromName: 'sayantan2',
    to: new ObjectId('6905adf16a22b7843b006183'),
    toName: 'sayantan3',
    status: 'pending',
    _id: new ObjectId('6905cdce14ad0d0f020b3985'),
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
Filtering sent request: { status: 'pending', to: new ObjectId('6905adf16a22b7843b006183') }
Mapping sent request: {
  from: new ObjectId('6901f85f42c5d010fa811206'),
  fromName: 'sayantan2',
  to: new ObjectId('6905adf16a22b7843b006183'),
  toName: 'sayantan3',
  status: 'pending',
  _id: new ObjectId('6905cdce14ad0d0f020b3985'),
  createdAt: 2025-11-01T09:07:26.707Z,
  updatedAt: 2025-11-01T09:07:26.707Z
}
Processed sentRequests: [
  {
    id: '6905cdce14ad0d0f020b3985',
    to: {
      id: '6905adf16a22b7843b006183',
      username: 'sayantan3',
      email: '',
      profilePicture: null
    },
    status: 'pending',
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
Populating recipient details...
Looking up recipient: 6905adf16a22b7843b006183
Found recipient: sayantan3
Final populated sent requests: [
  {
    id: '6905cdce14ad0d0f020b3985',
    to: {
      id: '6905adf16a22b7843b006183',
      username: 'sayantan3',
      email: 'sayantan3@gmail.com',
      profilePicture: undefined
    },
    status: 'pending',
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
=== FRIEND REQUEST GET END (sent) ===
 GET /api/friends/request?type=sent 200 in 127ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
 GET /api/socket-health 200 in 41ms
 GET /socket.io?EIO=4&transport=polling&t=1p1gusqu 404 in 101ms
 POST /api/users/heartbeat 200 in 225ms
 GET /api/socket-health 200 in 41ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
 GET /socket.io?EIO=4&transport=polling&t=1p28v483 404 in 121ms
 GET /api/conversations 200 in 200ms
 GET /api/socket-health 200 in 26ms
 GET /socket.io?EIO=4&transport=polling&t=1p301vml 404 in 101ms
 GET /api/socket-health 200 in 48ms
 GET /socket.io?EIO=4&transport=polling&t=1p3sc2u9 404 in 166ms
 GET /api/socket-health 200 in 38ms
 GET /socket.io?EIO=4&transport=polling&t=1p4jwtsn 404 in 122ms
 GET /api/socket-health 200 in 25ms
 GET /socket.io?EIO=4&transport=polling&t=1p5bcsul 404 in 139ms
 GET /api/socket-health 200 in 24ms
 GET /socket.io?EIO=4&transport=polling&t=1p6340yp 404 in 98ms
 GET /api/socket-health 200 in 28ms
 GET /socket.io?EIO=4&transport=polling&t=1p6v0t0c 404 in 101ms
 GET /api/socket-health 200 in 26ms
 GET /socket.io?EIO=4&transport=polling&t=1p7mmpej 404 in 93ms
 GET /api/socket-health 200 in 21ms
 GET /socket.io?EIO=4&transport=polling&t=1p8e85nx 404 in 94ms
 GET /api/socket-health 200 in 24ms
 GET /socket.io?EIO=4&transport=polling&t=1p963usi 404 in 93ms
 GET /api/socket-health 200 in 22ms
 GET /socket.io?EIO=4&transport=polling&t=1p9y61mp 404 in 101ms
 GET /api/socket-health 200 in 34ms
 GET /socket.io?EIO=4&transport=polling&t=1paq9s9p 404 in 96ms
 GET /api/socket-health 200 in 24ms
 GET /socket.io?EIO=4&transport=polling&t=1pbhrctt 404 in 110ms
 GET /api/socket-health 200 in 26ms
 GET /socket.io?EIO=4&transport=polling&t=1pc9jayu 404 in 100ms
 GET /api/socket-health 200 in 38ms
 GET /socket.io?EIO=4&transport=polling&t=1pd1no2v 404 in 106ms
 GET /api/socket-health 200 in 32ms
 GET /socket.io?EIO=4&transport=polling&t=1pdt93mr 404 in 100ms
 GET /api/socket-health 200 in 24ms
 GET /socket.io?EIO=4&transport=polling&t=1pekkfsz 404 in 97ms
 GET /api/socket-health 200 in 23ms
 GET /socket.io?EIO=4&transport=polling&t=1pfcbzdv 404 in 95ms
 GET /api/socket-health 200 in 34ms
 GET /socket.io?EIO=4&transport=polling&t=1pg4kmdi 404 in 135ms
 GET /api/socket-health 200 in 40ms
 GET /socket.io?EIO=4&transport=polling&t=1pgwz8ik 404 in 152ms
 GET /api/socket-health 200 in 49ms
 GET /socket.io?EIO=4&transport=polling&t=1phona11 404 in 123ms
 GET /api/socket-health 200 in 29ms
 GET /socket.io?EIO=4&transport=polling&t=1pifzotu 404 in 102ms
 GET /api/socket-health 200 in 27ms
 GET /socket.io?EIO=4&transport=polling&t=1pj7oq64 404 in 102ms
 GET /api/socket-health 200 in 58ms
 GET /socket.io?EIO=4&transport=polling&t=1pk0f6ab 404 in 115ms
 GET /api/socket-health 200 in 79ms
 GET /socket.io?EIO=4&transport=polling&t=1pksrclk 404 in 94ms
 GET /api/socket-health 200 in 29ms
 GET /socket.io?EIO=4&transport=polling&t=1pliyls6 404 in 103ms
 GET /api/socket-health 200 in 24ms
 GET /socket.io?EIO=4&transport=polling&t=1pmajekw 404 in 95ms
 GET /api/socket-health 200 in 68ms
 GET /socket.io?EIO=4&transport=polling&t=1pn3p03r 404 in 194ms
 GET /api/socket-health 200 in 23ms
 GET /socket.io?EIO=4&transport=polling&t=1pnu3sl2 404 in 96ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
=== FRIEND REQUEST GET START ===
 GET /api/socket-health 200 in 56ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
Request type: received User: sayantan2@gmail.com
âœ… Database connected
 GET /socket.io?EIO=4&transport=polling&t=1pon4h65 404 in 102ms
 POST /api/users/heartbeat 200 in 256ms
âœ… Current user found: {
  id: new ObjectId('6901f85f42c5d010fa811206'),
  email: 'sayantan2@gmail.com',
  friendRequestsCount: 0,
  sentRequestsCount: 1
}
Processing received requests...
Raw friendRequests: []
Processed receivedRequests: []
Populating sender details...
Final populated requests: []
=== FRIEND REQUEST GET END (received) ===
 GET /api/friends/request?type=received 200 in 466ms
=== FRIEND REQUEST GET START ===
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
Request type: sent User: sayantan2@gmail.com
âœ… Database connected
âœ… Current user found: {
  id: new ObjectId('6901f85f42c5d010fa811206'),
  email: 'sayantan2@gmail.com',
  friendRequestsCount: 0,
  sentRequestsCount: 1
}
Processing sent requests...
Raw sentRequests: [
  {
    from: new ObjectId('6901f85f42c5d010fa811206'),
    fromName: 'sayantan2',
    to: new ObjectId('6905adf16a22b7843b006183'),
    toName: 'sayantan3',
    status: 'pending',
    _id: new ObjectId('6905cdce14ad0d0f020b3985'),
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
Filtering sent request: { status: 'pending', to: new ObjectId('6905adf16a22b7843b006183') }
Mapping sent request: {
  from: new ObjectId('6901f85f42c5d010fa811206'),
  fromName: 'sayantan2',
  to: new ObjectId('6905adf16a22b7843b006183'),
  toName: 'sayantan3',
  status: 'pending',
  _id: new ObjectId('6905cdce14ad0d0f020b3985'),
  createdAt: 2025-11-01T09:07:26.707Z,
  updatedAt: 2025-11-01T09:07:26.707Z
}
Processed sentRequests: [
  {
    id: '6905cdce14ad0d0f020b3985',
    to: {
      id: '6905adf16a22b7843b006183',
      username: 'sayantan3',
      email: '',
      profilePicture: null
    },
    status: 'pending',
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
Populating recipient details...
Looking up recipient: 6905adf16a22b7843b006183
Found recipient: sayantan3
Final populated sent requests: [
  {
    id: '6905cdce14ad0d0f020b3985',
    to: {
      id: '6905adf16a22b7843b006183',
      username: 'sayantan3',
      email: 'sayantan3@gmail.com',
      profilePicture: undefined
    },
    status: 'pending',
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
=== FRIEND REQUEST GET END (sent) ===
 GET /api/friends/request?type=sent 200 in 131ms
 GET /api/socket-health 200 in 24ms
 GET /socket.io?EIO=4&transport=polling&t=1ppdoe2m 404 in 93ms
 GET /api/socket-health 200 in 57ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
 GET /socket.io?EIO=4&transport=polling&t=1pq6eyu0 404 in 111ms
 GET /api/conversations 200 in 201ms
 GET /api/socket-health 200 in 24ms
 GET /socket.io?EIO=4&transport=polling&t=1pqx2v03 404 in 102ms
 GET /api/socket-health 200 in 31ms
 GET /socket.io?EIO=4&transport=polling&t=1prp243i 404 in 102ms
 GET /api/socket-health 200 in 22ms
 GET /socket.io?EIO=4&transport=polling&t=1psgm8ae 404 in 88ms
 GET /api/socket-health 200 in 24ms
 GET /socket.io?EIO=4&transport=polling&t=1pt8dhdc 404 in 96ms
 GET /api/socket-health 200 in 28ms
 GET /socket.io?EIO=4&transport=polling&t=1pu0l81u 404 in 92ms
 GET /api/socket-health 200 in 52ms
 GET /socket.io?EIO=4&transport=polling&t=1put4dbr 404 in 131ms
 GET /api/socket-health 200 in 23ms
 GET /socket.io?EIO=4&transport=polling&t=1pvjy0s2 404 in 99ms
 GET /api/socket-health 200 in 24ms
 GET /socket.io?EIO=4&transport=polling&t=1pwbqvx4 404 in 97ms
 GET /api/socket-health 200 in 29ms
 GET /socket.io?EIO=4&transport=polling&t=1px3nhhf 404 in 98ms
 GET /api/socket-health 200 in 52ms
 GET /socket.io?EIO=4&transport=polling&t=1pxw1rb2 404 in 127ms
 GET /api/socket-health 200 in 22ms
 GET /socket.io?EIO=4&transport=polling&t=1pymt0xz 404 in 92ms
 GET /api/socket-health 200 in 55ms
 GET /socket.io?EIO=4&transport=polling&t=1pzfmyk3 404 in 129ms
 GET /api/socket-health 200 in 45ms
 GET /socket.io?EIO=4&transport=polling&t=1q073t4z 404 in 178ms
 GET /api/socket-health 200 in 30ms
 GET /socket.io?EIO=4&transport=polling&t=1q0yd23o 404 in 136ms
 GET /api/socket-health 200 in 23ms
 GET /socket.io?EIO=4&transport=polling&t=1q1puvzz 404 in 95ms
 GET /api/socket-health 200 in 28ms
 GET /socket.io?EIO=4&transport=polling&t=1q2i56f2 404 in 157ms
 GET /api/socket-health 200 in 24ms
 GET /socket.io?EIO=4&transport=polling&t=1q39qs3e 404 in 98ms
 GET /api/socket-health 200 in 31ms
 GET /socket.io?EIO=4&transport=polling&t=1q41osa6 404 in 109ms
 GET /api/socket-health 200 in 36ms
 GET /socket.io?EIO=4&transport=polling&t=1q4tohyf 404 in 116ms
 GET /api/socket-health 200 in 44ms
 GET /socket.io?EIO=4&transport=polling&t=1q5lsc4x 404 in 144ms
 GET /api/socket-health 200 in 26ms
 GET /socket.io?EIO=4&transport=polling&t=1q6cvpb3 404 in 102ms
 GET /api/socket-health 200 in 25ms
 GET /socket.io?EIO=4&transport=polling&t=1q74lf60 404 in 104ms
 GET /api/socket-health 200 in 38ms
 GET /socket.io?EIO=4&transport=polling&t=1q7wot10 404 in 104ms
 GET /api/socket-health 200 in 26ms
 GET /socket.io?EIO=4&transport=polling&t=1q8o50mb 404 in 117ms
 GET /api/socket-health 200 in 29ms
 GET /socket.io?EIO=4&transport=polling&t=1q9g8t6c 404 in 105ms
 GET /api/socket-health 200 in 25ms
 GET /socket.io?EIO=4&transport=polling&t=1qa7x39n 404 in 103ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
=== FRIEND REQUEST GET START ===
 GET /api/socket-health 200 in 107ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
Request type: received User: sayantan2@gmail.com
âœ… Database connected
âœ… Current user found: {
  id: new ObjectId('6901f85f42c5d010fa811206'),
  email: 'sayantan2@gmail.com',
  friendRequestsCount: 0,
  sentRequestsCount: 1
}
Processing received requests...
Raw friendRequests: []
Processed receivedRequests: []
Populating sender details...
Final populated requests: []
=== FRIEND REQUEST GET END (received) ===
 GET /api/friends/request?type=received 200 in 250ms
 GET /api/friends 200 in 299ms
=== FRIEND REQUEST GET START ===
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
Request type: sent User: sayantan2@gmail.com
âœ… Database connected
 GET /socket.io?EIO=4&transport=polling&t=1qb2fim4 404 in 201ms
âœ… Current user found: {
  id: new ObjectId('6901f85f42c5d010fa811206'),
  email: 'sayantan2@gmail.com',
  friendRequestsCount: 0,
  sentRequestsCount: 1
}
Processing sent requests...
Raw sentRequests: [
  {
    from: new ObjectId('6901f85f42c5d010fa811206'),
    fromName: 'sayantan2',
    to: new ObjectId('6905adf16a22b7843b006183'),
    toName: 'sayantan3',
    status: 'pending',
    _id: new ObjectId('6905cdce14ad0d0f020b3985'),
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
Filtering sent request: { status: 'pending', to: new ObjectId('6905adf16a22b7843b006183') }
Mapping sent request: {
  from: new ObjectId('6901f85f42c5d010fa811206'),
  fromName: 'sayantan2',
  to: new ObjectId('6905adf16a22b7843b006183'),
  toName: 'sayantan3',
  status: 'pending',
  _id: new ObjectId('6905cdce14ad0d0f020b3985'),
  createdAt: 2025-11-01T09:07:26.707Z,
  updatedAt: 2025-11-01T09:07:26.707Z
}
Processed sentRequests: [
  {
    id: '6905cdce14ad0d0f020b3985',
    to: {
      id: '6905adf16a22b7843b006183',
      username: 'sayantan3',
      email: '',
      profilePicture: null
    },
    status: 'pending',
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
Populating recipient details...
Looking up recipient: 6905adf16a22b7843b006183
Found recipient: sayantan3
Final populated sent requests: [
  {
    id: '6905cdce14ad0d0f020b3985',
    to: {
      id: '6905adf16a22b7843b006183',
      username: 'sayantan3',
      email: 'sayantan3@gmail.com',
      profilePicture: undefined
    },
    status: 'pending',
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
=== FRIEND REQUEST GET END (sent) ===
 GET /api/friends/request?type=sent 200 in 142ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
 GET /api/socket-health 200 in 49ms
 GET /socket.io?EIO=4&transport=polling&t=1qbrx17b 404 in 97ms
 POST /api/users/heartbeat 200 in 236ms
 GET /api/socket-health 200 in 22ms
 GET /socket.io?EIO=4&transport=polling&t=1qciqh28 404 in 99ms
 GET /api/socket-health 200 in 42ms
 GET /socket.io?EIO=4&transport=polling&t=1qdb7qz7 404 in 99ms
 GET /api/socket-health 200 in 55ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
 GET /socket.io?EIO=4&transport=polling&t=1qe38jps 404 in 111ms
 GET /api/conversations 200 in 204ms
 GET /api/socket-health 200 in 23ms
 GET /socket.io?EIO=4&transport=polling&t=1qeu70io 404 in 94ms
 GET /api/socket-health 200 in 31ms
 GET /socket.io?EIO=4&transport=polling&t=1qfm4jfp 404 in 95ms
 GET /api/socket-health 200 in 27ms
 GET /socket.io?EIO=4&transport=polling&t=1qgdyyip 404 in 107ms
 GET /api/socket-health 200 in 31ms
 GET /socket.io?EIO=4&transport=polling&t=1qh5xhz8 404 in 104ms
 GET /api/socket-health 200 in 39ms
 GET /socket.io?EIO=4&transport=polling&t=1qhy7ncd 404 in 138ms
 GET /api/socket-health 200 in 26ms
 GET /socket.io?EIO=4&transport=polling&t=1qipd4wt 404 in 99ms
 GET /api/socket-health 200 in 45ms
 GET /socket.io?EIO=4&transport=polling&t=1qjhpql5 404 in 124ms
 GET /api/socket-health 200 in 25ms
 GET /socket.io?EIO=4&transport=polling&t=1qk8y8ac 404 in 107ms
 GET /api/socket-health 200 in 27ms
 GET /socket.io?EIO=4&transport=polling&t=1ql0rabp 404 in 98ms
 GET /api/socket-health 200 in 23ms
 GET /socket.io?EIO=4&transport=polling&t=1qlsb5go 404 in 100ms
 GET /api/socket-health 200 in 32ms
 GET /socket.io?EIO=4&transport=polling&t=1qmk92t1 404 in 88ms
 GET /api/socket-health 200 in 28ms
 GET /socket.io?EIO=4&transport=polling&t=1qnbwy0m 404 in 96ms
 GET /api/socket-health 200 in 34ms
 GET /socket.io?EIO=4&transport=polling&t=1qo3w6tf 404 in 114ms
 GET /api/socket-health 200 in 53ms
 GET /socket.io?EIO=4&transport=polling&t=1qowk10x 404 in 140ms
 GET /api/socket-health 200 in 50ms
 GET /socket.io?EIO=4&transport=polling&t=1qpo4qg8 404 in 123ms
 GET /api/socket-health 200 in 24ms
 GET /socket.io?EIO=4&transport=polling&t=1qqerbjs 404 in 97ms
 GET /api/socket-health 200 in 26ms
 GET /socket.io?EIO=4&transport=polling&t=1qr6yr80 404 in 100ms
 GET /api/socket-health 200 in 23ms
 GET /socket.io?EIO=4&transport=polling&t=1qrykr3h 404 in 98ms
 GET /api/socket-health 200 in 145ms
 GET /api/socket-health 200 in 425ms
 GET /socket.io?EIO=4&transport=polling&t=1qt56xez 404 in 572ms
 GET /socket.io?EIO=4&transport=polling&t=1qth4r14 404 in 187ms
 GET /api/socket-health 200 in 26ms
 GET /api/socket-health 200 in 129ms
 GET /socket.io?EIO=4&transport=polling&t=1qv1t64c 404 in 263ms
 GET /socket.io?EIO=4&transport=polling&t=1qv5ivvt 404 in 144ms
 GET /api/socket-health 200 in 39ms
 GET /api/socket-health 200 in 30ms
 GET /socket.io?EIO=4&transport=polling&t=1qwlm5wd 404 in 280ms
 GET /socket.io?EIO=4&transport=polling&t=1qwminim 404 in 136ms
 GET /api/socket-health 200 in 29ms
 GET /api/socket-health 200 in 129ms
 GET /socket.io?EIO=4&transport=polling&t=1qy4snbc 404 in 233ms
 GET /socket.io?EIO=4&transport=polling&t=1qy8fhnd 404 in 119ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
=== FRIEND REQUEST GET START ===
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
Request type: received User: sayantan2@gmail.com
âœ… Database connected
 POST /api/users/heartbeat 200 in 248ms
âœ… Current user found: {
  id: new ObjectId('6901f85f42c5d010fa811206'),
  email: 'sayantan2@gmail.com',
  friendRequestsCount: 0,
  sentRequestsCount: 1
}
Processing received requests...
Raw friendRequests: []
Processed receivedRequests: []
Populating sender details...
Final populated requests: []
=== FRIEND REQUEST GET END (received) ===
 GET /api/friends/request?type=received 200 in 500ms
=== FRIEND REQUEST GET START ===
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
Request type: sent User: sayantan2@gmail.com
âœ… Database connected
âœ… Current user found: {
  id: new ObjectId('6901f85f42c5d010fa811206'),
  email: 'sayantan2@gmail.com',
  friendRequestsCount: 0,
  sentRequestsCount: 1
}
Processing sent requests...
Raw sentRequests: [
  {
    from: new ObjectId('6901f85f42c5d010fa811206'),
    fromName: 'sayantan2',
    to: new ObjectId('6905adf16a22b7843b006183'),
    toName: 'sayantan3',
    status: 'pending',
    _id: new ObjectId('6905cdce14ad0d0f020b3985'),
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
Filtering sent request: { status: 'pending', to: new ObjectId('6905adf16a22b7843b006183') }
Mapping sent request: {
  from: new ObjectId('6901f85f42c5d010fa811206'),
  fromName: 'sayantan2',
  to: new ObjectId('6905adf16a22b7843b006183'),
  toName: 'sayantan3',
  status: 'pending',
  _id: new ObjectId('6905cdce14ad0d0f020b3985'),
  createdAt: 2025-11-01T09:07:26.707Z,
  updatedAt: 2025-11-01T09:07:26.707Z
}
Processed sentRequests: [
  {
    id: '6905cdce14ad0d0f020b3985',
    to: {
      id: '6905adf16a22b7843b006183',
      username: 'sayantan3',
      email: '',
      profilePicture: null
    },
    status: 'pending',
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
Populating recipient details...
Looking up recipient: 6905adf16a22b7843b006183
Found recipient: sayantan3
Final populated sent requests: [
  {
    id: '6905cdce14ad0d0f020b3985',
    to: {
      id: '6905adf16a22b7843b006183',
      username: 'sayantan3',
      email: 'sayantan3@gmail.com',
      profilePicture: undefined
    },
    status: 'pending',
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
=== FRIEND REQUEST GET END (sent) ===
 GET /api/friends/request?type=sent 200 in 136ms
 GET /api/socket-health 200 in 25ms
 GET /api/socket-health 200 in 110ms
 GET /socket.io?EIO=4&transport=polling&t=1qzobgmm 404 in 206ms
 GET /socket.io?EIO=4&transport=polling&t=1qzrfw4s 404 in 109ms
 GET /api/socket-health 200 in 24ms
 GET /api/socket-health 200 in 26ms
 GET /socket.io?EIO=4&transport=polling&t=1r17r1zm 404 in 218ms
 GET /socket.io?EIO=4&transport=polling&t=1r18jyfo 404 in 111ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
 GET /api/conversations 200 in 128ms
 GET /api/socket-health 200 in 32ms
 GET /api/socket-health 200 in 111ms
 GET /socket.io?EIO=4&transport=polling&t=1r2rucjk 404 in 205ms
 GET /socket.io?EIO=4&transport=polling&t=1r2uz50y 404 in 104ms
 GET /api/socket-health 200 in 25ms
 GET /api/socket-health 200 in 109ms
 GET /socket.io?EIO=4&transport=polling&t=1r4b4cvb 404 in 200ms
 GET /socket.io?EIO=4&transport=polling&t=1r4e722b 404 in 98ms
 GET /api/socket-health 200 in 30ms
 GET /api/socket-health 200 in 27ms
 GET /socket.io?EIO=4&transport=polling&t=1r5up5kr 404 in 206ms
 GET /socket.io?EIO=4&transport=polling&t=1r5vjjy2 404 in 108ms
 GET /api/socket-health 200 in 26ms
 GET /api/socket-health 200 in 124ms
 GET /socket.io?EIO=4&transport=polling&t=1r7e0wuh 404 in 278ms
 GET /socket.io?EIO=4&transport=polling&t=1r7hihpg 404 in 154ms
 GET /api/socket-health 200 in 24ms
 GET /api/socket-health 200 in 25ms
 GET /socket.io?EIO=4&transport=polling&t=1r8xsoil 404 in 271ms
 GET /socket.io?EIO=4&transport=polling&t=1r8yi881 404 in 158ms
 GET /api/socket-health 200 in 29ms
 GET /api/socket-health 200 in 25ms
 GET /socket.io?EIO=4&transport=polling&t=1rah7bnr 404 in 207ms
 GET /socket.io?EIO=4&transport=polling&t=1rahxvag 404 in 107ms
 GET /api/socket-health 200 in 27ms
 GET /api/socket-health 200 in 31ms
 GET /socket.io?EIO=4&transport=polling&t=1rc0ohcq 404 in 217ms
 GET /socket.io?EIO=4&transport=polling&t=1rc1lw6j 404 in 114ms
 GET /api/socket-health 200 in 24ms
 GET /api/socket-health 200 in 106ms
 GET /socket.io?EIO=4&transport=polling&t=1rdkami2 404 in 196ms
 GET /socket.io?EIO=4&transport=polling&t=1rdnazab 404 in 102ms
 GET /api/socket-health 200 in 23ms
 GET /api/socket-health 200 in 33ms
 GET /socket.io?EIO=4&transport=polling&t=1rf40f62 404 in 224ms
 GET /socket.io?EIO=4&transport=polling&t=1rf4zl4n 404 in 110ms
 GET /api/socket-health 200 in 26ms
 GET /api/socket-health 200 in 24ms
 GET /socket.io?EIO=4&transport=polling&t=1rgnhrwf 404 in 203ms
 GET /socket.io?EIO=4&transport=polling&t=1rgo7m19 404 in 104ms
 GET /api/socket-health 200 in 31ms
 GET /api/socket-health 200 in 117ms
 GET /socket.io?EIO=4&transport=polling&t=1ri75lbu 404 in 210ms
 GET /socket.io?EIO=4&transport=polling&t=1riagojh 404 in 106ms
 GET /api/socket-health 200 in 24ms
 GET /api/socket-health 200 in 27ms
 GET /socket.io?EIO=4&transport=polling&t=1rjqebaq 404 in 205ms
 GET /socket.io?EIO=4&transport=polling&t=1rjr7eqk 404 in 106ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
=== FRIEND REQUEST GET START ===
 GET /api/socket-health 200 in 71ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
Request type: received User: sayantan2@gmail.com
âœ… Database connected
âœ… Current user found: {
  id: new ObjectId('6901f85f42c5d010fa811206'),
  email: 'sayantan2@gmail.com',
  friendRequestsCount: 0,
  sentRequestsCount: 1
}
Processing received requests...
Raw friendRequests: []
Processed receivedRequests: []
Populating sender details...
Final populated requests: []
=== FRIEND REQUEST GET END (received) ===
 GET /api/friends/request?type=received 200 in 184ms
 GET /api/friends 200 in 189ms
 GET /api/socket-health 200 in 123ms
=== FRIEND REQUEST GET START ===
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
Request type: sent User: sayantan2@gmail.com
âœ… Database connected
 GET /socket.io?EIO=4&transport=polling&t=1rlblmpx 404 in 246ms
 GET /socket.io?EIO=4&transport=polling&t=1rlf6go2 404 in 128ms
âœ… Current user found: {
  id: new ObjectId('6901f85f42c5d010fa811206'),
  email: 'sayantan2@gmail.com',
  friendRequestsCount: 0,
  sentRequestsCount: 1
}
Processing sent requests...
Raw sentRequests: [
  {
    from: new ObjectId('6901f85f42c5d010fa811206'),
    fromName: 'sayantan2',
    to: new ObjectId('6905adf16a22b7843b006183'),
    toName: 'sayantan3',
    status: 'pending',
    _id: new ObjectId('6905cdce14ad0d0f020b3985'),
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
Filtering sent request: { status: 'pending', to: new ObjectId('6905adf16a22b7843b006183') }
Mapping sent request: {
  from: new ObjectId('6901f85f42c5d010fa811206'),
  fromName: 'sayantan2',
  to: new ObjectId('6905adf16a22b7843b006183'),
  toName: 'sayantan3',
  status: 'pending',
  _id: new ObjectId('6905cdce14ad0d0f020b3985'),
  createdAt: 2025-11-01T09:07:26.707Z,
  updatedAt: 2025-11-01T09:07:26.707Z
}
Processed sentRequests: [
  {
    id: '6905cdce14ad0d0f020b3985',
    to: {
      id: '6905adf16a22b7843b006183',
      username: 'sayantan3',
      email: '',
      profilePicture: null
    },
    status: 'pending',
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
Populating recipient details...
Looking up recipient: 6905adf16a22b7843b006183
Found recipient: sayantan3
Final populated sent requests: [
  {
    id: '6905cdce14ad0d0f020b3985',
    to: {
      id: '6905adf16a22b7843b006183',
      username: 'sayantan3',
      email: 'sayantan3@gmail.com',
      profilePicture: undefined
    },
    status: 'pending',
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
=== FRIEND REQUEST GET END (sent) ===
 GET /api/friends/request?type=sent 200 in 203ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
 POST /api/users/heartbeat 200 in 173ms
 GET /api/socket-health 200 in 24ms
 GET /api/socket-health 200 in 119ms
 GET /socket.io?EIO=4&transport=polling&t=1rmtn8ty 404 in 191ms
 GET /socket.io?EIO=4&transport=polling&t=1rmx0cep 404 in 94ms
 GET /api/socket-health 200 in 27ms
 GET /api/socket-health 200 in 134ms
 GET /socket.io?EIO=4&transport=polling&t=1rodbwdo 404 in 229ms
 GET /socket.io?EIO=4&transport=polling&t=1roh3oiy 404 in 107ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
 GET /api/socket-health 200 in 56ms
 GET /api/socket-health 200 in 124ms
 GET /api/conversations 200 in 275ms
 GET /socket.io?EIO=4&transport=polling&t=1rpxorpp 404 in 217ms
 GET /socket.io?EIO=4&transport=polling&t=1rq15g7p 404 in 105ms
 GET /api/socket-health 200 in 27ms
 GET /api/socket-health 200 in 121ms
 GET /socket.io?EIO=4&transport=polling&t=1rrg81l5 404 in 214ms
 GET /socket.io?EIO=4&transport=polling&t=1rrjmdpa 404 in 101ms
 GET /api/socket-health 200 in 28ms
 GET /api/socket-health 200 in 121ms
 GET /socket.io?EIO=4&transport=polling&t=1rszv3iz 404 in 222ms
 GET /socket.io?EIO=4&transport=polling&t=1rt3a2vd 404 in 102ms
 GET /api/socket-health 200 in 29ms
 GET /api/socket-health 200 in 26ms
 GET /socket.io?EIO=4&transport=polling&t=1rujikx9 404 in 199ms
 GET /socket.io?EIO=4&transport=polling&t=1ruka3mg 404 in 108ms
 GET /api/socket-health 200 in 23ms
 GET /api/socket-health 200 in 31ms
 GET /socket.io?EIO=4&transport=polling&t=1rw2qtax 404 in 308ms
 GET /socket.io?EIO=4&transport=polling&t=1rw3nh39 404 in 205ms
 GET /api/socket-health 200 in 24ms
 GET /api/socket-health 200 in 26ms
 GET /socket.io?EIO=4&transport=polling&t=1rxmo0na 404 in 215ms
 GET /socket.io?EIO=4&transport=polling&t=1rxng0pj 404 in 109ms
 GET /api/socket-health 200 in 30ms
 GET /api/socket-health 200 in 50ms
 GET /socket.io?EIO=4&transport=polling&t=1rz62t6i 404 in 297ms
 GET /socket.io?EIO=4&transport=polling&t=1rz7l9qy 404 in 182ms
 GET /api/socket-health 200 in 35ms
 GET /api/socket-health 200 in 143ms
 GET /socket.io?EIO=4&transport=polling&t=1s0q3tcu 404 in 245ms
 GET /socket.io?EIO=4&transport=polling&t=1s0u4zpd 404 in 115ms
 GET /api/socket-health 200 in 27ms
 GET /api/socket-health 200 in 129ms
 GET /socket.io?EIO=4&transport=polling&t=1s292otx 404 in 224ms
 GET /socket.io?EIO=4&transport=polling&t=1s2cqhiz 404 in 117ms
 GET /api/socket-health 200 in 43ms
 GET /api/socket-health 200 in 46ms
 GET /socket.io?EIO=4&transport=polling&t=1s3ti6jp 404 in 278ms
 GET /socket.io?EIO=4&transport=polling&t=1s3v0zsw 404 in 142ms
 GET /api/socket-health 200 in 32ms
 GET /api/socket-health 200 in 135ms
 GET /socket.io?EIO=4&transport=polling&t=1s5cekcy 404 in 230ms
 GET /socket.io?EIO=4&transport=polling&t=1s5g7qk3 404 in 116ms
 GET /api/socket-health 200 in 24ms
 GET /api/socket-health 200 in 116ms
 GET /socket.io?EIO=4&transport=polling&t=1s6vw1yc 404 in 205ms
 GET /socket.io?EIO=4&transport=polling&t=1s6z6ga5 404 in 103ms
 GET /api/socket-health 200 in 30ms
 GET /api/socket-health 200 in 128ms
 GET /socket.io?EIO=4&transport=polling&t=1s8fpyhn 404 in 215ms
 GET /socket.io?EIO=4&transport=polling&t=1s8ja1t7 404 in 116ms
=== FRIEND REQUEST GET START ===
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
Request type: received User: sayantan2@gmail.com
âœ… Database connected
âœ… Current user found: {
  id: new ObjectId('6901f85f42c5d010fa811206'),
  email: 'sayantan2@gmail.com',
  friendRequestsCount: 0,
  sentRequestsCount: 1
}
Processing received requests...
Raw friendRequests: []
Processed receivedRequests: []
Populating sender details...
Final populated requests: []
=== FRIEND REQUEST GET END (received) ===
 GET /api/friends/request?type=received 200 in 103ms
=== FRIEND REQUEST GET START ===
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
Request type: sent User: sayantan2@gmail.com
âœ… Database connected
âœ… Current user found: {
  id: new ObjectId('6901f85f42c5d010fa811206'),
  email: 'sayantan2@gmail.com',
  friendRequestsCount: 0,
  sentRequestsCount: 1
}
Processing sent requests...
Raw sentRequests: [
  {
    from: new ObjectId('6901f85f42c5d010fa811206'),
    fromName: 'sayantan2',
    to: new ObjectId('6905adf16a22b7843b006183'),
    toName: 'sayantan3',
    status: 'pending',
    _id: new ObjectId('6905cdce14ad0d0f020b3985'),
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
Filtering sent request: { status: 'pending', to: new ObjectId('6905adf16a22b7843b006183') }
Mapping sent request: {
  from: new ObjectId('6901f85f42c5d010fa811206'),
  fromName: 'sayantan2',
  to: new ObjectId('6905adf16a22b7843b006183'),
  toName: 'sayantan3',
  status: 'pending',
  _id: new ObjectId('6905cdce14ad0d0f020b3985'),
  createdAt: 2025-11-01T09:07:26.707Z,
  updatedAt: 2025-11-01T09:07:26.707Z
}
Processed sentRequests: [
  {
    id: '6905cdce14ad0d0f020b3985',
    to: {
      id: '6905adf16a22b7843b006183',
      username: 'sayantan3',
      email: '',
      profilePicture: null
    },
    status: 'pending',
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
Populating recipient details...
Looking up recipient: 6905adf16a22b7843b006183
Found recipient: sayantan3
Final populated sent requests: [
  {
    id: '6905cdce14ad0d0f020b3985',
    to: {
      id: '6905adf16a22b7843b006183',
      username: 'sayantan3',
      email: 'sayantan3@gmail.com',
      profilePicture: undefined
    },
    status: 'pending',
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
=== FRIEND REQUEST GET END (sent) ===
 GET /api/friends/request?type=sent 200 in 146ms
 GET /api/socket-health 200 in 32ms
 GET /api/socket-health 200 in 118ms
 GET /socket.io?EIO=4&transport=polling&t=1s9z48w7 404 in 224ms
 GET /socket.io?EIO=4&transport=polling&t=1sa2gu2d 404 in 117ms
 GET /api/socket-health 200 in 26ms
 GET /api/socket-health 200 in 116ms
 GET /socket.io?EIO=4&transport=polling&t=1sbijbsp 404 in 215ms
 GET /socket.io?EIO=4&transport=polling&t=1sblt5ti 404 in 106ms
 GET /api/socket-health 200 in 63ms
 GET /api/socket-health 200 in 44ms
 GET /socket.io?EIO=4&transport=polling&t=1sd3ec5k 404 in 327ms
 GET /socket.io?EIO=4&transport=polling&t=1sd4u9tk 404 in 105ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
 GET /api/conversations 200 in 147ms
 GET /api/socket-health 200 in 29ms
 GET /api/socket-health 200 in 122ms
 GET /socket.io?EIO=4&transport=polling&t=1selvaw9 404 in 269ms
 GET /socket.io?EIO=4&transport=polling&t=1sepbrmj 404 in 157ms
 GET /api/socket-health 200 in 23ms
 GET /api/socket-health 200 in 110ms
 GET /socket.io?EIO=4&transport=polling&t=1sg560w3 404 in 201ms
 GET /socket.io?EIO=4&transport=polling&t=1sg8agj6 404 in 101ms
 GET /api/socket-health 200 in 25ms
 GET /api/socket-health 200 in 125ms
 GET /socket.io?EIO=4&transport=polling&t=1shopnzz 404 in 214ms
 GET /socket.io?EIO=4&transport=polling&t=1shs81lc 404 in 98ms
 GET /api/socket-health 200 in 53ms
 GET /api/socket-health 200 in 134ms
 GET /socket.io?EIO=4&transport=polling&t=1sj97jn4 404 in 232ms
 GET /socket.io?EIO=4&transport=polling&t=1sjcz88s 404 in 114ms
 GET /api/socket-health 200 in 48ms
 GET /api/socket-health 200 in 72ms
 GET /socket.io?EIO=4&transport=polling&t=1skshn3e 404 in 326ms
 GET /socket.io?EIO=4&transport=polling&t=1skujeo5 404 in 145ms
 GET /api/socket-health 200 in 34ms
 GET /api/socket-health 200 in 28ms
 GET /socket.io?EIO=4&transport=polling&t=1smblc68 404 in 220ms
 GET /socket.io?EIO=4&transport=polling&t=1smcekog 404 in 115ms
 GET /api/socket-health 200 in 52ms
 GET /api/socket-health 200 in 117ms
 GET /socket.io?EIO=4&transport=polling&t=1snvwcdv 404 in 208ms
 GET /socket.io?EIO=4&transport=polling&t=1snz7yfc 404 in 97ms
 GET /api/socket-health 200 in 24ms
 GET /api/socket-health 200 in 24ms
 GET /socket.io?EIO=4&transport=polling&t=1speh91r 404 in 197ms
 GET /socket.io?EIO=4&transport=polling&t=1spf7un7 404 in 96ms
 GET /api/socket-health 200 in 26ms
 GET /api/socket-health 200 in 35ms
 GET /socket.io?EIO=4&transport=polling&t=1sqy1bdj 404 in 202ms
 GET /socket.io?EIO=4&transport=polling&t=1sqz1agn 404 in 101ms
 GET /api/socket-health 200 in 26ms
 GET /api/socket-health 200 in 25ms
 GET /socket.io?EIO=4&transport=polling&t=1sshg5nr 404 in 192ms
 GET /socket.io?EIO=4&transport=polling&t=1ssi7amn 404 in 107ms
 GET /api/socket-health 200 in 32ms
 GET /api/socket-health 200 in 124ms
 GET /socket.io?EIO=4&transport=polling&t=1su1684h 404 in 280ms
 GET /socket.io?EIO=4&transport=polling&t=1su4nrx3 404 in 164ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
=== FRIEND REQUEST GET START ===
 GET /api/socket-health 200 in 137ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
Request type: received User: sayantan2@gmail.com
âœ… Database connected
 GET /api/socket-health 200 in 157ms
 POST /api/users/heartbeat 200 in 461ms
 GET /socket.io?EIO=4&transport=polling&t=1svosa3q 404 in 306ms
 GET /socket.io?EIO=4&transport=polling&t=1svtjovj 404 in 174ms
âœ… Current user found: {
  id: new ObjectId('6901f85f42c5d010fa811206'),
  email: 'sayantan2@gmail.com',
  friendRequestsCount: 0,
  sentRequestsCount: 1
}
Processing received requests...
Raw friendRequests: []
Processed receivedRequests: []
Populating sender details...
Final populated requests: []
=== FRIEND REQUEST GET END (received) ===
 GET /api/friends/request?type=received 200 in 735ms
=== FRIEND REQUEST GET START ===
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
Request type: sent User: sayantan2@gmail.com
âœ… Database connected
 GET /api/friends 200 in 818ms
âœ… Current user found: {
  id: new ObjectId('6901f85f42c5d010fa811206'),
  email: 'sayantan2@gmail.com',
  friendRequestsCount: 0,
  sentRequestsCount: 1
}
Processing sent requests...
Raw sentRequests: [
  {
    from: new ObjectId('6901f85f42c5d010fa811206'),
    fromName: 'sayantan2',
    to: new ObjectId('6905adf16a22b7843b006183'),
    toName: 'sayantan3',
    status: 'pending',
    _id: new ObjectId('6905cdce14ad0d0f020b3985'),
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
Filtering sent request: { status: 'pending', to: new ObjectId('6905adf16a22b7843b006183') }
Mapping sent request: {
  from: new ObjectId('6901f85f42c5d010fa811206'),
  fromName: 'sayantan2',
  to: new ObjectId('6905adf16a22b7843b006183'),
  toName: 'sayantan3',
  status: 'pending',
  _id: new ObjectId('6905cdce14ad0d0f020b3985'),
  createdAt: 2025-11-01T09:07:26.707Z,
  updatedAt: 2025-11-01T09:07:26.707Z
}
Processed sentRequests: [
  {
    id: '6905cdce14ad0d0f020b3985',
    to: {
      id: '6905adf16a22b7843b006183',
      username: 'sayantan3',
      email: '',
      profilePicture: null
    },
    status: 'pending',
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
Populating recipient details...
Looking up recipient: 6905adf16a22b7843b006183
Found recipient: sayantan3
Final populated sent requests: [
  {
    id: '6905cdce14ad0d0f020b3985',
    to: {
      id: '6905adf16a22b7843b006183',
      username: 'sayantan3',
      email: 'sayantan3@gmail.com',
      profilePicture: undefined
    },
    status: 'pending',
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
=== FRIEND REQUEST GET END (sent) ===
 GET /api/friends/request?type=sent 200 in 146ms
 GET /api/socket-health 200 in 41ms
 GET /api/socket-health 200 in 128ms
 GET /socket.io?EIO=4&transport=polling&t=1sx4r23t 404 in 224ms
 GET /socket.io?EIO=4&transport=polling&t=1sx8dvqi 404 in 111ms
 GET /api/socket-health 200 in 25ms
 GET /api/socket-health 200 in 33ms
 GET /socket.io?EIO=4&transport=polling&t=1synq5mu 404 in 203ms
 GET /socket.io?EIO=4&transport=polling&t=1syoovoj 404 in 102ms
 GET /api/socket-health 200 in 31ms
 GET /api/socket-health 200 in 114ms
 GET /socket.io?EIO=4&transport=polling&t=1t07jwr1 404 in 200ms
 GET /socket.io?EIO=4&transport=polling&t=1t0aq6ky 404 in 98ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
 GET /api/socket-health 200 in 50ms
 GET /api/conversations 200 in 163ms
 GET /api/socket-health 200 in 121ms
 GET /socket.io?EIO=4&transport=polling&t=1t1ruiaa 404 in 209ms
 GET /socket.io?EIO=4&transport=polling&t=1t1vaq2n 404 in 104ms
 GET /api/socket-health 200 in 51ms
 GET /api/socket-health 200 in 202ms
 GET /socket.io?EIO=4&transport=polling&t=1t3blr6f 404 in 336ms
 GET /socket.io?EIO=4&transport=polling&t=1t3habm4 404 in 149ms
 GET /api/socket-health 200 in 55ms
 GET /api/socket-health 200 in 186ms
 GET /socket.io?EIO=4&transport=polling&t=1t4v56k0 404 in 322ms
 GET /socket.io?EIO=4&transport=polling&t=1t50dlvq 404 in 169ms
 GET /api/socket-health 200 in 31ms
 GET /api/socket-health 200 in 39ms
 GET /socket.io?EIO=4&transport=polling&t=1t6ec78c 404 in 248ms
 GET /socket.io?EIO=4&transport=polling&t=1t6fgf89 404 in 141ms
 GET /api/socket-health 200 in 33ms
 GET /api/socket-health 200 in 27ms
 GET /socket.io?EIO=4&transport=polling&t=1t7xbd93 404 in 214ms
 GET /socket.io?EIO=4&transport=polling&t=1t7y50sl 404 in 111ms
 GET /api/socket-health 200 in 30ms
 GET /api/socket-health 200 in 170ms
 GET /socket.io?EIO=4&transport=polling&t=1t9h2b82 404 in 309ms
 GET /socket.io?EIO=4&transport=polling&t=1t9lxnh0 404 in 154ms
 GET /api/socket-health 200 in 30ms
 GET /api/socket-health 200 in 114ms
 GET /socket.io?EIO=4&transport=polling&t=1tb0ctiw 404 in 208ms
 GET /socket.io?EIO=4&transport=polling&t=1tb3l202 404 in 105ms
 GET /api/socket-health 200 in 31ms
 GET /api/socket-health 200 in 159ms
 GET /socket.io?EIO=4&transport=polling&t=1tcjveqz 404 in 285ms
 GET /socket.io?EIO=4&transport=polling&t=1tcocmcq 404 in 135ms
 GET /api/socket-health 200 in 32ms
 GET /api/socket-health 200 in 136ms
 GET /socket.io?EIO=4&transport=polling&t=1te3l9ih 404 in 257ms
 GET /socket.io?EIO=4&transport=polling&t=1te7e005 404 in 137ms
 GET /api/socket-health 200 in 36ms
 GET /api/socket-health 200 in 155ms
 GET /socket.io?EIO=4&transport=polling&t=1tfnkdmc 404 in 235ms
 GET /socket.io?EIO=4&transport=polling&t=1tfrx14k 404 in 113ms
 GET /api/socket-health 200 in 34ms
 GET /api/socket-health 200 in 147ms
 GET /socket.io?EIO=4&transport=polling&t=1th6rndx 404 in 249ms
 GET /socket.io?EIO=4&transport=polling&t=1thaw2b2 404 in 115ms
 GET /api/socket-health 200 in 24ms
 GET /api/socket-health 200 in 33ms
 GET /socket.io?EIO=4&transport=polling&t=1tipydbh 404 in 199ms
 GET /socket.io?EIO=4&transport=polling&t=1tiqx1nj 404 in 103ms
=== FRIEND REQUEST GET START ===
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
Request type: received User: sayantan2@gmail.com
âœ… Database connected
âœ… Current user found: {
  id: new ObjectId('6901f85f42c5d010fa811206'),
  email: 'sayantan2@gmail.com',
  friendRequestsCount: 0,
  sentRequestsCount: 1
}
Processing received requests...
Raw friendRequests: []
Processed receivedRequests: []
Populating sender details...
Final populated requests: []
=== FRIEND REQUEST GET END (received) ===
 GET /api/friends/request?type=received 200 in 87ms
=== FRIEND REQUEST GET START ===
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
Request type: sent User: sayantan2@gmail.com
âœ… Database connected
âœ… Current user found: {
  id: new ObjectId('6901f85f42c5d010fa811206'),
  email: 'sayantan2@gmail.com',
  friendRequestsCount: 0,
  sentRequestsCount: 1
}
Processing sent requests...
Raw sentRequests: [
  {
    from: new ObjectId('6901f85f42c5d010fa811206'),
    fromName: 'sayantan2',
    to: new ObjectId('6905adf16a22b7843b006183'),
    toName: 'sayantan3',
    status: 'pending',
    _id: new ObjectId('6905cdce14ad0d0f020b3985'),
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
Filtering sent request: { status: 'pending', to: new ObjectId('6905adf16a22b7843b006183') }
Mapping sent request: {
  from: new ObjectId('6901f85f42c5d010fa811206'),
  fromName: 'sayantan2',
  to: new ObjectId('6905adf16a22b7843b006183'),
  toName: 'sayantan3',
  status: 'pending',
  _id: new ObjectId('6905cdce14ad0d0f020b3985'),
  createdAt: 2025-11-01T09:07:26.707Z,
  updatedAt: 2025-11-01T09:07:26.707Z
}
Processed sentRequests: [
  {
    id: '6905cdce14ad0d0f020b3985',
    to: {
      id: '6905adf16a22b7843b006183',
      username: 'sayantan3',
      email: '',
      profilePicture: null
    },
    status: 'pending',
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
Populating recipient details...
Looking up recipient: 6905adf16a22b7843b006183
Found recipient: sayantan3
Final populated sent requests: [
  {
    id: '6905cdce14ad0d0f020b3985',
    to: {
      id: '6905adf16a22b7843b006183',
      username: 'sayantan3',
      email: 'sayantan3@gmail.com',
      profilePicture: undefined
    },
    status: 'pending',
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
=== FRIEND REQUEST GET END (sent) ===
 GET /api/friends/request?type=sent 200 in 129ms
 GET /api/socket-health 200 in 25ms
 GET /api/socket-health 200 in 121ms
 GET /socket.io?EIO=4&transport=polling&t=1tk9vyzw 404 in 252ms
 GET /socket.io?EIO=4&transport=polling&t=1tkd9cqe 404 in 155ms
 GET /api/socket-health 200 in 37ms
 GET /api/socket-health 200 in 142ms
 GET /socket.io?EIO=4&transport=polling&t=1tlttnbv 404 in 244ms
 GET /socket.io?EIO=4&transport=polling&t=1tlxtlga 404 in 122ms
 GET /api/socket-health 200 in 24ms
 GET /api/socket-health 200 in 115ms
 GET /socket.io?EIO=4&transport=polling&t=1tncwz0g 404 in 205ms
 GET /socket.io?EIO=4&transport=polling&t=1tng40j0 404 in 95ms
 GET /api/socket-health 200 in 31ms
 GET /api/socket-health 200 in 126ms
 GET /socket.io?EIO=4&transport=polling&t=1towi1fw 404 in 246ms
 GET /socket.io?EIO=4&transport=polling&t=1tp01az3 404 in 126ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
 GET /api/conversations 200 in 139ms
 GET /api/socket-health 200 in 36ms
 GET /api/socket-health 200 in 144ms
 GET /socket.io?EIO=4&transport=polling&t=1tqg1fw3 404 in 316ms
 GET /socket.io?EIO=4&transport=polling&t=1tqk6uxf 404 in 169ms
 GET /api/socket-health 200 in 52ms
 GET /api/socket-health 200 in 47ms
 GET /socket.io?EIO=4&transport=polling&t=1ts0jg2c 404 in 230ms
 GET /socket.io?EIO=4&transport=polling&t=1ts1unrx 404 in 118ms
 GET /api/socket-health 200 in 36ms
 GET /api/socket-health 200 in 202ms
 GET /socket.io?EIO=4&transport=polling&t=1ttjcnvr 404 in 332ms
 GET /socket.io?EIO=4&transport=polling&t=1ttp0ysk 404 in 115ms
 GET /api/socket-health 200 in 27ms
 GET /api/socket-health 200 in 116ms
 GET /socket.io?EIO=4&transport=polling&t=1tv2pefi 404 in 210ms
 GET /socket.io?EIO=4&transport=polling&t=1tv5y4n7 404 in 100ms
 GET /api/socket-health 200 in 36ms
 GET /api/socket-health 200 in 112ms
 GET /socket.io?EIO=4&transport=polling&t=1twmkja4 404 in 202ms
 GET /socket.io?EIO=4&transport=polling&t=1twpqkgh 404 in 102ms
 GET /api/socket-health 200 in 44ms
 GET /api/socket-health 200 in 130ms
 GET /socket.io?EIO=4&transport=polling&t=1ty64jxu 404 in 279ms
 GET /socket.io?EIO=4&transport=polling&t=1ty9xvsc 404 in 164ms
 GET /api/socket-health 200 in 56ms
 GET /api/socket-health 200 in 55ms
 GET /socket.io?EIO=4&transport=polling&t=1tzq6xm7 404 in 279ms
 GET /socket.io?EIO=4&transport=polling&t=1tzrsnix 404 in 139ms
 GET /api/socket-health 200 in 48ms
 GET /api/socket-health 200 in 154ms
 GET /socket.io?EIO=4&transport=polling&t=1u19ekn9 404 in 251ms
 GET /socket.io?EIO=4&transport=polling&t=1u1dpupn 404 in 117ms
 GET /api/socket-health 200 in 36ms
 GET /api/socket-health 200 in 148ms
 GET /socket.io?EIO=4&transport=polling&t=1u2sk5fp 404 in 310ms
 GET /socket.io?EIO=4&transport=polling&t=1u2wpyfg 404 in 177ms
 GET /api/socket-health 200 in 42ms
 GET /api/socket-health 200 in 123ms
 GET /socket.io?EIO=4&transport=polling&t=1u4cdlde 404 in 211ms
 GET /socket.io?EIO=4&transport=polling&t=1u4fwyyy 404 in 108ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
 GET /api/auth/session 200 in 157ms
=== FRIEND REQUEST GET START ===
 GET /api/socket-health 200 in 175ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
Request type: received User: sayantan2@gmail.com
âœ… Database connected
 GET /api/friends 200 in 303ms
 GET /api/socket-health 200 in 111ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
 GET /socket.io?EIO=4&transport=polling&t=1u60x52r 404 in 175ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
 GET /api/random-chat/queue 200 in 398ms
 POST /api/users/heartbeat 200 in 437ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
 GET /api/friends 200 in 259ms
âœ… Current user found: {
  id: new ObjectId('6901f85f42c5d010fa811206'),
  email: 'sayantan2@gmail.com',
  friendRequestsCount: 0,
  sentRequestsCount: 1
}
Processing received requests...
Raw friendRequests: []
Processed receivedRequests: []
Populating sender details...
Final populated requests: []
=== FRIEND REQUEST GET END (received) ===
 GET /api/friends/request?type=received 200 in 773ms
 POST /api/users/heartbeat 200 in 817ms
=== FRIEND REQUEST GET START ===
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
Request type: received User: sayantan2@gmail.com
âœ… Database connected
=== FRIEND REQUEST GET START ===
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
Request type: sent User: sayantan2@gmail.com
âœ… Database connected
âœ… Current user found: {
  id: new ObjectId('6901f85f42c5d010fa811206'),
  email: 'sayantan2@gmail.com',
  friendRequestsCount: 0,
  sentRequestsCount: 1
}
Processing received requests...
Raw friendRequests: []
Processed receivedRequests: []
Populating sender details...
Final populated requests: []
=== FRIEND REQUEST GET END (received) ===
 GET /api/friends/request?type=received 200 in 142ms
 GET /socket.io?EIO=4&transport=polling&t=1u6498ak 404 in 262ms
âœ… Current user found: {
  id: new ObjectId('6901f85f42c5d010fa811206'),
  email: 'sayantan2@gmail.com',
  friendRequestsCount: 0,
  sentRequestsCount: 1
}
Processing sent requests...
Raw sentRequests: [
  {
    from: new ObjectId('6901f85f42c5d010fa811206'),
    fromName: 'sayantan2',
    to: new ObjectId('6905adf16a22b7843b006183'),
    toName: 'sayantan3',
    status: 'pending',
    _id: new ObjectId('6905cdce14ad0d0f020b3985'),
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
Filtering sent request: { status: 'pending', to: new ObjectId('6905adf16a22b7843b006183') }
Mapping sent request: {
  from: new ObjectId('6901f85f42c5d010fa811206'),
  fromName: 'sayantan2',
  to: new ObjectId('6905adf16a22b7843b006183'),
  toName: 'sayantan3',
  status: 'pending',
  _id: new ObjectId('6905cdce14ad0d0f020b3985'),
  createdAt: 2025-11-01T09:07:26.707Z,
  updatedAt: 2025-11-01T09:07:26.707Z
}
Processed sentRequests: [
  {
    id: '6905cdce14ad0d0f020b3985',
    to: {
      id: '6905adf16a22b7843b006183',
      username: 'sayantan3',
      email: '',
      profilePicture: null
    },
    status: 'pending',
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
Populating recipient details...
Looking up recipient: 6905adf16a22b7843b006183
Found recipient: sayantan3
Final populated sent requests: [
  {
    id: '6905cdce14ad0d0f020b3985',
    to: {
      id: '6905adf16a22b7843b006183',
      username: 'sayantan3',
      email: 'sayantan3@gmail.com',
      profilePicture: undefined
    },
    status: 'pending',
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
=== FRIEND REQUEST GET END (sent) ===
 GET /api/friends/request?type=sent 200 in 242ms
 GET /api/users/me 200 in 719ms
=== FRIEND REQUEST GET START ===
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
Request type: sent User: sayantan2@gmail.com
âœ… Database connected
âœ… Current user found: {
  id: new ObjectId('6901f85f42c5d010fa811206'),
  email: 'sayantan2@gmail.com',
  friendRequestsCount: 0,
  sentRequestsCount: 1
}
Processing sent requests...
Raw sentRequests: [
  {
    from: new ObjectId('6901f85f42c5d010fa811206'),
    fromName: 'sayantan2',
    to: new ObjectId('6905adf16a22b7843b006183'),
    toName: 'sayantan3',
    status: 'pending',
    _id: new ObjectId('6905cdce14ad0d0f020b3985'),
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
Filtering sent request: { status: 'pending', to: new ObjectId('6905adf16a22b7843b006183') }
Mapping sent request: {
  from: new ObjectId('6901f85f42c5d010fa811206'),
  fromName: 'sayantan2',
  to: new ObjectId('6905adf16a22b7843b006183'),
  toName: 'sayantan3',
  status: 'pending',
  _id: new ObjectId('6905cdce14ad0d0f020b3985'),
  createdAt: 2025-11-01T09:07:26.707Z,
  updatedAt: 2025-11-01T09:07:26.707Z
}
Processed sentRequests: [
  {
    id: '6905cdce14ad0d0f020b3985',
    to: {
      id: '6905adf16a22b7843b006183',
      username: 'sayantan3',
      email: '',
      profilePicture: null
    },
    status: 'pending',
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
Populating recipient details...
Looking up recipient: 6905adf16a22b7843b006183
 GET /api/random-chat/session 200 in 523ms
Found recipient: sayantan3
Final populated sent requests: [
  {
    id: '6905cdce14ad0d0f020b3985',
    to: {
      id: '6905adf16a22b7843b006183',
      username: 'sayantan3',
      email: 'sayantan3@gmail.com',
      profilePicture: undefined
    },
    status: 'pending',
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
=== FRIEND REQUEST GET END (sent) ===
 GET /api/friends/request?type=sent 200 in 137ms
 GET /api/socket-health 200 in 44ms
 GET /api/socket-health 200 in 153ms
 GET /socket.io?EIO=4&transport=polling&t=1u7fmacn 404 in 262ms
 GET /socket.io?EIO=4&transport=polling&t=1u7jyj44 404 in 131ms
 GET /api/socket-health 200 in 32ms
 GET /api/socket-health 200 in 167ms
 GET /socket.io?EIO=4&transport=polling&t=1u8yqmlr 404 in 308ms
 GET /socket.io?EIO=4&transport=polling&t=1u93h624 404 in 158ms
 GET /api/socket-health 200 in 23ms
 GET /api/socket-health 200 in 109ms
 GET /socket.io?EIO=4&transport=polling&t=1uahy6ki 404 in 195ms
 GET /socket.io?EIO=4&transport=polling&t=1ual0xge 404 in 98ms
 GET /api/socket-health 200 in 39ms
 GET /api/socket-health 200 in 172ms
 GET /socket.io?EIO=4&transport=polling&t=1uc27tmx 404 in 273ms
 GET /socket.io?EIO=4&transport=polling&t=1uc71io5 404 in 126ms
 GET /api/socket-health 200 in 35ms
 GET /api/socket-health 200 in 141ms
 GET /socket.io?EIO=4&transport=polling&t=1udlhcg5 404 in 257ms
 GET /socket.io?EIO=4&transport=polling&t=1udpjh5l 404 in 125ms
 GET /api/socket-health 200 in 23ms
 GET /api/socket-health 200 in 111ms
 GET /socket.io?EIO=4&transport=polling&t=1uf4q7ue 404 in 212ms
 GET /socket.io?EIO=4&transport=polling&t=1uf7vnxi 404 in 111ms
 GET /api/socket-health 200 in 30ms
 GET /api/socket-health 200 in 119ms
 GET /socket.io?EIO=4&transport=polling&t=1ugobg93 404 in 212ms
 GET /socket.io?EIO=4&transport=polling&t=1ugrowl3 404 in 106ms
 GET /api/socket-health 200 in 25ms
 GET /api/socket-health 200 in 118ms
 GET /socket.io?EIO=4&transport=polling&t=1ui7opk5 404 in 206ms
 GET /socket.io?EIO=4&transport=polling&t=1uib0txe 404 in 103ms
 GET /api/socket-health 200 in 27ms
 GET /api/socket-health 200 in 113ms
 GET /socket.io?EIO=4&transport=polling&t=1ujri7nj 404 in 208ms
 GET /socket.io?EIO=4&transport=polling&t=1ujuprdf 404 in 105ms
 GET /api/socket-health 200 in 25ms
 GET /api/socket-health 200 in 34ms
 GET /socket.io?EIO=4&transport=polling&t=1ulaxx5t 404 in 214ms
 GET /socket.io?EIO=4&transport=polling&t=1ulbxxoo 404 in 110ms
 GET /api/socket-health 200 in 38ms
 GET /api/socket-health 200 in 100ms
 GET /socket.io?EIO=4&transport=polling&t=1umuz369 404 in 231ms
 GET /socket.io?EIO=4&transport=polling&t=1umxtetk 404 in 148ms
 GET /api/socket-health 200 in 30ms
 GET /api/socket-health 200 in 115ms
 GET /socket.io?EIO=4&transport=polling&t=1uoef0u1 404 in 250ms
 GET /socket.io?EIO=4&transport=polling&t=1uohpxh1 404 in 148ms
 GET /api/socket-health 200 in 32ms
 GET /api/socket-health 200 in 33ms
 GET /socket.io?EIO=4&transport=polling&t=1upxolzv 404 in 245ms
 GET /socket.io?EIO=4&transport=polling&t=1upynai0 404 in 130ms
 GET /api/socket-health 200 in 23ms
 GET /api/socket-health 200 in 32ms
 GET /socket.io?EIO=4&transport=polling&t=1urh83mn 404 in 227ms
 GET /socket.io?EIO=4&transport=polling&t=1uri6qit 404 in 121ms
 GET /api/socket-health 200 in 26ms
 GET /api/socket-health 200 in 121ms
 GET /socket.io?EIO=4&transport=polling&t=1ut0vras 404 in 222ms
 GET /socket.io?EIO=4&transport=polling&t=1ut4b6vs 404 in 111ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
 POST /api/users/heartbeat 200 in 172ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
=== FRIEND REQUEST GET START ===
 GET /api/socket-health 200 in 92ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
Request type: received User: sayantan2@gmail.com
âœ… Database connected
 GET /api/conversations 200 in 234ms
 GET /api/socket-health 200 in 152ms
 GET /socket.io?EIO=4&transport=polling&t=1uum7jmj 404 in 240ms
 GET /socket.io?EIO=4&transport=polling&t=1uuqos5r 404 in 119ms
âœ… Current user found: {
  id: new ObjectId('6901f85f42c5d010fa811206'),
  email: 'sayantan2@gmail.com',
  friendRequestsCount: 0,
  sentRequestsCount: 1
}
Processing received requests...
Raw friendRequests: []
Processed receivedRequests: []
Populating sender details...
Final populated requests: []
=== FRIEND REQUEST GET END (received) ===
 GET /api/friends/request?type=received 200 in 553ms
=== FRIEND REQUEST GET START ===
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
Request type: sent User: sayantan2@gmail.com
âœ… Database connected
âœ… Current user found: {
  id: new ObjectId('6901f85f42c5d010fa811206'),
  email: 'sayantan2@gmail.com',
  friendRequestsCount: 0,
  sentRequestsCount: 1
}
Processing sent requests...
Raw sentRequests: [
  {
    from: new ObjectId('6901f85f42c5d010fa811206'),
    fromName: 'sayantan2',
    to: new ObjectId('6905adf16a22b7843b006183'),
    toName: 'sayantan3',
    status: 'pending',
    _id: new ObjectId('6905cdce14ad0d0f020b3985'),
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
Filtering sent request: { status: 'pending', to: new ObjectId('6905adf16a22b7843b006183') }
Mapping sent request: {
  from: new ObjectId('6901f85f42c5d010fa811206'),
  fromName: 'sayantan2',
  to: new ObjectId('6905adf16a22b7843b006183'),
  toName: 'sayantan3',
  status: 'pending',
  _id: new ObjectId('6905cdce14ad0d0f020b3985'),
  createdAt: 2025-11-01T09:07:26.707Z,
  updatedAt: 2025-11-01T09:07:26.707Z
}
Processed sentRequests: [
  {
    id: '6905cdce14ad0d0f020b3985',
    to: {
      id: '6905adf16a22b7843b006183',
      username: 'sayantan3',
      email: '',
      profilePicture: null
    },
    status: 'pending',
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
Populating recipient details...
Looking up recipient: 6905adf16a22b7843b006183
Found recipient: sayantan3
Final populated sent requests: [
  {
    id: '6905cdce14ad0d0f020b3985',
    to: {
      id: '6905adf16a22b7843b006183',
      username: 'sayantan3',
      email: 'sayantan3@gmail.com',
      profilePicture: undefined
    },
    status: 'pending',
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
=== FRIEND REQUEST GET END (sent) ===
 GET /api/friends/request?type=sent 200 in 138ms
 GET /api/socket-health 200 in 31ms
 GET /api/socket-health 200 in 113ms
 GET /socket.io?EIO=4&transport=polling&t=1uw46hig 404 in 208ms
 GET /socket.io?EIO=4&transport=polling&t=1uw7dawg 404 in 107ms
 GET /api/socket-health 200 in 29ms
 GET /api/socket-health 200 in 136ms
 GET /socket.io?EIO=4&transport=polling&t=1uxnniqv 404 in 228ms
 GET /socket.io?EIO=4&transport=polling&t=1uxrh9w3 404 in 109ms
 GET /api/socket-health 200 in 24ms
 GET /api/socket-health 200 in 30ms
 GET /socket.io?EIO=4&transport=polling&t=1uz6vqru 404 in 212ms
 GET /socket.io?EIO=4&transport=polling&t=1uz7rcj6 404 in 107ms
 GET /api/socket-health 200 in 26ms
 GET /api/socket-health 200 in 47ms
 GET /socket.io?EIO=4&transport=polling&t=1v0qujfz 404 in 222ms
 GET /socket.io?EIO=4&transport=polling&t=1v0s7d6b 404 in 106ms
 GET /api/socket-health 200 in 50ms
 GET /api/socket-health 200 in 41ms
 GET /socket.io?EIO=4&transport=polling&t=1v2as1n1 404 in 214ms
 GET /socket.io?EIO=4&transport=polling&t=1v2byart 404 in 105ms
 GET /api/socket-health 200 in 25ms
 GET /api/socket-health 200 in 114ms
 GET /socket.io?EIO=4&transport=polling&t=1v3tuhsl 404 in 211ms
 GET /socket.io?EIO=4&transport=polling&t=1v3x224m 404 in 102ms
 GET /api/socket-health 200 in 43ms
 GET /api/socket-health 200 in 147ms
 GET /socket.io?EIO=4&transport=polling&t=1v5dtuot 404 in 254ms
 GET /socket.io?EIO=4&transport=polling&t=1v5hxvtn 404 in 124ms
 GET /api/socket-health 200 in 32ms
 GET /api/socket-health 200 in 136ms
 GET /socket.io?EIO=4&transport=polling&t=1v6x12lc 404 in 238ms
 GET /socket.io?EIO=4&transport=polling&t=1v70vcnp 404 in 119ms
 GET /api/socket-health 200 in 26ms
 GET /api/socket-health 200 in 125ms
 GET /socket.io?EIO=4&transport=polling&t=1v8gbh5n 404 in 227ms
 GET /socket.io?EIO=4&transport=polling&t=1v8jv4fh 404 in 119ms
 GET /api/socket-health 200 in 30ms
 GET /api/socket-health 200 in 122ms
 GET /socket.io?EIO=4&transport=polling&t=1v9zwgnw 404 in 221ms
 GET /socket.io?EIO=4&transport=polling&t=1va3bwy0 404 in 111ms
 GET /api/socket-health 200 in 23ms
 GET /api/socket-health 200 in 31ms
 GET /socket.io?EIO=4&transport=polling&t=1vbjbazm 404 in 201ms
 GET /socket.io?EIO=4&transport=polling&t=1vbk7poz 404 in 107ms
 GET /api/socket-health 200 in 33ms
 GET /api/socket-health 200 in 34ms
 GET /socket.io?EIO=4&transport=polling&t=1vd37rsk 404 in 326ms
 GET /socket.io?EIO=4&transport=polling&t=1vd47688 404 in 158ms
 GET /api/socket-health 200 in 30ms
 GET /api/socket-health 200 in 118ms
 GET /socket.io?EIO=4&transport=polling&t=1vemove8 404 in 213ms
 GET /socket.io?EIO=4&transport=polling&t=1veq2dhj 404 in 106ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
=== FRIEND REQUEST GET START ===
 GET /api/socket-health 200 in 104ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
Request type: received User: sayantan2@gmail.com
âœ… Database connected
âœ… Current user found: {
  id: new ObjectId('6901f85f42c5d010fa811206'),
  email: 'sayantan2@gmail.com',
  friendRequestsCount: 0,
  sentRequestsCount: 1
}
Processing received requests...
Raw friendRequests: []
Processed receivedRequests: []
Populating sender details...
Final populated requests: []
=== FRIEND REQUEST GET END (received) ===
 GET /api/friends/request?type=received 200 in 233ms
 GET /api/friends 200 in 243ms
 GET /api/socket-health 200 in 138ms
=== FRIEND REQUEST GET START ===
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
Request type: sent User: sayantan2@gmail.com
âœ… Database connected
 GET /socket.io?EIO=4&transport=polling&t=1vg8w9qf 404 in 252ms
 GET /socket.io?EIO=4&transport=polling&t=1vgcx5hv 404 in 119ms
âœ… Current user found: {
  id: new ObjectId('6901f85f42c5d010fa811206'),
  email: 'sayantan2@gmail.com',
  friendRequestsCount: 0,
  sentRequestsCount: 1
}
Processing sent requests...
Raw sentRequests: [
  {
    from: new ObjectId('6901f85f42c5d010fa811206'),
    fromName: 'sayantan2',
    to: new ObjectId('6905adf16a22b7843b006183'),
    toName: 'sayantan3',
    status: 'pending',
    _id: new ObjectId('6905cdce14ad0d0f020b3985'),
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
Filtering sent request: { status: 'pending', to: new ObjectId('6905adf16a22b7843b006183') }
Mapping sent request: {
  from: new ObjectId('6901f85f42c5d010fa811206'),
  fromName: 'sayantan2',
  to: new ObjectId('6905adf16a22b7843b006183'),
  toName: 'sayantan3',
  status: 'pending',
  _id: new ObjectId('6905cdce14ad0d0f020b3985'),
  createdAt: 2025-11-01T09:07:26.707Z,
  updatedAt: 2025-11-01T09:07:26.707Z
}
Processed sentRequests: [
  {
    id: '6905cdce14ad0d0f020b3985',
    to: {
      id: '6905adf16a22b7843b006183',
      username: 'sayantan3',
      email: '',
      profilePicture: null
    },
    status: 'pending',
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
Populating recipient details...
Looking up recipient: 6905adf16a22b7843b006183
Found recipient: sayantan3
Final populated sent requests: [
  {
    id: '6905cdce14ad0d0f020b3985',
    to: {
      id: '6905adf16a22b7843b006183',
      username: 'sayantan3',
      email: 'sayantan3@gmail.com',
      profilePicture: undefined
    },
    status: 'pending',
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
=== FRIEND REQUEST GET END (sent) ===
 GET /api/friends/request?type=sent 200 in 202ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
 POST /api/users/heartbeat 200 in 170ms
 GET /api/socket-health 200 in 45ms
 GET /api/socket-health 200 in 66ms
 GET /socket.io?EIO=4&transport=polling&t=1vhqe8dd 404 in 320ms
 GET /socket.io?EIO=4&transport=polling&t=1vhs75ai 404 in 158ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
 GET /api/conversations 200 in 110ms
 GET /api/socket-health 200 in 34ms
 GET /api/socket-health 200 in 29ms
 GET /socket.io?EIO=4&transport=polling&t=1vj9fj05 404 in 210ms
 GET /socket.io?EIO=4&transport=polling&t=1vja9o37 404 in 102ms
 GET /api/socket-health 200 in 26ms
 GET /api/socket-health 200 in 37ms
 GET /socket.io?EIO=4&transport=polling&t=1vksnzzb 404 in 285ms
 GET /socket.io?EIO=4&transport=polling&t=1vktqse3 404 in 153ms
 GET /api/socket-health 200 in 28ms
 GET /api/socket-health 200 in 123ms
 GET /socket.io?EIO=4&transport=polling&t=1vmcm3sl 404 in 215ms
 GET /socket.io?EIO=4&transport=polling&t=1vmg2fdv 404 in 106ms
 GET /api/socket-health 200 in 58ms
 GET /api/socket-health 200 in 168ms
 GET /socket.io?EIO=4&transport=polling&t=1vnx4v2x 404 in 316ms
 GET /socket.io?EIO=4&transport=polling&t=1vo1u6il 404 in 170ms
 GET /api/socket-health 200 in 96ms
 GET /api/socket-health 200 in 231ms
 GET /socket.io?EIO=4&transport=polling&t=1vpp60nb 404 in 409ms
 GET /socket.io?EIO=4&transport=polling&t=1vpvvsen 404 in 207ms
 GET /api/socket-health 200 in 127ms
 GET /api/socket-health 200 in 771ms
 GET /socket.io?EIO=4&transport=polling&t=1vr2l9if 404 in 1688ms
 GET /socket.io?EIO=4&transport=polling&t=1vro2pqi 404 in 998ms
 GET /api/socket-health 200 in 39ms
 GET /api/socket-health 200 in 141ms
 GET /socket.io?EIO=4&transport=polling&t=1vtbz6jf 404 in 280ms
 GET /socket.io?EIO=4&transport=polling&t=1vtfzd7w 404 in 153ms
 GET /api/socket-health 200 in 36ms
 GET /api/socket-health 200 in 435ms
 GET /socket.io?EIO=4&transport=polling&t=1vuua1hj 404 in 1267ms
 GET /socket.io?EIO=4&transport=polling&t=1vv6htja 404 in 820ms
 GET /api/socket-health 200 in 32ms
 GET /api/socket-health 200 in 36ms
 GET /socket.io?EIO=4&transport=polling&t=1vx5lwzg 404 in 218ms
 GET /socket.io?EIO=4&transport=polling&t=1vx6nd2l 404 in 113ms
 GET /api/socket-health 200 in 37ms
 GET /api/socket-health 200 in 45ms
 GET /socket.io?EIO=4&transport=polling&t=1vyp7i1p 404 in 245ms
 GET /socket.io?EIO=4&transport=polling&t=1vyqjlm0 404 in 129ms
 GET /api/socket-health 200 in 43ms
 GET /api/socket-health 200 in 25ms
 GET /socket.io?EIO=4&transport=polling&t=1w09rcr1 404 in 259ms
 GET /socket.io?EIO=4&transport=polling&t=1w08zael 404 in 263ms
 GET /api/socket-health 200 in 25ms
 GET /api/socket-health 200 in 183ms
 GET /socket.io?EIO=4&transport=polling&t=1w1rz4cv 404 in 335ms
 GET /socket.io?EIO=4&transport=polling&t=1w1x4huv 404 in 168ms
 GET /api/socket-health 200 in 49ms
 GET /api/socket-health 200 in 242ms
 GET /socket.io?EIO=4&transport=polling&t=1w3eafvm 404 in 229ms
 GET /socket.io?EIO=4&transport=polling&t=1w3l2be1 404 in 121ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
=== FRIEND REQUEST GET START ===
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
Request type: received User: sayantan2@gmail.com
âœ… Database connected
 POST /api/users/heartbeat 200 in 268ms
âœ… Current user found: {
  id: new ObjectId('6901f85f42c5d010fa811206'),
  email: 'sayantan2@gmail.com',
  friendRequestsCount: 0,
  sentRequestsCount: 1
}
Processing received requests...
Raw friendRequests: []
Processed receivedRequests: []
Populating sender details...
Final populated requests: []
=== FRIEND REQUEST GET END (received) ===
 GET /api/friends/request?type=received 200 in 500ms
=== FRIEND REQUEST GET START ===
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
Request type: sent User: sayantan2@gmail.com
âœ… Database connected
âœ… Current user found: {
  id: new ObjectId('6901f85f42c5d010fa811206'),
  email: 'sayantan2@gmail.com',
  friendRequestsCount: 0,
  sentRequestsCount: 1
}
Processing sent requests...
Raw sentRequests: [
  {
    from: new ObjectId('6901f85f42c5d010fa811206'),
    fromName: 'sayantan2',
    to: new ObjectId('6905adf16a22b7843b006183'),
    toName: 'sayantan3',
    status: 'pending',
    _id: new ObjectId('6905cdce14ad0d0f020b3985'),
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
Filtering sent request: { status: 'pending', to: new ObjectId('6905adf16a22b7843b006183') }
Mapping sent request: {
  from: new ObjectId('6901f85f42c5d010fa811206'),
  fromName: 'sayantan2',
  to: new ObjectId('6905adf16a22b7843b006183'),
  toName: 'sayantan3',
  status: 'pending',
  _id: new ObjectId('6905cdce14ad0d0f020b3985'),
  createdAt: 2025-11-01T09:07:26.707Z,
  updatedAt: 2025-11-01T09:07:26.707Z
}
Processed sentRequests: [
  {
    id: '6905cdce14ad0d0f020b3985',
    to: {
      id: '6905adf16a22b7843b006183',
      username: 'sayantan3',
      email: '',
      profilePicture: null
    },
    status: 'pending',
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
Populating recipient details...
Looking up recipient: 6905adf16a22b7843b006183
Found recipient: sayantan3
Final populated sent requests: [
  {
    id: '6905cdce14ad0d0f020b3985',
    to: {
      id: '6905adf16a22b7843b006183',
      username: 'sayantan3',
      email: 'sayantan3@gmail.com',
      profilePicture: undefined
    },
    status: 'pending',
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
=== FRIEND REQUEST GET END (sent) ===
 GET /api/friends/request?type=sent 200 in 135ms
 GET /api/socket-health 200 in 37ms
 GET /api/socket-health 200 in 128ms
 GET /socket.io?EIO=4&transport=polling&t=1w4v36dw 404 in 231ms
 GET /socket.io?EIO=4&transport=polling&t=1w4yq21s 404 in 132ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
 GET /api/socket-health 200 in 75ms
 GET /api/conversations 200 in 242ms
 GET /api/socket-health 200 in 197ms
 GET /socket.io?EIO=4&transport=polling&t=1w6fx1z0 404 in 323ms
 GET /socket.io?EIO=4&transport=polling&t=1w6lg1rx 404 in 137ms
 GET /api/socket-health 200 in 38ms
 GET /api/socket-health 200 in 215ms
 GET /socket.io?EIO=4&transport=polling&t=1w7ygm4u 404 in 402ms
 GET /socket.io?EIO=4&transport=polling&t=1w84mior 404 in 161ms
 GET /api/socket-health 200 in 60ms
 GET /api/socket-health 200 in 189ms
 GET /socket.io?EIO=4&transport=polling&t=1w9imlad 404 in 192ms
 GET /socket.io?EIO=4&transport=polling&t=1w9nyv7a 404 in 126ms
 GET /api/socket-health 200 in 50ms
 GET /api/socket-health 200 in 181ms
 GET /socket.io?EIO=4&transport=polling&t=1wb25kmx 404 in 214ms
 GET /socket.io?EIO=4&transport=polling&t=1wb75mqm 404 in 197ms
 GET /api/socket-health 200 in 821ms
 GET /api/socket-health 200 in 79ms
 GET /socket.io?EIO=4&transport=polling&t=1wd7alvm 404 in 573ms
 GET /socket.io?EIO=4&transport=polling&t=1wd9blz9 404 in 283ms
 GET /api/socket-health 200 in 39ms
 GET /api/socket-health 200 in 245ms
 GET /socket.io?EIO=4&transport=polling&t=1wewtqt5 404 in 231ms
 GET /socket.io?EIO=4&transport=polling&t=1wf3pdwq 404 in 158ms
 GET /api/socket-health 200 in 24ms
 GET /api/socket-health 200 in 132ms
 GET /socket.io?EIO=4&transport=polling&t=1wgfodkd 404 in 230ms
 GET /socket.io?EIO=4&transport=polling&t=1wgjdbl2 404 in 111ms
 GET /api/socket-health 200 in 24ms
 GET /api/socket-health 200 in 139ms
 GET /socket.io?EIO=4&transport=polling&t=1whzf7hu 404 in 241ms
 GET /socket.io?EIO=4&transport=polling&t=1wi3a5ns 404 in 116ms
 GET /api/socket-health 200 in 24ms
 GET /api/socket-health 200 in 127ms
 GET /socket.io?EIO=4&transport=polling&t=1wjivchw 404 in 238ms
 GET /socket.io?EIO=4&transport=polling&t=1wjmh49p 404 in 119ms
 GET /api/socket-health 200 in 25ms
 GET /api/socket-health 200 in 126ms
 GET /socket.io?EIO=4&transport=polling&t=1wl2hp0e 404 in 226ms
 GET /socket.io?EIO=4&transport=polling&t=1wl6150i 404 in 115ms
 GET /api/socket-health 200 in 77ms
 GET /api/socket-health 200 in 91ms
 GET /socket.io?EIO=4&transport=polling&t=1wmtsecp 404 in 462ms
 GET /socket.io?EIO=4&transport=polling&t=1wmu6zxe 404 in 461ms
 GET /api/socket-health 200 in 47ms
 GET /api/socket-health 200 in 304ms
 GET /socket.io?EIO=4&transport=polling&t=1wo6awvf 404 in 435ms
 GET /socket.io?EIO=4&transport=polling&t=1woesu7v 404 in 150ms
 GET /api/socket-health 200 in 33ms
 GET /api/socket-health 200 in 164ms
 GET /socket.io?EIO=4&transport=polling&t=1wpphdta 404 in 270ms
 GET /socket.io?EIO=4&transport=polling&t=1wpu3cpi 404 in 126ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
=== FRIEND REQUEST GET START ===
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
Request type: received User: sayantan2@gmail.com
âœ… Database connected
âœ… Current user found: {
  id: new ObjectId('6901f85f42c5d010fa811206'),
  email: 'sayantan2@gmail.com',
  friendRequestsCount: 0,
  sentRequestsCount: 1
}
Processing received requests...
Raw friendRequests: []
Processed receivedRequests: []
Populating sender details...
Final populated requests: []
=== FRIEND REQUEST GET END (received) ===
 GET /api/friends/request?type=received 200 in 174ms
 GET /api/friends 200 in 224ms
=== FRIEND REQUEST GET START ===
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
Request type: sent User: sayantan2@gmail.com
âœ… Database connected
âœ… Current user found: {
  id: new ObjectId('6901f85f42c5d010fa811206'),
  email: 'sayantan2@gmail.com',
  friendRequestsCount: 0,
  sentRequestsCount: 1
}
Processing sent requests...
Raw sentRequests: [
  {
    from: new ObjectId('6901f85f42c5d010fa811206'),
    fromName: 'sayantan2',
    to: new ObjectId('6905adf16a22b7843b006183'),
    toName: 'sayantan3',
    status: 'pending',
    _id: new ObjectId('6905cdce14ad0d0f020b3985'),
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
Filtering sent request: { status: 'pending', to: new ObjectId('6905adf16a22b7843b006183') }
Mapping sent request: {
  from: new ObjectId('6901f85f42c5d010fa811206'),
  fromName: 'sayantan2',
  to: new ObjectId('6905adf16a22b7843b006183'),
  toName: 'sayantan3',
  status: 'pending',
  _id: new ObjectId('6905cdce14ad0d0f020b3985'),
  createdAt: 2025-11-01T09:07:26.707Z,
  updatedAt: 2025-11-01T09:07:26.707Z
}
Processed sentRequests: [
  {
    id: '6905cdce14ad0d0f020b3985',
    to: {
      id: '6905adf16a22b7843b006183',
      username: 'sayantan3',
      email: '',
      profilePicture: null
    },
    status: 'pending',
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
Populating recipient details...
Looking up recipient: 6905adf16a22b7843b006183
Found recipient: sayantan3
Final populated sent requests: [
  {
    id: '6905cdce14ad0d0f020b3985',
    to: {
      id: '6905adf16a22b7843b006183',
      username: 'sayantan3',
      email: 'sayantan3@gmail.com',
      profilePicture: undefined
    },
    status: 'pending',
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
=== FRIEND REQUEST GET END (sent) ===
 GET /api/friends/request?type=sent 200 in 435ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
 GET /api/socket-health 200 in 256ms
 POST /api/users/heartbeat 200 in 412ms
 GET /api/socket-health 200 in 108ms
 GET /socket.io?EIO=4&transport=polling&t=1wriobk5 404 in 574ms
 GET /socket.io?EIO=4&transport=polling&t=1wrlngzz 404 in 180ms
 GET /api/socket-health 200 in 109ms
 GET /api/socket-health 200 in 153ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
 GET /socket.io?EIO=4&transport=polling&t=1wtnru2n 404 in 784ms
 GET /socket.io?EIO=4&transport=polling&t=1wtrd6pt 404 in 467ms
 GET /api/conversations 200 in 168ms
 GET /api/socket-health 200 in 58ms
 GET /api/socket-health 200 in 382ms
 GET /socket.io?EIO=4&transport=polling&t=1wvw1i9l 404 in 383ms
 GET /socket.io?EIO=4&transport=polling&t=1ww6pidb 404 in 166ms
 GET /api/socket-health 200 in 132ms
 GET /api/socket-health 200 in 300ms
 GET /socket.io?EIO=4&transport=polling&t=1wxhm466 404 in 326ms
 GET /socket.io?EIO=4&transport=polling&t=1wxq4emo 404 in 219ms
 GET /api/socket-health 200 in 26ms
 GET /api/socket-health 200 in 132ms
 GET /socket.io?EIO=4&transport=polling&t=1wyyk80u 404 in 240ms
 GET /socket.io?EIO=4&transport=polling&t=1wz2ahht 404 in 110ms
 GET /api/socket-health 200 in 36ms
 GET /api/socket-health 200 in 149ms
 GET /socket.io?EIO=4&transport=polling&t=1x0ia30v 404 in 154ms
 GET /socket.io?EIO=4&transport=polling&t=1x0mi1tp 404 in 103ms
 GET /api/socket-health 200 in 30ms
 GET /api/socket-health 200 in 136ms
 GET /socket.io?EIO=4&transport=polling&t=1x21knqi 404 in 305ms
 GET /socket.io?EIO=4&transport=polling&t=1x25gp8l 404 in 184ms
 GET /api/socket-health 200 in 37ms
 GET /api/socket-health 200 in 128ms
 GET /socket.io?EIO=4&transport=polling&t=1x3lesbj 404 in 226ms
 GET /socket.io?EIO=4&transport=polling&t=1x3oz0f1 404 in 111ms
 GET /api/socket-health 200 in 23ms
 GET /api/socket-health 200 in 110ms
 GET /socket.io?EIO=4&transport=polling&t=1x54ox8w 404 in 206ms
 GET /socket.io?EIO=4&transport=polling&t=1x57s0wt 404 in 100ms
 GET /api/socket-health 200 in 42ms
 GET /api/socket-health 200 in 340ms
 GET /socket.io?EIO=4&transport=polling&t=1x6oozjf 404 in 480ms
 GET /socket.io?EIO=4&transport=polling&t=1x6y637z 404 in 154ms
 GET /api/socket-health 200 in 42ms
 GET /api/socket-health 200 in 192ms
 GET /socket.io?EIO=4&transport=polling&t=1x88bcvk 404 in 292ms
 GET /socket.io?EIO=4&transport=polling&t=1x8doqpr 404 in 120ms
 GET /api/socket-health 200 in 83ms
 GET /api/socket-health 200 in 133ms
 GET /socket.io?EIO=4&transport=polling&t=1x9wvhlv 404 in 137ms
 GET /socket.io?EIO=4&transport=polling&t=1xa0ldd1 404 in 190ms
 GET /api/socket-health 200 in 130ms
 GET /api/socket-health 200 in 326ms
 GET /socket.io?EIO=4&transport=polling&t=1xbfb5bh 404 in 398ms
 GET /socket.io?EIO=4&transport=polling&t=1xbofln8 404 in 141ms
 GET /api/socket-health 200 in 51ms
 GET /api/socket-health 200 in 175ms
 GET /socket.io?EIO=4&transport=polling&t=1xcuzu8r 404 in 308ms
 GET /socket.io?EIO=4&transport=polling&t=1xczwddm 404 in 145ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
=== FRIEND REQUEST GET START ===
 GET /api/socket-health 200 in 87ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
Request type: received User: sayantan2@gmail.com
âœ… Database connected
 GET /api/socket-health 200 in 151ms
 GET /socket.io?EIO=4&transport=polling&t=1xeflf6i 404 in 157ms
 POST /api/users/heartbeat 200 in 278ms
 GET /socket.io?EIO=4&transport=polling&t=1xejw30l 404 in 145ms
âœ… Current user found: {
  id: new ObjectId('6901f85f42c5d010fa811206'),
  email: 'sayantan2@gmail.com',
  friendRequestsCount: 0,
  sentRequestsCount: 1
}
Processing received requests...
Raw friendRequests: []
Processed receivedRequests: []
Populating sender details...
Final populated requests: []
=== FRIEND REQUEST GET END (received) ===
 GET /api/friends/request?type=received 200 in 611ms
=== FRIEND REQUEST GET START ===
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
Request type: sent User: sayantan2@gmail.com
âœ… Database connected
âœ… Current user found: {
  id: new ObjectId('6901f85f42c5d010fa811206'),
  email: 'sayantan2@gmail.com',
  friendRequestsCount: 0,
  sentRequestsCount: 1
}
Processing sent requests...
Raw sentRequests: [
  {
    from: new ObjectId('6901f85f42c5d010fa811206'),
    fromName: 'sayantan2',
    to: new ObjectId('6905adf16a22b7843b006183'),
    toName: 'sayantan3',
    status: 'pending',
    _id: new ObjectId('6905cdce14ad0d0f020b3985'),
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
Filtering sent request: { status: 'pending', to: new ObjectId('6905adf16a22b7843b006183') }
Mapping sent request: {
  from: new ObjectId('6901f85f42c5d010fa811206'),
  fromName: 'sayantan2',
  to: new ObjectId('6905adf16a22b7843b006183'),
  toName: 'sayantan3',
  status: 'pending',
  _id: new ObjectId('6905cdce14ad0d0f020b3985'),
  createdAt: 2025-11-01T09:07:26.707Z,
  updatedAt: 2025-11-01T09:07:26.707Z
}
Processed sentRequests: [
  {
    id: '6905cdce14ad0d0f020b3985',
    to: {
      id: '6905adf16a22b7843b006183',
      username: 'sayantan3',
      email: '',
      profilePicture: null
    },
    status: 'pending',
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
Populating recipient details...
Looking up recipient: 6905adf16a22b7843b006183
Found recipient: sayantan3
Final populated sent requests: [
  {
    id: '6905cdce14ad0d0f020b3985',
    to: {
      id: '6905adf16a22b7843b006183',
      username: 'sayantan3',
      email: 'sayantan3@gmail.com',
      profilePicture: undefined
    },
    status: 'pending',
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
=== FRIEND REQUEST GET END (sent) ===
 GET /api/friends/request?type=sent 200 in 174ms
 GET /api/socket-health 200 in 70ms
 GET /api/socket-health 200 in 229ms
 GET /socket.io?EIO=4&transport=polling&t=1xfyrvo2 404 in 383ms
 GET /socket.io?EIO=4&transport=polling&t=1xg5f9gw 404 in 179ms
 GET /api/socket-health 200 in 61ms
 GET /api/socket-health 200 in 226ms
 GET /socket.io?EIO=4&transport=polling&t=1xhia6u1 404 in 419ms
 GET /socket.io?EIO=4&transport=polling&t=1xhp1zka 404 in 176ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
 GET /api/conversations 200 in 197ms
 GET /api/socket-health 200 in 60ms
 GET /api/socket-health 200 in 721ms
 GET /socket.io?EIO=4&transport=polling&t=1xj1neza 404 in 755ms
 GET /socket.io?EIO=4&transport=polling&t=1xjm650l 404 in 302ms
 GET /api/socket-health 200 in 62ms
 GET /api/socket-health 200 in 116ms
 GET /socket.io?EIO=4&transport=polling&t=1xkl8x0n 404 in 1282ms
 GET /socket.io?EIO=4&transport=polling&t=1xllpw1e 404 in 380ms
 GET /api/socket-health 200 in 104ms
 GET /api/socket-health 200 in 326ms
 GET /socket.io?EIO=4&transport=polling&t=1xmy2bsx 404 in 320ms
 GET /socket.io?EIO=4&transport=polling&t=1xn7hlvi 404 in 261ms
 GET /api/socket-health 200 in 57ms
 GET /api/socket-health 200 in 320ms
 GET /socket.io?EIO=4&transport=polling&t=1xofzm8q 404 in 301ms
 GET /socket.io?EIO=4&transport=polling&t=1xoowmnc 404 in 263ms
 GET /api/socket-health 200 in 179ms
 GET /api/socket-health 200 in 295ms
 GET /socket.io?EIO=4&transport=polling&t=1xqbxmeo 404 in 475ms
 GET /socket.io?EIO=4&transport=polling&t=1xqk9de0 404 in 253ms
 GET /api/socket-health 200 in 53ms
 GET /api/socket-health 200 in 266ms
 GET /socket.io?EIO=4&transport=polling&t=1xsas3ef 404 in 279ms
 GET /socket.io?EIO=4&transport=polling&t=1xsid9yd 404 in 218ms
 GET /api/socket-health 200 in 51ms
 GET /api/socket-health 200 in 257ms
 GET /socket.io?EIO=4&transport=polling&t=1xtua83b 404 in 440ms
 GET /socket.io?EIO=4&transport=polling&t=1xu1g5qt 404 in 238ms
 GET /api/socket-health 200 in 50ms
 GET /api/socket-health 200 in 282ms
 GET /socket.io?EIO=4&transport=polling&t=1xvdu48q 404 in 296ms
 GET /socket.io?EIO=4&transport=polling&t=1xvlraw7 404 in 203ms
 GET /api/socket-health 200 in 58ms
 GET /api/socket-health 200 in 248ms
 GET /socket.io?EIO=4&transport=polling&t=1xwxlk55 404 in 469ms
 GET /socket.io?EIO=4&transport=polling&t=1xx4n5pq 404 in 256ms
 GET /api/socket-health 200 in 78ms
 GET /api/socket-health 200 in 305ms
 GET /socket.io?EIO=4&transport=polling&t=1xyhttl0 404 in 586ms
 GET /socket.io?EIO=4&transport=polling&t=1xyqitfs 404 in 297ms
 GET /api/socket-health 200 in 77ms
 GET /api/socket-health 200 in 248ms
 GET /socket.io?EIO=4&transport=polling&t=1y019907 404 in 449ms
 GET /socket.io?EIO=4&transport=polling&t=1y08bhp7 404 in 210ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
=== FRIEND REQUEST GET START ===
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
Request type: received User: sayantan2@gmail.com
âœ… Database connected
âœ… Current user found: {
  id: new ObjectId('6901f85f42c5d010fa811206'),
  email: 'sayantan2@gmail.com',
  friendRequestsCount: 0,
  sentRequestsCount: 1
}
Processing received requests...
Raw friendRequests: []
Processed receivedRequests: []
Populating sender details...
Final populated requests: []
=== FRIEND REQUEST GET END (received) ===
 GET /api/friends/request?type=received 200 in 211ms
 GET /api/friends 200 in 257ms
=== FRIEND REQUEST GET START ===
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
Request type: sent User: sayantan2@gmail.com
âœ… Database connected
âœ… Current user found: {
  id: new ObjectId('6901f85f42c5d010fa811206'),
  email: 'sayantan2@gmail.com',
  friendRequestsCount: 0,
  sentRequestsCount: 1
}
Processing sent requests...
Raw sentRequests: [
  {
    from: new ObjectId('6901f85f42c5d010fa811206'),
    fromName: 'sayantan2',
    to: new ObjectId('6905adf16a22b7843b006183'),
    toName: 'sayantan3',
    status: 'pending',
    _id: new ObjectId('6905cdce14ad0d0f020b3985'),
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
Filtering sent request: { status: 'pending', to: new ObjectId('6905adf16a22b7843b006183') }
Mapping sent request: {
  from: new ObjectId('6901f85f42c5d010fa811206'),
  fromName: 'sayantan2',
  to: new ObjectId('6905adf16a22b7843b006183'),
  toName: 'sayantan3',
  status: 'pending',
  _id: new ObjectId('6905cdce14ad0d0f020b3985'),
  createdAt: 2025-11-01T09:07:26.707Z,
  updatedAt: 2025-11-01T09:07:26.707Z
}
Processed sentRequests: [
  {
    id: '6905cdce14ad0d0f020b3985',
    to: {
      id: '6905adf16a22b7843b006183',
      username: 'sayantan3',
      email: '',
      profilePicture: null
    },
    status: 'pending',
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
Populating recipient details...
Looking up recipient: 6905adf16a22b7843b006183
Found recipient: sayantan3
Final populated sent requests: [
  {
    id: '6905cdce14ad0d0f020b3985',
    to: {
      id: '6905adf16a22b7843b006183',
      username: 'sayantan3',
      email: 'sayantan3@gmail.com',
      profilePicture: undefined
    },
    status: 'pending',
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
=== FRIEND REQUEST GET END (sent) ===
 GET /api/friends/request?type=sent 200 in 615ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
 GET /api/socket-health 200 in 160ms
 GET /api/socket-health 200 in 276ms
 POST /api/users/heartbeat 200 in 467ms
 GET /socket.io?EIO=4&transport=polling&t=1y1nczdv 404 in 467ms
 GET /socket.io?EIO=4&transport=polling&t=1y1vbjvq 404 in 227ms
 GET /api/socket-health 200 in 54ms
 GET /api/socket-health 200 in 236ms
 GET /socket.io?EIO=4&transport=polling&t=1y33p7lt 404 in 419ms
 GET /socket.io?EIO=4&transport=polling&t=1y3abuee 404 in 197ms
 GET /api/socket-health 200 in 82ms
 GET /api/socket-health 200 in 257ms
 GET /socket.io?EIO=4&transport=polling&t=1y4o12kq 404 in 569ms
 GET /socket.io?EIO=4&transport=polling&t=1y4vayvh 404 in 305ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
 GET /api/socket-health 200 in 55ms
 GET /api/socket-health 200 in 143ms
 GET /socket.io?EIO=4&transport=polling&t=1y66s2z1 404 in 144ms
 GET /api/conversations 200 in 296ms
 GET /socket.io?EIO=4&transport=polling&t=1y6awh5h 404 in 101ms
 GET /api/socket-health 200 in 24ms
 GET /api/socket-health 200 in 116ms
 GET /socket.io?EIO=4&transport=polling&t=1y7pc15g 404 in 124ms
 GET /socket.io?EIO=4&transport=polling&t=1y7sme9m 404 in 112ms
 GET /api/socket-health 200 in 27ms
 GET /api/socket-health 200 in 174ms
 GET /socket.io?EIO=4&transport=polling&t=1y98uxge 404 in 325ms
 GET /socket.io?EIO=4&transport=polling&t=1y9dr1ba 404 in 168ms
 GET /api/socket-health 200 in 28ms
 GET /api/socket-health 200 in 118ms
 GET /socket.io?EIO=4&transport=polling&t=1yass4tz 404 in 227ms
 GET /socket.io?EIO=4&transport=polling&t=1yaw47js 404 in 119ms
 GET /api/socket-health 200 in 23ms
 GET /api/socket-health 200 in 103ms
 GET /socket.io?EIO=4&transport=polling&t=1ycc7gaq 404 in 194ms
 GET /socket.io?EIO=4&transport=polling&t=1ycf34om 404 in 93ms
 GET /api/socket-health 200 in 28ms
 GET /api/socket-health 200 in 113ms
 GET /socket.io?EIO=4&transport=polling&t=1ydvsqww 404 in 205ms
 GET /socket.io?EIO=4&transport=polling&t=1ydyzbu2 404 in 101ms
 GET /api/socket-health 200 in 41ms
 GET /api/socket-health 200 in 157ms
 GET /socket.io?EIO=4&transport=polling&t=1yffubu0 404 in 262ms
 GET /socket.io?EIO=4&transport=polling&t=1yfk9tez 404 in 102ms
 GET /api/socket-health 200 in 32ms
 GET /api/socket-health 200 in 111ms
 GET /socket.io?EIO=4&transport=polling&t=1ygz0pyw 404 in 277ms
 GET /socket.io?EIO=4&transport=polling&t=1yh2524l 404 in 206ms
 GET /api/socket-health 200 in 45ms
 GET /api/socket-health 200 in 299ms
 GET /socket.io?EIO=4&transport=polling&t=1yij0zku 404 in 424ms
 GET /socket.io?EIO=4&transport=polling&t=1yirc4ag 404 in 133ms
 GET /api/socket-health 200 in 41ms
 GET /api/socket-health 200 in 437ms
 GET /socket.io?EIO=4&transport=polling&t=1yk2of7h 404 in 432ms
 GET /socket.io?EIO=4&transport=polling&t=1ykex8fo 404 in 154ms
 GET /api/socket-health 200 in 40ms
 GET /api/socket-health 200 in 214ms
 GET /socket.io?EIO=4&transport=polling&t=1ylm8f0r 404 in 346ms
 GET /socket.io?EIO=4&transport=polling&t=1yls8j2c 404 in 168ms
 GET /api/socket-health 200 in 80ms
 GET /api/socket-health 200 in 212ms
 GET /socket.io?EIO=4&transport=polling&t=1yn6q3w7 404 in 407ms
 GET /socket.io?EIO=4&transport=polling&t=1yncot8c 404 in 184ms
 GET /api/socket-health 200 in 97ms
=== FRIEND REQUEST GET START ===
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
Request type: received User: sayantan2@gmail.com
âœ… Database connected
âœ… Current user found: {
  id: new ObjectId('6901f85f42c5d010fa811206'),
  email: 'sayantan2@gmail.com',
  friendRequestsCount: 0,
  sentRequestsCount: 1
}
Processing received requests...
Raw friendRequests: []
Processed receivedRequests: []
Populating sender details...
Final populated requests: []
=== FRIEND REQUEST GET END (received) ===
 GET /api/friends/request?type=received 200 in 324ms
 GET /api/socket-health 200 in 254ms
=== FRIEND REQUEST GET START ===
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
Request type: sent User: sayantan2@gmail.com
âœ… Database connected
âœ… Current user found: {
  id: new ObjectId('6901f85f42c5d010fa811206'),
  email: 'sayantan2@gmail.com',
  friendRequestsCount: 0,
  sentRequestsCount: 1
}
Processing sent requests...
Raw sentRequests: [
  {
    from: new ObjectId('6901f85f42c5d010fa811206'),
    fromName: 'sayantan2',
    to: new ObjectId('6905adf16a22b7843b006183'),
    toName: 'sayantan3',
    status: 'pending',
    _id: new ObjectId('6905cdce14ad0d0f020b3985'),
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
Filtering sent request: { status: 'pending', to: new ObjectId('6905adf16a22b7843b006183') }
Mapping sent request: {
  from: new ObjectId('6901f85f42c5d010fa811206'),
  fromName: 'sayantan2',
  to: new ObjectId('6905adf16a22b7843b006183'),
  toName: 'sayantan3',
  status: 'pending',
  _id: new ObjectId('6905cdce14ad0d0f020b3985'),
  createdAt: 2025-11-01T09:07:26.707Z,
  updatedAt: 2025-11-01T09:07:26.707Z
}
Processed sentRequests: [
  {
    id: '6905cdce14ad0d0f020b3985',
    to: {
      id: '6905adf16a22b7843b006183',
      username: 'sayantan3',
      email: '',
      profilePicture: null
    },
    status: 'pending',
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
Populating recipient details...
Looking up recipient: 6905adf16a22b7843b006183
 GET /socket.io?EIO=4&transport=polling&t=1yoqwkis 404 in 459ms
 GET /socket.io?EIO=4&transport=polling&t=1yoyfwe2 404 in 217ms
Found recipient: sayantan3
Final populated sent requests: [
  {
    id: '6905cdce14ad0d0f020b3985',
    to: {
      id: '6905adf16a22b7843b006183',
      username: 'sayantan3',
      email: 'sayantan3@gmail.com',
      profilePicture: undefined
    },
    status: 'pending',
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
=== FRIEND REQUEST GET END (sent) ===
 GET /api/friends/request?type=sent 200 in 281ms
 GET /api/socket-health 200 in 72ms
 GET /api/socket-health 200 in 266ms
 GET /socket.io?EIO=4&transport=polling&t=1yq9klr1 404 in 330ms
 GET /socket.io?EIO=4&transport=polling&t=1yqhb9dh 404 in 109ms
 GET /api/socket-health 200 in 26ms
 GET /api/socket-health 200 in 114ms
 GET /socket.io?EIO=4&transport=polling&t=1yrrsd1n 404 in 205ms
 GET /socket.io?EIO=4&transport=polling&t=1yruzzec 404 in 101ms
 GET /api/socket-health 200 in 27ms
 GET /api/socket-health 200 in 128ms
 GET /socket.io?EIO=4&transport=polling&t=1ytbcg3w 404 in 211ms
 GET /socket.io?EIO=4&transport=polling&t=1ytez9z0 404 in 118ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
 GET /api/conversations 200 in 139ms
 GET /api/socket-health 200 in 28ms
 GET /api/socket-health 200 in 123ms
 GET /socket.io?EIO=4&transport=polling&t=1yuuq918 404 in 125ms
 GET /socket.io?EIO=4&transport=polling&t=1yuy8pep 404 in 109ms
 GET /api/socket-health 200 in 26ms
 GET /api/socket-health 200 in 125ms
 GET /socket.io?EIO=4&transport=polling&t=1ywe60yu 404 in 214ms
 GET /socket.io?EIO=4&transport=polling&t=1ywhpg5r 404 in 101ms
 GET /api/socket-health 200 in 25ms
 GET /api/socket-health 200 in 116ms
 GET /socket.io?EIO=4&transport=polling&t=1yxy2ss9 404 in 204ms
 GET /socket.io?EIO=4&transport=polling&t=1yy1cih3 404 in 104ms
 GET /api/socket-health 200 in 25ms
 GET /api/socket-health 200 in 117ms
 GET /socket.io?EIO=4&transport=polling&t=1yzhj1jk 404 in 209ms
 GET /socket.io?EIO=4&transport=polling&t=1yzku5z1 404 in 102ms
 GET /api/socket-health 200 in 36ms
 GET /api/socket-health 200 in 122ms
 GET /socket.io?EIO=4&transport=polling&t=1z117yui 404 in 120ms
 GET /socket.io?EIO=4&transport=polling&t=1z14m40x 404 in 94ms
 GET /api/socket-health 200 in 24ms
 GET /api/socket-health 200 in 110ms
 GET /socket.io?EIO=4&transport=polling&t=1z2kccso 404 in 202ms
 GET /socket.io?EIO=4&transport=polling&t=1z2nghfe 404 in 102ms
 GET /api/socket-health 200 in 24ms
 GET /api/socket-health 200 in 127ms
 GET /socket.io?EIO=4&transport=polling&t=1z4444jb 404 in 212ms
 GET /socket.io?EIO=4&transport=polling&t=1z47og6t 404 in 105ms
 GET /api/socket-health 200 in 35ms
 GET /api/socket-health 200 in 129ms
 GET /socket.io?EIO=4&transport=polling&t=1z5o55o6 404 in 236ms
 GET /socket.io?EIO=4&transport=polling&t=1z5rwssw 404 in 117ms
 GET /api/socket-health 200 in 33ms
 GET /api/socket-health 200 in 126ms
 GET /socket.io?EIO=4&transport=polling&t=1z77j6ng 404 in 132ms
 GET /socket.io?EIO=4&transport=polling&t=1z7b6dwc 404 in 108ms
 GET /api/socket-health 200 in 36ms
 GET /api/socket-health 200 in 139ms
 GET /socket.io?EIO=4&transport=polling&t=1z8r363m 404 in 143ms
 GET /socket.io?EIO=4&transport=polling&t=1z8uzwm3 404 in 113ms
 GET /api/socket-health 200 in 26ms
 GET /api/socket-health 200 in 115ms
 GET /socket.io?EIO=4&transport=polling&t=1zaa5p32 404 in 217ms
 GET /socket.io?EIO=4&transport=polling&t=1zadf86p 404 in 105ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
=== FRIEND REQUEST GET START ===
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
Request type: received User: sayantan2@gmail.com
âœ… Database connected
 GET /api/friends 200 in 164ms
âœ… Current user found: {
  id: new ObjectId('6901f85f42c5d010fa811206'),
  email: 'sayantan2@gmail.com',
  friendRequestsCount: 0,
  sentRequestsCount: 1
}
Processing received requests...
Raw friendRequests: []
Processed receivedRequests: []
Populating sender details...
Final populated requests: []
=== FRIEND REQUEST GET END (received) ===
 GET /api/friends/request?type=received 200 in 509ms
=== FRIEND REQUEST GET START ===
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
Request type: sent User: sayantan2@gmail.com
âœ… Database connected
 POST /api/users/heartbeat 200 in 588ms
âœ… Current user found: {
  id: new ObjectId('6901f85f42c5d010fa811206'),
  email: 'sayantan2@gmail.com',
  friendRequestsCount: 0,
  sentRequestsCount: 1
}
Processing sent requests...
Raw sentRequests: [
  {
    from: new ObjectId('6901f85f42c5d010fa811206'),
    fromName: 'sayantan2',
    to: new ObjectId('6905adf16a22b7843b006183'),
    toName: 'sayantan3',
    status: 'pending',
    _id: new ObjectId('6905cdce14ad0d0f020b3985'),
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
Filtering sent request: { status: 'pending', to: new ObjectId('6905adf16a22b7843b006183') }
Mapping sent request: {
  from: new ObjectId('6901f85f42c5d010fa811206'),
  fromName: 'sayantan2',
  to: new ObjectId('6905adf16a22b7843b006183'),
  toName: 'sayantan3',
  status: 'pending',
  _id: new ObjectId('6905cdce14ad0d0f020b3985'),
  createdAt: 2025-11-01T09:07:26.707Z,
  updatedAt: 2025-11-01T09:07:26.707Z
}
Processed sentRequests: [
  {
    id: '6905cdce14ad0d0f020b3985',
    to: {
      id: '6905adf16a22b7843b006183',
      username: 'sayantan3',
      email: '',
      profilePicture: null
    },
    status: 'pending',
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
Populating recipient details...
Looking up recipient: 6905adf16a22b7843b006183
Found recipient: sayantan3
Final populated sent requests: [
  {
    id: '6905cdce14ad0d0f020b3985',
    to: {
      id: '6905adf16a22b7843b006183',
      username: 'sayantan3',
      email: 'sayantan3@gmail.com',
      profilePicture: undefined
    },
    status: 'pending',
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
=== FRIEND REQUEST GET END (sent) ===
 GET /api/friends/request?type=sent 200 in 137ms
 GET /api/socket-health 200 in 35ms
 GET /api/socket-health 200 in 116ms
 GET /socket.io?EIO=4&transport=polling&t=1zbu347j 404 in 214ms
 GET /socket.io?EIO=4&transport=polling&t=1zbxga7s 404 in 108ms
 GET /api/socket-health 200 in 25ms
 GET /api/socket-health 200 in 118ms
 GET /socket.io?EIO=4&transport=polling&t=1zdde5my 404 in 210ms
 GET /socket.io?EIO=4&transport=polling&t=1zdguyhn 404 in 92ms
 GET /api/socket-health 200 in 38ms
 GET /api/socket-health 200 in 123ms
 GET /socket.io?EIO=4&transport=polling&t=1zexam6p 404 in 231ms
 GET /socket.io?EIO=4&transport=polling&t=1zf0rk2j 404 in 115ms
 GET /api/socket-health 200 in 31ms
 GET /api/socket-health 200 in 125ms
 GET /socket.io?EIO=4&transport=polling&t=1zggrx25 404 in 284ms
 GET /socket.io?EIO=4&transport=polling&t=1zgk9dz2 404 in 157ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
 GET /api/socket-health 200 in 51ms
 GET /api/socket-health 200 in 106ms
 GET /socket.io?EIO=4&transport=polling&t=1zi0y1gj 404 in 110ms
 GET /api/conversations 200 in 271ms
 GET /socket.io?EIO=4&transport=polling&t=1zi3y7gk 404 in 115ms
 GET /api/socket-health 200 in 28ms
 GET /api/socket-health 200 in 126ms
 GET /socket.io?EIO=4&transport=polling&t=1zjjqo2d 404 in 225ms
 GET /socket.io?EIO=4&transport=polling&t=1zjnamf3 404 in 114ms
 GET /api/socket-health 200 in 22ms
 GET /api/socket-health 200 in 119ms
 GET /socket.io?EIO=4&transport=polling&t=1zl30ykh 404 in 217ms
 GET /socket.io?EIO=4&transport=polling&t=1zl6c4q7 404 in 103ms
 GET /api/socket-health 200 in 29ms
 GET /api/socket-health 200 in 109ms
 GET /socket.io?EIO=4&transport=polling&t=1zmmycb6 404 in 199ms
 GET /socket.io?EIO=4&transport=polling&t=1zmq1m1l 404 in 98ms
 GET /api/socket-health 200 in 26ms
 GET /api/socket-health 200 in 109ms
 GET /socket.io?EIO=4&transport=polling&t=1zo67whm 404 in 198ms
 GET /socket.io?EIO=4&transport=polling&t=1zo9a1ij 404 in 92ms
 GET /api/socket-health 200 in 30ms
 GET /api/socket-health 200 in 110ms
 GET /socket.io?EIO=4&transport=polling&t=1zpq7ja6 404 in 115ms
 GET /socket.io?EIO=4&transport=polling&t=1zptb2qe 404 in 96ms
 GET /api/socket-health 200 in 23ms
 GET /api/socket-health 200 in 103ms
 GET /socket.io?EIO=4&transport=polling&t=1zr9aclv 404 in 191ms
 GET /socket.io?EIO=4&transport=polling&t=1zrc6gjb 404 in 94ms
 GET /api/socket-health 200 in 31ms
 GET /api/socket-health 200 in 101ms
 GET /socket.io?EIO=4&transport=polling&t=1zsszqdu 404 in 190ms
 GET /socket.io?EIO=4&transport=polling&t=1zsvuvxv 404 in 100ms
 GET /api/socket-health 200 in 24ms
 GET /api/socket-health 200 in 34ms
 GET /socket.io?EIO=4&transport=polling&t=1zucb98q 404 in 214ms
 GET /socket.io?EIO=4&transport=polling&t=1zud9kj8 404 in 111ms
 GET /api/socket-health 200 in 31ms
 GET /api/socket-health 200 in 107ms
 GET /socket.io?EIO=4&transport=polling&t=1zvw3lm2 404 in 111ms
 GET /socket.io?EIO=4&transport=polling&t=1zvz4lkw 404 in 96ms
 GET /api/socket-health 200 in 21ms
 GET /api/socket-health 200 in 108ms
 GET /socket.io?EIO=4&transport=polling&t=1zxfc7ec 404 in 207ms
 GET /socket.io?EIO=4&transport=polling&t=1zxie7kl 404 in 103ms
 GET /api/socket-health 200 in 46ms
=== FRIEND REQUEST GET START ===
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
Request type: received User: sayantan2@gmail.com
âœ… Database connected
âœ… Current user found: {
  id: new ObjectId('6901f85f42c5d010fa811206'),
  email: 'sayantan2@gmail.com',
  friendRequestsCount: 0,
  sentRequestsCount: 1
}
Processing received requests...
Raw friendRequests: []
Processed receivedRequests: []
Populating sender details...
Final populated requests: []
=== FRIEND REQUEST GET END (received) ===
 GET /api/friends/request?type=received 200 in 157ms
 GET /api/socket-health 200 in 126ms
=== FRIEND REQUEST GET START ===
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
Request type: sent User: sayantan2@gmail.com
âœ… Database connected
 GET /socket.io?EIO=4&transport=polling&t=1zyzmyos 404 in 238ms
 GET /socket.io?EIO=4&transport=polling&t=1zz39ogw 404 in 119ms
âœ… Current user found: {
  id: new ObjectId('6901f85f42c5d010fa811206'),
  email: 'sayantan2@gmail.com',
  friendRequestsCount: 0,
  sentRequestsCount: 1
}
Processing sent requests...
Raw sentRequests: [
  {
    from: new ObjectId('6901f85f42c5d010fa811206'),
    fromName: 'sayantan2',
    to: new ObjectId('6905adf16a22b7843b006183'),
    toName: 'sayantan3',
    status: 'pending',
    _id: new ObjectId('6905cdce14ad0d0f020b3985'),
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
Filtering sent request: { status: 'pending', to: new ObjectId('6905adf16a22b7843b006183') }
Mapping sent request: {
  from: new ObjectId('6901f85f42c5d010fa811206'),
  fromName: 'sayantan2',
  to: new ObjectId('6905adf16a22b7843b006183'),
  toName: 'sayantan3',
  status: 'pending',
  _id: new ObjectId('6905cdce14ad0d0f020b3985'),
  createdAt: 2025-11-01T09:07:26.707Z,
  updatedAt: 2025-11-01T09:07:26.707Z
}
Processed sentRequests: [
  {
    id: '6905cdce14ad0d0f020b3985',
    to: {
      id: '6905adf16a22b7843b006183',
      username: 'sayantan3',
      email: '',
      profilePicture: null
    },
    status: 'pending',
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
Populating recipient details...
Looking up recipient: 6905adf16a22b7843b006183
Found recipient: sayantan3
Final populated sent requests: [
  {
    id: '6905cdce14ad0d0f020b3985',
    to: {
      id: '6905adf16a22b7843b006183',
      username: 'sayantan3',
      email: 'sayantan3@gmail.com',
      profilePicture: undefined
    },
    status: 'pending',
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
=== FRIEND REQUEST GET END (sent) ===
 GET /api/friends/request?type=sent 200 in 217ms
 GET /api/socket-health 200 in 30ms
 GET /api/socket-health 200 in 134ms
 GET /socket.io?EIO=4&transport=polling&t=200j18hz 404 in 234ms
 GET /socket.io?EIO=4&transport=polling&t=200mtu5v 404 in 125ms
 GET /api/socket-health 200 in 28ms
 GET /api/socket-health 200 in 120ms
 GET /socket.io?EIO=4&transport=polling&t=2022lgei 404 in 217ms
 GET /socket.io?EIO=4&transport=polling&t=20261c3o 404 in 104ms
 GET /api/socket-health 200 in 26ms
 GET /api/socket-health 200 in 115ms
 GET /socket.io?EIO=4&transport=polling&t=203m3uv5 404 in 116ms
 GET /socket.io?EIO=4&transport=polling&t=203penj1 404 in 103ms
 GET /api/socket-health 200 in 24ms
 GET /api/socket-health 200 in 99ms
 GET /socket.io?EIO=4&transport=polling&t=2055exkm 404 in 182ms
 GET /socket.io?EIO=4&transport=polling&t=20588pr8 404 in 95ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
 GET /api/conversations 200 in 139ms
 GET /api/socket-health 200 in 42ms
 GET /api/socket-health 200 in 116ms
 GET /socket.io?EIO=4&transport=polling&t=206pe606 404 in 121ms
 GET /socket.io?EIO=4&transport=polling&t=206so0aa 404 in 101ms
 GET /api/socket-health 200 in 31ms
 GET /api/socket-health 200 in 143ms
 GET /socket.io?EIO=4&transport=polling&t=2088jyzv 404 in 259ms
 GET /socket.io?EIO=4&transport=polling&t=208ck4p5 404 in 124ms
 GET /api/socket-health 200 in 24ms
 GET /api/socket-health 200 in 24ms
 GET /socket.io?EIO=4&transport=polling&t=209s43uo 404 in 218ms
 GET /socket.io?EIO=4&transport=polling&t=209st74v 404 in 108ms
 GET /api/socket-health 200 in 35ms
 GET /api/socket-health 200 in 150ms
 GET /socket.io?EIO=4&transport=polling&t=20bc58sr 404 in 233ms
 GET /socket.io?EIO=4&transport=polling&t=20bgdw18 404 in 105ms
 GET /api/socket-health 200 in 25ms
 GET /api/socket-health 200 in 107ms
 GET /socket.io?EIO=4&transport=polling&t=20cvcfqj 404 in 234ms
 GET /socket.io?EIO=4&transport=polling&t=20cye38b 404 in 216ms
 GET /api/socket-health 200 in 43ms
 GET /api/socket-health 200 in 414ms
 GET /socket.io?EIO=4&transport=polling&t=20ef6tc3 404 in 538ms
 GET /socket.io?EIO=4&transport=polling&t=20eqtb03 404 in 125ms
 GET /api/socket-health 200 in 331ms
 GET /api/socket-health 200 in 176ms
 GET /socket.io?EIO=4&transport=polling&t=20g9gt80 404 in 496ms
 GET /socket.io?EIO=4&transport=polling&t=20ge9ybk 404 in 147ms
 GET /api/socket-health 200 in 27ms
 GET /api/socket-health 200 in 138ms
 GET /socket.io?EIO=4&transport=polling&t=20i9iaup 404 in 205ms
 GET /socket.io?EIO=4&transport=polling&t=20idelvn 404 in 99ms
 GET /api/socket-health 200 in 26ms
 GET /api/socket-health 200 in 115ms
 GET /socket.io?EIO=4&transport=polling&t=20jta0tz 404 in 122ms
 GET /socket.io?EIO=4&transport=polling&t=20jwjt8s 404 in 106ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
=== FRIEND REQUEST GET START ===
 GET /api/socket-health 200 in 96ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
Request type: received User: sayantan2@gmail.com
âœ… Database connected
 GET /api/auth/session 200 in 105ms
 GET /api/socket-health 200 in 46ms
 GET /api/friends 200 in 178ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
 GET /socket.io?EIO=4&transport=polling&t=20lfcgbd 404 in 214ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
âœ… Current user found: {
  id: new ObjectId('6901f85f42c5d010fa811206'),
  email: 'sayantan2@gmail.com',
  friendRequestsCount: 0,
  sentRequestsCount: 1
}
Processing received requests...
Raw friendRequests: []
Processed receivedRequests: []
Populating sender details...
Final populated requests: []
=== FRIEND REQUEST GET END (received) ===
 GET /api/friends/request?type=received 200 in 489ms
 GET /api/users/me 200 in 412ms
 POST /api/users/heartbeat 200 in 651ms
 POST /api/users/heartbeat 200 in 477ms
=== FRIEND REQUEST GET START ===
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
Request type: received User: sayantan2@gmail.com
âœ… Database connected
=== FRIEND REQUEST GET START ===
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
Request type: sent User: sayantan2@gmail.com
âœ… Database connected
 GET /socket.io?EIO=4&transport=polling&t=20lh9c64 404 in 239ms
âœ… Current user found: {
  id: new ObjectId('6901f85f42c5d010fa811206'),
  email: 'sayantan2@gmail.com',
  friendRequestsCount: 0,
  sentRequestsCount: 1
}
Processing received requests...
Raw friendRequests: []
Processed receivedRequests: []
Populating sender details...
Final populated requests: []
=== FRIEND REQUEST GET END (received) ===
 GET /api/friends/request?type=received 200 in 134ms
âœ… Current user found: {
  id: new ObjectId('6901f85f42c5d010fa811206'),
  email: 'sayantan2@gmail.com',
  friendRequestsCount: 0,
  sentRequestsCount: 1
}
Processing sent requests...
Raw sentRequests: [
  {
    from: new ObjectId('6901f85f42c5d010fa811206'),
    fromName: 'sayantan2',
    to: new ObjectId('6905adf16a22b7843b006183'),
    toName: 'sayantan3',
    status: 'pending',
    _id: new ObjectId('6905cdce14ad0d0f020b3985'),
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
Filtering sent request: { status: 'pending', to: new ObjectId('6905adf16a22b7843b006183') }
Mapping sent request: {
  from: new ObjectId('6901f85f42c5d010fa811206'),
  fromName: 'sayantan2',
  to: new ObjectId('6905adf16a22b7843b006183'),
  toName: 'sayantan3',
  status: 'pending',
  _id: new ObjectId('6905cdce14ad0d0f020b3985'),
  createdAt: 2025-11-01T09:07:26.707Z,
  updatedAt: 2025-11-01T09:07:26.707Z
}
Processed sentRequests: [
  {
    id: '6905cdce14ad0d0f020b3985',
    to: {
      id: '6905adf16a22b7843b006183',
      username: 'sayantan3',
      email: '',
      profilePicture: null
    },
    status: 'pending',
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
Populating recipient details...
Looking up recipient: 6905adf16a22b7843b006183
 GET /api/random-chat/queue 200 in 658ms
Found recipient: sayantan3
Final populated sent requests: [
  {
    id: '6905cdce14ad0d0f020b3985',
    to: {
      id: '6905adf16a22b7843b006183',
      username: 'sayantan3',
      email: 'sayantan3@gmail.com',
      profilePicture: undefined
    },
    status: 'pending',
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
=== FRIEND REQUEST GET END (sent) ===
 GET /api/friends/request?type=sent 200 in 157ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
=== FRIEND REQUEST GET START ===
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
Request type: sent User: sayantan2@gmail.com
âœ… Database connected
 GET /api/friends 200 in 609ms
âœ… Current user found: {
  id: new ObjectId('6901f85f42c5d010fa811206'),
  email: 'sayantan2@gmail.com',
  friendRequestsCount: 0,
  sentRequestsCount: 1
}
Processing sent requests...
Raw sentRequests: [
  {
    from: new ObjectId('6901f85f42c5d010fa811206'),
    fromName: 'sayantan2',
    to: new ObjectId('6905adf16a22b7843b006183'),
    toName: 'sayantan3',
    status: 'pending',
    _id: new ObjectId('6905cdce14ad0d0f020b3985'),
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
Filtering sent request: { status: 'pending', to: new ObjectId('6905adf16a22b7843b006183') }
Mapping sent request: {
  from: new ObjectId('6901f85f42c5d010fa811206'),
  fromName: 'sayantan2',
  to: new ObjectId('6905adf16a22b7843b006183'),
  toName: 'sayantan3',
  status: 'pending',
  _id: new ObjectId('6905cdce14ad0d0f020b3985'),
  createdAt: 2025-11-01T09:07:26.707Z,
  updatedAt: 2025-11-01T09:07:26.707Z
}
Processed sentRequests: [
  {
    id: '6905cdce14ad0d0f020b3985',
    to: {
      id: '6905adf16a22b7843b006183',
      username: 'sayantan3',
      email: '',
      profilePicture: null
    },
    status: 'pending',
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
Populating recipient details...
Looking up recipient: 6905adf16a22b7843b006183
 GET /api/random-chat/session 200 in 523ms
Found recipient: sayantan3
Final populated sent requests: [
  {
    id: '6905cdce14ad0d0f020b3985',
    to: {
      id: '6905adf16a22b7843b006183',
      username: 'sayantan3',
      email: 'sayantan3@gmail.com',
      profilePicture: undefined
    },
    status: 'pending',
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
=== FRIEND REQUEST GET END (sent) ===
 GET /api/friends/request?type=sent 200 in 525ms
 GET /api/socket-health 200 in 22ms
 GET /api/socket-health 200 in 145ms
 GET /socket.io?EIO=4&transport=polling&t=20mw981w 404 in 255ms
 GET /socket.io?EIO=4&transport=polling&t=20n0bi99 404 in 127ms
 GET /api/socket-health 200 in 27ms
 GET /api/socket-health 200 in 118ms
 GET /socket.io?EIO=4&transport=polling&t=20ofty8b 404 in 219ms
 GET /socket.io?EIO=4&transport=polling&t=20oj5e03 404 in 104ms
 GET /api/socket-health 200 in 27ms
 GET /api/socket-health 200 in 104ms
 GET /socket.io?EIO=4&transport=polling&t=20pzcbpq 404 in 190ms
 GET /socket.io?EIO=4&transport=polling&t=20q294qd 404 in 95ms
 GET /api/socket-health 200 in 22ms
 GET /api/socket-health 200 in 100ms
 GET /socket.io?EIO=4&transport=polling&t=20rj2fpn 404 in 193ms
 GET /socket.io?EIO=4&transport=polling&t=20rlwenj 404 in 95ms
 GET /api/socket-health 200 in 30ms
 GET /api/socket-health 200 in 110ms
 GET /socket.io?EIO=4&transport=polling&t=20t2qbks 404 in 115ms
 GET /socket.io?EIO=4&transport=polling&t=20t5uzhu 404 in 95ms
 GET /api/socket-health 200 in 23ms
 GET /api/socket-health 200 in 108ms
 GET /socket.io?EIO=4&transport=polling&t=20um84t7 404 in 195ms
 GET /socket.io?EIO=4&transport=polling&t=20upap4a 404 in 92ms
 GET /api/socket-health 200 in 34ms
 GET /api/socket-health 200 in 124ms
 GET /socket.io?EIO=4&transport=polling&t=20w60jn2 404 in 127ms
 GET /socket.io?EIO=4&transport=polling&t=20w9hllu 404 in 104ms
 GET /api/socket-health 200 in 23ms
 GET /api/socket-health 200 in 122ms
 GET /socket.io?EIO=4&transport=polling&t=20xp592w 404 in 132ms
 GET /socket.io?EIO=4&transport=polling&t=20xsmr7j 404 in 85ms
 GET /api/socket-health 200 in 29ms
 GET /api/socket-health 200 in 109ms
 GET /socket.io?EIO=4&transport=polling&t=20z8si3r 404 in 113ms
 GET /socket.io?EIO=4&transport=polling&t=20zbv26q 404 in 102ms
 GET /api/socket-health 200 in 34ms
 GET /api/socket-health 200 in 153ms
 GET /socket.io?EIO=4&transport=polling&t=210smevs 404 in 274ms
 GET /socket.io?EIO=4&transport=polling&t=210wxsz0 404 in 118ms
 GET /api/socket-health 200 in 27ms
 GET /api/socket-health 200 in 103ms
 GET /socket.io?EIO=4&transport=polling&t=212bvrib 404 in 110ms
 GET /socket.io?EIO=4&transport=polling&t=212erer5 404 in 96ms
 GET /api/socket-health 200 in 24ms
 GET /api/socket-health 200 in 109ms
 GET /socket.io?EIO=4&transport=polling&t=213v9mf3 404 in 197ms
 GET /socket.io?EIO=4&transport=polling&t=213ycthd 404 in 93ms
 GET /api/socket-health 200 in 28ms
 GET /api/socket-health 200 in 112ms
 GET /socket.io?EIO=4&transport=polling&t=215f7w4q 404 in 201ms
 GET /socket.io?EIO=4&transport=polling&t=215idgyk 404 in 99ms
 GET /api/socket-health 200 in 23ms
 GET /api/socket-health 200 in 111ms
 GET /socket.io?EIO=4&transport=polling&t=216ygq0b 404 in 192ms
 GET /socket.io?EIO=4&transport=polling&t=2171lml1 404 in 85ms
 GET /api/socket-health 200 in 30ms
 GET /api/socket-health 200 in 107ms
 GET /socket.io?EIO=4&transport=polling&t=218i6yik 404 in 113ms
 GET /socket.io?EIO=4&transport=polling&t=218l7cxp 404 in 95ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
 GET /api/conversations 200 in 148ms
 POST /api/users/heartbeat 200 in 170ms
 GET /api/socket-health 200 in 38ms
=== FRIEND REQUEST GET START ===
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
Request type: received User: sayantan2@gmail.com
âœ… Database connected
âœ… Current user found: {
  id: new ObjectId('6901f85f42c5d010fa811206'),
  email: 'sayantan2@gmail.com',
  friendRequestsCount: 0,
  sentRequestsCount: 1
}
Processing received requests...
Raw friendRequests: []
Processed receivedRequests: []
Populating sender details...
Final populated requests: []
=== FRIEND REQUEST GET END (received) ===
 GET /api/friends/request?type=received 200 in 147ms
 GET /api/socket-health 200 in 125ms
=== FRIEND REQUEST GET START ===
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
Request type: sent User: sayantan2@gmail.com
âœ… Database connected
 GET /socket.io?EIO=4&transport=polling&t=21a23fhv 404 in 230ms
 GET /socket.io?EIO=4&transport=polling&t=21a5oa2q 404 in 120ms
âœ… Current user found: {
  id: new ObjectId('6901f85f42c5d010fa811206'),
  email: 'sayantan2@gmail.com',
  friendRequestsCount: 0,
  sentRequestsCount: 1
}
Processing sent requests...
Raw sentRequests: [
  {
    from: new ObjectId('6901f85f42c5d010fa811206'),
    fromName: 'sayantan2',
    to: new ObjectId('6905adf16a22b7843b006183'),
    toName: 'sayantan3',
    status: 'pending',
    _id: new ObjectId('6905cdce14ad0d0f020b3985'),
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
Filtering sent request: { status: 'pending', to: new ObjectId('6905adf16a22b7843b006183') }
Mapping sent request: {
  from: new ObjectId('6901f85f42c5d010fa811206'),
  fromName: 'sayantan2',
  to: new ObjectId('6905adf16a22b7843b006183'),
  toName: 'sayantan3',
  status: 'pending',
  _id: new ObjectId('6905cdce14ad0d0f020b3985'),
  createdAt: 2025-11-01T09:07:26.707Z,
  updatedAt: 2025-11-01T09:07:26.707Z
}
Processed sentRequests: [
  {
    id: '6905cdce14ad0d0f020b3985',
    to: {
      id: '6905adf16a22b7843b006183',
      username: 'sayantan3',
      email: '',
      profilePicture: null
    },
    status: 'pending',
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
Populating recipient details...
Looking up recipient: 6905adf16a22b7843b006183
Found recipient: sayantan3
Final populated sent requests: [
  {
    id: '6905cdce14ad0d0f020b3985',
    to: {
      id: '6905adf16a22b7843b006183',
      username: 'sayantan3',
      email: 'sayantan3@gmail.com',
      profilePicture: undefined
    },
    status: 'pending',
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
=== FRIEND REQUEST GET END (sent) ===
 GET /api/friends/request?type=sent 200 in 207ms
 GET /api/socket-health 200 in 24ms
 GET /api/socket-health 200 in 108ms
 GET /socket.io?EIO=4&transport=polling&t=21bl5b8v 404 in 196ms
 GET /socket.io?EIO=4&transport=polling&t=21bo7lxa 404 in 108ms
 GET /api/socket-health 200 in 24ms
 GET /api/socket-health 200 in 102ms
 GET /socket.io?EIO=4&transport=polling&t=21d4mu42 404 in 187ms
 GET /socket.io?EIO=4&transport=polling&t=21d7isr9 404 in 94ms
 GET /api/socket-health 200 in 24ms
 GET /api/socket-health 200 in 117ms
 GET /socket.io?EIO=4&transport=polling&t=21eogm8f 404 in 199ms
 GET /socket.io?EIO=4&transport=polling&t=21errszd 404 in 98ms
 GET /api/socket-health 200 in 26ms
 GET /api/socket-health 200 in 119ms
 GET /socket.io?EIO=4&transport=polling&t=21g7y8od 404 in 214ms
 GET /socket.io?EIO=4&transport=polling&t=21gbar3w 404 in 105ms
 GET /api/socket-health 200 in 35ms
 GET /api/socket-health 200 in 136ms
 GET /socket.io?EIO=4&transport=polling&t=21hrslhq 404 in 130ms
 GET /socket.io?EIO=4&transport=polling&t=21hvno2p 404 in 106ms
 GET /api/socket-health 200 in 29ms
 GET /api/socket-health 200 in 118ms
 GET /socket.io?EIO=4&transport=polling&t=21jay49t 404 in 210ms
 GET /socket.io?EIO=4&transport=polling&t=21jec8bl 404 in 105ms
 GET /api/socket-health 200 in 24ms
 GET /api/socket-health 200 in 117ms
 GET /socket.io?EIO=4&transport=polling&t=21kum526 404 in 213ms
 GET /socket.io?EIO=4&transport=polling&t=21kxz2wq 404 in 109ms
 GET /api/socket-health 200 in 23ms
 GET /api/socket-health 200 in 115ms
 GET /socket.io?EIO=4&transport=polling&t=21me2ogd 404 in 119ms
 GET /socket.io?EIO=4&transport=polling&t=21mhbrxi 404 in 99ms
 GET /api/socket-health 200 in 24ms
 GET /api/socket-health 200 in 128ms
 GET /socket.io?EIO=4&transport=polling&t=21nxrmr6 404 in 230ms
 GET /socket.io?EIO=4&transport=polling&t=21o1g547 404 in 114ms
 GET /api/socket-health 200 in 29ms
 GET /api/socket-health 200 in 142ms
 GET /socket.io?EIO=4&transport=polling&t=21phb310 404 in 146ms
 GET /socket.io?EIO=4&transport=polling&t=21plba18 404 in 105ms
 GET /api/socket-health 200 in 31ms
 GET /api/socket-health 200 in 155ms
 GET /socket.io?EIO=4&transport=polling&t=21r0t6ov 404 in 152ms
 GET /socket.io?EIO=4&transport=polling&t=21r585qn 404 in 110ms
 GET /api/socket-health 200 in 28ms
 GET /api/socket-health 200 in 31ms
 GET /socket.io?EIO=4&transport=polling&t=21skew19 404 in 271ms
 GET /socket.io?EIO=4&transport=polling&t=21slbajx 404 in 148ms
 GET /api/socket-health 200 in 28ms
 GET /api/socket-health 200 in 110ms
 GET /socket.io?EIO=4&transport=polling&t=21u3w1lt 404 in 211ms
 GET /socket.io?EIO=4&transport=polling&t=21u70euv 404 in 108ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
=== FRIEND REQUEST GET START ===
 GET /api/socket-health 200 in 66ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
Request type: received User: sayantan2@gmail.com
âœ… Database connected
âœ… Current user found: {
  id: new ObjectId('6901f85f42c5d010fa811206'),
  email: 'sayantan2@gmail.com',
  friendRequestsCount: 0,
  sentRequestsCount: 1
}
Processing received requests...
Raw friendRequests: []
Processed receivedRequests: []
Populating sender details...
Final populated requests: []
=== FRIEND REQUEST GET END (received) ===
 GET /api/friends/request?type=received 200 in 183ms
 GET /api/friends 200 in 193ms
 GET /api/socket-health 200 in 130ms
=== FRIEND REQUEST GET START ===
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
Request type: sent User: sayantan2@gmail.com
âœ… Database connected
 GET /socket.io?EIO=4&transport=polling&t=21voz59s 404 in 253ms
 GET /socket.io?EIO=4&transport=polling&t=21vsqnla 404 in 117ms
âœ… Current user found: {
  id: new ObjectId('6901f85f42c5d010fa811206'),
  email: 'sayantan2@gmail.com',
  friendRequestsCount: 0,
  sentRequestsCount: 1
}
Processing sent requests...
Raw sentRequests: [
  {
    from: new ObjectId('6901f85f42c5d010fa811206'),
    fromName: 'sayantan2',
    to: new ObjectId('6905adf16a22b7843b006183'),
    toName: 'sayantan3',
    status: 'pending',
    _id: new ObjectId('6905cdce14ad0d0f020b3985'),
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
Filtering sent request: { status: 'pending', to: new ObjectId('6905adf16a22b7843b006183') }
Mapping sent request: {
  from: new ObjectId('6901f85f42c5d010fa811206'),
  fromName: 'sayantan2',
  to: new ObjectId('6905adf16a22b7843b006183'),
  toName: 'sayantan3',
  status: 'pending',
  _id: new ObjectId('6905cdce14ad0d0f020b3985'),
  createdAt: 2025-11-01T09:07:26.707Z,
  updatedAt: 2025-11-01T09:07:26.707Z
}
Processed sentRequests: [
  {
    id: '6905cdce14ad0d0f020b3985',
    to: {
      id: '6905adf16a22b7843b006183',
      username: 'sayantan3',
      email: '',
      profilePicture: null
    },
    status: 'pending',
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
Populating recipient details...
Looking up recipient: 6905adf16a22b7843b006183
Found recipient: sayantan3
Final populated sent requests: [
  {
    id: '6905cdce14ad0d0f020b3985',
    to: {
      id: '6905adf16a22b7843b006183',
      username: 'sayantan3',
      email: 'sayantan3@gmail.com',
      profilePicture: undefined
    },
    status: 'pending',
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
=== FRIEND REQUEST GET END (sent) ===
 GET /api/friends/request?type=sent 200 in 205ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
 POST /api/users/heartbeat 200 in 170ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
 GET /api/socket-health 200 in 43ms
 GET /api/socket-health 200 in 114ms
 GET /api/conversations 200 in 254ms
 GET /socket.io?EIO=4&transport=polling&t=21x7l8zk 404 in 207ms
 GET /socket.io?EIO=4&transport=polling&t=21xauq80 404 in 106ms
 GET /api/socket-health 200 in 35ms
 GET /api/socket-health 200 in 136ms
 GET /socket.io?EIO=4&transport=polling&t=21yqr50t 404 in 236ms
 GET /socket.io?EIO=4&transport=polling&t=21yuk6na 404 in 114ms
 GET /api/socket-health 200 in 27ms
 GET /api/socket-health 200 in 35ms
 GET /socket.io?EIO=4&transport=polling&t=2209y96c 404 in 204ms
 GET /socket.io?EIO=4&transport=polling&t=220ayeag 404 in 102ms
 GET /api/socket-health 200 in 27ms
 GET /api/socket-health 200 in 109ms
 GET /socket.io?EIO=4&transport=polling&t=221tu6j9 404 in 193ms
 GET /socket.io?EIO=4&transport=polling&t=221wx8xn 404 in 93ms
 GET /api/socket-health 200 in 26ms
 GET /api/socket-health 200 in 124ms
 GET /socket.io?EIO=4&transport=polling&t=223da784 404 in 206ms
 GET /socket.io?EIO=4&transport=polling&t=223gt461 404 in 99ms
 GET /api/socket-health 200 in 27ms
 GET /api/socket-health 200 in 122ms
 GET /socket.io?EIO=4&transport=polling&t=224x0lc8 404 in 221ms
 GET /socket.io?EIO=4&transport=polling&t=2250g2b9 404 in 110ms
 GET /api/socket-health 200 in 30ms
 GET /api/socket-health 200 in 127ms
 GET /socket.io?EIO=4&transport=polling&t=226ghhq0 404 in 198ms
 GET /socket.io?EIO=4&transport=polling&t=226k2rxz 404 in 101ms
 GET /api/socket-health 200 in 24ms
 GET /api/socket-health 200 in 100ms
 GET /socket.io?EIO=4&transport=polling&t=227zsr95 404 in 105ms
 GET /socket.io?EIO=4&transport=polling&t=2282lxzv 404 in 95ms
 GET /api/socket-health 200 in 27ms
 GET /api/socket-health 200 in 37ms
 GET /socket.io?EIO=4&transport=polling&t=229jag04 404 in 207ms
 GET /socket.io?EIO=4&transport=polling&t=229kdru9 404 in 104ms
 GET /api/socket-health 200 in 23ms
 GET /api/socket-health 200 in 106ms
 GET /socket.io?EIO=4&transport=polling&t=22b2tg6g 404 in 190ms
 GET /socket.io?EIO=4&transport=polling&t=22b5tjx0 404 in 93ms
 GET /api/socket-health 200 in 24ms
 GET /api/socket-health 200 in 116ms
 GET /socket.io?EIO=4&transport=polling&t=22cmb8qr 404 in 197ms
 GET /socket.io?EIO=4&transport=polling&t=22cplzgs 404 in 100ms
 GET /api/socket-health 200 in 25ms
 GET /api/socket-health 200 in 107ms
 GET /socket.io?EIO=4&transport=polling&t=22e5wjuu 404 in 114ms
 GET /socket.io?EIO=4&transport=polling&t=22e8w097 404 in 97ms
 GET /api/socket-health 200 in 22ms
 GET /api/socket-health 200 in 105ms
 GET /socket.io?EIO=4&transport=polling&t=22fpn45z 404 in 194ms
 GET /socket.io?EIO=4&transport=polling&t=22fsm43i 404 in 102ms
 GET /api/socket-health 200 in 24ms
 GET /api/socket-health 200 in 110ms
 GET /socket.io?EIO=4&transport=polling&t=22h95vhh 404 in 262ms
 GET /socket.io?EIO=4&transport=polling&t=22hc9z8p 404 in 161ms
 GET /api/socket-health 200 in 24ms
 GET /api/socket-health 200 in 115ms
 GET /socket.io?EIO=4&transport=polling&t=22isuj81 404 in 192ms
 GET /socket.io?EIO=4&transport=polling&t=22iw372f 404 in 93ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
=== FRIEND REQUEST GET START ===
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
Request type: received User: sayantan2@gmail.com
âœ… Database connected
 POST /api/users/heartbeat 200 in 172ms
âœ… Current user found: {
  id: new ObjectId('6901f85f42c5d010fa811206'),
  email: 'sayantan2@gmail.com',
  friendRequestsCount: 0,
  sentRequestsCount: 1
}
Processing received requests...
Raw friendRequests: []
Processed receivedRequests: []
Populating sender details...
Final populated requests: []
=== FRIEND REQUEST GET END (received) ===
 GET /api/friends/request?type=received 200 in 491ms
=== FRIEND REQUEST GET START ===
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
Request type: sent User: sayantan2@gmail.com
âœ… Database connected
âœ… Current user found: {
  id: new ObjectId('6901f85f42c5d010fa811206'),
  email: 'sayantan2@gmail.com',
  friendRequestsCount: 0,
  sentRequestsCount: 1
}
Processing sent requests...
Raw sentRequests: [
  {
    from: new ObjectId('6901f85f42c5d010fa811206'),
    fromName: 'sayantan2',
    to: new ObjectId('6905adf16a22b7843b006183'),
    toName: 'sayantan3',
    status: 'pending',
    _id: new ObjectId('6905cdce14ad0d0f020b3985'),
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
Filtering sent request: { status: 'pending', to: new ObjectId('6905adf16a22b7843b006183') }
Mapping sent request: {
  from: new ObjectId('6901f85f42c5d010fa811206'),
  fromName: 'sayantan2',
  to: new ObjectId('6905adf16a22b7843b006183'),
  toName: 'sayantan3',
  status: 'pending',
  _id: new ObjectId('6905cdce14ad0d0f020b3985'),
  createdAt: 2025-11-01T09:07:26.707Z,
  updatedAt: 2025-11-01T09:07:26.707Z
}
Processed sentRequests: [
  {
    id: '6905cdce14ad0d0f020b3985',
    to: {
      id: '6905adf16a22b7843b006183',
      username: 'sayantan3',
      email: '',
      profilePicture: null
    },
    status: 'pending',
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
Populating recipient details...
Looking up recipient: 6905adf16a22b7843b006183
Found recipient: sayantan3
Final populated sent requests: [
  {
    id: '6905cdce14ad0d0f020b3985',
    to: {
      id: '6905adf16a22b7843b006183',
      username: 'sayantan3',
      email: 'sayantan3@gmail.com',
      profilePicture: undefined
    },
    status: 'pending',
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
=== FRIEND REQUEST GET END (sent) ===
 GET /api/friends/request?type=sent 200 in 144ms
 GET /api/socket-health 200 in 24ms
 GET /api/socket-health 200 in 117ms
 GET /socket.io?EIO=4&transport=polling&t=22kcdtbp 404 in 197ms
 GET /socket.io?EIO=4&transport=polling&t=22kfn9ei 404 in 102ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
 GET /api/conversations 200 in 139ms
 GET /api/socket-health 200 in 24ms
 GET /api/socket-health 200 in 113ms
 GET /socket.io?EIO=4&transport=polling&t=22lvs449 404 in 114ms
 GET /socket.io?EIO=4&transport=polling&t=22lz0uln 404 in 95ms
 GET /api/socket-health 200 in 24ms
 GET /api/socket-health 200 in 104ms
 GET /socket.io?EIO=4&transport=polling&t=22nfcmks 404 in 116ms
 GET /socket.io?EIO=4&transport=polling&t=22nibt04 404 in 92ms
 GET /api/socket-health 200 in 29ms
 GET /api/socket-health 200 in 103ms
 GET /socket.io?EIO=4&transport=polling&t=22oz7df1 404 in 193ms
 GET /socket.io?EIO=4&transport=polling&t=22p25v72 404 in 97ms
 GET /api/socket-health 200 in 26ms
 GET /api/socket-health 200 in 125ms
 GET /socket.io?EIO=4&transport=polling&t=22qiqsbi 404 in 218ms
 GET /socket.io?EIO=4&transport=polling&t=22qm8ul7 404 in 97ms
 GET /api/socket-health 200 in 39ms
 GET /api/socket-health 200 in 136ms
 GET /socket.io?EIO=4&transport=polling&t=22s2kke6 404 in 232ms
 GET /socket.io?EIO=4&transport=polling&t=22s6e4tj 404 in 104ms
 GET /api/socket-health 200 in 28ms
 GET /api/socket-health 200 in 120ms
 GET /socket.io?EIO=4&transport=polling&t=22tll32f 404 in 218ms
 GET /socket.io?EIO=4&transport=polling&t=22tozb4p 404 in 101ms
 GET /api/socket-health 200 in 31ms
 GET /api/socket-health 200 in 114ms
 GET /socket.io?EIO=4&transport=polling&t=22v59qoh 404 in 204ms
 GET /socket.io?EIO=4&transport=polling&t=22v8hmtb 404 in 103ms
 GET /api/socket-health 200 in 23ms
 GET /api/socket-health 200 in 108ms
 GET /socket.io?EIO=4&transport=polling&t=22wotqth 404 in 198ms
 GET /socket.io?EIO=4&transport=polling&t=22wrv8ly 404 in 97ms
 GET /api/socket-health 200 in 30ms
 GET /api/socket-health 200 in 121ms
 GET /socket.io?EIO=4&transport=polling&t=22y8l3vs 404 in 137ms
 GET /socket.io?EIO=4&transport=polling&t=22yc0if0 404 in 160ms
 GET /api/socket-health 200 in 32ms
 GET /api/socket-health 200 in 117ms
 GET /socket.io?EIO=4&transport=polling&t=22zs6c3g 404 in 211ms
 GET /socket.io?EIO=4&transport=polling&t=22zvh6te 404 in 107ms
 GET /api/socket-health 200 in 26ms
 GET /api/socket-health 200 in 120ms
 GET /socket.io?EIO=4&transport=polling&t=231bh35q 404 in 207ms
 GET /socket.io?EIO=4&transport=polling&t=231evz8e 404 in 89ms
 GET /api/socket-health 200 in 37ms
 GET /api/socket-health 200 in 125ms
 GET /socket.io?EIO=4&transport=polling&t=232v5ddz 404 in 130ms
 GET /socket.io?EIO=4&transport=polling&t=232yof0g 404 in 101ms
 GET /api/socket-health 200 in 25ms
 GET /api/socket-health 200 in 114ms
 GET /socket.io?EIO=4&transport=polling&t=234eovid 404 in 203ms
 GET /socket.io?EIO=4&transport=polling&t=234hwsxf 404 in 94ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
=== FRIEND REQUEST GET START ===
 GET /api/socket-health 200 in 59ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
Request type: received User: sayantan2@gmail.com
âœ… Database connected
âœ… Current user found: {
  id: new ObjectId('6901f85f42c5d010fa811206'),
  email: 'sayantan2@gmail.com',
  friendRequestsCount: 0,
  sentRequestsCount: 1
}
Processing received requests...
Raw friendRequests: []
Processed receivedRequests: []
Populating sender details...
Final populated requests: []
=== FRIEND REQUEST GET END (received) ===
 GET /api/friends/request?type=received 200 in 196ms
 GET /api/socket-health 200 in 116ms
 GET /api/friends 200 in 316ms
=== FRIEND REQUEST GET START ===
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
Request type: sent User: sayantan2@gmail.com
âœ… Database connected
 GET /socket.io?EIO=4&transport=polling&t=235zv7i4 404 in 250ms
 GET /socket.io?EIO=4&transport=polling&t=2363g0xt 404 in 129ms
âœ… Current user found: {
  id: new ObjectId('6901f85f42c5d010fa811206'),
  email: 'sayantan2@gmail.com',
  friendRequestsCount: 0,
  sentRequestsCount: 1
}
Processing sent requests...
Raw sentRequests: [
  {
    from: new ObjectId('6901f85f42c5d010fa811206'),
    fromName: 'sayantan2',
    to: new ObjectId('6905adf16a22b7843b006183'),
    toName: 'sayantan3',
    status: 'pending',
    _id: new ObjectId('6905cdce14ad0d0f020b3985'),
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
Filtering sent request: { status: 'pending', to: new ObjectId('6905adf16a22b7843b006183') }
Mapping sent request: {
  from: new ObjectId('6901f85f42c5d010fa811206'),
  fromName: 'sayantan2',
  to: new ObjectId('6905adf16a22b7843b006183'),
  toName: 'sayantan3',
  status: 'pending',
  _id: new ObjectId('6905cdce14ad0d0f020b3985'),
  createdAt: 2025-11-01T09:07:26.707Z,
  updatedAt: 2025-11-01T09:07:26.707Z
}
Processed sentRequests: [
  {
    id: '6905cdce14ad0d0f020b3985',
    to: {
      id: '6905adf16a22b7843b006183',
      username: 'sayantan3',
      email: '',
      profilePicture: null
    },
    status: 'pending',
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
Populating recipient details...
Looking up recipient: 6905adf16a22b7843b006183
Found recipient: sayantan3
Final populated sent requests: [
  {
    id: '6905cdce14ad0d0f020b3985',
    to: {
      id: '6905adf16a22b7843b006183',
      username: 'sayantan3',
      email: 'sayantan3@gmail.com',
      profilePicture: undefined
    },
    status: 'pending',
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
=== FRIEND REQUEST GET END (sent) ===
 GET /api/friends/request?type=sent 200 in 221ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
 POST /api/users/heartbeat 200 in 193ms
 GET /api/socket-health 200 in 25ms
 GET /api/socket-health 200 in 122ms
 GET /socket.io?EIO=4&transport=polling&t=237hkfpy 404 in 227ms
 GET /socket.io?EIO=4&transport=polling&t=237kzqik 404 in 113ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
 GET /api/socket-health 200 in 55ms
 GET /api/socket-health 200 in 119ms
 GET /api/conversations 200 in 278ms
 GET /socket.io?EIO=4&transport=polling&t=2391zev9 404 in 222ms
 GET /socket.io?EIO=4&transport=polling&t=2395c788 404 in 109ms
 GET /api/socket-health 200 in 26ms
 GET /api/socket-health 200 in 114ms
 GET /socket.io?EIO=4&transport=polling&t=23ako6m9 404 in 223ms
 GET /socket.io?EIO=4&transport=polling&t=23anw696 404 in 104ms
 GET /api/socket-health 200 in 32ms
 GET /api/socket-health 200 in 120ms
 GET /socket.io?EIO=4&transport=polling&t=23c4fjk8 404 in 125ms
 GET /socket.io?EIO=4&transport=polling&t=23c7t0v0 404 in 101ms
 GET /api/socket-health 200 in 25ms
 GET /api/socket-health 200 in 124ms
 GET /socket.io?EIO=4&transport=polling&t=23do1b1c 404 in 212ms
 GET /socket.io?EIO=4&transport=polling&t=23drjxvy 404 in 94ms
 GET /api/socket-health 200 in 30ms
 GET /api/socket-health 200 in 28ms
 GET /socket.io?EIO=4&transport=polling&t=23f7f19s 404 in 215ms
 GET /socket.io?EIO=4&transport=polling&t=23f87x5y 404 in 108ms
 GET /api/socket-health 200 in 25ms
 GET /api/socket-health 200 in 114ms
 GET /socket.io?EIO=4&transport=polling&t=23gqsuyq 404 in 203ms
 GET /socket.io?EIO=4&transport=polling&t=23gtz5a0 404 in 98ms
 GET /api/socket-health 200 in 22ms
 GET /api/socket-health 200 in 107ms
 GET /socket.io?EIO=4&transport=polling&t=23iamqay 404 in 112ms
 GET /socket.io?EIO=4&transport=polling&t=23idnlqg 404 in 97ms
 GET /api/socket-health 200 in 24ms
 GET /api/socket-health 200 in 104ms
 GET /socket.io?EIO=4&transport=polling&t=23ju34an 404 in 196ms
 GET /socket.io?EIO=4&transport=polling&t=23jx11is 404 in 101ms
 GET /api/socket-health 200 in 23ms
 GET /api/socket-health 200 in 106ms
 GET /socket.io?EIO=4&transport=polling&t=23ldgg6y 404 in 193ms
 GET /socket.io?EIO=4&transport=polling&t=23lgfkx9 404 in 97ms
 GET /api/socket-health 200 in 26ms
 GET /api/socket-health 200 in 147ms
 GET /socket.io?EIO=4&transport=polling&t=23mxe8ja 404 in 249ms
 GET /socket.io?EIO=4&transport=polling&t=23n1j725 404 in 111ms
 GET /api/socket-health 200 in 30ms
 GET /api/socket-health 200 in 134ms
 GET /socket.io?EIO=4&transport=polling&t=23oh1oxg 404 in 232ms
 GET /socket.io?EIO=4&transport=polling&t=23oksecc 404 in 131ms
 GET /api/socket-health 200 in 26ms
 GET /api/socket-health 200 in 118ms
 GET /socket.io?EIO=4&transport=polling&t=23q0dm62 404 in 108ms
 GET /socket.io?EIO=4&transport=polling&t=23q3p5hu 404 in 118ms
 GET /api/socket-health 200 in 25ms
 GET /api/socket-health 200 in 102ms
 GET /socket.io?EIO=4&transport=polling&t=23rk0anv 404 in 105ms
 GET /socket.io?EIO=4&transport=polling&t=23rmwr28 404 in 98ms
 GET /api/socket-health 200 in 25ms
 GET /api/socket-health 200 in 147ms
 GET /socket.io?EIO=4&transport=polling&t=23t3i50c 404 in 138ms
 GET /socket.io?EIO=4&transport=polling&t=23t7m4b8 404 in 106ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
=== FRIEND REQUEST GET START ===
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
Request type: received User: sayantan2@gmail.com
âœ… Database connected
 POST /api/users/heartbeat 200 in 175ms
âœ… Current user found: {
  id: new ObjectId('6901f85f42c5d010fa811206'),
  email: 'sayantan2@gmail.com',
  friendRequestsCount: 0,
  sentRequestsCount: 1
}
Processing received requests...
Raw friendRequests: []
Processed receivedRequests: []
Populating sender details...
Final populated requests: []
=== FRIEND REQUEST GET END (received) ===
 GET /api/friends/request?type=received 200 in 415ms
=== FRIEND REQUEST GET START ===
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
Request type: sent User: sayantan2@gmail.com
âœ… Database connected
âœ… Current user found: {
  id: new ObjectId('6901f85f42c5d010fa811206'),
  email: 'sayantan2@gmail.com',
  friendRequestsCount: 0,
  sentRequestsCount: 1
}
Processing sent requests...
Raw sentRequests: [
  {
    from: new ObjectId('6901f85f42c5d010fa811206'),
    fromName: 'sayantan2',
    to: new ObjectId('6905adf16a22b7843b006183'),
    toName: 'sayantan3',
    status: 'pending',
    _id: new ObjectId('6905cdce14ad0d0f020b3985'),
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
Filtering sent request: { status: 'pending', to: new ObjectId('6905adf16a22b7843b006183') }
Mapping sent request: {
  from: new ObjectId('6901f85f42c5d010fa811206'),
  fromName: 'sayantan2',
  to: new ObjectId('6905adf16a22b7843b006183'),
  toName: 'sayantan3',
  status: 'pending',
  _id: new ObjectId('6905cdce14ad0d0f020b3985'),
  createdAt: 2025-11-01T09:07:26.707Z,
  updatedAt: 2025-11-01T09:07:26.707Z
}
Processed sentRequests: [
  {
    id: '6905cdce14ad0d0f020b3985',
    to: {
      id: '6905adf16a22b7843b006183',
      username: 'sayantan3',
      email: '',
      profilePicture: null
    },
    status: 'pending',
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
Populating recipient details...
Looking up recipient: 6905adf16a22b7843b006183
Found recipient: sayantan3
Final populated sent requests: [
  {
    id: '6905cdce14ad0d0f020b3985',
    to: {
      id: '6905adf16a22b7843b006183',
      username: 'sayantan3',
      email: 'sayantan3@gmail.com',
      profilePicture: undefined
    },
    status: 'pending',
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
=== FRIEND REQUEST GET END (sent) ===
 GET /api/friends/request?type=sent 200 in 183ms
 GET /api/socket-health 200 in 24ms
 GET /api/socket-health 200 in 111ms
 GET /socket.io?EIO=4&transport=polling&t=23umy2ph 404 in 189ms
 GET /socket.io?EIO=4&transport=polling&t=23uq3ibg 404 in 98ms
 GET /api/socket-health 200 in 29ms
 GET /api/socket-health 200 in 128ms
 GET /socket.io?EIO=4&transport=polling&t=23w6trp5 404 in 222ms
 GET /socket.io?EIO=4&transport=polling&t=23waesak 404 in 107ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
 GET /api/conversations 200 in 125ms
 GET /api/socket-health 200 in 30ms
 GET /api/socket-health 200 in 107ms
 GET /socket.io?EIO=4&transport=polling&t=23xqagh1 404 in 114ms
 GET /socket.io?EIO=4&transport=polling&t=23xtakt4 404 in 96ms
 GET /api/socket-health 200 in 25ms
 GET /api/socket-health 200 in 108ms
 GET /socket.io?EIO=4&transport=polling&t=23z9ooqd 404 in 204ms
 GET /socket.io?EIO=4&transport=polling&t=23zcq8zr 404 in 99ms
 GET /api/socket-health 200 in 28ms
 GET /api/socket-health 200 in 113ms
 GET /socket.io?EIO=4&transport=polling&t=240tcfjh 404 in 200ms
 GET /socket.io?EIO=4&transport=polling&t=240wj3bu 404 in 96ms
 GET /api/socket-health 200 in 23ms
 GET /api/socket-health 200 in 110ms
 GET /socket.io?EIO=4&transport=polling&t=242cp31t 404 in 202ms
 GET /socket.io?EIO=4&transport=polling&t=242ftnlt 404 in 94ms
 GET /api/socket-health 200 in 27ms
 GET /api/socket-health 200 in 107ms
 GET /socket.io?EIO=4&transport=polling&t=243wba9v 404 in 205ms
 GET /socket.io?EIO=4&transport=polling&t=243zc43v 404 in 112ms
 GET /api/socket-health 200 in 24ms
 GET /api/socket-health 200 in 117ms
 GET /socket.io?EIO=4&transport=polling&t=245fx6w6 404 in 122ms
 GET /socket.io?EIO=4&transport=polling&t=245j7gtb 404 in 101ms
 GET /api/socket-health 200 in 25ms
 GET /api/socket-health 200 in 107ms
 GET /socket.io?EIO=4&transport=polling&t=246zhv3g 404 in 198ms
 GET /socket.io?EIO=4&transport=polling&t=2472homb 404 in 95ms
 GET /api/socket-health 200 in 31ms
 GET /api/socket-health 200 in 108ms
 GET /socket.io?EIO=4&transport=polling&t=248jawwf 404 in 114ms
 GET /socket.io?EIO=4&transport=polling&t=248mbu6m 404 in 99ms
 GET /api/socket-health 200 in 23ms
 GET /api/socket-health 200 in 111ms
 GET /socket.io?EIO=4&transport=polling&t=24a2jzxd 404 in 204ms
 GET /socket.io?EIO=4&transport=polling&t=24a5nhky 404 in 97ms
 GET /api/socket-health 200 in 30ms
 GET /api/socket-health 200 in 112ms
 GET /socket.io?EIO=4&transport=polling&t=24bmcq1t 404 in 210ms
 GET /socket.io?EIO=4&transport=polling&t=24bpi4ok 404 in 107ms
 GET /api/socket-health 200 in 24ms
 GET /api/socket-health 200 in 106ms
 GET /socket.io?EIO=4&transport=polling&t=24d5fqgq 404 in 196ms
 GET /socket.io?EIO=4&transport=polling&t=24d8fbjq 404 in 93ms
 GET /api/socket-health 200 in 27ms
 GET /api/socket-health 200 in 109ms
 GET /socket.io?EIO=4&transport=polling&t=24ep37mv 404 in 116ms
 GET /socket.io?EIO=4&transport=polling&t=24es6sje 404 in 100ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
=== FRIEND REQUEST GET START ===
 GET /api/socket-health 200 in 64ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
Request type: received User: sayantan2@gmail.com
âœ… Database connected
âœ… Current user found: {
  id: new ObjectId('6901f85f42c5d010fa811206'),
  email: 'sayantan2@gmail.com',
  friendRequestsCount: 0,
  sentRequestsCount: 1
}
Processing received requests...
Raw friendRequests: []
Processed receivedRequests: []
Populating sender details...
Final populated requests: []
=== FRIEND REQUEST GET END (received) ===
 GET /api/friends/request?type=received 200 in 174ms
 GET /api/socket-health 200 in 116ms
=== FRIEND REQUEST GET START ===
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
 GET /api/friends 200 in 297ms
Request type: sent User: sayantan2@gmail.com
âœ… Database connected
 GET /socket.io?EIO=4&transport=polling&t=24ga8vg6 404 in 232ms
 GET /socket.io?EIO=4&transport=polling&t=24gdmflz 404 in 112ms
âœ… Current user found: {
  id: new ObjectId('6901f85f42c5d010fa811206'),
  email: 'sayantan2@gmail.com',
  friendRequestsCount: 0,
  sentRequestsCount: 1
}
Processing sent requests...
Raw sentRequests: [
  {
    from: new ObjectId('6901f85f42c5d010fa811206'),
    fromName: 'sayantan2',
    to: new ObjectId('6905adf16a22b7843b006183'),
    toName: 'sayantan3',
    status: 'pending',
    _id: new ObjectId('6905cdce14ad0d0f020b3985'),
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
Filtering sent request: { status: 'pending', to: new ObjectId('6905adf16a22b7843b006183') }
Mapping sent request: {
  from: new ObjectId('6901f85f42c5d010fa811206'),
  fromName: 'sayantan2',
  to: new ObjectId('6905adf16a22b7843b006183'),
  toName: 'sayantan3',
  status: 'pending',
  _id: new ObjectId('6905cdce14ad0d0f020b3985'),
  createdAt: 2025-11-01T09:07:26.707Z,
  updatedAt: 2025-11-01T09:07:26.707Z
}
Processed sentRequests: [
  {
    id: '6905cdce14ad0d0f020b3985',
    to: {
      id: '6905adf16a22b7843b006183',
      username: 'sayantan3',
      email: '',
      profilePicture: null
    },
    status: 'pending',
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
Populating recipient details...
Looking up recipient: 6905adf16a22b7843b006183
Found recipient: sayantan3
Final populated sent requests: [
  {
    id: '6905cdce14ad0d0f020b3985',
    to: {
      id: '6905adf16a22b7843b006183',
      username: 'sayantan3',
      email: 'sayantan3@gmail.com',
      profilePicture: undefined
    },
    status: 'pending',
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
=== FRIEND REQUEST GET END (sent) ===
 GET /api/friends/request?type=sent 200 in 211ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
 POST /api/users/heartbeat 200 in 183ms
 GET /api/socket-health 200 in 23ms
 GET /api/socket-health 200 in 107ms
 GET /socket.io?EIO=4&transport=polling&t=24hsdbgy 404 in 111ms
 GET /socket.io?EIO=4&transport=polling&t=24hvfnv5 404 in 96ms
 GET /api/socket-health 200 in 24ms
 GET /api/socket-health 200 in 110ms
 GET /socket.io?EIO=4&transport=polling&t=24jbtias 404 in 202ms
 GET /socket.io?EIO=4&transport=polling&t=24jexk7r 404 in 100ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
 GET /api/socket-health 200 in 44ms
 GET /api/socket-health 200 in 108ms
 GET /api/conversations 200 in 242ms
 GET /socket.io?EIO=4&transport=polling&t=24kvyadt 404 in 190ms
 GET /socket.io?EIO=4&transport=polling&t=24kz0iz0 404 in 95ms
 GET /api/socket-health 200 in 22ms
 GET /api/socket-health 200 in 103ms
 GET /socket.io?EIO=4&transport=polling&t=24mev8hk 404 in 197ms
 GET /socket.io?EIO=4&transport=polling&t=24mhs1mk 404 in 93ms
 GET /api/socket-health 200 in 30ms
 GET /api/socket-health 200 in 115ms
 GET /socket.io?EIO=4&transport=polling&t=24nyi7rq 404 in 196ms
 GET /socket.io?EIO=4&transport=polling&t=24o1r0ou 404 in 95ms
 GET /api/socket-health 200 in 23ms
 GET /api/socket-health 200 in 103ms
 GET /socket.io?EIO=4&transport=polling&t=24pi8r1s 404 in 229ms
 GET /socket.io?EIO=4&transport=polling&t=24pl6fqd 404 in 127ms
 GET /api/socket-health 200 in 29ms
 GET /api/socket-health 200 in 109ms
 GET /socket.io?EIO=4&transport=polling&t=24r1xh2g 404 in 204ms
 GET /socket.io?EIO=4&transport=polling&t=24r4z8ew 404 in 104ms
 GET /api/socket-health 200 in 23ms
 GET /api/socket-health 200 in 115ms
 GET /socket.io?EIO=4&transport=polling&t=24sl7hv1 404 in 212ms
 GET /socket.io?EIO=4&transport=polling&t=24sogeht 404 in 99ms
 GET /api/socket-health 200 in 30ms
 GET /api/socket-health 200 in 106ms
 GET /socket.io?EIO=4&transport=polling&t=24u4yiwt 404 in 114ms
 GET /socket.io?EIO=4&transport=polling&t=24u7zdog 404 in 96ms
 GET /api/socket-health 200 in 24ms
 GET /api/socket-health 200 in 120ms
 GET /socket.io?EIO=4&transport=polling&t=24vo7itg 404 in 237ms
 GET /socket.io?EIO=4&transport=polling&t=24vrm5fq 404 in 122ms
 GET /api/socket-health 200 in 42ms
 GET /api/socket-health 200 in 140ms
 GET /socket.io?EIO=4&transport=polling&t=24x886sj 404 in 133ms
 GET /socket.io?EIO=4&transport=polling&t=24xc5zj0 404 in 105ms
 GET /api/socket-health 200 in 24ms
 GET /api/socket-health 200 in 113ms
 GET /socket.io?EIO=4&transport=polling&t=24yrbmh0 404 in 199ms
 GET /socket.io?EIO=4&transport=polling&t=24yujrma 404 in 92ms
 GET /api/socket-health 200 in 27ms
 GET /api/socket-health 200 in 102ms
 GET /socket.io?EIO=4&transport=polling&t=250b1kes 404 in 186ms
 GET /socket.io?EIO=4&transport=polling&t=250dw6p9 404 in 94ms
 GET /api/socket-health 200 in 32ms
 GET /api/socket-health 200 in 118ms
 GET /socket.io?EIO=4&transport=polling&t=251uvsla 404 in 203ms
 GET /socket.io?EIO=4&transport=polling&t=251y9774 404 in 92ms
 GET /api/socket-health 200 in 32ms
 GET /api/socket-health 200 in 105ms
 GET /socket.io?EIO=4&transport=polling&t=253e2ovb 404 in 193ms
 GET /socket.io?EIO=4&transport=polling&t=253h03ul 404 in 96ms
=== FRIEND REQUEST GET START ===
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
Request type: received User: sayantan2@gmail.com
âœ… Database connected
âœ… Current user found: {
  id: new ObjectId('6901f85f42c5d010fa811206'),
  email: 'sayantan2@gmail.com',
  friendRequestsCount: 0,
  sentRequestsCount: 1
}
Processing received requests...
Raw friendRequests: []
Processed receivedRequests: []
Populating sender details...
Final populated requests: []
=== FRIEND REQUEST GET END (received) ===
 GET /api/friends/request?type=received 200 in 92ms
=== FRIEND REQUEST GET START ===
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
Request type: sent User: sayantan2@gmail.com
âœ… Database connected
âœ… Current user found: {
  id: new ObjectId('6901f85f42c5d010fa811206'),
  email: 'sayantan2@gmail.com',
  friendRequestsCount: 0,
  sentRequestsCount: 1
}
Processing sent requests...
Raw sentRequests: [
  {
    from: new ObjectId('6901f85f42c5d010fa811206'),
    fromName: 'sayantan2',
    to: new ObjectId('6905adf16a22b7843b006183'),
    toName: 'sayantan3',
    status: 'pending',
    _id: new ObjectId('6905cdce14ad0d0f020b3985'),
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
Filtering sent request: { status: 'pending', to: new ObjectId('6905adf16a22b7843b006183') }
Mapping sent request: {
  from: new ObjectId('6901f85f42c5d010fa811206'),
  fromName: 'sayantan2',
  to: new ObjectId('6905adf16a22b7843b006183'),
  toName: 'sayantan3',
  status: 'pending',
  _id: new ObjectId('6905cdce14ad0d0f020b3985'),
  createdAt: 2025-11-01T09:07:26.707Z,
  updatedAt: 2025-11-01T09:07:26.707Z
}
Processed sentRequests: [
  {
    id: '6905cdce14ad0d0f020b3985',
    to: {
      id: '6905adf16a22b7843b006183',
      username: 'sayantan3',
      email: '',
      profilePicture: null
    },
    status: 'pending',
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
Populating recipient details...
Looking up recipient: 6905adf16a22b7843b006183
Found recipient: sayantan3
Final populated sent requests: [
  {
    id: '6905cdce14ad0d0f020b3985',
    to: {
      id: '6905adf16a22b7843b006183',
      username: 'sayantan3',
      email: 'sayantan3@gmail.com',
      profilePicture: undefined
    },
    status: 'pending',
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
=== FRIEND REQUEST GET END (sent) ===
 GET /api/friends/request?type=sent 200 in 153ms
 GET /api/socket-health 200 in 23ms
 GET /api/socket-health 200 in 112ms
 GET /socket.io?EIO=4&transport=polling&t=254xqx92 404 in 196ms
 GET /socket.io?EIO=4&transport=polling&t=2550xuds 404 in 96ms
 GET /api/socket-health 200 in 24ms
 GET /api/socket-health 200 in 114ms
 GET /socket.io?EIO=4&transport=polling&t=256h5ivo 404 in 114ms
 GET /socket.io?EIO=4&transport=polling&t=256kdk6b 404 in 95ms
 GET /api/socket-health 200 in 25ms
 GET /api/socket-health 200 in 111ms
 GET /socket.io?EIO=4&transport=polling&t=2580l5vn 404 in 196ms
 GET /socket.io?EIO=4&transport=polling&t=2583pajn 404 in 95ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
 GET /api/conversations 200 in 141ms
 GET /api/socket-health 200 in 30ms
 GET /api/socket-health 200 in 108ms
 GET /socket.io?EIO=4&transport=polling&t=259k92qs 404 in 262ms
 GET /socket.io?EIO=4&transport=polling&t=259na9kj 404 in 157ms
 GET /api/socket-health 200 in 27ms
 GET /api/socket-health 200 in 108ms
 GET /socket.io?EIO=4&transport=polling&t=25b40m7w 404 in 114ms
 GET /socket.io?EIO=4&transport=polling&t=25b71e6a 404 in 99ms
 GET /api/socket-health 200 in 23ms
 GET /api/socket-health 200 in 105ms
 GET /socket.io?EIO=4&transport=polling&t=25cndwhp 404 in 190ms
 GET /socket.io?EIO=4&transport=polling&t=25cqch6c 404 in 88ms
 GET /api/socket-health 200 in 27ms
 GET /api/socket-health 200 in 110ms
 GET /socket.io?EIO=4&transport=polling&t=25e6z4ko 404 in 199ms
 GET /socket.io?EIO=4&transport=polling&t=25ea2rxu 404 in 98ms
 GET /api/socket-health 200 in 27ms
 GET /api/socket-health 200 in 130ms
 GET /socket.io?EIO=4&transport=polling&t=25fqlqod 404 in 211ms
 GET /socket.io?EIO=4&transport=polling&t=25fu9dfh 404 in 89ms
 GET /api/socket-health 200 in 31ms
 GET /api/socket-health 200 in 131ms
 GET /socket.io?EIO=4&transport=polling&t=25ha3rrc 404 in 218ms
 GET /socket.io?EIO=4&transport=polling&t=25hdrh8c 404 in 96ms
 GET /api/socket-health 200 in 25ms
 GET /api/socket-health 200 in 148ms
 GET /socket.io?EIO=4&transport=polling&t=25itvyog 404 in 250ms
 GET /socket.io?EIO=4&transport=polling&t=25iy0upg 404 in 100ms
 GET /api/socket-health 200 in 28ms
 GET /api/socket-health 200 in 110ms
 GET /socket.io?EIO=4&transport=polling&t=25kd6orw 404 in 116ms
 GET /socket.io?EIO=4&transport=polling&t=25kgajik 404 in 95ms
 GET /api/socket-health 200 in 27ms
 GET /api/socket-health 200 in 113ms
 GET /socket.io?EIO=4&transport=polling&t=25lwn0bt 404 in 208ms
 GET /socket.io?EIO=4&transport=polling&t=25lzuuzo 404 in 99ms
 GET /api/socket-health 200 in 21ms
 GET /api/socket-health 200 in 114ms
 GET /socket.io?EIO=4&transport=polling&t=25ngif18 404 in 217ms
 GET /socket.io?EIO=4&transport=polling&t=25njq2q1 404 in 109ms
 GET /api/socket-health 200 in 24ms
 GET /api/socket-health 200 in 110ms
 GET /socket.io?EIO=4&transport=polling&t=25ozux1k 404 in 197ms
 GET /socket.io?EIO=4&transport=polling&t=25p2yofn 404 in 90ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
=== FRIEND REQUEST GET START ===
 GET /api/socket-health 200 in 76ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
Request type: received User: sayantan2@gmail.com
âœ… Database connected
 GET /api/friends 200 in 201ms
 GET /api/socket-health 200 in 122ms
 GET /socket.io?EIO=4&transport=polling&t=25qlepn2 404 in 221ms
 GET /socket.io?EIO=4&transport=polling&t=25qp4r3d 404 in 103ms
âœ… Current user found: {
  id: new ObjectId('6901f85f42c5d010fa811206'),
  email: 'sayantan2@gmail.com',
  friendRequestsCount: 0,
  sentRequestsCount: 1
}
Processing received requests...
Raw friendRequests: []
Processed receivedRequests: []
Populating sender details...
Final populated requests: []
=== FRIEND REQUEST GET END (received) ===
 GET /api/friends/request?type=received 200 in 602ms
=== FRIEND REQUEST GET START ===
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
Request type: sent User: sayantan2@gmail.com
âœ… Database connected
 POST /api/users/heartbeat 200 in 672ms
âœ… Current user found: {
  id: new ObjectId('6901f85f42c5d010fa811206'),
  email: 'sayantan2@gmail.com',
  friendRequestsCount: 0,
  sentRequestsCount: 1
}
Processing sent requests...
Raw sentRequests: [
  {
    from: new ObjectId('6901f85f42c5d010fa811206'),
    fromName: 'sayantan2',
    to: new ObjectId('6905adf16a22b7843b006183'),
    toName: 'sayantan3',
    status: 'pending',
    _id: new ObjectId('6905cdce14ad0d0f020b3985'),
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
Filtering sent request: { status: 'pending', to: new ObjectId('6905adf16a22b7843b006183') }
Mapping sent request: {
  from: new ObjectId('6901f85f42c5d010fa811206'),
  fromName: 'sayantan2',
  to: new ObjectId('6905adf16a22b7843b006183'),
  toName: 'sayantan3',
  status: 'pending',
  _id: new ObjectId('6905cdce14ad0d0f020b3985'),
  createdAt: 2025-11-01T09:07:26.707Z,
  updatedAt: 2025-11-01T09:07:26.707Z
}
Processed sentRequests: [
  {
    id: '6905cdce14ad0d0f020b3985',
    to: {
      id: '6905adf16a22b7843b006183',
      username: 'sayantan3',
      email: '',
      profilePicture: null
    },
    status: 'pending',
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
Populating recipient details...
Looking up recipient: 6905adf16a22b7843b006183
Found recipient: sayantan3
Final populated sent requests: [
  {
    id: '6905cdce14ad0d0f020b3985',
    to: {
      id: '6905adf16a22b7843b006183',
      username: 'sayantan3',
      email: 'sayantan3@gmail.com',
      profilePicture: undefined
    },
    status: 'pending',
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
=== FRIEND REQUEST GET END (sent) ===
 GET /api/friends/request?type=sent 200 in 123ms
 GET /api/socket-health 200 in 52ms
 GET /api/socket-health 200 in 115ms
 GET /socket.io?EIO=4&transport=polling&t=25s3uj6y 404 in 118ms
 GET /socket.io?EIO=4&transport=polling&t=25s74i2c 404 in 97ms
 GET /api/socket-health 200 in 24ms
 GET /api/socket-health 200 in 113ms
 GET /socket.io?EIO=4&transport=polling&t=25tmmjon 404 in 198ms
 GET /socket.io?EIO=4&transport=polling&t=25tps26t 404 in 88ms
 GET /api/socket-health 200 in 32ms
 GET /api/socket-health 200 in 112ms
 GET /socket.io?EIO=4&transport=polling&t=25v6cqwz 404 in 226ms
 GET /socket.io?EIO=4&transport=polling&t=25v9jdz1 404 in 120ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
 GET /api/socket-health 200 in 49ms
 GET /api/socket-health 200 in 112ms
 GET /api/conversations 200 in 259ms
 GET /socket.io?EIO=4&transport=polling&t=25wq5wkv 404 in 207ms
 GET /socket.io?EIO=4&transport=polling&t=25wtbab6 404 in 105ms
 GET /api/socket-health 200 in 24ms
 GET /api/socket-health 200 in 108ms
 GET /socket.io?EIO=4&transport=polling&t=25y90oyb 404 in 201ms
 GET /socket.io?EIO=4&transport=polling&t=25yc25a4 404 in 96ms
 GET /api/socket-health 200 in 28ms
 GET /api/socket-health 200 in 111ms
 GET /socket.io?EIO=4&transport=polling&t=25zszqsm 404 in 197ms
 GET /socket.io?EIO=4&transport=polling&t=25zw4aff 404 in 95ms
 GET /api/socket-health 200 in 39ms
 GET /api/socket-health 200 in 138ms
 GET /socket.io?EIO=4&transport=polling&t=261cpwq4 404 in 243ms
 GET /socket.io?EIO=4&transport=polling&t=261gla88 404 in 110ms
 GET /api/socket-health 200 in 36ms
 GET /api/socket-health 200 in 127ms
 GET /socket.io?EIO=4&transport=polling&t=262wfltm 404 in 217ms
 GET /socket.io?EIO=4&transport=polling&t=26300fw1 404 in 105ms
 GET /api/socket-health 200 in 32ms
 GET /api/socket-health 200 in 126ms
 GET /socket.io?EIO=4&transport=polling&t=264fil2s 404 in 225ms
 GET /socket.io?EIO=4&transport=polling&t=264j2shz 404 in 106ms
 GET /api/socket-health 200 in 26ms
 GET /api/socket-health 200 in 107ms
 GET /socket.io?EIO=4&transport=polling&t=265z5doq 404 in 196ms
 GET /socket.io?EIO=4&transport=polling&t=266269ov 404 in 97ms
 GET /api/socket-health 200 in 23ms
 GET /api/socket-health 200 in 111ms
 GET /socket.io?EIO=4&transport=polling&t=267ijc6t 404 in 197ms
 GET /socket.io?EIO=4&transport=polling&t=267ln8zt 404 in 88ms
 GET /api/socket-health 200 in 29ms
 GET /api/socket-health 200 in 100ms
 GET /socket.io?EIO=4&transport=polling&t=2692agjs 404 in 105ms
 GET /socket.io?EIO=4&transport=polling&t=26953ovz 404 in 96ms
 GET /api/socket-health 200 in 25ms
 GET /api/socket-health 200 in 30ms
 GET /socket.io?EIO=4&transport=polling&t=26aliy97 404 in 206ms
 GET /socket.io?EIO=4&transport=polling&t=26amdn5z 404 in 104ms
 GET /api/socket-health 200 in 30ms
 GET /api/socket-health 200 in 116ms
 GET /socket.io?EIO=4&transport=polling&t=26c5hwyh 404 in 212ms
 GET /socket.io?EIO=4&transport=polling&t=26c8q8kp 404 in 106ms
 GET /api/socket-health 200 in 24ms
 GET /api/socket-health 200 in 109ms
 GET /socket.io?EIO=4&transport=polling&t=26dov7z1 404 in 200ms
 GET /socket.io?EIO=4&transport=polling&t=26dry57c 404 in 94ms
=== FRIEND REQUEST GET START ===
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
Request type: received User: sayantan2@gmail.com
âœ… Database connected
âœ… Current user found: {
  id: new ObjectId('6901f85f42c5d010fa811206'),
  email: 'sayantan2@gmail.com',
  friendRequestsCount: 0,
  sentRequestsCount: 1
}
Processing received requests...
Raw friendRequests: []
Processed receivedRequests: []
Populating sender details...
Final populated requests: []
=== FRIEND REQUEST GET END (received) ===
 GET /api/friends/request?type=received 200 in 89ms
=== FRIEND REQUEST GET START ===
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
Request type: sent User: sayantan2@gmail.com
âœ… Database connected
âœ… Current user found: {
  id: new ObjectId('6901f85f42c5d010fa811206'),
  email: 'sayantan2@gmail.com',
  friendRequestsCount: 0,
  sentRequestsCount: 1
}
Processing sent requests...
Raw sentRequests: [
  {
    from: new ObjectId('6901f85f42c5d010fa811206'),
    fromName: 'sayantan2',
    to: new ObjectId('6905adf16a22b7843b006183'),
    toName: 'sayantan3',
    status: 'pending',
    _id: new ObjectId('6905cdce14ad0d0f020b3985'),
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
Filtering sent request: { status: 'pending', to: new ObjectId('6905adf16a22b7843b006183') }
Mapping sent request: {
  from: new ObjectId('6901f85f42c5d010fa811206'),
  fromName: 'sayantan2',
  to: new ObjectId('6905adf16a22b7843b006183'),
  toName: 'sayantan3',
  status: 'pending',
  _id: new ObjectId('6905cdce14ad0d0f020b3985'),
  createdAt: 2025-11-01T09:07:26.707Z,
  updatedAt: 2025-11-01T09:07:26.707Z
}
Processed sentRequests: [
  {
    id: '6905cdce14ad0d0f020b3985',
    to: {
      id: '6905adf16a22b7843b006183',
      username: 'sayantan3',
      email: '',
      profilePicture: null
    },
    status: 'pending',
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
Populating recipient details...
Looking up recipient: 6905adf16a22b7843b006183
Found recipient: sayantan3
Final populated sent requests: [
  {
    id: '6905cdce14ad0d0f020b3985',
    to: {
      id: '6905adf16a22b7843b006183',
      username: 'sayantan3',
      email: 'sayantan3@gmail.com',
      profilePicture: undefined
    },
    status: 'pending',
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
=== FRIEND REQUEST GET END (sent) ===
 GET /api/friends/request?type=sent 200 in 135ms
 GET /api/socket-health 200 in 43ms
 GET /api/socket-health 200 in 136ms
 GET /socket.io?EIO=4&transport=polling&t=26f8ri54 404 in 137ms
 GET /socket.io?EIO=4&transport=polling&t=26fcnubv 404 in 139ms
 GET /api/socket-health 200 in 30ms
 GET /api/socket-health 200 in 118ms
 GET /socket.io?EIO=4&transport=polling&t=26grzrbx 404 in 195ms
 GET /socket.io?EIO=4&transport=polling&t=26gvadgk 404 in 102ms
 GET /api/socket-health 200 in 37ms
 GET /api/socket-health 200 in 135ms
 GET /socket.io?EIO=4&transport=polling&t=26ibzpjv 404 in 231ms
 GET /socket.io?EIO=4&transport=polling&t=26ifuswl 404 in 98ms
 GET /api/socket-health 200 in 35ms
 GET /api/socket-health 200 in 122ms
 GET /socket.io?EIO=4&transport=polling&t=26jv2rw9 404 in 124ms
 GET /socket.io?EIO=4&transport=polling&t=26jyheiy 404 in 111ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
 GET /api/conversations 200 in 132ms
 GET /api/socket-health 200 in 34ms
 GET /api/socket-health 200 in 121ms
 GET /socket.io?EIO=4&transport=polling&t=26lelqou 404 in 212ms
 GET /socket.io?EIO=4&transport=polling&t=26li02i7 404 in 101ms
 GET /api/socket-health 200 in 25ms
 GET /api/socket-health 200 in 104ms
 GET /socket.io?EIO=4&transport=polling&t=26my18c3 404 in 191ms
 GET /socket.io?EIO=4&transport=polling&t=26n0x2qn 404 in 92ms
 GET /api/socket-health 200 in 37ms
 GET /api/socket-health 200 in 128ms
 GET /socket.io?EIO=4&transport=polling&t=26ohvp6a 404 in 127ms
 GET /socket.io?EIO=4&transport=polling&t=26oliync 404 in 106ms
 GET /api/socket-health 200 in 24ms
 GET /api/socket-health 200 in 117ms
 GET /socket.io?EIO=4&transport=polling&t=26q12c8z 404 in 207ms
 GET /socket.io?EIO=4&transport=polling&t=26q4c2ue 404 in 94ms
 GET /api/socket-health 200 in 27ms
 GET /api/socket-health 200 in 113ms
 GET /socket.io?EIO=4&transport=polling&t=26rkpjsv 404 in 205ms
 GET /socket.io?EIO=4&transport=polling&t=26rnwo3o 404 in 99ms
 GET /api/socket-health 200 in 27ms
 GET /api/socket-health 200 in 116ms
 GET /socket.io?EIO=4&transport=polling&t=26t46uta 404 in 206ms
 GET /socket.io?EIO=4&transport=polling&t=26t7gjym 404 in 95ms
 GET /api/socket-health 200 in 36ms
 GET /api/socket-health 200 in 122ms
 GET /socket.io?EIO=4&transport=polling&t=26uoc058 404 in 217ms
 GET /socket.io?EIO=4&transport=polling&t=26ursuyt 404 in 105ms
 GET /api/socket-health 200 in 26ms
 GET /api/socket-health 200 in 113ms
 GET /socket.io?EIO=4&transport=polling&t=26w7hab7 404 in 215ms
 GET /socket.io?EIO=4&transport=polling&t=26wapinc 404 in 107ms
 GET /api/socket-health 200 in 26ms
 GET /api/socket-health 200 in 121ms
 GET /socket.io?EIO=4&transport=polling&t=26xr8uum 404 in 126ms
 GET /socket.io?EIO=4&transport=polling&t=26xum5nc 404 in 112ms
 GET /api/socket-health 200 in 23ms
 GET /api/socket-health 200 in 32ms
 GET /socket.io?EIO=4&transport=polling&t=26zafn92 404 in 198ms
 GET /socket.io?EIO=4&transport=polling&t=26zbcopd 404 in 104ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
=== FRIEND REQUEST GET START ===
 GET /api/socket-health 200 in 104ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
Request type: received User: sayantan2@gmail.com
âœ… Database connected
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
 GET /api/auth/session 200 in 119ms
 GET /api/friends 200 in 257ms
 GET /api/socket-health 200 in 150ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
 GET /socket.io?EIO=4&transport=polling&t=270wt25u 404 in 224ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
 GET /api/random-chat/queue 200 in 260ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
 GET /api/users/me 200 in 376ms
 POST /api/users/heartbeat 200 in 499ms
 GET /socket.io?EIO=4&transport=polling&t=2711edv3 404 in 126ms
 GET /api/friends 200 in 492ms
âœ… Current user found: {
  id: new ObjectId('6901f85f42c5d010fa811206'),
  email: 'sayantan2@gmail.com',
  friendRequestsCount: 0,
  sentRequestsCount: 1
}
Processing received requests...
Raw friendRequests: []
Processed receivedRequests: []
Populating sender details...
Final populated requests: []
=== FRIEND REQUEST GET END (received) ===
 GET /api/friends/request?type=received 200 in 917ms
=== FRIEND REQUEST GET START ===
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
Request type: received User: sayantan2@gmail.com
âœ… Database connected
=== FRIEND REQUEST GET START ===
 POST /api/users/heartbeat 200 in 1012ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
Request type: sent User: sayantan2@gmail.com
âœ… Database connected
âœ… Current user found: {
  id: new ObjectId('6901f85f42c5d010fa811206'),
  email: 'sayantan2@gmail.com',
  friendRequestsCount: 0,
  sentRequestsCount: 1
}
Processing received requests...
Raw friendRequests: []
Processed receivedRequests: []
Populating sender details...
Final populated requests: []
=== FRIEND REQUEST GET END (received) ===
 GET /api/friends/request?type=received 200 in 108ms
âœ… Current user found: {
  id: new ObjectId('6901f85f42c5d010fa811206'),
  email: 'sayantan2@gmail.com',
  friendRequestsCount: 0,
  sentRequestsCount: 1
}
Processing sent requests...
Raw sentRequests: [
  {
    from: new ObjectId('6901f85f42c5d010fa811206'),
    fromName: 'sayantan2',
    to: new ObjectId('6905adf16a22b7843b006183'),
    toName: 'sayantan3',
    status: 'pending',
    _id: new ObjectId('6905cdce14ad0d0f020b3985'),
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
Filtering sent request: { status: 'pending', to: new ObjectId('6905adf16a22b7843b006183') }
Mapping sent request: {
  from: new ObjectId('6901f85f42c5d010fa811206'),
  fromName: 'sayantan2',
  to: new ObjectId('6905adf16a22b7843b006183'),
  toName: 'sayantan3',
  status: 'pending',
  _id: new ObjectId('6905cdce14ad0d0f020b3985'),
  createdAt: 2025-11-01T09:07:26.707Z,
  updatedAt: 2025-11-01T09:07:26.707Z
}
Processed sentRequests: [
  {
    id: '6905cdce14ad0d0f020b3985',
    to: {
      id: '6905adf16a22b7843b006183',
      username: 'sayantan3',
      email: '',
      profilePicture: null
    },
    status: 'pending',
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
Populating recipient details...
Looking up recipient: 6905adf16a22b7843b006183
Found recipient: sayantan3
Final populated sent requests: [
  {
    id: '6905cdce14ad0d0f020b3985',
    to: {
      id: '6905adf16a22b7843b006183',
      username: 'sayantan3',
      email: 'sayantan3@gmail.com',
      profilePicture: undefined
    },
    status: 'pending',
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
=== FRIEND REQUEST GET END (sent) ===
 GET /api/friends/request?type=sent 200 in 191ms
=== FRIEND REQUEST GET START ===
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
Request type: sent User: sayantan2@gmail.com
âœ… Database connected
âœ… Current user found: {
  id: new ObjectId('6901f85f42c5d010fa811206'),
  email: 'sayantan2@gmail.com',
  friendRequestsCount: 0,
  sentRequestsCount: 1
}
Processing sent requests...
Raw sentRequests: [
  {
    from: new ObjectId('6901f85f42c5d010fa811206'),
    fromName: 'sayantan2',
    to: new ObjectId('6905adf16a22b7843b006183'),
    toName: 'sayantan3',
    status: 'pending',
    _id: new ObjectId('6905cdce14ad0d0f020b3985'),
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
Filtering sent request: { status: 'pending', to: new ObjectId('6905adf16a22b7843b006183') }
Mapping sent request: {
  from: new ObjectId('6901f85f42c5d010fa811206'),
  fromName: 'sayantan2',
  to: new ObjectId('6905adf16a22b7843b006183'),
  toName: 'sayantan3',
  status: 'pending',
  _id: new ObjectId('6905cdce14ad0d0f020b3985'),
  createdAt: 2025-11-01T09:07:26.707Z,
  updatedAt: 2025-11-01T09:07:26.707Z
}
Processed sentRequests: [
  {
    id: '6905cdce14ad0d0f020b3985',
    to: {
      id: '6905adf16a22b7843b006183',
      username: 'sayantan3',
      email: '',
      profilePicture: null
    },
    status: 'pending',
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
Populating recipient details...
Looking up recipient: 6905adf16a22b7843b006183
 GET /api/random-chat/session 200 in 726ms
Found recipient: sayantan3
Final populated sent requests: [
  {
    id: '6905cdce14ad0d0f020b3985',
    to: {
      id: '6905adf16a22b7843b006183',
      username: 'sayantan3',
      email: 'sayantan3@gmail.com',
      profilePicture: undefined
    },
    status: 'pending',
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
=== FRIEND REQUEST GET END (sent) ===
 GET /api/friends/request?type=sent 200 in 147ms
 GET /api/socket-health 200 in 36ms
 GET /api/socket-health 200 in 126ms
 GET /socket.io?EIO=4&transport=polling&t=272e1m99 404 in 221ms
 GET /socket.io?EIO=4&transport=polling&t=272hnvac 404 in 106ms
 GET /api/socket-health 200 in 27ms
 GET /api/socket-health 200 in 112ms
 GET /socket.io?EIO=4&transport=polling&t=273x7cz5 404 in 217ms
 GET /socket.io?EIO=4&transport=polling&t=2740dv1h 404 in 108ms
 GET /api/socket-health 200 in 22ms
 GET /api/socket-health 200 in 26ms
 GET /socket.io?EIO=4&transport=polling&t=275h01u2 404 in 217ms
 GET /socket.io?EIO=4&transport=polling&t=275hr5au 404 in 115ms
 GET /api/socket-health 200 in 26ms
 GET /api/socket-health 200 in 115ms
 GET /socket.io?EIO=4&transport=polling&t=27705lz1 404 in 203ms
 GET /socket.io?EIO=4&transport=polling&t=2773ed46 404 in 104ms
 GET /api/socket-health 200 in 24ms
 GET /api/socket-health 200 in 112ms
 GET /socket.io?EIO=4&transport=polling&t=278jrqo2 404 in 196ms
 GET /socket.io?EIO=4&transport=polling&t=278mxcrf 404 in 94ms
 GET /api/socket-health 200 in 23ms
 GET /api/socket-health 200 in 101ms
 GET /socket.io?EIO=4&transport=polling&t=27a3juwq 404 in 196ms
 GET /socket.io?EIO=4&transport=polling&t=27a6f0lo 404 in 103ms
 GET /api/socket-health 200 in 22ms
 GET /api/socket-health 200 in 107ms
 GET /socket.io?EIO=4&transport=polling&t=27bmv2t5 404 in 113ms
 GET /socket.io?EIO=4&transport=polling&t=27bpvpnq 404 in 98ms
 GET /api/socket-health 200 in 26ms
 GET /api/socket-health 200 in 37ms
 GET /socket.io?EIO=4&transport=polling&t=27d6ptef 404 in 223ms
 GET /socket.io?EIO=4&transport=polling&t=27d7sqnx 404 in 109ms
 GET /api/socket-health 200 in 26ms
 GET /api/socket-health 200 in 121ms
 GET /socket.io?EIO=4&transport=polling&t=27eq5tnm 404 in 229ms
 GET /socket.io?EIO=4&transport=polling&t=27etjz8x 404 in 119ms
 GET /api/socket-health 200 in 32ms
 GET /api/socket-health 200 in 146ms
 GET /socket.io?EIO=4&transport=polling&t=27g9pu2a 404 in 245ms
 GET /socket.io?EIO=4&transport=polling&t=27gdtxh9 404 in 114ms
 GET /api/socket-health 200 in 28ms
 GET /api/socket-health 200 in 124ms
 GET /socket.io?EIO=4&transport=polling&t=27ht46cz 404 in 225ms
 GET /socket.io?EIO=4&transport=polling&t=27hwmu5j 404 in 112ms
 GET /api/socket-health 200 in 28ms
 GET /api/socket-health 200 in 130ms
 GET /socket.io?EIO=4&transport=polling&t=27jcprg9 404 in 304ms
 GET /socket.io?EIO=4&transport=polling&t=27jgds3p 404 in 187ms
 GET /api/socket-health 200 in 41ms
 GET /api/socket-health 200 in 152ms
 GET /socket.io?EIO=4&transport=polling&t=27kwqcgg 404 in 260ms
 GET /socket.io?EIO=4&transport=polling&t=27l11iiw 404 in 119ms
 GET /api/socket-health 200 in 27ms
 GET /api/socket-health 200 in 119ms
 GET /socket.io?EIO=4&transport=polling&t=27mfzzvf 404 in 208ms
 GET /socket.io?EIO=4&transport=polling&t=27mjbhrh 404 in 95ms
 GET /api/socket-health 200 in 31ms
 GET /api/socket-health 200 in 105ms
 GET /socket.io?EIO=4&transport=polling&t=27nzee7n 404 in 106ms
 GET /socket.io?EIO=4&transport=polling&t=27o2e280 404 in 101ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
 GET /api/conversations 200 in 159ms
 POST /api/users/heartbeat 200 in 180ms
 GET /api/socket-health 200 in 35ms
=== FRIEND REQUEST GET START ===
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
Request type: received User: sayantan2@gmail.com
âœ… Database connected
âœ… Current user found: {
  id: new ObjectId('6901f85f42c5d010fa811206'),
  email: 'sayantan2@gmail.com',
  friendRequestsCount: 0,
  sentRequestsCount: 1
}
Processing received requests...
Raw friendRequests: []
Processed receivedRequests: []
Populating sender details...
Final populated requests: []
=== FRIEND REQUEST GET END (received) ===
 GET /api/friends/request?type=received 200 in 145ms
 GET /api/socket-health 200 in 128ms
=== FRIEND REQUEST GET START ===
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
Request type: sent User: sayantan2@gmail.com
âœ… Database connected
âœ… Current user found: {
  id: new ObjectId('6901f85f42c5d010fa811206'),
  email: 'sayantan2@gmail.com',
  friendRequestsCount: 0,
  sentRequestsCount: 1
}
Processing sent requests...
Raw sentRequests: [
  {
    from: new ObjectId('6901f85f42c5d010fa811206'),
    fromName: 'sayantan2',
    to: new ObjectId('6905adf16a22b7843b006183'),
    toName: 'sayantan3',
    status: 'pending',
    _id: new ObjectId('6905cdce14ad0d0f020b3985'),
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
Filtering sent request: { status: 'pending', to: new ObjectId('6905adf16a22b7843b006183') }
Mapping sent request: {
  from: new ObjectId('6901f85f42c5d010fa811206'),
  fromName: 'sayantan2',
  to: new ObjectId('6905adf16a22b7843b006183'),
  toName: 'sayantan3',
  status: 'pending',
  _id: new ObjectId('6905cdce14ad0d0f020b3985'),
  createdAt: 2025-11-01T09:07:26.707Z,
  updatedAt: 2025-11-01T09:07:26.707Z
}
Processed sentRequests: [
  {
    id: '6905cdce14ad0d0f020b3985',
    to: {
      id: '6905adf16a22b7843b006183',
      username: 'sayantan3',
      email: '',
      profilePicture: null
    },
    status: 'pending',
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
Populating recipient details...
Looking up recipient: 6905adf16a22b7843b006183
 GET /socket.io?EIO=4&transport=polling&t=27pjgy2z 404 in 231ms
 GET /socket.io?EIO=4&transport=polling&t=27pn44kf 404 in 109ms
Found recipient: sayantan3
Final populated sent requests: [
  {
    id: '6905cdce14ad0d0f020b3985',
    to: {
      id: '6905adf16a22b7843b006183',
      username: 'sayantan3',
      email: 'sayantan3@gmail.com',
      profilePicture: undefined
    },
    status: 'pending',
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
=== FRIEND REQUEST GET END (sent) ===
 GET /api/friends/request?type=sent 200 in 164ms
 GET /api/socket-health 200 in 25ms
 GET /api/socket-health 200 in 109ms
 GET /socket.io?EIO=4&transport=polling&t=27r2le8s 404 in 107ms
 GET /socket.io?EIO=4&transport=polling&t=27r5o0ad 404 in 92ms
 GET /api/socket-health 200 in 22ms
 GET /api/socket-health 200 in 108ms
 GET /socket.io?EIO=4&transport=polling&t=27sm235b 404 in 191ms
 GET /socket.io?EIO=4&transport=polling&t=27sp39n4 404 in 92ms
 GET /api/socket-health 200 in 22ms
 GET /api/socket-health 200 in 111ms
 GET /socket.io?EIO=4&transport=polling&t=27u5m03a 404 in 184ms
 GET /socket.io?EIO=4&transport=polling&t=27u8q2b3 404 in 92ms
 GET /api/socket-health 200 in 24ms
 GET /api/socket-health 200 in 110ms
 GET /socket.io?EIO=4&transport=polling&t=27vp1mb9 404 in 202ms
 GET /socket.io?EIO=4&transport=polling&t=27vs4mu1 404 in 106ms
 GET /api/socket-health 200 in 22ms
 GET /api/socket-health 200 in 112ms
 GET /socket.io?EIO=4&transport=polling&t=27x8uyi8 404 in 113ms
 GET /socket.io?EIO=4&transport=polling&t=27xc0a0n 404 in 98ms
 GET /api/socket-health 200 in 23ms
 GET /api/socket-health 200 in 104ms
 GET /socket.io?EIO=4&transport=polling&t=27ys1iih 404 in 186ms
 GET /socket.io?EIO=4&transport=polling&t=27yuyrke 404 in 98ms
 GET /api/socket-health 200 in 24ms
 GET /api/socket-health 200 in 114ms
 GET /socket.io?EIO=4&transport=polling&t=280bxm58 404 in 192ms
 GET /socket.io?EIO=4&transport=polling&t=280f58il 404 in 97ms
 GET /api/socket-health 200 in 22ms
 GET /api/socket-health 200 in 105ms
 GET /socket.io?EIO=4&transport=polling&t=281vewlz 404 in 110ms
 GET /socket.io?EIO=4&transport=polling&t=281ydgyz 404 in 94ms
 GET /api/socket-health 200 in 24ms
 GET /api/socket-health 200 in 114ms
 GET /socket.io?EIO=4&transport=polling&t=283f2vj3 404 in 195ms
 GET /socket.io?EIO=4&transport=polling&t=283iazi9 404 in 94ms
 GET /api/socket-health 200 in 29ms
 GET /api/socket-health 200 in 128ms
 GET /socket.io?EIO=4&transport=polling&t=284yn6nu 404 in 130ms
 GET /socket.io?EIO=4&transport=polling&t=2852aki4 404 in 117ms
 GET /api/socket-health 200 in 28ms
 GET /api/socket-health 200 in 125ms
 GET /socket.io?EIO=4&transport=polling&t=286ifo42 404 in 209ms
 GET /socket.io?EIO=4&transport=polling&t=286lybxm 404 in 102ms
 GET /api/socket-health 200 in 27ms
 GET /api/socket-health 200 in 105ms
 GET /socket.io?EIO=4&transport=polling&t=2881pdoy 404 in 195ms
 GET /socket.io?EIO=4&transport=polling&t=2884oq43 404 in 100ms
 GET /api/socket-health 200 in 35ms
 GET /api/socket-health 200 in 141ms
 GET /socket.io?EIO=4&transport=polling&t=289lgu60 404 in 239ms
 GET /socket.io?EIO=4&transport=polling&t=289pinox 404 in 118ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
=== FRIEND REQUEST GET START ===
 GET /api/socket-health 200 in 83ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
Request type: received User: sayantan2@gmail.com
âœ… Database connected
âœ… Current user found: {
  id: new ObjectId('6901f85f42c5d010fa811206'),
  email: 'sayantan2@gmail.com',
  friendRequestsCount: 0,
  sentRequestsCount: 1
}
Processing received requests...
Raw friendRequests: []
Processed receivedRequests: []
Populating sender details...
Final populated requests: []
=== FRIEND REQUEST GET END (received) ===
 GET /api/friends/request?type=received 200 in 201ms
 GET /api/socket-health 200 in 125ms
 GET /api/friends 200 in 246ms
=== FRIEND REQUEST GET START ===
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
Request type: sent User: sayantan2@gmail.com
âœ… Database connected
âœ… Current user found: {
  id: new ObjectId('6901f85f42c5d010fa811206'),
  email: 'sayantan2@gmail.com',
  friendRequestsCount: 0,
  sentRequestsCount: 1
}
Processing sent requests...
Raw sentRequests: [
  {
    from: new ObjectId('6901f85f42c5d010fa811206'),
    fromName: 'sayantan2',
    to: new ObjectId('6905adf16a22b7843b006183'),
    toName: 'sayantan3',
    status: 'pending',
    _id: new ObjectId('6905cdce14ad0d0f020b3985'),
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
Filtering sent request: { status: 'pending', to: new ObjectId('6905adf16a22b7843b006183') }
Mapping sent request: {
  from: new ObjectId('6901f85f42c5d010fa811206'),
  fromName: 'sayantan2',
  to: new ObjectId('6905adf16a22b7843b006183'),
  toName: 'sayantan3',
  status: 'pending',
  _id: new ObjectId('6905cdce14ad0d0f020b3985'),
  createdAt: 2025-11-01T09:07:26.707Z,
  updatedAt: 2025-11-01T09:07:26.707Z
}
Processed sentRequests: [
  {
    id: '6905cdce14ad0d0f020b3985',
    to: {
      id: '6905adf16a22b7843b006183',
      username: 'sayantan3',
      email: '',
      profilePicture: null
    },
    status: 'pending',
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
Populating recipient details...
Looking up recipient: 6905adf16a22b7843b006183
 GET /socket.io?EIO=4&transport=polling&t=28b6w2ft 404 in 251ms
 GET /socket.io?EIO=4&transport=polling&t=28baje20 404 in 125ms
Found recipient: sayantan3
Final populated sent requests: [
  {
    id: '6905cdce14ad0d0f020b3985',
    to: {
      id: '6905adf16a22b7843b006183',
      username: 'sayantan3',
      email: 'sayantan3@gmail.com',
      profilePicture: undefined
    },
    status: 'pending',
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
=== FRIEND REQUEST GET END (sent) ===
 GET /api/friends/request?type=sent 200 in 174ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
 POST /api/users/heartbeat 200 in 197ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
 GET /api/socket-health 200 in 43ms
 GET /api/socket-health 200 in 117ms
 GET /socket.io?EIO=4&transport=polling&t=28cp43li 404 in 118ms
 GET /api/conversations 200 in 253ms
 GET /socket.io?EIO=4&transport=polling&t=28csgg3b 404 in 97ms
 GET /api/socket-health 200 in 24ms
 GET /api/socket-health 200 in 102ms
 GET /socket.io?EIO=4&transport=polling&t=28e7qyee 404 in 106ms
 GET /socket.io?EIO=4&transport=polling&t=28eanbz7 404 in 93ms
 GET /api/socket-health 200 in 23ms
 GET /api/socket-health 200 in 108ms
 GET /socket.io?EIO=4&transport=polling&t=28fr6hl5 404 in 189ms
 GET /socket.io?EIO=4&transport=polling&t=28fu7l78 404 in 93ms
 GET /api/socket-health 200 in 24ms
 GET /api/socket-health 200 in 30ms
 GET /socket.io?EIO=4&transport=polling&t=28hayret 404 in 191ms
 GET /socket.io?EIO=4&transport=polling&t=28hbtygw 404 in 94ms
 GET /api/socket-health 200 in 29ms
 GET /api/socket-health 200 in 112ms
 GET /socket.io?EIO=4&transport=polling&t=28iuqv0r 404 in 120ms
 GET /socket.io?EIO=4&transport=polling&t=28ixwelw 404 in 97ms
 GET /api/socket-health 200 in 24ms
 GET /api/socket-health 200 in 104ms
 GET /socket.io?EIO=4&transport=polling&t=28kdv6vt 404 in 193ms
 GET /socket.io?EIO=4&transport=polling&t=28kgtaji 404 in 92ms
 GET /api/socket-health 200 in 29ms
 GET /api/socket-health 200 in 104ms
 GET /socket.io?EIO=4&transport=polling&t=28lxznla 404 in 193ms
 GET /socket.io?EIO=4&transport=polling&t=28m0xiut 404 in 98ms
 GET /api/socket-health 200 in 23ms
 GET /api/socket-health 200 in 103ms
 GET /socket.io?EIO=4&transport=polling&t=28nh6eil 404 in 186ms
 GET /socket.io?EIO=4&transport=polling&t=28nk37rb 404 in 88ms
 GET /api/socket-health 200 in 37ms
 GET /api/socket-health 200 in 151ms
 GET /socket.io?EIO=4&transport=polling&t=28p14l3g 404 in 306ms
 GET /socket.io?EIO=4&transport=polling&t=28p5fmeh 404 in 163ms
 GET /api/socket-health 200 in 30ms
 GET /api/socket-health 200 in 115ms
 GET /socket.io?EIO=4&transport=polling&t=28qkm9sw 404 in 222ms
 GET /socket.io?EIO=4&transport=polling&t=28qnu1na 404 in 113ms
 GET /api/socket-health 200 in 25ms
 GET /api/socket-health 200 in 112ms
 GET /socket.io?EIO=4&transport=polling&t=28s418qo 404 in 194ms
 GET /socket.io?EIO=4&transport=polling&t=28s77c9y 404 in 85ms
 GET /api/socket-health 200 in 30ms
 GET /api/socket-health 200 in 109ms
 GET /socket.io?EIO=4&transport=polling&t=28tnql8z 404 in 196ms
 GET /socket.io?EIO=4&transport=polling&t=28tqubvv 404 in 97ms
 GET /api/socket-health 200 in 23ms
 GET /api/socket-health 200 in 106ms
 GET /socket.io?EIO=4&transport=polling&t=28v72w6r 404 in 195ms
 GET /socket.io?EIO=4&transport=polling&t=28va2dtg 404 in 97ms
 GET /api/socket-health 200 in 28ms
 GET /api/socket-health 200 in 103ms
 GET /socket.io?EIO=4&transport=polling&t=28wqo88b 404 in 192ms
 GET /socket.io?EIO=4&transport=polling&t=28wtlsrl 404 in 95ms
 GET /api/socket-health 200 in 23ms
 GET /api/socket-health 200 in 109ms
 GET /socket.io?EIO=4&transport=polling&t=28ya3rcs 404 in 201ms
 GET /socket.io?EIO=4&transport=polling&t=28yd6qqg 404 in 95ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
=== FRIEND REQUEST GET START ===
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
Request type: received User: sayantan2@gmail.com
âœ… Database connected
 POST /api/users/heartbeat 200 in 207ms
âœ… Current user found: {
  id: new ObjectId('6901f85f42c5d010fa811206'),
  email: 'sayantan2@gmail.com',
  friendRequestsCount: 0,
  sentRequestsCount: 1
}
Processing received requests...
Raw friendRequests: []
Processed receivedRequests: []
Populating sender details...
Final populated requests: []
=== FRIEND REQUEST GET END (received) ===
 GET /api/friends/request?type=received 200 in 754ms
=== FRIEND REQUEST GET START ===
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
Request type: sent User: sayantan2@gmail.com
âœ… Database connected
âœ… Current user found: {
  id: new ObjectId('6901f85f42c5d010fa811206'),
  email: 'sayantan2@gmail.com',
  friendRequestsCount: 0,
  sentRequestsCount: 1
}
Processing sent requests...
Raw sentRequests: [
  {
    from: new ObjectId('6901f85f42c5d010fa811206'),
    fromName: 'sayantan2',
    to: new ObjectId('6905adf16a22b7843b006183'),
    toName: 'sayantan3',
    status: 'pending',
    _id: new ObjectId('6905cdce14ad0d0f020b3985'),
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
Filtering sent request: { status: 'pending', to: new ObjectId('6905adf16a22b7843b006183') }
Mapping sent request: {
  from: new ObjectId('6901f85f42c5d010fa811206'),
  fromName: 'sayantan2',
  to: new ObjectId('6905adf16a22b7843b006183'),
  toName: 'sayantan3',
  status: 'pending',
  _id: new ObjectId('6905cdce14ad0d0f020b3985'),
  createdAt: 2025-11-01T09:07:26.707Z,
  updatedAt: 2025-11-01T09:07:26.707Z
}
Processed sentRequests: [
  {
    id: '6905cdce14ad0d0f020b3985',
    to: {
      id: '6905adf16a22b7843b006183',
      username: 'sayantan3',
      email: '',
      profilePicture: null
    },
    status: 'pending',
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
Populating recipient details...
Looking up recipient: 6905adf16a22b7843b006183
Found recipient: sayantan3
Final populated sent requests: [
  {
    id: '6905cdce14ad0d0f020b3985',
    to: {
      id: '6905adf16a22b7843b006183',
      username: 'sayantan3',
      email: 'sayantan3@gmail.com',
      profilePicture: undefined
    },
    status: 'pending',
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
=== FRIEND REQUEST GET END (sent) ===
 GET /api/friends/request?type=sent 200 in 132ms
 GET /api/socket-health 200 in 25ms
 GET /api/socket-health 200 in 110ms
 GET /socket.io?EIO=4&transport=polling&t=28ztklzu 404 in 199ms
 GET /socket.io?EIO=4&transport=polling&t=28zwnvio 404 in 92ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
 GET /api/conversations 200 in 138ms
 GET /api/socket-health 200 in 23ms
 GET /api/socket-health 200 in 110ms
 GET /socket.io?EIO=4&transport=polling&t=291d0fvj 404 in 208ms
 GET /socket.io?EIO=4&transport=polling&t=291g3e29 404 in 108ms
 GET /api/socket-health 200 in 23ms
 GET /api/socket-health 200 in 111ms
 GET /socket.io?EIO=4&transport=polling&t=292wiqh7 404 in 118ms
 GET /socket.io?EIO=4&transport=polling&t=292zm8fm 404 in 104ms
 GET /api/socket-health 200 in 24ms
 GET /api/socket-health 200 in 110ms
 GET /socket.io?EIO=4&transport=polling&t=294gejwy 404 in 191ms
 GET /socket.io?EIO=4&transport=polling&t=294jimni 404 in 101ms
 GET /api/socket-health 200 in 22ms
 GET /api/socket-health 200 in 121ms
 GET /socket.io?EIO=4&transport=polling&t=295zynos 404 in 124ms
 GET /socket.io?EIO=4&transport=polling&t=2963dq8a 404 in 97ms
 GET /api/socket-health 200 in 22ms
 GET /api/socket-health 200 in 120ms
 GET /socket.io?EIO=4&transport=polling&t=297jffzb 404 in 207ms
 GET /socket.io?EIO=4&transport=polling&t=297mt1bo 404 in 103ms
 GET /api/socket-health 200 in 22ms
 GET /api/socket-health 200 in 106ms
 GET /socket.io?EIO=4&transport=polling&t=2992qop7 404 in 200ms
 GET /socket.io?EIO=4&transport=polling&t=2995r5f7 404 in 102ms
 GET /api/socket-health 200 in 25ms
 GET /api/socket-health 200 in 118ms
 GET /socket.io?EIO=4&transport=polling&t=29ame70a 404 in 201ms
 GET /socket.io?EIO=4&transport=polling&t=29apqf5j 404 in 99ms
 GET /api/socket-health 200 in 24ms
 GET /api/socket-health 200 in 107ms
 GET /socket.io?EIO=4&transport=polling&t=29c68ct5 404 in 197ms
 GET /socket.io?EIO=4&transport=polling&t=29c9awqt 404 in 99ms
 GET /api/socket-health 200 in 24ms
 GET /api/socket-health 200 in 118ms
 GET /socket.io?EIO=4&transport=polling&t=29dppkib 404 in 194ms
 GET /socket.io?EIO=4&transport=polling&t=29dt1dik 404 in 98ms
 GET /api/socket-health 200 in 23ms
 GET /api/socket-health 200 in 33ms
 GET /socket.io?EIO=4&transport=polling&t=29f93m17 404 in 206ms
 GET /socket.io?EIO=4&transport=polling&t=29fa2ago 404 in 105ms
 GET /api/socket-health 200 in 32ms
 GET /api/socket-health 200 in 114ms
 GET /socket.io?EIO=4&transport=polling&t=29gsx1vb 404 in 190ms
 GET /socket.io?EIO=4&transport=polling&t=29gw5r5e 404 in 96ms
 GET /api/socket-health 200 in 26ms
 GET /api/socket-health 200 in 109ms
 GET /socket.io?EIO=4&transport=polling&t=29icf1od 404 in 197ms
 GET /socket.io?EIO=4&transport=polling&t=29ifhvsm 404 in 95ms
 GET /api/socket-health 200 in 24ms
 GET /api/socket-health 200 in 116ms
 GET /socket.io?EIO=4&transport=polling&t=29jvx58t 404 in 185ms
 GET /socket.io?EIO=4&transport=polling&t=29jz72q1 404 in 91ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
=== FRIEND REQUEST GET START ===
 GET /api/socket-health 200 in 66ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
Request type: received User: sayantan2@gmail.com
âœ… Database connected
âœ… Current user found: {
  id: new ObjectId('6901f85f42c5d010fa811206'),
  email: 'sayantan2@gmail.com',
  friendRequestsCount: 0,
  sentRequestsCount: 1
}
Processing received requests...
Raw friendRequests: []
Processed receivedRequests: []
Populating sender details...
Final populated requests: []
=== FRIEND REQUEST GET END (received) ===
 GET /api/friends/request?type=received 200 in 166ms
 GET /api/socket-health 200 in 112ms
=== FRIEND REQUEST GET START ===
 GET /api/friends 200 in 214ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
Request type: sent User: sayantan2@gmail.com
âœ… Database connected
âœ… Current user found: {
  id: new ObjectId('6901f85f42c5d010fa811206'),
  email: 'sayantan2@gmail.com',
  friendRequestsCount: 0,
  sentRequestsCount: 1
}
Processing sent requests...
Raw sentRequests: [
  {
    from: new ObjectId('6901f85f42c5d010fa811206'),
    fromName: 'sayantan2',
    to: new ObjectId('6905adf16a22b7843b006183'),
    toName: 'sayantan3',
    status: 'pending',
    _id: new ObjectId('6905cdce14ad0d0f020b3985'),
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
Filtering sent request: { status: 'pending', to: new ObjectId('6905adf16a22b7843b006183') }
Mapping sent request: {
  from: new ObjectId('6901f85f42c5d010fa811206'),
  fromName: 'sayantan2',
  to: new ObjectId('6905adf16a22b7843b006183'),
  toName: 'sayantan3',
  status: 'pending',
  _id: new ObjectId('6905cdce14ad0d0f020b3985'),
  createdAt: 2025-11-01T09:07:26.707Z,
  updatedAt: 2025-11-01T09:07:26.707Z
}
Processed sentRequests: [
  {
    id: '6905cdce14ad0d0f020b3985',
    to: {
      id: '6905adf16a22b7843b006183',
      username: 'sayantan3',
      email: '',
      profilePicture: null
    },
    status: 'pending',
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
Populating recipient details...
Looking up recipient: 6905adf16a22b7843b006183
 GET /socket.io?EIO=4&transport=polling&t=29lgpevb 404 in 227ms
 GET /socket.io?EIO=4&transport=polling&t=29ljyyf8 404 in 119ms
Found recipient: sayantan3
Final populated sent requests: [
  {
    id: '6905cdce14ad0d0f020b3985',
    to: {
      id: '6905adf16a22b7843b006183',
      username: 'sayantan3',
      email: 'sayantan3@gmail.com',
      profilePicture: undefined
    },
    status: 'pending',
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
=== FRIEND REQUEST GET END (sent) ===
 GET /api/friends/request?type=sent 200 in 163ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
 POST /api/users/heartbeat 200 in 197ms
 GET /api/socket-health 200 in 31ms
 GET /api/socket-health 200 in 105ms
 GET /socket.io?EIO=4&transport=polling&t=29myx0v8 404 in 193ms
 GET /socket.io?EIO=4&transport=polling&t=29n1wvar 404 in 99ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
 GET /api/socket-health 200 in 50ms
 GET /api/socket-health 200 in 108ms
 GET /socket.io?EIO=4&transport=polling&t=29ojgw6b 404 in 110ms
 GET /api/conversations 200 in 255ms
 GET /socket.io?EIO=4&transport=polling&t=29omhlso 404 in 98ms
 GET /api/socket-health 200 in 25ms
 GET /api/socket-health 200 in 115ms
 GET /socket.io?EIO=4&transport=polling&t=29q25mk5 404 in 209ms
 GET /socket.io?EIO=4&transport=polling&t=29q5fta3 404 in 106ms
 GET /api/socket-health 200 in 24ms
 GET /api/socket-health 200 in 113ms
 GET /socket.io?EIO=4&transport=polling&t=29rlmnww 404 in 197ms
 GET /socket.io?EIO=4&transport=polling&t=29rosyem 404 in 99ms
 GET /api/socket-health 200 in 35ms
 GET /api/socket-health 200 in 124ms
 GET /socket.io?EIO=4&transport=polling&t=29t5fsqx 404 in 222ms
 GET /socket.io?EIO=4&transport=polling&t=29t8xolx 404 in 106ms
 GET /api/socket-health 200 in 36ms
 GET /api/socket-health 200 in 120ms
 GET /socket.io?EIO=4&transport=polling&t=29uozc9b 404 in 124ms
 GET /socket.io?EIO=4&transport=polling&t=29usc4qq 404 in 122ms
 GET /api/socket-health 200 in 25ms
 GET /api/socket-health 200 in 120ms
 GET /socket.io?EIO=4&transport=polling&t=29w8ht1l 404 in 231ms
 GET /socket.io?EIO=4&transport=polling&t=29wbuixl 404 in 121ms
 GET /api/socket-health 200 in 30ms
 GET /api/socket-health 200 in 108ms
 GET /socket.io?EIO=4&transport=polling&t=29xrtcmi 404 in 202ms
 GET /socket.io?EIO=4&transport=polling&t=29xuvh82 404 in 96ms
 GET /api/socket-health 200 in 70ms
 GET /api/socket-health 200 in 174ms
 GET /socket.io?EIO=4&transport=polling&t=29zd1ucu 404 in 170ms
 GET /socket.io?EIO=4&transport=polling&t=29zhxlgd 404 in 151ms
 GET /api/socket-health 200 in 27ms
 GET /api/socket-health 200 in 128ms
 GET /socket.io?EIO=4&transport=polling&t=2a0va4wj 404 in 234ms
 GET /socket.io?EIO=4&transport=polling&t=2a0yvrqy 404 in 108ms
 GET /api/socket-health 200 in 39ms
 GET /api/socket-health 200 in 135ms
 GET /socket.io?EIO=4&transport=polling&t=2a2exnbz 404 in 239ms
 GET /socket.io?EIO=4&transport=polling&t=2a2irkcq 404 in 116ms
 GET /api/socket-health 200 in 28ms
 GET /api/socket-health 200 in 187ms
 GET /socket.io?EIO=4&transport=polling&t=2a3yclvt 404 in 312ms
 GET /socket.io?EIO=4&transport=polling&t=2a43kawc 404 in 125ms
 GET /api/socket-health 200 in 41ms
 GET /api/socket-health 200 in 140ms
 GET /socket.io?EIO=4&transport=polling&t=2a5igi52 404 in 141ms
 GET /socket.io?EIO=4&transport=polling&t=2a5mfqdu 404 in 126ms
 GET /api/socket-health 200 in 33ms
 GET /api/socket-health 200 in 173ms
 GET /socket.io?EIO=4&transport=polling&t=2a71n9ui 404 in 335ms
 GET /socket.io?EIO=4&transport=polling&t=2a76i1zk 404 in 172ms
 GET /api/socket-health 200 in 38ms
 GET /api/socket-health 200 in 132ms
 GET /socket.io?EIO=4&transport=polling&t=2a8kz32d 404 in 222ms
 GET /socket.io?EIO=4&transport=polling&t=2a8oo16m 404 in 103ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
=== FRIEND REQUEST GET START ===
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
Request type: received User: sayantan2@gmail.com
âœ… Database connected
 POST /api/users/heartbeat 200 in 200ms
âœ… Current user found: {
  id: new ObjectId('6901f85f42c5d010fa811206'),
  email: 'sayantan2@gmail.com',
  friendRequestsCount: 0,
  sentRequestsCount: 1
}
Processing received requests...
Raw friendRequests: []
Processed receivedRequests: []
Populating sender details...
Final populated requests: []
=== FRIEND REQUEST GET END (received) ===
 GET /api/friends/request?type=received 200 in 438ms
=== FRIEND REQUEST GET START ===
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
Request type: sent User: sayantan2@gmail.com
âœ… Database connected
âœ… Current user found: {
  id: new ObjectId('6901f85f42c5d010fa811206'),
  email: 'sayantan2@gmail.com',
  friendRequestsCount: 0,
  sentRequestsCount: 1
}
Processing sent requests...
Raw sentRequests: [
  {
    from: new ObjectId('6901f85f42c5d010fa811206'),
    fromName: 'sayantan2',
    to: new ObjectId('6905adf16a22b7843b006183'),
    toName: 'sayantan3',
    status: 'pending',
    _id: new ObjectId('6905cdce14ad0d0f020b3985'),
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
Filtering sent request: { status: 'pending', to: new ObjectId('6905adf16a22b7843b006183') }
Mapping sent request: {
  from: new ObjectId('6901f85f42c5d010fa811206'),
  fromName: 'sayantan2',
  to: new ObjectId('6905adf16a22b7843b006183'),
  toName: 'sayantan3',
  status: 'pending',
  _id: new ObjectId('6905cdce14ad0d0f020b3985'),
  createdAt: 2025-11-01T09:07:26.707Z,
  updatedAt: 2025-11-01T09:07:26.707Z
}
Processed sentRequests: [
  {
    id: '6905cdce14ad0d0f020b3985',
    to: {
      id: '6905adf16a22b7843b006183',
      username: 'sayantan3',
      email: '',
      profilePicture: null
    },
    status: 'pending',
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
Populating recipient details...
Looking up recipient: 6905adf16a22b7843b006183
Found recipient: sayantan3
Final populated sent requests: [
  {
    id: '6905cdce14ad0d0f020b3985',
    to: {
      id: '6905adf16a22b7843b006183',
      username: 'sayantan3',
      email: 'sayantan3@gmail.com',
      profilePicture: undefined
    },
    status: 'pending',
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
=== FRIEND REQUEST GET END (sent) ===
 GET /api/friends/request?type=sent 200 in 145ms
 GET /api/socket-health 200 in 36ms
 GET /api/socket-health 200 in 115ms
 GET /socket.io?EIO=4&transport=polling&t=2aa4e4ur 404 in 113ms
 GET /socket.io?EIO=4&transport=polling&t=2aa7nbd7 404 in 99ms
 GET /api/socket-health 200 in 26ms
 GET /api/socket-health 200 in 115ms
 GET /socket.io?EIO=4&transport=polling&t=2abo1gmb 404 in 200ms
 GET /socket.io?EIO=4&transport=polling&t=2abrb171 404 in 91ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
 GET /api/conversations 200 in 153ms
 GET /api/socket-health 200 in 26ms
 GET /api/socket-health 200 in 118ms
 GET /socket.io?EIO=4&transport=polling&t=2ad7fcxc 404 in 202ms
 GET /socket.io?EIO=4&transport=polling&t=2adasrts 404 in 105ms
 GET /api/socket-health 200 in 27ms
 GET /api/socket-health 200 in 27ms
 GET /socket.io?EIO=4&transport=polling&t=2aeqxuqd 404 in 251ms
 GET /socket.io?EIO=4&transport=polling&t=2aerr4iw 404 in 156ms
 GET /api/socket-health 200 in 28ms
 GET /api/socket-health 200 in 133ms
 GET /socket.io?EIO=4&transport=polling&t=2agas22u 404 in 233ms
 GET /socket.io?EIO=4&transport=polling&t=2agekciq 404 in 108ms
 GET /api/socket-health 200 in 25ms
 GET /api/socket-health 200 in 112ms
 GET /socket.io?EIO=4&transport=polling&t=2ahu93is 404 in 210ms
 GET /socket.io?EIO=4&transport=polling&t=2ahxebvp 404 in 108ms
 GET /api/socket-health 200 in 32ms
 GET /api/socket-health 200 in 132ms
 GET /socket.io?EIO=4&transport=polling&t=2ajdqa7m 404 in 222ms
 GET /socket.io?EIO=4&transport=polling&t=2ajhhl0x 404 in 118ms
 GET /api/socket-health 200 in 27ms
 GET /api/socket-health 200 in 120ms
 GET /socket.io?EIO=4&transport=polling&t=2akx6ybv 404 in 215ms
 GET /socket.io?EIO=4&transport=polling&t=2al0lrq8 404 in 102ms
 GET /api/socket-health 200 in 25ms
 GET /api/socket-health 200 in 126ms
 GET /socket.io?EIO=4&transport=polling&t=2amgs1uw 404 in 203ms
 GET /socket.io?EIO=4&transport=polling&t=2amkbyg6 404 in 94ms
 GET /api/socket-health 200 in 29ms
 GET /api/socket-health 200 in 117ms
 GET /socket.io?EIO=4&transport=polling&t=2ao0dxyf 404 in 119ms
 GET /socket.io?EIO=4&transport=polling&t=2ao3p87g 404 in 104ms
 GET /api/socket-health 200 in 26ms
 GET /api/socket-health 200 in 113ms
 GET /socket.io?EIO=4&transport=polling&t=2apk2zdq 404 in 115ms
 GET /socket.io?EIO=4&transport=polling&t=2apn9sue 404 in 97ms
 GET /api/socket-health 200 in 23ms
 GET /api/socket-health 200 in 107ms
 GET /socket.io?EIO=4&transport=polling&t=2ar3i30k 404 in 191ms
 GET /socket.io?EIO=4&transport=polling&t=2ar6j3b3 404 in 92ms
 GET /api/socket-health 200 in 23ms
 GET /api/socket-health 200 in 32ms
 GET /socket.io?EIO=4&transport=polling&t=2asmyfa2 404 in 200ms
 GET /socket.io?EIO=4&transport=polling&t=2asnwrhb 404 in 102ms
 GET /api/socket-health 200 in 27ms
 GET /api/socket-health 200 in 108ms
 GET /socket.io?EIO=4&transport=polling&t=2au6kn0b 404 in 190ms
 GET /socket.io?EIO=4&transport=polling&t=2au9lbj8 404 in 92ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
=== FRIEND REQUEST GET START ===
 GET /api/socket-health 200 in 67ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
Request type: received User: sayantan2@gmail.com
âœ… Database connected
âœ… Current user found: {
  id: new ObjectId('6901f85f42c5d010fa811206'),
  email: 'sayantan2@gmail.com',
  friendRequestsCount: 0,
  sentRequestsCount: 1
}
Processing received requests...
Raw friendRequests: []
Processed receivedRequests: []
Populating sender details...
Final populated requests: []
=== FRIEND REQUEST GET END (received) ===
 GET /api/friends/request?type=received 200 in 176ms
 GET /api/socket-health 200 in 116ms
 GET /api/friends 200 in 223ms
=== FRIEND REQUEST GET START ===
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
Request type: sent User: sayantan2@gmail.com
âœ… Database connected
 GET /socket.io?EIO=4&transport=polling&t=2avrnnxf 404 in 239ms
 GET /socket.io?EIO=4&transport=polling&t=2avv04oa 404 in 122ms
âœ… Current user found: {
  id: new ObjectId('6901f85f42c5d010fa811206'),
  email: 'sayantan2@gmail.com',
  friendRequestsCount: 0,
  sentRequestsCount: 1
}
Processing sent requests...
Raw sentRequests: [
  {
    from: new ObjectId('6901f85f42c5d010fa811206'),
    fromName: 'sayantan2',
    to: new ObjectId('6905adf16a22b7843b006183'),
    toName: 'sayantan3',
    status: 'pending',
    _id: new ObjectId('6905cdce14ad0d0f020b3985'),
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
Filtering sent request: { status: 'pending', to: new ObjectId('6905adf16a22b7843b006183') }
Mapping sent request: {
  from: new ObjectId('6901f85f42c5d010fa811206'),
  fromName: 'sayantan2',
  to: new ObjectId('6905adf16a22b7843b006183'),
  toName: 'sayantan3',
  status: 'pending',
  _id: new ObjectId('6905cdce14ad0d0f020b3985'),
  createdAt: 2025-11-01T09:07:26.707Z,
  updatedAt: 2025-11-01T09:07:26.707Z
}
Processed sentRequests: [
  {
    id: '6905cdce14ad0d0f020b3985',
    to: {
      id: '6905adf16a22b7843b006183',
      username: 'sayantan3',
      email: '',
      profilePicture: null
    },
    status: 'pending',
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
Populating recipient details...
Looking up recipient: 6905adf16a22b7843b006183
Found recipient: sayantan3
Final populated sent requests: [
  {
    id: '6905cdce14ad0d0f020b3985',
    to: {
      id: '6905adf16a22b7843b006183',
      username: 'sayantan3',
      email: 'sayantan3@gmail.com',
      profilePicture: undefined
    },
    status: 'pending',
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
=== FRIEND REQUEST GET END (sent) ===
 GET /api/friends/request?type=sent 200 in 214ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
 POST /api/users/heartbeat 200 in 173ms
 GET /api/socket-health 200 in 28ms
 GET /api/socket-health 200 in 125ms
 GET /socket.io?EIO=4&transport=polling&t=2ax9j7hh 404 in 226ms
 GET /socket.io?EIO=4&transport=polling&t=2axd26ma 404 in 116ms
 GET /api/socket-health 200 in 28ms
 GET /api/socket-health 200 in 114ms
 GET /socket.io?EIO=4&transport=polling&t=2ayt5cs4 404 in 213ms
 GET /socket.io?EIO=4&transport=polling&t=2aywc01r 404 in 100ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
 GET /api/socket-health 200 in 53ms
 GET /api/conversations 200 in 185ms
 GET /api/socket-health 200 in 158ms
 GET /socket.io?EIO=4&transport=polling&t=2b0du7qq 404 in 335ms
 GET /socket.io?EIO=4&transport=polling&t=2b0ib8ug 404 in 190ms
 GET /api/socket-health 200 in 38ms
 GET /api/socket-health 200 in 112ms
 GET /socket.io?EIO=4&transport=polling&t=2b1wtiso 404 in 121ms
 GET /socket.io?EIO=4&transport=polling&t=2b1zz3yw 404 in 117ms
 GET /api/socket-health 200 in 23ms
 GET /api/socket-health 200 in 150ms
 GET /socket.io?EIO=4&transport=polling&t=2b3ft8zo 404 in 264ms
 GET /socket.io?EIO=4&transport=polling&t=2b3k0sko 404 in 123ms
 GET /api/socket-health 200 in 23ms
 GET /api/socket-health 200 in 114ms
 GET /socket.io?EIO=4&transport=polling&t=2b4z9xpp 404 in 203ms
 GET /socket.io?EIO=4&transport=polling&t=2b52hs1s 404 in 103ms
 GET /api/socket-health 200 in 34ms
 GET /api/socket-health 200 in 130ms
 GET /socket.io?EIO=4&transport=polling&t=2b6j8gx6 404 in 233ms
 GET /socket.io?EIO=4&transport=polling&t=2b6mwmqw 404 in 106ms
 GET /api/socket-health 200 in 46ms
 GET /api/socket-health 200 in 187ms
 GET /socket.io?EIO=4&transport=polling&t=2b83a78v 404 in 186ms
 GET /socket.io?EIO=4&transport=polling&t=2b88lwu1 404 in 149ms
 GET /api/socket-health 200 in 27ms
 GET /api/socket-health 200 in 112ms
 GET /socket.io?EIO=4&transport=polling&t=2b9m8uxm 404 in 202ms
 GET /socket.io?EIO=4&transport=polling&t=2b9pg0l0 404 in 96ms
 GET /api/socket-health 200 in 31ms
 GET /api/socket-health 200 in 109ms
 GET /socket.io?EIO=4&transport=polling&t=2bb5uv0q 404 in 192ms
 GET /socket.io?EIO=4&transport=polling&t=2bb8ws1m 404 in 96ms
 GET /api/socket-health 200 in 25ms
 GET /api/socket-health 200 in 114ms
 GET /socket.io?EIO=4&transport=polling&t=2bcpaarh 404 in 198ms
 GET /socket.io?EIO=4&transport=polling&t=2bcshtbm 404 in 85ms
 GET /api/socket-health 200 in 26ms
 GET /api/socket-health 200 in 105ms
 GET /socket.io?EIO=4&transport=polling&t=2be94h2k 404 in 115ms
 GET /socket.io?EIO=4&transport=polling&t=2bec26gn 404 in 95ms
 GET /api/socket-health 200 in 22ms
 GET /api/socket-health 200 in 113ms
 GET /socket.io?EIO=4&transport=polling&t=2bfs8p9d 404 in 203ms
 GET /socket.io?EIO=4&transport=polling&t=2bfvf8c1 404 in 91ms
 GET /api/socket-health 200 in 27ms
 GET /api/socket-health 200 in 105ms
 GET /socket.io?EIO=4&transport=polling&t=2bhbxe2a 404 in 179ms
 GET /socket.io?EIO=4&transport=polling&t=2bhewy1f 404 in 93ms
 GET /api/socket-health 200 in 24ms
 GET /api/socket-health 200 in 112ms
 GET /socket.io?EIO=4&transport=polling&t=2bivd771 404 in 201ms
 GET /socket.io?EIO=4&transport=polling&t=2biyjlpa 404 in 94ms
=== FRIEND REQUEST GET START ===
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
Request type: received User: sayantan2@gmail.com
âœ… Database connected
âœ… Current user found: {
  id: new ObjectId('6901f85f42c5d010fa811206'),
  email: 'sayantan2@gmail.com',
  friendRequestsCount: 0,
  sentRequestsCount: 1
}
Processing received requests...
Raw friendRequests: []
Processed receivedRequests: []
Populating sender details...
Final populated requests: []
=== FRIEND REQUEST GET END (received) ===
 GET /api/friends/request?type=received 200 in 94ms
=== FRIEND REQUEST GET START ===
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
Request type: sent User: sayantan2@gmail.com
âœ… Database connected
âœ… Current user found: {
  id: new ObjectId('6901f85f42c5d010fa811206'),
  email: 'sayantan2@gmail.com',
  friendRequestsCount: 0,
  sentRequestsCount: 1
}
Processing sent requests...
Raw sentRequests: [
  {
    from: new ObjectId('6901f85f42c5d010fa811206'),
    fromName: 'sayantan2',
    to: new ObjectId('6905adf16a22b7843b006183'),
    toName: 'sayantan3',
    status: 'pending',
    _id: new ObjectId('6905cdce14ad0d0f020b3985'),
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
Filtering sent request: { status: 'pending', to: new ObjectId('6905adf16a22b7843b006183') }
Mapping sent request: {
  from: new ObjectId('6901f85f42c5d010fa811206'),
  fromName: 'sayantan2',
  to: new ObjectId('6905adf16a22b7843b006183'),
  toName: 'sayantan3',
  status: 'pending',
  _id: new ObjectId('6905cdce14ad0d0f020b3985'),
  createdAt: 2025-11-01T09:07:26.707Z,
  updatedAt: 2025-11-01T09:07:26.707Z
}
Processed sentRequests: [
  {
    id: '6905cdce14ad0d0f020b3985',
    to: {
      id: '6905adf16a22b7843b006183',
      username: 'sayantan3',
      email: '',
      profilePicture: null
    },
    status: 'pending',
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
Populating recipient details...
Looking up recipient: 6905adf16a22b7843b006183
Found recipient: sayantan3
Final populated sent requests: [
  {
    id: '6905cdce14ad0d0f020b3985',
    to: {
      id: '6905adf16a22b7843b006183',
      username: 'sayantan3',
      email: 'sayantan3@gmail.com',
      profilePicture: undefined
    },
    status: 'pending',
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
=== FRIEND REQUEST GET END (sent) ===
 GET /api/friends/request?type=sent 200 in 136ms
 GET /api/socket-health 200 in 43ms
 GET /api/socket-health 200 in 128ms
 GET /socket.io?EIO=4&transport=polling&t=2bkfju5z 404 in 221ms
 GET /socket.io?EIO=4&transport=polling&t=2bkj6ymo 404 in 111ms
 GET /api/socket-health 200 in 26ms
 GET /api/socket-health 200 in 131ms
 GET /socket.io?EIO=4&transport=polling&t=2blyo6jt 404 in 240ms
 GET /socket.io?EIO=4&transport=polling&t=2bm2ccjn 404 in 116ms
 GET /api/socket-health 200 in 23ms
 GET /api/socket-health 200 in 100ms
 GET /socket.io?EIO=4&transport=polling&t=2bni2at0 404 in 187ms
 GET /socket.io?EIO=4&transport=polling&t=2bnkwxjt 404 in 97ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
 GET /api/conversations 200 in 138ms
 GET /api/socket-health 200 in 30ms
 GET /api/socket-health 200 in 114ms
 GET /socket.io?EIO=4&transport=polling&t=2bp1og0c 404 in 118ms
 GET /socket.io?EIO=4&transport=polling&t=2bp4whsz 404 in 96ms
 GET /api/socket-health 200 in 23ms
 GET /api/socket-health 200 in 104ms
 GET /socket.io?EIO=4&transport=polling&t=2bql2yd3 404 in 200ms
 GET /socket.io?EIO=4&transport=polling&t=2bqo03k3 404 in 98ms
 GET /api/socket-health 200 in 33ms
 GET /api/socket-health 200 in 130ms
 GET /socket.io?EIO=4&transport=polling&t=2bs4w2m5 404 in 135ms
 GET /socket.io?EIO=4&transport=polling&t=2bs8kaom 404 in 106ms
 GET /api/socket-health 200 in 25ms
 GET /api/socket-health 200 in 113ms
 GET /socket.io?EIO=4&transport=polling&t=2btoezjp 404 in 204ms
 GET /socket.io?EIO=4&transport=polling&t=2btrlqiw 404 in 94ms
 GET /api/socket-health 200 in 26ms
 GET /api/socket-health 200 in 117ms
 GET /socket.io?EIO=4&transport=polling&t=2bv7w3y6 404 in 211ms
 GET /socket.io?EIO=4&transport=polling&t=2bvb8xd4 404 in 103ms
 GET /api/socket-health 200 in 25ms
 GET /api/socket-health 200 in 104ms
 GET /socket.io?EIO=4&transport=polling&t=2bwr8obv 404 in 192ms
 GET /socket.io?EIO=4&transport=polling&t=2bwu8z6k 404 in 92ms
 GET /api/socket-health 200 in 28ms
 GET /api/socket-health 200 in 24ms
 GET /socket.io?EIO=4&transport=polling&t=2byb9ums 404 in 200ms
 GET /socket.io?EIO=4&transport=polling&t=2bybyy70 404 in 103ms
 GET /api/socket-health 200 in 23ms
 GET /api/socket-health 200 in 105ms
 GET /socket.io?EIO=4&transport=polling&t=2bzuoghg 404 in 195ms
 GET /socket.io?EIO=4&transport=polling&t=2bzxnx24 404 in 99ms
 GET /api/socket-health 200 in 23ms
 GET /api/socket-health 200 in 106ms
 GET /socket.io?EIO=4&transport=polling&t=2c1e5ya2 404 in 189ms
 GET /socket.io?EIO=4&transport=polling&t=2c1h56yo 404 in 90ms
 GET /api/socket-health 200 in 23ms
 GET /api/socket-health 200 in 102ms
 GET /socket.io?EIO=4&transport=polling&t=2c2xp6m3 404 in 195ms
 GET /socket.io?EIO=4&transport=polling&t=2c30mi61 404 in 102ms
 GET /api/socket-health 200 in 22ms
 GET /api/socket-health 200 in 101ms
 GET /socket.io?EIO=4&transport=polling&t=2c4h7y2y 404 in 192ms
 GET /socket.io?EIO=4&transport=polling&t=2c4k30v6 404 in 100ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
=== FRIEND REQUEST GET START ===
 GET /api/socket-health 200 in 69ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
Request type: received User: sayantan2@gmail.com
âœ… Database connected
 GET /api/socket-health 200 in 115ms
 GET /socket.io?EIO=4&transport=polling&t=2c62lc4n 404 in 206ms
 GET /socket.io?EIO=4&transport=polling&t=2c66309j 404 in 98ms
 POST /api/users/heartbeat 200 in 347ms
âœ… Current user found: {
  id: new ObjectId('6901f85f42c5d010fa811206'),
  email: 'sayantan2@gmail.com',
  friendRequestsCount: 0,
  sentRequestsCount: 1
}
Processing received requests...
Raw friendRequests: []
Processed receivedRequests: []
Populating sender details...
Final populated requests: []
=== FRIEND REQUEST GET END (received) ===
 GET /api/friends/request?type=received 200 in 560ms
=== FRIEND REQUEST GET START ===
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
Request type: sent User: sayantan2@gmail.com
âœ… Database connected
âœ… Current user found: {
  id: new ObjectId('6901f85f42c5d010fa811206'),
  email: 'sayantan2@gmail.com',
  friendRequestsCount: 0,
  sentRequestsCount: 1
}
Processing sent requests...
Raw sentRequests: [
  {
    from: new ObjectId('6901f85f42c5d010fa811206'),
    fromName: 'sayantan2',
    to: new ObjectId('6905adf16a22b7843b006183'),
    toName: 'sayantan3',
    status: 'pending',
    _id: new ObjectId('6905cdce14ad0d0f020b3985'),
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
Filtering sent request: { status: 'pending', to: new ObjectId('6905adf16a22b7843b006183') }
Mapping sent request: {
  from: new ObjectId('6901f85f42c5d010fa811206'),
  fromName: 'sayantan2',
  to: new ObjectId('6905adf16a22b7843b006183'),
  toName: 'sayantan3',
  status: 'pending',
  _id: new ObjectId('6905cdce14ad0d0f020b3985'),
  createdAt: 2025-11-01T09:07:26.707Z,
  updatedAt: 2025-11-01T09:07:26.707Z
}
Processed sentRequests: [
  {
    id: '6905cdce14ad0d0f020b3985',
    to: {
      id: '6905adf16a22b7843b006183',
      username: 'sayantan3',
      email: '',
      profilePicture: null
    },
    status: 'pending',
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
Populating recipient details...
Looking up recipient: 6905adf16a22b7843b006183
 GET /api/friends 200 in 654ms
Found recipient: sayantan3
Final populated sent requests: [
  {
    id: '6905cdce14ad0d0f020b3985',
    to: {
      id: '6905adf16a22b7843b006183',
      username: 'sayantan3',
      email: 'sayantan3@gmail.com',
      profilePicture: undefined
    },
    status: 'pending',
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
=== FRIEND REQUEST GET END (sent) ===
 GET /api/friends/request?type=sent 200 in 106ms
 GET /api/socket-health 200 in 45ms
 GET /api/socket-health 200 in 151ms
 GET /socket.io?EIO=4&transport=polling&t=2c7kuzip 404 in 529ms
 GET /socket.io?EIO=4&transport=polling&t=2c7p3whh 404 in 391ms
 GET /api/socket-health 200 in 25ms
 GET /api/socket-health 200 in 110ms
 GET /socket.io?EIO=4&transport=polling&t=2c93v0s2 404 in 150ms
 GET /socket.io?EIO=4&transport=polling&t=2c96zb91 404 in 100ms
 GET /api/socket-health 200 in 30ms
 GET /api/socket-health 200 in 124ms
 GET /socket.io?EIO=4&transport=polling&t=2cand834 404 in 226ms
 GET /socket.io?EIO=4&transport=polling&t=2caqu41s 404 in 112ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
 GET /api/socket-health 200 in 45ms
 GET /api/socket-health 200 in 125ms
 GET /socket.io?EIO=4&transport=polling&t=2cc7d4ug 404 in 126ms
 GET /api/conversations 200 in 269ms
 GET /socket.io?EIO=4&transport=polling&t=2ccax3dp 404 in 100ms
 GET /api/socket-health 200 in 28ms
 GET /api/socket-health 200 in 107ms
 GET /socket.io?EIO=4&transport=polling&t=2cdqg9n2 404 in 195ms
 GET /socket.io?EIO=4&transport=polling&t=2cdtimxd 404 in 96ms
 GET /api/socket-health 200 in 22ms
 GET /api/socket-health 200 in 106ms
 GET /socket.io?EIO=4&transport=polling&t=2cf9tyay 404 in 198ms
 GET /socket.io?EIO=4&transport=polling&t=2cfcszoj 404 in 102ms
 GET /api/socket-health 200 in 26ms
 GET /api/socket-health 200 in 30ms
 GET /socket.io?EIO=4&transport=polling&t=2cgtv7cq 404 in 208ms
 GET /socket.io?EIO=4&transport=polling&t=2cguqh7t 404 in 112ms
 GET /api/socket-health 200 in 33ms
 GET /api/socket-health 200 in 23ms
 GET /socket.io?EIO=4&transport=polling&t=2cidk311 404 in 214ms
 GET /socket.io?EIO=4&transport=polling&t=2cie96xg 404 in 112ms
 GET /api/socket-health 200 in 24ms
 GET /api/socket-health 200 in 109ms
 GET /socket.io?EIO=4&transport=polling&t=2cjwqhol 404 in 201ms
 GET /socket.io?EIO=4&transport=polling&t=2cjztn3u 404 in 97ms
 GET /api/socket-health 200 in 37ms
 GET /api/socket-health 200 in 25ms
 GET /socket.io?EIO=4&transport=polling&t=2clgt19y 404 in 210ms
 GET /socket.io?EIO=4&transport=polling&t=2clhkhfj 404 in 105ms
 GET /api/socket-health 200 in 24ms
 GET /api/socket-health 200 in 108ms
 GET /socket.io?EIO=4&transport=polling&t=2cmzxqiw 404 in 190ms
 GET /socket.io?EIO=4&transport=polling&t=2cn2zp7d 404 in 94ms
 GET /api/socket-health 200 in 23ms
 GET /api/socket-health 200 in 103ms
 GET /socket.io?EIO=4&transport=polling&t=2coj8x0m 404 in 108ms
 GET /socket.io?EIO=4&transport=polling&t=2com4g1q 404 in 96ms
 GET /api/socket-health 200 in 25ms
 GET /api/socket-health 200 in 112ms
 GET /socket.io?EIO=4&transport=polling&t=2cq2teft 404 in 207ms
 GET /socket.io?EIO=4&transport=polling&t=2cq5z8hy 404 in 105ms
 GET /api/socket-health 200 in 24ms
 GET /api/socket-health 200 in 102ms
 GET /socket.io?EIO=4&transport=polling&t=2crmaptt 404 in 144ms
 GET /socket.io?EIO=4&transport=polling&t=2crp7h4o 404 in 102ms
 GET /api/socket-health 200 in 24ms
 GET /api/socket-health 200 in 109ms
 GET /socket.io?EIO=4&transport=polling&t=2ct67tys 404 in 190ms
 GET /socket.io?EIO=4&transport=polling&t=2ct9atfl 404 in 84ms
=== FRIEND REQUEST GET START ===
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
Request type: received User: sayantan2@gmail.com
âœ… Database connected
âœ… Current user found: {
  id: new ObjectId('6901f85f42c5d010fa811206'),
  email: 'sayantan2@gmail.com',
  friendRequestsCount: 0,
  sentRequestsCount: 1
}
Processing received requests...
Raw friendRequests: []
Processed receivedRequests: []
Populating sender details...
Final populated requests: []
=== FRIEND REQUEST GET END (received) ===
 GET /api/friends/request?type=received 200 in 158ms
=== FRIEND REQUEST GET START ===
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
Request type: sent User: sayantan2@gmail.com
âœ… Database connected
âœ… Current user found: {
  id: new ObjectId('6901f85f42c5d010fa811206'),
  email: 'sayantan2@gmail.com',
  friendRequestsCount: 0,
  sentRequestsCount: 1
}
Processing sent requests...
Raw sentRequests: [
  {
    from: new ObjectId('6901f85f42c5d010fa811206'),
    fromName: 'sayantan2',
    to: new ObjectId('6905adf16a22b7843b006183'),
    toName: 'sayantan3',
    status: 'pending',
    _id: new ObjectId('6905cdce14ad0d0f020b3985'),
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
Filtering sent request: { status: 'pending', to: new ObjectId('6905adf16a22b7843b006183') }
Mapping sent request: {
  from: new ObjectId('6901f85f42c5d010fa811206'),
  fromName: 'sayantan2',
  to: new ObjectId('6905adf16a22b7843b006183'),
  toName: 'sayantan3',
  status: 'pending',
  _id: new ObjectId('6905cdce14ad0d0f020b3985'),
  createdAt: 2025-11-01T09:07:26.707Z,
  updatedAt: 2025-11-01T09:07:26.707Z
}
Processed sentRequests: [
  {
    id: '6905cdce14ad0d0f020b3985',
    to: {
      id: '6905adf16a22b7843b006183',
      username: 'sayantan3',
      email: '',
      profilePicture: null
    },
    status: 'pending',
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
Populating recipient details...
Looking up recipient: 6905adf16a22b7843b006183
Found recipient: sayantan3
Final populated sent requests: [
  {
    id: '6905cdce14ad0d0f020b3985',
    to: {
      id: '6905adf16a22b7843b006183',
      username: 'sayantan3',
      email: 'sayantan3@gmail.com',
      profilePicture: undefined
    },
    status: 'pending',
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
=== FRIEND REQUEST GET END (sent) ===
 GET /api/friends/request?type=sent 200 in 199ms
 GET /api/socket-health 200 in 32ms
 GET /api/socket-health 200 in 109ms
 GET /socket.io?EIO=4&transport=polling&t=2cuprk4p 404 in 113ms
 GET /socket.io?EIO=4&transport=polling&t=2cusunin 404 in 97ms
 GET /api/socket-health 200 in 29ms
 GET /api/socket-health 200 in 112ms
 GET /socket.io?EIO=4&transport=polling&t=2cw93nzc 404 in 206ms
 GET /socket.io?EIO=4&transport=polling&t=2cwcaakr 404 in 96ms
 GET /api/socket-health 200 in 24ms
 GET /api/socket-health 200 in 111ms
 GET /socket.io?EIO=4&transport=polling&t=2cxsq3pk 404 in 204ms
 GET /socket.io?EIO=4&transport=polling&t=2cxvv3il 404 in 109ms
 GET /api/socket-health 200 in 23ms
 GET /api/socket-health 200 in 105ms
 GET /socket.io?EIO=4&transport=polling&t=2czc58p0 404 in 191ms
 GET /socket.io?EIO=4&transport=polling&t=2czf4px6 404 in 89ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
 GET /api/conversations 200 in 113ms
 GET /api/socket-health 200 in 29ms
 GET /api/socket-health 200 in 132ms
 GET /socket.io?EIO=4&transport=polling&t=2d0w347b 404 in 129ms
 GET /socket.io?EIO=4&transport=polling&t=2d0zsnw5 404 in 107ms
 GET /api/socket-health 200 in 24ms
 GET /api/socket-health 200 in 119ms
 GET /socket.io?EIO=4&transport=polling&t=2d2fkp4h 404 in 224ms
 GET /socket.io?EIO=4&transport=polling&t=2d2iyn1d 404 in 111ms
 GET /api/socket-health 200 in 25ms
 GET /api/socket-health 200 in 112ms
 GET /socket.io?EIO=4&transport=polling&t=2d3ys5c5 404 in 195ms
 GET /socket.io?EIO=4&transport=polling&t=2d41xrp8 404 in 98ms
 GET /api/socket-health 200 in 26ms
 GET /api/socket-health 200 in 116ms
 GET /socket.io?EIO=4&transport=polling&t=2d5ioxvv 404 in 205ms
 GET /socket.io?EIO=4&transport=polling&t=2d5lxx0u 404 in 103ms
 GET /api/socket-health 200 in 28ms
 GET /api/socket-health 200 in 127ms
 GET /socket.io?EIO=4&transport=polling&t=2d72ecyu 404 in 211ms
 GET /socket.io?EIO=4&transport=polling&t=2d75z245 404 in 101ms
 GET /api/socket-health 200 in 24ms
 GET /api/socket-health 200 in 118ms
 GET /socket.io?EIO=4&transport=polling&t=2d8lee84 404 in 122ms
 GET /socket.io?EIO=4&transport=polling&t=2d8op7g2 404 in 110ms
 GET /api/socket-health 200 in 25ms
 GET /api/socket-health 200 in 131ms
 GET /socket.io?EIO=4&transport=polling&t=2da5622y 404 in 217ms
 GET /socket.io?EIO=4&transport=polling&t=2da8ujgh 404 in 110ms
 GET /api/socket-health 200 in 24ms
 GET /api/socket-health 200 in 117ms
 GET /socket.io?EIO=4&transport=polling&t=2dbomis2 404 in 223ms
 GET /socket.io?EIO=4&transport=polling&t=2dbrzi1r 404 in 114ms
 GET /api/socket-health 200 in 28ms
 GET /api/socket-health 200 in 125ms
 GET /socket.io?EIO=4&transport=polling&t=2dd8flrk 404 in 214ms
 GET /socket.io?EIO=4&transport=polling&t=2ddbyecu 404 in 109ms
 GET /api/socket-health 200 in 29ms
 GET /api/socket-health 200 in 128ms
 GET /socket.io?EIO=4&transport=polling&t=2dervstn 404 in 303ms
 GET /socket.io?EIO=4&transport=polling&t=2devhdm5 404 in 178ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
=== FRIEND REQUEST GET START ===
 GET /api/socket-health 200 in 121ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
Request type: received User: sayantan2@gmail.com
âœ… Database connected
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
 GET /api/auth/session 200 in 134ms
 GET /api/socket-health 200 in 160ms
 POST /api/users/heartbeat 200 in 340ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
 GET /socket.io?EIO=4&transport=polling&t=2dgelo0l 404 in 248ms
 GET /api/random-chat/queue 200 in 233ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
 GET /socket.io?EIO=4&transport=polling&t=2dgjghol 404 in 146ms
âœ… Current user found: {
  id: new ObjectId('6901f85f42c5d010fa811206'),
  email: 'sayantan2@gmail.com',
  friendRequestsCount: 0,
  sentRequestsCount: 1
}
Processing received requests...
Raw friendRequests: []
Processed receivedRequests: []
Populating sender details...
Final populated requests: []
=== FRIEND REQUEST GET END (received) ===
 GET /api/friends/request?type=received 200 in 647ms
 GET /api/friends 200 in 678ms
 POST /api/users/heartbeat 200 in 384ms
=== FRIEND REQUEST GET START ===
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
Request type: received User: sayantan2@gmail.com
âœ… Database connected
=== FRIEND REQUEST GET START ===
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
Request type: sent User: sayantan2@gmail.com
âœ… Database connected
âœ… Current user found: {
  id: new ObjectId('6901f85f42c5d010fa811206'),
  email: 'sayantan2@gmail.com',
  friendRequestsCount: 0,
  sentRequestsCount: 1
}
Processing received requests...
Raw friendRequests: []
Processed receivedRequests: []
Populating sender details...
Final populated requests: []
=== FRIEND REQUEST GET END (received) ===
 GET /api/friends/request?type=received 200 in 100ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
âœ… Current user found: {
  id: new ObjectId('6901f85f42c5d010fa811206'),
  email: 'sayantan2@gmail.com',
  friendRequestsCount: 0,
  sentRequestsCount: 1
}
Processing sent requests...
Raw sentRequests: [
  {
    from: new ObjectId('6901f85f42c5d010fa811206'),
    fromName: 'sayantan2',
    to: new ObjectId('6905adf16a22b7843b006183'),
    toName: 'sayantan3',
    status: 'pending',
    _id: new ObjectId('6905cdce14ad0d0f020b3985'),
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
Filtering sent request: { status: 'pending', to: new ObjectId('6905adf16a22b7843b006183') }
Mapping sent request: {
  from: new ObjectId('6901f85f42c5d010fa811206'),
  fromName: 'sayantan2',
  to: new ObjectId('6905adf16a22b7843b006183'),
  toName: 'sayantan3',
  status: 'pending',
  _id: new ObjectId('6905cdce14ad0d0f020b3985'),
  createdAt: 2025-11-01T09:07:26.707Z,
  updatedAt: 2025-11-01T09:07:26.707Z
}
Processed sentRequests: [
  {
    id: '6905cdce14ad0d0f020b3985',
    to: {
      id: '6905adf16a22b7843b006183',
      username: 'sayantan3',
      email: '',
      profilePicture: null
    },
    status: 'pending',
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
Populating recipient details...
Looking up recipient: 6905adf16a22b7843b006183
Found recipient: sayantan3
Final populated sent requests: [
  {
    id: '6905cdce14ad0d0f020b3985',
    to: {
      id: '6905adf16a22b7843b006183',
      username: 'sayantan3',
      email: 'sayantan3@gmail.com',
      profilePicture: undefined
    },
    status: 'pending',
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
=== FRIEND REQUEST GET END (sent) ===
 GET /api/friends/request?type=sent 200 in 171ms
 GET /api/friends 200 in 156ms
=== FRIEND REQUEST GET START ===
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
Request type: sent User: sayantan2@gmail.com
âœ… Database connected
âœ… Current user found: {
  id: new ObjectId('6901f85f42c5d010fa811206'),
  email: 'sayantan2@gmail.com',
  friendRequestsCount: 0,
  sentRequestsCount: 1
}
Processing sent requests...
Raw sentRequests: [
  {
    from: new ObjectId('6901f85f42c5d010fa811206'),
    fromName: 'sayantan2',
    to: new ObjectId('6905adf16a22b7843b006183'),
    toName: 'sayantan3',
    status: 'pending',
    _id: new ObjectId('6905cdce14ad0d0f020b3985'),
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
Filtering sent request: { status: 'pending', to: new ObjectId('6905adf16a22b7843b006183') }
Mapping sent request: {
  from: new ObjectId('6901f85f42c5d010fa811206'),
  fromName: 'sayantan2',
  to: new ObjectId('6905adf16a22b7843b006183'),
  toName: 'sayantan3',
  status: 'pending',
  _id: new ObjectId('6905cdce14ad0d0f020b3985'),
  createdAt: 2025-11-01T09:07:26.707Z,
  updatedAt: 2025-11-01T09:07:26.707Z
}
Processed sentRequests: [
  {
    id: '6905cdce14ad0d0f020b3985',
    to: {
      id: '6905adf16a22b7843b006183',
      username: 'sayantan3',
      email: '',
      profilePicture: null
    },
    status: 'pending',
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
Populating recipient details...
Looking up recipient: 6905adf16a22b7843b006183
 GET /api/users/me 200 in 598ms
Found recipient: sayantan3
Final populated sent requests: [
  {
    id: '6905cdce14ad0d0f020b3985',
    to: {
      id: '6905adf16a22b7843b006183',
      username: 'sayantan3',
      email: 'sayantan3@gmail.com',
      profilePicture: undefined
    },
    status: 'pending',
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
=== FRIEND REQUEST GET END (sent) ===
 GET /api/friends/request?type=sent 200 in 148ms
 GET /api/random-chat/session 200 in 478ms
 GET /api/socket-health 200 in 30ms
 GET /api/socket-health 200 in 115ms
 GET /socket.io?EIO=4&transport=polling&t=2dhv67md 404 in 119ms
 GET /socket.io?EIO=4&transport=polling&t=2dhyel9a 404 in 107ms
 GET /api/socket-health 200 in 24ms
 GET /api/socket-health 200 in 112ms
 GET /socket.io?EIO=4&transport=polling&t=2djejjt0 404 in 211ms
 GET /socket.io?EIO=4&transport=polling&t=2djhpeae 404 in 104ms
 GET /api/socket-health 200 in 24ms
 GET /api/socket-health 200 in 105ms
 GET /socket.io?EIO=4&transport=polling&t=2dky41cp 404 in 111ms
 GET /socket.io?EIO=4&transport=polling&t=2dl12p1f 404 in 104ms
 GET /api/socket-health 200 in 24ms
 GET /api/socket-health 200 in 115ms
 GET /socket.io?EIO=4&transport=polling&t=2dmhnx2u 404 in 206ms
 GET /socket.io?EIO=4&transport=polling&t=2dmkw5uo 404 in 93ms
 GET /api/socket-health 200 in 35ms
 GET /api/socket-health 200 in 112ms
 GET /socket.io?EIO=4&transport=polling&t=2do192ro 404 in 196ms
 GET /socket.io?EIO=4&transport=polling&t=2do4gkn3 404 in 95ms
 GET /api/socket-health 200 in 23ms
 GET /api/socket-health 200 in 110ms
 GET /socket.io?EIO=4&transport=polling&t=2dpknqd0 404 in 201ms
 GET /socket.io?EIO=4&transport=polling&t=2dpnql24 404 in 93ms
 GET /api/socket-health 200 in 28ms
 GET /api/socket-health 200 in 111ms
 GET /socket.io?EIO=4&transport=polling&t=2dr48bn3 404 in 200ms
 GET /socket.io?EIO=4&transport=polling&t=2dr7dcnn 404 in 98ms
 GET /api/socket-health 200 in 26ms
 GET /api/socket-health 200 in 115ms
 GET /socket.io?EIO=4&transport=polling&t=2dsnpy8z 404 in 213ms
 GET /socket.io?EIO=4&transport=polling&t=2dsr04lz 404 in 102ms
 GET /api/socket-health 200 in 30ms
 GET /api/socket-health 200 in 121ms
 GET /socket.io?EIO=4&transport=polling&t=2du7pi9g 404 in 212ms
 GET /socket.io?EIO=4&transport=polling&t=2dub398g 404 in 102ms
 GET /api/socket-health 200 in 27ms
 GET /api/socket-health 200 in 109ms
 GET /socket.io?EIO=4&transport=polling&t=2dvqw4nr 404 in 202ms
 GET /socket.io?EIO=4&transport=polling&t=2dvu0x1y 404 in 95ms
 GET /api/socket-health 200 in 31ms
 GET /api/socket-health 200 in 108ms
 GET /socket.io?EIO=4&transport=polling&t=2dxanxg0 404 in 117ms
 GET /socket.io?EIO=4&transport=polling&t=2dxdph0f 404 in 106ms
 GET /api/socket-health 200 in 25ms
 GET /api/socket-health 200 in 113ms
 GET /socket.io?EIO=4&transport=polling&t=2dyu5zdt 404 in 198ms
 GET /socket.io?EIO=4&transport=polling&t=2dyxbk86 404 in 92ms
 GET /api/socket-health 200 in 26ms
 GET /api/socket-health 200 in 120ms
 GET /socket.io?EIO=4&transport=polling&t=2e0doqzx 404 in 219ms
 GET /socket.io?EIO=4&transport=polling&t=2e0h1ruc 404 in 111ms
 GET /api/socket-health 200 in 31ms
 GET /api/socket-health 200 in 117ms
 GET /socket.io?EIO=4&transport=polling&t=2e1xc4pg 404 in 205ms
 GET /socket.io?EIO=4&transport=polling&t=2e20n6n7 404 in 97ms
 GET /api/socket-health 200 in 33ms
 GET /api/socket-health 200 in 123ms
 GET /socket.io?EIO=4&transport=polling&t=2e3gukcj 404 in 221ms
 GET /socket.io?EIO=4&transport=polling&t=2e3kawug 404 in 110ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
=== FRIEND REQUEST GET START ===
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
Request type: received User: sayantan2@gmail.com
âœ… Database connected
 POST /api/users/heartbeat 200 in 519ms
 GET /api/conversations 200 in 520ms
âœ… Current user found: {
  id: new ObjectId('6901f85f42c5d010fa811206'),
  email: 'sayantan2@gmail.com',
  friendRequestsCount: 0,
  sentRequestsCount: 1
}
Processing received requests...
Raw friendRequests: []
Processed receivedRequests: []
Populating sender details...
Final populated requests: []
=== FRIEND REQUEST GET END (received) ===
 GET /api/friends/request?type=received 200 in 750ms
=== FRIEND REQUEST GET START ===
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
Request type: sent User: sayantan2@gmail.com
âœ… Database connected
âœ… Current user found: {
  id: new ObjectId('6901f85f42c5d010fa811206'),
  email: 'sayantan2@gmail.com',
  friendRequestsCount: 0,
  sentRequestsCount: 1
}
Processing sent requests...
Raw sentRequests: [
  {
    from: new ObjectId('6901f85f42c5d010fa811206'),
    fromName: 'sayantan2',
    to: new ObjectId('6905adf16a22b7843b006183'),
    toName: 'sayantan3',
    status: 'pending',
    _id: new ObjectId('6905cdce14ad0d0f020b3985'),
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
Filtering sent request: { status: 'pending', to: new ObjectId('6905adf16a22b7843b006183') }
Mapping sent request: {
  from: new ObjectId('6901f85f42c5d010fa811206'),
  fromName: 'sayantan2',
  to: new ObjectId('6905adf16a22b7843b006183'),
  toName: 'sayantan3',
  status: 'pending',
  _id: new ObjectId('6905cdce14ad0d0f020b3985'),
  createdAt: 2025-11-01T09:07:26.707Z,
  updatedAt: 2025-11-01T09:07:26.707Z
}
Processed sentRequests: [
  {
    id: '6905cdce14ad0d0f020b3985',
    to: {
      id: '6905adf16a22b7843b006183',
      username: 'sayantan3',
      email: '',
      profilePicture: null
    },
    status: 'pending',
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
Populating recipient details...
Looking up recipient: 6905adf16a22b7843b006183
Found recipient: sayantan3
Final populated sent requests: [
  {
    id: '6905cdce14ad0d0f020b3985',
    to: {
      id: '6905adf16a22b7843b006183',
      username: 'sayantan3',
      email: 'sayantan3@gmail.com',
      profilePicture: undefined
    },
    status: 'pending',
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
=== FRIEND REQUEST GET END (sent) ===
 GET /api/friends/request?type=sent 200 in 145ms
 GET /api/socket-health 200 in 35ms
 GET /api/socket-health 200 in 164ms
 GET /socket.io?EIO=4&transport=polling&t=2e50jn2o 404 in 298ms
 GET /socket.io?EIO=4&transport=polling&t=2e555uni 404 in 137ms
 GET /api/socket-health 200 in 26ms
 GET /api/socket-health 200 in 118ms
 GET /socket.io?EIO=4&transport=polling&t=2e6k0dyq 404 in 214ms
 GET /socket.io?EIO=4&transport=polling&t=2e6ncrcw 404 in 97ms
 GET /api/socket-health 200 in 24ms
 GET /api/socket-health 200 in 106ms
 GET /socket.io?EIO=4&transport=polling&t=2e83gpr7 404 in 195ms
 GET /socket.io?EIO=4&transport=polling&t=2e86g77e 404 in 96ms
 GET /api/socket-health 200 in 22ms
 GET /api/socket-health 200 in 106ms
 GET /socket.io?EIO=4&transport=polling&t=2e9mwnx3 404 in 198ms
 GET /socket.io?EIO=4&transport=polling&t=2e9pv1i2 404 in 95ms
 GET /api/socket-health 200 in 31ms
 GET /api/socket-health 200 in 124ms
 GET /socket.io?EIO=4&transport=polling&t=2eb6mah1 404 in 228ms
 GET /socket.io?EIO=4&transport=polling&t=2eba4bn9 404 in 109ms
 GET /api/socket-health 200 in 25ms
 GET /api/socket-health 200 in 109ms
 GET /socket.io?EIO=4&transport=polling&t=2ecq0jd9 404 in 197ms
 GET /socket.io?EIO=4&transport=polling&t=2ect3sj2 404 in 93ms
 GET /api/socket-health 200 in 28ms
 GET /api/socket-health 200 in 111ms
 GET /socket.io?EIO=4&transport=polling&t=2ee9nczu 404 in 156ms
 GET /socket.io?EIO=4&transport=polling&t=2eecsocq 404 in 108ms
 GET /api/socket-health 200 in 23ms
 GET /api/socket-health 200 in 109ms
 GET /socket.io?EIO=4&transport=polling&t=2eft6ifv 404 in 198ms
 GET /socket.io?EIO=4&transport=polling&t=2efw8ulw 404 in 95ms
 GET /api/socket-health 200 in 33ms
 GET /api/socket-health 200 in 121ms
 GET /socket.io?EIO=4&transport=polling&t=2ehd03j1 404 in 220ms
 GET /socket.io?EIO=4&transport=polling&t=2ehge6xh 404 in 113ms
 GET /api/socket-health 200 in 26ms
 GET /api/socket-health 200 in 112ms
 GET /socket.io?EIO=4&transport=polling&t=2eiwkamn 404 in 257ms
 GET /socket.io?EIO=4&transport=polling&t=2eizqqxn 404 in 148ms
 GET /api/socket-health 200 in 35ms
 GET /api/socket-health 200 in 118ms
 GET /socket.io?EIO=4&transport=polling&t=2ekgb6cr 404 in 227ms
 GET /socket.io?EIO=4&transport=polling&t=2ekjnewj 404 in 119ms
 GET /api/socket-health 200 in 22ms
 GET /api/socket-health 200 in 117ms
 GET /socket.io?EIO=4&transport=polling&t=2elzeae1 404 in 207ms
 GET /socket.io?EIO=4&transport=polling&t=2em2pswg 404 in 96ms
 GET /api/socket-health 200 in 23ms
 GET /api/socket-health 200 in 111ms
 GET /socket.io?EIO=4&transport=polling&t=2eniwif1 404 in 116ms
 GET /socket.io?EIO=4&transport=polling&t=2enm3uh6 404 in 93ms
 GET /api/socket-health 200 in 36ms
 GET /api/socket-health 200 in 144ms
 GET /socket.io?EIO=4&transport=polling&t=2ep2ymv2 404 in 235ms
 GET /socket.io?EIO=4&transport=polling&t=2ep6zgny 404 in 100ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
=== FRIEND REQUEST GET START ===
 GET /api/socket-health 200 in 69ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
Request type: received User: sayantan2@gmail.com
âœ… Database connected
âœ… Current user found: {
  id: new ObjectId('6901f85f42c5d010fa811206'),
  email: 'sayantan2@gmail.com',
  friendRequestsCount: 0,
  sentRequestsCount: 1
}
Processing received requests...
Raw friendRequests: []
Processed receivedRequests: []
Populating sender details...
Final populated requests: []
=== FRIEND REQUEST GET END (received) ===
 GET /api/friends/request?type=received 200 in 189ms
 GET /api/friends 200 in 206ms
 GET /api/socket-health 200 in 131ms
=== FRIEND REQUEST GET START ===
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
Request type: sent User: sayantan2@gmail.com
âœ… Database connected
âœ… Current user found: {
  id: new ObjectId('6901f85f42c5d010fa811206'),
  email: 'sayantan2@gmail.com',
  friendRequestsCount: 0,
  sentRequestsCount: 1
}
Processing sent requests...
Raw sentRequests: [
  {
    from: new ObjectId('6901f85f42c5d010fa811206'),
    fromName: 'sayantan2',
    to: new ObjectId('6905adf16a22b7843b006183'),
    toName: 'sayantan3',
    status: 'pending',
    _id: new ObjectId('6905cdce14ad0d0f020b3985'),
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
Filtering sent request: { status: 'pending', to: new ObjectId('6905adf16a22b7843b006183') }
Mapping sent request: {
  from: new ObjectId('6901f85f42c5d010fa811206'),
  fromName: 'sayantan2',
  to: new ObjectId('6905adf16a22b7843b006183'),
  toName: 'sayantan3',
  status: 'pending',
  _id: new ObjectId('6905cdce14ad0d0f020b3985'),
  createdAt: 2025-11-01T09:07:26.707Z,
  updatedAt: 2025-11-01T09:07:26.707Z
}
Processed sentRequests: [
  {
    id: '6905cdce14ad0d0f020b3985',
    to: {
      id: '6905adf16a22b7843b006183',
      username: 'sayantan3',
      email: '',
      profilePicture: null
    },
    status: 'pending',
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
Populating recipient details...
Looking up recipient: 6905adf16a22b7843b006183
 GET /socket.io?EIO=4&transport=polling&t=2eqo3366 404 in 252ms
 GET /socket.io?EIO=4&transport=polling&t=2eqs24jb 404 in 114ms
Found recipient: sayantan3
Final populated sent requests: [
  {
    id: '6905cdce14ad0d0f020b3985',
    to: {
      id: '6905adf16a22b7843b006183',
      username: 'sayantan3',
      email: 'sayantan3@gmail.com',
      profilePicture: undefined
    },
    status: 'pending',
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
=== FRIEND REQUEST GET END (sent) ===
 GET /api/friends/request?type=sent 200 in 168ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
 POST /api/users/heartbeat 200 in 188ms
 GET /api/socket-health 200 in 55ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
 GET /api/socket-health 200 in 46ms
 GET /api/conversations 200 in 311ms
 GET /socket.io?EIO=4&transport=polling&t=2es6ln73 404 in 256ms
 GET /socket.io?EIO=4&transport=polling&t=2es7pxl8 404 in 124ms
 GET /api/socket-health 200 in 31ms
 GET /api/socket-health 200 in 109ms
 GET /socket.io?EIO=4&transport=polling&t=2etpevyr 404 in 199ms
 GET /socket.io?EIO=4&transport=polling&t=2etsgj5m 404 in 99ms
 GET /api/socket-health 200 in 25ms
 GET /api/socket-health 200 in 121ms
 GET /socket.io?EIO=4&transport=polling&t=2ev8njdy 404 in 211ms
 GET /socket.io?EIO=4&transport=polling&t=2evc2c64 404 in 98ms
 GET /api/socket-health 200 in 30ms
 GET /api/socket-health 200 in 118ms
 GET /socket.io?EIO=4&transport=polling&t=2ewse3cr 404 in 208ms
 GET /socket.io?EIO=4&transport=polling&t=2ewvr7r2 404 in 100ms
 GET /api/socket-health 200 in 24ms
 GET /api/socket-health 200 in 106ms
 GET /socket.io?EIO=4&transport=polling&t=2eyc289l 404 in 199ms
 GET /socket.io?EIO=4&transport=polling&t=2eyf1eh8 404 in 96ms
 GET /api/socket-health 200 in 40ms
 GET /api/socket-health 200 in 128ms
 GET /socket.io?EIO=4&transport=polling&t=2ezvy0cg 404 in 128ms
 GET /socket.io?EIO=4&transport=polling&t=2ezzmsx8 404 in 99ms
 GET /api/socket-health 200 in 24ms
 GET /api/socket-health 200 in 112ms
 GET /socket.io?EIO=4&transport=polling&t=2f1f31vd 404 in 199ms
 GET /socket.io?EIO=4&transport=polling&t=2f1i91x4 404 in 91ms
 GET /api/socket-health 200 in 26ms
 GET /api/socket-health 200 in 115ms
 GET /socket.io?EIO=4&transport=polling&t=2f2ykp8v 404 in 208ms
 GET /socket.io?EIO=4&transport=polling&t=2f31ttai 404 in 103ms
 GET /api/socket-health 200 in 28ms
 GET /api/socket-health 200 in 120ms
 GET /socket.io?EIO=4&transport=polling&t=2f4i4ps9 404 in 217ms
 GET /socket.io?EIO=4&transport=polling&t=2f4ljrwk 404 in 101ms
 GET /api/socket-health 200 in 35ms
 GET /api/socket-health 200 in 117ms
 GET /socket.io?EIO=4&transport=polling&t=2f61ujze 404 in 210ms
 GET /socket.io?EIO=4&transport=polling&t=2f655e6n 404 in 104ms
 GET /api/socket-health 200 in 24ms
 GET /api/socket-health 200 in 115ms
 GET /socket.io?EIO=4&transport=polling&t=2f7l8mif 404 in 208ms
 GET /socket.io?EIO=4&transport=polling&t=2f7ohs7k 404 in 95ms
 GET /api/socket-health 200 in 30ms
 GET /api/socket-health 200 in 108ms
 GET /socket.io?EIO=4&transport=polling&t=2f94xjfh 404 in 206ms
 GET /socket.io?EIO=4&transport=polling&t=2f97z7kf 404 in 106ms
 GET /api/socket-health 200 in 27ms
 GET /api/socket-health 200 in 138ms
 GET /socket.io?EIO=4&transport=polling&t=2faolno6 404 in 228ms
 GET /socket.io?EIO=4&transport=polling&t=2fasg790 404 in 110ms
 GET /api/socket-health 200 in 24ms
 GET /api/socket-health 200 in 130ms
 GET /socket.io?EIO=4&transport=polling&t=2fc7uwn4 404 in 238ms
 GET /socket.io?EIO=4&transport=polling&t=2fcbii5v 404 in 122ms
 GET /api/socket-health 200 in 22ms
 GET /api/socket-health 200 in 117ms
 GET /socket.io?EIO=4&transport=polling&t=2fdr76k5 404 in 214ms
 GET /socket.io?EIO=4&transport=polling&t=2fduihc7 404 in 95ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
=== FRIEND REQUEST GET START ===
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
Request type: received User: sayantan2@gmail.com
âœ… Database connected
 POST /api/users/heartbeat 200 in 191ms
âœ… Current user found: {
  id: new ObjectId('6901f85f42c5d010fa811206'),
  email: 'sayantan2@gmail.com',
  friendRequestsCount: 0,
  sentRequestsCount: 1
}
Processing received requests...
Raw friendRequests: []
Processed receivedRequests: []
Populating sender details...
Final populated requests: []
=== FRIEND REQUEST GET END (received) ===
 GET /api/friends/request?type=received 200 in 402ms
=== FRIEND REQUEST GET START ===
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
Request type: sent User: sayantan2@gmail.com
âœ… Database connected
âœ… Current user found: {
  id: new ObjectId('6901f85f42c5d010fa811206'),
  email: 'sayantan2@gmail.com',
  friendRequestsCount: 0,
  sentRequestsCount: 1
}
Processing sent requests...
Raw sentRequests: [
  {
    from: new ObjectId('6901f85f42c5d010fa811206'),
    fromName: 'sayantan2',
    to: new ObjectId('6905adf16a22b7843b006183'),
    toName: 'sayantan3',
    status: 'pending',
    _id: new ObjectId('6905cdce14ad0d0f020b3985'),
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
Filtering sent request: { status: 'pending', to: new ObjectId('6905adf16a22b7843b006183') }
Mapping sent request: {
  from: new ObjectId('6901f85f42c5d010fa811206'),
  fromName: 'sayantan2',
  to: new ObjectId('6905adf16a22b7843b006183'),
  toName: 'sayantan3',
  status: 'pending',
  _id: new ObjectId('6905cdce14ad0d0f020b3985'),
  createdAt: 2025-11-01T09:07:26.707Z,
  updatedAt: 2025-11-01T09:07:26.707Z
}
Processed sentRequests: [
  {
    id: '6905cdce14ad0d0f020b3985',
    to: {
      id: '6905adf16a22b7843b006183',
      username: 'sayantan3',
      email: '',
      profilePicture: null
    },
    status: 'pending',
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
Populating recipient details...
Looking up recipient: 6905adf16a22b7843b006183
Found recipient: sayantan3
Final populated sent requests: [
  {
    id: '6905cdce14ad0d0f020b3985',
    to: {
      id: '6905adf16a22b7843b006183',
      username: 'sayantan3',
      email: 'sayantan3@gmail.com',
      profilePicture: undefined
    },
    status: 'pending',
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
=== FRIEND REQUEST GET END (sent) ===
 GET /api/friends/request?type=sent 200 in 142ms
 GET /api/socket-health 200 in 21ms
 GET /api/socket-health 200 in 116ms
 GET /socket.io?EIO=4&transport=polling&t=2ffb3kw5 404 in 212ms
 GET /socket.io?EIO=4&transport=polling&t=2ffec8gz 404 in 102ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
 GET /api/conversations 200 in 131ms
 GET /api/socket-health 200 in 26ms
 GET /api/socket-health 200 in 134ms
 GET /socket.io?EIO=4&transport=polling&t=2fgulcn0 404 in 143ms
 GET /socket.io?EIO=4&transport=polling&t=2fgydnja 404 in 97ms
 GET /api/socket-health 200 in 25ms
 GET /api/socket-health 200 in 112ms
 GET /socket.io?EIO=4&transport=polling&t=2fie3nm3 404 in 206ms
 GET /socket.io?EIO=4&transport=polling&t=2fiha1gh 404 in 103ms
 GET /api/socket-health 200 in 24ms
 GET /api/socket-health 200 in 127ms
 GET /socket.io?EIO=4&transport=polling&t=2fjxjhqw 404 in 204ms
 GET /socket.io?EIO=4&transport=polling&t=2fk14zi2 404 in 98ms
 GET /api/socket-health 200 in 26ms
 GET /api/socket-health 200 in 113ms
 GET /socket.io?EIO=4&transport=polling&t=2flh75gn 404 in 201ms
 GET /socket.io?EIO=4&transport=polling&t=2flke5hr 404 in 98ms
 GET /api/socket-health 200 in 24ms
 GET /api/socket-health 200 in 116ms
 GET /socket.io?EIO=4&transport=polling&t=2fn0ma12 404 in 201ms
 GET /socket.io?EIO=4&transport=polling&t=2fn3v9xr 404 in 103ms
 GET /api/socket-health 200 in 23ms
 GET /api/socket-health 200 in 105ms
 GET /socket.io?EIO=4&transport=polling&t=2fokfrm5 404 in 112ms
 GET /socket.io?EIO=4&transport=polling&t=2fonevsr 404 in 116ms
 GET /api/socket-health 200 in 27ms
 GET /api/socket-health 200 in 25ms
 GET /socket.io?EIO=4&transport=polling&t=2fq3r8yq 404 in 194ms
 GET /socket.io?EIO=4&transport=polling&t=2fq4hvnk 404 in 98ms
 GET /api/socket-health 200 in 23ms
 GET /api/socket-health 200 in 108ms
 GET /socket.io?EIO=4&transport=polling&t=2frndjlg 404 in 191ms
 GET /socket.io?EIO=4&transport=polling&t=2frqel9c 404 in 89ms
 GET /api/socket-health 200 in 27ms
 GET /api/socket-health 200 in 100ms
 GET /socket.io?EIO=4&transport=polling&t=2ft733r8 404 in 191ms
 GET /socket.io?EIO=4&transport=polling&t=2ft9wfxa 404 in 100ms
 GET /api/socket-health 200 in 24ms
 GET /api/socket-health 200 in 124ms
 GET /socket.io?EIO=4&transport=polling&t=2fuqlhhd 404 in 221ms
 GET /socket.io?EIO=4&transport=polling&t=2fuu3vhc 404 in 100ms
 GET /api/socket-health 200 in 28ms
 GET /api/socket-health 200 in 134ms
 GET /socket.io?EIO=4&transport=polling&t=2fwajzfg 404 in 134ms
 GET /socket.io?EIO=4&transport=polling&t=2fwec6kt 404 in 93ms
 GET /api/socket-health 200 in 27ms
 GET /api/socket-health 200 in 122ms
 GET /socket.io?EIO=4&transport=polling&t=2fxtr0xc 404 in 214ms
 GET /socket.io?EIO=4&transport=polling&t=2fxx8xxc 404 in 100ms
 GET /api/socket-health 200 in 27ms
 GET /api/socket-health 200 in 111ms
 GET /socket.io?EIO=4&transport=polling&t=2fzd9tsa 404 in 120ms
 GET /socket.io?EIO=4&transport=polling&t=2fzgfkph 404 in 101ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
=== FRIEND REQUEST GET START ===
 GET /api/socket-health 200 in 64ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
Request type: received User: sayantan2@gmail.com
âœ… Database connected
âœ… Current user found: {
  id: new ObjectId('6901f85f42c5d010fa811206'),
  email: 'sayantan2@gmail.com',
  friendRequestsCount: 0,
  sentRequestsCount: 1
}
Processing received requests...
Raw friendRequests: []
Processed receivedRequests: []
Populating sender details...
Final populated requests: []
=== FRIEND REQUEST GET END (received) ===
 GET /api/friends/request?type=received 200 in 171ms
 GET /api/friends 200 in 181ms
 GET /api/socket-health 200 in 115ms
=== FRIEND REQUEST GET START ===
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
Request type: sent User: sayantan2@gmail.com
âœ… Database connected
 GET /socket.io?EIO=4&transport=polling&t=2g0yf3gf 404 in 229ms
 GET /socket.io?EIO=4&transport=polling&t=2g11sehx 404 in 118ms
âœ… Current user found: {
  id: new ObjectId('6901f85f42c5d010fa811206'),
  email: 'sayantan2@gmail.com',
  friendRequestsCount: 0,
  sentRequestsCount: 1
}
Processing sent requests...
Raw sentRequests: [
  {
    from: new ObjectId('6901f85f42c5d010fa811206'),
    fromName: 'sayantan2',
    to: new ObjectId('6905adf16a22b7843b006183'),
    toName: 'sayantan3',
    status: 'pending',
    _id: new ObjectId('6905cdce14ad0d0f020b3985'),
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
Filtering sent request: { status: 'pending', to: new ObjectId('6905adf16a22b7843b006183') }
Mapping sent request: {
  from: new ObjectId('6901f85f42c5d010fa811206'),
  fromName: 'sayantan2',
  to: new ObjectId('6905adf16a22b7843b006183'),
  toName: 'sayantan3',
  status: 'pending',
  _id: new ObjectId('6905cdce14ad0d0f020b3985'),
  createdAt: 2025-11-01T09:07:26.707Z,
  updatedAt: 2025-11-01T09:07:26.707Z
}
Processed sentRequests: [
  {
    id: '6905cdce14ad0d0f020b3985',
    to: {
      id: '6905adf16a22b7843b006183',
      username: 'sayantan3',
      email: '',
      profilePicture: null
    },
    status: 'pending',
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
Populating recipient details...
Looking up recipient: 6905adf16a22b7843b006183
Found recipient: sayantan3
Final populated sent requests: [
  {
    id: '6905cdce14ad0d0f020b3985',
    to: {
      id: '6905adf16a22b7843b006183',
      username: 'sayantan3',
      email: 'sayantan3@gmail.com',
      profilePicture: undefined
    },
    status: 'pending',
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
=== FRIEND REQUEST GET END (sent) ===
 GET /api/friends/request?type=sent 200 in 193ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
 POST /api/users/heartbeat 200 in 192ms
 GET /api/socket-health 200 in 27ms
 GET /api/socket-health 200 in 118ms
 GET /socket.io?EIO=4&transport=polling&t=2g2gb24d 404 in 205ms
 GET /socket.io?EIO=4&transport=polling&t=2g2jmh5c 404 in 100ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
 GET /api/socket-health 200 in 48ms
 GET /api/socket-health 200 in 108ms
 GET /socket.io?EIO=4&transport=polling&t=2g40ic1t 404 in 189ms
 GET /api/conversations 200 in 252ms
 GET /socket.io?EIO=4&transport=polling&t=2g43jt6g 404 in 101ms
 GET /api/socket-health 200 in 29ms
 GET /api/socket-health 200 in 67ms
 GET /socket.io?EIO=4&transport=polling&t=2g5kzqa2 404 in 241ms
 GET /socket.io?EIO=4&transport=polling&t=2g5mx277 404 in 103ms
 GET /api/socket-health 200 in 30ms
 GET /api/socket-health 200 in 109ms
 GET /socket.io?EIO=4&transport=polling&t=2g735hzd 404 in 196ms
 GET /socket.io?EIO=4&transport=polling&t=2g768ksz 404 in 95ms
 GET /api/socket-health 200 in 27ms
 GET /api/socket-health 200 in 105ms
 GET /socket.io?EIO=4&transport=polling&t=2g8mh96q 404 in 199ms
 GET /socket.io?EIO=4&transport=polling&t=2g8pg0e3 404 in 96ms
 GET /api/socket-health 200 in 30ms
 GET /api/socket-health 200 in 106ms
 GET /socket.io?EIO=4&transport=polling&t=2ga64p7g 404 in 194ms
 GET /socket.io?EIO=4&transport=polling&t=2ga94gxm 404 in 100ms
 GET /api/socket-health 200 in 22ms
 GET /api/socket-health 200 in 109ms
 GET /socket.io?EIO=4&transport=polling&t=2gbpega0 404 in 198ms
 GET /socket.io?EIO=4&transport=polling&t=2gbshbh5 404 in 91ms
 GET /api/socket-health 200 in 25ms
 GET /api/socket-health 200 in 109ms
 GET /socket.io?EIO=4&transport=polling&t=2gd9dz6e 404 in 196ms
 GET /socket.io?EIO=4&transport=polling&t=2gdcfpwb 404 in 96ms
 GET /api/socket-health 200 in 22ms
 GET /api/socket-health 200 in 111ms
 GET /socket.io?EIO=4&transport=polling&t=2gestr9t 404 in 196ms
 GET /socket.io?EIO=4&transport=polling&t=2gevxjin 404 in 91ms
 GET /api/socket-health 200 in 28ms
 GET /api/socket-health 200 in 119ms
 GET /socket.io?EIO=4&transport=polling&t=2ggchcen 404 in 206ms
 GET /socket.io?EIO=4&transport=polling&t=2ggftjyn 404 in 96ms
 GET /api/socket-health 200 in 24ms
 GET /api/socket-health 200 in 109ms
 GET /socket.io?EIO=4&transport=polling&t=2ghvxass 404 in 198ms
 GET /socket.io?EIO=4&transport=polling&t=2ghz0z5l 404 in 93ms
 GET /api/socket-health 200 in 32ms
 GET /api/socket-health 200 in 125ms
 GET /socket.io?EIO=4&transport=polling&t=2gjfoh8s 404 in 222ms
 GET /socket.io?EIO=4&transport=polling&t=2gjj702s 404 in 110ms
 GET /api/socket-health 200 in 26ms
 GET /api/socket-health 200 in 129ms
 GET /socket.io?EIO=4&transport=polling&t=2gkz0ypb 404 in 246ms
 GET /socket.io?EIO=4&transport=polling&t=2gl2mzhu 404 in 132ms
 GET /api/socket-health 200 in 27ms
 GET /api/socket-health 200 in 108ms
 GET /socket.io?EIO=4&transport=polling&t=2gmijyzy 404 in 111ms
 GET /socket.io?EIO=4&transport=polling&t=2gmllbvd 404 in 95ms
 GET /api/socket-health 200 in 24ms
 GET /api/socket-health 200 in 113ms
 GET /socket.io?EIO=4&transport=polling&t=2go1x2vi 404 in 201ms
 GET /socket.io?EIO=4&transport=polling&t=2go54sc2 404 in 93ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
=== FRIEND REQUEST GET START ===
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
Request type: received User: sayantan2@gmail.com
âœ… Database connected
 POST /api/users/heartbeat 200 in 164ms
âœ… Current user found: {
  id: new ObjectId('6901f85f42c5d010fa811206'),
  email: 'sayantan2@gmail.com',
  friendRequestsCount: 0,
  sentRequestsCount: 1
}
Processing received requests...
Raw friendRequests: []
Processed receivedRequests: []
Populating sender details...
Final populated requests: []
=== FRIEND REQUEST GET END (received) ===
 GET /api/friends/request?type=received 200 in 494ms
=== FRIEND REQUEST GET START ===
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
Request type: sent User: sayantan2@gmail.com
âœ… Database connected
âœ… Current user found: {
  id: new ObjectId('6901f85f42c5d010fa811206'),
  email: 'sayantan2@gmail.com',
  friendRequestsCount: 0,
  sentRequestsCount: 1
}
Processing sent requests...
Raw sentRequests: [
  {
    from: new ObjectId('6901f85f42c5d010fa811206'),
    fromName: 'sayantan2',
    to: new ObjectId('6905adf16a22b7843b006183'),
    toName: 'sayantan3',
    status: 'pending',
    _id: new ObjectId('6905cdce14ad0d0f020b3985'),
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
Filtering sent request: { status: 'pending', to: new ObjectId('6905adf16a22b7843b006183') }
Mapping sent request: {
  from: new ObjectId('6901f85f42c5d010fa811206'),
  fromName: 'sayantan2',
  to: new ObjectId('6905adf16a22b7843b006183'),
  toName: 'sayantan3',
  status: 'pending',
  _id: new ObjectId('6905cdce14ad0d0f020b3985'),
  createdAt: 2025-11-01T09:07:26.707Z,
  updatedAt: 2025-11-01T09:07:26.707Z
}
Processed sentRequests: [
  {
    id: '6905cdce14ad0d0f020b3985',
    to: {
      id: '6905adf16a22b7843b006183',
      username: 'sayantan3',
      email: '',
      profilePicture: null
    },
    status: 'pending',
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
Populating recipient details...
Looking up recipient: 6905adf16a22b7843b006183
Found recipient: sayantan3
Final populated sent requests: [
  {
    id: '6905cdce14ad0d0f020b3985',
    to: {
      id: '6905adf16a22b7843b006183',
      username: 'sayantan3',
      email: 'sayantan3@gmail.com',
      profilePicture: undefined
    },
    status: 'pending',
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
=== FRIEND REQUEST GET END (sent) ===
 GET /api/friends/request?type=sent 200 in 152ms
 GET /api/socket-health 200 in 114ms
 GET /api/socket-health 200 in 201ms
 GET /socket.io?EIO=4&transport=polling&t=2gpom28g 404 in 306ms
 GET /socket.io?EIO=4&transport=polling&t=2gpu72og 404 in 107ms
 GET /api/socket-health 200 in 28ms
 GET /api/socket-health 200 in 104ms
 GET /socket.io?EIO=4&transport=polling&t=2gr54wwq 404 in 112ms
 GET /socket.io?EIO=4&transport=polling&t=2gr839ax 404 in 97ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
 GET /api/conversations 200 in 125ms
 GET /api/socket-health 200 in 30ms
 GET /api/socket-health 200 in 111ms
 GET /socket.io?EIO=4&transport=polling&t=2gsorjpv 404 in 191ms
 GET /socket.io?EIO=4&transport=polling&t=2gsrwds5 404 in 92ms
 GET /api/socket-health 200 in 24ms
 GET /api/socket-health 200 in 105ms
 GET /socket.io?EIO=4&transport=polling&t=2gu8gjrq 404 in 262ms
 GET /socket.io?EIO=4&transport=polling&t=2gube4uo 404 in 160ms
 GET /api/socket-health 200 in 25ms
 GET /api/socket-health 200 in 113ms
 GET /socket.io?EIO=4&transport=polling&t=2gvrxchs 404 in 119ms
 GET /socket.io?EIO=4&transport=polling&t=2gvv4094 404 in 97ms
 GET /api/socket-health 200 in 22ms
 GET /api/socket-health 200 in 107ms
 GET /socket.io?EIO=4&transport=polling&t=2gxbjv1k 404 in 194ms
 GET /socket.io?EIO=4&transport=polling&t=2gxek3kq 404 in 91ms
 GET /api/socket-health 200 in 29ms
 GET /api/socket-health 200 in 108ms
 GET /socket.io?EIO=4&transport=polling&t=2gyv59ro 404 in 193ms
 GET /socket.io?EIO=4&transport=polling&t=2gyy8nrl 404 in 98ms
 GET /api/socket-health 200 in 23ms
 GET /api/socket-health 200 in 105ms
 GET /socket.io?EIO=4&transport=polling&t=2h0earef 404 in 195ms
 GET /socket.io?EIO=4&transport=polling&t=2h0h8cu9 404 in 94ms
 GET /api/socket-health 200 in 29ms
 GET /api/socket-health 200 in 106ms
 GET /socket.io?EIO=4&transport=polling&t=2h1y4t24 404 in 195ms
 GET /socket.io?EIO=4&transport=polling&t=2h213mbm 404 in 99ms
 GET /api/socket-health 200 in 24ms
 GET /api/socket-health 200 in 110ms
 GET /socket.io?EIO=4&transport=polling&t=2h3hjvtf 404 in 200ms
 GET /socket.io?EIO=4&transport=polling&t=2h3km84o 404 in 91ms
 GET /api/socket-health 200 in 28ms
 GET /api/socket-health 200 in 106ms
 GET /socket.io?EIO=4&transport=polling&t=2h515phl 404 in 113ms
 GET /socket.io?EIO=4&transport=polling&t=2h5454v0 404 in 98ms
 GET /api/socket-health 200 in 23ms
 GET /api/socket-health 200 in 107ms
 GET /socket.io?EIO=4&transport=polling&t=2h6kq5k2 404 in 193ms
 GET /socket.io?EIO=4&transport=polling&t=2h6nq9d9 404 in 89ms
 GET /api/socket-health 200 in 23ms
 GET /api/socket-health 200 in 108ms
 GET /socket.io?EIO=4&transport=polling&t=2h84blee 404 in 199ms
 GET /socket.io?EIO=4&transport=polling&t=2h87d7zl 404 in 103ms
 GET /api/socket-health 200 in 23ms
 GET /api/socket-health 200 in 109ms
 GET /socket.io?EIO=4&transport=polling&t=2h9nzgxk 404 in 196ms
 GET /socket.io?EIO=4&transport=polling&t=2h9r28r3 404 in 92ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
=== FRIEND REQUEST GET START ===
 GET /api/socket-health 200 in 57ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
Request type: received User: sayantan2@gmail.com
âœ… Database connected
âœ… Current user found: {
  id: new ObjectId('6901f85f42c5d010fa811206'),
  email: 'sayantan2@gmail.com',
  friendRequestsCount: 0,
  sentRequestsCount: 1
}
Processing received requests...
Raw friendRequests: []
Processed receivedRequests: []
Populating sender details...
Final populated requests: []
=== FRIEND REQUEST GET END (received) ===
 GET /api/friends/request?type=received 200 in 161ms
 GET /api/socket-health 200 in 110ms
 GET /api/friends 200 in 207ms
=== FRIEND REQUEST GET START ===
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
Request type: sent User: sayantan2@gmail.com
âœ… Database connected
 GET /socket.io?EIO=4&transport=polling&t=2hb8yrqs 404 in 224ms
 GET /socket.io?EIO=4&transport=polling&t=2hbcecv7 404 in 108ms
âœ… Current user found: {
  id: new ObjectId('6901f85f42c5d010fa811206'),
  email: 'sayantan2@gmail.com',
  friendRequestsCount: 0,
  sentRequestsCount: 1
}
Processing sent requests...
Raw sentRequests: [
  {
    from: new ObjectId('6901f85f42c5d010fa811206'),
    fromName: 'sayantan2',
    to: new ObjectId('6905adf16a22b7843b006183'),
    toName: 'sayantan3',
    status: 'pending',
    _id: new ObjectId('6905cdce14ad0d0f020b3985'),
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
Filtering sent request: { status: 'pending', to: new ObjectId('6905adf16a22b7843b006183') }
Mapping sent request: {
  from: new ObjectId('6901f85f42c5d010fa811206'),
  fromName: 'sayantan2',
  to: new ObjectId('6905adf16a22b7843b006183'),
  toName: 'sayantan3',
  status: 'pending',
  _id: new ObjectId('6905cdce14ad0d0f020b3985'),
  createdAt: 2025-11-01T09:07:26.707Z,
  updatedAt: 2025-11-01T09:07:26.707Z
}
Processed sentRequests: [
  {
    id: '6905cdce14ad0d0f020b3985',
    to: {
      id: '6905adf16a22b7843b006183',
      username: 'sayantan3',
      email: '',
      profilePicture: null
    },
    status: 'pending',
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
Populating recipient details...
Looking up recipient: 6905adf16a22b7843b006183
Found recipient: sayantan3
Final populated sent requests: [
  {
    id: '6905cdce14ad0d0f020b3985',
    to: {
      id: '6905adf16a22b7843b006183',
      username: 'sayantan3',
      email: 'sayantan3@gmail.com',
      profilePicture: undefined
    },
    status: 'pending',
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
=== FRIEND REQUEST GET END (sent) ===
 GET /api/friends/request?type=sent 200 in 210ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
 POST /api/users/heartbeat 200 in 189ms
 GET /api/socket-health 200 in 28ms
 GET /api/socket-health 200 in 103ms
 GET /socket.io?EIO=4&transport=polling&t=2hcr79tp 404 in 194ms
 GET /socket.io?EIO=4&transport=polling&t=2hcu4bwc 404 in 100ms
 GET /api/socket-health 200 in 23ms
 GET /api/socket-health 200 in 112ms
 GET /socket.io?EIO=4&transport=polling&t=2heaj0sr 404 in 198ms
 GET /socket.io?EIO=4&transport=polling&t=2hedog13 404 in 91ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
 GET /api/socket-health 200 in 43ms
 GET /api/socket-health 200 in 111ms
 GET /api/conversations 200 in 241ms
 GET /socket.io?EIO=4&transport=polling&t=2hfupybi 404 in 192ms
 GET /socket.io?EIO=4&transport=polling&t=2hfxvrv9 404 in 94ms
 GET /api/socket-health 200 in 25ms
 GET /api/socket-health 200 in 111ms
 GET /socket.io?EIO=4&transport=polling&t=2hhds640 404 in 116ms
 GET /socket.io?EIO=4&transport=polling&t=2hhgwqu6 404 in 99ms
 GET /api/socket-health 200 in 25ms
 GET /api/socket-health 200 in 113ms
 GET /socket.io?EIO=4&transport=polling&t=2hix9cui 404 in 197ms
 GET /socket.io?EIO=4&transport=polling&t=2hj0hxvx 404 in 99ms
 GET /api/socket-health 200 in 25ms
 GET /api/socket-health 200 in 107ms
 GET /socket.io?EIO=4&transport=polling&t=2hkgo08t 404 in 195ms
 GET /socket.io?EIO=4&transport=polling&t=2hkjorc7 404 in 97ms
 GET /api/socket-health 200 in 31ms
 GET /api/socket-health 200 in 111ms
 GET /socket.io?EIO=4&transport=polling&t=2hm0aogy 404 in 188ms
 GET /socket.io?EIO=4&transport=polling&t=2hm3fmjs 404 in 94ms
 GET /api/socket-health 200 in 22ms
 GET /api/socket-health 200 in 106ms
 GET /socket.io?EIO=4&transport=polling&t=2hnju15r 404 in 115ms
 GET /socket.io?EIO=4&transport=polling&t=2hnmv2n6 404 in 90ms
 GET /api/socket-health 200 in 22ms
 GET /api/socket-health 200 in 113ms
 GET /socket.io?EIO=4&transport=polling&t=2hp39yyb 404 in 195ms
 GET /socket.io?EIO=4&transport=polling&t=2hp6gza7 404 in 96ms
 GET /api/socket-health 200 in 25ms
 GET /api/socket-health 200 in 120ms
 GET /socket.io?EIO=4&transport=polling&t=2hqn519d 404 in 244ms
 GET /socket.io?EIO=4&transport=polling&t=2hqqj424 404 in 129ms
 GET /api/socket-health 200 in 24ms
 GET /api/socket-health 200 in 117ms
 GET /socket.io?EIO=4&transport=polling&t=2hs6neqm 404 in 194ms
 GET /socket.io?EIO=4&transport=polling&t=2hs9xvkg 404 in 98ms
 GET /api/socket-health 200 in 24ms
 GET /api/socket-health 200 in 110ms
 GET /socket.io?EIO=4&transport=polling&t=2htq5qcf 404 in 195ms
 GET /socket.io?EIO=4&transport=polling&t=2htt9zw6 404 in 97ms
 GET /api/socket-health 200 in 22ms
 GET /api/socket-health 200 in 111ms
 GET /socket.io?EIO=4&transport=polling&t=2hv9h770 404 in 192ms
 GET /socket.io?EIO=4&transport=polling&t=2hvcmw6o 404 in 100ms
 GET /api/socket-health 200 in 23ms
 GET /api/socket-health 200 in 104ms
 GET /socket.io?EIO=4&transport=polling&t=2hwszj20 404 in 189ms
 GET /socket.io?EIO=4&transport=polling&t=2hwvwxrs 404 in 94ms
 GET /api/socket-health 200 in 22ms
 GET /api/socket-health 200 in 111ms
 GET /socket.io?EIO=4&transport=polling&t=2hycpllv 404 in 194ms
 GET /socket.io?EIO=4&transport=polling&t=2hyfuhyf 404 in 97ms
=== FRIEND REQUEST GET START ===
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
Request type: received User: sayantan2@gmail.com
âœ… Database connected
âœ… Current user found: {
  id: new ObjectId('6901f85f42c5d010fa811206'),
  email: 'sayantan2@gmail.com',
  friendRequestsCount: 0,
  sentRequestsCount: 1
}
Processing received requests...
Raw friendRequests: []
Processed receivedRequests: []
Populating sender details...
Final populated requests: []
=== FRIEND REQUEST GET END (received) ===
 GET /api/friends/request?type=received 200 in 94ms
=== FRIEND REQUEST GET START ===
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
Request type: sent User: sayantan2@gmail.com
âœ… Database connected
âœ… Current user found: {
  id: new ObjectId('6901f85f42c5d010fa811206'),
  email: 'sayantan2@gmail.com',
  friendRequestsCount: 0,
  sentRequestsCount: 1
}
Processing sent requests...
Raw sentRequests: [
  {
    from: new ObjectId('6901f85f42c5d010fa811206'),
    fromName: 'sayantan2',
    to: new ObjectId('6905adf16a22b7843b006183'),
    toName: 'sayantan3',
    status: 'pending',
    _id: new ObjectId('6905cdce14ad0d0f020b3985'),
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
Filtering sent request: { status: 'pending', to: new ObjectId('6905adf16a22b7843b006183') }
Mapping sent request: {
  from: new ObjectId('6901f85f42c5d010fa811206'),
  fromName: 'sayantan2',
  to: new ObjectId('6905adf16a22b7843b006183'),
  toName: 'sayantan3',
  status: 'pending',
  _id: new ObjectId('6905cdce14ad0d0f020b3985'),
  createdAt: 2025-11-01T09:07:26.707Z,
  updatedAt: 2025-11-01T09:07:26.707Z
}
Processed sentRequests: [
  {
    id: '6905cdce14ad0d0f020b3985',
    to: {
      id: '6905adf16a22b7843b006183',
      username: 'sayantan3',
      email: '',
      profilePicture: null
    },
    status: 'pending',
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
Populating recipient details...
Looking up recipient: 6905adf16a22b7843b006183
Found recipient: sayantan3
Final populated sent requests: [
  {
    id: '6905cdce14ad0d0f020b3985',
    to: {
      id: '6905adf16a22b7843b006183',
      username: 'sayantan3',
      email: 'sayantan3@gmail.com',
      profilePicture: undefined
    },
    status: 'pending',
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
=== FRIEND REQUEST GET END (sent) ===
 GET /api/friends/request?type=sent 200 in 139ms
 GET /api/socket-health 200 in 22ms
 GET /api/socket-health 200 in 101ms
 GET /socket.io?EIO=4&transport=polling&t=2hzwapbf 404 in 185ms
 GET /socket.io?EIO=4&transport=polling&t=2hzz5u7z 404 in 100ms
 GET /api/socket-health 200 in 29ms
 GET /api/socket-health 200 in 105ms
 GET /socket.io?EIO=4&transport=polling&t=2i1g3ld1 404 in 189ms
 GET /socket.io?EIO=4&transport=polling&t=2i1j1t8u 404 in 99ms
 GET /api/socket-health 200 in 25ms
 GET /api/socket-health 200 in 105ms
 GET /socket.io?EIO=4&transport=polling&t=2i2zcukb 404 in 185ms
 GET /socket.io?EIO=4&transport=polling&t=2i32b2lz 404 in 83ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
 GET /api/conversations 200 in 125ms
 GET /api/socket-health 200 in 23ms
 GET /api/socket-health 200 in 103ms
 GET /socket.io?EIO=4&transport=polling&t=2i4iqjez 404 in 178ms
 GET /socket.io?EIO=4&transport=polling&t=2i4lno27 404 in 95ms
 GET /api/socket-health 200 in 24ms
 GET /api/socket-health 200 in 99ms
 GET /socket.io?EIO=4&transport=polling&t=2i62d505 404 in 203ms
 GET /socket.io?EIO=4&transport=polling&t=2i656iie 404 in 103ms
 GET /api/socket-health 200 in 29ms
 GET /api/socket-health 200 in 119ms
 GET /socket.io?EIO=4&transport=polling&t=2i7m4b4x 404 in 122ms
 GET /socket.io?EIO=4&transport=polling&t=2i7ph947 404 in 99ms
 GET /api/socket-health 200 in 25ms
 GET /api/socket-health 200 in 112ms
 GET /socket.io?EIO=4&transport=polling&t=2i95pszo 404 in 116ms
 GET /socket.io?EIO=4&transport=polling&t=2i98u9kl 404 in 101ms
 GET /api/socket-health 200 in 26ms
 GET /api/socket-health 200 in 123ms
 GET /socket.io?EIO=4&transport=polling&t=2iapcmem 404 in 210ms
 GET /socket.io?EIO=4&transport=polling&t=2iassw6d 404 in 101ms
 GET /api/socket-health 200 in 30ms
 GET /api/socket-health 200 in 127ms
 GET /socket.io?EIO=4&transport=polling&t=2ic8ve7n 404 in 165ms
 GET /socket.io?EIO=4&transport=polling&t=2iccg0tf 404 in 107ms
 GET /api/socket-health 200 in 29ms
 GET /api/socket-health 200 in 129ms
 GET /socket.io?EIO=4&transport=polling&t=2idsd99i 404 in 218ms
 GET /socket.io?EIO=4&transport=polling&t=2idw1vkt 404 in 106ms
 GET /api/socket-health 200 in 23ms
 GET /api/socket-health 200 in 110ms
 GET /socket.io?EIO=4&transport=polling&t=2ifblmkv 404 in 116ms
 GET /socket.io?EIO=4&transport=polling&t=2ifepemi 404 in 97ms
 GET /api/socket-health 200 in 23ms
 GET /api/socket-health 200 in 114ms
 GET /socket.io?EIO=4&transport=polling&t=2igvjq59 404 in 194ms
 GET /socket.io?EIO=4&transport=polling&t=2igyr9id 404 in 97ms
 GET /api/socket-health 200 in 23ms
 GET /api/socket-health 200 in 108ms
 GET /socket.io?EIO=4&transport=polling&t=2iieucdw 404 in 196ms
 GET /socket.io?EIO=4&transport=polling&t=2iihwqqe 404 in 97ms
 GET /api/socket-health 200 in 23ms
 GET /api/socket-health 200 in 113ms
 GET /socket.io?EIO=4&transport=polling&t=2ijygcjr 404 in 114ms
 GET /socket.io?EIO=4&transport=polling&t=2ik1nh7p 404 in 91ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
=== FRIEND REQUEST GET START ===
 GET /api/socket-health 200 in 79ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
Request type: received User: sayantan2@gmail.com
âœ… Database connected
 GET /api/socket-health 200 in 107ms
 GET /api/friends 200 in 291ms
 GET /socket.io?EIO=4&transport=polling&t=2iljzvl5 404 in 201ms
 GET /socket.io?EIO=4&transport=polling&t=2iln7pnh 404 in 105ms
 POST /api/users/heartbeat 200 in 676ms
âœ… Current user found: {
  id: new ObjectId('6901f85f42c5d010fa811206'),
  email: 'sayantan2@gmail.com',
  friendRequestsCount: 0,
  sentRequestsCount: 1
}
Processing received requests...
Raw friendRequests: []
Processed receivedRequests: []
Populating sender details...
Final populated requests: []
=== FRIEND REQUEST GET END (received) ===
 GET /api/friends/request?type=received 200 in 813ms
=== FRIEND REQUEST GET START ===
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
Request type: sent User: sayantan2@gmail.com
âœ… Database connected
âœ… Current user found: {
  id: new ObjectId('6901f85f42c5d010fa811206'),
  email: 'sayantan2@gmail.com',
  friendRequestsCount: 0,
  sentRequestsCount: 1
}
Processing sent requests...
Raw sentRequests: [
  {
    from: new ObjectId('6901f85f42c5d010fa811206'),
    fromName: 'sayantan2',
    to: new ObjectId('6905adf16a22b7843b006183'),
    toName: 'sayantan3',
    status: 'pending',
    _id: new ObjectId('6905cdce14ad0d0f020b3985'),
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
Filtering sent request: { status: 'pending', to: new ObjectId('6905adf16a22b7843b006183') }
Mapping sent request: {
  from: new ObjectId('6901f85f42c5d010fa811206'),
  fromName: 'sayantan2',
  to: new ObjectId('6905adf16a22b7843b006183'),
  toName: 'sayantan3',
  status: 'pending',
  _id: new ObjectId('6905cdce14ad0d0f020b3985'),
  createdAt: 2025-11-01T09:07:26.707Z,
  updatedAt: 2025-11-01T09:07:26.707Z
}
Processed sentRequests: [
  {
    id: '6905cdce14ad0d0f020b3985',
    to: {
      id: '6905adf16a22b7843b006183',
      username: 'sayantan3',
      email: '',
      profilePicture: null
    },
    status: 'pending',
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
Populating recipient details...
Looking up recipient: 6905adf16a22b7843b006183
Found recipient: sayantan3
Final populated sent requests: [
  {
    id: '6905cdce14ad0d0f020b3985',
    to: {
      id: '6905adf16a22b7843b006183',
      username: 'sayantan3',
      email: 'sayantan3@gmail.com',
      profilePicture: undefined
    },
    status: 'pending',
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
=== FRIEND REQUEST GET END (sent) ===
 GET /api/friends/request?type=sent 200 in 123ms
 GET /api/socket-health 200 in 29ms
 GET /api/socket-health 200 in 106ms
 GET /socket.io?EIO=4&transport=polling&t=2in1j4ek 404 in 112ms
 GET /socket.io?EIO=4&transport=polling&t=2in4jdjq 404 in 95ms
 GET /api/socket-health 200 in 25ms
 GET /api/socket-health 200 in 107ms
 GET /socket.io?EIO=4&transport=polling&t=2iol3oq7 404 in 199ms
 GET /socket.io?EIO=4&transport=polling&t=2ioo3tx7 404 in 96ms
 GET /api/socket-health 200 in 23ms
 GET /api/socket-health 200 in 104ms
 GET /socket.io?EIO=4&transport=polling&t=2iq50gcr 404 in 191ms
 GET /socket.io?EIO=4&transport=polling&t=2iq7xtap 404 in 95ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
 GET /api/socket-health 200 in 57ms
 GET /api/socket-health 200 in 110ms
 GET /api/conversations 200 in 258ms
 GET /socket.io?EIO=4&transport=polling&t=2irpcmg0 404 in 198ms
 GET /socket.io?EIO=4&transport=polling&t=2irsg1kv 404 in 97ms
 GET /api/socket-health 200 in 25ms
 GET /api/socket-health 200 in 105ms
 GET /socket.io?EIO=4&transport=polling&t=2it7n3ie 404 in 190ms
 GET /socket.io?EIO=4&transport=polling&t=2itamfj8 404 in 86ms
 GET /api/socket-health 200 in 29ms
 GET /api/socket-health 200 in 103ms
 GET /socket.io?EIO=4&transport=polling&t=2iurmlee 404 in 221ms
 GET /socket.io?EIO=4&transport=polling&t=2iuui6du 404 in 126ms
 GET /api/socket-health 200 in 24ms
 GET /api/socket-health 200 in 99ms
 GET /socket.io?EIO=4&transport=polling&t=2iwb4tvg 404 in 182ms
 GET /socket.io?EIO=4&transport=polling&t=2iwdxf1d 404 in 87ms
 GET /api/socket-health 200 in 24ms
 GET /api/socket-health 200 in 109ms
 GET /socket.io?EIO=4&transport=polling&t=2ixukr5u 404 in 247ms
 GET /socket.io?EIO=4&transport=polling&t=2ixxmjvi 404 in 146ms
 GET /api/socket-health 200 in 24ms
 GET /api/socket-health 200 in 123ms
 GET /socket.io?EIO=4&transport=polling&t=2ize69h4 404 in 211ms
 GET /socket.io?EIO=4&transport=polling&t=2izhpzmr 404 in 90ms
 GET /api/socket-health 200 in 40ms
 GET /api/socket-health 200 in 166ms
 GET /socket.io?EIO=4&transport=polling&t=2j0xzwog 404 in 177ms
 GET /socket.io?EIO=4&transport=polling&t=2j12ncvz 404 in 140ms
 GET /api/socket-health 200 in 29ms
 GET /api/socket-health 200 in 112ms
 GET /socket.io?EIO=4&transport=polling&t=2j2h935i 404 in 197ms
 GET /socket.io?EIO=4&transport=polling&t=2j2kg253 404 in 90ms
 GET /api/socket-health 200 in 28ms
 GET /api/socket-health 200 in 105ms
 GET /socket.io?EIO=4&transport=polling&t=2j40m49h 404 in 196ms
 GET /socket.io?EIO=4&transport=polling&t=2j43kn91 404 in 101ms
 GET /api/socket-health 200 in 24ms
 GET /api/socket-health 200 in 108ms
 GET /socket.io?EIO=4&transport=polling&t=2j5kg8rc 404 in 283ms
 GET /socket.io?EIO=4&transport=polling&t=2j5nh0wj 404 in 182ms
 GET /api/socket-health 200 in 25ms
 GET /api/socket-health 200 in 106ms
 GET /socket.io?EIO=4&transport=polling&t=2j73uyo1 404 in 194ms
 GET /socket.io?EIO=4&transport=polling&t=2j76u18k 404 in 94ms
 GET /api/socket-health 200 in 22ms
 GET /api/socket-health 200 in 114ms
 GET /socket.io?EIO=4&transport=polling&t=2j8nd9jj 404 in 211ms
 GET /socket.io?EIO=4&transport=polling&t=2j8qlm9n 404 in 101ms
=== FRIEND REQUEST GET START ===
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
Request type: received User: sayantan2@gmail.com
âœ… Database connected
âœ… Current user found: {
  id: new ObjectId('6901f85f42c5d010fa811206'),
  email: 'sayantan2@gmail.com',
  friendRequestsCount: 0,
  sentRequestsCount: 1
}
Processing received requests...
Raw friendRequests: []
Processed receivedRequests: []
Populating sender details...
Final populated requests: []
=== FRIEND REQUEST GET END (received) ===
 GET /api/friends/request?type=received 200 in 88ms
=== FRIEND REQUEST GET START ===
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
Request type: sent User: sayantan2@gmail.com
âœ… Database connected
âœ… Current user found: {
  id: new ObjectId('6901f85f42c5d010fa811206'),
  email: 'sayantan2@gmail.com',
  friendRequestsCount: 0,
  sentRequestsCount: 1
}
Processing sent requests...
Raw sentRequests: [
  {
    from: new ObjectId('6901f85f42c5d010fa811206'),
    fromName: 'sayantan2',
    to: new ObjectId('6905adf16a22b7843b006183'),
    toName: 'sayantan3',
    status: 'pending',
    _id: new ObjectId('6905cdce14ad0d0f020b3985'),
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
Filtering sent request: { status: 'pending', to: new ObjectId('6905adf16a22b7843b006183') }
Mapping sent request: {
  from: new ObjectId('6901f85f42c5d010fa811206'),
  fromName: 'sayantan2',
  to: new ObjectId('6905adf16a22b7843b006183'),
  toName: 'sayantan3',
  status: 'pending',
  _id: new ObjectId('6905cdce14ad0d0f020b3985'),
  createdAt: 2025-11-01T09:07:26.707Z,
  updatedAt: 2025-11-01T09:07:26.707Z
}
Processed sentRequests: [
  {
    id: '6905cdce14ad0d0f020b3985',
    to: {
      id: '6905adf16a22b7843b006183',
      username: 'sayantan3',
      email: '',
      profilePicture: null
    },
    status: 'pending',
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
Populating recipient details...
Looking up recipient: 6905adf16a22b7843b006183
Found recipient: sayantan3
Final populated sent requests: [
  {
    id: '6905cdce14ad0d0f020b3985',
    to: {
      id: '6905adf16a22b7843b006183',
      username: 'sayantan3',
      email: 'sayantan3@gmail.com',
      profilePicture: undefined
    },
    status: 'pending',
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
=== FRIEND REQUEST GET END (sent) ===
 GET /api/friends/request?type=sent 200 in 137ms
 GET /api/socket-health 200 in 27ms
 GET /api/socket-health 200 in 104ms
 GET /socket.io?EIO=4&transport=polling&t=2ja71gcz 404 in 191ms
 GET /socket.io?EIO=4&transport=polling&t=2jaa09no 404 in 94ms
 GET /api/socket-health 200 in 23ms
 GET /api/socket-health 200 in 106ms
 GET /socket.io?EIO=4&transport=polling&t=2jbqbcpa 404 in 197ms
 GET /socket.io?EIO=4&transport=polling&t=2jbtb76f 404 in 94ms
 GET /api/socket-health 200 in 23ms
 GET /api/socket-health 200 in 103ms
 GET /socket.io?EIO=4&transport=polling&t=2jd9zl0k 404 in 189ms
 GET /socket.io?EIO=4&transport=polling&t=2jdcwplo 404 in 95ms
 GET /api/socket-health 200 in 22ms
 GET /api/socket-health 200 in 104ms
 GET /socket.io?EIO=4&transport=polling&t=2jetkgt7 404 in 191ms
 GET /socket.io?EIO=4&transport=polling&t=2jewi0ef 404 in 90ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
 GET /api/conversations 200 in 112ms
 GET /api/socket-health 200 in 22ms
 GET /api/socket-health 200 in 113ms
 GET /socket.io?EIO=4&transport=polling&t=2jgd1k61 404 in 197ms
 GET /socket.io?EIO=4&transport=polling&t=2jgg8g1r 404 in 103ms
 GET /api/socket-health 200 in 25ms
 GET /api/socket-health 200 in 105ms
 GET /socket.io?EIO=4&transport=polling&t=2jhwoczc 404 in 110ms
 GET /socket.io?EIO=4&transport=polling&t=2jhzndek 404 in 94ms
 GET /api/socket-health 200 in 23ms
 GET /api/socket-health 200 in 34ms
 GET /socket.io?EIO=4&transport=polling&t=2jjgboed 404 in 232ms
 GET /socket.io?EIO=4&transport=polling&t=2jjhbrbb 404 in 130ms
 GET /api/socket-health 200 in 24ms
 GET /api/socket-health 200 in 117ms
 GET /socket.io?EIO=4&transport=polling&t=2jkzz1ix 404 in 122ms
 GET /socket.io?EIO=4&transport=polling&t=2jl39f0l 404 in 103ms
 GET /api/socket-health 200 in 23ms
 GET /api/socket-health 200 in 120ms
 GET /socket.io?EIO=4&transport=polling&t=2jmjfcxb 404 in 122ms
 GET /socket.io?EIO=4&transport=polling&t=2jmmtahg 404 in 99ms
 GET /api/socket-health 200 in 25ms
 GET /api/socket-health 200 in 104ms
 GET /socket.io?EIO=4&transport=polling&t=2jo32wfo 404 in 191ms
 GET /socket.io?EIO=4&transport=polling&t=2jo60nxo 404 in 96ms
 GET /api/socket-health 200 in 24ms
 GET /api/socket-health 200 in 130ms
 GET /socket.io?EIO=4&transport=polling&t=2jpmoosl 404 in 126ms
 GET /socket.io?EIO=4&transport=polling&t=2jpqcr3h 404 in 104ms
 GET /api/socket-health 200 in 24ms
 GET /api/socket-health 200 in 132ms
 GET /socket.io?EIO=4&transport=polling&t=2jr69szt 404 in 188ms
 GET /socket.io?EIO=4&transport=polling&t=2jr9y2mp 404 in 117ms
 GET /api/socket-health 200 in 24ms
 GET /api/socket-health 200 in 113ms
 GET /socket.io?EIO=4&transport=polling&t=2jspos46 404 in 112ms
 GET /socket.io?EIO=4&transport=polling&t=2jssvbs5 404 in 121ms
 GET /api/socket-health 200 in 26ms
 GET /api/socket-health 200 in 107ms
 GET /socket.io?EIO=4&transport=polling&t=2ju99ola 404 in 195ms
 GET /socket.io?EIO=4&transport=polling&t=2juc9j8l 404 in 98ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
=== FRIEND REQUEST GET START ===
 GET /api/socket-health 200 in 93ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
Request type: received User: sayantan2@gmail.com
âœ… Database connected
 GET /api/auth/session 200 in 112ms
 GET /api/friends 200 in 229ms
 GET /api/socket-health 200 in 130ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
 GET /socket.io?EIO=4&transport=polling&t=2jvvaazz 404 in 228ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
 GET /api/random-chat/queue 200 in 257ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
âœ… Current user found: {
  id: new ObjectId('6901f85f42c5d010fa811206'),
  email: 'sayantan2@gmail.com',
  friendRequestsCount: 0,
  sentRequestsCount: 1
}
Processing received requests...
Raw friendRequests: []
Processed receivedRequests: []
Populating sender details...
Final populated requests: []
=== FRIEND REQUEST GET END (received) ===
 GET /api/friends/request?type=received 200 in 561ms
 GET /api/friends 200 in 291ms
=== FRIEND REQUEST GET START ===
 GET /api/random-chat/session 200 in 208ms
 POST /api/users/heartbeat 200 in 706ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
Request type: received User: sayantan2@gmail.com
âœ… Database connected
=== FRIEND REQUEST GET START ===
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
Request type: sent User: sayantan2@gmail.com
âœ… Database connected
 GET /socket.io?EIO=4&transport=polling&t=2jvzizsm 404 in 182ms
âœ… Current user found: {
  id: new ObjectId('6901f85f42c5d010fa811206'),
  email: 'sayantan2@gmail.com',
  friendRequestsCount: 0,
  sentRequestsCount: 1
}
Processing received requests...
Raw friendRequests: []
Processed receivedRequests: []
Populating sender details...
Final populated requests: []
=== FRIEND REQUEST GET END (received) ===
 GET /api/friends/request?type=received 200 in 82ms
âœ… Current user found: {
  id: new ObjectId('6901f85f42c5d010fa811206'),
  email: 'sayantan2@gmail.com',
  friendRequestsCount: 0,
  sentRequestsCount: 1
}
Processing sent requests...
Raw sentRequests: [
  {
    from: new ObjectId('6901f85f42c5d010fa811206'),
    fromName: 'sayantan2',
    to: new ObjectId('6905adf16a22b7843b006183'),
    toName: 'sayantan3',
    status: 'pending',
    _id: new ObjectId('6905cdce14ad0d0f020b3985'),
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
Filtering sent request: { status: 'pending', to: new ObjectId('6905adf16a22b7843b006183') }
Mapping sent request: {
  from: new ObjectId('6901f85f42c5d010fa811206'),
  fromName: 'sayantan2',
  to: new ObjectId('6905adf16a22b7843b006183'),
  toName: 'sayantan3',
  status: 'pending',
  _id: new ObjectId('6905cdce14ad0d0f020b3985'),
  createdAt: 2025-11-01T09:07:26.707Z,
  updatedAt: 2025-11-01T09:07:26.707Z
}
Processed sentRequests: [
  {
    id: '6905cdce14ad0d0f020b3985',
    to: {
      id: '6905adf16a22b7843b006183',
      username: 'sayantan3',
      email: '',
      profilePicture: null
    },
    status: 'pending',
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
Populating recipient details...
Looking up recipient: 6905adf16a22b7843b006183
Found recipient: sayantan3
Final populated sent requests: [
  {
    id: '6905cdce14ad0d0f020b3985',
    to: {
      id: '6905adf16a22b7843b006183',
      username: 'sayantan3',
      email: 'sayantan3@gmail.com',
      profilePicture: undefined
    },
    status: 'pending',
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
=== FRIEND REQUEST GET END (sent) ===
 GET /api/friends/request?type=sent 200 in 134ms
=== FRIEND REQUEST GET START ===
 GET /api/users/me 200 in 625ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
Request type: sent User: sayantan2@gmail.com
âœ… Database connected
âœ… Current user found: {
  id: new ObjectId('6901f85f42c5d010fa811206'),
  email: 'sayantan2@gmail.com',
  friendRequestsCount: 0,
  sentRequestsCount: 1
}
Processing sent requests...
Raw sentRequests: [
  {
    from: new ObjectId('6901f85f42c5d010fa811206'),
    fromName: 'sayantan2',
    to: new ObjectId('6905adf16a22b7843b006183'),
    toName: 'sayantan3',
    status: 'pending',
    _id: new ObjectId('6905cdce14ad0d0f020b3985'),
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
Filtering sent request: { status: 'pending', to: new ObjectId('6905adf16a22b7843b006183') }
Mapping sent request: {
  from: new ObjectId('6901f85f42c5d010fa811206'),
  fromName: 'sayantan2',
  to: new ObjectId('6905adf16a22b7843b006183'),
  toName: 'sayantan3',
  status: 'pending',
  _id: new ObjectId('6905cdce14ad0d0f020b3985'),
  createdAt: 2025-11-01T09:07:26.707Z,
  updatedAt: 2025-11-01T09:07:26.707Z
}
Processed sentRequests: [
  {
    id: '6905cdce14ad0d0f020b3985',
    to: {
      id: '6905adf16a22b7843b006183',
      username: 'sayantan3',
      email: '',
      profilePicture: null
    },
    status: 'pending',
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
Populating recipient details...
Looking up recipient: 6905adf16a22b7843b006183
 POST /api/users/heartbeat 200 in 703ms
Found recipient: sayantan3
Final populated sent requests: [
  {
    id: '6905cdce14ad0d0f020b3985',
    to: {
      id: '6905adf16a22b7843b006183',
      username: 'sayantan3',
      email: 'sayantan3@gmail.com',
      profilePicture: undefined
    },
    status: 'pending',
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
=== FRIEND REQUEST GET END (sent) ===
 GET /api/friends/request?type=sent 200 in 137ms
 GET /api/socket-health 200 in 27ms
 GET /api/socket-health 200 in 106ms
 GET /socket.io?EIO=4&transport=polling&t=2jxc85er 404 in 191ms
 GET /socket.io?EIO=4&transport=polling&t=2jxf8pdo 404 in 94ms
 GET /api/socket-health 200 in 24ms
 GET /api/socket-health 200 in 103ms
 GET /socket.io?EIO=4&transport=polling&t=2jyw05dv 404 in 191ms
 GET /socket.io?EIO=4&transport=polling&t=2jyyxfri 404 in 92ms
 GET /api/socket-health 200 in 23ms
 GET /api/socket-health 200 in 101ms
 GET /socket.io?EIO=4&transport=polling&t=2k0fgk11 404 in 186ms
 GET /socket.io?EIO=4&transport=polling&t=2k0iax5u 404 in 94ms
 GET /api/socket-health 200 in 27ms
 GET /api/socket-health 200 in 125ms
 GET /socket.io?EIO=4&transport=polling&t=2k1z7e2b 404 in 222ms
 GET /socket.io?EIO=4&transport=polling&t=2k22psgs 404 in 105ms
 GET /api/socket-health 200 in 27ms
 GET /api/socket-health 200 in 112ms
 GET /socket.io?EIO=4&transport=polling&t=2k3ipccn 404 in 119ms
 GET /socket.io?EIO=4&transport=polling&t=2k3lwomq 404 in 95ms
 GET /api/socket-health 200 in 24ms
 GET /api/socket-health 200 in 107ms
 GET /socket.io?EIO=4&transport=polling&t=2k528cfm 404 in 197ms
 GET /socket.io?EIO=4&transport=polling&t=2k559ml9 404 in 93ms
 GET /api/socket-health 200 in 32ms
 GET /api/socket-health 200 in 114ms
 GET /socket.io?EIO=4&transport=polling&t=2k6lx6sk 404 in 197ms
 GET /socket.io?EIO=4&transport=polling&t=2k6p5u3o 404 in 102ms
 GET /api/socket-health 200 in 26ms
 GET /api/socket-health 200 in 119ms
 GET /socket.io?EIO=4&transport=polling&t=2k85ceoa 404 in 216ms
 GET /socket.io?EIO=4&transport=polling&t=2k88q8td 404 in 102ms
 GET /api/socket-health 200 in 121ms
 GET /api/socket-health 200 in 112ms
 GET /socket.io?EIO=4&transport=polling&t=2k9x5lsu 404 in 1916ms
 GET /socket.io?EIO=4&transport=polling&t=2k9yj3c5 404 in 1499ms
 GET /api/socket-health 200 in 81ms
 GET /api/socket-health 200 in 616ms
 GET /socket.io?EIO=4&transport=polling&t=2kcv7bxc 404 in 633ms
 GET /socket.io?EIO=4&transport=polling&t=2kdceh0h 404 in 167ms
 GET /api/socket-health 200 in 26ms
 GET /socket.io?EIO=4&transport=polling&t=2kebhc8q 404 in 106ms
 GET /api/socket-health 200 in 24ms
 GET /socket.io?EIO=4&transport=polling&t=2kf33421 404 in 118ms
 GET /api/socket-health 200 in 33ms
 GET /socket.io?EIO=4&transport=polling&t=2kfv2r9p 404 in 141ms
 GET /api/socket-health 200 in 30ms
 GET /socket.io?EIO=4&transport=polling&t=2kgn6a02 404 in 103ms
 GET /api/socket-health 200 in 27ms
 GET /socket.io?EIO=4&transport=polling&t=2khefsvy 404 in 90ms
 GET /api/socket-health 200 in 26ms
 GET /socket.io?EIO=4&transport=polling&t=2ki6hj1j 404 in 96ms
 GET /api/socket-health 200 in 26ms
 GET /socket.io?EIO=4&transport=polling&t=2kiyaf6s 404 in 94ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
=== FRIEND REQUEST GET START ===
 GET /api/socket-health 200 in 126ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
Request type: received User: sayantan2@gmail.com
âœ… Database connected
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
 GET /socket.io?EIO=4&transport=polling&t=2kjt80l6 404 in 96ms
âœ… Current user found: {
  id: new ObjectId('6901f85f42c5d010fa811206'),
  email: 'sayantan2@gmail.com',
  friendRequestsCount: 0,
  sentRequestsCount: 1
}
Processing received requests...
Raw friendRequests: []
Processed receivedRequests: []
Populating sender details...
Final populated requests: []
=== FRIEND REQUEST GET END (received) ===
 GET /api/friends/request?type=received 200 in 569ms
=== FRIEND REQUEST GET START ===
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
Request type: sent User: sayantan2@gmail.com
âœ… Database connected
 POST /api/users/heartbeat 200 in 650ms
âœ… Current user found: {
  id: new ObjectId('6901f85f42c5d010fa811206'),
  email: 'sayantan2@gmail.com',
  friendRequestsCount: 0,
  sentRequestsCount: 1
}
Processing sent requests...
Raw sentRequests: [
  {
    from: new ObjectId('6901f85f42c5d010fa811206'),
    fromName: 'sayantan2',
    to: new ObjectId('6905adf16a22b7843b006183'),
    toName: 'sayantan3',
    status: 'pending',
    _id: new ObjectId('6905cdce14ad0d0f020b3985'),
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
Filtering sent request: { status: 'pending', to: new ObjectId('6905adf16a22b7843b006183') }
Mapping sent request: {
  from: new ObjectId('6901f85f42c5d010fa811206'),
  fromName: 'sayantan2',
  to: new ObjectId('6905adf16a22b7843b006183'),
  toName: 'sayantan3',
  status: 'pending',
  _id: new ObjectId('6905cdce14ad0d0f020b3985'),
  createdAt: 2025-11-01T09:07:26.707Z,
  updatedAt: 2025-11-01T09:07:26.707Z
}
Processed sentRequests: [
  {
    id: '6905cdce14ad0d0f020b3985',
    to: {
      id: '6905adf16a22b7843b006183',
      username: 'sayantan3',
      email: '',
      profilePicture: null
    },
    status: 'pending',
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
Populating recipient details...
Looking up recipient: 6905adf16a22b7843b006183
Found recipient: sayantan3
Final populated sent requests: [
  {
    id: '6905cdce14ad0d0f020b3985',
    to: {
      id: '6905adf16a22b7843b006183',
      username: 'sayantan3',
      email: 'sayantan3@gmail.com',
      profilePicture: undefined
    },
    status: 'pending',
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
=== FRIEND REQUEST GET END (sent) ===
 GET /api/friends/request?type=sent 200 in 133ms
 GET /api/conversations 200 in 844ms
 GET /api/socket-health 200 in 27ms
 GET /socket.io?EIO=4&transport=polling&t=2kkhojlw 404 in 87ms
 GET /api/socket-health 200 in 24ms
 GET /socket.io?EIO=4&transport=polling&t=2kl9i4os 404 in 123ms
 GET /api/socket-health 200 in 36ms
 GET /socket.io?EIO=4&transport=polling&t=2km1djj9 404 in 126ms
 GET /api/socket-health 200 in 27ms
 GET /socket.io?EIO=4&transport=polling&t=2kmsza2m 404 in 109ms
 GET /api/socket-health 200 in 24ms
 GET /socket.io?EIO=4&transport=polling&t=2knkmb5o 404 in 94ms
 GET /api/socket-health 200 in 28ms
 GET /socket.io?EIO=4&transport=polling&t=2kocg4t9 404 in 105ms
 GET /api/socket-health 200 in 28ms
 GET /socket.io?EIO=4&transport=polling&t=2kp4kwq6 404 in 109ms
 GET /api/socket-health 200 in 26ms
 GET /socket.io?EIO=4&transport=polling&t=2kpw9j09 404 in 98ms
 GET /api/socket-health 200 in 23ms
 GET /socket.io?EIO=4&transport=polling&t=2kqnwutu 404 in 101ms
 GET /api/socket-health 200 in 31ms
 GET /socket.io?EIO=4&transport=polling&t=2krfui81 404 in 95ms
 GET /api/socket-health 200 in 36ms
 GET /socket.io?EIO=4&transport=polling&t=2ks7nh6r 404 in 96ms
 GET /api/socket-health 200 in 26ms
 GET /socket.io?EIO=4&transport=polling&t=2ksz4blc 404 in 94ms
 GET /api/socket-health 200 in 24ms
 GET /socket.io?EIO=4&transport=polling&t=2ktqqlaz 404 in 93ms
 GET /api/socket-health 200 in 24ms
 GET /socket.io?EIO=4&transport=polling&t=2kuiv4a7 404 in 100ms
 GET /api/socket-health 200 in 29ms
 GET /socket.io?EIO=4&transport=polling&t=2kvaq9ip 404 in 94ms
 GET /api/socket-health 200 in 26ms
 GET /socket.io?EIO=4&transport=polling&t=2kw2dwxo 404 in 98ms
 GET /api/socket-health 200 in 23ms
 GET /socket.io?EIO=4&transport=polling&t=2kwu0rfl 404 in 97ms
 GET /api/socket-health 200 in 26ms
 GET /socket.io?EIO=4&transport=polling&t=2kxlq5bt 404 in 96ms
 GET /api/socket-health 200 in 27ms
 GET /socket.io?EIO=4&transport=polling&t=2kydi8c4 404 in 97ms
 GET /api/socket-health 200 in 52ms
 GET /socket.io?EIO=4&transport=polling&t=2kz63xv5 404 in 135ms
 GET /api/socket-health 200 in 31ms
 GET /socket.io?EIO=4&transport=polling&t=2kzx6wb0 404 in 115ms
 GET /api/socket-health 200 in 46ms
 GET /socket.io?EIO=4&transport=polling&t=2l0pnrs9 404 in 161ms
 GET /api/socket-health 200 in 26ms
 GET /socket.io?EIO=4&transport=polling&t=2l1gtae2 404 in 103ms
 GET /api/socket-health 200 in 33ms
 GET /socket.io?EIO=4&transport=polling&t=2l28pd32 404 in 102ms
 GET /api/socket-health 200 in 47ms
 GET /socket.io?EIO=4&transport=polling&t=2l30r302 404 in 94ms
 GET /api/socket-health 200 in 25ms
 GET /socket.io?EIO=4&transport=polling&t=2l3rxmsb 404 in 108ms
 GET /api/socket-health 200 in 25ms
 GET /socket.io?EIO=4&transport=polling&t=2l4jpu83 404 in 107ms
 GET /api/socket-health 200 in 40ms
 GET /socket.io?EIO=4&transport=polling&t=2l5c9ebr 404 in 110ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
=== FRIEND REQUEST GET START ===
 GET /api/socket-health 200 in 60ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
Request type: received User: sayantan2@gmail.com
âœ… Database connected
âœ… Current user found: {
  id: new ObjectId('6901f85f42c5d010fa811206'),
  email: 'sayantan2@gmail.com',
  friendRequestsCount: 0,
  sentRequestsCount: 1
}
Processing received requests...
Raw friendRequests: []
Processed receivedRequests: []
Populating sender details...
Final populated requests: []
=== FRIEND REQUEST GET END (received) ===
 GET /api/friends/request?type=received 200 in 161ms
=== FRIEND REQUEST GET START ===
 GET /api/friends 200 in 204ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
Request type: sent User: sayantan2@gmail.com
âœ… Database connected
 GET /socket.io?EIO=4&transport=polling&t=2l64f8pe 404 in 131ms
âœ… Current user found: {
  id: new ObjectId('6901f85f42c5d010fa811206'),
  email: 'sayantan2@gmail.com',
  friendRequestsCount: 0,
  sentRequestsCount: 1
}
Processing sent requests...
Raw sentRequests: [
  {
    from: new ObjectId('6901f85f42c5d010fa811206'),
    fromName: 'sayantan2',
    to: new ObjectId('6905adf16a22b7843b006183'),
    toName: 'sayantan3',
    status: 'pending',
    _id: new ObjectId('6905cdce14ad0d0f020b3985'),
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
Filtering sent request: { status: 'pending', to: new ObjectId('6905adf16a22b7843b006183') }
Mapping sent request: {
  from: new ObjectId('6901f85f42c5d010fa811206'),
  fromName: 'sayantan2',
  to: new ObjectId('6905adf16a22b7843b006183'),
  toName: 'sayantan3',
  status: 'pending',
  _id: new ObjectId('6905cdce14ad0d0f020b3985'),
  createdAt: 2025-11-01T09:07:26.707Z,
  updatedAt: 2025-11-01T09:07:26.707Z
}
Processed sentRequests: [
  {
    id: '6905cdce14ad0d0f020b3985',
    to: {
      id: '6905adf16a22b7843b006183',
      username: 'sayantan3',
      email: '',
      profilePicture: null
    },
    status: 'pending',
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
Populating recipient details...
Looking up recipient: 6905adf16a22b7843b006183
Found recipient: sayantan3
Final populated sent requests: [
  {
    id: '6905cdce14ad0d0f020b3985',
    to: {
      id: '6905adf16a22b7843b006183',
      username: 'sayantan3',
      email: 'sayantan3@gmail.com',
      profilePicture: undefined
    },
    status: 'pending',
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
=== FRIEND REQUEST GET END (sent) ===
 GET /api/friends/request?type=sent 200 in 119ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
 GET /api/socket-health 200 in 64ms
 GET /socket.io?EIO=4&transport=polling&t=2l6wi8by 404 in 126ms
 POST /api/users/heartbeat 200 in 263ms
 GET /api/socket-health 200 in 36ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
 GET /socket.io?EIO=4&transport=polling&t=2l7n97nu 404 in 99ms
 GET /api/conversations 200 in 167ms
 GET /api/socket-health 200 in 24ms
 GET /socket.io?EIO=4&transport=polling&t=2l8enuvh 404 in 93ms
 GET /api/socket-health 200 in 24ms
 GET /socket.io?EIO=4&transport=polling&t=2l96bd4z 404 in 94ms
 GET /api/socket-health 200 in 25ms
 GET /socket.io?EIO=4&transport=polling&t=2l9yfrk9 404 in 89ms
 GET /api/socket-health 200 in 22ms
 GET /socket.io?EIO=4&transport=polling&t=2laq4yw4 404 in 96ms
 GET /api/socket-health 200 in 29ms
 GET /socket.io?EIO=4&transport=polling&t=2lbhzntt 404 in 113ms
 GET /api/socket-health 200 in 24ms
 GET /socket.io?EIO=4&transport=polling&t=2lc9jt11 404 in 97ms
 GET /api/socket-health 200 in 25ms
 GET /socket.io?EIO=4&transport=polling&t=2ld1nxwg 404 in 97ms
 GET /api/socket-health 200 in 27ms
 GET /socket.io?EIO=4&transport=polling&t=2ldtei2t 404 in 127ms
 GET /api/socket-health 200 in 29ms
 GET /socket.io?EIO=4&transport=polling&t=2lekxfay 404 in 100ms
 GET /api/socket-health 200 in 24ms
 GET /socket.io?EIO=4&transport=polling&t=2lfcvchr 404 in 97ms
 GET /api/socket-health 200 in 29ms
 GET /socket.io?EIO=4&transport=polling&t=2lg4gv5n 404 in 131ms
 GET /api/socket-health 200 in 25ms
 GET /socket.io?EIO=4&transport=polling&t=2lgw64y4 404 in 103ms
 GET /api/socket-health 200 in 24ms
 GET /socket.io?EIO=4&transport=polling&t=2lho7g2y 404 in 94ms
 GET /api/socket-health 200 in 27ms
 GET /socket.io?EIO=4&transport=polling&t=2lig0i4p 404 in 94ms
 GET /api/socket-health 200 in 28ms
 GET /socket.io?EIO=4&transport=polling&t=2lj7n84r 404 in 105ms
 GET /api/socket-health 200 in 30ms
 GET /socket.io?EIO=4&transport=polling&t=2ljzgv46 404 in 99ms
 GET /api/socket-health 200 in 22ms
 GET /socket.io?EIO=4&transport=polling&t=2lkr9tnl 404 in 95ms
 GET /api/socket-health 200 in 25ms
 GET /socket.io?EIO=4&transport=polling&t=2llj20ek 404 in 108ms
 GET /api/socket-health 200 in 25ms
 GET /socket.io?EIO=4&transport=polling&t=2lmattyl 404 in 91ms
 GET /api/socket-health 200 in 25ms
 GET /socket.io?EIO=4&transport=polling&t=2ln2kqne 404 in 106ms
 GET /api/socket-health 200 in 34ms
 GET /socket.io?EIO=4&transport=polling&t=2lnuhvzc 404 in 102ms
 GET /api/socket-health 200 in 26ms
 GET /socket.io?EIO=4&transport=polling&t=2lolyd95 404 in 93ms
 GET /api/socket-health 200 in 27ms
 GET /socket.io?EIO=4&transport=polling&t=2lpe1iq4 404 in 104ms
 GET /api/socket-health 200 in 24ms
 GET /socket.io?EIO=4&transport=polling&t=2lq5s4b7 404 in 93ms
 GET /api/socket-health 200 in 27ms
 GET /socket.io?EIO=4&transport=polling&t=2lqxpcuz 404 in 92ms
 GET /api/socket-health 200 in 27ms
 GET /socket.io?EIO=4&transport=polling&t=2lrp9xjp 404 in 91ms
 GET /api/socket-health 200 in 24ms
 GET /socket.io?EIO=4&transport=polling&t=2lsgvet1 404 in 90ms
 GET /api/socket-health 200 in 24ms
 GET /socket.io?EIO=4&transport=polling&t=2lt8k4u4 404 in 100ms
 GET /api/socket-health 200 in 55ms
=== FRIEND REQUEST GET START ===
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
Request type: received User: sayantan2@gmail.com
âœ… Database connected
 GET /socket.io?EIO=4&transport=polling&t=2lu1l82f 404 in 108ms
 POST /api/users/heartbeat 200 in 259ms
âœ… Current user found: {
  id: new ObjectId('6901f85f42c5d010fa811206'),
  email: 'sayantan2@gmail.com',
  friendRequestsCount: 0,
  sentRequestsCount: 1
}
Processing received requests...
Raw friendRequests: []
Processed receivedRequests: []
Populating sender details...
Final populated requests: []
=== FRIEND REQUEST GET END (received) ===
 GET /api/friends/request?type=received 200 in 457ms
=== FRIEND REQUEST GET START ===
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
Request type: sent User: sayantan2@gmail.com
âœ… Database connected
âœ… Current user found: {
  id: new ObjectId('6901f85f42c5d010fa811206'),
  email: 'sayantan2@gmail.com',
  friendRequestsCount: 0,
  sentRequestsCount: 1
}
Processing sent requests...
Raw sentRequests: [
  {
    from: new ObjectId('6901f85f42c5d010fa811206'),
    fromName: 'sayantan2',
    to: new ObjectId('6905adf16a22b7843b006183'),
    toName: 'sayantan3',
    status: 'pending',
    _id: new ObjectId('6905cdce14ad0d0f020b3985'),
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
Filtering sent request: { status: 'pending', to: new ObjectId('6905adf16a22b7843b006183') }
Mapping sent request: {
  from: new ObjectId('6901f85f42c5d010fa811206'),
  fromName: 'sayantan2',
  to: new ObjectId('6905adf16a22b7843b006183'),
  toName: 'sayantan3',
  status: 'pending',
  _id: new ObjectId('6905cdce14ad0d0f020b3985'),
  createdAt: 2025-11-01T09:07:26.707Z,
  updatedAt: 2025-11-01T09:07:26.707Z
}
Processed sentRequests: [
  {
    id: '6905cdce14ad0d0f020b3985',
    to: {
      id: '6905adf16a22b7843b006183',
      username: 'sayantan3',
      email: '',
      profilePicture: null
    },
    status: 'pending',
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
Populating recipient details...
Looking up recipient: 6905adf16a22b7843b006183
Found recipient: sayantan3
Final populated sent requests: [
  {
    id: '6905cdce14ad0d0f020b3985',
    to: {
      id: '6905adf16a22b7843b006183',
      username: 'sayantan3',
      email: 'sayantan3@gmail.com',
      profilePicture: undefined
    },
    status: 'pending',
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
=== FRIEND REQUEST GET END (sent) ===
 GET /api/friends/request?type=sent 200 in 140ms
 GET /api/socket-health 200 in 29ms
 GET /socket.io?EIO=4&transport=polling&t=2lusjb5s 404 in 100ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
 GET /api/socket-health 200 in 47ms
 GET /socket.io?EIO=4&transport=polling&t=2lvkqbgd 404 in 104ms
 GET /api/conversations 200 in 186ms
 GET /api/socket-health 200 in 31ms
 GET /socket.io?EIO=4&transport=polling&t=2lwbvtzw 404 in 101ms
 GET /api/socket-health 200 in 24ms
 GET /socket.io?EIO=4&transport=polling&t=2lx3msfz 404 in 95ms
 GET /api/socket-health 200 in 25ms
 GET /socket.io?EIO=4&transport=polling&t=2lxvh1x2 404 in 101ms
 GET /api/socket-health 200 in 25ms
 GET /socket.io?EIO=4&transport=polling&t=2lynbvoy 404 in 96ms
 GET /api/socket-health 200 in 27ms
 GET /socket.io?EIO=4&transport=polling&t=2lzf4j2f 404 in 97ms
 GET /api/socket-health 200 in 25ms
 GET /socket.io?EIO=4&transport=polling&t=2m06zzp5 404 in 93ms
 GET /api/socket-health 200 in 27ms
 GET /socket.io?EIO=4&transport=polling&t=2m0yfmyo 404 in 96ms
 GET /api/socket-health 200 in 24ms
 GET /socket.io?EIO=4&transport=polling&t=2m1qgcc0 404 in 91ms
 GET /api/socket-health 200 in 29ms
 GET /socket.io?EIO=4&transport=polling&t=2m2i471o 404 in 95ms
 GET /api/socket-health 200 in 23ms
 GET /socket.io?EIO=4&transport=polling&t=2m39rc27 404 in 92ms
 GET /api/socket-health 200 in 23ms
 GET /socket.io?EIO=4&transport=polling&t=2m41lcqk 404 in 89ms
 GET /api/socket-health 200 in 23ms
 GET /socket.io?EIO=4&transport=polling&t=2m4ti6gw 404 in 94ms
 GET /api/socket-health 200 in 23ms
 GET /socket.io?EIO=4&transport=polling&t=2m5lar6a 404 in 101ms
 GET /api/socket-health 200 in 31ms
 GET /socket.io?EIO=4&transport=polling&t=2m6d8dpn 404 in 100ms
 GET /api/socket-health 200 in 28ms
 GET /socket.io?EIO=4&transport=polling&t=2m74zhuf 404 in 110ms
 GET /api/socket-health 200 in 35ms
 GET /socket.io?EIO=4&transport=polling&t=2m7wuv2x 404 in 104ms
 GET /api/socket-health 200 in 23ms
 GET /socket.io?EIO=4&transport=polling&t=2m8ob0j7 404 in 90ms
 GET /api/socket-health 200 in 31ms
 GET /socket.io?EIO=4&transport=polling&t=2m9gbjag 404 in 97ms
 GET /api/socket-health 200 in 23ms
 GET /socket.io?EIO=4&transport=polling&t=2ma7ui97 404 in 94ms
 GET /api/socket-health 200 in 22ms
 GET /socket.io?EIO=4&transport=polling&t=2mazmbm7 404 in 97ms
 GET /api/socket-health 200 in 22ms
 GET /socket.io?EIO=4&transport=polling&t=2mbrb3z4 404 in 89ms
 GET /api/socket-health 200 in 23ms
 GET /socket.io?EIO=4&transport=polling&t=2mcj5i8t 404 in 93ms
 GET /api/socket-health 200 in 29ms
 GET /socket.io?EIO=4&transport=polling&t=2mdb3mel 404 in 93ms
 GET /api/socket-health 200 in 23ms
 GET /socket.io?EIO=4&transport=polling&t=2me2og2a 404 in 95ms
 GET /api/socket-health 200 in 22ms
 GET /socket.io?EIO=4&transport=polling&t=2meug9tr 404 in 98ms
 GET /api/socket-health 200 in 23ms
 GET /socket.io?EIO=4&transport=polling&t=2mfm6wdr 404 in 93ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
=== FRIEND REQUEST GET START ===
 GET /api/socket-health 200 in 83ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
Request type: received User: sayantan2@gmail.com
âœ… Database connected
âœ… Current user found: {
  id: new ObjectId('6901f85f42c5d010fa811206'),
  email: 'sayantan2@gmail.com',
  friendRequestsCount: 0,
  sentRequestsCount: 1
}
Processing received requests...
Raw friendRequests: []
Processed receivedRequests: []
Populating sender details...
Final populated requests: []
=== FRIEND REQUEST GET END (received) ===
 GET /api/friends/request?type=received 200 in 195ms
=== FRIEND REQUEST GET START ===
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
Request type: sent User: sayantan2@gmail.com
âœ… Database connected
 GET /api/friends 200 in 253ms
 GET /socket.io?EIO=4&transport=polling&t=2mggddkb 404 in 146ms
âœ… Current user found: {
  id: new ObjectId('6901f85f42c5d010fa811206'),
  email: 'sayantan2@gmail.com',
  friendRequestsCount: 0,
  sentRequestsCount: 1
}
Processing sent requests...
Raw sentRequests: [
  {
    from: new ObjectId('6901f85f42c5d010fa811206'),
    fromName: 'sayantan2',
    to: new ObjectId('6905adf16a22b7843b006183'),
    toName: 'sayantan3',
    status: 'pending',
    _id: new ObjectId('6905cdce14ad0d0f020b3985'),
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
Filtering sent request: { status: 'pending', to: new ObjectId('6905adf16a22b7843b006183') }
Mapping sent request: {
  from: new ObjectId('6901f85f42c5d010fa811206'),
  fromName: 'sayantan2',
  to: new ObjectId('6905adf16a22b7843b006183'),
  toName: 'sayantan3',
  status: 'pending',
  _id: new ObjectId('6905cdce14ad0d0f020b3985'),
  createdAt: 2025-11-01T09:07:26.707Z,
  updatedAt: 2025-11-01T09:07:26.707Z
}
Processed sentRequests: [
  {
    id: '6905cdce14ad0d0f020b3985',
    to: {
      id: '6905adf16a22b7843b006183',
      username: 'sayantan3',
      email: '',
      profilePicture: null
    },
    status: 'pending',
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
Populating recipient details...
Looking up recipient: 6905adf16a22b7843b006183
Found recipient: sayantan3
Final populated sent requests: [
  {
    id: '6905cdce14ad0d0f020b3985',
    to: {
      id: '6905adf16a22b7843b006183',
      username: 'sayantan3',
      email: 'sayantan3@gmail.com',
      profilePicture: undefined
    },
    status: 'pending',
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
=== FRIEND REQUEST GET END (sent) ===
 GET /api/friends/request?type=sent 200 in 125ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
 GET /api/socket-health 200 in 83ms
 GET /socket.io?EIO=4&transport=polling&t=2mh7ej67 404 in 170ms
 POST /api/users/heartbeat 200 in 338ms
 GET /api/socket-health 200 in 25ms
 GET /socket.io?EIO=4&transport=polling&t=2mhxl2nr 404 in 106ms
 GET /api/socket-health 200 in 42ms
 GET /socket.io?EIO=4&transport=polling&t=2miq4m16 404 in 108ms
 GET /api/socket-health 200 in 35ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
 GET /socket.io?EIO=4&transport=polling&t=2mjhjx71 404 in 104ms
 GET /api/conversations 200 in 173ms
 GET /api/socket-health 200 in 26ms
 GET /socket.io?EIO=4&transport=polling&t=2mk95139 404 in 107ms
 GET /api/socket-health 200 in 29ms
 GET /socket.io?EIO=4&transport=polling&t=2ml0zl3f 404 in 182ms
 GET /api/socket-health 200 in 29ms
 GET /socket.io?EIO=4&transport=polling&t=2mlsofmj 404 in 140ms
 GET /api/socket-health 200 in 22ms
 GET /socket.io?EIO=4&transport=polling&t=2mmk8ybf 404 in 92ms
 GET /api/socket-health 200 in 27ms
 GET /socket.io?EIO=4&transport=polling&t=2mnc1au7 404 in 107ms
 GET /api/socket-health 200 in 31ms
 GET /socket.io?EIO=4&transport=polling&t=2mo3zqa5 404 in 109ms
 GET /api/socket-health 200 in 204ms
 GET /socket.io?EIO=4&transport=polling&t=2mp3ypfn 404 in 146ms
 GET /api/socket-health 200 in 24ms
 GET /socket.io?EIO=4&transport=polling&t=2mpnl2t8 404 in 107ms
 GET /api/socket-health 200 in 24ms
 GET /socket.io?EIO=4&transport=polling&t=2mqfar8s 404 in 94ms
 GET /api/socket-health 200 in 28ms
 GET /socket.io?EIO=4&transport=polling&t=2mr77s1a 404 in 105ms
 GET /api/socket-health 200 in 26ms
 GET /socket.io?EIO=4&transport=polling&t=2mryt5u8 404 in 100ms
 GET /api/socket-health 200 in 39ms
 GET /socket.io?EIO=4&transport=polling&t=2msqylxl 404 in 103ms
 GET /api/socket-health 200 in 34ms
 GET /socket.io?EIO=4&transport=polling&t=2mtikf18 404 in 108ms
 GET /api/socket-health 200 in 34ms
 GET /socket.io?EIO=4&transport=polling&t=2muab3v9 404 in 119ms
 GET /api/socket-health 200 in 27ms
 GET /socket.io?EIO=4&transport=polling&t=2mv1uf37 404 in 101ms
 GET /api/socket-health 200 in 33ms
 GET /socket.io?EIO=4&transport=polling&t=2mvtotbt 404 in 109ms
 GET /api/socket-health 200 in 26ms
 GET /socket.io?EIO=4&transport=polling&t=2mwlav9o 404 in 104ms
 GET /api/socket-health 200 in 28ms
 GET /socket.io?EIO=4&transport=polling&t=2mxdgvll 404 in 100ms
 GET /api/socket-health 200 in 25ms
 GET /socket.io?EIO=4&transport=polling&t=2my52juy 404 in 107ms
 GET /api/socket-health 200 in 23ms
 GET /socket.io?EIO=4&transport=polling&t=2mywnvjh 404 in 103ms
 GET /api/socket-health 200 in 30ms
 GET /socket.io?EIO=4&transport=polling&t=2mzojvdn 404 in 91ms
 GET /api/socket-health 200 in 24ms
 GET /socket.io?EIO=4&transport=polling&t=2n0g60vu 404 in 107ms
 GET /api/socket-health 200 in 26ms
 GET /socket.io?EIO=4&transport=polling&t=2n1800qf 404 in 96ms
 GET /api/socket-health 200 in 24ms
 GET /socket.io?EIO=4&transport=polling&t=2n1znxvf 404 in 102ms
 GET /api/socket-health 200 in 29ms
 GET /socket.io?EIO=4&transport=polling&t=2n2rm9z3 404 in 93ms
 GET /api/socket-health 200 in 23ms
 GET /socket.io?EIO=4&transport=polling&t=2n3ja5qj 404 in 99ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
=== FRIEND REQUEST GET START ===
 GET /api/socket-health 200 in 60ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
Request type: received User: sayantan2@gmail.com
âœ… Database connected
 GET /socket.io?EIO=4&transport=polling&t=2n4c9vz0 404 in 99ms
 POST /api/users/heartbeat 200 in 249ms
âœ… Current user found: {
  id: new ObjectId('6901f85f42c5d010fa811206'),
  email: 'sayantan2@gmail.com',
  friendRequestsCount: 0,
  sentRequestsCount: 1
}
Processing received requests...
Raw friendRequests: []
Processed receivedRequests: []
Populating sender details...
Final populated requests: []
=== FRIEND REQUEST GET END (received) ===
 GET /api/friends/request?type=received 200 in 474ms
=== FRIEND REQUEST GET START ===
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
Request type: sent User: sayantan2@gmail.com
âœ… Database connected
âœ… Current user found: {
  id: new ObjectId('6901f85f42c5d010fa811206'),
  email: 'sayantan2@gmail.com',
  friendRequestsCount: 0,
  sentRequestsCount: 1
}
Processing sent requests...
Raw sentRequests: [
  {
    from: new ObjectId('6901f85f42c5d010fa811206'),
    fromName: 'sayantan2',
    to: new ObjectId('6905adf16a22b7843b006183'),
    toName: 'sayantan3',
    status: 'pending',
    _id: new ObjectId('6905cdce14ad0d0f020b3985'),
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
Filtering sent request: { status: 'pending', to: new ObjectId('6905adf16a22b7843b006183') }
Mapping sent request: {
  from: new ObjectId('6901f85f42c5d010fa811206'),
  fromName: 'sayantan2',
  to: new ObjectId('6905adf16a22b7843b006183'),
  toName: 'sayantan3',
  status: 'pending',
  _id: new ObjectId('6905cdce14ad0d0f020b3985'),
  createdAt: 2025-11-01T09:07:26.707Z,
  updatedAt: 2025-11-01T09:07:26.707Z
}
Processed sentRequests: [
  {
    id: '6905cdce14ad0d0f020b3985',
    to: {
      id: '6905adf16a22b7843b006183',
      username: 'sayantan3',
      email: '',
      profilePicture: null
    },
    status: 'pending',
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
Populating recipient details...
Looking up recipient: 6905adf16a22b7843b006183
Found recipient: sayantan3
Final populated sent requests: [
  {
    id: '6905cdce14ad0d0f020b3985',
    to: {
      id: '6905adf16a22b7843b006183',
      username: 'sayantan3',
      email: 'sayantan3@gmail.com',
      profilePicture: undefined
    },
    status: 'pending',
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
=== FRIEND REQUEST GET END (sent) ===
 GET /api/friends/request?type=sent 200 in 119ms
 GET /api/socket-health 200 in 27ms
 GET /socket.io?EIO=4&transport=polling&t=2n52wkn8 404 in 95ms
 GET /api/socket-health 200 in 23ms
 GET /socket.io?EIO=4&transport=polling&t=2n5uiwx0 404 in 95ms
 GET /api/socket-health 200 in 22ms
 GET /socket.io?EIO=4&transport=polling&t=2n6mba6n 404 in 91ms
 GET /api/socket-health 200 in 50ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
 GET /socket.io?EIO=4&transport=polling&t=2n7f55l2 404 in 97ms
 GET /api/conversations 200 in 186ms
 GET /api/socket-health 200 in 23ms
 GET /socket.io?EIO=4&transport=polling&t=2n8676o4 404 in 103ms
 GET /api/socket-health 200 in 26ms
 GET /socket.io?EIO=4&transport=polling&t=2n8y0vnj 404 in 100ms
 GET /api/socket-health 200 in 25ms
 GET /socket.io?EIO=4&transport=polling&t=2n9pochu 404 in 96ms
 GET /api/socket-health 200 in 25ms
 GET /socket.io?EIO=4&transport=polling&t=2nahdo4q 404 in 86ms
 GET /api/socket-health 200 in 22ms
 GET /socket.io?EIO=4&transport=polling&t=2nb9fna3 404 in 95ms
 GET /api/socket-health 200 in 26ms
 GET /socket.io?EIO=4&transport=polling&t=2nc0vb34 404 in 105ms
 GET /api/socket-health 200 in 23ms
 GET /socket.io?EIO=4&transport=polling&t=2ncskire 404 in 92ms
 GET /api/socket-health 200 in 23ms
 GET /socket.io?EIO=4&transport=polling&t=2ndkclv9 404 in 108ms
 GET /api/socket-health 200 in 28ms
 GET /socket.io?EIO=4&transport=polling&t=2necahqq 404 in 95ms
 GET /api/socket-health 200 in 24ms
 GET /socket.io?EIO=4&transport=polling&t=2nf4846r 404 in 94ms
 GET /api/socket-health 200 in 24ms
 GET /socket.io?EIO=4&transport=polling&t=2nfvm8a3 404 in 99ms
 GET /api/socket-health 200 in 25ms
 GET /socket.io?EIO=4&transport=polling&t=2ngntzdo 404 in 97ms
 GET /api/socket-health 200 in 24ms
 GET /socket.io?EIO=4&transport=polling&t=2nhfkew0 404 in 96ms
 GET /api/socket-health 200 in 29ms
 GET /socket.io?EIO=4&transport=polling&t=2ni7fmip 404 in 105ms
 GET /api/socket-health 200 in 25ms
 GET /socket.io?EIO=4&transport=polling&t=2niz4c9m 404 in 103ms
 GET /api/socket-health 200 in 23ms
 GET /socket.io?EIO=4&transport=polling&t=2njqtdw3 404 in 93ms
 GET /api/socket-health 200 in 23ms
 GET /socket.io?EIO=4&transport=polling&t=2nkilqc8 404 in 97ms
 GET /api/socket-health 200 in 43ms
 GET /socket.io?EIO=4&transport=polling&t=2nlasw48 404 in 103ms
 GET /api/socket-health 200 in 33ms
 GET /socket.io?EIO=4&transport=polling&t=2nm2894v 404 in 93ms
 GET /api/socket-health 200 in 43ms
 GET /socket.io?EIO=4&transport=polling&t=2nmuet5i 404 in 101ms
 GET /api/socket-health 200 in 21ms
 GET /socket.io?EIO=4&transport=polling&t=2nnlew6a 404 in 96ms
 GET /api/socket-health 200 in 25ms
 GET /socket.io?EIO=4&transport=polling&t=2noda5ex 404 in 102ms
 GET /api/socket-health 200 in 28ms
 GET /socket.io?EIO=4&transport=polling&t=2np5231f 404 in 90ms
 GET /api/socket-health 200 in 24ms
 GET /socket.io?EIO=4&transport=polling&t=2npx3ivb 404 in 97ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
=== FRIEND REQUEST GET START ===
 GET /api/socket-health 200 in 67ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
Request type: received User: sayantan2@gmail.com
âœ… Database connected
âœ… Current user found: {
  id: new ObjectId('6901f85f42c5d010fa811206'),
  email: 'sayantan2@gmail.com',
  friendRequestsCount: 0,
  sentRequestsCount: 1
}
Processing received requests...
Raw friendRequests: []
Processed receivedRequests: []
Populating sender details...
Final populated requests: []
=== FRIEND REQUEST GET END (received) ===
 GET /api/friends/request?type=received 200 in 163ms
 GET /api/friends 200 in 209ms
=== FRIEND REQUEST GET START ===
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
Request type: sent User: sayantan2@gmail.com
âœ… Database connected
 GET /socket.io?EIO=4&transport=polling&t=2nqqh3q2 404 in 171ms
âœ… Current user found: {
  id: new ObjectId('6901f85f42c5d010fa811206'),
  email: 'sayantan2@gmail.com',
  friendRequestsCount: 0,
  sentRequestsCount: 1
}
Processing sent requests...
Raw sentRequests: [
  {
    from: new ObjectId('6901f85f42c5d010fa811206'),
    fromName: 'sayantan2',
    to: new ObjectId('6905adf16a22b7843b006183'),
    toName: 'sayantan3',
    status: 'pending',
    _id: new ObjectId('6905cdce14ad0d0f020b3985'),
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
Filtering sent request: { status: 'pending', to: new ObjectId('6905adf16a22b7843b006183') }
Mapping sent request: {
  from: new ObjectId('6901f85f42c5d010fa811206'),
  fromName: 'sayantan2',
  to: new ObjectId('6905adf16a22b7843b006183'),
  toName: 'sayantan3',
  status: 'pending',
  _id: new ObjectId('6905cdce14ad0d0f020b3985'),
  createdAt: 2025-11-01T09:07:26.707Z,
  updatedAt: 2025-11-01T09:07:26.707Z
}
Processed sentRequests: [
  {
    id: '6905cdce14ad0d0f020b3985',
    to: {
      id: '6905adf16a22b7843b006183',
      username: 'sayantan3',
      email: '',
      profilePicture: null
    },
    status: 'pending',
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
Populating recipient details...
Looking up recipient: 6905adf16a22b7843b006183
Found recipient: sayantan3
Final populated sent requests: [
  {
    id: '6905cdce14ad0d0f020b3985',
    to: {
      id: '6905adf16a22b7843b006183',
      username: 'sayantan3',
      email: 'sayantan3@gmail.com',
      profilePicture: undefined
    },
    status: 'pending',
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
=== FRIEND REQUEST GET END (sent) ===
 GET /api/friends/request?type=sent 200 in 144ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
 GET /api/socket-health 200 in 54ms
 GET /socket.io?EIO=4&transport=polling&t=2nrhejou 404 in 106ms
 POST /api/users/heartbeat 200 in 246ms
 GET /api/socket-health 200 in 22ms
 GET /socket.io?EIO=4&transport=polling&t=2ns8dryz 404 in 100ms
 GET /api/socket-health 200 in 25ms
 GET /socket.io?EIO=4&transport=polling&t=2nt03qse 404 in 94ms
 GET /api/socket-health 200 in 32ms
 GET /socket.io?EIO=4&transport=polling&t=2ntry3mg 404 in 91ms
 GET /api/socket-health 200 in 24ms
 GET /socket.io?EIO=4&transport=polling&t=2nujfk4a 404 in 98ms
 GET /api/socket-health 200 in 47ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
 GET /socket.io?EIO=4&transport=polling&t=2nvc8bdn 404 in 101ms
 GET /api/conversations 200 in 191ms
 GET /api/socket-health 200 in 26ms
 GET /socket.io?EIO=4&transport=polling&t=2nw3aikc 404 in 97ms
 GET /api/socket-health 200 in 23ms
 GET /socket.io?EIO=4&transport=polling&t=2nwuzj1r 404 in 97ms
 GET /api/socket-health 200 in 24ms
 GET /socket.io?EIO=4&transport=polling&t=2nxmrist 404 in 92ms
 GET /api/socket-health 200 in 21ms
 GET /socket.io?EIO=4&transport=polling&t=2nyefgjn 404 in 90ms
 GET /api/socket-health 200 in 29ms
 GET /socket.io?EIO=4&transport=polling&t=2nz6elml 404 in 94ms
 GET /api/socket-health 200 in 22ms
 GET /socket.io?EIO=4&transport=polling&t=2nzxykn6 404 in 91ms
 GET /api/socket-health 200 in 22ms
 GET /socket.io?EIO=4&transport=polling&t=2o0pq4lb 404 in 88ms
 GET /api/socket-health 200 in 28ms
 GET /socket.io?EIO=4&transport=polling&t=2o1hkubj 404 in 99ms
 GET /api/socket-health 200 in 32ms
 GET /socket.io?EIO=4&transport=polling&t=2o29h8m4 404 in 97ms
 GET /api/socket-health 200 in 27ms
 GET /socket.io?EIO=4&transport=polling&t=2o315mdq 404 in 125ms
 GET /api/socket-health 200 in 23ms
 GET /socket.io?EIO=4&transport=polling&t=2o3swyia 404 in 103ms
 GET /api/socket-health 200 in 21ms
 GET /socket.io?EIO=4&transport=polling&t=2o4kl3mp 404 in 96ms
 GET /api/socket-health 200 in 22ms
 GET /socket.io?EIO=4&transport=polling&t=2o5ccbch 404 in 89ms
 GET /api/socket-health 200 in 39ms
 GET /socket.io?EIO=4&transport=polling&t=2o64nk9z 404 in 92ms
 GET /api/socket-health 200 in 24ms
 GET /socket.io?EIO=4&transport=polling&t=2o6vx0yi 404 in 93ms
 GET /api/socket-health 200 in 22ms
 GET /socket.io?EIO=4&transport=polling&t=2o7noyty 404 in 85ms
 GET /api/socket-health 200 in 22ms
 GET /socket.io?EIO=4&transport=polling&t=2o8fizgi 404 in 91ms
 GET /api/socket-health 200 in 33ms
 GET /socket.io?EIO=4&transport=polling&t=2o97n433 404 in 98ms
 GET /api/socket-health 200 in 24ms
 GET /socket.io?EIO=4&transport=polling&t=2o9z3iwy 404 in 116ms
 GET /api/socket-health 200 in 22ms
 GET /socket.io?EIO=4&transport=polling&t=2oaqrdyg 404 in 90ms
 GET /api/socket-health 200 in 27ms
 GET /socket.io?EIO=4&transport=polling&t=2obizv4z 404 in 111ms
 GET /api/socket-health 200 in 26ms
 GET /socket.io?EIO=4&transport=polling&t=2ocaqel1 404 in 96ms
 GET /api/socket-health 200 in 28ms
 GET /socket.io?EIO=4&transport=polling&t=2od2jrxw 404 in 95ms
 GET /api/socket-health 200 in 21ms
 GET /socket.io?EIO=4&transport=polling&t=2odu6gg2 404 in 92ms
 GET /api/socket-health 200 in 43ms
=== FRIEND REQUEST GET START ===
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
Request type: received User: sayantan2@gmail.com
âœ… Database connected
âœ… Current user found: {
  id: new ObjectId('6901f85f42c5d010fa811206'),
  email: 'sayantan2@gmail.com',
  friendRequestsCount: 0,
  sentRequestsCount: 1
}
Processing received requests...
Raw friendRequests: []
Processed receivedRequests: []
Populating sender details...
Final populated requests: []
=== FRIEND REQUEST GET END (received) ===
 GET /api/friends/request?type=received 200 in 130ms
=== FRIEND REQUEST GET START ===
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
Request type: sent User: sayantan2@gmail.com
âœ… Database connected
 GET /socket.io?EIO=4&transport=polling&t=2oemkjss 404 in 115ms
âœ… Current user found: {
  id: new ObjectId('6901f85f42c5d010fa811206'),
  email: 'sayantan2@gmail.com',
  friendRequestsCount: 0,
  sentRequestsCount: 1
}
Processing sent requests...
Raw sentRequests: [
  {
    from: new ObjectId('6901f85f42c5d010fa811206'),
    fromName: 'sayantan2',
    to: new ObjectId('6905adf16a22b7843b006183'),
    toName: 'sayantan3',
    status: 'pending',
    _id: new ObjectId('6905cdce14ad0d0f020b3985'),
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
Filtering sent request: { status: 'pending', to: new ObjectId('6905adf16a22b7843b006183') }
Mapping sent request: {
  from: new ObjectId('6901f85f42c5d010fa811206'),
  fromName: 'sayantan2',
  to: new ObjectId('6905adf16a22b7843b006183'),
  toName: 'sayantan3',
  status: 'pending',
  _id: new ObjectId('6905cdce14ad0d0f020b3985'),
  createdAt: 2025-11-01T09:07:26.707Z,
  updatedAt: 2025-11-01T09:07:26.707Z
}
Processed sentRequests: [
  {
    id: '6905cdce14ad0d0f020b3985',
    to: {
      id: '6905adf16a22b7843b006183',
      username: 'sayantan3',
      email: '',
      profilePicture: null
    },
    status: 'pending',
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
Populating recipient details...
Looking up recipient: 6905adf16a22b7843b006183
Found recipient: sayantan3
Final populated sent requests: [
  {
    id: '6905cdce14ad0d0f020b3985',
    to: {
      id: '6905adf16a22b7843b006183',
      username: 'sayantan3',
      email: 'sayantan3@gmail.com',
      profilePicture: undefined
    },
    status: 'pending',
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
=== FRIEND REQUEST GET END (sent) ===
 GET /api/friends/request?type=sent 200 in 119ms
 GET /api/socket-health 200 in 23ms
 GET /socket.io?EIO=4&transport=polling&t=2ofdnu2c 404 in 92ms
 GET /api/socket-health 200 in 29ms
 GET /socket.io?EIO=4&transport=polling&t=2og5l2tx 404 in 96ms
 GET /api/socket-health 200 in 24ms
 GET /socket.io?EIO=4&transport=polling&t=2ogxcr4d 404 in 107ms
 GET /api/socket-health 200 in 28ms
 GET /socket.io?EIO=4&transport=polling&t=2ohp79dk 404 in 108ms
 GET /api/socket-health 200 in 24ms
 GET /socket.io?EIO=4&transport=polling&t=2oigrik0 404 in 101ms
 GET /api/socket-health 200 in 76ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
 GET /socket.io?EIO=4&transport=polling&t=2oja1dym 404 in 152ms
 GET /api/conversations 200 in 269ms
 GET /api/socket-health 200 in 24ms
 GET /socket.io?EIO=4&transport=polling&t=2ok0eh4h 404 in 94ms
 GET /api/socket-health 200 in 43ms
 GET /socket.io?EIO=4&transport=polling&t=2okstiz2 404 in 138ms
 GET /api/socket-health 200 in 22ms
 GET /socket.io?EIO=4&transport=polling&t=2oljudyz 404 in 92ms
 GET /api/socket-health 200 in 27ms
 GET /socket.io?EIO=4&transport=polling&t=2ombr2e6 404 in 92ms
 GET /api/socket-health 200 in 23ms
 GET /socket.io?EIO=4&transport=polling&t=2on3a10x 404 in 103ms
 GET /api/socket-health 200 in 29ms
 GET /socket.io?EIO=4&transport=polling&t=2onvaiql 404 in 121ms
 GET /api/socket-health 200 in 31ms
 GET /socket.io?EIO=4&transport=polling&t=2oon1f0w 404 in 115ms
 GET /api/socket-health 200 in 33ms
 GET /socket.io?EIO=4&transport=polling&t=2opeu4uc 404 in 97ms
 GET /api/socket-health 200 in 26ms
 GET /socket.io?EIO=4&transport=polling&t=2oq6hfvl 404 in 93ms
 GET /api/socket-health 200 in 33ms
 GET /socket.io?EIO=4&transport=polling&t=2oqyjjmi 404 in 119ms
 GET /api/socket-health 200 in 20ms
 GET /socket.io?EIO=4&transport=polling&t=2orq04dq 404 in 102ms
 GET /api/socket-health 200 in 26ms
 GET /socket.io?EIO=4&transport=polling&t=2oshyidy 404 in 96ms
 GET /api/socket-health 200 in 33ms
 GET /socket.io?EIO=4&transport=polling&t=2ot9we3b 404 in 103ms
 GET /api/socket-health 200 in 26ms
 GET /socket.io?EIO=4&transport=polling&t=2ou1g6ky 404 in 151ms
 GET /api/socket-health 200 in 26ms
 GET /socket.io?EIO=4&transport=polling&t=2out4d7h 404 in 93ms
 GET /api/socket-health 200 in 33ms
 GET /socket.io?EIO=4&transport=polling&t=2ovl0i3h 404 in 108ms
 GET /api/socket-health 200 in 29ms
 GET /socket.io?EIO=4&transport=polling&t=2owczgod 404 in 104ms
 GET /api/socket-health 200 in 23ms
 GET /socket.io?EIO=4&transport=polling&t=2ox4ahsd 404 in 98ms
 GET /api/socket-health 200 in 62ms
 GET /socket.io?EIO=4&transport=polling&t=2oxx963w 404 in 146ms
 GET /api/socket-health 200 in 53ms
 GET /socket.io?EIO=4&transport=polling&t=2oyouwva 404 in 140ms
 GET /api/socket-health 200 in 23ms
 GET /socket.io?EIO=4&transport=polling&t=2ozfvwex 404 in 98ms
 GET /api/socket-health 200 in 45ms
 GET /socket.io?EIO=4&transport=polling&t=2p086w57 404 in 119ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
=== FRIEND REQUEST GET START ===
 GET /api/socket-health 200 in 183ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
Request type: received User: sayantan2@gmail.com
âœ… Database connected
 GET /api/friends 200 in 319ms
 GET /socket.io?EIO=4&transport=polling&t=2p152wq1 404 in 138ms
âœ… Current user found: {
  id: new ObjectId('6901f85f42c5d010fa811206'),
  email: 'sayantan2@gmail.com',
  friendRequestsCount: 0,
  sentRequestsCount: 1
}
Processing received requests...
Raw friendRequests: []
Processed receivedRequests: []
Populating sender details...
Final populated requests: []
=== FRIEND REQUEST GET END (received) ===
 GET /api/friends/request?type=received 200 in 651ms
=== FRIEND REQUEST GET START ===
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
Request type: sent User: sayantan2@gmail.com
âœ… Database connected
 POST /api/users/heartbeat 200 in 725ms
âœ… Current user found: {
  id: new ObjectId('6901f85f42c5d010fa811206'),
  email: 'sayantan2@gmail.com',
  friendRequestsCount: 0,
  sentRequestsCount: 1
}
Processing sent requests...
Raw sentRequests: [
  {
    from: new ObjectId('6901f85f42c5d010fa811206'),
    fromName: 'sayantan2',
    to: new ObjectId('6905adf16a22b7843b006183'),
    toName: 'sayantan3',
    status: 'pending',
    _id: new ObjectId('6905cdce14ad0d0f020b3985'),
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
Filtering sent request: { status: 'pending', to: new ObjectId('6905adf16a22b7843b006183') }
Mapping sent request: {
  from: new ObjectId('6901f85f42c5d010fa811206'),
  fromName: 'sayantan2',
  to: new ObjectId('6905adf16a22b7843b006183'),
  toName: 'sayantan3',
  status: 'pending',
  _id: new ObjectId('6905cdce14ad0d0f020b3985'),
  createdAt: 2025-11-01T09:07:26.707Z,
  updatedAt: 2025-11-01T09:07:26.707Z
}
Processed sentRequests: [
  {
    id: '6905cdce14ad0d0f020b3985',
    to: {
      id: '6905adf16a22b7843b006183',
      username: 'sayantan3',
      email: '',
      profilePicture: null
    },
    status: 'pending',
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
Populating recipient details...
Looking up recipient: 6905adf16a22b7843b006183
Found recipient: sayantan3
Final populated sent requests: [
  {
    id: '6905cdce14ad0d0f020b3985',
    to: {
      id: '6905adf16a22b7843b006183',
      username: 'sayantan3',
      email: 'sayantan3@gmail.com',
      profilePicture: undefined
    },
    status: 'pending',
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
=== FRIEND REQUEST GET END (sent) ===
 GET /api/friends/request?type=sent 200 in 119ms
 GET /api/socket-health 200 in 32ms
 GET /socket.io?EIO=4&transport=polling&t=2p1rbeou 404 in 101ms
 GET /api/socket-health 200 in 22ms
 GET /socket.io?EIO=4&transport=polling&t=2p2iv1nj 404 in 100ms
 GET /api/socket-health 200 in 28ms
 GET /socket.io?EIO=4&transport=polling&t=2p3atick 404 in 127ms
 GET /api/socket-health 200 in 23ms
 GET /socket.io?EIO=4&transport=polling&t=2p42eigr 404 in 98ms
 GET /api/socket-health 200 in 25ms
 GET /socket.io?EIO=4&transport=polling&t=2p4u6o85 404 in 101ms
 GET /api/socket-health 200 in 25ms
 GET /socket.io?EIO=4&transport=polling&t=2p5m6qh4 404 in 100ms
 GET /api/socket-health 200 in 46ms
 GET /socket.io?EIO=4&transport=polling&t=2p6eelml 404 in 119ms
 GET /api/socket-health 200 in 43ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
 GET /api/conversations 200 in 193ms
 GET /socket.io?EIO=4&transport=polling&t=2p75ze5f 404 in 161ms
 GET /api/socket-health 200 in 24ms
 GET /socket.io?EIO=4&transport=polling&t=2p7xl135 404 in 98ms
 GET /api/socket-health 200 in 23ms
 GET /socket.io?EIO=4&transport=polling&t=2p8pdnim 404 in 98ms
 GET /api/socket-health 200 in 31ms
 GET /socket.io?EIO=4&transport=polling&t=2p9gxscy 404 in 118ms
 GET /api/socket-health 200 in 24ms
 GET /socket.io?EIO=4&transport=polling&t=2pa90yjs 404 in 120ms
 GET /api/socket-health 200 in 29ms
 GET /socket.io?EIO=4&transport=polling&t=2pb0odzk 404 in 97ms
 GET /api/socket-health 200 in 21ms
 GET /socket.io?EIO=4&transport=polling&t=2pbs85hr 404 in 95ms
 GET /api/socket-health 200 in 25ms
 GET /socket.io?EIO=4&transport=polling&t=2pck6i6m 404 in 187ms
 GET /api/socket-health 200 in 20ms
 GET /socket.io?EIO=4&transport=polling&t=2pdbyl52 404 in 94ms
 GET /api/socket-health 200 in 37ms
 GET /socket.io?EIO=4&transport=polling&t=2pe44w73 404 in 197ms
 GET /api/socket-health 200 in 41ms
 GET /socket.io?EIO=4&transport=polling&t=2pew4b21 404 in 161ms
 GET /api/socket-health 200 in 32ms
 GET /socket.io?EIO=4&transport=polling&t=2pfngcqa 404 in 104ms
 GET /api/socket-health 200 in 53ms
 GET /socket.io?EIO=4&transport=polling&t=2pgfwlal 404 in 164ms
 GET /api/socket-health 200 in 34ms
 GET /socket.io?EIO=4&transport=polling&t=2ph73l1l 404 in 102ms
 GET /api/socket-health 200 in 20ms
 GET /socket.io?EIO=4&transport=polling&t=2phy795n 404 in 101ms
 GET /api/socket-health 200 in 47ms
 GET /socket.io?EIO=4&transport=polling&t=2piqsexo 404 in 118ms
 GET /api/socket-health 200 in 23ms
 GET /socket.io?EIO=4&transport=polling&t=2pjhvsz8 404 in 101ms
 GET /api/socket-health 200 in 25ms
 GET /socket.io?EIO=4&transport=polling&t=2pk9z049 404 in 101ms
 GET /api/socket-health 200 in 28ms
 GET /socket.io?EIO=4&transport=polling&t=2pl1uuzj 404 in 94ms
 GET /api/socket-health 200 in 22ms
 GET /socket.io?EIO=4&transport=polling&t=2pltcbm3 404 in 92ms
 GET /api/socket-health 200 in 39ms
 GET /socket.io?EIO=4&transport=polling&t=2pmlp8q1 404 in 117ms
 GET /api/socket-health 200 in 27ms
 GET /socket.io?EIO=4&transport=polling&t=2pnctbbg 404 in 109ms
 GET /api/socket-health 200 in 49ms
 GET /socket.io?EIO=4&transport=polling&t=2po5me11 404 in 118ms
 GET /api/socket-health 200 in 50ms
=== FRIEND REQUEST GET START ===
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
Request type: received User: sayantan2@gmail.com
âœ… Database connected
âœ… Current user found: {
  id: new ObjectId('6901f85f42c5d010fa811206'),
  email: 'sayantan2@gmail.com',
  friendRequestsCount: 0,
  sentRequestsCount: 1
}
Processing received requests...
Raw friendRequests: []
Processed receivedRequests: []
Populating sender details...
Final populated requests: []
=== FRIEND REQUEST GET END (received) ===
 GET /api/friends/request?type=received 200 in 164ms
=== FRIEND REQUEST GET START ===
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
Request type: sent User: sayantan2@gmail.com
âœ… Database connected
 GET /socket.io?EIO=4&transport=polling&t=2poxg7aw 404 in 143ms
âœ… Current user found: {
  id: new ObjectId('6901f85f42c5d010fa811206'),
  email: 'sayantan2@gmail.com',
  friendRequestsCount: 0,
  sentRequestsCount: 1
}
Processing sent requests...
Raw sentRequests: [
  {
    from: new ObjectId('6901f85f42c5d010fa811206'),
    fromName: 'sayantan2',
    to: new ObjectId('6905adf16a22b7843b006183'),
    toName: 'sayantan3',
    status: 'pending',
    _id: new ObjectId('6905cdce14ad0d0f020b3985'),
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
Filtering sent request: { status: 'pending', to: new ObjectId('6905adf16a22b7843b006183') }
Mapping sent request: {
  from: new ObjectId('6901f85f42c5d010fa811206'),
  fromName: 'sayantan2',
  to: new ObjectId('6905adf16a22b7843b006183'),
  toName: 'sayantan3',
  status: 'pending',
  _id: new ObjectId('6905cdce14ad0d0f020b3985'),
  createdAt: 2025-11-01T09:07:26.707Z,
  updatedAt: 2025-11-01T09:07:26.707Z
}
Processed sentRequests: [
  {
    id: '6905cdce14ad0d0f020b3985',
    to: {
      id: '6905adf16a22b7843b006183',
      username: 'sayantan3',
      email: '',
      profilePicture: null
    },
    status: 'pending',
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
Populating recipient details...
Looking up recipient: 6905adf16a22b7843b006183
Found recipient: sayantan3
Final populated sent requests: [
  {
    id: '6905cdce14ad0d0f020b3985',
    to: {
      id: '6905adf16a22b7843b006183',
      username: 'sayantan3',
      email: 'sayantan3@gmail.com',
      profilePicture: undefined
    },
    status: 'pending',
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
=== FRIEND REQUEST GET END (sent) ===
 GET /api/friends/request?type=sent 200 in 147ms
 GET /api/socket-health 200 in 38ms
 GET /socket.io?EIO=4&transport=polling&t=2ppou87m 404 in 124ms
 GET /api/socket-health 200 in 29ms
 GET /socket.io?EIO=4&transport=polling&t=2pqg8xt7 404 in 127ms
 GET /api/socket-health 200 in 31ms
 GET /socket.io?EIO=4&transport=polling&t=2pr82yvw 404 in 105ms
 GET /api/socket-health 200 in 28ms
 GET /socket.io?EIO=4&transport=polling&t=2przpfqn 404 in 112ms
 GET /api/socket-health 200 in 31ms
 GET /socket.io?EIO=4&transport=polling&t=2psrsr88 404 in 121ms
 GET /api/socket-health 200 in 34ms
 GET /socket.io?EIO=4&transport=polling&t=2ptjjqnw 404 in 126ms
 GET /api/socket-health 200 in 44ms
 GET /socket.io?EIO=4&transport=polling&t=2pubktim 404 in 211ms
 GET /api/socket-health 200 in 49ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
 GET /socket.io?EIO=4&transport=polling&t=2pv3dqay 404 in 109ms
 GET /api/conversations 200 in 214ms
 GET /api/socket-health 200 in 30ms
 GET /socket.io?EIO=4&transport=polling&t=2pvuu8g4 404 in 102ms
 GET /api/socket-health 200 in 26ms
 GET /socket.io?EIO=4&transport=polling&t=2pwmkq6o 404 in 107ms
 GET /api/socket-health 200 in 32ms
 GET /socket.io?EIO=4&transport=polling&t=2pxeg6tk 404 in 128ms
 GET /api/socket-health 200 in 27ms
 GET /socket.io?EIO=4&transport=polling&t=2py61vxm 404 in 111ms
 GET /api/socket-health 200 in 23ms
 GET /socket.io?EIO=4&transport=polling&t=2pyxmkl3 404 in 95ms
 GET /api/socket-health 200 in 30ms
 GET /socket.io?EIO=4&transport=polling&t=2pzphsh9 404 in 99ms
 GET /api/socket-health 200 in 24ms
 GET /socket.io?EIO=4&transport=polling&t=2q0h1gdy 404 in 94ms
 GET /api/socket-health 200 in 25ms
 GET /socket.io?EIO=4&transport=polling&t=2q18yhx4 404 in 115ms
 GET /api/socket-health 200 in 27ms
 GET /socket.io?EIO=4&transport=polling&t=2q20nxrw 404 in 98ms
 GET /api/socket-health 200 in 23ms
 GET /socket.io?EIO=4&transport=polling&t=2q2saanu 404 in 86ms
 GET /api/socket-health 200 in 22ms
 GET /socket.io?EIO=4&transport=polling&t=2q3kdygs 404 in 96ms
 GET /api/socket-health 200 in 23ms
 GET /socket.io?EIO=4&transport=polling&t=2q4c5jz1 404 in 93ms
 GET /api/socket-health 200 in 31ms
 GET /socket.io?EIO=4&transport=polling&t=2q54238i 404 in 97ms
 GET /api/socket-health 200 in 24ms
 GET /socket.io?EIO=4&transport=polling&t=2q5vm90f 404 in 99ms
 GET /api/socket-health 200 in 23ms
 GET /socket.io?EIO=4&transport=polling&t=2q6nb6g0 404 in 90ms
 GET /api/socket-health 200 in 25ms
 GET /socket.io?EIO=4&transport=polling&t=2q7f2ejl 404 in 96ms
 GET /api/socket-health 200 in 24ms
 GET /socket.io?EIO=4&transport=polling&t=2q873ump 404 in 97ms
 GET /api/socket-health 200 in 28ms
 GET /socket.io?EIO=4&transport=polling&t=2q8yxft6 404 in 97ms
 GET /api/socket-health 200 in 21ms
 GET /socket.io?EIO=4&transport=polling&t=2q9qgvx0 404 in 101ms
 GET /api/socket-health 200 in 23ms
 GET /socket.io?EIO=4&transport=polling&t=2qai9qec 404 in 94ms
=== FRIEND REQUEST GET START ===
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
Request type: received User: sayantan2@gmail.com
âœ… Database connected
 GET /api/socket-health 200 in 98ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
 GET /api/auth/session 200 in 105ms
âœ… Current user found: {
  id: new ObjectId('6901f85f42c5d010fa811206'),
  email: 'sayantan2@gmail.com',
  friendRequestsCount: 0,
  sentRequestsCount: 1
}
Processing received requests...
Raw friendRequests: []
Processed receivedRequests: []
Populating sender details...
Final populated requests: []
=== FRIEND REQUEST GET END (received) ===
 GET /api/friends/request?type=received 200 in 121ms
=== FRIEND REQUEST GET START ===
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
Request type: sent User: sayantan2@gmail.com
âœ… Database connected
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
 GET /socket.io?EIO=4&transport=polling&t=2qbcxbb4 404 in 169ms
=== FRIEND REQUEST GET START ===
âœ… Current user found: {
  id: new ObjectId('6901f85f42c5d010fa811206'),
  email: 'sayantan2@gmail.com',
  friendRequestsCount: 0,
  sentRequestsCount: 1
}
Processing sent requests...
Raw sentRequests: [
  {
    from: new ObjectId('6901f85f42c5d010fa811206'),
    fromName: 'sayantan2',
    to: new ObjectId('6905adf16a22b7843b006183'),
    toName: 'sayantan3',
    status: 'pending',
    _id: new ObjectId('6905cdce14ad0d0f020b3985'),
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
Filtering sent request: { status: 'pending', to: new ObjectId('6905adf16a22b7843b006183') }
Mapping sent request: {
  from: new ObjectId('6901f85f42c5d010fa811206'),
  fromName: 'sayantan2',
  to: new ObjectId('6905adf16a22b7843b006183'),
  toName: 'sayantan3',
  status: 'pending',
  _id: new ObjectId('6905cdce14ad0d0f020b3985'),
  createdAt: 2025-11-01T09:07:26.707Z,
  updatedAt: 2025-11-01T09:07:26.707Z
}
Processed sentRequests: [
  {
    id: '6905cdce14ad0d0f020b3985',
    to: {
      id: '6905adf16a22b7843b006183',
      username: 'sayantan3',
      email: '',
      profilePicture: null
    },
    status: 'pending',
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
Populating recipient details...
Looking up recipient: 6905adf16a22b7843b006183
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
Request type: received User: sayantan2@gmail.com
âœ… Database connected
Found recipient: sayantan3
Final populated sent requests: [
  {
    id: '6905cdce14ad0d0f020b3985',
    to: {
      id: '6905adf16a22b7843b006183',
      username: 'sayantan3',
      email: 'sayantan3@gmail.com',
      profilePicture: undefined
    },
    status: 'pending',
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
=== FRIEND REQUEST GET END (sent) ===
 GET /api/friends/request?type=sent 200 in 241ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
âœ… Current user found: {
  id: new ObjectId('6901f85f42c5d010fa811206'),
  email: 'sayantan2@gmail.com',
  friendRequestsCount: 0,
  sentRequestsCount: 1
}
Processing received requests...
Raw friendRequests: []
Processed receivedRequests: []
Populating sender details...
Final populated requests: []
=== FRIEND REQUEST GET END (received) ===
 GET /api/friends/request?type=received 200 in 194ms
=== FRIEND REQUEST GET START ===
 GET /api/random-chat/queue 200 in 321ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
Request type: sent User: sayantan2@gmail.com
âœ… Database connected
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
âœ… Current user found: {
  id: new ObjectId('6901f85f42c5d010fa811206'),
  email: 'sayantan2@gmail.com',
  friendRequestsCount: 0,
  sentRequestsCount: 1
}
Processing sent requests...
Raw sentRequests: [
  {
    from: new ObjectId('6901f85f42c5d010fa811206'),
    fromName: 'sayantan2',
    to: new ObjectId('6905adf16a22b7843b006183'),
    toName: 'sayantan3',
    status: 'pending',
    _id: new ObjectId('6905cdce14ad0d0f020b3985'),
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
Filtering sent request: { status: 'pending', to: new ObjectId('6905adf16a22b7843b006183') }
Mapping sent request: {
  from: new ObjectId('6901f85f42c5d010fa811206'),
  fromName: 'sayantan2',
  to: new ObjectId('6905adf16a22b7843b006183'),
  toName: 'sayantan3',
  status: 'pending',
  _id: new ObjectId('6905cdce14ad0d0f020b3985'),
  createdAt: 2025-11-01T09:07:26.707Z,
  updatedAt: 2025-11-01T09:07:26.707Z
}
Processed sentRequests: [
  {
    id: '6905cdce14ad0d0f020b3985',
    to: {
      id: '6905adf16a22b7843b006183',
      username: 'sayantan3',
      email: '',
      profilePicture: null
    },
    status: 'pending',
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
Populating recipient details...
Looking up recipient: 6905adf16a22b7843b006183
 GET /api/friends 200 in 595ms
Found recipient: sayantan3
Final populated sent requests: [
  {
    id: '6905cdce14ad0d0f020b3985',
    to: {
      id: '6905adf16a22b7843b006183',
      username: 'sayantan3',
      email: 'sayantan3@gmail.com',
      profilePicture: undefined
    },
    status: 'pending',
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
=== FRIEND REQUEST GET END (sent) ===
 GET /api/friends/request?type=sent 200 in 146ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
 GET /api/random-chat/session 200 in 133ms
 POST /api/users/heartbeat 200 in 667ms
 GET /api/friends 200 in 129ms
 POST /api/users/heartbeat 200 in 671ms
 GET /api/users/me 200 in 452ms
 GET /api/socket-health 200 in 29ms
 GET /socket.io?EIO=4&transport=polling&t=2qc1zj28 404 in 140ms
 GET /api/socket-health 200 in 27ms
 GET /socket.io?EIO=4&transport=polling&t=2qctszie 404 in 96ms
 GET /api/socket-health 200 in 24ms
 GET /socket.io?EIO=4&transport=polling&t=2qdlgg4q 404 in 94ms
 GET /api/socket-health 200 in 24ms
 GET /socket.io?EIO=4&transport=polling&t=2qedbln6 404 in 90ms
 GET /api/socket-health 200 in 25ms
 GET /socket.io?EIO=4&transport=polling&t=2qf4v4rx 404 in 97ms
 GET /api/socket-health 200 in 22ms
 GET /socket.io?EIO=4&transport=polling&t=2qfwk1mz 404 in 94ms
 GET /api/socket-health 200 in 33ms
 GET /socket.io?EIO=4&transport=polling&t=2qgoy0z0 404 in 100ms
 GET /api/socket-health 200 in 22ms
 GET /socket.io?EIO=4&transport=polling&t=2qhg1dfi 404 in 93ms
 GET /api/socket-health 200 in 23ms
 GET /socket.io?EIO=4&transport=polling&t=2qi88btr 404 in 92ms
 GET /api/socket-health 200 in 24ms
 GET /socket.io?EIO=4&transport=polling&t=2qizw29u 404 in 95ms
 GET /api/socket-health 200 in 28ms
 GET /socket.io?EIO=4&transport=polling&t=2qjrsrvp 404 in 97ms
 GET /api/socket-health 200 in 23ms
 GET /socket.io?EIO=4&transport=polling&t=2qkjcrhk 404 in 91ms
 GET /api/socket-health 200 in 24ms
 GET /socket.io?EIO=4&transport=polling&t=2qlb5thy 404 in 100ms
 GET /api/socket-health 200 in 23ms
 GET /socket.io?EIO=4&transport=polling&t=2qm2vkm2 404 in 92ms
 GET /api/socket-health 200 in 23ms
 GET /socket.io?EIO=4&transport=polling&t=2qmuuinf 404 in 97ms
 GET /api/socket-health 200 in 30ms
 GET /socket.io?EIO=4&transport=polling&t=2qnmsfcw 404 in 96ms
 GET /api/socket-health 200 in 24ms
 GET /socket.io?EIO=4&transport=polling&t=2qoec2ti 404 in 95ms
 GET /api/socket-health 200 in 22ms
 GET /socket.io?EIO=4&transport=polling&t=2qp5zff1 404 in 92ms
 GET /api/socket-health 200 in 24ms
 GET /socket.io?EIO=4&transport=polling&t=2qpxq715 404 in 95ms
 GET /api/socket-health 200 in 29ms
 GET /socket.io?EIO=4&transport=polling&t=2qqpob8j 404 in 90ms
 GET /api/socket-health 200 in 28ms
 GET /socket.io?EIO=4&transport=polling&t=2qrhgec3 404 in 94ms
 GET /api/socket-health 200 in 23ms
 GET /socket.io?EIO=4&transport=polling&t=2qs90dzw 404 in 94ms
 GET /api/socket-health 200 in 23ms
 GET /socket.io?EIO=4&transport=polling&t=2qt0r1mk 404 in 96ms
 GET /api/socket-health 200 in 22ms
 GET /socket.io?EIO=4&transport=polling&t=2qtsw0lc 404 in 86ms
 GET /api/socket-health 200 in 36ms
 GET /socket.io?EIO=4&transport=polling&t=2qukqxl8 404 in 93ms
 GET /api/socket-health 200 in 22ms
 GET /socket.io?EIO=4&transport=polling&t=2qvc3wf4 404 in 95ms
 GET /api/socket-health 200 in 33ms
 GET /socket.io?EIO=4&transport=polling&t=2qw45crl 404 in 103ms
 GET /api/socket-health 200 in 29ms
 GET /socket.io?EIO=4&transport=polling&t=2qww3qp4 404 in 114ms
 GET /api/socket-health 200 in 29ms
 GET /socket.io?EIO=4&transport=polling&t=2qxntin3 404 in 102ms
 GET /api/socket-health 200 in 35ms
 GET /socket.io?EIO=4&transport=polling&t=2qyfr5yy 404 in 113ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
=== FRIEND REQUEST GET START ===
 GET /api/socket-health 200 in 70ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
Request type: received User: sayantan2@gmail.com
âœ… Database connected
 GET /socket.io?EIO=4&transport=polling&t=2qz8l97h 404 in 96ms
âœ… Current user found: {
  id: new ObjectId('6901f85f42c5d010fa811206'),
  email: 'sayantan2@gmail.com',
  friendRequestsCount: 0,
  sentRequestsCount: 1
}
Processing received requests...
Raw friendRequests: []
Processed receivedRequests: []
Populating sender details...
Final populated requests: []
=== FRIEND REQUEST GET END (received) ===
 GET /api/friends/request?type=received 200 in 510ms
=== FRIEND REQUEST GET START ===
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
Request type: sent User: sayantan2@gmail.com
âœ… Database connected
âœ… Current user found: {
  id: new ObjectId('6901f85f42c5d010fa811206'),
  email: 'sayantan2@gmail.com',
  friendRequestsCount: 0,
  sentRequestsCount: 1
}
Processing sent requests...
Raw sentRequests: [
  {
    from: new ObjectId('6901f85f42c5d010fa811206'),
    fromName: 'sayantan2',
    to: new ObjectId('6905adf16a22b7843b006183'),
    toName: 'sayantan3',
    status: 'pending',
    _id: new ObjectId('6905cdce14ad0d0f020b3985'),
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
Filtering sent request: { status: 'pending', to: new ObjectId('6905adf16a22b7843b006183') }
Mapping sent request: {
  from: new ObjectId('6901f85f42c5d010fa811206'),
  fromName: 'sayantan2',
  to: new ObjectId('6905adf16a22b7843b006183'),
  toName: 'sayantan3',
  status: 'pending',
  _id: new ObjectId('6905cdce14ad0d0f020b3985'),
  createdAt: 2025-11-01T09:07:26.707Z,
  updatedAt: 2025-11-01T09:07:26.707Z
}
Processed sentRequests: [
  {
    id: '6905cdce14ad0d0f020b3985',
    to: {
      id: '6905adf16a22b7843b006183',
      username: 'sayantan3',
      email: '',
      profilePicture: null
    },
    status: 'pending',
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
Populating recipient details...
Looking up recipient: 6905adf16a22b7843b006183
 POST /api/users/heartbeat 200 in 621ms
Found recipient: sayantan3
Final populated sent requests: [
  {
    id: '6905cdce14ad0d0f020b3985',
    to: {
      id: '6905adf16a22b7843b006183',
      username: 'sayantan3',
      email: 'sayantan3@gmail.com',
      profilePicture: undefined
    },
    status: 'pending',
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
=== FRIEND REQUEST GET END (sent) ===
 GET /api/friends/request?type=sent 200 in 133ms
 GET /api/conversations 200 in 863ms
 GET /api/socket-health 200 in 27ms
 GET /socket.io?EIO=4&transport=polling&t=2qzz89yc 404 in 94ms
 GET /api/socket-health 200 in 24ms
 GET /socket.io?EIO=4&transport=polling&t=2r0qwvoz 404 in 87ms
 GET /api/socket-health 200 in 22ms
 GET /socket.io?EIO=4&transport=polling&t=2r1ii2eg 404 in 92ms
 GET /api/socket-health 200 in 22ms
 GET /socket.io?EIO=4&transport=polling&t=2r2abixv 404 in 97ms
 GET /api/socket-health 200 in 28ms
 GET /socket.io?EIO=4&transport=polling&t=2r32a1a8 404 in 94ms
 GET /api/socket-health 200 in 24ms
 GET /socket.io?EIO=4&transport=polling&t=2r3ttlug 404 in 100ms
 GET /api/socket-health 200 in 25ms
 GET /socket.io?EIO=4&transport=polling&t=2r4lp9ho 404 in 104ms
 GET /api/socket-health 200 in 36ms
 GET /socket.io?EIO=4&transport=polling&t=2r5duv6g 404 in 118ms
 GET /api/socket-health 200 in 26ms
 GET /socket.io?EIO=4&transport=polling&t=2r657uif 404 in 124ms
 GET /api/socket-health 200 in 23ms
 GET /socket.io?EIO=4&transport=polling&t=2r6wx1xg 404 in 103ms
 GET /api/socket-health 200 in 28ms
 GET /socket.io?EIO=4&transport=polling&t=2r7opv8l 404 in 94ms
 GET /api/socket-health 200 in 28ms
 GET /socket.io?EIO=4&transport=polling&t=2r8ghric 404 in 119ms
 GET /api/socket-health 200 in 22ms
 GET /socket.io?EIO=4&transport=polling&t=2r98fcuz 404 in 95ms
 GET /api/socket-health 200 in 23ms
 GET /socket.io?EIO=4&transport=polling&t=2r9zwdoj 404 in 175ms
 GET /api/socket-health 200 in 23ms
 GET /socket.io?EIO=4&transport=polling&t=2rarncjv 404 in 95ms
 GET /api/socket-health 200 in 32ms
 GET /socket.io?EIO=4&transport=polling&t=2rbjxmgc 404 in 99ms
 GET /api/socket-health 200 in 25ms
 GET /socket.io?EIO=4&transport=polling&t=2rcbgoh7 404 in 105ms
 GET /api/socket-health 200 in 25ms
 GET /socket.io?EIO=4&transport=polling&t=2rd38nf4 404 in 98ms
 GET /api/socket-health 200 in 24ms
 GET /socket.io?EIO=4&transport=polling&t=2rduvhpl 404 in 106ms
 GET /api/socket-health 200 in 33ms
 GET /socket.io?EIO=4&transport=polling&t=2remxost 404 in 105ms
 GET /api/socket-health 200 in 23ms
 GET /socket.io?EIO=4&transport=polling&t=2rfecfwd 404 in 98ms
 GET /api/socket-health 200 in 33ms
 GET /socket.io?EIO=4&transport=polling&t=2rg6cj8o 404 in 111ms
 GET /api/socket-health 200 in 27ms
 GET /socket.io?EIO=4&transport=polling&t=2rgyarlm 404 in 107ms
 GET /api/socket-health 200 in 23ms
 GET /socket.io?EIO=4&transport=polling&t=2rhq118f 404 in 101ms
 GET /api/socket-health 200 in 37ms
 GET /socket.io?EIO=4&transport=polling&t=2rihtonl 404 in 105ms
 GET /api/socket-health 200 in 30ms
 GET /socket.io?EIO=4&transport=polling&t=2rj9re6g 404 in 102ms
 GET /api/socket-health 200 in 26ms
 GET /socket.io?EIO=4&transport=polling&t=2rk1d86e 404 in 97ms
 GET /api/socket-health 200 in 33ms
 GET /socket.io?EIO=4&transport=polling&t=2rktc3g2 404 in 125ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
=== FRIEND REQUEST GET START ===
 GET /api/socket-health 200 in 109ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
Request type: received User: sayantan2@gmail.com
âœ… Database connected
âœ… Current user found: {
  id: new ObjectId('6901f85f42c5d010fa811206'),
  email: 'sayantan2@gmail.com',
  friendRequestsCount: 0,
  sentRequestsCount: 1
}
Processing received requests...
Raw friendRequests: []
Processed receivedRequests: []
Populating sender details...
Final populated requests: []
=== FRIEND REQUEST GET END (received) ===
 GET /api/friends/request?type=received 200 in 237ms
=== FRIEND REQUEST GET START ===
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
Request type: sent User: sayantan2@gmail.com
âœ… Database connected
 GET /socket.io?EIO=4&transport=polling&t=2rlnxfu3 404 in 148ms
 GET /api/friends 200 in 285ms
âœ… Current user found: {
  id: new ObjectId('6901f85f42c5d010fa811206'),
  email: 'sayantan2@gmail.com',
  friendRequestsCount: 0,
  sentRequestsCount: 1
}
Processing sent requests...
Raw sentRequests: [
  {
    from: new ObjectId('6901f85f42c5d010fa811206'),
    fromName: 'sayantan2',
    to: new ObjectId('6905adf16a22b7843b006183'),
    toName: 'sayantan3',
    status: 'pending',
    _id: new ObjectId('6905cdce14ad0d0f020b3985'),
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
Filtering sent request: { status: 'pending', to: new ObjectId('6905adf16a22b7843b006183') }
Mapping sent request: {
  from: new ObjectId('6901f85f42c5d010fa811206'),
  fromName: 'sayantan2',
  to: new ObjectId('6905adf16a22b7843b006183'),
  toName: 'sayantan3',
  status: 'pending',
  _id: new ObjectId('6905cdce14ad0d0f020b3985'),
  createdAt: 2025-11-01T09:07:26.707Z,
  updatedAt: 2025-11-01T09:07:26.707Z
}
Processed sentRequests: [
  {
    id: '6905cdce14ad0d0f020b3985',
    to: {
      id: '6905adf16a22b7843b006183',
      username: 'sayantan3',
      email: '',
      profilePicture: null
    },
    status: 'pending',
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
Populating recipient details...
Looking up recipient: 6905adf16a22b7843b006183
Found recipient: sayantan3
Final populated sent requests: [
  {
    id: '6905cdce14ad0d0f020b3985',
    to: {
      id: '6905adf16a22b7843b006183',
      username: 'sayantan3',
      email: 'sayantan3@gmail.com',
      profilePicture: undefined
    },
    status: 'pending',
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
=== FRIEND REQUEST GET END (sent) ===
 GET /api/friends/request?type=sent 200 in 127ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
 GET /api/socket-health 200 in 63ms
 GET /socket.io?EIO=4&transport=polling&t=2rmdqcim 404 in 124ms
 POST /api/users/heartbeat 200 in 288ms
 GET /api/socket-health 200 in 43ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
 GET /socket.io?EIO=4&transport=polling&t=2rn50yu0 404 in 103ms
 GET /api/conversations 200 in 180ms
 GET /api/socket-health 200 in 25ms
 GET /socket.io?EIO=4&transport=polling&t=2rnw0q72 404 in 105ms
 GET /api/socket-health 200 in 22ms
 GET /socket.io?EIO=4&transport=polling&t=2ronwnnz 404 in 101ms
 GET /api/socket-health 200 in 24ms
 GET /socket.io?EIO=4&transport=polling&t=2rpfstre 404 in 99ms
 GET /api/socket-health 200 in 31ms
 GET /socket.io?EIO=4&transport=polling&t=2rq7tyer 404 in 103ms
 GET /api/socket-health 200 in 23ms
 GET /socket.io?EIO=4&transport=polling&t=2rqz8r5d 404 in 99ms
 GET /api/socket-health 200 in 25ms
 GET /socket.io?EIO=4&transport=polling&t=2rrr5fek 404 in 100ms
 GET /api/socket-health 200 in 25ms
 GET /socket.io?EIO=4&transport=polling&t=2rsiv3un 404 in 92ms
 GET /api/socket-health 200 in 36ms
 GET /socket.io?EIO=4&transport=polling&t=2rtaz45c 404 in 102ms
 GET /api/socket-health 200 in 28ms
 GET /socket.io?EIO=4&transport=polling&t=2ru2mede 404 in 111ms
 GET /api/socket-health 200 in 24ms
 GET /socket.io?EIO=4&transport=polling&t=2ruu98rw 404 in 97ms
 GET /api/socket-health 200 in 32ms
 GET /socket.io?EIO=4&transport=polling&t=2rvm6gyo 404 in 99ms
 GET /api/socket-health 200 in 22ms
 GET /socket.io?EIO=4&transport=polling&t=2rwdmzh4 404 in 91ms
 GET /api/socket-health 200 in 34ms
 GET /socket.io?EIO=4&transport=polling&t=2rx5obny 404 in 92ms
 GET /api/socket-health 200 in 23ms
 GET /socket.io?EIO=4&transport=polling&t=2rxx6rae 404 in 96ms
 GET /api/socket-health 200 in 27ms
 GET /socket.io?EIO=4&transport=polling&t=2ryp4wqp 404 in 102ms
 GET /api/socket-health 200 in 24ms
 GET /socket.io?EIO=4&transport=polling&t=2rzgmc5v 404 in 102ms
 GET /api/socket-health 200 in 30ms
 GET /socket.io?EIO=4&transport=polling&t=2s08rmom 404 in 96ms
 GET /api/socket-health 200 in 24ms
 GET /socket.io?EIO=4&transport=polling&t=2s10aplt 404 in 101ms
 GET /api/socket-health 200 in 25ms
 GET /socket.io?EIO=4&transport=polling&t=2s1s1ocs 404 in 98ms
 GET /api/socket-health 200 in 22ms
 GET /socket.io?EIO=4&transport=polling&t=2s2jp8av 404 in 94ms
 GET /api/socket-health 200 in 24ms
 GET /socket.io?EIO=4&transport=polling&t=2s3bkcue 404 in 97ms
 GET /api/socket-health 200 in 30ms
 GET /socket.io?EIO=4&transport=polling&t=2s43g8jz 404 in 94ms
 GET /api/socket-health 200 in 24ms
 GET /socket.io?EIO=4&transport=polling&t=2s4v4bbz 404 in 99ms
 GET /api/socket-health 200 in 24ms
 GET /socket.io?EIO=4&transport=polling&t=2s5mulgf 404 in 95ms
 GET /api/socket-health 200 in 25ms
 GET /socket.io?EIO=4&transport=polling&t=2s6eq4xw 404 in 101ms
 GET /api/socket-health 200 in 29ms
 GET /socket.io?EIO=4&transport=polling&t=2s76h6k0 404 in 91ms
 GET /api/socket-health 200 in 24ms
 GET /socket.io?EIO=4&transport=polling&t=2s7yfq0j 404 in 95ms
 GET /api/socket-health 200 in 24ms
 GET /socket.io?EIO=4&transport=polling&t=2s8pvd4z 404 in 95ms
=== FRIEND REQUEST GET START ===
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
 GET /api/socket-health 200 in 80ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
Request type: received User: sayantan2@gmail.com
âœ… Database connected
 GET /socket.io?EIO=4&transport=polling&t=2s9jcdh9 404 in 177ms
 POST /api/users/heartbeat 200 in 317ms
âœ… Current user found: {
  id: new ObjectId('6901f85f42c5d010fa811206'),
  email: 'sayantan2@gmail.com',
  friendRequestsCount: 0,
  sentRequestsCount: 1
}
Processing received requests...
Raw friendRequests: []
Processed receivedRequests: []
Populating sender details...
Final populated requests: []
=== FRIEND REQUEST GET END (received) ===
 GET /api/friends/request?type=received 200 in 766ms
=== FRIEND REQUEST GET START ===
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
Request type: sent User: sayantan2@gmail.com
âœ… Database connected
âœ… Current user found: {
  id: new ObjectId('6901f85f42c5d010fa811206'),
  email: 'sayantan2@gmail.com',
  friendRequestsCount: 0,
  sentRequestsCount: 1
}
Processing sent requests...
Raw sentRequests: [
  {
    from: new ObjectId('6901f85f42c5d010fa811206'),
    fromName: 'sayantan2',
    to: new ObjectId('6905adf16a22b7843b006183'),
    toName: 'sayantan3',
    status: 'pending',
    _id: new ObjectId('6905cdce14ad0d0f020b3985'),
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
Filtering sent request: { status: 'pending', to: new ObjectId('6905adf16a22b7843b006183') }
Mapping sent request: {
  from: new ObjectId('6901f85f42c5d010fa811206'),
  fromName: 'sayantan2',
  to: new ObjectId('6905adf16a22b7843b006183'),
  toName: 'sayantan3',
  status: 'pending',
  _id: new ObjectId('6905cdce14ad0d0f020b3985'),
  createdAt: 2025-11-01T09:07:26.707Z,
  updatedAt: 2025-11-01T09:07:26.707Z
}
Processed sentRequests: [
  {
    id: '6905cdce14ad0d0f020b3985',
    to: {
      id: '6905adf16a22b7843b006183',
      username: 'sayantan3',
      email: '',
      profilePicture: null
    },
    status: 'pending',
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
Populating recipient details...
Looking up recipient: 6905adf16a22b7843b006183
Found recipient: sayantan3
Final populated sent requests: [
  {
    id: '6905cdce14ad0d0f020b3985',
    to: {
      id: '6905adf16a22b7843b006183',
      username: 'sayantan3',
      email: 'sayantan3@gmail.com',
      profilePicture: undefined
    },
    status: 'pending',
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
=== FRIEND REQUEST GET END (sent) ===
 GET /api/friends/request?type=sent 200 in 155ms
 GET /api/socket-health 200 in 34ms
 GET /socket.io?EIO=4&transport=polling&t=2sa9txsp 404 in 112ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
 GET /api/socket-health 200 in 86ms
 GET /socket.io?EIO=4&transport=polling&t=2sb37hu1 404 in 110ms
 GET /api/conversations 200 in 235ms
 GET /api/socket-health 200 in 30ms
 GET /socket.io?EIO=4&transport=polling&t=2sbtbuwu 404 in 130ms
 GET /api/socket-health 200 in 21ms
 GET /socket.io?EIO=4&transport=polling&t=2scktfc3 404 in 92ms
 GET /api/socket-health 200 in 22ms
 GET /socket.io?EIO=4&transport=polling&t=2sdcl1qh 404 in 86ms
 GET /api/socket-health 200 in 22ms
 GET /socket.io?EIO=4&transport=polling&t=2se4d3lo 404 in 87ms
 GET /api/socket-health 200 in 21ms
 GET /socket.io?EIO=4&transport=polling&t=2sewct6s 404 in 94ms
 GET /api/socket-health 200 in 22ms
 GET /socket.io?EIO=4&transport=polling&t=2sfo33q1 404 in 99ms
 GET /api/socket-health 200 in 22ms
 GET /socket.io?EIO=4&transport=polling&t=2sgfmize 404 in 94ms
 GET /api/socket-health 200 in 24ms
 GET /socket.io?EIO=4&transport=polling&t=2sh7sg2h 404 in 97ms
 GET /api/socket-health 200 in 29ms
 GET /socket.io?EIO=4&transport=polling&t=2shzmf99 404 in 100ms
 GET /api/socket-health 200 in 24ms
 GET /socket.io?EIO=4&transport=polling&t=2siqy6sw 404 in 154ms
 GET /api/socket-health 200 in 26ms
 GET /socket.io?EIO=4&transport=polling&t=2sjixgdh 404 in 132ms
 GET /api/socket-health 200 in 24ms
 GET /socket.io?EIO=4&transport=polling&t=2skaogau 404 in 93ms
 GET /api/socket-health 200 in 23ms
 GET /socket.io?EIO=4&transport=polling&t=2sl2j17h 404 in 90ms
 GET /api/socket-health 200 in 29ms
 GET /socket.io?EIO=4&transport=polling&t=2slugdfz 404 in 115ms
 GET /api/socket-health 200 in 23ms
 GET /socket.io?EIO=4&transport=polling&t=2smm4iwg 404 in 106ms
 GET /api/socket-health 200 in 29ms
 GET /socket.io?EIO=4&transport=polling&t=2sne7afi 404 in 109ms
 GET /api/socket-health 200 in 21ms
 GET /socket.io?EIO=4&transport=polling&t=2so5fq66 404 in 96ms
 GET /api/socket-health 200 in 33ms
 GET /socket.io?EIO=4&transport=polling&t=2soxqejn 404 in 113ms
 GET /api/socket-health 200 in 23ms
 GET /socket.io?EIO=4&transport=polling&t=2spp7tm5 404 in 103ms
 GET /api/socket-health 200 in 22ms
 GET /socket.io?EIO=4&transport=polling&t=2sqgu8tf 404 in 95ms
 GET /api/socket-health 200 in 23ms
 GET /socket.io?EIO=4&transport=polling&t=2sr8loow 404 in 104ms
 GET /api/socket-health 200 in 25ms
 GET /socket.io?EIO=4&transport=polling&t=2ss0d388 404 in 100ms
 GET /api/socket-health 200 in 27ms
 GET /socket.io?EIO=4&transport=polling&t=2sss5fb8 404 in 94ms
 GET /api/socket-health 200 in 25ms
 GET /socket.io?EIO=4&transport=polling&t=2stjxagg 404 in 98ms
 GET /api/socket-health 200 in 24ms
 GET /socket.io?EIO=4&transport=polling&t=2subqz36 404 in 99ms
 GET /api/socket-health 200 in 25ms
 GET /socket.io?EIO=4&transport=polling&t=2sv3jgc7 404 in 99ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
=== FRIEND REQUEST GET START ===
 GET /api/socket-health 200 in 58ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
Request type: received User: sayantan2@gmail.com
âœ… Database connected
âœ… Current user found: {
  id: new ObjectId('6901f85f42c5d010fa811206'),
  email: 'sayantan2@gmail.com',
  friendRequestsCount: 0,
  sentRequestsCount: 1
}
Processing received requests...
Raw friendRequests: []
Processed receivedRequests: []
Populating sender details...
Final populated requests: []
=== FRIEND REQUEST GET END (received) ===
 GET /api/friends/request?type=received 200 in 159ms
=== FRIEND REQUEST GET START ===
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
Request type: sent User: sayantan2@gmail.com
âœ… Database connected
 GET /socket.io?EIO=4&transport=polling&t=2svx1mu7 404 in 124ms
 GET /api/friends 200 in 214ms
âœ… Current user found: {
  id: new ObjectId('6901f85f42c5d010fa811206'),
  email: 'sayantan2@gmail.com',
  friendRequestsCount: 0,
  sentRequestsCount: 1
}
Processing sent requests...
Raw sentRequests: [
  {
    from: new ObjectId('6901f85f42c5d010fa811206'),
    fromName: 'sayantan2',
    to: new ObjectId('6905adf16a22b7843b006183'),
    toName: 'sayantan3',
    status: 'pending',
    _id: new ObjectId('6905cdce14ad0d0f020b3985'),
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
Filtering sent request: { status: 'pending', to: new ObjectId('6905adf16a22b7843b006183') }
Mapping sent request: {
  from: new ObjectId('6901f85f42c5d010fa811206'),
  fromName: 'sayantan2',
  to: new ObjectId('6905adf16a22b7843b006183'),
  toName: 'sayantan3',
  status: 'pending',
  _id: new ObjectId('6905cdce14ad0d0f020b3985'),
  createdAt: 2025-11-01T09:07:26.707Z,
  updatedAt: 2025-11-01T09:07:26.707Z
}
Processed sentRequests: [
  {
    id: '6905cdce14ad0d0f020b3985',
    to: {
      id: '6905adf16a22b7843b006183',
      username: 'sayantan3',
      email: '',
      profilePicture: null
    },
    status: 'pending',
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
Populating recipient details...
Looking up recipient: 6905adf16a22b7843b006183
Found recipient: sayantan3
Final populated sent requests: [
  {
    id: '6905cdce14ad0d0f020b3985',
    to: {
      id: '6905adf16a22b7843b006183',
      username: 'sayantan3',
      email: 'sayantan3@gmail.com',
      profilePicture: undefined
    },
    status: 'pending',
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
=== FRIEND REQUEST GET END (sent) ===
 GET /api/friends/request?type=sent 200 in 122ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
 GET /api/socket-health 200 in 48ms
 GET /socket.io?EIO=4&transport=polling&t=2swnqf6m 404 in 99ms
 POST /api/users/heartbeat 200 in 245ms
 GET /api/socket-health 200 in 23ms
 GET /socket.io?EIO=4&transport=polling&t=2sxerwcl 404 in 99ms
 GET /api/socket-health 200 in 33ms
 GET /socket.io?EIO=4&transport=polling&t=2sy6t6w6 404 in 98ms
 GET /api/socket-health 200 in 35ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
 GET /socket.io?EIO=4&transport=polling&t=2syz1de3 404 in 104ms
 GET /api/conversations 200 in 182ms
 GET /api/socket-health 200 in 32ms
 GET /socket.io?EIO=4&transport=polling&t=2szqomi6 404 in 98ms
 GET /api/socket-health 200 in 22ms
 GET /socket.io?EIO=4&transport=polling&t=2t0i1e07 404 in 98ms
 GET /api/socket-health 200 in 24ms
 GET /socket.io?EIO=4&transport=polling&t=2t1a2qdm 404 in 95ms
 GET /api/socket-health 200 in 23ms
 GET /socket.io?EIO=4&transport=polling&t=2t21s59d 404 in 100ms
 GET /api/socket-health 200 in 23ms
 GET /socket.io?EIO=4&transport=polling&t=2t2taki8 404 in 88ms
 GET /api/socket-health 200 in 28ms
 GET /socket.io?EIO=4&transport=polling&t=2t3lash6 404 in 87ms
 GET /api/socket-health 200 in 23ms
 GET /socket.io?EIO=4&transport=polling&t=2t4cw8lg 404 in 93ms
 GET /api/socket-health 200 in 22ms
 GET /socket.io?EIO=4&transport=polling&t=2t54mzwo 404 in 93ms
 GET /api/socket-health 200 in 24ms
 GET /socket.io?EIO=4&transport=polling&t=2t5wdlkf 404 in 92ms
 GET /api/socket-health 200 in 22ms
 GET /socket.io?EIO=4&transport=polling&t=2t6o8eu9 404 in 86ms
 GET /api/socket-health 200 in 27ms
 GET /socket.io?EIO=4&transport=polling&t=2t7g83lj 404 in 86ms
 GET /api/socket-health 200 in 21ms
 GET /socket.io?EIO=4&transport=polling&t=2t87jk5z 404 in 89ms
 GET /api/socket-health 200 in 24ms
 GET /socket.io?EIO=4&transport=polling&t=2t8zshn3 404 in 91ms
 GET /api/socket-health 200 in 22ms
 GET /socket.io?EIO=4&transport=polling&t=2t9rbpfm 404 in 95ms
 GET /api/socket-health 200 in 28ms
 GET /socket.io?EIO=4&transport=polling&t=2tajcs6m 404 in 97ms
 GET /api/socket-health 200 in 27ms
 GET /socket.io?EIO=4&transport=polling&t=2tbb24e8 404 in 96ms
 GET /api/socket-health 200 in 24ms
 GET /socket.io?EIO=4&transport=polling&t=2tc2u6y2 404 in 95ms
 GET /api/socket-health 200 in 24ms
 GET /socket.io?EIO=4&transport=polling&t=2tcunvjv 404 in 93ms
 GET /api/socket-health 200 in 24ms
 GET /socket.io?EIO=4&transport=polling&t=2tdmgoq3 404 in 99ms
 GET /api/socket-health 200 in 33ms
 GET /socket.io?EIO=4&transport=polling&t=2tee8zhy 404 in 127ms
 GET /api/socket-health 200 in 27ms
 GET /socket.io?EIO=4&transport=polling&t=2tf63egh 404 in 120ms
 GET /api/socket-health 200 in 24ms
 GET /socket.io?EIO=4&transport=polling&t=2tfxtamj 404 in 114ms
 GET /api/socket-health 200 in 32ms
 GET /socket.io?EIO=4&transport=polling&t=2tgps26q 404 in 116ms
 GET /api/socket-health 200 in 22ms
 GET /socket.io?EIO=4&transport=polling&t=2thh8ntv 404 in 91ms
 GET /api/socket-health 200 in 23ms
 GET /socket.io?EIO=4&transport=polling&t=2ti8zt5p 404 in 92ms
 GET /api/socket-health 200 in 24ms
 GET /socket.io?EIO=4&transport=polling&t=2tj0ox24 404 in 94ms
 GET /api/socket-health 200 in 50ms
=== FRIEND REQUEST GET START ===
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
Request type: received User: sayantan2@gmail.com
âœ… Database connected
 GET /socket.io?EIO=4&transport=polling&t=2tjtc8rg 404 in 98ms
 POST /api/users/heartbeat 200 in 251ms
âœ… Current user found: {
  id: new ObjectId('6901f85f42c5d010fa811206'),
  email: 'sayantan2@gmail.com',
  friendRequestsCount: 0,
  sentRequestsCount: 1
}
Processing received requests...
Raw friendRequests: []
Processed receivedRequests: []
Populating sender details...
Final populated requests: []
=== FRIEND REQUEST GET END (received) ===
 GET /api/friends/request?type=received 200 in 467ms
=== FRIEND REQUEST GET START ===
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
Request type: sent User: sayantan2@gmail.com
âœ… Database connected
âœ… Current user found: {
  id: new ObjectId('6901f85f42c5d010fa811206'),
  email: 'sayantan2@gmail.com',
  friendRequestsCount: 0,
  sentRequestsCount: 1
}
Processing sent requests...
Raw sentRequests: [
  {
    from: new ObjectId('6901f85f42c5d010fa811206'),
    fromName: 'sayantan2',
    to: new ObjectId('6905adf16a22b7843b006183'),
    toName: 'sayantan3',
    status: 'pending',
    _id: new ObjectId('6905cdce14ad0d0f020b3985'),
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
Filtering sent request: { status: 'pending', to: new ObjectId('6905adf16a22b7843b006183') }
Mapping sent request: {
  from: new ObjectId('6901f85f42c5d010fa811206'),
  fromName: 'sayantan2',
  to: new ObjectId('6905adf16a22b7843b006183'),
  toName: 'sayantan3',
  status: 'pending',
  _id: new ObjectId('6905cdce14ad0d0f020b3985'),
  createdAt: 2025-11-01T09:07:26.707Z,
  updatedAt: 2025-11-01T09:07:26.707Z
}
Processed sentRequests: [
  {
    id: '6905cdce14ad0d0f020b3985',
    to: {
      id: '6905adf16a22b7843b006183',
      username: 'sayantan3',
      email: '',
      profilePicture: null
    },
    status: 'pending',
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
Populating recipient details...
Looking up recipient: 6905adf16a22b7843b006183
Found recipient: sayantan3
Final populated sent requests: [
  {
    id: '6905cdce14ad0d0f020b3985',
    to: {
      id: '6905adf16a22b7843b006183',
      username: 'sayantan3',
      email: 'sayantan3@gmail.com',
      profilePicture: undefined
    },
    status: 'pending',
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
=== FRIEND REQUEST GET END (sent) ===
 GET /api/friends/request?type=sent 200 in 109ms
 GET /api/socket-health 200 in 27ms
 GET /socket.io?EIO=4&transport=polling&t=2tkkfev5 404 in 100ms
 GET /api/socket-health 200 in 25ms
 GET /socket.io?EIO=4&transport=polling&t=2tlc4v2i 404 in 98ms
 GET /api/socket-health 200 in 23ms
 GET /socket.io?EIO=4&transport=polling&t=2tm3r595 404 in 90ms
 GET /api/socket-health 200 in 46ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
 GET /socket.io?EIO=4&transport=polling&t=2tmw7ca6 404 in 109ms
 GET /api/conversations 200 in 197ms
 GET /api/socket-health 200 in 22ms
 GET /socket.io?EIO=4&transport=polling&t=2tnnblwl 404 in 97ms
 GET /api/socket-health 200 in 25ms
 GET /socket.io?EIO=4&transport=polling&t=2tof63hz 404 in 103ms
 GET /api/socket-health 200 in 22ms
 GET /socket.io?EIO=4&transport=polling&t=2tp6vdw5 404 in 96ms
 GET /api/socket-health 200 in 31ms
 GET /socket.io?EIO=4&transport=polling&t=2tpyu6k3 404 in 97ms
 GET /api/socket-health 200 in 27ms
 GET /socket.io?EIO=4&transport=polling&t=2tqqg7gk 404 in 97ms
 GET /api/socket-health 200 in 24ms
 GET /socket.io?EIO=4&transport=polling&t=2trig1cw 404 in 103ms
 GET /api/socket-health 200 in 24ms
 GET /socket.io?EIO=4&transport=polling&t=2tsa5pht 404 in 96ms
 GET /api/socket-health 200 in 33ms
 GET /socket.io?EIO=4&transport=polling&t=2tt2683e 404 in 102ms
 GET /api/socket-health 200 in 24ms
 GET /socket.io?EIO=4&transport=polling&t=2tttp23f 404 in 98ms
 GET /api/socket-health 200 in 23ms
 GET /socket.io?EIO=4&transport=polling&t=2tulj6mx 404 in 93ms
 GET /api/socket-health 200 in 24ms
 GET /socket.io?EIO=4&transport=polling&t=2tvdaavd 404 in 107ms
 GET /api/socket-health 200 in 29ms
 GET /socket.io?EIO=4&transport=polling&t=2tw549ql 404 in 108ms
 GET /api/socket-health 200 in 29ms
 GET /socket.io?EIO=4&transport=polling&t=2twwsyw6 404 in 105ms
 GET /api/socket-health 200 in 23ms
 GET /socket.io?EIO=4&transport=polling&t=2txoe20d 404 in 102ms
 GET /api/socket-health 200 in 22ms
 GET /socket.io?EIO=4&transport=polling&t=2tygbjl2 404 in 96ms
 GET /api/socket-health 200 in 27ms
 GET /socket.io?EIO=4&transport=polling&t=2tz8a1sb 404 in 106ms
 GET /api/socket-health 200 in 33ms
 GET /socket.io?EIO=4&transport=polling&t=2u00acn3 404 in 85ms
 GET /api/socket-health 200 in 23ms
 GET /socket.io?EIO=4&transport=polling&t=2u0rlq7j 404 in 95ms
 GET /api/socket-health 200 in 21ms
 GET /socket.io?EIO=4&transport=polling&t=2u1jf7cu 404 in 96ms
 GET /api/socket-health 200 in 24ms
 GET /socket.io?EIO=4&transport=polling&t=2u2b7fu2 404 in 97ms
 GET /api/socket-health 200 in 22ms
 GET /socket.io?EIO=4&transport=polling&t=2u32v3mc 404 in 93ms
 GET /api/socket-health 200 in 30ms
 GET /socket.io?EIO=4&transport=polling&t=2u3v0mdc 404 in 86ms
 GET /api/socket-health 200 in 24ms
 GET /socket.io?EIO=4&transport=polling&t=2u4mk03p 404 in 97ms
 GET /api/socket-health 200 in 30ms
 GET /socket.io?EIO=4&transport=polling&t=2u5ekdji 404 in 106ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
=== FRIEND REQUEST GET START ===
 GET /api/socket-health 200 in 85ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
Request type: received User: sayantan2@gmail.com
âœ… Database connected
âœ… Current user found: {
  id: new ObjectId('6901f85f42c5d010fa811206'),
  email: 'sayantan2@gmail.com',
  friendRequestsCount: 0,
  sentRequestsCount: 1
}
Processing received requests...
Raw friendRequests: []
Processed receivedRequests: []
Populating sender details...
Final populated requests: []
=== FRIEND REQUEST GET END (received) ===
 GET /api/friends/request?type=received 200 in 185ms
=== FRIEND REQUEST GET START ===
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
Request type: sent User: sayantan2@gmail.com
âœ… Database connected
 GET /api/friends 200 in 234ms
 GET /socket.io?EIO=4&transport=polling&t=2u688wqq 404 in 141ms
âœ… Current user found: {
  id: new ObjectId('6901f85f42c5d010fa811206'),
  email: 'sayantan2@gmail.com',
  friendRequestsCount: 0,
  sentRequestsCount: 1
}
Processing sent requests...
Raw sentRequests: [
  {
    from: new ObjectId('6901f85f42c5d010fa811206'),
    fromName: 'sayantan2',
    to: new ObjectId('6905adf16a22b7843b006183'),
    toName: 'sayantan3',
    status: 'pending',
    _id: new ObjectId('6905cdce14ad0d0f020b3985'),
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
Filtering sent request: { status: 'pending', to: new ObjectId('6905adf16a22b7843b006183') }
Mapping sent request: {
  from: new ObjectId('6901f85f42c5d010fa811206'),
  fromName: 'sayantan2',
  to: new ObjectId('6905adf16a22b7843b006183'),
  toName: 'sayantan3',
  status: 'pending',
  _id: new ObjectId('6905cdce14ad0d0f020b3985'),
  createdAt: 2025-11-01T09:07:26.707Z,
  updatedAt: 2025-11-01T09:07:26.707Z
}
Processed sentRequests: [
  {
    id: '6905cdce14ad0d0f020b3985',
    to: {
      id: '6905adf16a22b7843b006183',
      username: 'sayantan3',
      email: '',
      profilePicture: null
    },
    status: 'pending',
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
Populating recipient details...
Looking up recipient: 6905adf16a22b7843b006183
Found recipient: sayantan3
Final populated sent requests: [
  {
    id: '6905cdce14ad0d0f020b3985',
    to: {
      id: '6905adf16a22b7843b006183',
      username: 'sayantan3',
      email: 'sayantan3@gmail.com',
      profilePicture: undefined
    },
    status: 'pending',
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
=== FRIEND REQUEST GET END (sent) ===
 GET /api/friends/request?type=sent 200 in 125ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
 GET /api/socket-health 200 in 57ms
 GET /socket.io?EIO=4&transport=polling&t=2u6ypi1w 404 in 140ms
 POST /api/users/heartbeat 200 in 291ms
 GET /api/socket-health 200 in 21ms
 GET /socket.io?EIO=4&transport=polling&t=2u7pis9h 404 in 104ms
 GET /api/socket-health 200 in 24ms
 GET /socket.io?EIO=4&transport=polling&t=2u8hdwyo 404 in 92ms
 GET /api/socket-health 200 in 21ms
 GET /socket.io?EIO=4&transport=polling&t=2u98z8ua 404 in 101ms
 GET /api/socket-health 200 in 24ms
 GET /socket.io?EIO=4&transport=polling&t=2ua0zz3q 404 in 91ms
 GET /api/socket-health 200 in 49ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
 GET /socket.io?EIO=4&transport=polling&t=2uatcxhh 404 in 102ms
 GET /api/conversations 200 in 185ms
 GET /api/socket-health 200 in 29ms
 GET /socket.io?EIO=4&transport=polling&t=2ubkp0iv 404 in 122ms
 GET /api/socket-health 200 in 23ms
 GET /socket.io?EIO=4&transport=polling&t=2ucc973q 404 in 110ms
 GET /api/socket-health 200 in 32ms
 GET /socket.io?EIO=4&transport=polling&t=2ud481im 404 in 110ms
 GET /api/socket-health 200 in 26ms
 GET /socket.io?EIO=4&transport=polling&t=2udvs2n9 404 in 100ms
 GET /api/socket-health 200 in 34ms
 GET /socket.io?EIO=4&transport=polling&t=2uenpfhg 404 in 108ms
 GET /api/socket-health 200 in 27ms
 GET /socket.io?EIO=4&transport=polling&t=2uffmlxv 404 in 332ms
 GET /api/socket-health 200 in 33ms
 GET /socket.io?EIO=4&transport=polling&t=2ug78thr 404 in 112ms
 GET /api/socket-health 200 in 29ms
 GET /socket.io?EIO=4&transport=polling&t=2ugyxijn 404 in 114ms
 GET /api/socket-health 200 in 33ms
 GET /socket.io?EIO=4&transport=polling&t=2uhqwc0d 404 in 103ms
 GET /api/socket-health 200 in 27ms
 GET /socket.io?EIO=4&transport=polling&t=2uiiku8m 404 in 119ms
 GET /api/socket-health 200 in 29ms
 GET /socket.io?EIO=4&transport=polling&t=2ujadsbb 404 in 98ms
 GET /api/socket-health 200 in 28ms
 GET /socket.io?EIO=4&transport=polling&t=2uk20axd 404 in 97ms
 GET /api/socket-health 200 in 26ms
 GET /socket.io?EIO=4&transport=polling&t=2uktswie 404 in 108ms
 GET /api/socket-health 200 in 27ms
 GET /socket.io?EIO=4&transport=polling&t=2ullusdz 404 in 114ms
 GET /api/socket-health 200 in 27ms
 GET /socket.io?EIO=4&transport=polling&t=2umdndir 404 in 105ms
 GET /api/socket-health 200 in 26ms
 GET /socket.io?EIO=4&transport=polling&t=2un57jll 404 in 112ms
 GET /api/socket-health 200 in 24ms
 GET /socket.io?EIO=4&transport=polling&t=2unx0vj9 404 in 92ms
 GET /api/socket-health 200 in 29ms
 GET /socket.io?EIO=4&transport=polling&t=2uoot0xa 404 in 95ms
 GET /api/socket-health 200 in 25ms
 GET /socket.io?EIO=4&transport=polling&t=2upgejmq 404 in 91ms
 GET /api/socket-health 200 in 23ms
 GET /socket.io?EIO=4&transport=polling&t=2uq8f4qm 404 in 91ms
 GET /api/socket-health 200 in 32ms
 GET /socket.io?EIO=4&transport=polling&t=2ur0f4qs 404 in 97ms
 GET /api/socket-health 200 in 23ms
 GET /socket.io?EIO=4&transport=polling&t=2urry54w 404 in 105ms
 GET /api/socket-health 200 in 32ms
 GET /socket.io?EIO=4&transport=polling&t=2usjsepb 404 in 99ms
 GET /api/socket-health 200 in 25ms
 GET /socket.io?EIO=4&transport=polling&t=2utbfvw4 404 in 106ms
 GET /api/socket-health 200 in 90ms
=== FRIEND REQUEST GET START ===
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
Request type: received User: sayantan2@gmail.com
âœ… Database connected
âœ… Current user found: {
  id: new ObjectId('6901f85f42c5d010fa811206'),
  email: 'sayantan2@gmail.com',
  friendRequestsCount: 0,
  sentRequestsCount: 1
}
Processing received requests...
Raw friendRequests: []
Processed receivedRequests: []
Populating sender details...
Final populated requests: []
=== FRIEND REQUEST GET END (received) ===
 GET /api/friends/request?type=received 200 in 208ms
=== FRIEND REQUEST GET START ===
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
Request type: sent User: sayantan2@gmail.com
âœ… Database connected
 GET /socket.io?EIO=4&transport=polling&t=2uu5hiaj 404 in 146ms
âœ… Current user found: {
  id: new ObjectId('6901f85f42c5d010fa811206'),
  email: 'sayantan2@gmail.com',
  friendRequestsCount: 0,
  sentRequestsCount: 1
}
Processing sent requests...
Raw sentRequests: [
  {
    from: new ObjectId('6901f85f42c5d010fa811206'),
    fromName: 'sayantan2',
    to: new ObjectId('6905adf16a22b7843b006183'),
    toName: 'sayantan3',
    status: 'pending',
    _id: new ObjectId('6905cdce14ad0d0f020b3985'),
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
Filtering sent request: { status: 'pending', to: new ObjectId('6905adf16a22b7843b006183') }
Mapping sent request: {
  from: new ObjectId('6901f85f42c5d010fa811206'),
  fromName: 'sayantan2',
  to: new ObjectId('6905adf16a22b7843b006183'),
  toName: 'sayantan3',
  status: 'pending',
  _id: new ObjectId('6905cdce14ad0d0f020b3985'),
  createdAt: 2025-11-01T09:07:26.707Z,
  updatedAt: 2025-11-01T09:07:26.707Z
}
Processed sentRequests: [
  {
    id: '6905cdce14ad0d0f020b3985',
    to: {
      id: '6905adf16a22b7843b006183',
      username: 'sayantan3',
      email: '',
      profilePicture: null
    },
    status: 'pending',
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
Populating recipient details...
Looking up recipient: 6905adf16a22b7843b006183
Found recipient: sayantan3
Final populated sent requests: [
  {
    id: '6905cdce14ad0d0f020b3985',
    to: {
      id: '6905adf16a22b7843b006183',
      username: 'sayantan3',
      email: 'sayantan3@gmail.com',
      profilePicture: undefined
    },
    status: 'pending',
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
=== FRIEND REQUEST GET END (sent) ===
 GET /api/friends/request?type=sent 200 in 149ms
 GET /api/socket-health 200 in 23ms
 GET /socket.io?EIO=4&transport=polling&t=2uuuqoho 404 in 101ms
 GET /api/socket-health 200 in 39ms
 GET /socket.io?EIO=4&transport=polling&t=2uvn5tfh 404 in 102ms
 GET /api/socket-health 200 in 25ms
 GET /socket.io?EIO=4&transport=polling&t=2uwee9s6 404 in 110ms
 GET /api/socket-health 200 in 25ms
 GET /socket.io?EIO=4&transport=polling&t=2ux66eb2 404 in 118ms
 GET /api/socket-health 200 in 23ms
 GET /socket.io?EIO=4&transport=polling&t=2uxxt5fr 404 in 103ms
 GET /api/socket-health 200 in 50ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
 GET /socket.io?EIO=4&transport=polling&t=2uyqgshj 404 in 109ms
 GET /api/conversations 200 in 207ms
 GET /api/socket-health 200 in 25ms
 GET /socket.io?EIO=4&transport=polling&t=2uzhevvr 404 in 108ms
 GET /api/socket-health 200 in 29ms
 GET /socket.io?EIO=4&transport=polling&t=2v09ls4i 404 in 104ms
 GET /api/socket-health 200 in 26ms
 GET /socket.io?EIO=4&transport=polling&t=2v1138l4 404 in 103ms
 GET /api/socket-health 200 in 61ms
 GET /socket.io?EIO=4&transport=polling&t=2v1uihyp 404 in 261ms
 GET /api/socket-health 200 in 20ms
 GET /socket.io?EIO=4&transport=polling&t=2v2kgjda 404 in 100ms
 GET /api/socket-health 200 in 24ms
 GET /socket.io?EIO=4&transport=polling&t=2v3cfsr2 404 in 97ms
 GET /api/socket-health 200 in 22ms
 GET /socket.io?EIO=4&transport=polling&t=2v444ja8 404 in 91ms
 GET /api/socket-health 200 in 31ms
 GET /socket.io?EIO=4&transport=polling&t=2v4w46gr 404 in 97ms
 GET /api/socket-health 200 in 22ms
 GET /socket.io?EIO=4&transport=polling&t=2v5nnq9r 404 in 96ms
 GET /api/socket-health 200 in 25ms
 GET /socket.io?EIO=4&transport=polling&t=2v6fhe1l 404 in 101ms
 GET /api/socket-health 200 in 26ms
 GET /socket.io?EIO=4&transport=polling&t=2v77n3ii 404 in 97ms
 GET /api/socket-health 200 in 24ms
 GET /socket.io?EIO=4&transport=polling&t=2v7z4ae2 404 in 93ms
 GET /api/socket-health 200 in 33ms
 GET /socket.io?EIO=4&transport=polling&t=2v8r3d8h 404 in 108ms
 GET /api/socket-health 200 in 27ms
 GET /socket.io?EIO=4&transport=polling&t=2v9ipnpq 404 in 95ms
 GET /api/socket-health 200 in 24ms
 GET /socket.io?EIO=4&transport=polling&t=2vaacgcv 404 in 93ms
 GET /api/socket-health 200 in 24ms
 GET /socket.io?EIO=4&transport=polling&t=2vb236cz 404 in 96ms
 GET /api/socket-health 200 in 30ms
 GET /socket.io?EIO=4&transport=polling&t=2vbue38r 404 in 101ms
 GET /api/socket-health 200 in 35ms
 GET /socket.io?EIO=4&transport=polling&t=2vcmc36i 404 in 98ms
 GET /api/socket-health 200 in 23ms
 GET /socket.io?EIO=4&transport=polling&t=2vdds5d3 404 in 90ms
 GET /api/socket-health 200 in 24ms
 GET /socket.io?EIO=4&transport=polling&t=2ve5i6je 404 in 94ms
 GET /api/socket-health 200 in 23ms
 GET /socket.io?EIO=4&transport=polling&t=2vex3g2u 404 in 95ms
 GET /api/socket-health 200 in 28ms
 GET /socket.io?EIO=4&transport=polling&t=2vfp7y2p 404 in 95ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
=== FRIEND REQUEST GET START ===
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
Request type: received User: sayantan2@gmail.com
âœ… Database connected
 GET /api/socket-health 200 in 82ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
 GET /socket.io?EIO=4&transport=polling&t=2vgjdb53 404 in 93ms
 GET /api/friends 200 in 234ms
âœ… Current user found: {
  id: new ObjectId('6901f85f42c5d010fa811206'),
  email: 'sayantan2@gmail.com',
  friendRequestsCount: 0,
  sentRequestsCount: 1
}
Processing received requests...
Raw friendRequests: []
Processed receivedRequests: []
Populating sender details...
Final populated requests: []
=== FRIEND REQUEST GET END (received) ===
 GET /api/friends/request?type=received 200 in 531ms
=== FRIEND REQUEST GET START ===
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
Request type: sent User: sayantan2@gmail.com
âœ… Database connected
âœ… Current user found: {
  id: new ObjectId('6901f85f42c5d010fa811206'),
  email: 'sayantan2@gmail.com',
  friendRequestsCount: 0,
  sentRequestsCount: 1
}
Processing sent requests...
Raw sentRequests: [
  {
    from: new ObjectId('6901f85f42c5d010fa811206'),
    fromName: 'sayantan2',
    to: new ObjectId('6905adf16a22b7843b006183'),
    toName: 'sayantan3',
    status: 'pending',
    _id: new ObjectId('6905cdce14ad0d0f020b3985'),
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
Filtering sent request: { status: 'pending', to: new ObjectId('6905adf16a22b7843b006183') }
Mapping sent request: {
  from: new ObjectId('6901f85f42c5d010fa811206'),
  fromName: 'sayantan2',
  to: new ObjectId('6905adf16a22b7843b006183'),
  toName: 'sayantan3',
  status: 'pending',
  _id: new ObjectId('6905cdce14ad0d0f020b3985'),
  createdAt: 2025-11-01T09:07:26.707Z,
  updatedAt: 2025-11-01T09:07:26.707Z
}
Processed sentRequests: [
  {
    id: '6905cdce14ad0d0f020b3985',
    to: {
      id: '6905adf16a22b7843b006183',
      username: 'sayantan3',
      email: '',
      profilePicture: null
    },
    status: 'pending',
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
Populating recipient details...
Looking up recipient: 6905adf16a22b7843b006183
 POST /api/users/heartbeat 200 in 621ms
Found recipient: sayantan3
Final populated sent requests: [
  {
    id: '6905cdce14ad0d0f020b3985',
    to: {
      id: '6905adf16a22b7843b006183',
      username: 'sayantan3',
      email: 'sayantan3@gmail.com',
      profilePicture: undefined
    },
    status: 'pending',
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
=== FRIEND REQUEST GET END (sent) ===
 GET /api/friends/request?type=sent 200 in 134ms
 GET /api/socket-health 200 in 39ms
 GET /socket.io?EIO=4&transport=polling&t=2vh9241k 404 in 139ms
 GET /api/socket-health 200 in 24ms
 GET /socket.io?EIO=4&transport=polling&t=2vi05484 404 in 86ms
 GET /api/socket-health 200 in 27ms
 GET /socket.io?EIO=4&transport=polling&t=2vis0jk9 404 in 106ms
 GET /api/socket-health 200 in 22ms
 GET /socket.io?EIO=4&transport=polling&t=2vjjxz03 404 in 95ms
 GET /api/socket-health 200 in 30ms
 GET /socket.io?EIO=4&transport=polling&t=2vkbxiy8 404 in 97ms
 GET /api/socket-health 200 in 24ms
 GET /socket.io?EIO=4&transport=polling&t=2vl3ifqy 404 in 91ms
 GET /api/socket-health 200 in 26ms
 GET /socket.io?EIO=4&transport=polling&t=2vlv9tyu 404 in 91ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
 GET /api/socket-health 200 in 47ms
 GET /socket.io?EIO=4&transport=polling&t=2vmnlofe 404 in 93ms
 GET /api/conversations 200 in 170ms
 GET /api/socket-health 200 in 29ms
 GET /socket.io?EIO=4&transport=polling&t=2vnerfbu 404 in 98ms
 GET /api/socket-health 200 in 28ms
 GET /socket.io?EIO=4&transport=polling&t=2vo6feqw 404 in 101ms
 GET /api/socket-health 200 in 24ms
 GET /socket.io?EIO=4&transport=polling&t=2voy9e6j 404 in 95ms
 GET /api/socket-health 200 in 22ms
 GET /socket.io?EIO=4&transport=polling&t=2vppydk8 404 in 97ms
 GET /api/socket-health 200 in 24ms
 GET /socket.io?EIO=4&transport=polling&t=2vqhwkl1 404 in 96ms
 GET /api/socket-health 200 in 24ms
 GET /socket.io?EIO=4&transport=polling&t=2vr9ok14 404 in 95ms
 GET /api/socket-health 200 in 21ms
 GET /socket.io?EIO=4&transport=polling&t=2vs1dylw 404 in 92ms
 GET /api/socket-health 200 in 23ms
 GET /socket.io?EIO=4&transport=polling&t=2vst73ys 404 in 92ms
 GET /api/socket-health 200 in 31ms
 GET /socket.io?EIO=4&transport=polling&t=2vtlcf2n 404 in 89ms
 GET /api/socket-health 200 in 21ms
 GET /socket.io?EIO=4&transport=polling&t=2vucpxgn 404 in 93ms
 GET /api/socket-health 200 in 24ms
 GET /socket.io?EIO=4&transport=polling&t=2vv4i8m2 404 in 91ms
 GET /api/socket-health 200 in 25ms
 GET /socket.io?EIO=4&transport=polling&t=2vvwbxnw 404 in 109ms
 GET /api/socket-health 200 in 24ms
 GET /socket.io?EIO=4&transport=polling&t=2vwo4tzj 404 in 97ms
 GET /api/socket-health 200 in 28ms
 GET /socket.io?EIO=4&transport=polling&t=2vxfw7d0 404 in 89ms
 GET /api/socket-health 200 in 26ms
 GET /socket.io?EIO=4&transport=polling&t=2vy7lg69 404 in 95ms
 GET /api/socket-health 200 in 22ms
 GET /socket.io?EIO=4&transport=polling&t=2vyzcfht 404 in 101ms
 GET /api/socket-health 200 in 24ms
 GET /socket.io?EIO=4&transport=polling&t=2vzr9bnq 404 in 98ms
 GET /api/socket-health 200 in 29ms
 GET /socket.io?EIO=4&transport=polling&t=2w0j8lj5 404 in 95ms
 GET /api/socket-health 200 in 24ms
 GET /socket.io?EIO=4&transport=polling&t=2w1asxga 404 in 96ms
 GET /api/socket-health 200 in 22ms
 GET /socket.io?EIO=4&transport=polling&t=2w22mu3h 404 in 89ms
 GET /api/socket-health 200 in 24ms
 GET /socket.io?EIO=4&transport=polling&t=2w2u3hyd 404 in 91ms
 GET /api/socket-health 200 in 22ms
 GET /socket.io?EIO=4&transport=polling&t=2w3m7dqy 404 in 91ms
 GET /api/socket-health 200 in 44ms
=== FRIEND REQUEST GET START ===
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
Request type: received User: sayantan2@gmail.com
âœ… Database connected
âœ… Current user found: {
  id: new ObjectId('6901f85f42c5d010fa811206'),
  email: 'sayantan2@gmail.com',
  friendRequestsCount: 0,
  sentRequestsCount: 1
}
Processing received requests...
Raw friendRequests: []
Processed receivedRequests: []
Populating sender details...
Final populated requests: []
=== FRIEND REQUEST GET END (received) ===
 GET /api/friends/request?type=received 200 in 136ms
=== FRIEND REQUEST GET START ===
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
Request type: sent User: sayantan2@gmail.com
âœ… Database connected
 GET /socket.io?EIO=4&transport=polling&t=2w4eisvg 404 in 116ms
âœ… Current user found: {
  id: new ObjectId('6901f85f42c5d010fa811206'),
  email: 'sayantan2@gmail.com',
  friendRequestsCount: 0,
  sentRequestsCount: 1
}
Processing sent requests...
Raw sentRequests: [
  {
    from: new ObjectId('6901f85f42c5d010fa811206'),
    fromName: 'sayantan2',
    to: new ObjectId('6905adf16a22b7843b006183'),
    toName: 'sayantan3',
    status: 'pending',
    _id: new ObjectId('6905cdce14ad0d0f020b3985'),
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
Filtering sent request: { status: 'pending', to: new ObjectId('6905adf16a22b7843b006183') }
Mapping sent request: {
  from: new ObjectId('6901f85f42c5d010fa811206'),
  fromName: 'sayantan2',
  to: new ObjectId('6905adf16a22b7843b006183'),
  toName: 'sayantan3',
  status: 'pending',
  _id: new ObjectId('6905cdce14ad0d0f020b3985'),
  createdAt: 2025-11-01T09:07:26.707Z,
  updatedAt: 2025-11-01T09:07:26.707Z
}
Processed sentRequests: [
  {
    id: '6905cdce14ad0d0f020b3985',
    to: {
      id: '6905adf16a22b7843b006183',
      username: 'sayantan3',
      email: '',
      profilePicture: null
    },
    status: 'pending',
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
Populating recipient details...
Looking up recipient: 6905adf16a22b7843b006183
Found recipient: sayantan3
Final populated sent requests: [
  {
    id: '6905cdce14ad0d0f020b3985',
    to: {
      id: '6905adf16a22b7843b006183',
      username: 'sayantan3',
      email: 'sayantan3@gmail.com',
      profilePicture: undefined
    },
    status: 'pending',
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
=== FRIEND REQUEST GET END (sent) ===
 GET /api/friends/request?type=sent 200 in 117ms
 GET /api/socket-health 200 in 28ms
 GET /socket.io?EIO=4&transport=polling&t=2w55s14n 404 in 99ms
 GET /api/socket-health 200 in 26ms
 GET /socket.io?EIO=4&transport=polling&t=2w5xm4us 404 in 100ms
 GET /api/socket-health 200 in 24ms
 GET /socket.io?EIO=4&transport=polling&t=2w6pc677 404 in 90ms
 GET /api/socket-health 200 in 23ms
 GET /socket.io?EIO=4&transport=polling&t=2w7gxa3j 404 in 88ms
 GET /api/socket-health 200 in 29ms
 GET /socket.io?EIO=4&transport=polling&t=2w88w45z 404 in 97ms
 GET /api/socket-health 200 in 23ms
 GET /socket.io?EIO=4&transport=polling&t=2w90hg64 404 in 98ms
 GET /api/socket-health 200 in 22ms
 GET /socket.io?EIO=4&transport=polling&t=2w9s6zav 404 in 88ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
 GET /api/socket-health 200 in 46ms
 GET /socket.io?EIO=4&transport=polling&t=2wakkabj 404 in 101ms
 GET /api/conversations 200 in 180ms
 GET /api/socket-health 200 in 22ms
 GET /socket.io?EIO=4&transport=polling&t=2wbbnnao 404 in 85ms
 GET /api/socket-health 200 in 27ms
 GET /socket.io?EIO=4&transport=polling&t=2wc3i6na 404 in 98ms
 GET /api/socket-health 200 in 22ms
 GET /socket.io?EIO=4&transport=polling&t=2wcv4kic 404 in 93ms
 GET /api/socket-health 200 in 23ms
 GET /socket.io?EIO=4&transport=polling&t=2wdnb49q 404 in 88ms
 GET /api/socket-health 200 in 28ms
 GET /socket.io?EIO=4&transport=polling&t=2wef72yx 404 in 94ms
 GET /api/socket-health 200 in 23ms
 GET /socket.io?EIO=4&transport=polling&t=2wf6w25u 404 in 91ms
 GET /api/socket-health 200 in 24ms
 GET /socket.io?EIO=4&transport=polling&t=2wfyooj3 404 in 97ms
 GET /api/socket-health 200 in 26ms
 GET /socket.io?EIO=4&transport=polling&t=2wgqccxp 404 in 90ms
 GET /api/socket-health 200 in 28ms
 GET /socket.io?EIO=4&transport=polling&t=2whi53qz 404 in 100ms
 GET /api/socket-health 200 in 23ms
 GET /socket.io?EIO=4&transport=polling&t=2wi9qhmx 404 in 93ms
 GET /api/socket-health 200 in 22ms
 GET /socket.io?EIO=4&transport=polling&t=2wj1jf8l 404 in 86ms
 GET /api/socket-health 200 in 31ms
 GET /socket.io?EIO=4&transport=polling&t=2wjti0es 404 in 100ms
 GET /api/socket-health 200 in 22ms
 GET /socket.io?EIO=4&transport=polling&t=2wkkzgwj 404 in 97ms
 GET /api/socket-health 200 in 27ms
 GET /socket.io?EIO=4&transport=polling&t=2wld7kjr 404 in 86ms
 GET /api/socket-health 200 in 24ms
 GET /socket.io?EIO=4&transport=polling&t=2wm4hanh 404 in 96ms
 GET /api/socket-health 200 in 23ms
 GET /socket.io?EIO=4&transport=polling&t=2wmwlriw 404 in 93ms
 GET /api/socket-health 200 in 26ms
 GET /socket.io?EIO=4&transport=polling&t=2wnoe4bv 404 in 108ms
 GET /api/socket-health 200 in 31ms
 GET /socket.io?EIO=4&transport=polling&t=2wogdbdw 404 in 92ms
 GET /api/socket-health 200 in 24ms
 GET /socket.io?EIO=4&transport=polling&t=2wp81d5m 404 in 89ms
 GET /api/socket-health 200 in 26ms
 GET /socket.io?EIO=4&transport=polling&t=2wpztp0w 404 in 93ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
=== FRIEND REQUEST GET START ===
 GET /api/socket-health 200 in 100ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
Request type: received User: sayantan2@gmail.com
âœ… Database connected
 GET /api/auth/session 200 in 113ms
 POST /api/users/heartbeat 200 in 273ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
 GET /socket.io?EIO=4&transport=polling&t=2wqtuojj 404 in 232ms
âœ… Current user found: {
  id: new ObjectId('6901f85f42c5d010fa811206'),
  email: 'sayantan2@gmail.com',
  friendRequestsCount: 0,
  sentRequestsCount: 1
}
Processing received requests...
Raw friendRequests: []
Processed receivedRequests: []
Populating sender details...
Final populated requests: []
=== FRIEND REQUEST GET END (received) ===
 GET /api/friends/request?type=received 200 in 509ms
 GET /api/users/me 200 in 244ms
 GET /api/friends 200 in 533ms
=== FRIEND REQUEST GET START ===
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
Request type: received User: sayantan2@gmail.com
âœ… Database connected
=== FRIEND REQUEST GET START ===
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
Request type: sent User: sayantan2@gmail.com
âœ… Database connected
âœ… Current user found: {
  id: new ObjectId('6901f85f42c5d010fa811206'),
  email: 'sayantan2@gmail.com',
  friendRequestsCount: 0,
  sentRequestsCount: 1
}
Processing received requests...
Raw friendRequests: []
Processed receivedRequests: []
Populating sender details...
Final populated requests: []
=== FRIEND REQUEST GET END (received) ===
 GET /api/friends/request?type=received 200 in 123ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
âœ… Current user found: {
  id: new ObjectId('6901f85f42c5d010fa811206'),
  email: 'sayantan2@gmail.com',
  friendRequestsCount: 0,
  sentRequestsCount: 1
}
Processing sent requests...
Raw sentRequests: [
  {
    from: new ObjectId('6901f85f42c5d010fa811206'),
    fromName: 'sayantan2',
    to: new ObjectId('6905adf16a22b7843b006183'),
    toName: 'sayantan3',
    status: 'pending',
    _id: new ObjectId('6905cdce14ad0d0f020b3985'),
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
Filtering sent request: { status: 'pending', to: new ObjectId('6905adf16a22b7843b006183') }
Mapping sent request: {
  from: new ObjectId('6901f85f42c5d010fa811206'),
  fromName: 'sayantan2',
  to: new ObjectId('6905adf16a22b7843b006183'),
  toName: 'sayantan3',
  status: 'pending',
  _id: new ObjectId('6905cdce14ad0d0f020b3985'),
  createdAt: 2025-11-01T09:07:26.707Z,
  updatedAt: 2025-11-01T09:07:26.707Z
}
Processed sentRequests: [
  {
    id: '6905cdce14ad0d0f020b3985',
    to: {
      id: '6905adf16a22b7843b006183',
      username: 'sayantan3',
      email: '',
      profilePicture: null
    },
    status: 'pending',
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
Populating recipient details...
Looking up recipient: 6905adf16a22b7843b006183
Found recipient: sayantan3
Final populated sent requests: [
  {
    id: '6905cdce14ad0d0f020b3985',
    to: {
      id: '6905adf16a22b7843b006183',
      username: 'sayantan3',
      email: 'sayantan3@gmail.com',
      profilePicture: undefined
    },
    status: 'pending',
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
=== FRIEND REQUEST GET END (sent) ===
 GET /api/friends/request?type=sent 200 in 189ms
 GET /api/friends 200 in 183ms
=== FRIEND REQUEST GET START ===
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
Request type: sent User: sayantan2@gmail.com
âœ… Database connected
 GET /api/random-chat/queue 200 in 563ms
âœ… Current user found: {
  id: new ObjectId('6901f85f42c5d010fa811206'),
  email: 'sayantan2@gmail.com',
  friendRequestsCount: 0,
  sentRequestsCount: 1
}
Processing sent requests...
Raw sentRequests: [
  {
    from: new ObjectId('6901f85f42c5d010fa811206'),
    fromName: 'sayantan2',
    to: new ObjectId('6905adf16a22b7843b006183'),
    toName: 'sayantan3',
    status: 'pending',
    _id: new ObjectId('6905cdce14ad0d0f020b3985'),
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
Filtering sent request: { status: 'pending', to: new ObjectId('6905adf16a22b7843b006183') }
Mapping sent request: {
  from: new ObjectId('6901f85f42c5d010fa811206'),
  fromName: 'sayantan2',
  to: new ObjectId('6905adf16a22b7843b006183'),
  toName: 'sayantan3',
  status: 'pending',
  _id: new ObjectId('6905cdce14ad0d0f020b3985'),
  createdAt: 2025-11-01T09:07:26.707Z,
  updatedAt: 2025-11-01T09:07:26.707Z
}
Processed sentRequests: [
  {
    id: '6905cdce14ad0d0f020b3985',
    to: {
      id: '6905adf16a22b7843b006183',
      username: 'sayantan3',
      email: '',
      profilePicture: null
    },
    status: 'pending',
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
Populating recipient details...
Looking up recipient: 6905adf16a22b7843b006183
 POST /api/users/heartbeat 200 in 589ms
Found recipient: sayantan3
Final populated sent requests: [
  {
    id: '6905cdce14ad0d0f020b3985',
    to: {
      id: '6905adf16a22b7843b006183',
      username: 'sayantan3',
      email: 'sayantan3@gmail.com',
      profilePicture: undefined
    },
    status: 'pending',
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
=== FRIEND REQUEST GET END (sent) ===
 GET /api/friends/request?type=sent 200 in 121ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
 GET /api/random-chat/session 200 in 126ms
 GET /api/socket-health 200 in 30ms
 GET /socket.io?EIO=4&transport=polling&t=2wrjhbg9 404 in 128ms
 GET /api/socket-health 200 in 32ms
 GET /socket.io?EIO=4&transport=polling&t=2wsb2s1y 404 in 101ms
 GET /api/socket-health 200 in 22ms
 GET /socket.io?EIO=4&transport=polling&t=2wt2pne5 404 in 93ms
 GET /api/socket-health 200 in 21ms
 GET /socket.io?EIO=4&transport=polling&t=2wtuff81 404 in 91ms
 GET /api/socket-health 200 in 25ms
 GET /socket.io?EIO=4&transport=polling&t=2wum8yya 404 in 90ms
 GET /api/socket-health 200 in 23ms
 GET /socket.io?EIO=4&transport=polling&t=2wvdv5b3 404 in 96ms
 GET /api/socket-health 200 in 36ms
 GET /socket.io?EIO=4&transport=polling&t=2ww5y282 404 in 102ms
 GET /api/socket-health 200 in 21ms
 GET /socket.io?EIO=4&transport=polling&t=2wwxgzxm 404 in 91ms
 GET /api/socket-health 200 in 22ms
 GET /socket.io?EIO=4&transport=polling&t=2wxp93xd 404 in 93ms
 GET /api/socket-health 200 in 23ms
 GET /socket.io?EIO=4&transport=polling&t=2wyh23hi 404 in 95ms
 GET /api/socket-health 200 in 26ms
 GET /socket.io?EIO=4&transport=polling&t=2wz8zuxw 404 in 105ms
 GET /api/socket-health 200 in 30ms
 GET /socket.io?EIO=4&transport=polling&t=2x00vctt 404 in 94ms
 GET /api/socket-health 200 in 26ms
 GET /socket.io?EIO=4&transport=polling&t=2x0sn7sk 404 in 97ms
 GET /api/socket-health 200 in 22ms
 GET /socket.io?EIO=4&transport=polling&t=2x1kdqf7 404 in 98ms
 GET /api/socket-health 200 in 28ms
 GET /socket.io?EIO=4&transport=polling&t=2x2c0ppy 404 in 95ms
 GET /api/socket-health 200 in 27ms
 GET /socket.io?EIO=4&transport=polling&t=2x33sgk0 404 in 93ms
 GET /api/socket-health 200 in 26ms
 GET /socket.io?EIO=4&transport=polling&t=2x3vk91f 404 in 98ms
 GET /api/socket-health 200 in 22ms
 GET /socket.io?EIO=4&transport=polling&t=2x4n8cb6 404 in 92ms
 GET /api/socket-health 200 in 25ms
 GET /socket.io?EIO=4&transport=polling&t=2x5f40fi 404 in 96ms
 GET /api/socket-health 200 in 23ms
 GET /socket.io?EIO=4&transport=polling&t=2x66su9j 404 in 93ms
 GET /api/socket-health 200 in 33ms
 GET /socket.io?EIO=4&transport=polling&t=2x6yvk6u 404 in 97ms
 GET /api/socket-health 200 in 24ms
 GET /socket.io?EIO=4&transport=polling&t=2x7qb5ls 404 in 95ms
 GET /api/socket-health 200 in 24ms
 GET /socket.io?EIO=4&transport=polling&t=2x8ieki0 404 in 106ms
 GET /api/socket-health 200 in 31ms
 GET /socket.io?EIO=4&transport=polling&t=2x9acslj 404 in 106ms
 GET /api/socket-health 200 in 34ms
 GET /socket.io?EIO=4&transport=polling&t=2xa2a9ji 404 in 98ms
 GET /api/socket-health 200 in 25ms
 GET /socket.io?EIO=4&transport=polling&t=2xatsqfn 404 in 104ms
 GET /api/socket-health 200 in 22ms
 GET /socket.io?EIO=4&transport=polling&t=2xblsqv0 404 in 91ms
 GET /api/socket-health 200 in 23ms
 GET /socket.io?EIO=4&transport=polling&t=2xcd91w4 404 in 89ms
 GET /api/socket-health 200 in 24ms
 GET /socket.io?EIO=4&transport=polling&t=2xd5456d 404 in 94ms
 GET /api/socket-health 200 in 27ms
 GET /socket.io?EIO=4&transport=polling&t=2xdwmi8i 404 in 96ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
=== FRIEND REQUEST GET START ===
 GET /api/socket-health 200 in 81ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
Request type: received User: sayantan2@gmail.com
âœ… Database connected
 GET /socket.io?EIO=4&transport=polling&t=2xeqge51 404 in 110ms
 GET /api/conversations 200 in 551ms
 POST /api/users/heartbeat 200 in 579ms
âœ… Current user found: {
  id: new ObjectId('6901f85f42c5d010fa811206'),
  email: 'sayantan2@gmail.com',
  friendRequestsCount: 0,
  sentRequestsCount: 1
}
Processing received requests...
Raw friendRequests: []
Processed receivedRequests: []
Populating sender details...
Final populated requests: []
=== FRIEND REQUEST GET END (received) ===
 GET /api/friends/request?type=received 200 in 772ms
=== FRIEND REQUEST GET START ===
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
Request type: sent User: sayantan2@gmail.com
âœ… Database connected
âœ… Current user found: {
  id: new ObjectId('6901f85f42c5d010fa811206'),
  email: 'sayantan2@gmail.com',
  friendRequestsCount: 0,
  sentRequestsCount: 1
}
Processing sent requests...
Raw sentRequests: [
  {
    from: new ObjectId('6901f85f42c5d010fa811206'),
    fromName: 'sayantan2',
    to: new ObjectId('6905adf16a22b7843b006183'),
    toName: 'sayantan3',
    status: 'pending',
    _id: new ObjectId('6905cdce14ad0d0f020b3985'),
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
Filtering sent request: { status: 'pending', to: new ObjectId('6905adf16a22b7843b006183') }
Mapping sent request: {
  from: new ObjectId('6901f85f42c5d010fa811206'),
  fromName: 'sayantan2',
  to: new ObjectId('6905adf16a22b7843b006183'),
  toName: 'sayantan3',
  status: 'pending',
  _id: new ObjectId('6905cdce14ad0d0f020b3985'),
  createdAt: 2025-11-01T09:07:26.707Z,
  updatedAt: 2025-11-01T09:07:26.707Z
}
Processed sentRequests: [
  {
    id: '6905cdce14ad0d0f020b3985',
    to: {
      id: '6905adf16a22b7843b006183',
      username: 'sayantan3',
      email: '',
      profilePicture: null
    },
    status: 'pending',
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
Populating recipient details...
Looking up recipient: 6905adf16a22b7843b006183
Found recipient: sayantan3
Final populated sent requests: [
  {
    id: '6905cdce14ad0d0f020b3985',
    to: {
      id: '6905adf16a22b7843b006183',
      username: 'sayantan3',
      email: 'sayantan3@gmail.com',
      profilePicture: undefined
    },
    status: 'pending',
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
=== FRIEND REQUEST GET END (sent) ===
 GET /api/friends/request?type=sent 200 in 127ms
 GET /api/socket-health 200 in 41ms
 GET /socket.io?EIO=4&transport=polling&t=2xfgr2py 404 in 99ms
 GET /api/socket-health 200 in 23ms
 GET /socket.io?EIO=4&transport=polling&t=2xg81iuc 404 in 93ms
 GET /api/socket-health 200 in 25ms
 GET /socket.io?EIO=4&transport=polling&t=2xgzue2h 404 in 95ms
 GET /api/socket-health 200 in 24ms
 GET /socket.io?EIO=4&transport=polling&t=2xhrgya3 404 in 89ms
 GET /api/socket-health 200 in 31ms
 GET /socket.io?EIO=4&transport=polling&t=2xijj8gw 404 in 94ms
 GET /api/socket-health 200 in 30ms
 GET /socket.io?EIO=4&transport=polling&t=2xjbc17q 404 in 101ms
 GET /api/socket-health 200 in 26ms
 GET /socket.io?EIO=4&transport=polling&t=2xk33b7x 404 in 109ms
 GET /api/socket-health 200 in 31ms
 GET /socket.io?EIO=4&transport=polling&t=2xkuytje 404 in 120ms
 GET /api/socket-health 200 in 27ms
 GET /socket.io?EIO=4&transport=polling&t=2xlmjaje 404 in 111ms
 GET /api/socket-health 200 in 28ms
 GET /socket.io?EIO=4&transport=polling&t=2xmednfw 404 in 95ms
 GET /api/socket-health 200 in 23ms
 GET /socket.io?EIO=4&transport=polling&t=2xn5y356 404 in 99ms
 GET /api/socket-health 200 in 23ms
 GET /socket.io?EIO=4&transport=polling&t=2xnxp4w9 404 in 94ms
 GET /api/socket-health 200 in 22ms
 GET /socket.io?EIO=4&transport=polling&t=2xopd1uj 404 in 88ms
 GET /api/socket-health 200 in 34ms
 GET /socket.io?EIO=4&transport=polling&t=2xphuy20 404 in 106ms
 GET /api/socket-health 200 in 23ms
 GET /socket.io?EIO=4&transport=polling&t=2xq98q07 404 in 96ms
 GET /api/socket-health 200 in 24ms
 GET /socket.io?EIO=4&transport=polling&t=2xr10mmi 404 in 89ms
 GET /api/socket-health 200 in 22ms
 GET /socket.io?EIO=4&transport=polling&t=2xrss76l 404 in 89ms
 GET /api/socket-health 200 in 23ms
 GET /socket.io?EIO=4&transport=polling&t=2xskf61g 404 in 95ms
 GET /api/socket-health 200 in 28ms
 GET /socket.io?EIO=4&transport=polling&t=2xtci1kb 404 in 95ms
 GET /api/socket-health 200 in 23ms
 GET /socket.io?EIO=4&transport=polling&t=2xu44jox 404 in 94ms
 GET /api/socket-health 200 in 23ms
 GET /socket.io?EIO=4&transport=polling&t=2xuvuwux 404 in 94ms
 GET /api/socket-health 200 in 24ms
 GET /socket.io?EIO=4&transport=polling&t=2xvnlpke 404 in 88ms
 GET /api/socket-health 200 in 27ms
 GET /socket.io?EIO=4&transport=polling&t=2xwfjahf 404 in 91ms
 GET /api/socket-health 200 in 24ms
 GET /socket.io?EIO=4&transport=polling&t=2xx76kqu 404 in 98ms
 GET /api/socket-health 200 in 23ms
 GET /socket.io?EIO=4&transport=polling&t=2xxyu2ap 404 in 108ms
 GET /api/socket-health 200 in 21ms
 GET /socket.io?EIO=4&transport=polling&t=2xyqu41z 404 in 87ms
 GET /api/socket-health 200 in 28ms
 GET /socket.io?EIO=4&transport=polling&t=2xzilwaw 404 in 107ms
 GET /api/socket-health 200 in 29ms
 GET /socket.io?EIO=4&transport=polling&t=2y0aan0s 404 in 101ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
 GET /api/socket-health 200 in 88ms
=== FRIEND REQUEST GET START ===
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
Request type: received User: sayantan2@gmail.com
âœ… Database connected
âœ… Current user found: {
  id: new ObjectId('6901f85f42c5d010fa811206'),
  email: 'sayantan2@gmail.com',
  friendRequestsCount: 0,
  sentRequestsCount: 1
}
Processing received requests...
Raw friendRequests: []
Processed receivedRequests: []
Populating sender details...
Final populated requests: []
=== FRIEND REQUEST GET END (received) ===
 GET /api/friends/request?type=received 200 in 197ms
=== FRIEND REQUEST GET START ===
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
Request type: sent User: sayantan2@gmail.com
âœ… Database connected
 GET /api/friends 200 in 241ms
 GET /socket.io?EIO=4&transport=polling&t=2y14hcgk 404 in 138ms
âœ… Current user found: {
  id: new ObjectId('6901f85f42c5d010fa811206'),
  email: 'sayantan2@gmail.com',
  friendRequestsCount: 0,
  sentRequestsCount: 1
}
Processing sent requests...
Raw sentRequests: [
  {
    from: new ObjectId('6901f85f42c5d010fa811206'),
    fromName: 'sayantan2',
    to: new ObjectId('6905adf16a22b7843b006183'),
    toName: 'sayantan3',
    status: 'pending',
    _id: new ObjectId('6905cdce14ad0d0f020b3985'),
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
Filtering sent request: { status: 'pending', to: new ObjectId('6905adf16a22b7843b006183') }
Mapping sent request: {
  from: new ObjectId('6901f85f42c5d010fa811206'),
  fromName: 'sayantan2',
  to: new ObjectId('6905adf16a22b7843b006183'),
  toName: 'sayantan3',
  status: 'pending',
  _id: new ObjectId('6905cdce14ad0d0f020b3985'),
  createdAt: 2025-11-01T09:07:26.707Z,
  updatedAt: 2025-11-01T09:07:26.707Z
}
Processed sentRequests: [
  {
    id: '6905cdce14ad0d0f020b3985',
    to: {
      id: '6905adf16a22b7843b006183',
      username: 'sayantan3',
      email: '',
      profilePicture: null
    },
    status: 'pending',
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
Populating recipient details...
Looking up recipient: 6905adf16a22b7843b006183
Found recipient: sayantan3
Final populated sent requests: [
  {
    id: '6905cdce14ad0d0f020b3985',
    to: {
      id: '6905adf16a22b7843b006183',
      username: 'sayantan3',
      email: 'sayantan3@gmail.com',
      profilePicture: undefined
    },
    status: 'pending',
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
=== FRIEND REQUEST GET END (sent) ===
 GET /api/friends/request?type=sent 200 in 107ms
 GET /api/socket-health 200 in 54ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
 GET /socket.io?EIO=4&transport=polling&t=2y1urc8g 404 in 129ms
 POST /api/users/heartbeat 200 in 264ms
 GET /api/socket-health 200 in 43ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
 GET /socket.io?EIO=4&transport=polling&t=2y2mctif 404 in 98ms
 GET /api/conversations 200 in 171ms
 GET /api/socket-health 200 in 22ms
 GET /socket.io?EIO=4&transport=polling&t=2y3deshi 404 in 87ms
 GET /api/socket-health 200 in 21ms
 GET /socket.io?EIO=4&transport=polling&t=2y455ph4 404 in 92ms
 GET /api/socket-health 200 in 23ms
 GET /socket.io?EIO=4&transport=polling&t=2y4wxx2v 404 in 93ms
 GET /api/socket-health 200 in 22ms
 GET /socket.io?EIO=4&transport=polling&t=2y5onqb4 404 in 84ms
 GET /api/socket-health 200 in 29ms
 GET /socket.io?EIO=4&transport=polling&t=2y6gma4a 404 in 95ms
 GET /api/socket-health 200 in 22ms
 GET /socket.io?EIO=4&transport=polling&t=2y788mn2 404 in 85ms
 GET /api/socket-health 200 in 23ms
 GET /socket.io?EIO=4&transport=polling&t=2y801b8j 404 in 87ms
 GET /api/socket-health 200 in 23ms
 GET /socket.io?EIO=4&transport=polling&t=2y8rudv5 404 in 94ms
 GET /api/socket-health 200 in 28ms
 GET /socket.io?EIO=4&transport=polling&t=2y9jtak8 404 in 85ms
 GET /api/socket-health 200 in 21ms
 GET /socket.io?EIO=4&transport=polling&t=2yabem4p 404 in 89ms
 GET /api/socket-health 200 in 25ms
 GET /socket.io?EIO=4&transport=polling&t=2yb39luk 404 in 92ms
 GET /api/socket-health 200 in 22ms
 GET /socket.io?EIO=4&transport=polling&t=2ybuz5fg 404 in 92ms
 GET /api/socket-health 200 in 28ms
 GET /socket.io?EIO=4&transport=polling&t=2ycmupcl 404 in 93ms
 GET /api/socket-health 200 in 22ms
 GET /socket.io?EIO=4&transport=polling&t=2ydec3ae 404 in 92ms
 GET /api/socket-health 200 in 22ms
 GET /socket.io?EIO=4&transport=polling&t=2ye67lyw 404 in 92ms
 GET /api/socket-health 200 in 21ms
 GET /socket.io?EIO=4&transport=polling&t=2yexuzno 404 in 86ms
 GET /api/socket-health 200 in 21ms
 GET /socket.io?EIO=4&transport=polling&t=2yfpmkgx 404 in 93ms
 GET /api/socket-health 200 in 27ms
 GET /socket.io?EIO=4&transport=polling&t=2yghike0 404 in 95ms
 GET /api/socket-health 200 in 25ms
 GET /socket.io?EIO=4&transport=polling&t=2yh9ks1u 404 in 88ms
 GET /api/socket-health 200 in 22ms
 GET /socket.io?EIO=4&transport=polling&t=2yi100pv 404 in 92ms
 GET /api/socket-health 200 in 23ms
 GET /socket.io?EIO=4&transport=polling&t=2yisqb90 404 in 89ms
 GET /api/socket-health 200 in 28ms
 GET /socket.io?EIO=4&transport=polling&t=2yjkvyar 404 in 88ms
 GET /api/socket-health 200 in 24ms
 GET /socket.io?EIO=4&transport=polling&t=2ykcin5k 404 in 105ms
 GET /api/socket-health 200 in 22ms
 GET /socket.io?EIO=4&transport=polling&t=2yl4705c 404 in 95ms
 GET /api/socket-health 200 in 24ms
 GET /socket.io?EIO=4&transport=polling&t=2ylw82dn 404 in 91ms
 GET /api/socket-health 200 in 23ms
 GET /socket.io?EIO=4&transport=polling&t=2ymnz3ib 404 in 88ms
 GET /api/socket-health 200 in 36ms
 GET /socket.io?EIO=4&transport=polling&t=2yng2rx4 404 in 108ms
 GET /api/socket-health 200 in 23ms
 GET /socket.io?EIO=4&transport=polling&t=2yo7f8j4 404 in 86ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
=== FRIEND REQUEST GET START ===
 GET /api/socket-health 200 in 77ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
Request type: received User: sayantan2@gmail.com
âœ… Database connected
 GET /socket.io?EIO=4&transport=polling&t=2yp14qjr 404 in 105ms
 POST /api/users/heartbeat 200 in 277ms
âœ… Current user found: {
  id: new ObjectId('6901f85f42c5d010fa811206'),
  email: 'sayantan2@gmail.com',
  friendRequestsCount: 0,
  sentRequestsCount: 1
}
Processing received requests...
Raw friendRequests: []
Processed receivedRequests: []
Populating sender details...
Final populated requests: []
=== FRIEND REQUEST GET END (received) ===
 GET /api/friends/request?type=received 200 in 442ms
=== FRIEND REQUEST GET START ===
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
Request type: sent User: sayantan2@gmail.com
âœ… Database connected
âœ… Current user found: {
  id: new ObjectId('6901f85f42c5d010fa811206'),
  email: 'sayantan2@gmail.com',
  friendRequestsCount: 0,
  sentRequestsCount: 1
}
Processing sent requests...
Raw sentRequests: [
  {
    from: new ObjectId('6901f85f42c5d010fa811206'),
    fromName: 'sayantan2',
    to: new ObjectId('6905adf16a22b7843b006183'),
    toName: 'sayantan3',
    status: 'pending',
    _id: new ObjectId('6905cdce14ad0d0f020b3985'),
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
Filtering sent request: { status: 'pending', to: new ObjectId('6905adf16a22b7843b006183') }
Mapping sent request: {
  from: new ObjectId('6901f85f42c5d010fa811206'),
  fromName: 'sayantan2',
  to: new ObjectId('6905adf16a22b7843b006183'),
  toName: 'sayantan3',
  status: 'pending',
  _id: new ObjectId('6905cdce14ad0d0f020b3985'),
  createdAt: 2025-11-01T09:07:26.707Z,
  updatedAt: 2025-11-01T09:07:26.707Z
}
Processed sentRequests: [
  {
    id: '6905cdce14ad0d0f020b3985',
    to: {
      id: '6905adf16a22b7843b006183',
      username: 'sayantan3',
      email: '',
      profilePicture: null
    },
    status: 'pending',
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
Populating recipient details...
Looking up recipient: 6905adf16a22b7843b006183
Found recipient: sayantan3
Final populated sent requests: [
  {
    id: '6905cdce14ad0d0f020b3985',
    to: {
      id: '6905adf16a22b7843b006183',
      username: 'sayantan3',
      email: 'sayantan3@gmail.com',
      profilePicture: undefined
    },
    status: 'pending',
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
=== FRIEND REQUEST GET END (sent) ===
 GET /api/friends/request?type=sent 200 in 140ms
 GET /api/socket-health 200 in 27ms
 GET /socket.io?EIO=4&transport=polling&t=2ypr3p6m 404 in 95ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
 GET /api/socket-health 200 in 39ms
 GET /socket.io?EIO=4&transport=polling&t=2yqjba9h 404 in 96ms
 GET /api/conversations 200 in 173ms
 GET /api/socket-health 200 in 27ms
 GET /socket.io?EIO=4&transport=polling&t=2yrah48l 404 in 92ms
 GET /api/socket-health 200 in 23ms
 GET /socket.io?EIO=4&transport=polling&t=2ys24kln 404 in 88ms
 GET /api/socket-health 200 in 22ms
 GET /socket.io?EIO=4&transport=polling&t=2ysu0frw 404 in 91ms
 GET /api/socket-health 200 in 24ms
 GET /socket.io?EIO=4&transport=polling&t=2ytlt6x5 404 in 96ms
 GET /api/socket-health 200 in 22ms
 GET /socket.io?EIO=4&transport=polling&t=2yudocwm 404 in 89ms
 GET /api/socket-health 200 in 29ms
 GET /socket.io?EIO=4&transport=polling&t=2yv5n376 404 in 93ms
 GET /api/socket-health 200 in 22ms
 GET /socket.io?EIO=4&transport=polling&t=2yvxauep 404 in 86ms
 GET /api/socket-health 200 in 22ms
 GET /socket.io?EIO=4&transport=polling&t=2ywozirw 404 in 101ms
 GET /api/socket-health 200 in 23ms
 GET /socket.io?EIO=4&transport=polling&t=2yxgujt2 404 in 92ms
 GET /api/socket-health 200 in 28ms
 GET /socket.io?EIO=4&transport=polling&t=2yy8sawv 404 in 92ms
 GET /api/socket-health 200 in 23ms
 GET /socket.io?EIO=4&transport=polling&t=2yz0ahek 404 in 95ms
 GET /api/socket-health 200 in 23ms
 GET /socket.io?EIO=4&transport=polling&t=2yzs0rcd 404 in 96ms
 GET /api/socket-health 200 in 22ms
 GET /socket.io?EIO=4&transport=polling&t=2z0jro1b 404 in 93ms
 GET /api/socket-health 200 in 23ms
 GET /socket.io?EIO=4&transport=polling&t=2z1bmks4 404 in 92ms
 GET /api/socket-health 200 in 27ms
 GET /socket.io?EIO=4&transport=polling&t=2z23jba8 404 in 94ms
 GET /api/socket-health 200 in 24ms
 GET /socket.io?EIO=4&transport=polling&t=2z2v95oj 404 in 185ms
 GET /api/socket-health 200 in 30ms
 GET /socket.io?EIO=4&transport=polling&t=2z3mvwxn 404 in 90ms
 GET /api/socket-health 200 in 24ms
 GET /socket.io?EIO=4&transport=polling&t=2z4eua2t 404 in 94ms
 GET /api/socket-health 200 in 23ms
 GET /socket.io?EIO=4&transport=polling&t=2z56o3lx 404 in 99ms
 GET /api/socket-health 200 in 23ms
 GET /socket.io?EIO=4&transport=polling&t=2z5yeg9l 404 in 99ms
 GET /api/socket-health 200 in 34ms
 GET /socket.io?EIO=4&transport=polling&t=2z6qfgrg 404 in 99ms
 GET /api/socket-health 200 in 23ms
 GET /socket.io?EIO=4&transport=polling&t=2z7hy4zj 404 in 89ms
 GET /api/socket-health 200 in 22ms
 GET /socket.io?EIO=4&transport=polling&t=2z89ina8 404 in 87ms
 GET /api/socket-health 200 in 22ms
 GET /socket.io?EIO=4&transport=polling&t=2z91e7tg 404 in 93ms
 GET /api/socket-health 200 in 21ms
 GET /socket.io?EIO=4&transport=polling&t=2z9t3jc6 404 in 94ms
 GET /api/socket-health 200 in 28ms
 GET /socket.io?EIO=4&transport=polling&t=2zal55ob 404 in 92ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
=== FRIEND REQUEST GET START ===
 GET /api/socket-health 200 in 94ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
Request type: received User: sayantan2@gmail.com
âœ… Database connected
âœ… Current user found: {
  id: new ObjectId('6901f85f42c5d010fa811206'),
  email: 'sayantan2@gmail.com',
  friendRequestsCount: 0,
  sentRequestsCount: 1
}
Processing received requests...
Raw friendRequests: []
Processed receivedRequests: []
Populating sender details...
Final populated requests: []
=== FRIEND REQUEST GET END (received) ===
 GET /api/friends/request?type=received 200 in 191ms
=== FRIEND REQUEST GET START ===
 GET /api/friends 200 in 230ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
Request type: sent User: sayantan2@gmail.com
âœ… Database connected
 GET /socket.io?EIO=4&transport=polling&t=2zbf09g4 404 in 138ms
âœ… Current user found: {
  id: new ObjectId('6901f85f42c5d010fa811206'),
  email: 'sayantan2@gmail.com',
  friendRequestsCount: 0,
  sentRequestsCount: 1
}
Processing sent requests...
Raw sentRequests: [
  {
    from: new ObjectId('6901f85f42c5d010fa811206'),
    fromName: 'sayantan2',
    to: new ObjectId('6905adf16a22b7843b006183'),
    toName: 'sayantan3',
    status: 'pending',
    _id: new ObjectId('6905cdce14ad0d0f020b3985'),
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
Filtering sent request: { status: 'pending', to: new ObjectId('6905adf16a22b7843b006183') }
Mapping sent request: {
  from: new ObjectId('6901f85f42c5d010fa811206'),
  fromName: 'sayantan2',
  to: new ObjectId('6905adf16a22b7843b006183'),
  toName: 'sayantan3',
  status: 'pending',
  _id: new ObjectId('6905cdce14ad0d0f020b3985'),
  createdAt: 2025-11-01T09:07:26.707Z,
  updatedAt: 2025-11-01T09:07:26.707Z
}
Processed sentRequests: [
  {
    id: '6905cdce14ad0d0f020b3985',
    to: {
      id: '6905adf16a22b7843b006183',
      username: 'sayantan3',
      email: '',
      profilePicture: null
    },
    status: 'pending',
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
Populating recipient details...
Looking up recipient: 6905adf16a22b7843b006183
Found recipient: sayantan3
Final populated sent requests: [
  {
    id: '6905cdce14ad0d0f020b3985',
    to: {
      id: '6905adf16a22b7843b006183',
      username: 'sayantan3',
      email: 'sayantan3@gmail.com',
      profilePicture: undefined
    },
    status: 'pending',
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
=== FRIEND REQUEST GET END (sent) ===
 GET /api/friends/request?type=sent 200 in 115ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
 GET /api/socket-health 200 in 62ms
 GET /socket.io?EIO=4&transport=polling&t=2zc5mraf 404 in 135ms
 POST /api/users/heartbeat 200 in 282ms
 GET /api/socket-health 200 in 21ms
 GET /socket.io?EIO=4&transport=polling&t=2zcwd1og 404 in 89ms
 GET /api/socket-health 200 in 28ms
 GET /socket.io?EIO=4&transport=polling&t=2zdnzidu 404 in 115ms
 GET /api/socket-health 200 in 42ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
 GET /socket.io?EIO=4&transport=polling&t=2zeg5uh1 404 in 118ms
 GET /api/conversations 200 in 183ms
 GET /api/socket-health 200 in 26ms
 GET /socket.io?EIO=4&transport=polling&t=2zf7ub0p 404 in 104ms
 GET /api/socket-health 200 in 25ms
 GET /socket.io?EIO=4&transport=polling&t=2zfzl2dm 404 in 103ms
 GET /api/socket-health 200 in 25ms
 GET /socket.io?EIO=4&transport=polling&t=2zgr7qj2 404 in 99ms
 GET /api/socket-health 200 in 29ms
 GET /socket.io?EIO=4&transport=polling&t=2zhj5utr 404 in 97ms
 GET /api/socket-health 200 in 24ms
 GET /socket.io?EIO=4&transport=polling&t=2zian8xj 404 in 95ms
 GET /api/socket-health 200 in 23ms
 GET /socket.io?EIO=4&transport=polling&t=2zj2f7vo 404 in 100ms
 GET /api/socket-health 200 in 24ms
 GET /socket.io?EIO=4&transport=polling&t=2zju5cn7 404 in 97ms
 GET /api/socket-health 200 in 31ms
 GET /socket.io?EIO=4&transport=polling&t=2zkm6fkb 404 in 99ms
 GET /api/socket-health 200 in 26ms
 GET /socket.io?EIO=4&transport=polling&t=2zldt17a 404 in 92ms
 GET /api/socket-health 200 in 23ms
 GET /socket.io?EIO=4&transport=polling&t=2zm5j6t1 404 in 93ms
 GET /api/socket-health 200 in 22ms
 GET /socket.io?EIO=4&transport=polling&t=2zmx55no 404 in 119ms
 GET /api/socket-health 200 in 28ms
 GET /socket.io?EIO=4&transport=polling&t=2znpffza 404 in 87ms
 GET /api/socket-health 200 in 29ms
 GET /socket.io?EIO=4&transport=polling&t=2zoh9erh 404 in 99ms
 GET /api/socket-health 200 in 50ms
 GET /socket.io?EIO=4&transport=polling&t=2zp9qdxv 404 in 116ms
 GET /api/socket-health 200 in 29ms
 GET /socket.io?EIO=4&transport=polling&t=2zq0mv1s 404 in 108ms
 GET /api/socket-health 200 in 22ms
 GET /socket.io?EIO=4&transport=polling&t=2zqs2cy9 404 in 97ms
 GET /api/socket-health 200 in 33ms
 GET /socket.io?EIO=4&transport=polling&t=2zrk6z88 404 in 98ms
 GET /api/socket-health 200 in 22ms
 GET /socket.io?EIO=4&transport=polling&t=2zsbxxld 404 in 86ms
 GET /api/socket-health 200 in 23ms
 GET /socket.io?EIO=4&transport=polling&t=2zt3q6za 404 in 93ms
 GET /api/socket-health 200 in 21ms
 GET /socket.io?EIO=4&transport=polling&t=2ztvg3lq 404 in 103ms
 GET /api/socket-health 200 in 23ms
 GET /socket.io?EIO=4&transport=polling&t=2zunb04q 404 in 96ms
 GET /api/socket-health 200 in 27ms
 GET /socket.io?EIO=4&transport=polling&t=2zvf8pyw 404 in 92ms
 GET /api/socket-health 200 in 24ms
 GET /socket.io?EIO=4&transport=polling&t=2zw6uxm1 404 in 85ms
 GET /api/socket-health 200 in 22ms
 GET /socket.io?EIO=4&transport=polling&t=2zwyl7ok 404 in 91ms
 GET /api/socket-health 200 in 22ms
 GET /socket.io?EIO=4&transport=polling&t=2zxqcq8i 404 in 91ms
 GET /api/socket-health 200 in 29ms
 GET /socket.io?EIO=4&transport=polling&t=2zyi8z3u 404 in 97ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
=== FRIEND REQUEST GET START ===
 GET /api/socket-health 200 in 58ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
Request type: received User: sayantan2@gmail.com
âœ… Database connected
 GET /socket.io?EIO=4&transport=polling&t=2zzawzg8 404 in 96ms
 POST /api/users/heartbeat 200 in 227ms
âœ… Current user found: {
  id: new ObjectId('6901f85f42c5d010fa811206'),
  email: 'sayantan2@gmail.com',
  friendRequestsCount: 0,
  sentRequestsCount: 1
}
Processing received requests...
Raw friendRequests: []
Processed receivedRequests: []
Populating sender details...
Final populated requests: []
=== FRIEND REQUEST GET END (received) ===
 GET /api/friends/request?type=received 200 in 496ms
=== FRIEND REQUEST GET START ===
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
Request type: sent User: sayantan2@gmail.com
âœ… Database connected
âœ… Current user found: {
  id: new ObjectId('6901f85f42c5d010fa811206'),
  email: 'sayantan2@gmail.com',
  friendRequestsCount: 0,
  sentRequestsCount: 1
}
Processing sent requests...
Raw sentRequests: [
  {
    from: new ObjectId('6901f85f42c5d010fa811206'),
    fromName: 'sayantan2',
    to: new ObjectId('6905adf16a22b7843b006183'),
    toName: 'sayantan3',
    status: 'pending',
    _id: new ObjectId('6905cdce14ad0d0f020b3985'),
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
Filtering sent request: { status: 'pending', to: new ObjectId('6905adf16a22b7843b006183') }
Mapping sent request: {
  from: new ObjectId('6901f85f42c5d010fa811206'),
  fromName: 'sayantan2',
  to: new ObjectId('6905adf16a22b7843b006183'),
  toName: 'sayantan3',
  status: 'pending',
  _id: new ObjectId('6905cdce14ad0d0f020b3985'),
  createdAt: 2025-11-01T09:07:26.707Z,
  updatedAt: 2025-11-01T09:07:26.707Z
}
Processed sentRequests: [
  {
    id: '6905cdce14ad0d0f020b3985',
    to: {
      id: '6905adf16a22b7843b006183',
      username: 'sayantan3',
      email: '',
      profilePicture: null
    },
    status: 'pending',
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
Populating recipient details...
Looking up recipient: 6905adf16a22b7843b006183
Found recipient: sayantan3
Final populated sent requests: [
  {
    id: '6905cdce14ad0d0f020b3985',
    to: {
      id: '6905adf16a22b7843b006183',
      username: 'sayantan3',
      email: 'sayantan3@gmail.com',
      profilePicture: undefined
    },
    status: 'pending',
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
=== FRIEND REQUEST GET END (sent) ===
 GET /api/friends/request?type=sent 200 in 148ms
 GET /api/socket-health 200 in 22ms
 GET /socket.io?EIO=4&transport=polling&t=3001li7a 404 in 96ms
 GET /api/socket-health 200 in 27ms
 GET /socket.io?EIO=4&transport=polling&t=300teocv 404 in 97ms
 GET /api/socket-health 200 in 26ms
 GET /socket.io?EIO=4&transport=polling&t=301l70t3 404 in 97ms
 GET /api/socket-health 200 in 35ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
 GET /socket.io?EIO=4&transport=polling&t=302d8j1k 404 in 101ms
 GET /api/conversations 200 in 177ms
 GET /api/socket-health 200 in 22ms
 GET /socket.io?EIO=4&transport=polling&t=3034l01x 404 in 88ms
 GET /api/socket-health 200 in 23ms
 GET /socket.io?EIO=4&transport=polling&t=303winur 404 in 96ms
 GET /api/socket-health 200 in 29ms
 GET /socket.io?EIO=4&transport=polling&t=304oh5kr 404 in 108ms
 GET /api/socket-health 200 in 25ms
 GET /socket.io?EIO=4&transport=polling&t=305g4rp2 404 in 89ms
 GET /api/socket-health 200 in 27ms
 GET /socket.io?EIO=4&transport=polling&t=3067wbs4 404 in 107ms
 GET /api/socket-health 200 in 31ms
 GET /socket.io?EIO=4&transport=polling&t=306zve4z 404 in 99ms
 GET /api/socket-health 200 in 21ms
 GET /socket.io?EIO=4&transport=polling&t=307r8yw1 404 in 105ms
 GET /api/socket-health 200 in 27ms
 GET /socket.io?EIO=4&transport=polling&t=308j5bv2 404 in 92ms
 GET /api/socket-health 200 in 24ms
 GET /socket.io?EIO=4&transport=polling&t=309auujc 404 in 100ms
 GET /api/socket-health 200 in 23ms
 GET /socket.io?EIO=4&transport=polling&t=30a2ogrm 404 in 94ms
 GET /api/socket-health 200 in 21ms
 GET /socket.io?EIO=4&transport=polling&t=30audk25 404 in 90ms
 GET /api/socket-health 200 in 31ms
 GET /socket.io?EIO=4&transport=polling&t=30bmfwf4 404 in 86ms
 GET /api/socket-health 200 in 22ms
 GET /socket.io?EIO=4&transport=polling&t=30cduhon 404 in 93ms
 GET /api/socket-health 200 in 28ms
 GET /socket.io?EIO=4&transport=polling&t=30d5tafc 404 in 101ms
 GET /api/socket-health 200 in 24ms
 GET /socket.io?EIO=4&transport=polling&t=30dxiz95 404 in 94ms
 GET /api/socket-health 200 in 24ms
 GET /socket.io?EIO=4&transport=polling&t=30epavxc 404 in 98ms
 GET /api/socket-health 200 in 27ms
 GET /socket.io?EIO=4&transport=polling&t=30fh332p 404 in 91ms
 GET /api/socket-health 200 in 24ms
 GET /socket.io?EIO=4&transport=polling&t=30g8s2hk 404 in 93ms
 GET /api/socket-health 200 in 32ms
 GET /socket.io?EIO=4&transport=polling&t=30h0qgt5 404 in 113ms
 GET /api/socket-health 200 in 25ms
 GET /socket.io?EIO=4&transport=polling&t=30hspiuf 404 in 104ms
 GET /api/socket-health 200 in 28ms
 GET /socket.io?EIO=4&transport=polling&t=30ikjxmi 404 in 95ms
 GET /api/socket-health 200 in 23ms
 GET /socket.io?EIO=4&transport=polling&t=30jc665u 404 in 93ms
 GET /api/socket-health 200 in 21ms
 GET /socket.io?EIO=4&transport=polling&t=30k3zojc 404 in 94ms
 GET /api/socket-health 200 in 23ms
 GET /socket.io?EIO=4&transport=polling&t=30kvr2gp 404 in 89ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
=== FRIEND REQUEST GET START ===
 GET /api/socket-health 200 in 69ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
Request type: received User: sayantan2@gmail.com
âœ… Database connected
âœ… Current user found: {
  id: new ObjectId('6901f85f42c5d010fa811206'),
  email: 'sayantan2@gmail.com',
  friendRequestsCount: 0,
  sentRequestsCount: 1
}
Processing received requests...
Raw friendRequests: []
Processed receivedRequests: []
Populating sender details...
Final populated requests: []
=== FRIEND REQUEST GET END (received) ===
 GET /api/friends/request?type=received 200 in 163ms
=== FRIEND REQUEST GET START ===
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
Request type: sent User: sayantan2@gmail.com
âœ… Database connected
 GET /socket.io?EIO=4&transport=polling&t=30loqavg 404 in 124ms
 GET /api/friends 200 in 207ms
âœ… Current user found: {
  id: new ObjectId('6901f85f42c5d010fa811206'),
  email: 'sayantan2@gmail.com',
  friendRequestsCount: 0,
  sentRequestsCount: 1
}
Processing sent requests...
Raw sentRequests: [
  {
    from: new ObjectId('6901f85f42c5d010fa811206'),
    fromName: 'sayantan2',
    to: new ObjectId('6905adf16a22b7843b006183'),
    toName: 'sayantan3',
    status: 'pending',
    _id: new ObjectId('6905cdce14ad0d0f020b3985'),
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
Filtering sent request: { status: 'pending', to: new ObjectId('6905adf16a22b7843b006183') }
Mapping sent request: {
  from: new ObjectId('6901f85f42c5d010fa811206'),
  fromName: 'sayantan2',
  to: new ObjectId('6905adf16a22b7843b006183'),
  toName: 'sayantan3',
  status: 'pending',
  _id: new ObjectId('6905cdce14ad0d0f020b3985'),
  createdAt: 2025-11-01T09:07:26.707Z,
  updatedAt: 2025-11-01T09:07:26.707Z
}
Processed sentRequests: [
  {
    id: '6905cdce14ad0d0f020b3985',
    to: {
      id: '6905adf16a22b7843b006183',
      username: 'sayantan3',
      email: '',
      profilePicture: null
    },
    status: 'pending',
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
Populating recipient details...
Looking up recipient: 6905adf16a22b7843b006183
Found recipient: sayantan3
Final populated sent requests: [
  {
    id: '6905cdce14ad0d0f020b3985',
    to: {
      id: '6905adf16a22b7843b006183',
      username: 'sayantan3',
      email: 'sayantan3@gmail.com',
      profilePicture: undefined
    },
    status: 'pending',
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
=== FRIEND REQUEST GET END (sent) ===
 GET /api/friends/request?type=sent 200 in 106ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
 GET /api/socket-health 200 in 43ms
 GET /socket.io?EIO=4&transport=polling&t=30mfmg83 404 in 96ms
 POST /api/users/heartbeat 200 in 217ms
 GET /api/socket-health 200 in 22ms
 GET /socket.io?EIO=4&transport=polling&t=30n6rh5f 404 in 86ms
 GET /api/socket-health 200 in 26ms
 GET /socket.io?EIO=4&transport=polling&t=30nyox55 404 in 100ms
 GET /api/socket-health 200 in 27ms
 GET /socket.io?EIO=4&transport=polling&t=30oqgbye 404 in 91ms
 GET /api/socket-health 200 in 28ms
 GET /socket.io?EIO=4&transport=polling&t=30pi72w0 404 in 104ms
 GET /api/socket-health 200 in 47ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
 GET /socket.io?EIO=4&transport=polling&t=30qahy62 404 in 109ms
 GET /api/conversations 200 in 322ms
 GET /api/socket-health 200 in 25ms
 GET /socket.io?EIO=4&transport=polling&t=30r21mem 404 in 96ms
 GET /api/socket-health 200 in 22ms
 GET /socket.io?EIO=4&transport=polling&t=30rtr74m 404 in 92ms
 GET /api/socket-health 200 in 23ms
 GET /socket.io?EIO=4&transport=polling&t=30sljnnl 404 in 93ms
 GET /api/socket-health 200 in 22ms
 GET /socket.io?EIO=4&transport=polling&t=30tdasp4 404 in 79ms
 GET /api/socket-health 200 in 27ms
 GET /socket.io?EIO=4&transport=polling&t=30u55z6e 404 in 96ms
 GET /api/socket-health 200 in 31ms
 GET /socket.io?EIO=4&transport=polling&t=30ux239v 404 in 91ms
 GET /api/socket-health 200 in 29ms
 GET /socket.io?EIO=4&transport=polling&t=30vosxqt 404 in 114ms
 GET /api/socket-health 200 in 29ms
 GET /socket.io?EIO=4&transport=polling&t=30wg8xhi 404 in 113ms
 GET /api/socket-health 200 in 29ms
 GET /socket.io?EIO=4&transport=polling&t=30x82uhc 404 in 94ms
 GET /api/socket-health 200 in 23ms
 GET /socket.io?EIO=4&transport=polling&t=30xzryb8 404 in 98ms
 GET /api/socket-health 200 in 27ms
 GET /socket.io?EIO=4&transport=polling&t=30yrumhn 404 in 118ms
 GET /api/socket-health 200 in 22ms
 GET /socket.io?EIO=4&transport=polling&t=30zjctjv 404 in 89ms
 GET /api/socket-health 200 in 22ms
 GET /socket.io?EIO=4&transport=polling&t=310b68zi 404 in 96ms
 GET /api/socket-health 200 in 28ms
 GET /socket.io?EIO=4&transport=polling&t=31131yb9 404 in 92ms
 GET /api/socket-health 200 in 22ms
 GET /socket.io?EIO=4&transport=polling&t=311upmqp 404 in 90ms
 GET /api/socket-health 200 in 25ms
 GET /socket.io?EIO=4&transport=polling&t=312mjx5k 404 in 96ms
 GET /api/socket-health 200 in 23ms
 GET /socket.io?EIO=4&transport=polling&t=313eb0ax 404 in 92ms
 GET /api/socket-health 200 in 32ms
 GET /socket.io?EIO=4&transport=polling&t=3146cduh 404 in 91ms
 GET /api/socket-health 200 in 24ms
 GET /socket.io?EIO=4&transport=polling&t=314xzfaz 404 in 88ms
 GET /api/socket-health 200 in 23ms
 GET /socket.io?EIO=4&transport=polling&t=315ppqn7 404 in 90ms
 GET /api/socket-health 200 in 25ms
 GET /socket.io?EIO=4&transport=polling&t=316hkh85 404 in 93ms
 GET /api/socket-health 200 in 29ms
 GET /socket.io?EIO=4&transport=polling&t=3179c8dq 404 in 96ms
 GET /api/socket-health 200 in 31ms
 GET /socket.io?EIO=4&transport=polling&t=31815a1r 404 in 91ms
 GET /api/socket-health 200 in 23ms
 GET /socket.io?EIO=4&transport=polling&t=318smowt 404 in 95ms
 GET /api/socket-health 200 in 40ms
=== FRIEND REQUEST GET START ===
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
Request type: received User: sayantan2@gmail.com
âœ… Database connected
âœ… Current user found: {
  id: new ObjectId('6901f85f42c5d010fa811206'),
  email: 'sayantan2@gmail.com',
  friendRequestsCount: 0,
  sentRequestsCount: 1
}
Processing received requests...
Raw friendRequests: []
Processed receivedRequests: []
Populating sender details...
Final populated requests: []
=== FRIEND REQUEST GET END (received) ===
 GET /api/friends/request?type=received 200 in 125ms
=== FRIEND REQUEST GET START ===
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
Request type: sent User: sayantan2@gmail.com
âœ… Database connected
 GET /socket.io?EIO=4&transport=polling&t=319ku8it 404 in 115ms
âœ… Current user found: {
  id: new ObjectId('6901f85f42c5d010fa811206'),
  email: 'sayantan2@gmail.com',
  friendRequestsCount: 0,
  sentRequestsCount: 1
}
Processing sent requests...
Raw sentRequests: [
  {
    from: new ObjectId('6901f85f42c5d010fa811206'),
    fromName: 'sayantan2',
    to: new ObjectId('6905adf16a22b7843b006183'),
    toName: 'sayantan3',
    status: 'pending',
    _id: new ObjectId('6905cdce14ad0d0f020b3985'),
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
Filtering sent request: { status: 'pending', to: new ObjectId('6905adf16a22b7843b006183') }
Mapping sent request: {
  from: new ObjectId('6901f85f42c5d010fa811206'),
  fromName: 'sayantan2',
  to: new ObjectId('6905adf16a22b7843b006183'),
  toName: 'sayantan3',
  status: 'pending',
  _id: new ObjectId('6905cdce14ad0d0f020b3985'),
  createdAt: 2025-11-01T09:07:26.707Z,
  updatedAt: 2025-11-01T09:07:26.707Z
}
Processed sentRequests: [
  {
    id: '6905cdce14ad0d0f020b3985',
    to: {
      id: '6905adf16a22b7843b006183',
      username: 'sayantan3',
      email: '',
      profilePicture: null
    },
    status: 'pending',
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
Populating recipient details...
Looking up recipient: 6905adf16a22b7843b006183
Found recipient: sayantan3
Final populated sent requests: [
  {
    id: '6905cdce14ad0d0f020b3985',
    to: {
      id: '6905adf16a22b7843b006183',
      username: 'sayantan3',
      email: 'sayantan3@gmail.com',
      profilePicture: undefined
    },
    status: 'pending',
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
=== FRIEND REQUEST GET END (sent) ===
 GET /api/friends/request?type=sent 200 in 110ms
 GET /api/socket-health 200 in 22ms
 GET /socket.io?EIO=4&transport=polling&t=31ac3h9g 404 in 93ms
 GET /api/socket-health 200 in 28ms
 GET /socket.io?EIO=4&transport=polling&t=31b3zalw 404 in 92ms
 GET /api/socket-health 200 in 22ms
 GET /socket.io?EIO=4&transport=polling&t=31bvojly 404 in 94ms
 GET /api/socket-health 200 in 22ms
 GET /socket.io?EIO=4&transport=polling&t=31cneeat 404 in 93ms
 GET /api/socket-health 200 in 25ms
 GET /socket.io?EIO=4&transport=polling&t=31df80qj 404 in 123ms
 GET /api/socket-health 200 in 36ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
 GET /socket.io?EIO=4&transport=polling&t=31e7cv0c 404 in 93ms
 GET /api/conversations 200 in 169ms
 GET /api/socket-health 200 in 23ms
 GET /socket.io?EIO=4&transport=polling&t=31ez0k7b 404 in 94ms
 GET /api/socket-health 200 in 24ms
 GET /socket.io?EIO=4&transport=polling&t=31fqr7q2 404 in 91ms
 GET /api/socket-health 200 in 28ms
 GET /socket.io?EIO=4&transport=polling&t=31gil0w4 404 in 90ms
 GET /api/socket-health 200 in 28ms
 GET /socket.io?EIO=4&transport=polling&t=31hafvpp 404 in 110ms
 GET /api/socket-health 200 in 23ms
 GET /socket.io?EIO=4&transport=polling&t=31i25i40 404 in 91ms
 GET /api/socket-health 200 in 24ms
 GET /socket.io?EIO=4&transport=polling&t=31itrz82 404 in 89ms
 GET /api/socket-health 200 in 27ms
 GET /socket.io?EIO=4&transport=polling&t=31jlwqf0 404 in 84ms
 GET /api/socket-health 200 in 27ms
 GET /socket.io?EIO=4&transport=polling&t=31kdii4t 404 in 99ms
 GET /api/socket-health 200 in 24ms
 GET /socket.io?EIO=4&transport=polling&t=31l59yac 404 in 93ms
 GET /api/socket-health 200 in 24ms
 GET /socket.io?EIO=4&transport=polling&t=31lx1dp2 404 in 97ms
 GET /api/socket-health 200 in 22ms
 GET /socket.io?EIO=4&transport=polling&t=31moqfq5 404 in 93ms
 GET /api/socket-health 200 in 30ms
 GET /socket.io?EIO=4&transport=polling&t=31ngv9pd 404 in 89ms
 GET /api/socket-health 200 in 23ms
 GET /socket.io?EIO=4&transport=polling&t=31o8fzmh 404 in 95ms
 GET /api/socket-health 200 in 24ms
 GET /socket.io?EIO=4&transport=polling&t=31p053xs 404 in 93ms
 GET /api/socket-health 200 in 21ms
 GET /socket.io?EIO=4&transport=polling&t=31prst5o 404 in 94ms
 GET /api/socket-health 200 in 30ms
 GET /socket.io?EIO=4&transport=polling&t=31qjsaio 404 in 92ms
 GET /api/socket-health 200 in 23ms
 GET /socket.io?EIO=4&transport=polling&t=31rbazxb 404 in 98ms
 GET /api/socket-health 200 in 24ms
 GET /socket.io?EIO=4&transport=polling&t=31s32g0d 404 in 94ms
 GET /api/socket-health 200 in 24ms
 GET /socket.io?EIO=4&transport=polling&t=31surwxd 404 in 98ms
 GET /api/socket-health 200 in 22ms
 GET /socket.io?EIO=4&transport=polling&t=31tmjuxf 404 in 94ms
 GET /api/socket-health 200 in 29ms
 GET /socket.io?EIO=4&transport=polling&t=31uej5ug 404 in 93ms
 GET /api/socket-health 200 in 23ms
 GET /socket.io?EIO=4&transport=polling&t=31v636eq 404 in 96ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
=== FRIEND REQUEST GET START ===
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
Request type: received User: sayantan2@gmail.com
âœ… Database connected
 GET /api/socket-health 200 in 78ms
 GET /socket.io?EIO=4&transport=polling&t=31w0n9k4 404 in 97ms
 POST /api/users/heartbeat 200 in 289ms
âœ… Current user found: {
  id: new ObjectId('6901f85f42c5d010fa811206'),
  email: 'sayantan2@gmail.com',
  friendRequestsCount: 0,
  sentRequestsCount: 1
}
Processing received requests...
Raw friendRequests: []
Processed receivedRequests: []
Populating sender details...
Final populated requests: []
=== FRIEND REQUEST GET END (received) ===
 GET /api/friends/request?type=received 200 in 491ms
=== FRIEND REQUEST GET START ===
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
Request type: sent User: sayantan2@gmail.com
âœ… Database connected
âœ… Current user found: {
  id: new ObjectId('6901f85f42c5d010fa811206'),
  email: 'sayantan2@gmail.com',
  friendRequestsCount: 0,
  sentRequestsCount: 1
}
Processing sent requests...
Raw sentRequests: [
  {
    from: new ObjectId('6901f85f42c5d010fa811206'),
    fromName: 'sayantan2',
    to: new ObjectId('6905adf16a22b7843b006183'),
    toName: 'sayantan3',
    status: 'pending',
    _id: new ObjectId('6905cdce14ad0d0f020b3985'),
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
Filtering sent request: { status: 'pending', to: new ObjectId('6905adf16a22b7843b006183') }
Mapping sent request: {
  from: new ObjectId('6901f85f42c5d010fa811206'),
  fromName: 'sayantan2',
  to: new ObjectId('6905adf16a22b7843b006183'),
  toName: 'sayantan3',
  status: 'pending',
  _id: new ObjectId('6905cdce14ad0d0f020b3985'),
  createdAt: 2025-11-01T09:07:26.707Z,
  updatedAt: 2025-11-01T09:07:26.707Z
}
Processed sentRequests: [
  {
    id: '6905cdce14ad0d0f020b3985',
    to: {
      id: '6905adf16a22b7843b006183',
      username: 'sayantan3',
      email: '',
      profilePicture: null
    },
    status: 'pending',
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
Populating recipient details...
Looking up recipient: 6905adf16a22b7843b006183
 GET /api/friends 200 in 582ms
Found recipient: sayantan3
Final populated sent requests: [
  {
    id: '6905cdce14ad0d0f020b3985',
    to: {
      id: '6905adf16a22b7843b006183',
      username: 'sayantan3',
      email: 'sayantan3@gmail.com',
      profilePicture: undefined
    },
    status: 'pending',
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
=== FRIEND REQUEST GET END (sent) ===
 GET /api/friends/request?type=sent 200 in 114ms
 GET /api/socket-health 200 in 26ms
 GET /socket.io?EIO=4&transport=polling&t=31wpyk7i 404 in 103ms
 GET /api/socket-health 200 in 22ms
 GET /socket.io?EIO=4&transport=polling&t=31xhsdfm 404 in 91ms
 GET /api/socket-health 200 in 24ms
 GET /socket.io?EIO=4&transport=polling&t=31y9856a 404 in 95ms
 GET /api/socket-health 200 in 23ms
 GET /socket.io?EIO=4&transport=polling&t=31z10atn 404 in 91ms
 GET /api/socket-health 200 in 35ms
 GET /socket.io?EIO=4&transport=polling&t=31zt3ipz 404 in 99ms
 GET /api/socket-health 200 in 23ms
 GET /socket.io?EIO=4&transport=polling&t=320kiu4o 404 in 97ms
 GET /api/socket-health 200 in 24ms
 GET /socket.io?EIO=4&transport=polling&t=321cajle 404 in 90ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
 GET /api/socket-health 200 in 51ms
 GET /socket.io?EIO=4&transport=polling&t=3224xiog 404 in 94ms
 GET /api/conversations 200 in 173ms
 GET /api/socket-health 200 in 26ms
 GET /socket.io?EIO=4&transport=polling&t=322vzmic 404 in 95ms
 GET /api/socket-health 200 in 30ms
 GET /socket.io?EIO=4&transport=polling&t=323nvotl 404 in 98ms
 GET /api/socket-health 200 in 33ms
 GET /socket.io?EIO=4&transport=polling&t=324g1873 404 in 94ms
 GET /api/socket-health 200 in 27ms
 GET /socket.io?EIO=4&transport=polling&t=3257nro9 404 in 93ms
 GET /api/socket-health 200 in 24ms
 GET /socket.io?EIO=4&transport=polling&t=325z9459 404 in 92ms
 GET /api/socket-health 200 in 32ms
 GET /socket.io?EIO=4&transport=polling&t=326ra3ez 404 in 121ms
 GET /api/socket-health 200 in 28ms
 GET /socket.io?EIO=4&transport=polling&t=327iwdmi 404 in 109ms
 GET /api/socket-health 200 in 30ms
 GET /socket.io?EIO=4&transport=polling&t=328aoilq 404 in 100ms
 GET /api/socket-health 200 in 21ms
 GET /socket.io?EIO=4&transport=polling&t=329253cl 404 in 93ms
 GET /api/socket-health 200 in 22ms
 GET /socket.io?EIO=4&transport=polling&t=329tyigb 404 in 86ms
 GET /api/socket-health 200 in 23ms
 GET /socket.io?EIO=4&transport=polling&t=32alw1wd 404 in 88ms
 GET /api/socket-health 200 in 24ms
 GET /socket.io?EIO=4&transport=polling&t=32bdpb3d 404 in 98ms
 GET /api/socket-health 200 in 30ms
 GET /socket.io?EIO=4&transport=polling&t=32c5km9l 404 in 92ms
 GET /api/socket-health 200 in 24ms
 GET /socket.io?EIO=4&transport=polling&t=32cx87bg 404 in 99ms
 GET /api/socket-health 200 in 24ms
 GET /socket.io?EIO=4&transport=polling&t=32dp4zkj 404 in 95ms
 GET /api/socket-health 200 in 24ms
 GET /socket.io?EIO=4&transport=polling&t=32egtedp 404 in 97ms
 GET /api/socket-health 200 in 29ms
 GET /socket.io?EIO=4&transport=polling&t=32f8qy56 404 in 96ms
 GET /api/socket-health 200 in 23ms
 GET /socket.io?EIO=4&transport=polling&t=32g097ge 404 in 93ms
 GET /api/socket-health 200 in 24ms
 GET /socket.io?EIO=4&transport=polling&t=32gs3bj7 404 in 92ms
 GET /api/socket-health 200 in 23ms
 GET /socket.io?EIO=4&transport=polling&t=32hjydcy 404 in 97ms
 GET /api/socket-health 200 in 23ms
 GET /socket.io?EIO=4&transport=polling&t=32ibenub 404 in 96ms
 GET /api/socket-health 200 in 40ms
 GET /socket.io?EIO=4&transport=polling&t=32j3m31x 404 in 174ms
 GET /api/socket-health 200 in 37ms
=== FRIEND REQUEST GET START ===
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
Request type: received User: sayantan2@gmail.com
âœ… Database connected
âœ… Current user found: {
  id: new ObjectId('6901f85f42c5d010fa811206'),
  email: 'sayantan2@gmail.com',
  friendRequestsCount: 0,
  sentRequestsCount: 1
}
Processing received requests...
Raw friendRequests: []
Processed receivedRequests: []
Populating sender details...
Final populated requests: []
=== FRIEND REQUEST GET END (received) ===
 GET /api/friends/request?type=received 200 in 129ms
=== FRIEND REQUEST GET START ===
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
Request type: sent User: sayantan2@gmail.com
âœ… Database connected
 GET /socket.io?EIO=4&transport=polling&t=32jvgwcu 404 in 117ms
âœ… Current user found: {
  id: new ObjectId('6901f85f42c5d010fa811206'),
  email: 'sayantan2@gmail.com',
  friendRequestsCount: 0,
  sentRequestsCount: 1
}
Processing sent requests...
Raw sentRequests: [
  {
    from: new ObjectId('6901f85f42c5d010fa811206'),
    fromName: 'sayantan2',
    to: new ObjectId('6905adf16a22b7843b006183'),
    toName: 'sayantan3',
    status: 'pending',
    _id: new ObjectId('6905cdce14ad0d0f020b3985'),
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
Filtering sent request: { status: 'pending', to: new ObjectId('6905adf16a22b7843b006183') }
Mapping sent request: {
  from: new ObjectId('6901f85f42c5d010fa811206'),
  fromName: 'sayantan2',
  to: new ObjectId('6905adf16a22b7843b006183'),
  toName: 'sayantan3',
  status: 'pending',
  _id: new ObjectId('6905cdce14ad0d0f020b3985'),
  createdAt: 2025-11-01T09:07:26.707Z,
  updatedAt: 2025-11-01T09:07:26.707Z
}
Processed sentRequests: [
  {
    id: '6905cdce14ad0d0f020b3985',
    to: {
      id: '6905adf16a22b7843b006183',
      username: 'sayantan3',
      email: '',
      profilePicture: null
    },
    status: 'pending',
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
Populating recipient details...
Looking up recipient: 6905adf16a22b7843b006183
Found recipient: sayantan3
Final populated sent requests: [
  {
    id: '6905cdce14ad0d0f020b3985',
    to: {
      id: '6905adf16a22b7843b006183',
      username: 'sayantan3',
      email: 'sayantan3@gmail.com',
      profilePicture: undefined
    },
    status: 'pending',
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
=== FRIEND REQUEST GET END (sent) ===
 GET /api/friends/request?type=sent 200 in 110ms
 GET /api/socket-health 200 in 45ms
 GET /socket.io?EIO=4&transport=polling&t=32knfua2 404 in 110ms
 GET /api/socket-health 200 in 29ms
 GET /socket.io?EIO=4&transport=polling&t=32ler8ci 404 in 102ms
 GET /api/socket-health 200 in 23ms
 GET /socket.io?EIO=4&transport=polling&t=32m6pju4 404 in 109ms
 GET /api/socket-health 200 in 27ms
 GET /socket.io?EIO=4&transport=polling&t=32mygtom 404 in 105ms
 GET /api/socket-health 200 in 30ms
 GET /socket.io?EIO=4&transport=polling&t=32nq9r4y 404 in 96ms
 GET /api/socket-health 200 in 27ms
 GET /socket.io?EIO=4&transport=polling&t=32oi2o7i 404 in 105ms
 GET /api/socket-health 200 in 24ms
 GET /socket.io?EIO=4&transport=polling&t=32p9qcyi 404 in 97ms
 GET /api/socket-health 200 in 41ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
 GET /socket.io?EIO=4&transport=polling&t=32q1v9jb 404 in 97ms
 GET /api/conversations 200 in 171ms
 GET /api/socket-health 200 in 29ms
 GET /socket.io?EIO=4&transport=polling&t=32qtcy70 404 in 124ms
 GET /api/socket-health 200 in 29ms
 GET /socket.io?EIO=4&transport=polling&t=32rl6s6s 404 in 100ms
 GET /api/socket-health 200 in 23ms
 GET /socket.io?EIO=4&transport=polling&t=32scwcue 404 in 95ms
 GET /api/socket-health 200 in 25ms
 GET /socket.io?EIO=4&transport=polling&t=32t4qkfl 404 in 92ms
 GET /api/socket-health 200 in 30ms
 GET /socket.io?EIO=4&transport=polling&t=32twk3qp 404 in 94ms
 GET /api/socket-health 200 in 28ms
 GET /socket.io?EIO=4&transport=polling&t=32uo8u56 404 in 98ms
 GET /api/socket-health 200 in 24ms
 GET /socket.io?EIO=4&transport=polling&t=32vfpnij 404 in 93ms
 GET /api/socket-health 200 in 22ms
 GET /socket.io?EIO=4&transport=polling&t=32w7roml 404 in 99ms
 GET /api/socket-health 200 in 29ms
 GET /socket.io?EIO=4&transport=polling&t=32wzc70e 404 in 108ms
 GET /api/socket-health 200 in 23ms
 GET /socket.io?EIO=4&transport=polling&t=32xqztm0 404 in 95ms
 GET /api/socket-health 200 in 22ms
 GET /socket.io?EIO=4&transport=polling&t=32yj2o2n 404 in 102ms
 GET /api/socket-health 200 in 24ms
 GET /socket.io?EIO=4&transport=polling&t=32zaja9v 404 in 100ms
 GET /api/socket-health 200 in 29ms
 GET /socket.io?EIO=4&transport=polling&t=3302sa6w 404 in 95ms
 GET /api/socket-health 200 in 24ms
 GET /socket.io?EIO=4&transport=polling&t=330u987m 404 in 92ms
 GET /api/socket-health 200 in 23ms
 GET /socket.io?EIO=4&transport=polling&t=331m2n11 404 in 89ms
 GET /api/socket-health 200 in 23ms
 GET /socket.io?EIO=4&transport=polling&t=332dqu7d 404 in 93ms
 GET /api/socket-health 200 in 24ms
 GET /socket.io?EIO=4&transport=polling&t=3335izio 404 in 95ms
 GET /api/socket-health 200 in 35ms
 GET /socket.io?EIO=4&transport=polling&t=333xlbtf 404 in 93ms
 GET /api/socket-health 200 in 24ms
 GET /socket.io?EIO=4&transport=polling&t=334p29uy 404 in 90ms
 GET /api/socket-health 200 in 24ms
 GET /socket.io?EIO=4&transport=polling&t=335gu2hw 404 in 100ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
=== FRIEND REQUEST GET START ===
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
Request type: received User: sayantan2@gmail.com
âœ… Database connected
 GET /api/auth/session 200 in 90ms
 GET /api/socket-health 200 in 46ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
 GET /api/friends 200 in 231ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
 POST /api/users/heartbeat 200 in 412ms
âœ… Current user found: {
  id: new ObjectId('6901f85f42c5d010fa811206'),
  email: 'sayantan2@gmail.com',
  friendRequestsCount: 0,
  sentRequestsCount: 1
}
Processing received requests...
Raw friendRequests: []
Processed receivedRequests: []
Populating sender details...
Final populated requests: []
=== FRIEND REQUEST GET END (received) ===
 GET /api/friends/request?type=received 200 in 548ms
 GET /api/friends 200 in 360ms
 POST /api/users/heartbeat 200 in 670ms
=== FRIEND REQUEST GET START ===
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
Request type: received User: sayantan2@gmail.com
âœ… Database connected
=== FRIEND REQUEST GET START ===
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
Request type: sent User: sayantan2@gmail.com
âœ… Database connected
 GET /socket.io?EIO=4&transport=polling&t=336cnqbs 404 in 178ms
âœ… Current user found: {
  id: new ObjectId('6901f85f42c5d010fa811206'),
  email: 'sayantan2@gmail.com',
  friendRequestsCount: 0,
  sentRequestsCount: 1
}
Processing received requests...
Raw friendRequests: []
Processed receivedRequests: []
Populating sender details...
Final populated requests: []
=== FRIEND REQUEST GET END (received) ===
 GET /api/friends/request?type=received 200 in 196ms
âœ… Current user found: {
  id: new ObjectId('6901f85f42c5d010fa811206'),
  email: 'sayantan2@gmail.com',
  friendRequestsCount: 0,
  sentRequestsCount: 1
}
Processing sent requests...
Raw sentRequests: [
  {
    from: new ObjectId('6901f85f42c5d010fa811206'),
    fromName: 'sayantan2',
    to: new ObjectId('6905adf16a22b7843b006183'),
    toName: 'sayantan3',
    status: 'pending',
    _id: new ObjectId('6905cdce14ad0d0f020b3985'),
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
Filtering sent request: { status: 'pending', to: new ObjectId('6905adf16a22b7843b006183') }
Mapping sent request: {
  from: new ObjectId('6901f85f42c5d010fa811206'),
  fromName: 'sayantan2',
  to: new ObjectId('6905adf16a22b7843b006183'),
  toName: 'sayantan3',
  status: 'pending',
  _id: new ObjectId('6905cdce14ad0d0f020b3985'),
  createdAt: 2025-11-01T09:07:26.707Z,
  updatedAt: 2025-11-01T09:07:26.707Z
}
Processed sentRequests: [
  {
    id: '6905cdce14ad0d0f020b3985',
    to: {
      id: '6905adf16a22b7843b006183',
      username: 'sayantan3',
      email: '',
      profilePicture: null
    },
    status: 'pending',
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
Populating recipient details...
Looking up recipient: 6905adf16a22b7843b006183
Found recipient: sayantan3
Final populated sent requests: [
  {
    id: '6905cdce14ad0d0f020b3985',
    to: {
      id: '6905adf16a22b7843b006183',
      username: 'sayantan3',
      email: 'sayantan3@gmail.com',
      profilePicture: undefined
    },
    status: 'pending',
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
=== FRIEND REQUEST GET END (sent) ===
 GET /api/friends/request?type=sent 200 in 124ms
=== FRIEND REQUEST GET START ===
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
Request type: sent User: sayantan2@gmail.com
âœ… Database connected
âœ… Current user found: {
  id: new ObjectId('6901f85f42c5d010fa811206'),
  email: 'sayantan2@gmail.com',
  friendRequestsCount: 0,
  sentRequestsCount: 1
}
Processing sent requests...
Raw sentRequests: [
  {
    from: new ObjectId('6901f85f42c5d010fa811206'),
    fromName: 'sayantan2',
    to: new ObjectId('6905adf16a22b7843b006183'),
    toName: 'sayantan3',
    status: 'pending',
    _id: new ObjectId('6905cdce14ad0d0f020b3985'),
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
Filtering sent request: { status: 'pending', to: new ObjectId('6905adf16a22b7843b006183') }
Mapping sent request: {
  from: new ObjectId('6901f85f42c5d010fa811206'),
  fromName: 'sayantan2',
  to: new ObjectId('6905adf16a22b7843b006183'),
  toName: 'sayantan3',
  status: 'pending',
  _id: new ObjectId('6905cdce14ad0d0f020b3985'),
  createdAt: 2025-11-01T09:07:26.707Z,
  updatedAt: 2025-11-01T09:07:26.707Z
}
Processed sentRequests: [
  {
    id: '6905cdce14ad0d0f020b3985',
    to: {
      id: '6905adf16a22b7843b006183',
      username: 'sayantan3',
      email: '',
      profilePicture: null
    },
    status: 'pending',
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
Populating recipient details...
Looking up recipient: 6905adf16a22b7843b006183
 GET /api/users/me 200 in 720ms
 GET /api/random-chat/queue 200 in 803ms
Found recipient: sayantan3
Final populated sent requests: [
  {
    id: '6905cdce14ad0d0f020b3985',
    to: {
      id: '6905adf16a22b7843b006183',
      username: 'sayantan3',
      email: 'sayantan3@gmail.com',
      profilePicture: undefined
    },
    status: 'pending',
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
=== FRIEND REQUEST GET END (sent) ===
 GET /api/friends/request?type=sent 200 in 145ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
 GET /api/socket-health 200 in 65ms
 GET /socket.io?EIO=4&transport=polling&t=3371gncp 404 in 151ms
 GET /api/random-chat/session 200 in 281ms
 GET /api/socket-health 200 in 20ms
 GET /socket.io?EIO=4&transport=polling&t=337sewp5 404 in 89ms
 GET /api/socket-health 200 in 26ms
 GET /socket.io?EIO=4&transport=polling&t=338k97sz 404 in 102ms
 GET /api/socket-health 200 in 23ms
 GET /socket.io?EIO=4&transport=polling&t=339bygq6 404 in 95ms
 GET /api/socket-health 200 in 24ms
 GET /socket.io?EIO=4&transport=polling&t=33a3n6dm 404 in 97ms
 GET /api/socket-health 200 in 29ms
 GET /socket.io?EIO=4&transport=polling&t=33avmj6l 404 in 100ms
 GET /api/socket-health 200 in 30ms
 GET /socket.io?EIO=4&transport=polling&t=33bndp2p 404 in 118ms
 GET /api/socket-health 200 in 22ms
 GET /socket.io?EIO=4&transport=polling&t=33cexzia 404 in 93ms
 GET /api/socket-health 200 in 24ms
 GET /socket.io?EIO=4&transport=polling&t=33d6m8it 404 in 96ms
 GET /api/socket-health 200 in 30ms
 GET /socket.io?EIO=4&transport=polling&t=33dykbr9 404 in 103ms
 GET /api/socket-health 200 in 27ms
 GET /socket.io?EIO=4&transport=polling&t=33eq7s00 404 in 102ms
 GET /api/socket-health 200 in 24ms
 GET /socket.io?EIO=4&transport=polling&t=33fhu7lg 404 in 98ms
 GET /api/socket-health 200 in 26ms
 GET /socket.io?EIO=4&transport=polling&t=33g9ynmg 404 in 95ms
 GET /api/socket-health 200 in 25ms
 GET /socket.io?EIO=4&transport=polling&t=33h1oyfv 404 in 106ms
 GET /api/socket-health 200 in 34ms
 GET /socket.io?EIO=4&transport=polling&t=33htqkyq 404 in 103ms
 GET /api/socket-health 200 in 33ms
 GET /socket.io?EIO=4&transport=polling&t=33ilimfg 404 in 109ms
 GET /api/socket-health 200 in 22ms
 GET /socket.io?EIO=4&transport=polling&t=33jcxd26 404 in 92ms
 GET /api/socket-health 200 in 26ms
 GET /socket.io?EIO=4&transport=polling&t=33k4uj6c 404 in 105ms
 GET /api/socket-health 200 in 29ms
 GET /socket.io?EIO=4&transport=polling&t=33kwmr82 404 in 91ms
 GET /api/socket-health 200 in 23ms
 GET /socket.io?EIO=4&transport=polling&t=33loayrv 404 in 87ms
 GET /api/socket-health 200 in 22ms
 GET /socket.io?EIO=4&transport=polling&t=33mg4jse 404 in 108ms
 GET /api/socket-health 200 in 24ms
 GET /socket.io?EIO=4&transport=polling&t=33n7qwgz 404 in 95ms
 GET /api/socket-health 200 in 24ms
 GET /socket.io?EIO=4&transport=polling&t=33nzgsup 404 in 96ms
 GET /api/socket-health 200 in 24ms
 GET /socket.io?EIO=4&transport=polling&t=33or9n15 404 in 102ms
 GET /api/socket-health 200 in 22ms
 GET /socket.io?EIO=4&transport=polling&t=33piz5ls 404 in 96ms
 GET /api/socket-health 200 in 32ms
 GET /socket.io?EIO=4&transport=polling&t=33qb343p 404 in 98ms
 GET /api/socket-health 200 in 29ms
 GET /socket.io?EIO=4&transport=polling&t=33r2prza 404 in 105ms
 GET /api/socket-health 200 in 26ms
 GET /socket.io?EIO=4&transport=polling&t=33rufo6x 404 in 94ms
 GET /api/socket-health 200 in 36ms
 GET /socket.io?EIO=4&transport=polling&t=33smsbow 404 in 110ms
 GET /api/socket-health 200 in 23ms
 GET /socket.io?EIO=4&transport=polling&t=33tdw3nb 404 in 116ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
 GET /api/socket-health 200 in 58ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
 GET /socket.io?EIO=4&transport=polling&t=33u6rv9e 404 in 93ms
 POST /api/users/heartbeat 200 in 246ms
 GET /api/conversations 200 in 501ms
=== FRIEND REQUEST GET START ===
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
Request type: received User: sayantan2@gmail.com
âœ… Database connected
 GET /api/socket-health 200 in 55ms
âœ… Current user found: {
  id: new ObjectId('6901f85f42c5d010fa811206'),
  email: 'sayantan2@gmail.com',
  friendRequestsCount: 0,
  sentRequestsCount: 1
}
Processing received requests...
Raw friendRequests: []
Processed receivedRequests: []
Populating sender details...
Final populated requests: []
=== FRIEND REQUEST GET END (received) ===
 GET /api/friends/request?type=received 200 in 181ms
=== FRIEND REQUEST GET START ===
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
Request type: sent User: sayantan2@gmail.com
âœ… Database connected
 GET /socket.io?EIO=4&transport=polling&t=33uyjuxq 404 in 163ms
âœ… Current user found: {
  id: new ObjectId('6901f85f42c5d010fa811206'),
  email: 'sayantan2@gmail.com',
  friendRequestsCount: 0,
  sentRequestsCount: 1
}
Processing sent requests...
Raw sentRequests: [
  {
    from: new ObjectId('6901f85f42c5d010fa811206'),
    fromName: 'sayantan2',
    to: new ObjectId('6905adf16a22b7843b006183'),
    toName: 'sayantan3',
    status: 'pending',
    _id: new ObjectId('6905cdce14ad0d0f020b3985'),
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
Filtering sent request: { status: 'pending', to: new ObjectId('6905adf16a22b7843b006183') }
Mapping sent request: {
  from: new ObjectId('6901f85f42c5d010fa811206'),
  fromName: 'sayantan2',
  to: new ObjectId('6905adf16a22b7843b006183'),
  toName: 'sayantan3',
  status: 'pending',
  _id: new ObjectId('6905cdce14ad0d0f020b3985'),
  createdAt: 2025-11-01T09:07:26.707Z,
  updatedAt: 2025-11-01T09:07:26.707Z
}
Processed sentRequests: [
  {
    id: '6905cdce14ad0d0f020b3985',
    to: {
      id: '6905adf16a22b7843b006183',
      username: 'sayantan3',
      email: '',
      profilePicture: null
    },
    status: 'pending',
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
Populating recipient details...
Looking up recipient: 6905adf16a22b7843b006183
Found recipient: sayantan3
Final populated sent requests: [
  {
    id: '6905cdce14ad0d0f020b3985',
    to: {
      id: '6905adf16a22b7843b006183',
      username: 'sayantan3',
      email: 'sayantan3@gmail.com',
      profilePicture: undefined
    },
    status: 'pending',
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
=== FRIEND REQUEST GET END (sent) ===
 GET /api/friends/request?type=sent 200 in 117ms
 GET /api/socket-health 200 in 21ms
 GET /socket.io?EIO=4&transport=polling&t=33vpbalu 404 in 96ms
 GET /api/socket-health 200 in 22ms
 GET /socket.io?EIO=4&transport=polling&t=33wgyjda 404 in 91ms
 GET /api/socket-health 200 in 23ms
 GET /socket.io?EIO=4&transport=polling&t=33x8p711 404 in 94ms
 GET /api/socket-health 200 in 24ms
 GET /socket.io?EIO=4&transport=polling&t=33y0ijc1 404 in 95ms
 GET /api/socket-health 200 in 30ms
 GET /socket.io?EIO=4&transport=polling&t=33ysnh87 404 in 103ms
 GET /api/socket-health 200 in 23ms
 GET /socket.io?EIO=4&transport=polling&t=33zk3pdz 404 in 102ms
 GET /api/socket-health 200 in 25ms
 GET /socket.io?EIO=4&transport=polling&t=340bvef4 404 in 95ms
 GET /api/socket-health 200 in 21ms
 GET /socket.io?EIO=4&transport=polling&t=3413xwns 404 in 94ms
 GET /api/socket-health 200 in 33ms
 GET /socket.io?EIO=4&transport=polling&t=341vw0br 404 in 101ms
 GET /api/socket-health 200 in 25ms
 GET /socket.io?EIO=4&transport=polling&t=342ngkxc 404 in 111ms
 GET /api/socket-health 200 in 22ms
 GET /socket.io?EIO=4&transport=polling&t=343f4lyk 404 in 93ms
 GET /api/socket-health 200 in 22ms
 GET /socket.io?EIO=4&transport=polling&t=3446sfz4 404 in 94ms
 GET /api/socket-health 200 in 25ms
 GET /socket.io?EIO=4&transport=polling&t=344yr0gz 404 in 104ms
 GET /api/socket-health 200 in 27ms
 GET /socket.io?EIO=4&transport=polling&t=345qibxm 404 in 94ms
 GET /api/socket-health 200 in 30ms
 GET /socket.io?EIO=4&transport=polling&t=346ieted 404 in 92ms
 GET /api/socket-health 200 in 24ms
 GET /socket.io?EIO=4&transport=polling&t=347a27vm 404 in 100ms
 GET /api/socket-health 200 in 26ms
 GET /socket.io?EIO=4&transport=polling&t=3481ynd6 404 in 113ms
 GET /api/socket-health 200 in 29ms
 GET /socket.io?EIO=4&transport=polling&t=348tuyuz 404 in 110ms
 GET /api/socket-health 200 in 27ms
 GET /socket.io?EIO=4&transport=polling&t=349ljaw1 404 in 101ms
 GET /api/socket-health 200 in 23ms
 GET /socket.io?EIO=4&transport=polling&t=34ad6s4h 404 in 94ms
 GET /api/socket-health 200 in 23ms
 GET /socket.io?EIO=4&transport=polling&t=34b51r46 404 in 97ms
 GET /api/socket-health 200 in 23ms
 GET /socket.io?EIO=4&transport=polling&t=34bwkdok 404 in 98ms
 GET /api/socket-health 200 in 28ms
 GET /socket.io?EIO=4&transport=polling&t=34cojo1r 404 in 93ms
 GET /api/socket-health 200 in 23ms
 GET /socket.io?EIO=4&transport=polling&t=34dg49j4 404 in 95ms
 GET /api/socket-health 200 in 28ms
 GET /socket.io?EIO=4&transport=polling&t=34e8fb3o 404 in 104ms
 GET /api/socket-health 200 in 24ms
 GET /socket.io?EIO=4&transport=polling&t=34f02iid 404 in 105ms
 GET /api/socket-health 200 in 30ms
 GET /socket.io?EIO=4&transport=polling&t=34frzo2d 404 in 95ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
=== FRIEND REQUEST GET START ===
 GET /api/socket-health 200 in 70ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
Request type: received User: sayantan2@gmail.com
âœ… Database connected
âœ… Current user found: {
  id: new ObjectId('6901f85f42c5d010fa811206'),
  email: 'sayantan2@gmail.com',
  friendRequestsCount: 0,
  sentRequestsCount: 1
}
Processing received requests...
Raw friendRequests: []
Processed receivedRequests: []
Populating sender details...
Final populated requests: []
=== FRIEND REQUEST GET END (received) ===
 GET /api/friends/request?type=received 200 in 163ms
=== FRIEND REQUEST GET START ===
 GET /api/friends 200 in 204ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
Request type: sent User: sayantan2@gmail.com
âœ… Database connected
 GET /socket.io?EIO=4&transport=polling&t=34gl1zy2 404 in 134ms
âœ… Current user found: {
  id: new ObjectId('6901f85f42c5d010fa811206'),
  email: 'sayantan2@gmail.com',
  friendRequestsCount: 0,
  sentRequestsCount: 1
}
Processing sent requests...
Raw sentRequests: [
  {
    from: new ObjectId('6901f85f42c5d010fa811206'),
    fromName: 'sayantan2',
    to: new ObjectId('6905adf16a22b7843b006183'),
    toName: 'sayantan3',
    status: 'pending',
    _id: new ObjectId('6905cdce14ad0d0f020b3985'),
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
Filtering sent request: { status: 'pending', to: new ObjectId('6905adf16a22b7843b006183') }
Mapping sent request: {
  from: new ObjectId('6901f85f42c5d010fa811206'),
  fromName: 'sayantan2',
  to: new ObjectId('6905adf16a22b7843b006183'),
  toName: 'sayantan3',
  status: 'pending',
  _id: new ObjectId('6905cdce14ad0d0f020b3985'),
  createdAt: 2025-11-01T09:07:26.707Z,
  updatedAt: 2025-11-01T09:07:26.707Z
}
Processed sentRequests: [
  {
    id: '6905cdce14ad0d0f020b3985',
    to: {
      id: '6905adf16a22b7843b006183',
      username: 'sayantan3',
      email: '',
      profilePicture: null
    },
    status: 'pending',
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
Populating recipient details...
Looking up recipient: 6905adf16a22b7843b006183
Found recipient: sayantan3
Final populated sent requests: [
  {
    id: '6905cdce14ad0d0f020b3985',
    to: {
      id: '6905adf16a22b7843b006183',
      username: 'sayantan3',
      email: 'sayantan3@gmail.com',
      profilePicture: undefined
    },
    status: 'pending',
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
=== FRIEND REQUEST GET END (sent) ===
 GET /api/friends/request?type=sent 200 in 120ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
 GET /api/socket-health 200 in 47ms
 GET /socket.io?EIO=4&transport=polling&t=34hbqiac 404 in 94ms
 POST /api/users/heartbeat 200 in 213ms
 GET /api/socket-health 200 in 46ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
 GET /socket.io?EIO=4&transport=polling&t=34i3fqh5 404 in 124ms
 GET /api/conversations 200 in 205ms
 GET /api/socket-health 200 in 23ms
 GET /socket.io?EIO=4&transport=polling&t=34iui0f6 404 in 98ms
 GET /api/socket-health 200 in 22ms
 GET /socket.io?EIO=4&transport=polling&t=34jmdjcl 404 in 91ms
 GET /api/socket-health 200 in 24ms
 GET /socket.io?EIO=4&transport=polling&t=34ke933l 404 in 95ms
 GET /api/socket-health 200 in 21ms
 GET /socket.io?EIO=4&transport=polling&t=34l5ylsk 404 in 97ms
 GET /api/socket-health 200 in 32ms
 GET /socket.io?EIO=4&transport=polling&t=34lxzd4s 404 in 92ms
 GET /api/socket-health 200 in 22ms
 GET /socket.io?EIO=4&transport=polling&t=34mpqapr 404 in 95ms
 GET /api/socket-health 200 in 22ms
 GET /socket.io?EIO=4&transport=polling&t=34nhch55 404 in 96ms
 GET /api/socket-health 200 in 22ms
 GET /socket.io?EIO=4&transport=polling&t=34o8yrgx 404 in 94ms
 GET /api/socket-health 200 in 27ms
 GET /socket.io?EIO=4&transport=polling&t=34p19n33 404 in 99ms
 GET /api/socket-health 200 in 23ms
 GET /socket.io?EIO=4&transport=polling&t=34psuz8c 404 in 86ms
 GET /api/socket-health 200 in 23ms
 GET /socket.io?EIO=4&transport=polling&t=34qk9irz 404 in 89ms
 GET /api/socket-health 200 in 22ms
 GET /socket.io?EIO=4&transport=polling&t=34rcdfnk 404 in 105ms
 GET /api/socket-health 200 in 25ms
 GET /socket.io?EIO=4&transport=polling&t=34s4a2ta 404 in 92ms
 GET /api/socket-health 200 in 23ms
 GET /socket.io?EIO=4&transport=polling&t=34svvkxw 404 in 87ms
 GET /api/socket-health 200 in 23ms
 GET /socket.io?EIO=4&transport=polling&t=34tnm29d 404 in 87ms
 GET /api/socket-health 200 in 27ms
 GET /socket.io?EIO=4&transport=polling&t=34ufiy9y 404 in 95ms
 GET /api/socket-health 200 in 31ms
 GET /socket.io?EIO=4&transport=polling&t=34v7ek29 404 in 84ms
 GET /api/socket-health 200 in 22ms
 GET /socket.io?EIO=4&transport=polling&t=34vyu6qr 404 in 92ms
 GET /api/socket-health 200 in 23ms
 GET /socket.io?EIO=4&transport=polling&t=34wqm76p 404 in 90ms
 GET /api/socket-health 200 in 21ms
 GET /socket.io?EIO=4&transport=polling&t=34xidk59 404 in 90ms
 GET /api/socket-health 200 in 23ms
 GET /socket.io?EIO=4&transport=polling&t=34ya84ax 404 in 95ms
 GET /api/socket-health 200 in 28ms
 GET /socket.io?EIO=4&transport=polling&t=34z26j3r 404 in 93ms
 GET /api/socket-health 200 in 23ms
 GET /socket.io?EIO=4&transport=polling&t=34ztr8f0 404 in 91ms
 GET /api/socket-health 200 in 22ms
 GET /socket.io?EIO=4&transport=polling&t=350lgton 404 in 90ms
 GET /api/socket-health 200 in 22ms
 GET /socket.io?EIO=4&transport=polling&t=351d5ygk 404 in 95ms
 GET /api/socket-health 200 in 27ms
 GET /socket.io?EIO=4&transport=polling&t=3525fmrx 404 in 98ms
 GET /api/socket-health 200 in 25ms
 GET /socket.io?EIO=4&transport=polling&t=352x2mgf 404 in 93ms
 GET /api/socket-health 200 in 23ms
 GET /socket.io?EIO=4&transport=polling&t=353ot0vv 404 in 91ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
=== FRIEND REQUEST GET START ===
 GET /api/socket-health 200 in 59ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
Request type: received User: sayantan2@gmail.com
âœ… Database connected
 GET /socket.io?EIO=4&transport=polling&t=354hn2kn 404 in 97ms
 POST /api/users/heartbeat 200 in 235ms
âœ… Current user found: {
  id: new ObjectId('6901f85f42c5d010fa811206'),
  email: 'sayantan2@gmail.com',
  friendRequestsCount: 0,
  sentRequestsCount: 1
}
Processing received requests...
Raw friendRequests: []
Processed receivedRequests: []
Populating sender details...
Final populated requests: []
=== FRIEND REQUEST GET END (received) ===
 GET /api/friends/request?type=received 200 in 424ms
=== FRIEND REQUEST GET START ===
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
Request type: sent User: sayantan2@gmail.com
âœ… Database connected
âœ… Current user found: {
  id: new ObjectId('6901f85f42c5d010fa811206'),
  email: 'sayantan2@gmail.com',
  friendRequestsCount: 0,
  sentRequestsCount: 1
}
Processing sent requests...
Raw sentRequests: [
  {
    from: new ObjectId('6901f85f42c5d010fa811206'),
    fromName: 'sayantan2',
    to: new ObjectId('6905adf16a22b7843b006183'),
    toName: 'sayantan3',
    status: 'pending',
    _id: new ObjectId('6905cdce14ad0d0f020b3985'),
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
Filtering sent request: { status: 'pending', to: new ObjectId('6905adf16a22b7843b006183') }
Mapping sent request: {
  from: new ObjectId('6901f85f42c5d010fa811206'),
  fromName: 'sayantan2',
  to: new ObjectId('6905adf16a22b7843b006183'),
  toName: 'sayantan3',
  status: 'pending',
  _id: new ObjectId('6905cdce14ad0d0f020b3985'),
  createdAt: 2025-11-01T09:07:26.707Z,
  updatedAt: 2025-11-01T09:07:26.707Z
}
Processed sentRequests: [
  {
    id: '6905cdce14ad0d0f020b3985',
    to: {
      id: '6905adf16a22b7843b006183',
      username: 'sayantan3',
      email: '',
      profilePicture: null
    },
    status: 'pending',
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
Populating recipient details...
Looking up recipient: 6905adf16a22b7843b006183
Found recipient: sayantan3
Final populated sent requests: [
  {
    id: '6905cdce14ad0d0f020b3985',
    to: {
      id: '6905adf16a22b7843b006183',
      username: 'sayantan3',
      email: 'sayantan3@gmail.com',
      profilePicture: undefined
    },
    status: 'pending',
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
=== FRIEND REQUEST GET END (sent) ===
 GET /api/friends/request?type=sent 200 in 132ms
 GET /api/socket-health 200 in 27ms
 GET /socket.io?EIO=4&transport=polling&t=3558f5ph 404 in 93ms
 GET /api/socket-health 200 in 34ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
 GET /socket.io?EIO=4&transport=polling&t=3560clej 404 in 96ms
 GET /api/conversations 200 in 169ms
 GET /api/socket-health 200 in 28ms
 GET /socket.io?EIO=4&transport=polling&t=356rw3fc 404 in 95ms
 GET /api/socket-health 200 in 23ms
 GET /socket.io?EIO=4&transport=polling&t=357jj7mv 404 in 92ms
 GET /api/socket-health 200 in 21ms
 GET /socket.io?EIO=4&transport=polling&t=358b936q 404 in 91ms
 GET /api/socket-health 200 in 22ms
 GET /socket.io?EIO=4&transport=polling&t=35930i41 404 in 84ms
 GET /api/socket-health 200 in 21ms
 GET /socket.io?EIO=4&transport=polling&t=359v07mw 404 in 94ms
 GET /api/socket-health 200 in 31ms
 GET /socket.io?EIO=4&transport=polling&t=35amp70d 404 in 97ms
 GET /api/socket-health 200 in 24ms
 GET /socket.io?EIO=4&transport=polling&t=35bemish 404 in 85ms
 GET /api/socket-health 200 in 23ms
 GET /socket.io?EIO=4&transport=polling&t=35c6e6fg 404 in 94ms
 GET /api/socket-health 200 in 22ms
 GET /socket.io?EIO=4&transport=polling&t=35cy37n3 404 in 94ms
 GET /api/socket-health 200 in 30ms
 GET /socket.io?EIO=4&transport=polling&t=35dq37rh 404 in 94ms
 GET /api/socket-health 200 in 24ms
 GET /socket.io?EIO=4&transport=polling&t=35ehm9ep 404 in 89ms
 GET /api/socket-health 200 in 22ms
 GET /socket.io?EIO=4&transport=polling&t=35f9b6ss 404 in 100ms
 GET /api/socket-health 200 in 22ms
 GET /socket.io?EIO=4&transport=polling&t=35g16qtg 404 in 93ms
 GET /api/socket-health 200 in 29ms
 GET /socket.io?EIO=4&transport=polling&t=35gsu75m 404 in 93ms
 GET /api/socket-health 200 in 36ms
 GET /socket.io?EIO=4&transport=polling&t=35hl9aj0 404 in 95ms
 GET /api/socket-health 200 in 25ms
 GET /socket.io?EIO=4&transport=polling&t=35icpidi 404 in 105ms
 GET /api/socket-health 200 in 22ms
 GET /socket.io?EIO=4&transport=polling&t=35j4firl 404 in 104ms
 GET /api/socket-health 200 in 25ms
 GET /socket.io?EIO=4&transport=polling&t=35jw8jhh 404 in 104ms
 GET /api/socket-health 200 in 42ms
 GET /socket.io?EIO=4&transport=polling&t=35koh5sg 404 in 100ms
 GET /api/socket-health 200 in 26ms
 GET /socket.io?EIO=4&transport=polling&t=35lfui5h 404 in 93ms
 GET /api/socket-health 200 in 23ms
 GET /socket.io?EIO=4&transport=polling&t=35m7gqg6 404 in 95ms
 GET /api/socket-health 200 in 25ms
 GET /socket.io?EIO=4&transport=polling&t=35mzc24o 404 in 100ms
 GET /api/socket-health 200 in 22ms
 GET /socket.io?EIO=4&transport=polling&t=35nqztok 404 in 83ms
 GET /api/socket-health 200 in 45ms
 GET /socket.io?EIO=4&transport=polling&t=35ojljgg 404 in 93ms
 GET /api/socket-health 200 in 27ms
 GET /socket.io?EIO=4&transport=polling&t=35papm1l 404 in 223ms
 GET /api/socket-health 200 in 28ms
 GET /socket.io?EIO=4&transport=polling&t=35q2jypt 404 in 97ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
=== FRIEND REQUEST GET START ===
 GET /api/socket-health 200 in 69ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
Request type: received User: sayantan2@gmail.com
âœ… Database connected
âœ… Current user found: {
  id: new ObjectId('6901f85f42c5d010fa811206'),
  email: 'sayantan2@gmail.com',
  friendRequestsCount: 0,
  sentRequestsCount: 1
}
Processing received requests...
Raw friendRequests: []
Processed receivedRequests: []
Populating sender details...
Final populated requests: []
=== FRIEND REQUEST GET END (received) ===
 GET /api/friends/request?type=received 200 in 173ms
=== FRIEND REQUEST GET START ===
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
Request type: sent User: sayantan2@gmail.com
âœ… Database connected
 GET /api/friends 200 in 211ms
 GET /socket.io?EIO=4&transport=polling&t=35qw3e6v 404 in 133ms
âœ… Current user found: {
  id: new ObjectId('6901f85f42c5d010fa811206'),
  email: 'sayantan2@gmail.com',
  friendRequestsCount: 0,
  sentRequestsCount: 1
}
Processing sent requests...
Raw sentRequests: [
  {
    from: new ObjectId('6901f85f42c5d010fa811206'),
    fromName: 'sayantan2',
    to: new ObjectId('6905adf16a22b7843b006183'),
    toName: 'sayantan3',
    status: 'pending',
    _id: new ObjectId('6905cdce14ad0d0f020b3985'),
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
Filtering sent request: { status: 'pending', to: new ObjectId('6905adf16a22b7843b006183') }
Mapping sent request: {
  from: new ObjectId('6901f85f42c5d010fa811206'),
  fromName: 'sayantan2',
  to: new ObjectId('6905adf16a22b7843b006183'),
  toName: 'sayantan3',
  status: 'pending',
  _id: new ObjectId('6905cdce14ad0d0f020b3985'),
  createdAt: 2025-11-01T09:07:26.707Z,
  updatedAt: 2025-11-01T09:07:26.707Z
}
Processed sentRequests: [
  {
    id: '6905cdce14ad0d0f020b3985',
    to: {
      id: '6905adf16a22b7843b006183',
      username: 'sayantan3',
      email: '',
      profilePicture: null
    },
    status: 'pending',
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
Populating recipient details...
Looking up recipient: 6905adf16a22b7843b006183
Found recipient: sayantan3
Final populated sent requests: [
  {
    id: '6905cdce14ad0d0f020b3985',
    to: {
      id: '6905adf16a22b7843b006183',
      username: 'sayantan3',
      email: 'sayantan3@gmail.com',
      profilePicture: undefined
    },
    status: 'pending',
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
=== FRIEND REQUEST GET END (sent) ===
 GET /api/friends/request?type=sent 200 in 109ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
 GET /api/socket-health 200 in 58ms
 GET /socket.io?EIO=4&transport=polling&t=35rmuyxy 404 in 107ms
 POST /api/users/heartbeat 200 in 251ms
 GET /api/socket-health 200 in 25ms
 GET /socket.io?EIO=4&transport=polling&t=35sdpblu 404 in 107ms
 GET /api/socket-health 200 in 23ms
 GET /socket.io?EIO=4&transport=polling&t=35t5d43d 404 in 100ms
 GET /api/socket-health 200 in 41ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
 GET /socket.io?EIO=4&transport=polling&t=35txrn4s 404 in 96ms
 GET /api/conversations 200 in 168ms
 GET /api/socket-health 200 in 24ms
 GET /socket.io?EIO=4&transport=polling&t=35up2kz4 404 in 87ms
 GET /api/socket-health 200 in 34ms
 GET /socket.io?EIO=4&transport=polling&t=35vh09am 404 in 103ms
 GET /api/socket-health 200 in 28ms
 GET /socket.io?EIO=4&transport=polling&t=35w8l29s 404 in 121ms
 GET /api/socket-health 200 in 22ms
 GET /socket.io?EIO=4&transport=polling&t=35x0dq5j 404 in 97ms
 GET /api/socket-health 200 in 29ms
 GET /socket.io?EIO=4&transport=polling&t=35xs8niu 404 in 108ms
 GET /api/socket-health 200 in 24ms
 GET /socket.io?EIO=4&transport=polling&t=35yjt53u 404 in 95ms
 GET /api/socket-health 200 in 26ms
 GET /socket.io?EIO=4&transport=polling&t=35zbkbb9 404 in 99ms
 GET /api/socket-health 200 in 31ms
 GET /socket.io?EIO=4&transport=polling&t=3603gwu4 404 in 96ms
 GET /api/socket-health 200 in 21ms
 GET /socket.io?EIO=4&transport=polling&t=360vbkhu 404 in 100ms
 GET /api/socket-health 200 in 27ms
 GET /socket.io?EIO=4&transport=polling&t=361mtcji 404 in 105ms
 GET /api/socket-health 200 in 21ms
 GET /socket.io?EIO=4&transport=polling&t=362ev0xf 404 in 98ms
 GET /api/socket-health 200 in 25ms
 GET /socket.io?EIO=4&transport=polling&t=3636dc90 404 in 112ms
 GET /api/socket-health 200 in 28ms
 GET /socket.io?EIO=4&transport=polling&t=363yiira 404 in 91ms
 GET /api/socket-health 200 in 22ms
 GET /socket.io?EIO=4&transport=polling&t=364q1zls 404 in 92ms
 GET /api/socket-health 200 in 25ms
 GET /socket.io?EIO=4&transport=polling&t=365ht2c4 404 in 97ms
 GET /api/socket-health 200 in 23ms
 GET /socket.io?EIO=4&transport=polling&t=3669j8ds 404 in 104ms
 GET /api/socket-health 200 in 30ms
 GET /socket.io?EIO=4&transport=polling&t=3671g1lo 404 in 95ms
 GET /api/socket-health 200 in 22ms
 GET /socket.io?EIO=4&transport=polling&t=367sx6oa 404 in 101ms
 GET /api/socket-health 200 in 22ms
 GET /socket.io?EIO=4&transport=polling&t=368kzt8k 404 in 98ms
 GET /api/socket-health 200 in 23ms
 GET /socket.io?EIO=4&transport=polling&t=369cqozm 404 in 100ms
 GET /api/socket-health 200 in 27ms
 GET /socket.io?EIO=4&transport=polling&t=36a4fagv 404 in 117ms
 GET /api/socket-health 200 in 27ms
 GET /socket.io?EIO=4&transport=polling&t=36awjeym 404 in 91ms
 GET /api/socket-health 200 in 42ms
 GET /socket.io?EIO=4&transport=polling&t=36bopwj7 404 in 112ms
 GET /api/socket-health 200 in 22ms
 GET /socket.io?EIO=4&transport=polling&t=36cfwt0l 404 in 139ms
 GET /api/socket-health 200 in 24ms
 GET /socket.io?EIO=4&transport=polling&t=36d7r4zq 404 in 102ms
 GET /api/socket-health 200 in 30ms
 GET /socket.io?EIO=4&transport=polling&t=36dzm4f2 404 in 103ms
=== FRIEND REQUEST GET START ===
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
 GET /api/socket-health 200 in 56ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
Request type: received User: sayantan2@gmail.com
âœ… Database connected
 GET /socket.io?EIO=4&transport=polling&t=36es6fc2 404 in 95ms
 POST /api/users/heartbeat 200 in 228ms
âœ… Current user found: {
  id: new ObjectId('6901f85f42c5d010fa811206'),
  email: 'sayantan2@gmail.com',
  friendRequestsCount: 0,
  sentRequestsCount: 1
}
Processing received requests...
Raw friendRequests: []
Processed receivedRequests: []
Populating sender details...
Final populated requests: []
=== FRIEND REQUEST GET END (received) ===
 GET /api/friends/request?type=received 200 in 488ms
=== FRIEND REQUEST GET START ===
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
Request type: sent User: sayantan2@gmail.com
âœ… Database connected
âœ… Current user found: {
  id: new ObjectId('6901f85f42c5d010fa811206'),
  email: 'sayantan2@gmail.com',
  friendRequestsCount: 0,
  sentRequestsCount: 1
}
Processing sent requests...
Raw sentRequests: [
  {
    from: new ObjectId('6901f85f42c5d010fa811206'),
    fromName: 'sayantan2',
    to: new ObjectId('6905adf16a22b7843b006183'),
    toName: 'sayantan3',
    status: 'pending',
    _id: new ObjectId('6905cdce14ad0d0f020b3985'),
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
Filtering sent request: { status: 'pending', to: new ObjectId('6905adf16a22b7843b006183') }
Mapping sent request: {
  from: new ObjectId('6901f85f42c5d010fa811206'),
  fromName: 'sayantan2',
  to: new ObjectId('6905adf16a22b7843b006183'),
  toName: 'sayantan3',
  status: 'pending',
  _id: new ObjectId('6905cdce14ad0d0f020b3985'),
  createdAt: 2025-11-01T09:07:26.707Z,
  updatedAt: 2025-11-01T09:07:26.707Z
}
Processed sentRequests: [
  {
    id: '6905cdce14ad0d0f020b3985',
    to: {
      id: '6905adf16a22b7843b006183',
      username: 'sayantan3',
      email: '',
      profilePicture: null
    },
    status: 'pending',
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
Populating recipient details...
Looking up recipient: 6905adf16a22b7843b006183
Found recipient: sayantan3
Final populated sent requests: [
  {
    id: '6905cdce14ad0d0f020b3985',
    to: {
      id: '6905adf16a22b7843b006183',
      username: 'sayantan3',
      email: 'sayantan3@gmail.com',
      profilePicture: undefined
    },
    status: 'pending',
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
=== FRIEND REQUEST GET END (sent) ===
 GET /api/friends/request?type=sent 200 in 129ms
 GET /api/socket-health 200 in 21ms
 GET /socket.io?EIO=4&transport=polling&t=36fiurn8 404 in 99ms
 GET /api/socket-health 200 in 31ms
 GET /socket.io?EIO=4&transport=polling&t=36gay11c 404 in 97ms
 GET /api/socket-health 200 in 22ms
 GET /socket.io?EIO=4&transport=polling&t=36h2houq 404 in 92ms
 GET /api/socket-health 200 in 34ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
 GET /socket.io?EIO=4&transport=polling&t=36huks0h 404 in 100ms
 GET /api/conversations 200 in 170ms
 GET /api/socket-health 200 in 32ms
 GET /socket.io?EIO=4&transport=polling&t=36im71o9 404 in 114ms
 GET /api/socket-health 200 in 23ms
 GET /socket.io?EIO=4&transport=polling&t=36jdw3hz 404 in 96ms
 GET /api/socket-health 200 in 24ms
 GET /socket.io?EIO=4&transport=polling&t=36k5n73h 404 in 95ms
 GET /api/socket-health 200 in 24ms
 GET /socket.io?EIO=4&transport=polling&t=36kxdquu 404 in 113ms
 GET /api/socket-health 200 in 35ms
 GET /socket.io?EIO=4&transport=polling&t=36lpdy7e 404 in 94ms
 GET /api/socket-health 200 in 24ms
 GET /socket.io?EIO=4&transport=polling&t=36mgte7q 404 in 92ms
 GET /api/socket-health 200 in 22ms
 GET /socket.io?EIO=4&transport=polling&t=36n8th2l 404 in 96ms
 GET /api/socket-health 200 in 27ms
 GET /socket.io?EIO=4&transport=polling&t=36o13qnc 404 in 96ms
 GET /api/socket-health 200 in 32ms
 GET /socket.io?EIO=4&transport=polling&t=36oskugy 404 in 94ms
 GET /api/socket-health 200 in 23ms
 GET /socket.io?EIO=4&transport=polling&t=36pjthu0 404 in 100ms
 GET /api/socket-health 200 in 22ms
 GET /socket.io?EIO=4&transport=polling&t=36qbzvu7 404 in 96ms
 GET /api/socket-health 200 in 25ms
 GET /socket.io?EIO=4&transport=polling&t=36r3tv1m 404 in 97ms
 GET /api/socket-health 200 in 27ms
 GET /socket.io?EIO=4&transport=polling&t=36rvnd6j 404 in 97ms
 GET /api/socket-health 200 in 34ms
 GET /socket.io?EIO=4&transport=polling&t=36snmxzr 404 in 116ms
 GET /api/socket-health 200 in 22ms
 GET /socket.io?EIO=4&transport=polling&t=36tewh03 404 in 92ms
 GET /api/socket-health 200 in 28ms
 GET /socket.io?EIO=4&transport=polling&t=36u6tw3j 404 in 111ms
 GET /api/socket-health 200 in 25ms
 GET /socket.io?EIO=4&transport=polling&t=36uyhwjp 404 in 108ms
 GET /api/socket-health 200 in 34ms
 GET /socket.io?EIO=4&transport=polling&t=36vqgqy4 404 in 111ms
 GET /api/socket-health 200 in 54ms
 GET /socket.io?EIO=4&transport=polling&t=36wisevw 404 in 119ms
 GET /api/socket-health 200 in 28ms
 GET /socket.io?EIO=4&transport=polling&t=36x9rdjw 404 in 120ms
 GET /api/socket-health 200 in 24ms
 GET /socket.io?EIO=4&transport=polling&t=36y1irxx 404 in 120ms
 GET /api/socket-health 200 in 49ms
 GET /socket.io?EIO=4&transport=polling&t=36yu6wgh 404 in 174ms
 GET /api/socket-health 200 in 37ms
 GET /socket.io?EIO=4&transport=polling&t=36zlkwdv 404 in 121ms
 GET /api/socket-health 200 in 24ms
 GET /socket.io?EIO=4&transport=polling&t=370cz9u3 404 in 94ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
=== FRIEND REQUEST GET START ===
 GET /api/socket-health 200 in 78ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
Request type: received User: sayantan2@gmail.com
âœ… Database connected
âœ… Current user found: {
  id: new ObjectId('6901f85f42c5d010fa811206'),
  email: 'sayantan2@gmail.com',
  friendRequestsCount: 0,
  sentRequestsCount: 1
}
Processing received requests...
Raw friendRequests: []
Processed receivedRequests: []
Populating sender details...
Final populated requests: []
=== FRIEND REQUEST GET END (received) ===
 GET /api/friends/request?type=received 200 in 177ms
=== FRIEND REQUEST GET START ===
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
Request type: sent User: sayantan2@gmail.com
âœ… Database connected
 GET /socket.io?EIO=4&transport=polling&t=371752f1 404 in 137ms
 GET /api/friends 200 in 231ms
âœ… Current user found: {
  id: new ObjectId('6901f85f42c5d010fa811206'),
  email: 'sayantan2@gmail.com',
  friendRequestsCount: 0,
  sentRequestsCount: 1
}
Processing sent requests...
Raw sentRequests: [
  {
    from: new ObjectId('6901f85f42c5d010fa811206'),
    fromName: 'sayantan2',
    to: new ObjectId('6905adf16a22b7843b006183'),
    toName: 'sayantan3',
    status: 'pending',
    _id: new ObjectId('6905cdce14ad0d0f020b3985'),
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
Filtering sent request: { status: 'pending', to: new ObjectId('6905adf16a22b7843b006183') }
Mapping sent request: {
  from: new ObjectId('6901f85f42c5d010fa811206'),
  fromName: 'sayantan2',
  to: new ObjectId('6905adf16a22b7843b006183'),
  toName: 'sayantan3',
  status: 'pending',
  _id: new ObjectId('6905cdce14ad0d0f020b3985'),
  createdAt: 2025-11-01T09:07:26.707Z,
  updatedAt: 2025-11-01T09:07:26.707Z
}
Processed sentRequests: [
  {
    id: '6905cdce14ad0d0f020b3985',
    to: {
      id: '6905adf16a22b7843b006183',
      username: 'sayantan3',
      email: '',
      profilePicture: null
    },
    status: 'pending',
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
Populating recipient details...
Looking up recipient: 6905adf16a22b7843b006183
Found recipient: sayantan3
Final populated sent requests: [
  {
    id: '6905cdce14ad0d0f020b3985',
    to: {
      id: '6905adf16a22b7843b006183',
      username: 'sayantan3',
      email: 'sayantan3@gmail.com',
      profilePicture: undefined
    },
    status: 'pending',
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
=== FRIEND REQUEST GET END (sent) ===
 GET /api/friends/request?type=sent 200 in 136ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
 GET /api/socket-health 200 in 76ms
 POST /api/users/heartbeat 200 in 317ms
 GET /socket.io?EIO=4&transport=polling&t=371xvc0i 404 in 224ms
 GET /api/socket-health 200 in 26ms
 GET /socket.io?EIO=4&transport=polling&t=372oc7xy 404 in 91ms
 GET /api/socket-health 200 in 23ms
 GET /socket.io?EIO=4&transport=polling&t=373g037s 404 in 96ms
 GET /api/socket-health 200 in 22ms
 GET /socket.io?EIO=4&transport=polling&t=3747udtg 404 in 92ms
 GET /api/socket-health 200 in 24ms
 GET /socket.io?EIO=4&transport=polling&t=374zpg5r 404 in 96ms
 GET /api/socket-health 200 in 47ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
 GET /socket.io?EIO=4&transport=polling&t=375s25cs 404 in 103ms
 GET /api/conversations 200 in 182ms
 GET /api/socket-health 200 in 23ms
 GET /socket.io?EIO=4&transport=polling&t=376jdkp1 404 in 96ms
 GET /api/socket-health 200 in 25ms
 GET /socket.io?EIO=4&transport=polling&t=377asaf4 404 in 97ms
 GET /api/socket-health 200 in 22ms
 GET /socket.io?EIO=4&transport=polling&t=3782kal9 404 in 92ms
 GET /api/socket-health 200 in 31ms
 GET /socket.io?EIO=4&transport=polling&t=378utknw 404 in 108ms
 GET /api/socket-health 200 in 25ms
 GET /socket.io?EIO=4&transport=polling&t=379mexrx 404 in 115ms
 GET /api/socket-health 200 in 22ms
 GET /socket.io?EIO=4&transport=polling&t=37ady3jy 404 in 98ms
 GET /api/socket-health 200 in 29ms
 GET /socket.io?EIO=4&transport=polling&t=37b5wvei 404 in 114ms
 GET /api/socket-health 200 in 32ms
 GET /socket.io?EIO=4&transport=polling&t=37bxw4m0 404 in 100ms
 GET /api/socket-health 200 in 29ms
 GET /socket.io?EIO=4&transport=polling&t=37cplbtu 404 in 102ms
 GET /api/socket-health 200 in 39ms
 GET /socket.io?EIO=4&transport=polling&t=37dhqf8i 404 in 109ms
 GET /api/socket-health 200 in 26ms
 GET /socket.io?EIO=4&transport=polling&t=37e91wbe 404 in 100ms
 GET /api/socket-health 200 in 27ms
 GET /socket.io?EIO=4&transport=polling&t=37f0v4lb 404 in 100ms
 GET /api/socket-health 200 in 23ms
 GET /socket.io?EIO=4&transport=polling&t=37fsi357 404 in 90ms
 GET /api/socket-health 200 in 22ms
 GET /socket.io?EIO=4&transport=polling&t=37gk3kk3 404 in 95ms
 GET /api/socket-health 200 in 25ms
 GET /socket.io?EIO=4&transport=polling&t=37hc4464 404 in 91ms
 GET /api/socket-health 200 in 27ms
 GET /socket.io?EIO=4&transport=polling&t=37i3xaxj 404 in 96ms
 GET /api/socket-health 200 in 24ms
 GET /socket.io?EIO=4&transport=polling&t=37ivhre0 404 in 94ms
 GET /api/socket-health 200 in 22ms
 GET /socket.io?EIO=4&transport=polling&t=37jn6fl0 404 in 98ms
 GET /api/socket-health 200 in 23ms
 GET /socket.io?EIO=4&transport=polling&t=37kf1yj6 404 in 92ms
 GET /api/socket-health 200 in 22ms
 GET /socket.io?EIO=4&transport=polling&t=37l6rpi1 404 in 87ms
 GET /api/socket-health 200 in 29ms
 GET /socket.io?EIO=4&transport=polling&t=37lyuama 404 in 92ms
 GET /api/socket-health 200 in 23ms
 GET /socket.io?EIO=4&transport=polling&t=37mqgo78 404 in 90ms
 GET /api/socket-health 200 in 23ms
 GET /socket.io?EIO=4&transport=polling&t=37ni463x 404 in 95ms
 GET /api/socket-health 200 in 23ms
 GET /socket.io?EIO=4&transport=polling&t=37o9vhpy 404 in 112ms
 GET /api/socket-health 200 in 54ms
=== FRIEND REQUEST GET START ===
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
Request type: received User: sayantan2@gmail.com
âœ… Database connected
âœ… Current user found: {
  id: new ObjectId('6901f85f42c5d010fa811206'),
  email: 'sayantan2@gmail.com',
  friendRequestsCount: 0,
  sentRequestsCount: 1
}
Processing received requests...
Raw friendRequests: []
Processed receivedRequests: []
Populating sender details...
Final populated requests: []
=== FRIEND REQUEST GET END (received) ===
 GET /api/friends/request?type=received 200 in 177ms
=== FRIEND REQUEST GET START ===
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
Request type: sent User: sayantan2@gmail.com
âœ… Database connected
 GET /socket.io?EIO=4&transport=polling&t=37p2k8bb 404 in 165ms
âœ… Current user found: {
  id: new ObjectId('6901f85f42c5d010fa811206'),
  email: 'sayantan2@gmail.com',
  friendRequestsCount: 0,
  sentRequestsCount: 1
}
Processing sent requests...
Raw sentRequests: [
  {
    from: new ObjectId('6901f85f42c5d010fa811206'),
    fromName: 'sayantan2',
    to: new ObjectId('6905adf16a22b7843b006183'),
    toName: 'sayantan3',
    status: 'pending',
    _id: new ObjectId('6905cdce14ad0d0f020b3985'),
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
Filtering sent request: { status: 'pending', to: new ObjectId('6905adf16a22b7843b006183') }
Mapping sent request: {
  from: new ObjectId('6901f85f42c5d010fa811206'),
  fromName: 'sayantan2',
  to: new ObjectId('6905adf16a22b7843b006183'),
  toName: 'sayantan3',
  status: 'pending',
  _id: new ObjectId('6905cdce14ad0d0f020b3985'),
  createdAt: 2025-11-01T09:07:26.707Z,
  updatedAt: 2025-11-01T09:07:26.707Z
}
Processed sentRequests: [
  {
    id: '6905cdce14ad0d0f020b3985',
    to: {
      id: '6905adf16a22b7843b006183',
      username: 'sayantan3',
      email: '',
      profilePicture: null
    },
    status: 'pending',
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
Populating recipient details...
Looking up recipient: 6905adf16a22b7843b006183
Found recipient: sayantan3
Final populated sent requests: [
  {
    id: '6905cdce14ad0d0f020b3985',
    to: {
      id: '6905adf16a22b7843b006183',
      username: 'sayantan3',
      email: 'sayantan3@gmail.com',
      profilePicture: undefined
    },
    status: 'pending',
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
=== FRIEND REQUEST GET END (sent) ===
 GET /api/friends/request?type=sent 200 in 116ms
 GET /api/socket-health 200 in 28ms
 GET /socket.io?EIO=4&transport=polling&t=37ptv1oi 404 in 103ms
 GET /api/socket-health 200 in 23ms
 GET /socket.io?EIO=4&transport=polling&t=37qlf466 404 in 110ms
 GET /api/socket-health 200 in 22ms
 GET /socket.io?EIO=4&transport=polling&t=37rd1mjm 404 in 98ms
 GET /api/socket-health 200 in 23ms
 GET /socket.io?EIO=4&transport=polling&t=37s4w8zl 404 in 99ms
 GET /api/socket-health 200 in 25ms
 GET /socket.io?EIO=4&transport=polling&t=37swni0w 404 in 96ms
 GET /api/socket-health 200 in 40ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
 GET /socket.io?EIO=4&transport=polling&t=37towue8 404 in 101ms
 GET /api/conversations 200 in 182ms
 GET /api/socket-health 200 in 25ms
 GET /socket.io?EIO=4&transport=polling&t=37ug7g6s 404 in 109ms
 GET /api/socket-health 200 in 29ms
 GET /socket.io?EIO=4&transport=polling&t=37v8561k 404 in 93ms
 GET /api/socket-health 200 in 22ms
 GET /socket.io?EIO=4&transport=polling&t=37vzsgby 404 in 93ms
 GET /api/socket-health 200 in 22ms
 GET /socket.io?EIO=4&transport=polling&t=37wri8up 404 in 90ms
 GET /api/socket-health 200 in 22ms
 GET /socket.io?EIO=4&transport=polling&t=37xj6u52 404 in 90ms
 GET /api/socket-health 200 in 24ms
 GET /socket.io?EIO=4&transport=polling&t=37yb12fw 404 in 87ms
 GET /api/socket-health 200 in 27ms
 GET /socket.io?EIO=4&transport=polling&t=37z2ze0x 404 in 90ms
 GET /api/socket-health 200 in 21ms
 GET /socket.io?EIO=4&transport=polling&t=37zuq0a1 404 in 93ms
 GET /api/socket-health 200 in 22ms
 GET /socket.io?EIO=4&transport=polling&t=380me8g9 404 in 97ms
 GET /api/socket-health 200 in 32ms
 GET /socket.io?EIO=4&transport=polling&t=381eecl4 404 in 101ms
 GET /api/socket-health 200 in 33ms
 GET /socket.io?EIO=4&transport=polling&t=382654px 404 in 91ms
 GET /api/socket-health 200 in 25ms
 GET /socket.io?EIO=4&transport=polling&t=382y1ns3 404 in 97ms
 GET /api/socket-health 200 in 25ms
 GET /socket.io?EIO=4&transport=polling&t=383psk1g 404 in 108ms
 GET /api/socket-health 200 in 29ms
 GET /socket.io?EIO=4&transport=polling&t=384hdi92 404 in 93ms
 GET /api/socket-health 200 in 23ms
 GET /socket.io?EIO=4&transport=polling&t=38597pl5 404 in 106ms
 GET /api/socket-health 200 in 28ms
 GET /socket.io?EIO=4&transport=polling&t=386130zk 404 in 95ms
 GET /api/socket-health 200 in 24ms
 GET /socket.io?EIO=4&transport=polling&t=386srtjs 404 in 92ms
 GET /api/socket-health 200 in 30ms
 GET /socket.io?EIO=4&transport=polling&t=387kq0d7 404 in 95ms
 GET /api/socket-health 200 in 23ms
 GET /socket.io?EIO=4&transport=polling&t=388cdlnm 404 in 111ms
 GET /api/socket-health 200 in 27ms
 GET /socket.io?EIO=4&transport=polling&t=3894bkbd 404 in 98ms
 GET /api/socket-health 200 in 22ms
 GET /socket.io?EIO=4&transport=polling&t=389vl5hn 404 in 89ms
 GET /api/socket-health 200 in 27ms
 GET /socket.io?EIO=4&transport=polling&t=38anvyi1 404 in 96ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
=== FRIEND REQUEST GET START ===
 GET /api/socket-health 200 in 70ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
Request type: received User: sayantan2@gmail.com
âœ… Database connected
 GET /socket.io?EIO=4&transport=polling&t=38bhedv0 404 in 107ms
 GET /api/friends 200 in 227ms
âœ… Current user found: {
  id: new ObjectId('6901f85f42c5d010fa811206'),
  email: 'sayantan2@gmail.com',
  friendRequestsCount: 0,
  sentRequestsCount: 1
}
Processing received requests...
Raw friendRequests: []
Processed receivedRequests: []
Populating sender details...
Final populated requests: []
=== FRIEND REQUEST GET END (received) ===
 GET /api/friends/request?type=received 200 in 486ms
=== FRIEND REQUEST GET START ===
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
Request type: sent User: sayantan2@gmail.com
âœ… Database connected
âœ… Current user found: {
  id: new ObjectId('6901f85f42c5d010fa811206'),
  email: 'sayantan2@gmail.com',
  friendRequestsCount: 0,
  sentRequestsCount: 1
}
Processing sent requests...
Raw sentRequests: [
  {
    from: new ObjectId('6901f85f42c5d010fa811206'),
    fromName: 'sayantan2',
    to: new ObjectId('6905adf16a22b7843b006183'),
    toName: 'sayantan3',
    status: 'pending',
    _id: new ObjectId('6905cdce14ad0d0f020b3985'),
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
Filtering sent request: { status: 'pending', to: new ObjectId('6905adf16a22b7843b006183') }
Mapping sent request: {
  from: new ObjectId('6901f85f42c5d010fa811206'),
  fromName: 'sayantan2',
  to: new ObjectId('6905adf16a22b7843b006183'),
  toName: 'sayantan3',
  status: 'pending',
  _id: new ObjectId('6905cdce14ad0d0f020b3985'),
  createdAt: 2025-11-01T09:07:26.707Z,
  updatedAt: 2025-11-01T09:07:26.707Z
}
Processed sentRequests: [
  {
    id: '6905cdce14ad0d0f020b3985',
    to: {
      id: '6905adf16a22b7843b006183',
      username: 'sayantan3',
      email: '',
      profilePicture: null
    },
    status: 'pending',
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
Populating recipient details...
Looking up recipient: 6905adf16a22b7843b006183
 POST /api/users/heartbeat 200 in 598ms
Found recipient: sayantan3
Final populated sent requests: [
  {
    id: '6905cdce14ad0d0f020b3985',
    to: {
      id: '6905adf16a22b7843b006183',
      username: 'sayantan3',
      email: 'sayantan3@gmail.com',
      profilePicture: undefined
    },
    status: 'pending',
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
=== FRIEND REQUEST GET END (sent) ===
 GET /api/friends/request?type=sent 200 in 112ms
 GET /api/socket-health 200 in 23ms
 GET /socket.io?EIO=4&transport=polling&t=38c7189u 404 in 95ms
 GET /api/socket-health 200 in 22ms
 GET /socket.io?EIO=4&transport=polling&t=38cz105j 404 in 92ms
 GET /api/socket-health 200 in 23ms
 GET /socket.io?EIO=4&transport=polling&t=38dqhbji 404 in 93ms
 GET /api/socket-health 200 in 21ms
 GET /socket.io?EIO=4&transport=polling&t=38eilh3f 404 in 98ms
 GET /api/socket-health 200 in 28ms
 GET /socket.io?EIO=4&transport=polling&t=38fahfyt 404 in 96ms
 GET /api/socket-health 200 in 23ms
 GET /socket.io?EIO=4&transport=polling&t=38g228ov 404 in 98ms
 GET /api/socket-health 200 in 24ms
 GET /socket.io?EIO=4&transport=polling&t=38gtqgxz 404 in 95ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
 GET /api/socket-health 200 in 46ms
 GET /socket.io?EIO=4&transport=polling&t=38hm2krs 404 in 97ms
 GET /api/conversations 200 in 169ms
 GET /api/socket-health 200 in 24ms
 GET /socket.io?EIO=4&transport=polling&t=38idanrw 404 in 93ms
 GET /api/socket-health 200 in 23ms
 GET /socket.io?EIO=4&transport=polling&t=38j5cpdj 404 in 90ms
 GET /api/socket-health 200 in 24ms
 GET /socket.io?EIO=4&transport=polling&t=38jx378b 404 in 93ms
 GET /api/socket-health 200 in 28ms
 GET /socket.io?EIO=4&transport=polling&t=38kp169h 404 in 93ms
 GET /api/socket-health 200 in 26ms
 GET /socket.io?EIO=4&transport=polling&t=38lgok8o 404 in 92ms
 GET /api/socket-health 200 in 23ms
 GET /socket.io?EIO=4&transport=polling&t=38m8emwc 404 in 98ms
 GET /api/socket-health 200 in 24ms
 GET /socket.io?EIO=4&transport=polling&t=38n03lku 404 in 94ms
 GET /api/socket-health 200 in 22ms
 GET /socket.io?EIO=4&transport=polling&t=38nry0bt 404 in 88ms
 GET /api/socket-health 200 in 28ms
 GET /socket.io?EIO=4&transport=polling&t=38ojv755 404 in 99ms
 GET /api/socket-health 200 in 22ms
 GET /socket.io?EIO=4&transport=polling&t=38pbfdwx 404 in 97ms
 GET /api/socket-health 200 in 23ms
 GET /socket.io?EIO=4&transport=polling&t=38q37afu 404 in 91ms
 GET /api/socket-health 200 in 22ms
 GET /socket.io?EIO=4&transport=polling&t=38quthjr 404 in 92ms
 GET /api/socket-health 200 in 31ms
 GET /socket.io?EIO=4&transport=polling&t=38rmut7h 404 in 100ms
 GET /api/socket-health 200 in 26ms
 GET /socket.io?EIO=4&transport=polling&t=38sehm8x 404 in 107ms
 GET /api/socket-health 200 in 23ms
 GET /socket.io?EIO=4&transport=polling&t=38t6bs3n 404 in 96ms
 GET /api/socket-health 200 in 24ms
 GET /socket.io?EIO=4&transport=polling&t=38txykhk 404 in 112ms
 GET /api/socket-health 200 in 24ms
 GET /socket.io?EIO=4&transport=polling&t=38upx6r5 404 in 94ms
 GET /api/socket-health 200 in 28ms
 GET /socket.io?EIO=4&transport=polling&t=38vhsbu3 404 in 91ms
 GET /api/socket-health 200 in 24ms
 GET /socket.io?EIO=4&transport=polling&t=38w9huby 404 in 100ms
 GET /api/socket-health 200 in 22ms
 GET /socket.io?EIO=4&transport=polling&t=38x14qg3 404 in 101ms
 GET /api/socket-health 200 in 25ms
 GET /socket.io?EIO=4&transport=polling&t=38xsvdas 404 in 102ms
 GET /api/socket-health 200 in 29ms
 GET /socket.io?EIO=4&transport=polling&t=38ykqjbk 404 in 97ms
 GET /api/socket-health 200 in 41ms
=== FRIEND REQUEST GET START ===
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
Request type: received User: sayantan2@gmail.com
âœ… Database connected
âœ… Current user found: {
  id: new ObjectId('6901f85f42c5d010fa811206'),
  email: 'sayantan2@gmail.com',
  friendRequestsCount: 0,
  sentRequestsCount: 1
}
Processing received requests...
Raw friendRequests: []
Processed receivedRequests: []
Populating sender details...
Final populated requests: []
=== FRIEND REQUEST GET END (received) ===
 GET /api/friends/request?type=received 200 in 156ms
=== FRIEND REQUEST GET START ===
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
Request type: sent User: sayantan2@gmail.com
âœ… Database connected
 GET /socket.io?EIO=4&transport=polling&t=38zd95h4 404 in 139ms
âœ… Current user found: {
  id: new ObjectId('6901f85f42c5d010fa811206'),
  email: 'sayantan2@gmail.com',
  friendRequestsCount: 0,
  sentRequestsCount: 1
}
Processing sent requests...
Raw sentRequests: [
  {
    from: new ObjectId('6901f85f42c5d010fa811206'),
    fromName: 'sayantan2',
    to: new ObjectId('6905adf16a22b7843b006183'),
    toName: 'sayantan3',
    status: 'pending',
    _id: new ObjectId('6905cdce14ad0d0f020b3985'),
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
Filtering sent request: { status: 'pending', to: new ObjectId('6905adf16a22b7843b006183') }
Mapping sent request: {
  from: new ObjectId('6901f85f42c5d010fa811206'),
  fromName: 'sayantan2',
  to: new ObjectId('6905adf16a22b7843b006183'),
  toName: 'sayantan3',
  status: 'pending',
  _id: new ObjectId('6905cdce14ad0d0f020b3985'),
  createdAt: 2025-11-01T09:07:26.707Z,
  updatedAt: 2025-11-01T09:07:26.707Z
}
Processed sentRequests: [
  {
    id: '6905cdce14ad0d0f020b3985',
    to: {
      id: '6905adf16a22b7843b006183',
      username: 'sayantan3',
      email: '',
      profilePicture: null
    },
    status: 'pending',
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
Populating recipient details...
Looking up recipient: 6905adf16a22b7843b006183
Found recipient: sayantan3
Final populated sent requests: [
  {
    id: '6905cdce14ad0d0f020b3985',
    to: {
      id: '6905adf16a22b7843b006183',
      username: 'sayantan3',
      email: 'sayantan3@gmail.com',
      profilePicture: undefined
    },
    status: 'pending',
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
=== FRIEND REQUEST GET END (sent) ===
 GET /api/friends/request?type=sent 200 in 111ms
 GET /api/socket-health 200 in 25ms
 GET /socket.io?EIO=4&transport=polling&t=3904d3me 404 in 105ms
 GET /api/socket-health 200 in 27ms
 GET /socket.io?EIO=4&transport=polling&t=390w5x5h 404 in 100ms
 GET /api/socket-health 200 in 29ms
 GET /socket.io?EIO=4&transport=polling&t=391o0gj7 404 in 111ms
 GET /api/socket-health 200 in 24ms
 GET /socket.io?EIO=4&transport=polling&t=392fg7zp 404 in 98ms
 GET /api/socket-health 200 in 28ms
 GET /socket.io?EIO=4&transport=polling&t=3937bjwv 404 in 97ms
 GET /api/socket-health 200 in 24ms
 GET /socket.io?EIO=4&transport=polling&t=393zch6n 404 in 94ms
 GET /api/socket-health 200 in 24ms
 GET /socket.io?EIO=4&transport=polling&t=394r1dn3 404 in 102ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
 GET /api/socket-health 200 in 57ms
 GET /socket.io?EIO=4&transport=polling&t=395jwfuy 404 in 101ms
 GET /api/conversations 200 in 423ms
 GET /api/socket-health 200 in 24ms
 GET /socket.io?EIO=4&transport=polling&t=396aa4d8 404 in 88ms
 GET /api/socket-health 200 in 24ms
 GET /socket.io?EIO=4&transport=polling&t=39726w5j 404 in 129ms
 GET /api/socket-health 200 in 22ms
 GET /socket.io?EIO=4&transport=polling&t=397twex5 404 in 96ms
 GET /api/socket-health 200 in 29ms
 GET /socket.io?EIO=4&transport=polling&t=398lw97y 404 in 92ms
 GET /api/socket-health 200 in 23ms
 GET /socket.io?EIO=4&transport=polling&t=399dg84c 404 in 96ms
 GET /api/socket-health 200 in 29ms
 GET /socket.io?EIO=4&transport=polling&t=39a5dlx5 404 in 97ms
 GET /api/socket-health 200 in 23ms
 GET /socket.io?EIO=4&transport=polling&t=39ax10c6 404 in 93ms
 GET /api/socket-health 200 in 23ms
 GET /socket.io?EIO=4&transport=polling&t=39bov532 404 in 89ms
 GET /api/socket-health 200 in 28ms
 GET /socket.io?EIO=4&transport=polling&t=39cgrth0 404 in 95ms
 GET /api/socket-health 200 in 23ms
 GET /socket.io?EIO=4&transport=polling&t=39d8hrth 404 in 90ms
 GET /api/socket-health 200 in 23ms
 GET /socket.io?EIO=4&transport=polling&t=39e09ey4 404 in 145ms
 GET /api/socket-health 200 in 25ms
 GET /socket.io?EIO=4&transport=polling&t=39es8uch 404 in 92ms
 GET /api/socket-health 200 in 24ms
 GET /socket.io?EIO=4&transport=polling&t=39fjxhuo 404 in 91ms
 GET /api/socket-health 200 in 24ms
 GET /socket.io?EIO=4&transport=polling&t=39gbqesr 404 in 94ms
 GET /api/socket-health 200 in 21ms
 GET /socket.io?EIO=4&transport=polling&t=39h3inlh 404 in 92ms
 GET /api/socket-health 200 in 32ms
 GET /socket.io?EIO=4&transport=polling&t=39hvkiy7 404 in 94ms
 GET /api/socket-health 200 in 22ms
 GET /socket.io?EIO=4&transport=polling&t=39in1v6n 404 in 92ms
 GET /api/socket-health 200 in 24ms
 GET /socket.io?EIO=4&transport=polling&t=39jev5us 404 in 90ms
 GET /api/socket-health 200 in 23ms
 GET /socket.io?EIO=4&transport=polling&t=39k6lspa 404 in 94ms
 GET /api/socket-health 200 in 23ms
 GET /socket.io?EIO=4&transport=polling&t=39kybtof 404 in 125ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
 GET /api/auth/session 200 in 128ms
=== FRIEND REQUEST GET START ===
 GET /api/socket-health 200 in 142ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
Request type: received User: sayantan2@gmail.com
âœ… Database connected
 GET /api/friends 200 in 188ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
 GET /socket.io?EIO=4&transport=polling&t=39luqcc8 404 in 209ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
 GET /api/random-chat/queue 200 in 362ms
âœ… Current user found: {
  id: new ObjectId('6901f85f42c5d010fa811206'),
  email: 'sayantan2@gmail.com',
  friendRequestsCount: 0,
  sentRequestsCount: 1
}
Processing received requests...
Raw friendRequests: []
Processed receivedRequests: []
Populating sender details...
Final populated requests: []
=== FRIEND REQUEST GET END (received) ===
 GET /api/friends/request?type=received 200 in 559ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
=== FRIEND REQUEST GET START ===
 POST /api/users/heartbeat 200 in 454ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
Request type: received User: sayantan2@gmail.com
âœ… Database connected
 POST /api/users/heartbeat 200 in 648ms
âœ… Current user found: {
  id: new ObjectId('6901f85f42c5d010fa811206'),
  email: 'sayantan2@gmail.com',
  friendRequestsCount: 0,
  sentRequestsCount: 1
}
Processing received requests...
Raw friendRequests: []
Processed receivedRequests: []
Populating sender details...
Final populated requests: []
=== FRIEND REQUEST GET END (received) ===
 GET /api/friends/request?type=received 200 in 99ms
=== FRIEND REQUEST GET START ===
 GET /api/random-chat/session 200 in 151ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
Request type: sent User: sayantan2@gmail.com
âœ… Database connected
âœ… Current user found: {
  id: new ObjectId('6901f85f42c5d010fa811206'),
  email: 'sayantan2@gmail.com',
  friendRequestsCount: 0,
  sentRequestsCount: 1
}
Processing sent requests...
Raw sentRequests: [
  {
    from: new ObjectId('6901f85f42c5d010fa811206'),
    fromName: 'sayantan2',
    to: new ObjectId('6905adf16a22b7843b006183'),
    toName: 'sayantan3',
    status: 'pending',
    _id: new ObjectId('6905cdce14ad0d0f020b3985'),
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
Filtering sent request: { status: 'pending', to: new ObjectId('6905adf16a22b7843b006183') }
Mapping sent request: {
  from: new ObjectId('6901f85f42c5d010fa811206'),
  fromName: 'sayantan2',
  to: new ObjectId('6905adf16a22b7843b006183'),
  toName: 'sayantan3',
  status: 'pending',
  _id: new ObjectId('6905cdce14ad0d0f020b3985'),
  createdAt: 2025-11-01T09:07:26.707Z,
  updatedAt: 2025-11-01T09:07:26.707Z
}
Processed sentRequests: [
  {
    id: '6905cdce14ad0d0f020b3985',
    to: {
      id: '6905adf16a22b7843b006183',
      username: 'sayantan3',
      email: '',
      profilePicture: null
    },
    status: 'pending',
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
Populating recipient details...
Looking up recipient: 6905adf16a22b7843b006183
Found recipient: sayantan3
Final populated sent requests: [
  {
    id: '6905cdce14ad0d0f020b3985',
    to: {
      id: '6905adf16a22b7843b006183',
      username: 'sayantan3',
      email: 'sayantan3@gmail.com',
      profilePicture: undefined
    },
    status: 'pending',
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
=== FRIEND REQUEST GET END (sent) ===
 GET /api/friends/request?type=sent 200 in 144ms
=== FRIEND REQUEST GET START ===
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
Request type: sent User: sayantan2@gmail.com
âœ… Database connected
âœ… Current user found: {
  id: new ObjectId('6901f85f42c5d010fa811206'),
  email: 'sayantan2@gmail.com',
  friendRequestsCount: 0,
  sentRequestsCount: 1
}
Processing sent requests...
Raw sentRequests: [
  {
    from: new ObjectId('6901f85f42c5d010fa811206'),
    fromName: 'sayantan2',
    to: new ObjectId('6905adf16a22b7843b006183'),
    toName: 'sayantan3',
    status: 'pending',
    _id: new ObjectId('6905cdce14ad0d0f020b3985'),
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
Filtering sent request: { status: 'pending', to: new ObjectId('6905adf16a22b7843b006183') }
Mapping sent request: {
  from: new ObjectId('6901f85f42c5d010fa811206'),
  fromName: 'sayantan2',
  to: new ObjectId('6905adf16a22b7843b006183'),
  toName: 'sayantan3',
  status: 'pending',
  _id: new ObjectId('6905cdce14ad0d0f020b3985'),
  createdAt: 2025-11-01T09:07:26.707Z,
  updatedAt: 2025-11-01T09:07:26.707Z
}
Processed sentRequests: [
  {
    id: '6905cdce14ad0d0f020b3985',
    to: {
      id: '6905adf16a22b7843b006183',
      username: 'sayantan3',
      email: '',
      profilePicture: null
    },
    status: 'pending',
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
Populating recipient details...
Looking up recipient: 6905adf16a22b7843b006183
 GET /api/users/me 200 in 704ms
 GET /api/friends 200 in 489ms
Found recipient: sayantan3
Final populated sent requests: [
  {
    id: '6905cdce14ad0d0f020b3985',
    to: {
      id: '6905adf16a22b7843b006183',
      username: 'sayantan3',
      email: 'sayantan3@gmail.com',
      profilePicture: undefined
    },
    status: 'pending',
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
=== FRIEND REQUEST GET END (sent) ===
 GET /api/friends/request?type=sent 200 in 124ms
 GET /api/socket-health 200 in 46ms
 GET /socket.io?EIO=4&transport=polling&t=39mimfmn 404 in 226ms
 GET /api/socket-health 200 in 23ms
 GET /socket.io?EIO=4&transport=polling&t=39n9fbob 404 in 111ms
 GET /api/socket-health 200 in 27ms
 GET /socket.io?EIO=4&transport=polling&t=39o1c0qp 404 in 101ms
 GET /api/socket-health 200 in 35ms
 GET /socket.io?EIO=4&transport=polling&t=39otaktn 404 in 118ms
 GET /api/socket-health 200 in 59ms
 GET /socket.io?EIO=4&transport=polling&t=39pmbew5 404 in 107ms
 GET /api/socket-health 200 in 23ms
 GET /socket.io?EIO=4&transport=polling&t=39qcmjyk 404 in 98ms
 GET /api/socket-health 200 in 28ms
 GET /socket.io?EIO=4&transport=polling&t=39r4kz0v 404 in 108ms
 GET /api/socket-health 200 in 23ms
 GET /socket.io?EIO=4&transport=polling&t=39rw9fry 404 in 92ms
 GET /api/socket-health 200 in 29ms
 GET /socket.io?EIO=4&transport=polling&t=39so5m4c 404 in 105ms
 GET /api/socket-health 200 in 29ms
 GET /socket.io?EIO=4&transport=polling&t=39tfsvp4 404 in 95ms
 GET /api/socket-health 200 in 24ms
 GET /socket.io?EIO=4&transport=polling&t=39u7frgh 404 in 104ms
 GET /api/socket-health 200 in 22ms
 GET /socket.io?EIO=4&transport=polling&t=39uz4s70 404 in 108ms
 GET /api/socket-health 200 in 25ms
 GET /socket.io?EIO=4&transport=polling&t=39vrcsfa 404 in 91ms
 GET /api/socket-health 200 in 27ms
 GET /socket.io?EIO=4&transport=polling&t=39wj1tkg 404 in 87ms
 GET /api/socket-health 200 in 22ms
 GET /socket.io?EIO=4&transport=polling&t=39xamfgi 404 in 91ms
 GET /api/socket-health 200 in 23ms
 GET /socket.io?EIO=4&transport=polling&t=39y2d0eq 404 in 85ms
 GET /api/socket-health 200 in 27ms
 GET /socket.io?EIO=4&transport=polling&t=39yu6it1 404 in 116ms
 GET /api/socket-health 200 in 23ms
 GET /socket.io?EIO=4&transport=polling&t=39zlt076 404 in 100ms
 GET /api/socket-health 200 in 28ms
 GET /socket.io?EIO=4&transport=polling&t=3a0drnld 404 in 97ms
 GET /api/socket-health 200 in 24ms
 GET /socket.io?EIO=4&transport=polling&t=3a15rf79 404 in 101ms
 GET /api/socket-health 200 in 24ms
 GET /socket.io?EIO=4&transport=polling&t=3a1xisry 404 in 104ms
 GET /api/socket-health 200 in 25ms
 GET /socket.io?EIO=4&transport=polling&t=3a2pb8x4 404 in 108ms
 GET /api/socket-health 200 in 29ms
 GET /socket.io?EIO=4&transport=polling&t=3a3h1vjb 404 in 96ms
 GET /api/socket-health 200 in 22ms
 GET /socket.io?EIO=4&transport=polling&t=3a48ro89 404 in 93ms
 GET /api/socket-health 200 in 23ms
 GET /socket.io?EIO=4&transport=polling&t=3a50i765 404 in 95ms
 GET /api/socket-health 200 in 22ms
 GET /socket.io?EIO=4&transport=polling&t=3a5s6sof 404 in 92ms
 GET /api/socket-health 200 in 27ms
 GET /socket.io?EIO=4&transport=polling&t=3a6k6jc5 404 in 107ms
 GET /api/socket-health 200 in 29ms
 GET /socket.io?EIO=4&transport=polling&t=3a7bxl0k 404 in 94ms
 GET /api/socket-health 200 in 25ms
 GET /socket.io?EIO=4&transport=polling&t=3a83hzb1 404 in 97ms
 GET /api/socket-health 200 in 22ms
 GET /socket.io?EIO=4&transport=polling&t=3a8viua6 404 in 107ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
=== FRIEND REQUEST GET START ===
 GET /api/socket-health 200 in 93ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
Request type: received User: sayantan2@gmail.com
âœ… Database connected
 GET /socket.io?EIO=4&transport=polling&t=3a9p1if2 404 in 106ms
 GET /api/conversations 200 in 570ms
 POST /api/users/heartbeat 200 in 655ms
âœ… Current user found: {
  id: new ObjectId('6901f85f42c5d010fa811206'),
  email: 'sayantan2@gmail.com',
  friendRequestsCount: 0,
  sentRequestsCount: 1
}
Processing received requests...
Raw friendRequests: []
Processed receivedRequests: []
Populating sender details...
Final populated requests: []
=== FRIEND REQUEST GET END (received) ===
 GET /api/friends/request?type=received 200 in 812ms
=== FRIEND REQUEST GET START ===
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
Request type: sent User: sayantan2@gmail.com
âœ… Database connected
âœ… Current user found: {
  id: new ObjectId('6901f85f42c5d010fa811206'),
  email: 'sayantan2@gmail.com',
  friendRequestsCount: 0,
  sentRequestsCount: 1
}
Processing sent requests...
Raw sentRequests: [
  {
    from: new ObjectId('6901f85f42c5d010fa811206'),
    fromName: 'sayantan2',
    to: new ObjectId('6905adf16a22b7843b006183'),
    toName: 'sayantan3',
    status: 'pending',
    _id: new ObjectId('6905cdce14ad0d0f020b3985'),
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
Filtering sent request: { status: 'pending', to: new ObjectId('6905adf16a22b7843b006183') }
Mapping sent request: {
  from: new ObjectId('6901f85f42c5d010fa811206'),
  fromName: 'sayantan2',
  to: new ObjectId('6905adf16a22b7843b006183'),
  toName: 'sayantan3',
  status: 'pending',
  _id: new ObjectId('6905cdce14ad0d0f020b3985'),
  createdAt: 2025-11-01T09:07:26.707Z,
  updatedAt: 2025-11-01T09:07:26.707Z
}
Processed sentRequests: [
  {
    id: '6905cdce14ad0d0f020b3985',
    to: {
      id: '6905adf16a22b7843b006183',
      username: 'sayantan3',
      email: '',
      profilePicture: null
    },
    status: 'pending',
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
Populating recipient details...
Looking up recipient: 6905adf16a22b7843b006183
Found recipient: sayantan3
Final populated sent requests: [
  {
    id: '6905cdce14ad0d0f020b3985',
    to: {
      id: '6905adf16a22b7843b006183',
      username: 'sayantan3',
      email: 'sayantan3@gmail.com',
      profilePicture: undefined
    },
    status: 'pending',
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
=== FRIEND REQUEST GET END (sent) ===
 GET /api/friends/request?type=sent 200 in 118ms
 GET /api/socket-health 200 in 27ms
 GET /socket.io?EIO=4&transport=polling&t=3aaf4kg8 404 in 95ms
 GET /api/socket-health 200 in 33ms
 GET /socket.io?EIO=4&transport=polling&t=3ab70axe 404 in 116ms
 GET /api/socket-health 200 in 22ms
 GET /socket.io?EIO=4&transport=polling&t=3abyj9ct 404 in 93ms
 GET /api/socket-health 200 in 23ms
 GET /socket.io?EIO=4&transport=polling&t=3acqey2i 404 in 91ms
 GET /api/socket-health 200 in 22ms
 GET /socket.io?EIO=4&transport=polling&t=3adi7tle 404 in 89ms
 GET /api/socket-health 200 in 23ms
 GET /socket.io?EIO=4&transport=polling&t=3ae9sz5x 404 in 101ms
 GET /api/socket-health 200 in 26ms
 GET /socket.io?EIO=4&transport=polling&t=3af1nnep 404 in 94ms
 GET /api/socket-health 200 in 27ms
 GET /socket.io?EIO=4&transport=polling&t=3aftdhiq 404 in 103ms
 GET /api/socket-health 200 in 30ms
 GET /socket.io?EIO=4&transport=polling&t=3aglco1m 404 in 88ms
 GET /api/socket-health 200 in 24ms
 GET /socket.io?EIO=4&transport=polling&t=3ahcumw9 404 in 108ms
 GET /api/socket-health 200 in 26ms
 GET /socket.io?EIO=4&transport=polling&t=3ai4pelo 404 in 84ms
 GET /api/socket-health 200 in 22ms
 GET /socket.io?EIO=4&transport=polling&t=3aiwe7dj 404 in 90ms
 GET /api/socket-health 200 in 22ms
 GET /socket.io?EIO=4&transport=polling&t=3ajo2kh4 404 in 93ms
 GET /api/socket-health 200 in 23ms
 GET /socket.io?EIO=4&transport=polling&t=3akfu3mo 404 in 96ms
 GET /api/socket-health 200 in 28ms
 GET /socket.io?EIO=4&transport=polling&t=3al7rcpv 404 in 94ms
 GET /api/socket-health 200 in 25ms
 GET /socket.io?EIO=4&transport=polling&t=3alzv8xy 404 in 98ms
 GET /api/socket-health 200 in 25ms
 GET /socket.io?EIO=4&transport=polling&t=3amrkkbm 404 in 103ms
 GET /api/socket-health 200 in 24ms
 GET /socket.io?EIO=4&transport=polling&t=3anjcsui 404 in 91ms
 GET /api/socket-health 200 in 22ms
 GET /socket.io?EIO=4&transport=polling&t=3aoayx3p 404 in 95ms
 GET /api/socket-health 200 in 30ms
 GET /socket.io?EIO=4&transport=polling&t=3ap2x9ns 404 in 94ms
 GET /api/socket-health 200 in 24ms
 GET /socket.io?EIO=4&transport=polling&t=3apujv0q 404 in 97ms
 GET /api/socket-health 200 in 23ms
 GET /socket.io?EIO=4&transport=polling&t=3aqm9izp 404 in 100ms
 GET /api/socket-health 200 in 26ms
 GET /socket.io?EIO=4&transport=polling&t=3are2cdj 404 in 107ms
 GET /api/socket-health 200 in 30ms
 GET /socket.io?EIO=4&transport=polling&t=3as5uelt 404 in 98ms
 GET /api/socket-health 200 in 22ms
 GET /socket.io?EIO=4&transport=polling&t=3asxpgg3 404 in 110ms
 GET /api/socket-health 200 in 26ms
 GET /socket.io?EIO=4&transport=polling&t=3atpj31z 404 in 94ms
 GET /api/socket-health 200 in 28ms
 GET /socket.io?EIO=4&transport=polling&t=3auhf9t1 404 in 105ms
 GET /api/socket-health 200 in 26ms
 GET /socket.io?EIO=4&transport=polling&t=3av8xzrb 404 in 98ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
=== FRIEND REQUEST GET START ===
 GET /api/socket-health 200 in 75ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
Request type: received User: sayantan2@gmail.com
âœ… Database connected
âœ… Current user found: {
  id: new ObjectId('6901f85f42c5d010fa811206'),
  email: 'sayantan2@gmail.com',
  friendRequestsCount: 0,
  sentRequestsCount: 1
}
Processing received requests...
Raw friendRequests: []
Processed receivedRequests: []
Populating sender details...
Final populated requests: []
=== FRIEND REQUEST GET END (received) ===
 GET /api/friends/request?type=received 200 in 175ms
=== FRIEND REQUEST GET START ===
 GET /api/friends 200 in 219ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
Request type: sent User: sayantan2@gmail.com
âœ… Database connected
 GET /socket.io?EIO=4&transport=polling&t=3aw2igin 404 in 143ms
âœ… Current user found: {
  id: new ObjectId('6901f85f42c5d010fa811206'),
  email: 'sayantan2@gmail.com',
  friendRequestsCount: 0,
  sentRequestsCount: 1
}
Processing sent requests...
Raw sentRequests: [
  {
    from: new ObjectId('6901f85f42c5d010fa811206'),
    fromName: 'sayantan2',
    to: new ObjectId('6905adf16a22b7843b006183'),
    toName: 'sayantan3',
    status: 'pending',
    _id: new ObjectId('6905cdce14ad0d0f020b3985'),
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
Filtering sent request: { status: 'pending', to: new ObjectId('6905adf16a22b7843b006183') }
Mapping sent request: {
  from: new ObjectId('6901f85f42c5d010fa811206'),
  fromName: 'sayantan2',
  to: new ObjectId('6905adf16a22b7843b006183'),
  toName: 'sayantan3',
  status: 'pending',
  _id: new ObjectId('6905cdce14ad0d0f020b3985'),
  createdAt: 2025-11-01T09:07:26.707Z,
  updatedAt: 2025-11-01T09:07:26.707Z
}
Processed sentRequests: [
  {
    id: '6905cdce14ad0d0f020b3985',
    to: {
      id: '6905adf16a22b7843b006183',
      username: 'sayantan3',
      email: '',
      profilePicture: null
    },
    status: 'pending',
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
Populating recipient details...
Looking up recipient: 6905adf16a22b7843b006183
Found recipient: sayantan3
Final populated sent requests: [
  {
    id: '6905cdce14ad0d0f020b3985',
    to: {
      id: '6905adf16a22b7843b006183',
      username: 'sayantan3',
      email: 'sayantan3@gmail.com',
      profilePicture: undefined
    },
    status: 'pending',
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
=== FRIEND REQUEST GET END (sent) ===
 GET /api/friends/request?type=sent 200 in 126ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
 GET /api/socket-health 200 in 57ms
 GET /socket.io?EIO=4&transport=polling&t=3awtmmti 404 in 128ms
 POST /api/users/heartbeat 200 in 264ms
 GET /api/socket-health 200 in 53ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
 GET /socket.io?EIO=4&transport=polling&t=3axl60xg 404 in 118ms
 GET /api/conversations 200 in 209ms
 GET /api/socket-health 200 in 27ms
 GET /socket.io?EIO=4&transport=polling&t=3ayc8s7v 404 in 95ms
 GET /api/socket-health 200 in 35ms
 GET /socket.io?EIO=4&transport=polling&t=3az465ht 404 in 128ms
 GET /api/socket-health 200 in 25ms
 GET /socket.io?EIO=4&transport=polling&t=3azvodah 404 in 95ms
 GET /api/socket-health 200 in 23ms
 GET /socket.io?EIO=4&transport=polling&t=3b0ngfvr 404 in 99ms
 GET /api/socket-health 200 in 31ms
 GET /socket.io?EIO=4&transport=polling&t=3b1fg6e3 404 in 90ms
 GET /api/socket-health 200 in 23ms
 GET /socket.io?EIO=4&transport=polling&t=3b270880 404 in 93ms
 GET /api/socket-health 200 in 24ms
 GET /socket.io?EIO=4&transport=polling&t=3b2yuzo8 404 in 90ms
 GET /api/socket-health 200 in 23ms
 GET /socket.io?EIO=4&transport=polling&t=3b3qkidr 404 in 93ms
 GET /api/socket-health 200 in 34ms
 GET /socket.io?EIO=4&transport=polling&t=3b4iojij 404 in 102ms
 GET /api/socket-health 200 in 24ms
 GET /socket.io?EIO=4&transport=polling&t=3b5a5878 404 in 111ms
 GET /api/socket-health 200 in 30ms
 GET /socket.io?EIO=4&transport=polling&t=3b620mdq 404 in 114ms
 GET /api/socket-health 200 in 28ms
 GET /socket.io?EIO=4&transport=polling&t=3b6tlz3s 404 in 104ms
 GET /api/socket-health 200 in 25ms
 GET /socket.io?EIO=4&transport=polling&t=3b7ldy4h 404 in 93ms
 GET /api/socket-health 200 in 30ms
 GET /socket.io?EIO=4&transport=polling&t=3b8dbrby 404 in 107ms
 GET /api/socket-health 200 in 24ms
 GET /socket.io?EIO=4&transport=polling&t=3b94uo16 404 in 91ms
 GET /api/socket-health 200 in 22ms
 GET /socket.io?EIO=4&transport=polling&t=3b9wnmpq 404 in 92ms
 GET /api/socket-health 200 in 25ms
 GET /socket.io?EIO=4&transport=polling&t=3baomu57 404 in 94ms
 GET /api/socket-health 200 in 29ms
 GET /socket.io?EIO=4&transport=polling&t=3bbgkj8g 404 in 92ms
 GET /api/socket-health 200 in 23ms
 GET /socket.io?EIO=4&transport=polling&t=3bc86o82 404 in 87ms
 GET /api/socket-health 200 in 21ms
 GET /socket.io?EIO=4&transport=polling&t=3bczmhdl 404 in 98ms
 GET /api/socket-health 200 in 23ms
 GET /socket.io?EIO=4&transport=polling&t=3bdrrvpk 404 in 94ms
 GET /api/socket-health 200 in 22ms
 GET /socket.io?EIO=4&transport=polling&t=3beji2t5 404 in 95ms
 GET /api/socket-health 200 in 33ms
 GET /socket.io?EIO=4&transport=polling&t=3bfbk1i6 404 in 91ms
 GET /api/socket-health 200 in 23ms
 GET /socket.io?EIO=4&transport=polling&t=3bg2x2mf 404 in 95ms
 GET /api/socket-health 200 in 22ms
 GET /socket.io?EIO=4&transport=polling&t=3bgumzsp 404 in 99ms
 GET /api/socket-health 200 in 22ms
 GET /socket.io?EIO=4&transport=polling&t=3bhmh5yk 404 in 95ms
 GET /api/socket-health 200 in 32ms
 GET /socket.io?EIO=4&transport=polling&t=3bieks6t 404 in 97ms
 GET /api/socket-health 200 in 26ms
 GET /socket.io?EIO=4&transport=polling&t=3bj650hy 404 in 108ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
=== FRIEND REQUEST GET START ===
 GET /api/socket-health 200 in 73ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
Request type: received User: sayantan2@gmail.com
âœ… Database connected
 GET /socket.io?EIO=4&transport=polling&t=3bjzdi88 404 in 98ms
 POST /api/users/heartbeat 200 in 257ms
âœ… Current user found: {
  id: new ObjectId('6901f85f42c5d010fa811206'),
  email: 'sayantan2@gmail.com',
  friendRequestsCount: 0,
  sentRequestsCount: 1
}
Processing received requests...
Raw friendRequests: []
Processed receivedRequests: []
Populating sender details...
Final populated requests: []
=== FRIEND REQUEST GET END (received) ===
 GET /api/friends/request?type=received 200 in 517ms
=== FRIEND REQUEST GET START ===
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
Request type: sent User: sayantan2@gmail.com
âœ… Database connected
âœ… Current user found: {
  id: new ObjectId('6901f85f42c5d010fa811206'),
  email: 'sayantan2@gmail.com',
  friendRequestsCount: 0,
  sentRequestsCount: 1
}
Processing sent requests...
Raw sentRequests: [
  {
    from: new ObjectId('6901f85f42c5d010fa811206'),
    fromName: 'sayantan2',
    to: new ObjectId('6905adf16a22b7843b006183'),
    toName: 'sayantan3',
    status: 'pending',
    _id: new ObjectId('6905cdce14ad0d0f020b3985'),
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
Filtering sent request: { status: 'pending', to: new ObjectId('6905adf16a22b7843b006183') }
Mapping sent request: {
  from: new ObjectId('6901f85f42c5d010fa811206'),
  fromName: 'sayantan2',
  to: new ObjectId('6905adf16a22b7843b006183'),
  toName: 'sayantan3',
  status: 'pending',
  _id: new ObjectId('6905cdce14ad0d0f020b3985'),
  createdAt: 2025-11-01T09:07:26.707Z,
  updatedAt: 2025-11-01T09:07:26.707Z
}
Processed sentRequests: [
  {
    id: '6905cdce14ad0d0f020b3985',
    to: {
      id: '6905adf16a22b7843b006183',
      username: 'sayantan3',
      email: '',
      profilePicture: null
    },
    status: 'pending',
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
Populating recipient details...
Looking up recipient: 6905adf16a22b7843b006183
Found recipient: sayantan3
Final populated sent requests: [
  {
    id: '6905cdce14ad0d0f020b3985',
    to: {
      id: '6905adf16a22b7843b006183',
      username: 'sayantan3',
      email: 'sayantan3@gmail.com',
      profilePicture: undefined
    },
    status: 'pending',
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
=== FRIEND REQUEST GET END (sent) ===
 GET /api/friends/request?type=sent 200 in 166ms
 GET /api/socket-health 200 in 27ms
 GET /socket.io?EIO=4&transport=polling&t=3bkptsq8 404 in 95ms
 GET /api/socket-health 200 in 36ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
 GET /socket.io?EIO=4&transport=polling&t=3blhjm5t 404 in 100ms
 GET /api/conversations 200 in 176ms
 GET /api/socket-health 200 in 26ms
 GET /socket.io?EIO=4&transport=polling&t=3bm9emc1 404 in 118ms
 GET /api/socket-health 200 in 24ms
 GET /socket.io?EIO=4&transport=polling&t=3bn0u364 404 in 94ms
 GET /api/socket-health 200 in 27ms
 GET /socket.io?EIO=4&transport=polling&t=3bnsyi32 404 in 107ms
 GET /api/socket-health 200 in 25ms
 GET /socket.io?EIO=4&transport=polling&t=3bokcl0z 404 in 94ms
 GET /api/socket-health 200 in 26ms
 GET /socket.io?EIO=4&transport=polling&t=3bpc5r9s 404 in 103ms
 GET /api/socket-health 200 in 35ms
 GET /socket.io?EIO=4&transport=polling&t=3bq4ibyv 404 in 109ms
 GET /api/socket-health 200 in 22ms
 GET /socket.io?EIO=4&transport=polling&t=3bqvvxo9 404 in 104ms
 GET /api/socket-health 200 in 25ms
 GET /socket.io?EIO=4&transport=polling&t=3brnm5ft 404 in 100ms
 GET /api/socket-health 200 in 32ms
 GET /socket.io?EIO=4&transport=polling&t=3bsfo6t5 404 in 119ms
 GET /api/socket-health 200 in 28ms
 GET /socket.io?EIO=4&transport=polling&t=3bt7a9pc 404 in 118ms
 GET /api/socket-health 200 in 44ms
 GET /socket.io?EIO=4&transport=polling&t=3btzhsvl 404 in 109ms
 GET /api/socket-health 200 in 32ms
 GET /socket.io?EIO=4&transport=polling&t=3buqukzg 404 in 130ms
 GET /api/socket-health 200 in 25ms
 GET /socket.io?EIO=4&transport=polling&t=3bvicopz 404 in 108ms
 GET /api/socket-health 200 in 25ms
 GET /socket.io?EIO=4&transport=polling&t=3bwagljj 404 in 98ms
 GET /api/socket-health 200 in 31ms
 GET /socket.io?EIO=4&transport=polling&t=3bx29daq 404 in 95ms
 GET /api/socket-health 200 in 26ms
 GET /socket.io?EIO=4&transport=polling&t=3bxttbat 404 in 104ms
 GET /api/socket-health 200 in 25ms
 GET /socket.io?EIO=4&transport=polling&t=3bylhj6c 404 in 101ms
 GET /api/socket-health 200 in 26ms
 GET /socket.io?EIO=4&transport=polling&t=3bzdnf9k 404 in 121ms
 GET /api/socket-health 200 in 73ms
 GET /socket.io?EIO=4&transport=polling&t=3c06q40b 404 in 164ms
 GET /api/socket-health 200 in 25ms
 GET /socket.io?EIO=4&transport=polling&t=3c0wui2b 404 in 92ms
 GET /api/socket-health 200 in 24ms
 GET /socket.io?EIO=4&transport=polling&t=3c1oowpz 404 in 91ms
 GET /api/socket-health 200 in 23ms
 GET /socket.io?EIO=4&transport=polling&t=3c2gdo7g 404 in 93ms
 GET /api/socket-health 200 in 29ms
 GET /socket.io?EIO=4&transport=polling&t=3c38a6fs 404 in 111ms
 GET /api/socket-health 200 in 31ms
 GET /socket.io?EIO=4&transport=polling&t=3c404dkr 404 in 101ms
 GET /api/socket-health 200 in 22ms
 GET /socket.io?EIO=4&transport=polling&t=3c4rm1sz 404 in 90ms
 GET /api/socket-health 200 in 22ms
 GET /socket.io?EIO=4&transport=polling&t=3c5jfhem 404 in 89ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
=== FRIEND REQUEST GET START ===
 GET /api/socket-health 200 in 58ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
Request type: received User: sayantan2@gmail.com
âœ… Database connected
âœ… Current user found: {
  id: new ObjectId('6901f85f42c5d010fa811206'),
  email: 'sayantan2@gmail.com',
  friendRequestsCount: 0,
  sentRequestsCount: 1
}
Processing received requests...
Raw friendRequests: []
Processed receivedRequests: []
Populating sender details...
Final populated requests: []
=== FRIEND REQUEST GET END (received) ===
 GET /api/friends/request?type=received 200 in 152ms
=== FRIEND REQUEST GET START ===
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
Request type: sent User: sayantan2@gmail.com
âœ… Database connected
 GET /socket.io?EIO=4&transport=polling&t=3c6cxdun 404 in 118ms
 GET /api/friends 200 in 204ms
âœ… Current user found: {
  id: new ObjectId('6901f85f42c5d010fa811206'),
  email: 'sayantan2@gmail.com',
  friendRequestsCount: 0,
  sentRequestsCount: 1
}
Processing sent requests...
Raw sentRequests: [
  {
    from: new ObjectId('6901f85f42c5d010fa811206'),
    fromName: 'sayantan2',
    to: new ObjectId('6905adf16a22b7843b006183'),
    toName: 'sayantan3',
    status: 'pending',
    _id: new ObjectId('6905cdce14ad0d0f020b3985'),
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
Filtering sent request: { status: 'pending', to: new ObjectId('6905adf16a22b7843b006183') }
Mapping sent request: {
  from: new ObjectId('6901f85f42c5d010fa811206'),
  fromName: 'sayantan2',
  to: new ObjectId('6905adf16a22b7843b006183'),
  toName: 'sayantan3',
  status: 'pending',
  _id: new ObjectId('6905cdce14ad0d0f020b3985'),
  createdAt: 2025-11-01T09:07:26.707Z,
  updatedAt: 2025-11-01T09:07:26.707Z
}
Processed sentRequests: [
  {
    id: '6905cdce14ad0d0f020b3985',
    to: {
      id: '6905adf16a22b7843b006183',
      username: 'sayantan3',
      email: '',
      profilePicture: null
    },
    status: 'pending',
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
Populating recipient details...
Looking up recipient: 6905adf16a22b7843b006183
Found recipient: sayantan3
Final populated sent requests: [
  {
    id: '6905cdce14ad0d0f020b3985',
    to: {
      id: '6905adf16a22b7843b006183',
      username: 'sayantan3',
      email: 'sayantan3@gmail.com',
      profilePicture: undefined
    },
    status: 'pending',
    createdAt: 2025-11-01T09:07:26.707Z,
    updatedAt: 2025-11-01T09:07:26.707Z
  }
]
=== FRIEND REQUEST GET END (sent) ===
 GET /api/friends/request?type=sent 200 in 123ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
 GET /api/socket-health 200 in 48ms
 GET /socket.io?EIO=4&transport=polling&t=3c73qa1q 404 in 94ms
 POST /api/users/heartbeat 200 in 229ms
 GET /api/socket-health 200 in 24ms
 GET /socket.io?EIO=4&transport=polling&t=3c7uxffz 404 in 100ms
 GET /api/socket-health 200 in 23ms
 GET /socket.io?EIO=4&transport=polling&t=3c8ms0j5 404 in 108ms
 GET /api/socket-health 200 in 47ms
NextAuth session callback: {
  hasSession: true,
  hasToken: true,
  tokenKeys: [
    'name',     'email',
    'sub',      'userId',
    'username', 'iat',
    'exp',      'jti'
  ],
  sessionUserEmail: 'sayantan2@gmail.com'
}
Session populated with token data: {
  userId: '6901f85f42c5d010fa811206',
  email: 'sayantan2@gmail.com',
  username: 'sayantan2'
}
 GET /socket.io?EIO=4&transport=polling&t=3c9f5wkj 404 in 97ms
 GET /api/conversations 200 in 180ms
 GET /api/socket-health 200 in 26ms
 GET /socket.io?EIO=4&transport=polling&t=3ca6ao65 404 in 96ms
 GET /api/socket-health 200 in 29ms
 GET /socket.io?EIO=4&transport=polling&t=3cay2u92 404 in 103ms
 GET /api/socket-health 200 in 24ms
 GET /socket.io?EIO=4&transport=polling&t=3cbq1c31 404 in 85ms
 GET /api/socket-health 200 in 24ms
 GET /socket.io?EIO=4&transport=polling&t=3cchrd94 404 in 90ms
 GET /api/socket-health 200 in 23ms
 GET /socket.io?EIO=4&transport=polling&t=3cd955hh 404 in 99ms
 GET /api/socket-health 200 in 30ms
 GET /socket.io?EIO=4&transport=polling&t=3ce1ikls 404 in 99ms
 GET /api/socket-health 200 in 33ms
 GET /socket.io?EIO=4&transport=polling&t=3cetcfex 404 in 93ms
 GET /api/socket-health 200 in 25ms
 GET /socket.io?EIO=4&transport=polling&t=3cfkwvqb 404 in 97ms
 GET /api/socket-health 200 in 23ms
 GET /socket.io?EIO=4&transport=polling&t=3cgcb1nf 404 in 94ms
 GET /api/socket-health 200 in 22ms
 GET /socket.io?EIO=4&transport=polling&t=3ch4fmnu 404 in 92ms
 GET /api/socket-health 200 in 25ms
 GET /socket.io?EIO=4&transport=polling&t=3chw8b40 404 in 88ms
 GET /api/socket-health 200 in 45ms
 GET /socket.io?EIO=4&transport=polling&t=3cioknbr 404 in 106ms
 GET /api/socket-health 200 in 23ms
 GET /socket.io?EIO=4&transport=polling&t=3cjfdeto 404 in 95ms
 GET /api/socket-health 200 in 26ms
 GET /socket.io?EIO=4&transport=polling&t=3ck7d7yo 404 in 118ms
 GET /api/socket-health 200 in 24ms
 GET /socket.io?EIO=4&transport=polling&t=3ckz2v1w 404 in 95ms
 GET /api/socket-health 200 in 28ms
 GET /socket.io?EIO=4&transport=polling&t=3clqxm6k 404 in 94ms
 GET /api/socket-health 200 in 23ms
 GET /socket.io?EIO=4&transport=polling&t=3cmij9b5 404 in 106ms
 GET /api/socket-health 200 in 24ms
 GET /socket.io?EIO=4&transport=polling&t=3cnaazmo 404 in 95ms
 GET /api/socket-health 200 in 23ms
 GET /socket.io?EIO=4&transport=polling&t=3co25u6d 404 in 88ms
 GET /api/socket-health 200 in 23ms
 GET /socket.io?EIO=4&transport=polling&t=3cotvu7z 404 in 99ms
 GET /api/socket-health 200 in 31ms
 GET /socket.io?EIO=4&transport=polling&t=3cpm752c 404 in 93ms
 GET /api/socket-health 200 in 24ms
 GET /socket.io?EIO=4&transport=polling&t=3cqdhiph 404 in 93ms
 GET /api/socket-health 200 in 25ms
 GET /socket.io?EIO=4&transport=polling&t=3cr58bdc 404 in 99ms
 GET /api/socket-health 200 in 22ms
 GET /socket.io?EIO=4&transport=polling&t=3crwzwd1 404 in 101ms
[?25h
